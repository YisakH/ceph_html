<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="ko">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: D:/git/ceph/src/rgw/rgw_crypt.cc 파일 참조</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 다음에 의해 생성됨 :  Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','검색');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('rgw__crypt_8cc.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">로딩중...</div>
<div class="SRStatus" id="Searching">검색중...</div>
<div class="SRStatus" id="NoMatches">일치하는것 없음</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">클래스</a> &#124;
<a href="#define-members">매크로</a> &#124;
<a href="#typedef-members">타입정의</a> &#124;
<a href="#enum-members">열거형 타입</a> &#124;
<a href="#func-members">함수</a> &#124;
<a href="#var-members">변수</a>  </div>
  <div class="headertitle"><div class="title">rgw_crypt.cc 파일 참조</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;string_view&gt;</code><br />
<code>#include &lt;<a class="el" href="rgw__op_8h_source.html">rgw/rgw_op.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="rgw__crypt_8h_source.html">rgw/rgw_crypt.h</a>&gt;</code><br />
<code>#include &lt;auth/Crypto.h&gt;</code><br />
<code>#include &lt;<a class="el" href="rgw__b64_8h_source.html">rgw/rgw_b64.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="rgw__rest__s3_8h_source.html">rgw/rgw_rest_s3.h</a>&gt;</code><br />
<code>#include &quot;include/ceph_assert.h&quot;</code><br />
<code>#include &quot;crypto/crypto_accel.h&quot;</code><br />
<code>#include &quot;crypto/crypto_plugin.h&quot;</code><br />
<code>#include &quot;<a class="el" href="rgw__kms_8h_source.html">rgw/rgw_kms.h</a>&quot;</code><br />
<code>#include &quot;rapidjson/document.h&quot;</code><br />
<code>#include &quot;rapidjson/writer.h&quot;</code><br />
<code>#include &quot;rapidjson/error/error.h&quot;</code><br />
<code>#include &quot;rapidjson/error/en.h&quot;</code><br />
<code>#include &lt;unicode/normalizer2.h&gt;</code><br />
<code>#include &lt;openssl/evp.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
rgw_crypt.cc에 대한 include 의존 그래프</div>
<div class="dyncontent">
<div class="center"><img src="rgw__crypt_8cc__incl.png" border="0" usemap="#a_d_1_2git_2ceph_2src_2rgw_2rgw__crypt_8cc" alt=""/></div>
<map name="a_d_1_2git_2ceph_2src_2rgw_2rgw__crypt_8cc" id="a_d_1_2git_2ceph_2src_2rgw_2rgw__crypt_8cc">
<area shape="rect" title=" " alt="" coords="3323,5,3453,48"/>
<area shape="rect" title=" " alt="" coords="3090,725,3174,752"/>
<area shape="poly" title=" " alt="" coords="3324,47,3285,67,3269,81,3256,97,3253,109,3256,122,3262,184,3271,231,3278,278,3281,340,3281,591,3279,613,3271,634,3244,670,3210,699,3175,720,3172,716,3207,694,3240,666,3266,631,3273,612,3276,590,3276,340,3273,279,3265,232,3257,184,3251,123,3248,109,3251,95,3265,77,3282,63,3321,42"/>
<area shape="rect" href="rgw__op_8h.html" title=" " alt="" coords="1427,245,1525,272"/>
<area shape="poly" title=" " alt="" coords="3322,37,2802,89,2438,129,2066,173,1772,214,1541,250,1540,244,1771,209,2065,168,2437,123,2802,84,3322,32"/>
<area shape="rect" title=" " alt="" coords="2941,576,3089,603"/>
<area shape="poly" title=" " alt="" coords="3323,42,3264,62,3236,78,3211,98,3194,118,3185,136,3181,156,3180,183,3180,343,3176,379,3165,414,3149,447,3129,478,3085,530,3044,568,3040,564,3081,527,3125,474,3144,444,3160,412,3171,378,3175,343,3175,183,3176,156,3180,134,3190,115,3207,94,3233,73,3262,57,3322,37"/>
<area shape="rect" href="rgw__crypt_8h.html" title=" " alt="" coords="2871,96,2983,123"/>
<area shape="poly" title=" " alt="" coords="3323,42,2999,98,2998,93,3322,37"/>
<area shape="rect" href="rgw__rest__s3_8h.html" title=" " alt="" coords="2964,171,3090,197"/>
<area shape="poly" title=" " alt="" coords="3323,36,3274,43,3219,55,3162,73,3109,98,3073,127,3045,160,3041,156,3069,124,3107,94,3160,68,3217,50,3273,38,3322,31"/>
<area shape="rect" title=" " alt="" coords="3265,96,3364,123"/>
<area shape="poly" title=" " alt="" coords="3371,50,3338,86,3335,82,3367,47"/>
<area shape="rect" href="rgw__b64_8h.html" title=" " alt="" coords="3036,651,3140,677"/>
<area shape="poly" title=" " alt="" coords="3323,40,3260,57,3197,84,3170,103,3149,125,3134,152,3129,183,3129,260,3125,432,3104,603,3098,636,3092,635,3099,602,3120,432,3124,260,3124,182,3129,150,3144,122,3166,99,3194,80,3258,52,3322,35"/>
<area shape="rect" title=" " alt="" coords="3388,96,3535,123"/>
<area shape="poly" title=" " alt="" coords="3409,47,3441,82,3438,86,3405,50"/>
<area shape="rect" title=" " alt="" coords="3559,96,3708,123"/>
<area shape="poly" title=" " alt="" coords="3452,46,3581,88,3579,93,3450,51"/>
<area shape="rect" href="rgw__kms_8h.html" title=" " alt="" coords="187,171,296,197"/>
<area shape="poly" title=" " alt="" coords="3322,33,2646,56,1653,99,866,144,311,181,311,175,866,139,1653,93,2645,51,3322,27"/>
<area shape="rect" title=" " alt="" coords="3733,96,3878,123"/>
<area shape="poly" title=" " alt="" coords="3454,38,3725,90,3724,95,3453,43"/>
<area shape="rect" title=" " alt="" coords="3902,96,4021,123"/>
<area shape="poly" title=" " alt="" coords="3454,34,3887,93,3886,98,3453,39"/>
<area shape="rect" title=" " alt="" coords="4045,96,4190,123"/>
<area shape="poly" title=" " alt="" coords="3454,31,3702,56,4030,93,4029,98,3702,61,3453,37"/>
<area shape="rect" title=" " alt="" coords="4214,96,4346,123"/>
<area shape="poly" title=" " alt="" coords="3454,29,3770,52,3981,70,4199,93,4198,98,3981,76,3770,57,3453,35"/>
<area shape="rect" title=" " alt="" coords="4370,96,4518,123"/>
<area shape="poly" title=" " alt="" coords="3454,28,3832,50,4089,69,4355,93,4354,98,4089,74,3832,55,3453,34"/>
<area shape="rect" title=" " alt="" coords="4542,96,4642,123"/>
<area shape="poly" title=" " alt="" coords="3453,26,3636,31,3899,41,4208,61,4527,93,4526,98,4208,66,3899,47,3636,36,3453,32"/>
<area shape="rect" title=" " alt="" coords="198,328,261,355"/>
<area shape="poly" title=" " alt="" coords="1427,263,1197,266,864,275,526,293,386,306,281,323,271,325,270,320,279,317,385,301,526,288,864,270,1197,261,1427,258"/>
<area shape="rect" title=" " alt="" coords="2007,651,2057,677"/>
<area shape="poly" title=" " alt="" coords="1525,258,2180,276,2532,294,2650,305,2687,311,2707,318,2733,341,2747,366,2752,395,2753,431,2753,516,2747,542,2730,564,2702,584,2667,600,2577,627,2469,645,2354,656,2243,663,2073,666,2073,660,2243,657,2354,651,2468,639,2576,621,2665,595,2700,579,2726,560,2742,539,2748,516,2748,431,2747,396,2742,368,2729,344,2704,322,2686,316,2649,310,2531,299,2180,282,1525,264"/>
<area shape="rect" title=" " alt="" coords="502,419,570,445"/>
<area shape="poly" title=" " alt="" coords="1427,263,1268,266,1056,275,846,293,760,306,696,323,656,340,619,363,561,410,558,406,616,359,654,336,694,317,758,301,845,288,1055,270,1268,261,1427,258"/>
<area shape="rect" title=" " alt="" coords="1021,725,1075,752"/>
<area shape="poly" title=" " alt="" coords="1427,263,1142,267,736,277,537,284,365,294,242,307,205,314,187,322,177,336,167,357,159,385,156,418,160,457,173,501,197,549,235,601,269,619,331,642,434,675,598,704,762,722,904,731,1006,734,1006,740,904,736,761,728,597,710,433,680,330,647,267,624,232,605,193,552,168,503,155,458,151,418,154,384,162,355,172,333,184,318,203,309,241,302,365,289,536,279,736,271,1142,262,1427,258"/>
<area shape="rect" title=" " alt="" coords="246,576,285,603"/>
<area shape="poly" title=" " alt="" coords="1427,263,1199,266,883,275,725,283,586,293,480,306,443,314,420,322,369,358,338,396,315,443,289,502,278,532,272,561,267,560,273,531,284,500,310,440,333,393,365,354,417,318,442,309,479,301,586,288,725,278,882,270,1199,261,1427,258"/>
<area shape="rect" title=" " alt="" coords="1302,725,1349,752"/>
<area shape="poly" title=" " alt="" coords="1525,257,1793,256,2177,262,2369,269,2539,280,2669,296,2714,306,2743,318,2773,340,2791,364,2801,393,2804,431,2804,516,2802,536,2795,553,2785,565,2772,575,2740,590,2701,605,2647,625,2580,642,2414,672,2219,695,2012,712,1620,732,1364,739,1364,734,1620,727,2012,707,2219,690,2413,667,2578,637,2645,620,2699,600,2738,585,2770,570,2782,561,2791,550,2797,535,2799,516,2799,431,2796,394,2787,367,2769,344,2740,322,2712,311,2668,301,2538,285,2369,274,2177,267,1793,262,1525,262"/>
<area shape="rect" title=" " alt="" coords="1034,419,1089,445"/>
<area shape="poly" title=" " alt="" coords="1427,264,1344,269,1247,280,1158,297,1124,308,1100,322,1085,339,1075,360,1065,404,1060,402,1070,359,1081,337,1097,318,1122,303,1157,291,1247,274,1344,264,1427,259"/>
<area shape="rect" title=" " alt="" coords="2775,725,2902,752"/>
<area shape="poly" title=" " alt="" coords="1525,258,1826,263,2258,275,2656,293,2790,304,2832,311,2855,318,2882,341,2897,365,2904,395,2905,431,2905,591,2901,626,2889,659,2859,714,2855,711,2885,657,2896,624,2900,590,2900,431,2899,395,2892,368,2878,344,2852,322,2831,316,2790,309,2656,298,2258,280,1826,269,1525,263"/>
<area shape="rect" title=" " alt="" coords="1249,320,1389,363"/>
<area shape="poly" title=" " alt="" coords="1453,275,1374,315,1371,310,1450,270"/>
<area shape="rect" title=" " alt="" coords="1412,328,1540,355"/>
<area shape="poly" title=" " alt="" coords="1479,273,1479,313,1473,313,1473,273"/>
<area shape="rect" title=" " alt="" coords="594,411,726,453"/>
<area shape="poly" title=" " alt="" coords="1427,264,1050,283,855,301,785,311,745,322,724,338,706,357,678,398,674,395,701,353,720,334,743,318,784,306,854,295,1050,278,1427,259"/>
<area shape="rect" title=" " alt="" coords="1564,328,1684,355"/>
<area shape="poly" title=" " alt="" coords="1500,270,1589,318,1586,323,1498,275"/>
<area shape="rect" title=" " alt="" coords="1708,328,1826,355"/>
<area shape="poly" title=" " alt="" coords="1524,270,1697,317,1709,321,1707,326,1695,323,1522,275"/>
<area shape="rect" title=" " alt="" coords="1850,328,1958,355"/>
<area shape="poly" title=" " alt="" coords="1525,263,1666,284,1838,317,1851,321,1850,326,1837,323,1665,290,1525,269"/>
<area shape="rect" title=" " alt="" coords="1982,328,2127,355"/>
<area shape="poly" title=" " alt="" coords="1526,262,1720,282,1845,298,1970,317,1990,321,1989,327,1969,323,1844,303,1720,287,1525,267"/>
<area shape="rect" title=" " alt="" coords="59,725,205,752"/>
<area shape="poly" title=" " alt="" coords="1427,263,1128,269,699,280,304,298,171,310,130,316,109,322,83,344,67,367,60,395,59,431,59,590,64,625,77,658,95,688,112,712,108,715,90,691,72,661,59,627,53,591,53,431,55,394,63,365,79,341,107,318,129,311,171,304,304,293,699,275,1128,264,1427,258"/>
<area shape="rect" href="rgw__common_8h.html" title=" " alt="" coords="1136,576,1245,603"/>
<area shape="poly" title=" " alt="" coords="1427,264,1352,269,1267,279,1191,296,1163,308,1145,322,1128,350,1121,381,1121,414,1127,448,1150,512,1177,562,1172,564,1146,514,1122,449,1116,415,1115,380,1123,348,1141,318,1160,303,1190,291,1266,273,1352,263,1427,259"/>
<area shape="rect" href="rgw__acl_8h.html" title=" " alt="" coords="2738,651,2814,677"/>
<area shape="poly" title=" " alt="" coords="1525,258,1820,263,2242,273,2629,291,2760,303,2800,310,2821,318,2844,342,2854,367,2855,396,2855,431,2855,516,2849,552,2836,586,2818,616,2800,640,2796,637,2813,613,2831,584,2844,551,2849,516,2849,431,2850,396,2848,369,2840,345,2819,322,2799,315,2759,309,2629,297,2242,279,1820,268,1525,263"/>
<area shape="rect" href="rgw__cors_8h.html" title=" " alt="" coords="1243,651,1328,677"/>
<area shape="poly" title=" " alt="" coords="1525,258,1791,264,2166,275,2507,293,2622,304,2658,311,2676,318,2697,343,2704,368,2703,431,2703,516,2699,530,2689,542,2654,565,2598,584,2526,600,2341,626,2122,644,1890,656,1668,662,1343,666,1343,660,1667,657,1889,650,2121,639,2341,621,2525,595,2597,579,2651,560,2686,539,2694,527,2697,516,2697,431,2699,369,2693,345,2673,322,2656,316,2621,309,2507,298,2165,280,1791,269,1525,263"/>
<area shape="rect" href="rgw__quota_8h.html" title=" " alt="" coords="722,651,814,677"/>
<area shape="poly" title=" " alt="" coords="1427,265,1092,284,921,301,860,311,827,322,797,344,779,367,768,394,765,431,765,516,769,635,764,635,760,516,760,431,763,393,774,364,794,340,824,318,859,306,920,295,1091,278,1427,259"/>
<area shape="rect" href="rgw__object__lock_8h.html" title=" " alt="" coords="195,651,320,677"/>
<area shape="poly" title=" " alt="" coords="1427,263,1133,266,713,276,506,283,328,294,200,307,161,314,143,322,124,346,113,369,109,392,110,415,124,467,144,527,159,561,181,592,229,639,226,643,177,595,154,564,139,529,119,468,105,416,104,392,108,367,120,343,140,318,160,309,200,301,328,288,506,278,713,270,1133,261,1427,258"/>
<area shape="rect" href="rgw__tag_8h.html" title=" " alt="" coords="1091,651,1168,677"/>
<area shape="poly" title=" " alt="" coords="1427,265,1298,271,1138,283,995,300,945,310,919,322,897,346,880,370,869,394,863,418,862,444,867,470,877,498,892,527,909,550,929,571,977,606,1029,631,1077,647,1075,652,1027,636,975,610,925,575,904,554,887,529,872,500,862,471,857,444,858,418,864,392,876,367,893,342,916,318,944,305,994,294,1137,277,1298,266,1427,259"/>
<area shape="rect" href="rgw__public__access_8h.html" title=" " alt="" coords="858,651,1001,677"/>
<area shape="poly" title=" " alt="" coords="1427,262,1300,263,1139,270,1058,278,984,288,923,303,879,322,849,344,830,367,819,394,816,431,816,516,818,535,824,554,844,588,871,617,899,639,895,643,867,621,840,591,819,556,813,536,811,516,811,431,814,393,825,364,845,340,876,318,921,298,983,283,1057,272,1138,265,1300,258,1427,257"/>
<area shape="rect" href="rgw__dmclock_8h.html" title=" " alt="" coords="2203,328,2312,355"/>
<area shape="poly" title=" " alt="" coords="1525,258,1643,263,1807,273,1994,290,2184,317,2202,321,2201,326,2184,323,1994,296,1806,278,1643,268,1525,264"/>
<area shape="rect" href="rgw__sal_8h.html" title="Base abstractions and API for SAL" alt="" coords="1767,419,1844,445"/>
<area shape="poly" title=" " alt="" coords="1525,258,1677,262,1872,272,2047,289,2108,302,2129,310,2142,318,2154,335,2159,350,2157,364,2149,377,2119,396,2074,410,2020,420,1963,427,1859,433,1859,427,1963,422,2020,415,2073,405,2116,391,2145,373,2152,362,2154,351,2149,337,2138,322,2127,314,2107,307,2047,295,1872,277,1677,267,1525,263"/>
<area shape="rect" href="rgw__user_8h.html" title=" " alt="" coords="1763,501,1848,528"/>
<area shape="poly" title=" " alt="" coords="1525,258,1759,264,2079,276,2367,294,2463,305,2493,311,2508,318,2519,338,2516,357,2499,374,2472,390,2393,420,2289,446,2172,468,2055,486,1864,510,1863,505,2054,481,2172,463,2288,440,2391,415,2470,386,2496,370,2511,354,2514,338,2505,322,2491,316,2463,310,2367,299,2078,281,1758,270,1525,264"/>
<area shape="poly" title=" " alt="" coords="1525,258,1839,262,2294,273,2714,291,2855,303,2900,310,2923,318,2943,354,2967,421,3010,560,3005,562,2962,423,2938,356,2920,322,2898,315,2855,308,2714,296,2294,278,1839,268,1525,263"/>
<area shape="rect" href="rgw__bucket_8h.html" title=" " alt="" coords="487,328,585,355"/>
<area shape="poly" title=" " alt="" coords="1427,263,1288,266,1086,275,853,293,615,323,595,327,594,321,614,317,852,287,1086,270,1287,261,1427,258"/>
<area shape="rect" href="rgw__putobj_8h.html" title=" " alt="" coords="2569,328,2663,355"/>
<area shape="poly" title=" " alt="" coords="1525,258,2031,276,2331,294,2457,305,2551,317,2567,321,2566,326,2550,323,2456,310,2331,299,2031,282,1525,264"/>
<area shape="rect" href="rgw__compression__types_8h.html" title=" " alt="" coords="902,501,1074,528"/>
<area shape="poly" title=" " alt="" coords="1427,265,1302,271,1148,282,1012,299,966,310,942,322,930,340,925,361,926,383,931,406,950,451,972,487,967,490,945,453,926,408,921,384,920,361,925,338,938,318,964,305,1011,294,1148,277,1302,265,1427,259"/>
<area shape="rect" href="rgw__log_8h.html" title=" " alt="" coords="953,328,1029,355"/>
<area shape="poly" title=" " alt="" coords="1428,266,1259,285,1154,301,1049,323,1038,325,1037,320,1047,317,1153,296,1258,279,1427,261"/>
<area shape="rect" href="rgw__lc_8h.html" title=" " alt="" coords="1155,328,1224,355"/>
<area shape="poly" title=" " alt="" coords="1428,272,1338,293,1237,323,1231,324,1230,319,1235,317,1337,288,1426,267"/>
<area shape="rect" href="rgw__torrent_8h.html" title=" " alt="" coords="299,501,395,528"/>
<area shape="poly" title=" " alt="" coords="1427,263,1211,268,913,278,634,296,533,308,476,322,452,337,431,356,397,400,373,447,357,488,352,486,368,445,392,398,427,352,449,333,474,318,532,303,633,291,912,273,1211,263,1427,258"/>
<area shape="rect" title=" " alt="" coords="2335,328,2494,355"/>
<area shape="poly" title=" " alt="" coords="1525,258,1663,263,1861,273,2091,290,2324,317,2349,322,2348,327,2324,323,2090,295,1860,278,1662,268,1525,264"/>
<area shape="poly" title=" " alt="" coords="1246,588,1553,591,2012,600,2482,618,2679,631,2827,648,2898,662,2968,680,3084,717,3083,722,2967,685,2897,667,2826,653,2678,637,2482,623,2011,605,1553,597,1246,594"/>
<area shape="poly" title=" " alt="" coords="1246,593,1991,657,1991,662,1246,598"/>
<area shape="poly" title=" " alt="" coords="1246,591,2722,658,2722,663,1246,596"/>
<area shape="poly" title=" " alt="" coords="1209,601,1259,639,1255,643,1206,605"/>
<area shape="poly" title=" " alt="" coords="1136,603,830,655,829,650,1135,597"/>
<area shape="poly" title=" " alt="" coords="1136,598,336,659,335,654,1135,592"/>
<area shape="poly" title=" " alt="" coords="1182,605,1152,641,1148,637,1178,601"/>
<area shape="poly" title=" " alt="" coords="1146,606,991,649,989,643,1144,601"/>
<area shape="poly" title=" " alt="" coords="2815,671,2834,675,3075,723,3074,729,2833,680,2814,676"/>
<area shape="poly" title=" " alt="" coords="2738,669,1291,728,1091,738,1090,732,1291,723,2737,664"/>
<area shape="poly" title=" " alt="" coords="2738,677,2719,680,2590,692,2419,703,2012,721,1364,739,1363,734,2012,716,2419,698,2590,687,2718,675,2737,672"/>
<area shape="poly" title=" " alt="" coords="2789,676,2820,712,2816,715,2785,680"/>
<area shape="poly" title=" " alt="" coords="1245,680,1090,727,1089,722,1243,675"/>
<area shape="poly" title=" " alt="" coords="1295,677,1313,710,1309,713,1290,679"/>
<area shape="poly" title=" " alt="" coords="321,672,339,675,726,712,1006,732,1006,737,725,717,338,680,320,678"/>
<area shape="poly" title=" " alt="" coords="237,680,168,720,165,715,234,676"/>
<area shape="poly" title=" " alt="" coords="1117,680,1075,717,1071,713,1113,676"/>
<area shape="poly" title=" " alt="" coords="1164,675,1289,721,1287,726,1163,680"/>
<area shape="poly" title=" " alt="" coords="1808,446,1808,486,1803,486,1803,446"/>
<area shape="poly" title=" " alt="" coords="1763,525,1666,541,1533,568,1382,605,1232,653,1206,665,1181,680,1090,722,1088,717,1179,675,1204,661,1230,648,1381,600,1532,562,1665,536,1762,520"/>
<area shape="poly" title=" " alt="" coords="1763,524,1261,582,1260,577,1762,518"/>
<area shape="poly" title=" " alt="" coords="1848,516,2925,580,2925,585,1848,521"/>
<area shape="poly" title=" " alt="" coords="539,355,539,403,533,403,533,355"/>
<area shape="poly" title=" " alt="" coords="522,357,498,381,478,412,473,432,479,452,499,497,521,534,543,564,568,589,629,631,712,675,750,692,789,705,870,723,946,732,1006,735,1006,740,945,737,870,728,788,710,748,697,710,680,626,636,565,593,539,567,516,537,495,500,473,454,468,432,474,410,494,377,518,353"/>
<area shape="poly" title=" " alt="" coords="555,353,620,399,617,404,552,357"/>
<area shape="poly" title=" " alt="" coords="506,358,453,381,396,413,316,466,257,514,208,570,158,652,146,681,139,711,134,709,141,680,154,649,203,567,253,510,313,462,393,408,451,376,503,353"/>
<area shape="poly" title=" " alt="" coords="525,357,507,377,491,402,484,428,485,440,491,452,509,469,534,484,600,511,682,533,775,550,966,573,1121,583,1121,588,965,578,774,555,681,538,598,516,532,489,506,473,487,455,480,442,478,428,486,400,503,374,521,353"/>
<area shape="poly" title=" " alt="" coords="586,343,1752,424,1752,430,586,349"/>
<area shape="poly" title=" " alt="" coords="2569,355,2507,365,2321,388,2137,407,1859,430,1859,424,2136,402,2320,383,2506,360,2568,350"/>
<area shape="poly" title=" " alt="" coords="1024,526,1142,568,1140,573,1022,531"/>
<area shape="poly" title=" " alt="" coords="1003,354,1044,405,1040,408,999,357"/>
<area shape="poly" title=" " alt="" coords="953,356,742,412,740,407,951,350"/>
<area shape="poly" title=" " alt="" coords="994,355,1002,400,1010,427,1024,452,1038,468,1052,478,1088,499,1167,564,1163,568,1085,504,1050,482,1034,472,1019,455,1005,429,997,401,989,356"/>
<area shape="poly" title=" " alt="" coords="1187,356,1081,652,1060,711,1055,710,1076,650,1182,354"/>
<area shape="poly" title=" " alt="" coords="1221,353,1265,376,1313,411,1335,432,1352,457,1364,484,1368,513,1368,591,1365,624,1358,657,1340,712,1335,710,1353,655,1360,623,1363,591,1363,514,1359,485,1347,459,1330,436,1310,415,1262,381,1218,358"/>
<area shape="poly" title=" " alt="" coords="1199,354,1214,385,1231,428,1240,478,1240,504,1235,529,1226,548,1215,565,1210,562,1221,546,1229,527,1234,503,1235,478,1226,429,1210,387,1194,356"/>
<area shape="poly" title=" " alt="" coords="1206,353,1230,377,1250,409,1272,463,1285,509,1286,531,1282,554,1274,578,1259,604,1248,616,1229,627,1182,647,1180,643,1226,622,1244,611,1255,601,1269,576,1277,553,1280,531,1279,510,1267,465,1246,412,1226,381,1203,357"/>
<area shape="poly" title=" " alt="" coords="1216,353,1237,360,1381,391,1525,411,1654,422,1751,427,1751,432,1653,427,1524,416,1380,396,1235,365,1214,358"/>
<area shape="poly" title=" " alt="" coords="355,527,371,559,396,600,431,642,452,660,475,675,518,692,579,705,730,723,886,732,1006,734,1006,740,886,737,730,728,578,710,517,697,472,680,449,664,428,645,392,603,366,561,350,530"/>
<area shape="poly" title=" " alt="" coords="334,531,292,568,289,564,331,527"/>
<area shape="poly" title=" " alt="" coords="370,526,427,558,510,599,608,641,711,675,831,695,996,712,1287,733,1286,738,996,717,830,700,710,680,606,646,508,604,425,562,367,531"/>
<area shape="poly" title=" " alt="" coords="345,529,329,566,316,586,299,605,269,623,241,629,213,635,184,653,161,681,144,712,140,710,156,678,181,649,211,630,239,624,267,618,296,601,311,583,324,563,340,527"/>
<area shape="poly" title=" " alt="" coords="395,519,464,525,1121,580,1120,585,464,531,395,524"/>
<area shape="poly" title=" " alt="" coords="2932,122,2955,196,2981,255,3007,304,3057,383,3105,464,3127,514,3148,575,3159,626,3155,678,3146,711,3140,710,3149,677,3153,626,3143,577,3122,516,3100,466,3053,386,3002,306,2976,258,2949,198,2927,124"/>
<area shape="poly" title=" " alt="" coords="2871,119,1541,253,1540,248,2870,114"/>
<area shape="poly" title=" " alt="" coords="2911,125,2647,320,2644,316,2908,121"/>
<area shape="poly" title=" " alt="" coords="2946,121,2998,159,2995,163,2943,125"/>
<area shape="poly" title=" " alt="" coords="3073,195,3122,215,3174,245,3196,264,3214,286,3226,311,3231,340,3231,591,3229,617,3223,638,3198,679,3181,700,3163,717,3159,713,3177,696,3194,676,3218,636,3224,616,3225,591,3225,340,3221,313,3210,289,3192,268,3171,249,3120,220,3071,200"/>
<area shape="poly" title=" " alt="" coords="2963,191,1541,257,1540,252,2963,186"/>
<area shape="poly" title=" " alt="" coords="3028,198,3023,340,3023,433,3019,560,3014,560,3017,433,3017,340,3023,198"/>
<area shape="poly" title=" " alt="" coords="3098,676,3119,711,3114,713,3093,679"/>
<area shape="poly" title=" " alt="" coords="3036,671,2827,680,2395,695,2059,704,1723,713,1291,728,1090,738,1090,732,1291,723,1723,707,2059,698,2395,689,2827,675,3035,665"/>
<area shape="poly" title=" " alt="" coords="187,198,130,216,71,244,46,263,26,285,13,311,8,340,8,590,12,618,23,636,40,648,63,656,120,664,183,675,258,689,357,701,597,719,836,729,1006,734,1006,739,836,735,597,724,357,707,257,695,182,680,119,669,62,661,38,653,19,640,7,620,3,591,3,340,8,309,22,282,43,259,68,240,128,211,186,193"/>
</map>
</div>
</div>
<p><a href="rgw__crypt_8cc_source.html">이 파일의 소스 코드 페이지로 가기</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
클래스</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcanonical__char__sorter.html">canonical_char_sorter&lt; M &gt;</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_e_s__256___c_b_c.html">AES_256_CBC</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcrypt__option__names.html">crypt_option_names</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_crypt_attributes.html">CryptAttributes</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
매크로</h2></td></tr>
<tr class="memitem:ac9f1b8ed4aca7999d392b2d432030e30" id="r_ac9f1b8ed4aca7999d392b2d432030e30"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rgw__crypt_8cc.html#ac9f1b8ed4aca7999d392b2d432030e30">dout_context</a>&#160;&#160;&#160;g_ceph_context</td></tr>
<tr class="separator:ac9f1b8ed4aca7999d392b2d432030e30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5580a2b7c4743669bb9ca22b07e84324" id="r_a5580a2b7c4743669bb9ca22b07e84324"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rgw__crypt_8cc.html#a5580a2b7c4743669bb9ca22b07e84324">dout_subsys</a>&#160;&#160;&#160;ceph_subsys_rgw</td></tr>
<tr class="separator:a5580a2b7c4743669bb9ca22b07e84324"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
타입정의</h2></td></tr>
<tr class="memitem:a3ea0937a0611dbce4a5879562f2d6324" id="r_a3ea0937a0611dbce4a5879562f2d6324"><td class="memItemLeft" align="right" valign="top">typedef rapidjson::GenericMember&lt; rapidjson::UTF8&lt;&gt;, rapidjson::MemoryPoolAllocator&lt;&gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rgw__crypt_8cc.html#a3ea0937a0611dbce4a5879562f2d6324">MyMember</a></td></tr>
<tr class="separator:a3ea0937a0611dbce4a5879562f2d6324"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="enum-members" name="enum-members"></a>
열거형 타입</h2></td></tr>
<tr class="memitem:adde527b14a1813b09f5f168c2e92775c" id="r_adde527b14a1813b09f5f168c2e92775c"><td class="memItemLeft" align="right" valign="top">enum struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rgw__crypt_8cc.html#adde527b14a1813b09f5f168c2e92775c">mec_option</a> { <a class="el" href="rgw__crypt_8cc.html#adde527b14a1813b09f5f168c2e92775caa2e4822a98337283e39f7b60acf85ec9">empty</a> = 0
, <a class="el" href="rgw__crypt_8cc.html#adde527b14a1813b09f5f168c2e92775ca1d6a876d564dd6d3d660e50cc8c02f2b">number_ok</a> = 1
 }</td></tr>
<tr class="separator:adde527b14a1813b09f5f168c2e92775c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6fbab6cd1bb07bd350fe2d0567a91860" id="r_a6fbab6cd1bb07bd350fe2d0567a91860"><td class="memItemLeft" align="right" valign="top">enum struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rgw__crypt_8cc.html#a6fbab6cd1bb07bd350fe2d0567a91860">mec_error</a> { <a class="el" href="rgw__crypt_8cc.html#a6fbab6cd1bb07bd350fe2d0567a91860a260ca9dd8a4577fc00b7bd5810298076">success</a> = 0
, <a class="el" href="rgw__crypt_8cc.html#a6fbab6cd1bb07bd350fe2d0567a91860a8a496e4dcb443b1c529e75d7ec2888df">conversion</a>
, <a class="el" href="rgw__crypt_8cc.html#a6fbab6cd1bb07bd350fe2d0567a91860ab1bc248a7ff2b2e95569f56de68615df">number</a>
 }</td></tr>
<tr class="separator:a6fbab6cd1bb07bd350fe2d0567a91860"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5edee254b500b534fe3bda4a70baab9b" id="r_a5edee254b500b534fe3bda4a70baab9b"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rgw__crypt_8cc.html#a5edee254b500b534fe3bda4a70baab9b">crypt_option_e</a> { <br />
&#160;&#160;<a class="el" href="rgw__crypt_8cc.html#a5edee254b500b534fe3bda4a70baab9ba9ab6040ef7c846b7aec289cea0f02d86">X_AMZ_SERVER_SIDE_ENCRYPTION_CUSTOMER_ALGORITHM</a> =0
, <a class="el" href="rgw__crypt_8cc.html#a5edee254b500b534fe3bda4a70baab9babd7c89df5c52fc5b8754984b74d398e2">X_AMZ_SERVER_SIDE_ENCRYPTION_CUSTOMER_KEY</a>
, <a class="el" href="rgw__crypt_8cc.html#a5edee254b500b534fe3bda4a70baab9ba4bec56c93b7525eed4bf0966ce2a7d69">X_AMZ_SERVER_SIDE_ENCRYPTION_CUSTOMER_KEY_MD5</a>
, <a class="el" href="rgw__crypt_8cc.html#a5edee254b500b534fe3bda4a70baab9ba85b78d0b1581ae53d50268227acddc7f">X_AMZ_SERVER_SIDE_ENCRYPTION</a>
, <br />
&#160;&#160;<a class="el" href="rgw__crypt_8cc.html#a5edee254b500b534fe3bda4a70baab9bab1ae78349474479389f72ae0043d77b5">X_AMZ_SERVER_SIDE_ENCRYPTION_AWS_KMS_KEY_ID</a>
, <a class="el" href="rgw__crypt_8cc.html#a5edee254b500b534fe3bda4a70baab9ba32173a05c37efc378b2aa9e0bc1268e9">X_AMZ_SERVER_SIDE_ENCRYPTION_CONTEXT</a>
, <a class="el" href="rgw__crypt_8cc.html#a5edee254b500b534fe3bda4a70baab9ba7fb126a5c491381f558343f4e626f678">X_AMZ_SERVER_SIDE_ENCRYPTION_LAST</a>
<br />
 }</td></tr>
<tr class="separator:a5edee254b500b534fe3bda4a70baab9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
함수</h2></td></tr>
<tr class="memitem:a968267093810809f7ec5d866d3c31e7b" id="r_a968267093810809f7ec5d866d3c31e7b"><td class="memTemplParams" colspan="2">template&lt;typename H &gt; </td></tr>
<tr class="memitem:a968267093810809f7ec5d866d3c31e7b"><td class="memTemplItemLeft" align="right" valign="top">bool&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="rgw__crypt_8cc.html#a968267093810809f7ec5d866d3c31e7b">sort_and_write</a> (rapidjson::Value &amp;d, H &amp;writer, <a class="el" href="classcanonical__char__sorter.html">canonical_char_sorter</a>&lt; <a class="el" href="rgw__crypt_8cc.html#a3ea0937a0611dbce4a5879562f2d6324">MyMember</a> &gt; &amp;ccs)</td></tr>
<tr class="separator:a968267093810809f7ec5d866d3c31e7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a818709fd4c5831710c61c53868e74057" id="r_a818709fd4c5831710c61c53868e74057"><td class="memItemLeft" align="right" valign="top"><a class="el" href="rgw__crypt_8cc.html#a6fbab6cd1bb07bd350fe2d0567a91860">mec_error</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rgw__crypt_8cc.html#a818709fd4c5831710c61c53868e74057">make_everything_canonical</a> (rapidjson::Value &amp;d, rapidjson::Document::AllocatorType &amp;a, <a class="el" href="classcanonical__char__sorter.html">canonical_char_sorter</a>&lt; <a class="el" href="rgw__crypt_8cc.html#a3ea0937a0611dbce4a5879562f2d6324">MyMember</a> &gt; &amp;ccs, <a class="el" href="rgw__crypt_8cc.html#adde527b14a1813b09f5f168c2e92775c">mec_option</a> f=<a class="el" href="rgw__crypt_8cc.html#adde527b14a1813b09f5f168c2e92775caa2e4822a98337283e39f7b60acf85ec9">mec_option::empty</a>)</td></tr>
<tr class="separator:a818709fd4c5831710c61c53868e74057"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a468055d9acfdf57d836f7c110fae5a42" id="r_a468055d9acfdf57d836f7c110fae5a42"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rgw__crypt_8cc.html#a468055d9acfdf57d836f7c110fae5a42">add_object_to_context</a> (<a class="el" href="structrgw__obj.html">rgw_obj</a> &amp;obj, rapidjson::Document &amp;d)</td></tr>
<tr class="separator:a468055d9acfdf57d836f7c110fae5a42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af41e16ec2085c8a5ce5576bbe57b023b" id="r_af41e16ec2085c8a5ce5576bbe57b023b"><td class="memItemLeft" align="right" valign="top">static const std::string &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rgw__crypt_8cc.html#af41e16ec2085c8a5ce5576bbe57b023b">get_tenant_or_id</a> (<a class="el" href="structreq__state.html">req_state</a> *s)</td></tr>
<tr class="separator:af41e16ec2085c8a5ce5576bbe57b023b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad74b8dce6c7052201e0d2bc8fbe6b0c3" id="r_ad74b8dce6c7052201e0d2bc8fbe6b0c3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rgw__crypt_8cc.html#ad74b8dce6c7052201e0d2bc8fbe6b0c3">make_canonical_context</a> (struct <a class="el" href="structreq__state.html">req_state</a> *s, std::string_view &amp;context, std::string &amp;cooked_context)</td></tr>
<tr class="separator:ad74b8dce6c7052201e0d2bc8fbe6b0c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a491281ac82e7d1f5e1d7416f23e3c0b2" id="r_a491281ac82e7d1f5e1d7416f23e3c0b2"><td class="memItemLeft" align="right" valign="top">CryptoAccelRef&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rgw__crypt_8cc.html#a491281ac82e7d1f5e1d7416f23e3c0b2">get_crypto_accel</a> (const DoutPrefixProvider *<a class="el" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, CephContext *<a class="el" href="cls__fifo__legacy_8cc.html#aa76801f7597f40e158b5f38b2e6466c5">cct</a>)</td></tr>
<tr class="separator:a491281ac82e7d1f5e1d7416f23e3c0b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a401e875501c036ea3b55291eeb4dc956" id="r_a401e875501c036ea3b55291eeb4dc956"><td class="memTemplParams" colspan="2">template&lt;std::size_t KeySizeV, std::size_t IvSizeV&gt; </td></tr>
<tr class="memitem:a401e875501c036ea3b55291eeb4dc956"><td class="memTemplItemLeft" align="right" valign="top">static bool&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="rgw__crypt_8cc.html#a401e875501c036ea3b55291eeb4dc956">evp_sym_transform</a> (const DoutPrefixProvider *<a class="el" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, CephContext *const <a class="el" href="cls__fifo__legacy_8cc.html#aa76801f7597f40e158b5f38b2e6466c5">cct</a>, const EVP_CIPHER *const type, unsigned char *const out, const unsigned char *const in, const size_t size, const unsigned char *const iv, const unsigned char *const key, const bool encrypt)</td></tr>
<tr class="separator:a401e875501c036ea3b55291eeb4dc956"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb60d61e86ab992f78cef214598b1c6e" id="r_abb60d61e86ab992f78cef214598b1c6e"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; <a class="el" href="class_block_crypt.html">BlockCrypt</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rgw__crypt_8cc.html#abb60d61e86ab992f78cef214598b1c6e">AES_256_CBC_create</a> (const DoutPrefixProvider *<a class="el" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, CephContext *<a class="el" href="cls__fifo__legacy_8cc.html#aa76801f7597f40e158b5f38b2e6466c5">cct</a>, const uint8_t *key, size_t len)</td></tr>
<tr class="separator:abb60d61e86ab992f78cef214598b1c6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7c06376b99620c995fb2e5726720fc0" id="r_ac7c06376b99620c995fb2e5726720fc0"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rgw__crypt_8cc.html#ac7c06376b99620c995fb2e5726720fc0">AES_256_ECB_encrypt</a> (const DoutPrefixProvider *<a class="el" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, CephContext *<a class="el" href="cls__fifo__legacy_8cc.html#aa76801f7597f40e158b5f38b2e6466c5">cct</a>, const uint8_t *key, size_t key_size, const uint8_t *data_in, uint8_t *data_out, size_t data_size)</td></tr>
<tr class="separator:ac7c06376b99620c995fb2e5726720fc0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e1e24b9370416b6b9e95a69986220b3" id="r_a2e1e24b9370416b6b9e95a69986220b3"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rgw__crypt_8cc.html#a2e1e24b9370416b6b9e95a69986220b3">create_random_key_selector</a> (CephContext *const <a class="el" href="cls__fifo__legacy_8cc.html#aa76801f7597f40e158b5f38b2e6466c5">cct</a>)</td></tr>
<tr class="separator:a2e1e24b9370416b6b9e95a69986220b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a314d096a1d1963c887425d4913690130" id="r_a314d096a1d1963c887425d4913690130"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rgw__crypt_8cc.html#a314d096a1d1963c887425d4913690130">fetch_bucket_key_id</a> (struct <a class="el" href="structreq__state.html">req_state</a> *s)</td></tr>
<tr class="separator:a314d096a1d1963c887425d4913690130"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add5c64ea25e03aeb38706533c5f98ca8" id="r_add5c64ea25e03aeb38706533c5f98ca8"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rgw__crypt_8cc.html#add5c64ea25e03aeb38706533c5f98ca8">expand_key_name</a> (struct <a class="el" href="structreq__state.html">req_state</a> *s, const std::string_view &amp;t)</td></tr>
<tr class="separator:add5c64ea25e03aeb38706533c5f98ca8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a44f988f8c3329733f06e72d263666a" id="r_a7a44f988f8c3329733f06e72d263666a"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rgw__crypt_8cc.html#a7a44f988f8c3329733f06e72d263666a">get_sse_s3_bucket_key</a> (<a class="el" href="structreq__state.html">req_state</a> *s, std::string &amp;key_id)</td></tr>
<tr class="separator:a7a44f988f8c3329733f06e72d263666a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a644bbfaccd952cddc83967e91f89caf5" id="r_a644bbfaccd952cddc83967e91f89caf5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rgw__crypt_8cc.html#a644bbfaccd952cddc83967e91f89caf5">rgw_s3_prepare_encrypt</a> (struct <a class="el" href="structreq__state.html">req_state</a> *s, std::map&lt; std::string, ceph::bufferlist &gt; &amp;attrs, std::unique_ptr&lt; <a class="el" href="class_block_crypt.html">BlockCrypt</a> &gt; *block_crypt, std::map&lt; std::string, std::string &gt; &amp;crypt_http_responses)</td></tr>
<tr class="separator:a644bbfaccd952cddc83967e91f89caf5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a053d14367e9beb6222476b4732e17923" id="r_a053d14367e9beb6222476b4732e17923"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rgw__crypt_8cc.html#a053d14367e9beb6222476b4732e17923">rgw_s3_prepare_decrypt</a> (struct <a class="el" href="structreq__state.html">req_state</a> *s, map&lt; string, bufferlist &gt; &amp;attrs, std::unique_ptr&lt; <a class="el" href="class_block_crypt.html">BlockCrypt</a> &gt; *block_crypt, std::map&lt; std::string, std::string &gt; &amp;crypt_http_responses)</td></tr>
<tr class="separator:a053d14367e9beb6222476b4732e17923"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa338e22213c357f47593f008b1d1fca3" id="r_aa338e22213c357f47593f008b1d1fca3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rgw__crypt_8cc.html#aa338e22213c357f47593f008b1d1fca3">rgw_remove_sse_s3_bucket_key</a> (<a class="el" href="structreq__state.html">req_state</a> *s)</td></tr>
<tr class="separator:aa338e22213c357f47593f008b1d1fca3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
변수</h2></td></tr>
<tr class="memitem:afb49a525e8897bd173a827e72c1accec" id="r_afb49a525e8897bd173a827e72c1accec"><td class="memItemLeft" align="right" valign="top">static const <a class="el" href="structcrypt__option__names.html">crypt_option_names</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rgw__crypt_8cc.html#afb49a525e8897bd173a827e72c1accec">crypt_options</a> []</td></tr>
<tr class="separator:afb49a525e8897bd173a827e72c1accec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7bbedbb5f2e198570553befb1e69a86d" id="r_a7bbedbb5f2e198570553befb1e69a86d"><td class="memItemLeft" align="right" valign="top">const std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rgw__crypt_8cc.html#a7bbedbb5f2e198570553befb1e69a86d">cant_expand_key</a> { &quot;\uFFFD&quot; }</td></tr>
<tr class="separator:a7bbedbb5f2e198570553befb1e69a86d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">매크로 문서화</h2>
<a id="ac9f1b8ed4aca7999d392b2d432030e30" name="ac9f1b8ed4aca7999d392b2d432030e30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9f1b8ed4aca7999d392b2d432030e30">&#9670;&#160;</a></span>dout_context</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define dout_context&#160;&#160;&#160;g_ceph_context</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Crypto filters for Put/Post/Get operations. </p>

<p class="definition"><a class="el" href="rgw__crypt_8cc_source.html">rgw_crypt.cc</a> 파일의 <a class="el" href="rgw__crypt_8cc_source.html#l00027">27</a> 번째 라인에서 정의되었습니다.</p>

</div>
</div>
<a id="a5580a2b7c4743669bb9ca22b07e84324" name="a5580a2b7c4743669bb9ca22b07e84324"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5580a2b7c4743669bb9ca22b07e84324">&#9670;&#160;</a></span>dout_subsys</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define dout_subsys&#160;&#160;&#160;ceph_subsys_rgw</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="rgw__crypt_8cc_source.html">rgw_crypt.cc</a> 파일의 <a class="el" href="rgw__crypt_8cc_source.html#l00028">28</a> 번째 라인에서 정의되었습니다.</p>

</div>
</div>
<h2 class="groupheader">타입정의 문서화</h2>
<a id="a3ea0937a0611dbce4a5879562f2d6324" name="a3ea0937a0611dbce4a5879562f2d6324"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ea0937a0611dbce4a5879562f2d6324">&#9670;&#160;</a></span>MyMember</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef rapidjson::GenericMember&lt;rapidjson::UTF8&lt;&gt;, rapidjson::MemoryPoolAllocator&lt;&gt; &gt; <a class="el" href="rgw__crypt_8cc.html#a3ea0937a0611dbce4a5879562f2d6324">MyMember</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="rgw__crypt_8cc_source.html">rgw_crypt.cc</a> 파일의 <a class="el" href="rgw__crypt_8cc_source.html#l00095">95</a> 번째 라인에서 정의되었습니다.</p>

</div>
</div>
<h2 class="groupheader">열거형 타입 문서화</h2>
<a id="a5edee254b500b534fe3bda4a70baab9b" name="a5edee254b500b534fe3bda4a70baab9b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5edee254b500b534fe3bda4a70baab9b">&#9670;&#160;</a></span>crypt_option_e</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="rgw__crypt_8cc.html#a5edee254b500b534fe3bda4a70baab9b">crypt_option_e</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">열거형 멤버</th></tr><tr><td class="fieldname"><a id="a5edee254b500b534fe3bda4a70baab9ba9ab6040ef7c846b7aec289cea0f02d86" name="a5edee254b500b534fe3bda4a70baab9ba9ab6040ef7c846b7aec289cea0f02d86"></a>X_AMZ_SERVER_SIDE_ENCRYPTION_CUSTOMER_ALGORITHM&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a5edee254b500b534fe3bda4a70baab9babd7c89df5c52fc5b8754984b74d398e2" name="a5edee254b500b534fe3bda4a70baab9babd7c89df5c52fc5b8754984b74d398e2"></a>X_AMZ_SERVER_SIDE_ENCRYPTION_CUSTOMER_KEY&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a5edee254b500b534fe3bda4a70baab9ba4bec56c93b7525eed4bf0966ce2a7d69" name="a5edee254b500b534fe3bda4a70baab9ba4bec56c93b7525eed4bf0966ce2a7d69"></a>X_AMZ_SERVER_SIDE_ENCRYPTION_CUSTOMER_KEY_MD5&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a5edee254b500b534fe3bda4a70baab9ba85b78d0b1581ae53d50268227acddc7f" name="a5edee254b500b534fe3bda4a70baab9ba85b78d0b1581ae53d50268227acddc7f"></a>X_AMZ_SERVER_SIDE_ENCRYPTION&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a5edee254b500b534fe3bda4a70baab9bab1ae78349474479389f72ae0043d77b5" name="a5edee254b500b534fe3bda4a70baab9bab1ae78349474479389f72ae0043d77b5"></a>X_AMZ_SERVER_SIDE_ENCRYPTION_AWS_KMS_KEY_ID&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a5edee254b500b534fe3bda4a70baab9ba32173a05c37efc378b2aa9e0bc1268e9" name="a5edee254b500b534fe3bda4a70baab9ba32173a05c37efc378b2aa9e0bc1268e9"></a>X_AMZ_SERVER_SIDE_ENCRYPTION_CONTEXT&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a5edee254b500b534fe3bda4a70baab9ba7fb126a5c491381f558343f4e626f678" name="a5edee254b500b534fe3bda4a70baab9ba7fb126a5c491381f558343f4e626f678"></a>X_AMZ_SERVER_SIDE_ENCRYPTION_LAST&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition"><a class="el" href="rgw__crypt_8cc_source.html">rgw_crypt.cc</a> 파일의 <a class="el" href="rgw__crypt_8cc_source.html#l00852">852</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  852</span>             {</div>
<div class="line"><span class="lineno">  853</span>  <a class="code hl_enumvalue" href="rgw__crypt_8cc.html#a5edee254b500b534fe3bda4a70baab9ba9ab6040ef7c846b7aec289cea0f02d86">X_AMZ_SERVER_SIDE_ENCRYPTION_CUSTOMER_ALGORITHM</a>=0,</div>
<div class="line"><span class="lineno">  854</span>  <a class="code hl_enumvalue" href="rgw__crypt_8cc.html#a5edee254b500b534fe3bda4a70baab9babd7c89df5c52fc5b8754984b74d398e2">X_AMZ_SERVER_SIDE_ENCRYPTION_CUSTOMER_KEY</a>,</div>
<div class="line"><span class="lineno">  855</span>  <a class="code hl_enumvalue" href="rgw__crypt_8cc.html#a5edee254b500b534fe3bda4a70baab9ba4bec56c93b7525eed4bf0966ce2a7d69">X_AMZ_SERVER_SIDE_ENCRYPTION_CUSTOMER_KEY_MD5</a>,</div>
<div class="line"><span class="lineno">  856</span>  <a class="code hl_enumvalue" href="rgw__crypt_8cc.html#a5edee254b500b534fe3bda4a70baab9ba85b78d0b1581ae53d50268227acddc7f">X_AMZ_SERVER_SIDE_ENCRYPTION</a>,</div>
<div class="line"><span class="lineno">  857</span>  <a class="code hl_enumvalue" href="rgw__crypt_8cc.html#a5edee254b500b534fe3bda4a70baab9bab1ae78349474479389f72ae0043d77b5">X_AMZ_SERVER_SIDE_ENCRYPTION_AWS_KMS_KEY_ID</a>,</div>
<div class="line"><span class="lineno">  858</span>  <a class="code hl_enumvalue" href="rgw__crypt_8cc.html#a5edee254b500b534fe3bda4a70baab9ba32173a05c37efc378b2aa9e0bc1268e9">X_AMZ_SERVER_SIDE_ENCRYPTION_CONTEXT</a>,</div>
<div class="line"><span class="lineno">  859</span>  <a class="code hl_enumvalue" href="rgw__crypt_8cc.html#a5edee254b500b534fe3bda4a70baab9ba7fb126a5c491381f558343f4e626f678">X_AMZ_SERVER_SIDE_ENCRYPTION_LAST</a></div>
<div class="line"><span class="lineno">  860</span>} <a class="code hl_enumeration" href="rgw__crypt_8cc.html#a5edee254b500b534fe3bda4a70baab9b">crypt_option_e</a>;</div>
<div class="ttc" id="argw__crypt_8cc_html_a5edee254b500b534fe3bda4a70baab9b"><div class="ttname"><a href="rgw__crypt_8cc.html#a5edee254b500b534fe3bda4a70baab9b">crypt_option_e</a></div><div class="ttdeci">crypt_option_e</div><div class="ttdef"><b>Definition</b> <a href="rgw__crypt_8cc_source.html#l00852">rgw_crypt.cc:852</a></div></div>
<div class="ttc" id="argw__crypt_8cc_html_a5edee254b500b534fe3bda4a70baab9ba32173a05c37efc378b2aa9e0bc1268e9"><div class="ttname"><a href="rgw__crypt_8cc.html#a5edee254b500b534fe3bda4a70baab9ba32173a05c37efc378b2aa9e0bc1268e9">X_AMZ_SERVER_SIDE_ENCRYPTION_CONTEXT</a></div><div class="ttdeci">@ X_AMZ_SERVER_SIDE_ENCRYPTION_CONTEXT</div><div class="ttdef"><b>Definition</b> <a href="rgw__crypt_8cc_source.html#l00858">rgw_crypt.cc:858</a></div></div>
<div class="ttc" id="argw__crypt_8cc_html_a5edee254b500b534fe3bda4a70baab9ba4bec56c93b7525eed4bf0966ce2a7d69"><div class="ttname"><a href="rgw__crypt_8cc.html#a5edee254b500b534fe3bda4a70baab9ba4bec56c93b7525eed4bf0966ce2a7d69">X_AMZ_SERVER_SIDE_ENCRYPTION_CUSTOMER_KEY_MD5</a></div><div class="ttdeci">@ X_AMZ_SERVER_SIDE_ENCRYPTION_CUSTOMER_KEY_MD5</div><div class="ttdef"><b>Definition</b> <a href="rgw__crypt_8cc_source.html#l00855">rgw_crypt.cc:855</a></div></div>
<div class="ttc" id="argw__crypt_8cc_html_a5edee254b500b534fe3bda4a70baab9ba7fb126a5c491381f558343f4e626f678"><div class="ttname"><a href="rgw__crypt_8cc.html#a5edee254b500b534fe3bda4a70baab9ba7fb126a5c491381f558343f4e626f678">X_AMZ_SERVER_SIDE_ENCRYPTION_LAST</a></div><div class="ttdeci">@ X_AMZ_SERVER_SIDE_ENCRYPTION_LAST</div><div class="ttdef"><b>Definition</b> <a href="rgw__crypt_8cc_source.html#l00860">rgw_crypt.cc:859</a></div></div>
<div class="ttc" id="argw__crypt_8cc_html_a5edee254b500b534fe3bda4a70baab9ba85b78d0b1581ae53d50268227acddc7f"><div class="ttname"><a href="rgw__crypt_8cc.html#a5edee254b500b534fe3bda4a70baab9ba85b78d0b1581ae53d50268227acddc7f">X_AMZ_SERVER_SIDE_ENCRYPTION</a></div><div class="ttdeci">@ X_AMZ_SERVER_SIDE_ENCRYPTION</div><div class="ttdef"><b>Definition</b> <a href="rgw__crypt_8cc_source.html#l00856">rgw_crypt.cc:856</a></div></div>
<div class="ttc" id="argw__crypt_8cc_html_a5edee254b500b534fe3bda4a70baab9ba9ab6040ef7c846b7aec289cea0f02d86"><div class="ttname"><a href="rgw__crypt_8cc.html#a5edee254b500b534fe3bda4a70baab9ba9ab6040ef7c846b7aec289cea0f02d86">X_AMZ_SERVER_SIDE_ENCRYPTION_CUSTOMER_ALGORITHM</a></div><div class="ttdeci">@ X_AMZ_SERVER_SIDE_ENCRYPTION_CUSTOMER_ALGORITHM</div><div class="ttdef"><b>Definition</b> <a href="rgw__crypt_8cc_source.html#l00853">rgw_crypt.cc:853</a></div></div>
<div class="ttc" id="argw__crypt_8cc_html_a5edee254b500b534fe3bda4a70baab9bab1ae78349474479389f72ae0043d77b5"><div class="ttname"><a href="rgw__crypt_8cc.html#a5edee254b500b534fe3bda4a70baab9bab1ae78349474479389f72ae0043d77b5">X_AMZ_SERVER_SIDE_ENCRYPTION_AWS_KMS_KEY_ID</a></div><div class="ttdeci">@ X_AMZ_SERVER_SIDE_ENCRYPTION_AWS_KMS_KEY_ID</div><div class="ttdef"><b>Definition</b> <a href="rgw__crypt_8cc_source.html#l00857">rgw_crypt.cc:857</a></div></div>
<div class="ttc" id="argw__crypt_8cc_html_a5edee254b500b534fe3bda4a70baab9babd7c89df5c52fc5b8754984b74d398e2"><div class="ttname"><a href="rgw__crypt_8cc.html#a5edee254b500b534fe3bda4a70baab9babd7c89df5c52fc5b8754984b74d398e2">X_AMZ_SERVER_SIDE_ENCRYPTION_CUSTOMER_KEY</a></div><div class="ttdeci">@ X_AMZ_SERVER_SIDE_ENCRYPTION_CUSTOMER_KEY</div><div class="ttdef"><b>Definition</b> <a href="rgw__crypt_8cc_source.html#l00854">rgw_crypt.cc:854</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6fbab6cd1bb07bd350fe2d0567a91860" name="a6fbab6cd1bb07bd350fe2d0567a91860"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6fbab6cd1bb07bd350fe2d0567a91860">&#9670;&#160;</a></span>mec_error</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum struct <a class="el" href="rgw__crypt_8cc.html#a6fbab6cd1bb07bd350fe2d0567a91860">mec_error</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">strong</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">열거형 멤버</th></tr><tr><td class="fieldname"><a id="a6fbab6cd1bb07bd350fe2d0567a91860a260ca9dd8a4577fc00b7bd5810298076" name="a6fbab6cd1bb07bd350fe2d0567a91860a260ca9dd8a4577fc00b7bd5810298076"></a>success&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a6fbab6cd1bb07bd350fe2d0567a91860a8a496e4dcb443b1c529e75d7ec2888df" name="a6fbab6cd1bb07bd350fe2d0567a91860a8a496e4dcb443b1c529e75d7ec2888df"></a>conversion&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a6fbab6cd1bb07bd350fe2d0567a91860ab1bc248a7ff2b2e95569f56de68615df" name="a6fbab6cd1bb07bd350fe2d0567a91860ab1bc248a7ff2b2e95569f56de68615df"></a>number&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition"><a class="el" href="rgw__crypt_8cc_source.html">rgw_crypt.cc</a> 파일의 <a class="el" href="rgw__crypt_8cc_source.html#l00147">147</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  147</span>                      {</div>
<div class="line"><span class="lineno">  148</span><a class="code hl_enumvalue" href="rgw__crypt_8cc.html#a6fbab6cd1bb07bd350fe2d0567a91860a260ca9dd8a4577fc00b7bd5810298076">success</a> = 0, <a class="code hl_enumvalue" href="rgw__crypt_8cc.html#a6fbab6cd1bb07bd350fe2d0567a91860a8a496e4dcb443b1c529e75d7ec2888df">conversion</a>, <a class="code hl_enumvalue" href="rgw__crypt_8cc.html#a6fbab6cd1bb07bd350fe2d0567a91860ab1bc248a7ff2b2e95569f56de68615df">number</a></div>
<div class="line"><span class="lineno">  149</span>};</div>
<div class="ttc" id="argw__crypt_8cc_html_a6fbab6cd1bb07bd350fe2d0567a91860a260ca9dd8a4577fc00b7bd5810298076"><div class="ttname"><a href="rgw__crypt_8cc.html#a6fbab6cd1bb07bd350fe2d0567a91860a260ca9dd8a4577fc00b7bd5810298076">mec_error::success</a></div><div class="ttdeci">@ success</div></div>
<div class="ttc" id="argw__crypt_8cc_html_a6fbab6cd1bb07bd350fe2d0567a91860a8a496e4dcb443b1c529e75d7ec2888df"><div class="ttname"><a href="rgw__crypt_8cc.html#a6fbab6cd1bb07bd350fe2d0567a91860a8a496e4dcb443b1c529e75d7ec2888df">mec_error::conversion</a></div><div class="ttdeci">@ conversion</div></div>
<div class="ttc" id="argw__crypt_8cc_html_a6fbab6cd1bb07bd350fe2d0567a91860ab1bc248a7ff2b2e95569f56de68615df"><div class="ttname"><a href="rgw__crypt_8cc.html#a6fbab6cd1bb07bd350fe2d0567a91860ab1bc248a7ff2b2e95569f56de68615df">mec_error::number</a></div><div class="ttdeci">@ number</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="adde527b14a1813b09f5f168c2e92775c" name="adde527b14a1813b09f5f168c2e92775c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adde527b14a1813b09f5f168c2e92775c">&#9670;&#160;</a></span>mec_option</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum struct <a class="el" href="rgw__crypt_8cc.html#adde527b14a1813b09f5f168c2e92775c">mec_option</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">strong</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">열거형 멤버</th></tr><tr><td class="fieldname"><a id="adde527b14a1813b09f5f168c2e92775caa2e4822a98337283e39f7b60acf85ec9" name="adde527b14a1813b09f5f168c2e92775caa2e4822a98337283e39f7b60acf85ec9"></a>empty&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="adde527b14a1813b09f5f168c2e92775ca1d6a876d564dd6d3d660e50cc8c02f2b" name="adde527b14a1813b09f5f168c2e92775ca1d6a876d564dd6d3d660e50cc8c02f2b"></a>number_ok&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition"><a class="el" href="rgw__crypt_8cc_source.html">rgw_crypt.cc</a> 파일의 <a class="el" href="rgw__crypt_8cc_source.html#l00143">143</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  143</span>                       {</div>
<div class="line"><span class="lineno">  144</span><a class="code hl_enumvalue" href="rgw__crypt_8cc.html#adde527b14a1813b09f5f168c2e92775caa2e4822a98337283e39f7b60acf85ec9">empty</a> = 0, <a class="code hl_enumvalue" href="rgw__crypt_8cc.html#adde527b14a1813b09f5f168c2e92775ca1d6a876d564dd6d3d660e50cc8c02f2b">number_ok</a> = 1</div>
<div class="line"><span class="lineno">  145</span>};</div>
<div class="ttc" id="argw__crypt_8cc_html_adde527b14a1813b09f5f168c2e92775ca1d6a876d564dd6d3d660e50cc8c02f2b"><div class="ttname"><a href="rgw__crypt_8cc.html#adde527b14a1813b09f5f168c2e92775ca1d6a876d564dd6d3d660e50cc8c02f2b">mec_option::number_ok</a></div><div class="ttdeci">@ number_ok</div></div>
<div class="ttc" id="argw__crypt_8cc_html_adde527b14a1813b09f5f168c2e92775caa2e4822a98337283e39f7b60acf85ec9"><div class="ttname"><a href="rgw__crypt_8cc.html#adde527b14a1813b09f5f168c2e92775caa2e4822a98337283e39f7b60acf85ec9">mec_option::empty</a></div><div class="ttdeci">@ empty</div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">함수 문서화</h2>
<a id="a468055d9acfdf57d836f7c110fae5a42" name="a468055d9acfdf57d836f7c110fae5a42"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a468055d9acfdf57d836f7c110fae5a42">&#9670;&#160;</a></span>add_object_to_context()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool add_object_to_context </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrgw__obj.html">rgw_obj</a> &amp;&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">rapidjson::Document &amp;&#160;</td>
          <td class="paramname"><em>d</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="rgw__crypt_8cc_source.html">rgw_crypt.cc</a> 파일의 <a class="el" href="rgw__crypt_8cc_source.html#l00193">193</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  194</span>{</div>
<div class="line"><span class="lineno">  195</span>    <a class="code hl_struct" href="structrgw_1_1_a_r_n.html">ARN</a> a{obj};</div>
<div class="line"><span class="lineno">  196</span>    <span class="keyword">const</span> <span class="keywordtype">char</span> aws_s3_arn[] { <span class="stringliteral">&quot;aws:s3:arn&quot;</span> };</div>
<div class="line"><span class="lineno">  197</span>    std::string as{a.to_string()};</div>
<div class="line"><span class="lineno">  198</span>    rapidjson::Document::AllocatorType &amp;allocator { d.GetAllocator() };</div>
<div class="line"><span class="lineno">  199</span>    rapidjson::Value name, val;</div>
<div class="line"><span class="lineno">  200</span> </div>
<div class="line"><span class="lineno">  201</span>    <span class="keywordflow">if</span> (!d.IsObject())</div>
<div class="line"><span class="lineno">  202</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  203</span>    <span class="keywordflow">if</span> (d.HasMember(aws_s3_arn))</div>
<div class="line"><span class="lineno">  204</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  205</span>    val.SetString(as.c_str(), as.length(), allocator);</div>
<div class="line"><span class="lineno">  206</span>    name.SetString(aws_s3_arn, <span class="keyword">sizeof</span> aws_s3_arn - 1, allocator);</div>
<div class="line"><span class="lineno">  207</span>    d.AddMember(name, val, allocator);</div>
<div class="line"><span class="lineno">  208</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  209</span>}</div>
<div class="ttc" id="astructrgw_1_1_a_r_n_html"><div class="ttname"><a href="structrgw_1_1_a_r_n.html">rgw::ARN</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__arn_8h_source.html#l00042">rgw_arn.h:42</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="rgw__crypt_8cc_a468055d9acfdf57d836f7c110fae5a42_icgraph.png" border="0" usemap="#argw__crypt_8cc_a468055d9acfdf57d836f7c110fae5a42_icgraph" alt=""/></div>
<map name="argw__crypt_8cc_a468055d9acfdf57d836f7c110fae5a42_icgraph" id="argw__crypt_8cc_a468055d9acfdf57d836f7c110fae5a42_icgraph">
<area shape="rect" title=" " alt="" coords="655,80,808,107"/>
<area shape="rect" href="rgw__crypt_8cc.html#ad74b8dce6c7052201e0d2bc8fbe6b0c3" title=" " alt="" coords="442,80,607,107"/>
<area shape="poly" title=" " alt="" coords="640,96,608,96,608,91,640,91"/>
<area shape="rect" href="rgw__crypt_8cc.html#a644bbfaccd952cddc83967e91f89caf5" title=" " alt="" coords="232,80,394,107"/>
<area shape="poly" title=" " alt="" coords="427,96,394,96,394,91,427,91"/>
<area shape="rect" href="class_r_g_w_put_obj___obj_store___s3.html#aac43ef6294ae6f90061fa06e560dfc0a" title=" " alt="" coords="19,5,170,48"/>
<area shape="poly" title=" " alt="" coords="251,77,166,51,168,46,253,72"/>
<area shape="rect" href="class_r_g_w_post_obj___obj_store___s3.html#ae2c71dfde7f4e10024b6cf4d766f480b" title=" " alt="" coords="15,72,174,115"/>
<area shape="poly" title=" " alt="" coords="216,96,174,96,174,91,216,91"/>
<area shape="rect" href="class_r_g_w_init_multipart___obj_store___s3.html#aec0b31cd487b8d8ce2a61b7d71072713" title=" " alt="" coords="5,139,184,181"/>
<area shape="poly" title=" " alt="" coords="253,114,168,141,166,135,251,109"/>
</map>
</div>

</div>
</div>
<a id="abb60d61e86ab992f78cef214598b1c6e" name="abb60d61e86ab992f78cef214598b1c6e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb60d61e86ab992f78cef214598b1c6e">&#9670;&#160;</a></span>AES_256_CBC_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt; <a class="el" href="class_block_crypt.html">BlockCrypt</a> &gt; AES_256_CBC_create </td>
          <td>(</td>
          <td class="paramtype">const DoutPrefixProvider *&#160;</td>
          <td class="paramname"><em>dpp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CephContext *&#160;</td>
          <td class="paramname"><em>cct</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="rgw__crypt_8cc_source.html">rgw_crypt.cc</a> 파일의 <a class="el" href="rgw__crypt_8cc_source.html#l00604">604</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  605</span>{</div>
<div class="line"><span class="lineno">  606</span>  <span class="keyword">auto</span> cbc = std::unique_ptr&lt;AES_256_CBC&gt;(<span class="keyword">new</span> <a class="code hl_class" href="class_a_e_s__256___c_b_c.html">AES_256_CBC</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_variable" href="cls__fifo__legacy_8cc.html#aa76801f7597f40e158b5f38b2e6466c5">cct</a>));</div>
<div class="line"><span class="lineno">  607</span>  cbc-&gt;set_key(key, <a class="code hl_variable" href="rgw__crypt_8h.html#a41a559733e886bbe9c771acec4888a7e">AES_256_KEYSIZE</a>);</div>
<div class="line"><span class="lineno">  608</span>  <span class="keywordflow">return</span> cbc;</div>
<div class="line"><span class="lineno">  609</span>}</div>
<div class="ttc" id="aclass_a_e_s__256___c_b_c_html"><div class="ttname"><a href="class_a_e_s__256___c_b_c.html">AES_256_CBC</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__crypt_8cc_source.html#l00402">rgw_crypt.cc:402</a></div></div>
<div class="ttc" id="acls__fifo__legacy_8cc_html_aa76801f7597f40e158b5f38b2e6466c5"><div class="ttname"><a href="cls__fifo__legacy_8cc.html#aa76801f7597f40e158b5f38b2e6466c5">cct</a></div><div class="ttdeci">CephContext * cct</div><div class="ttdef"><b>Definition</b> <a href="cls__fifo__legacy_8cc_source.html#l00247">cls_fifo_legacy.cc:247</a></div></div>
<div class="ttc" id="argw__admin_8cc_html_afe3e74bcdf0327f8777c02b83cfea5b5"><div class="ttname"><a href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a></div><div class="ttdeci">static const DoutPrefixProvider * dpp()</div><div class="ttdef"><b>Definition</b> <a href="rgw__admin_8cc_source.html#l00081">rgw_admin.cc:81</a></div></div>
<div class="ttc" id="argw__crypt_8h_html_a41a559733e886bbe9c771acec4888a7e"><div class="ttname"><a href="rgw__crypt_8h.html#a41a559733e886bbe9c771acec4888a7e">AES_256_KEYSIZE</a></div><div class="ttdeci">static const size_t AES_256_KEYSIZE</div><div class="ttdef"><b>Definition</b> <a href="rgw__crypt_8h_source.html#l00082">rgw_crypt.h:82</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="rgw__crypt_8cc_abb60d61e86ab992f78cef214598b1c6e_cgraph.png" border="0" usemap="#argw__crypt_8cc_abb60d61e86ab992f78cef214598b1c6e_cgraph" alt=""/></div>
<map name="argw__crypt_8cc_abb60d61e86ab992f78cef214598b1c6e_cgraph" id="argw__crypt_8cc_abb60d61e86ab992f78cef214598b1c6e_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,159,32"/>
<area shape="rect" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5" title=" " alt="" coords="207,5,249,32"/>
<area shape="poly" title=" " alt="" coords="159,16,191,16,191,21,159,21"/>
</map>
</div>

</div>
</div>
<a id="ac7c06376b99620c995fb2e5726720fc0" name="ac7c06376b99620c995fb2e5726720fc0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac7c06376b99620c995fb2e5726720fc0">&#9670;&#160;</a></span>AES_256_ECB_encrypt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool AES_256_ECB_encrypt </td>
          <td>(</td>
          <td class="paramtype">const DoutPrefixProvider *&#160;</td>
          <td class="paramname"><em>dpp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CephContext *&#160;</td>
          <td class="paramname"><em>cct</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>key_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>data_in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>data_out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>data_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="rgw__crypt_8cc_source.html">rgw_crypt.cc</a> 파일의 <a class="el" href="rgw__crypt_8cc_source.html#l00616">616</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  623</span>{</div>
<div class="line"><span class="lineno">  624</span>  <span class="keywordflow">if</span> (key_size == <a class="code hl_variable" href="rgw__crypt_8h.html#a41a559733e886bbe9c771acec4888a7e">AES_256_KEYSIZE</a>) {</div>
<div class="line"><span class="lineno">  625</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="rgw__crypt_8cc.html#a401e875501c036ea3b55291eeb4dc956">evp_sym_transform</a>&lt;<a class="code hl_variable" href="rgw__crypt_8h.html#a41a559733e886bbe9c771acec4888a7e">AES_256_KEYSIZE</a>, 0 <span class="comment">/* no IV in ECB */</span>&gt;(</div>
<div class="line"><span class="lineno">  626</span>      <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_variable" href="cls__fifo__legacy_8cc.html#aa76801f7597f40e158b5f38b2e6466c5">cct</a>, EVP_aes_256_ecb(),  data_out, data_in, data_size,</div>
<div class="line"><span class="lineno">  627</span>      <span class="keyword">nullptr</span> <span class="comment">/* no IV in ECB */</span>, key, <span class="keyword">true</span> <span class="comment">/* encrypt */</span>);</div>
<div class="line"><span class="lineno">  628</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  629</span>    ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 5) &lt;&lt; <span class="stringliteral">&quot;Key size must be 256 bits long&quot;</span> &lt;&lt; dendl;</div>
<div class="line"><span class="lineno">  630</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  631</span>  }</div>
<div class="line"><span class="lineno">  632</span>}</div>
<div class="ttc" id="argw__crypt_8cc_html_a401e875501c036ea3b55291eeb4dc956"><div class="ttname"><a href="rgw__crypt_8cc.html#a401e875501c036ea3b55291eeb4dc956">evp_sym_transform</a></div><div class="ttdeci">static bool evp_sym_transform(const DoutPrefixProvider *dpp, CephContext *const cct, const EVP_CIPHER *const type, unsigned char *const out, const unsigned char *const in, const size_t size, const unsigned char *const iv, const unsigned char *const key, const bool encrypt)</div><div class="ttdef"><b>Definition</b> <a href="rgw__crypt_8cc_source.html#l00314">rgw_crypt.cc:314</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="rgw__crypt_8cc_ac7c06376b99620c995fb2e5726720fc0_cgraph.png" border="0" usemap="#argw__crypt_8cc_ac7c06376b99620c995fb2e5726720fc0_cgraph" alt=""/></div>
<map name="argw__crypt_8cc_ac7c06376b99620c995fb2e5726720fc0_cgraph" id="argw__crypt_8cc_ac7c06376b99620c995fb2e5726720fc0_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,166,32"/>
<area shape="rect" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5" title=" " alt="" coords="395,5,437,32"/>
<area shape="poly" title=" " alt="" coords="166,16,380,16,380,21,166,21"/>
<area shape="rect" href="rgw__crypt_8cc.html#a401e875501c036ea3b55291eeb4dc956" title=" " alt="" coords="214,31,347,57"/>
<area shape="poly" title=" " alt="" coords="166,26,199,31,198,36,166,32"/>
<area shape="poly" title=" " alt="" coords="347,29,379,23,380,28,348,34"/>
</map>
</div>
<div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="rgw__crypt_8cc_ac7c06376b99620c995fb2e5726720fc0_icgraph.png" border="0" usemap="#argw__crypt_8cc_ac7c06376b99620c995fb2e5726720fc0_icgraph" alt=""/></div>
<map name="argw__crypt_8cc_ac7c06376b99620c995fb2e5726720fc0_icgraph" id="argw__crypt_8cc_ac7c06376b99620c995fb2e5726720fc0_icgraph">
<area shape="rect" title=" " alt="" coords="1077,140,1237,167"/>
<area shape="rect" href="rgw__kms_8cc.html#a60375ded1848f6557218dfa172fb3273" title=" " alt="" coords="857,140,1029,167"/>
<area shape="poly" title=" " alt="" coords="1061,156,1029,156,1029,151,1061,151"/>
<area shape="rect" href="rgw__crypt_8cc.html#a644bbfaccd952cddc83967e91f89caf5" title=" " alt="" coords="232,81,394,108"/>
<area shape="poly" title=" " alt="" coords="1080,139,1029,131,852,114,675,104,394,97,394,92,676,98,852,108,1029,125,1081,134"/>
<area shape="rect" href="rgw__crypt_8cc.html#a053d14367e9beb6222476b4732e17923" title=" " alt="" coords="455,199,617,225"/>
<area shape="poly" title=" " alt="" coords="1080,173,1029,181,806,203,618,212,617,207,806,197,1029,176,1079,168"/>
<area shape="rect" href="rgw__kms_8cc.html#a4a4d58b805a968e04ab2f2cb64d808a3" title=" " alt="" coords="677,132,809,175"/>
<area shape="poly" title=" " alt="" coords="841,156,809,156,809,151,841,151"/>
<area shape="rect" href="rgw__kms_8cc.html#a5de03a7bb46cb5aa3ae77b1c93672527" title=" " alt="" coords="442,136,629,163"/>
<area shape="poly" title=" " alt="" coords="662,154,630,154,630,148,662,149"/>
<area shape="poly" title=" " alt="" coords="663,179,586,201,585,195,662,173"/>
<area shape="poly" title=" " alt="" coords="463,134,370,111,371,106,464,129"/>
<area shape="rect" href="class_r_g_w_put_obj___obj_store___s3.html#aac43ef6294ae6f90061fa06e560dfc0a" title=" " alt="" coords="19,139,170,181"/>
<area shape="poly" title=" " alt="" coords="252,115,169,141,167,136,250,110"/>
<area shape="rect" href="class_r_g_w_post_obj___obj_store___s3.html#ae2c71dfde7f4e10024b6cf4d766f480b" title=" " alt="" coords="15,72,174,115"/>
<area shape="poly" title=" " alt="" coords="216,97,174,96,174,91,216,91"/>
<area shape="rect" href="class_r_g_w_init_multipart___obj_store___s3.html#aec0b31cd487b8d8ce2a61b7d71072713" title=" " alt="" coords="5,5,184,48"/>
<area shape="poly" title=" " alt="" coords="252,79,165,51,166,46,254,74"/>
<area shape="poly" title=" " alt="" coords="461,197,394,185,276,173,170,166,170,160,277,167,394,180,462,192"/>
<area shape="rect" href="class_r_g_w_get_obj___obj_store___s3.html#a479f22556a7b691fe272a2038b64fb14" title=" " alt="" coords="237,195,389,237"/>
<area shape="poly" title=" " alt="" coords="439,216,389,217,389,212,439,211"/>
<area shape="rect" href="class_r_g_w_put_obj___obj_store___s3.html#ae4da9c4b53db6f4e31ade32c3034e988" title=" " alt="" coords="237,261,389,304"/>
<area shape="poly" title=" " alt="" coords="477,233,383,263,381,258,476,228"/>
</map>
</div>

</div>
</div>
<a id="a2e1e24b9370416b6b9e95a69986220b3" name="a2e1e24b9370416b6b9e95a69986220b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e1e24b9370416b6b9e95a69986220b3">&#9670;&#160;</a></span>create_random_key_selector()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string create_random_key_selector </td>
          <td>(</td>
          <td class="paramtype">CephContext *const&#160;</td>
          <td class="paramname"><em>cct</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="rgw__crypt_8cc_source.html">rgw_crypt.cc</a> 파일의 <a class="el" href="rgw__crypt_8cc_source.html#l00846">846</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  846</span>                                                              {</div>
<div class="line"><span class="lineno">  847</span>  <span class="keywordtype">char</span> random[<a class="code hl_variable" href="rgw__crypt_8h.html#a41a559733e886bbe9c771acec4888a7e">AES_256_KEYSIZE</a>];</div>
<div class="line"><span class="lineno">  848</span>  <a class="code hl_variable" href="cls__fifo__legacy_8cc.html#aa76801f7597f40e158b5f38b2e6466c5">cct</a>-&gt;random()-&gt;get_bytes(&amp;random[0], <span class="keyword">sizeof</span>(random));</div>
<div class="line"><span class="lineno">  849</span>  <span class="keywordflow">return</span> std::string(random, <span class="keyword">sizeof</span>(random));</div>
<div class="line"><span class="lineno">  850</span>}</div>
</div><!-- fragment --><div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="rgw__crypt_8cc_a2e1e24b9370416b6b9e95a69986220b3_icgraph.png" border="0" usemap="#argw__crypt_8cc_a2e1e24b9370416b6b9e95a69986220b3_icgraph" alt=""/></div>
<map name="argw__crypt_8cc_a2e1e24b9370416b6b9e95a69986220b3_icgraph" id="argw__crypt_8cc_a2e1e24b9370416b6b9e95a69986220b3_icgraph">
<area shape="rect" title=" " alt="" coords="442,80,630,107"/>
<area shape="rect" href="rgw__crypt_8cc.html#a644bbfaccd952cddc83967e91f89caf5" title=" " alt="" coords="232,80,394,107"/>
<area shape="poly" title=" " alt="" coords="427,96,394,96,394,91,427,91"/>
<area shape="rect" href="class_r_g_w_put_obj___obj_store___s3.html#aac43ef6294ae6f90061fa06e560dfc0a" title=" " alt="" coords="19,5,170,48"/>
<area shape="poly" title=" " alt="" coords="251,77,166,51,168,46,253,72"/>
<area shape="rect" href="class_r_g_w_post_obj___obj_store___s3.html#ae2c71dfde7f4e10024b6cf4d766f480b" title=" " alt="" coords="15,72,174,115"/>
<area shape="poly" title=" " alt="" coords="216,96,174,96,174,91,216,91"/>
<area shape="rect" href="class_r_g_w_init_multipart___obj_store___s3.html#aec0b31cd487b8d8ce2a61b7d71072713" title=" " alt="" coords="5,139,184,181"/>
<area shape="poly" title=" " alt="" coords="253,114,168,141,166,135,251,109"/>
</map>
</div>

</div>
</div>
<a id="a401e875501c036ea3b55291eeb4dc956" name="a401e875501c036ea3b55291eeb4dc956"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a401e875501c036ea3b55291eeb4dc956">&#9670;&#160;</a></span>evp_sym_transform()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;std::size_t KeySizeV, std::size_t IvSizeV&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool evp_sym_transform </td>
          <td>(</td>
          <td class="paramtype">const DoutPrefixProvider *&#160;</td>
          <td class="paramname"><em>dpp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CephContext *const&#160;</td>
          <td class="paramname"><em>cct</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const EVP_CIPHER *const&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *const&#160;</td>
          <td class="paramname"><em>out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned char *const&#160;</td>
          <td class="paramname"><em>in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned char *const&#160;</td>
          <td class="paramname"><em>iv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned char *const&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool&#160;</td>
          <td class="paramname"><em>encrypt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="rgw__crypt_8cc_source.html">rgw_crypt.cc</a> 파일의 <a class="el" href="rgw__crypt_8cc_source.html#l00314">314</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  323</span>{</div>
<div class="line"><span class="lineno">  324</span>  <span class="keyword">using </span>pctx_t = \</div>
<div class="line"><span class="lineno">  325</span>    std::unique_ptr&lt;EVP_CIPHER_CTX, <span class="keyword">decltype</span>(&amp;::EVP_CIPHER_CTX_free)&gt;;</div>
<div class="line"><span class="lineno">  326</span>  pctx_t pctx{ EVP_CIPHER_CTX_new(), EVP_CIPHER_CTX_free };</div>
<div class="line"><span class="lineno">  327</span> </div>
<div class="line"><span class="lineno">  328</span>  <span class="keywordflow">if</span> (!pctx) {</div>
<div class="line"><span class="lineno">  329</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  330</span>  }</div>
<div class="line"><span class="lineno">  331</span> </div>
<div class="line"><span class="lineno">  332</span>  <span class="keywordflow">if</span> (1 != EVP_CipherInit_ex(pctx.get(), type, <span class="keyword">nullptr</span>,</div>
<div class="line"><span class="lineno">  333</span>                             <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, encrypt)) {</div>
<div class="line"><span class="lineno">  334</span>    ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 5) &lt;&lt; <span class="stringliteral">&quot;EVP: failed to 1st initialization stage&quot;</span> &lt;&lt; dendl;</div>
<div class="line"><span class="lineno">  335</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  336</span>  }</div>
<div class="line"><span class="lineno">  337</span> </div>
<div class="line"><span class="lineno">  338</span>  <span class="comment">// we want to support ciphers that don&#39;t use IV at all like AES-256-ECB</span></div>
<div class="line"><span class="lineno">  339</span>  <span class="keywordflow">if</span> <span class="keyword">constexpr</span> (<span class="keyword">static_cast&lt;</span><span class="keywordtype">bool</span><span class="keyword">&gt;</span>(IvSizeV)) {</div>
<div class="line"><span class="lineno">  340</span>    ceph_assert(EVP_CIPHER_CTX_iv_length(pctx.get()) == IvSizeV);</div>
<div class="line"><span class="lineno">  341</span>    ceph_assert(EVP_CIPHER_CTX_block_size(pctx.get()) == IvSizeV);</div>
<div class="line"><span class="lineno">  342</span>  }</div>
<div class="line"><span class="lineno">  343</span>  ceph_assert(EVP_CIPHER_CTX_key_length(pctx.get()) == KeySizeV);</div>
<div class="line"><span class="lineno">  344</span> </div>
<div class="line"><span class="lineno">  345</span>  <span class="keywordflow">if</span> (1 != EVP_CipherInit_ex(pctx.get(), <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, key, iv, encrypt)) {</div>
<div class="line"><span class="lineno">  346</span>    ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 5) &lt;&lt; <span class="stringliteral">&quot;EVP: failed to 2nd initialization stage&quot;</span> &lt;&lt; dendl;</div>
<div class="line"><span class="lineno">  347</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  348</span>  }</div>
<div class="line"><span class="lineno">  349</span> </div>
<div class="line"><span class="lineno">  350</span>  <span class="comment">// disable padding</span></div>
<div class="line"><span class="lineno">  351</span>  <span class="keywordflow">if</span> (1 != EVP_CIPHER_CTX_set_padding(pctx.get(), 0)) {</div>
<div class="line"><span class="lineno">  352</span>    ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 5) &lt;&lt; <span class="stringliteral">&quot;EVP: cannot disable PKCS padding&quot;</span> &lt;&lt; dendl;</div>
<div class="line"><span class="lineno">  353</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  354</span>  }</div>
<div class="line"><span class="lineno">  355</span> </div>
<div class="line"><span class="lineno">  356</span>  <span class="comment">// operate!</span></div>
<div class="line"><span class="lineno">  357</span>  <span class="keywordtype">int</span> written = 0;</div>
<div class="line"><span class="lineno">  358</span>  ceph_assert(size &lt;= <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(std::numeric_limits&lt;int&gt;::max()));</div>
<div class="line"><span class="lineno">  359</span>  <span class="keywordflow">if</span> (1 != EVP_CipherUpdate(pctx.get(), out, &amp;written, in, size)) {</div>
<div class="line"><span class="lineno">  360</span>    ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 5) &lt;&lt; <span class="stringliteral">&quot;EVP: EVP_CipherUpdate failed&quot;</span> &lt;&lt; dendl;</div>
<div class="line"><span class="lineno">  361</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  362</span>  }</div>
<div class="line"><span class="lineno">  363</span> </div>
<div class="line"><span class="lineno">  364</span>  <span class="keywordtype">int</span> finally_written = 0;</div>
<div class="line"><span class="lineno">  365</span>  <span class="keyword">static_assert</span>(<span class="keyword">sizeof</span>(*out) == 1);</div>
<div class="line"><span class="lineno">  366</span>  <span class="keywordflow">if</span> (1 != EVP_CipherFinal_ex(pctx.get(), out + written, &amp;finally_written)) {</div>
<div class="line"><span class="lineno">  367</span>    ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 5) &lt;&lt; <span class="stringliteral">&quot;EVP: EVP_CipherFinal_ex failed&quot;</span> &lt;&lt; dendl;</div>
<div class="line"><span class="lineno">  368</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  369</span>  }</div>
<div class="line"><span class="lineno">  370</span> </div>
<div class="line"><span class="lineno">  371</span>  <span class="comment">// padding is disabled so EVP_CipherFinal_ex should not append anything</span></div>
<div class="line"><span class="lineno">  372</span>  ceph_assert(finally_written == 0);</div>
<div class="line"><span class="lineno">  373</span>  <span class="keywordflow">return</span> (written + finally_written) == <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(size);</div>
<div class="line"><span class="lineno">  374</span>}</div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="rgw__crypt_8cc_a401e875501c036ea3b55291eeb4dc956_cgraph.png" border="0" usemap="#argw__crypt_8cc_a401e875501c036ea3b55291eeb4dc956_cgraph" alt=""/></div>
<map name="argw__crypt_8cc_a401e875501c036ea3b55291eeb4dc956_cgraph" id="argw__crypt_8cc_a401e875501c036ea3b55291eeb4dc956_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,139,32"/>
<area shape="rect" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5" title=" " alt="" coords="187,5,229,32"/>
<area shape="poly" title=" " alt="" coords="139,16,171,16,171,21,139,21"/>
</map>
</div>
<div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="rgw__crypt_8cc_a401e875501c036ea3b55291eeb4dc956_icgraph.png" border="0" usemap="#argw__crypt_8cc_a401e875501c036ea3b55291eeb4dc956_icgraph" alt=""/></div>
<map name="argw__crypt_8cc_a401e875501c036ea3b55291eeb4dc956_icgraph" id="argw__crypt_8cc_a401e875501c036ea3b55291eeb4dc956_icgraph">
<area shape="rect" title=" " alt="" coords="1285,140,1419,167"/>
<area shape="rect" href="rgw__crypt_8cc.html#ac7c06376b99620c995fb2e5726720fc0" title=" " alt="" coords="1077,140,1237,167"/>
<area shape="poly" title=" " alt="" coords="1270,156,1238,156,1238,151,1270,151"/>
<area shape="rect" href="rgw__kms_8cc.html#a60375ded1848f6557218dfa172fb3273" title=" " alt="" coords="857,140,1029,167"/>
<area shape="poly" title=" " alt="" coords="1061,156,1029,156,1029,151,1061,151"/>
<area shape="rect" href="rgw__crypt_8cc.html#a644bbfaccd952cddc83967e91f89caf5" title=" " alt="" coords="232,81,394,108"/>
<area shape="poly" title=" " alt="" coords="1080,139,1029,131,852,114,675,104,394,97,394,92,676,98,852,108,1029,125,1081,134"/>
<area shape="rect" href="rgw__crypt_8cc.html#a053d14367e9beb6222476b4732e17923" title=" " alt="" coords="455,199,617,225"/>
<area shape="poly" title=" " alt="" coords="1080,173,1029,181,806,203,618,212,617,207,806,197,1029,176,1079,168"/>
<area shape="rect" href="rgw__kms_8cc.html#a4a4d58b805a968e04ab2f2cb64d808a3" title=" " alt="" coords="677,132,809,175"/>
<area shape="poly" title=" " alt="" coords="841,156,809,156,809,151,841,151"/>
<area shape="rect" href="rgw__kms_8cc.html#a5de03a7bb46cb5aa3ae77b1c93672527" title=" " alt="" coords="442,136,629,163"/>
<area shape="poly" title=" " alt="" coords="662,154,630,154,630,148,662,149"/>
<area shape="poly" title=" " alt="" coords="663,179,586,201,585,195,662,173"/>
<area shape="poly" title=" " alt="" coords="463,134,370,111,371,106,464,129"/>
<area shape="rect" href="class_r_g_w_put_obj___obj_store___s3.html#aac43ef6294ae6f90061fa06e560dfc0a" title=" " alt="" coords="19,139,170,181"/>
<area shape="poly" title=" " alt="" coords="252,115,169,141,167,136,250,110"/>
<area shape="rect" href="class_r_g_w_post_obj___obj_store___s3.html#ae2c71dfde7f4e10024b6cf4d766f480b" title=" " alt="" coords="15,72,174,115"/>
<area shape="poly" title=" " alt="" coords="216,97,174,96,174,91,216,91"/>
<area shape="rect" href="class_r_g_w_init_multipart___obj_store___s3.html#aec0b31cd487b8d8ce2a61b7d71072713" title=" " alt="" coords="5,5,184,48"/>
<area shape="poly" title=" " alt="" coords="252,79,165,51,166,46,254,74"/>
<area shape="poly" title=" " alt="" coords="461,197,394,185,276,173,170,166,170,160,277,167,394,180,462,192"/>
<area shape="rect" href="class_r_g_w_get_obj___obj_store___s3.html#a479f22556a7b691fe272a2038b64fb14" title=" " alt="" coords="237,195,389,237"/>
<area shape="poly" title=" " alt="" coords="439,216,389,217,389,212,439,211"/>
<area shape="rect" href="class_r_g_w_put_obj___obj_store___s3.html#ae4da9c4b53db6f4e31ade32c3034e988" title=" " alt="" coords="237,261,389,304"/>
<area shape="poly" title=" " alt="" coords="477,233,383,263,381,258,476,228"/>
</map>
</div>

</div>
</div>
<a id="add5c64ea25e03aeb38706533c5f98ca8" name="add5c64ea25e03aeb38706533c5f98ca8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add5c64ea25e03aeb38706533c5f98ca8">&#9670;&#160;</a></span>expand_key_name()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string expand_key_name </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structreq__state.html">req_state</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string_view &amp;&#160;</td>
          <td class="paramname"><em>t</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="rgw__crypt_8cc_source.html">rgw_crypt.cc</a> 파일의 <a class="el" href="rgw__crypt_8cc_source.html#l00910">910</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  911</span>{</div>
<div class="line"><span class="lineno">  912</span>  std::string <a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a>;</div>
<div class="line"><span class="lineno">  913</span>  <span class="keywordtype">size_t</span> i, j;</div>
<div class="line"><span class="lineno">  914</span>  <span class="keywordflow">for</span> (i = 0;;) {</div>
<div class="line"><span class="lineno">  915</span>    i = t.find(<span class="charliteral">&#39;%&#39;</span>, (j = i));</div>
<div class="line"><span class="lineno">  916</span>    <span class="keywordflow">if</span> (i != j) {</div>
<div class="line"><span class="lineno">  917</span>      <span class="keywordflow">if</span> (i == std::string_view::npos)</div>
<div class="line"><span class="lineno">  918</span>        <a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a>.append( t.substr(j) );</div>
<div class="line"><span class="lineno">  919</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  920</span>        <a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a>.append( t.substr(j, i-j) );</div>
<div class="line"><span class="lineno">  921</span>    }</div>
<div class="line"><span class="lineno">  922</span>    <span class="keywordflow">if</span> (i == std::string_view::npos) {</div>
<div class="line"><span class="lineno">  923</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  924</span>    }</div>
<div class="line"><span class="lineno">  925</span>    <span class="keywordflow">if</span> (t[i+1] == <span class="charliteral">&#39;%&#39;</span>) {</div>
<div class="line"><span class="lineno">  926</span>      <a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a>.append(<span class="stringliteral">&quot;%&quot;</span>);</div>
<div class="line"><span class="lineno">  927</span>      i += 2;</div>
<div class="line"><span class="lineno">  928</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  929</span>    }</div>
<div class="line"><span class="lineno">  930</span>    <span class="keywordflow">if</span> (t.compare(i+1, 9, <span class="stringliteral">&quot;bucket_id&quot;</span>) == 0) {</div>
<div class="line"><span class="lineno">  931</span>      <a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a>.append(s-&gt;<a class="code hl_variable" href="structreq__state.html#a8b94554a9fef0d41ef5797293a63f2e5">bucket</a>-&gt;get_marker());</div>
<div class="line"><span class="lineno">  932</span>      i += 10;</div>
<div class="line"><span class="lineno">  933</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  934</span>    }</div>
<div class="line"><span class="lineno">  935</span>    <span class="keywordflow">if</span> (t.compare(i+1, 8, <span class="stringliteral">&quot;owner_id&quot;</span>) == 0) {</div>
<div class="line"><span class="lineno">  936</span>      <a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a>.append(s-&gt;<a class="code hl_variable" href="structreq__state.html#a8b94554a9fef0d41ef5797293a63f2e5">bucket</a>-&gt;get_info().owner.id);</div>
<div class="line"><span class="lineno">  937</span>      i += 9;</div>
<div class="line"><span class="lineno">  938</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  939</span>    }</div>
<div class="line"><span class="lineno">  940</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="rgw__crypt_8cc.html#a7bbedbb5f2e198570553befb1e69a86d">cant_expand_key</a>;</div>
<div class="line"><span class="lineno">  941</span>  }</div>
<div class="line"><span class="lineno">  942</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a>;</div>
<div class="line"><span class="lineno">  943</span>}</div>
<div class="ttc" id="argw__aio_8cc_html_ae38055824c6eac64615832ad9d888539"><div class="ttname"><a href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a></div><div class="ttdeci">AioResult &amp; r</div><div class="ttdef"><b>Definition</b> <a href="rgw__aio_8cc_source.html#l00067">rgw_aio.cc:67</a></div></div>
<div class="ttc" id="argw__crypt_8cc_html_a7bbedbb5f2e198570553befb1e69a86d"><div class="ttname"><a href="rgw__crypt_8cc.html#a7bbedbb5f2e198570553befb1e69a86d">cant_expand_key</a></div><div class="ttdeci">const std::string cant_expand_key</div><div class="ttdef"><b>Definition</b> <a href="rgw__crypt_8cc_source.html#l00909">rgw_crypt.cc:909</a></div></div>
<div class="ttc" id="astructreq__state_html_a8b94554a9fef0d41ef5797293a63f2e5"><div class="ttname"><a href="structreq__state.html#a8b94554a9fef0d41ef5797293a63f2e5">req_state::bucket</a></div><div class="ttdeci">std::unique_ptr&lt; rgw::sal::Bucket &gt; bucket</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l01585">rgw_common.h:1585</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="rgw__crypt_8cc_add5c64ea25e03aeb38706533c5f98ca8_icgraph.png" border="0" usemap="#argw__crypt_8cc_add5c64ea25e03aeb38706533c5f98ca8_icgraph" alt=""/></div>
<map name="argw__crypt_8cc_add5c64ea25e03aeb38706533c5f98ca8_icgraph" id="argw__crypt_8cc_add5c64ea25e03aeb38706533c5f98ca8_icgraph">
<area shape="rect" title=" " alt="" coords="725,105,856,132"/>
<area shape="rect" href="rgw__crypt_8cc.html#a7a44f988f8c3329733f06e72d263666a" title=" " alt="" coords="490,80,652,107"/>
<area shape="poly" title=" " alt="" coords="709,112,652,105,653,100,710,107"/>
<area shape="rect" href="rgw__crypt_8cc.html#aa338e22213c357f47593f008b1d1fca3" title=" " alt="" coords="465,131,677,157"/>
<area shape="poly" title=" " alt="" coords="710,131,678,134,677,129,709,125"/>
<area shape="rect" href="rgw__crypt_8cc.html#a644bbfaccd952cddc83967e91f89caf5" title=" " alt="" coords="243,80,406,107"/>
<area shape="poly" title=" " alt="" coords="475,96,406,96,406,91,475,91"/>
<area shape="rect" href="class_r_g_w_put_obj___obj_store___s3.html#aac43ef6294ae6f90061fa06e560dfc0a" title=" " alt="" coords="19,5,170,48"/>
<area shape="poly" title=" " alt="" coords="260,78,170,51,171,46,262,73"/>
<area shape="rect" href="class_r_g_w_post_obj___obj_store___s3.html#ae2c71dfde7f4e10024b6cf4d766f480b" title=" " alt="" coords="15,72,174,115"/>
<area shape="poly" title=" " alt="" coords="228,96,174,96,174,91,228,91"/>
<area shape="rect" href="class_r_g_w_init_multipart___obj_store___s3.html#aec0b31cd487b8d8ce2a61b7d71072713" title=" " alt="" coords="5,139,184,181"/>
<area shape="poly" title=" " alt="" coords="258,114,232,121,168,141,166,135,231,116,257,109"/>
<area shape="rect" href="class_r_g_w_delete_bucket.html#ab7f9d5cbeee75b6a27229f0084a5189b" title=" " alt="" coords="232,131,417,157"/>
<area shape="poly" title=" " alt="" coords="449,147,418,147,418,141,449,141"/>
</map>
</div>

</div>
</div>
<a id="a314d096a1d1963c887425d4913690130" name="a314d096a1d1963c887425d4913690130"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a314d096a1d1963c887425d4913690130">&#9670;&#160;</a></span>fetch_bucket_key_id()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string fetch_bucket_key_id </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structreq__state.html">req_state</a> *&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="rgw__crypt_8cc_source.html">rgw_crypt.cc</a> 파일의 <a class="el" href="rgw__crypt_8cc_source.html#l00895">895</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  896</span>{</div>
<div class="line"><span class="lineno">  897</span>  <span class="keyword">auto</span> kek_iter = s-&gt;<a class="code hl_variable" href="structreq__state.html#af7797f02899809abc98cfc41f751e846">bucket_attrs</a>.find(<a class="code hl_define" href="rgw__common_8h.html#a823e73a8c6223d3cf6b1f7a30b486544">RGW_ATTR_BUCKET_ENCRYPTION_KEY_ID</a>);</div>
<div class="line"><span class="lineno">  898</span>  <span class="keywordflow">if</span> (kek_iter == s-&gt;<a class="code hl_variable" href="structreq__state.html#af7797f02899809abc98cfc41f751e846">bucket_attrs</a>.end())</div>
<div class="line"><span class="lineno">  899</span>    <span class="keywordflow">return</span> std::string();</div>
<div class="line"><span class="lineno">  900</span>  std::string a_key { kek_iter-&gt;second.to_str() };</div>
<div class="line"><span class="lineno">  901</span>  <span class="comment">// early code appends a nul; pretend that didn&#39;t happen</span></div>
<div class="line"><span class="lineno">  902</span>  <span class="keyword">auto</span> l { a_key.length() };</div>
<div class="line"><span class="lineno">  903</span>  <span class="keywordflow">if</span> (l &gt; 0 &amp;&amp; a_key[l-1] == <span class="charliteral">&#39;\0&#39;</span>) {</div>
<div class="line"><span class="lineno">  904</span>    a_key.resize(--l);</div>
<div class="line"><span class="lineno">  905</span>  }</div>
<div class="line"><span class="lineno">  906</span>  <span class="keywordflow">return</span> a_key;</div>
<div class="line"><span class="lineno">  907</span>}</div>
<div class="ttc" id="argw__common_8h_html_a823e73a8c6223d3cf6b1f7a30b486544"><div class="ttname"><a href="rgw__common_8h.html#a823e73a8c6223d3cf6b1f7a30b486544">RGW_ATTR_BUCKET_ENCRYPTION_KEY_ID</a></div><div class="ttdeci">#define RGW_ATTR_BUCKET_ENCRYPTION_KEY_ID</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l00152">rgw_common.h:152</a></div></div>
<div class="ttc" id="astructreq__state_html_af7797f02899809abc98cfc41f751e846"><div class="ttname"><a href="structreq__state.html#af7797f02899809abc98cfc41f751e846">req_state::bucket_attrs</a></div><div class="ttdeci">std::map&lt; std::string, ceph::bufferlist &gt; bucket_attrs</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l01602">rgw_common.h:1602</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="rgw__crypt_8cc_a314d096a1d1963c887425d4913690130_icgraph.png" border="0" usemap="#argw__crypt_8cc_a314d096a1d1963c887425d4913690130_icgraph" alt=""/></div>
<map name="argw__crypt_8cc_a314d096a1d1963c887425d4913690130_icgraph" id="argw__crypt_8cc_a314d096a1d1963c887425d4913690130_icgraph">
<area shape="rect" title=" " alt="" coords="725,105,866,132"/>
<area shape="rect" href="rgw__crypt_8cc.html#a7a44f988f8c3329733f06e72d263666a" title=" " alt="" coords="490,80,652,107"/>
<area shape="poly" title=" " alt="" coords="710,112,652,105,653,100,711,106"/>
<area shape="rect" href="rgw__crypt_8cc.html#aa338e22213c357f47593f008b1d1fca3" title=" " alt="" coords="465,131,677,157"/>
<area shape="poly" title=" " alt="" coords="710,131,678,135,677,129,710,126"/>
<area shape="rect" href="rgw__crypt_8cc.html#a644bbfaccd952cddc83967e91f89caf5" title=" " alt="" coords="243,80,406,107"/>
<area shape="poly" title=" " alt="" coords="475,96,406,96,406,91,475,91"/>
<area shape="rect" href="class_r_g_w_put_obj___obj_store___s3.html#aac43ef6294ae6f90061fa06e560dfc0a" title=" " alt="" coords="19,5,170,48"/>
<area shape="poly" title=" " alt="" coords="260,78,170,51,171,46,262,73"/>
<area shape="rect" href="class_r_g_w_post_obj___obj_store___s3.html#ae2c71dfde7f4e10024b6cf4d766f480b" title=" " alt="" coords="15,72,174,115"/>
<area shape="poly" title=" " alt="" coords="228,96,174,96,174,91,228,91"/>
<area shape="rect" href="class_r_g_w_init_multipart___obj_store___s3.html#aec0b31cd487b8d8ce2a61b7d71072713" title=" " alt="" coords="5,139,184,181"/>
<area shape="poly" title=" " alt="" coords="258,114,232,121,168,141,166,135,231,116,257,109"/>
<area shape="rect" href="class_r_g_w_delete_bucket.html#ab7f9d5cbeee75b6a27229f0084a5189b" title=" " alt="" coords="232,131,417,157"/>
<area shape="poly" title=" " alt="" coords="449,147,418,147,418,141,449,141"/>
</map>
</div>

</div>
</div>
<a id="a491281ac82e7d1f5e1d7416f23e3c0b2" name="a491281ac82e7d1f5e1d7416f23e3c0b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a491281ac82e7d1f5e1d7416f23e3c0b2">&#9670;&#160;</a></span>get_crypto_accel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CryptoAccelRef get_crypto_accel </td>
          <td>(</td>
          <td class="paramtype">const DoutPrefixProvider *&#160;</td>
          <td class="paramname"><em>dpp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CephContext *&#160;</td>
          <td class="paramname"><em>cct</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="rgw__crypt_8cc_source.html">rgw_crypt.cc</a> 파일의 <a class="el" href="rgw__crypt_8cc_source.html#l00291">291</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  292</span>{</div>
<div class="line"><span class="lineno">  293</span>  CryptoAccelRef ca_impl = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  294</span>  stringstream ss;</div>
<div class="line"><span class="lineno">  295</span>  PluginRegistry *reg = <a class="code hl_variable" href="cls__fifo__legacy_8cc.html#aa76801f7597f40e158b5f38b2e6466c5">cct</a>-&gt;get_plugin_registry();</div>
<div class="line"><span class="lineno">  296</span>  <span class="keywordtype">string</span> crypto_accel_type = <a class="code hl_variable" href="cls__fifo__legacy_8cc.html#aa76801f7597f40e158b5f38b2e6466c5">cct</a>-&gt;_conf-&gt;plugin_crypto_accelerator;</div>
<div class="line"><span class="lineno">  297</span> </div>
<div class="line"><span class="lineno">  298</span>  CryptoPlugin *factory = <span class="keyword">dynamic_cast&lt;</span>CryptoPlugin*<span class="keyword">&gt;</span>(reg-&gt;get_with_load(<span class="stringliteral">&quot;crypto&quot;</span>, crypto_accel_type));</div>
<div class="line"><span class="lineno">  299</span>  <span class="keywordflow">if</span> (factory == <span class="keyword">nullptr</span>) {</div>
<div class="line"><span class="lineno">  300</span>    ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, -1) &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot; cannot load crypto accelerator of type &quot;</span> &lt;&lt; crypto_accel_type &lt;&lt; dendl;</div>
<div class="line"><span class="lineno">  301</span>    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  302</span>  }</div>
<div class="line"><span class="lineno">  303</span>  <span class="keywordtype">int</span> err = factory-&gt;factory(&amp;ca_impl, &amp;ss);</div>
<div class="line"><span class="lineno">  304</span>  <span class="keywordflow">if</span> (err) {</div>
<div class="line"><span class="lineno">  305</span>    ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, -1) &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot; factory return error &quot;</span> &lt;&lt; err &lt;&lt;</div>
<div class="line"><span class="lineno">  306</span>        <span class="stringliteral">&quot; with description: &quot;</span> &lt;&lt; ss.str() &lt;&lt; dendl;</div>
<div class="line"><span class="lineno">  307</span>  }</div>
<div class="line"><span class="lineno">  308</span>  <span class="keywordflow">return</span> ca_impl;</div>
<div class="line"><span class="lineno">  309</span>}</div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="rgw__crypt_8cc_a491281ac82e7d1f5e1d7416f23e3c0b2_cgraph.png" border="0" usemap="#argw__crypt_8cc_a491281ac82e7d1f5e1d7416f23e3c0b2_cgraph" alt=""/></div>
<map name="argw__crypt_8cc_a491281ac82e7d1f5e1d7416f23e3c0b2_cgraph" id="argw__crypt_8cc_a491281ac82e7d1f5e1d7416f23e3c0b2_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,126,32"/>
<area shape="rect" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5" title=" " alt="" coords="174,5,216,32"/>
<area shape="poly" title=" " alt="" coords="126,16,158,16,158,21,126,21"/>
</map>
</div>
<div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="rgw__crypt_8cc_a491281ac82e7d1f5e1d7416f23e3c0b2_icgraph.png" border="0" usemap="#argw__crypt_8cc_a491281ac82e7d1f5e1d7416f23e3c0b2_icgraph" alt=""/></div>
<map name="argw__crypt_8cc_a491281ac82e7d1f5e1d7416f23e3c0b2_icgraph" id="argw__crypt_8cc_a491281ac82e7d1f5e1d7416f23e3c0b2_icgraph">
<area shape="rect" title=" " alt="" coords="254,5,374,32"/>
<area shape="rect" href="class_a_e_s__256___c_b_c.html#a189b2e5ff9fd387346b6bf41c033567a" title=" " alt="" coords="5,5,206,32"/>
<area shape="poly" title=" " alt="" coords="238,21,206,21,206,16,238,16"/>
</map>
</div>

</div>
</div>
<a id="a7a44f988f8c3329733f06e72d263666a" name="a7a44f988f8c3329733f06e72d263666a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7a44f988f8c3329733f06e72d263666a">&#9670;&#160;</a></span>get_sse_s3_bucket_key()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int get_sse_s3_bucket_key </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structreq__state.html">req_state</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string &amp;&#160;</td>
          <td class="paramname"><em>key_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="rgw__crypt_8cc_source.html">rgw_crypt.cc</a> 파일의 <a class="el" href="rgw__crypt_8cc_source.html#l00945">945</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  947</span>{</div>
<div class="line"><span class="lineno">  948</span>  <span class="keywordtype">int</span> res;</div>
<div class="line"><span class="lineno">  949</span>  std::string saved_key;</div>
<div class="line"><span class="lineno">  950</span> </div>
<div class="line"><span class="lineno">  951</span>  key_id = <a class="code hl_function" href="rgw__crypt_8cc.html#add5c64ea25e03aeb38706533c5f98ca8">expand_key_name</a>(s, s-&gt;<a class="code hl_variable" href="structreq__state.html#a98ff7b0fe2e9f0a932493c80c89280dc">cct</a>-&gt;_conf-&gt;rgw_crypt_sse_s3_key_template);</div>
<div class="line"><span class="lineno">  952</span> </div>
<div class="line"><span class="lineno">  953</span>  <span class="keywordflow">if</span> (key_id == <a class="code hl_variable" href="rgw__crypt_8cc.html#a7bbedbb5f2e198570553befb1e69a86d">cant_expand_key</a>) {</div>
<div class="line"><span class="lineno">  954</span>    ldpp_dout(s, 5) &lt;&lt; <span class="stringliteral">&quot;ERROR: unable to expand key_id &quot;</span> &lt;&lt;</div>
<div class="line"><span class="lineno">  955</span>      s-&gt;<a class="code hl_variable" href="structreq__state.html#a98ff7b0fe2e9f0a932493c80c89280dc">cct</a>-&gt;_conf-&gt;rgw_crypt_sse_s3_key_template &lt;&lt; <span class="stringliteral">&quot; on bucket&quot;</span> &lt;&lt; dendl;</div>
<div class="line"><span class="lineno">  956</span>    s-&gt;<a class="code hl_variable" href="structreq__state.html#aa4ee7f575b1d568e2a7396e472013441">err</a>.<a class="code hl_variable" href="structrgw__err.html#ab3c8a498deb94929b307b9130edd6506">message</a> = <span class="stringliteral">&quot;Server side error - unable to expand key_id&quot;</span>;</div>
<div class="line"><span class="lineno">  957</span>    <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><span class="lineno">  958</span>  }</div>
<div class="line"><span class="lineno">  959</span> </div>
<div class="line"><span class="lineno">  960</span>  saved_key = <a class="code hl_function" href="rgw__crypt_8cc.html#a314d096a1d1963c887425d4913690130">fetch_bucket_key_id</a>(s);</div>
<div class="line"><span class="lineno">  961</span>  <span class="keywordflow">if</span> (saved_key != <span class="stringliteral">&quot;&quot;</span>) {</div>
<div class="line"><span class="lineno">  962</span>    ldpp_dout(s, 5) &lt;&lt; <span class="stringliteral">&quot;Found KEK ID: &quot;</span> &lt;&lt; key_id &lt;&lt; dendl;</div>
<div class="line"><span class="lineno">  963</span>  }</div>
<div class="line"><span class="lineno">  964</span>  <span class="keywordflow">if</span> (saved_key != key_id) {</div>
<div class="line"><span class="lineno">  965</span>    res = <a class="code hl_function" href="rgw__kms_8cc.html#a087bd18f72d78135b349d958fcbfff96">create_sse_s3_bucket_key</a>(s, s-&gt;<a class="code hl_variable" href="structreq__state.html#a98ff7b0fe2e9f0a932493c80c89280dc">cct</a>, key_id);</div>
<div class="line"><span class="lineno">  966</span>    <span class="keywordflow">if</span> (res != 0) {</div>
<div class="line"><span class="lineno">  967</span>      <span class="keywordflow">return</span> res;</div>
<div class="line"><span class="lineno">  968</span>    }</div>
<div class="line"><span class="lineno">  969</span>    bufferlist key_id_bl;</div>
<div class="line"><span class="lineno">  970</span>    key_id_bl.append(key_id.c_str(), key_id.length());</div>
<div class="line"><span class="lineno">  971</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> count = 0; <a class="code hl_enumvalue" href="namespacergw_1_1dmclock.html#a6ed0c6ad7f7fc29a06f52a0070d21493ae2942a04780e223b215eb8b663cf5353">count</a> &lt; 15; ++<a class="code hl_enumvalue" href="namespacergw_1_1dmclock.html#a6ed0c6ad7f7fc29a06f52a0070d21493ae2942a04780e223b215eb8b663cf5353">count</a>) {</div>
<div class="line"><span class="lineno">  972</span>      <a class="code hl_typedef" href="group___r_g_w_s_a_l.html#gab1b58d5f8747844fae5ddfb48fadf7bc">rgw::sal::Attrs</a> attrs = s-&gt;<a class="code hl_variable" href="structreq__state.html#a8b94554a9fef0d41ef5797293a63f2e5">bucket</a>-&gt;get_attrs();</div>
<div class="line"><span class="lineno">  973</span>      attrs[<a class="code hl_define" href="rgw__common_8h.html#a823e73a8c6223d3cf6b1f7a30b486544">RGW_ATTR_BUCKET_ENCRYPTION_KEY_ID</a>] = key_id_bl;</div>
<div class="line"><span class="lineno">  974</span>      res = s-&gt;<a class="code hl_variable" href="structreq__state.html#a8b94554a9fef0d41ef5797293a63f2e5">bucket</a>-&gt;merge_and_store_attrs(s, attrs, s-&gt;<a class="code hl_variable" href="structreq__state.html#ad3c78631c321aaeb2986ec3c2f2915c7">yield</a>);</div>
<div class="line"><span class="lineno">  975</span>      <span class="keywordflow">if</span> (res != -ECANCELED) {</div>
<div class="line"><span class="lineno">  976</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  977</span>      }</div>
<div class="line"><span class="lineno">  978</span>      res = s-&gt;<a class="code hl_variable" href="structreq__state.html#a8b94554a9fef0d41ef5797293a63f2e5">bucket</a>-&gt;try_refresh_info(s, <span class="keyword">nullptr</span>);</div>
<div class="line"><span class="lineno">  979</span>      <span class="keywordflow">if</span> (res != 0) {</div>
<div class="line"><span class="lineno">  980</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  981</span>      }</div>
<div class="line"><span class="lineno">  982</span>    }</div>
<div class="line"><span class="lineno">  983</span>    <span class="keywordflow">if</span> (res != 0) {</div>
<div class="line"><span class="lineno">  984</span>      ldpp_dout(s, 5) &lt;&lt; <span class="stringliteral">&quot;ERROR: unable to save new key_id on bucket&quot;</span> &lt;&lt; dendl;</div>
<div class="line"><span class="lineno">  985</span>      s-&gt;<a class="code hl_variable" href="structreq__state.html#aa4ee7f575b1d568e2a7396e472013441">err</a>.<a class="code hl_variable" href="structrgw__err.html#ab3c8a498deb94929b307b9130edd6506">message</a> = <span class="stringliteral">&quot;Server side error - unable to save key_id&quot;</span>;</div>
<div class="line"><span class="lineno">  986</span>      <span class="keywordflow">return</span> res;</div>
<div class="line"><span class="lineno">  987</span>    }</div>
<div class="line"><span class="lineno">  988</span>  }</div>
<div class="line"><span class="lineno">  989</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  990</span>}</div>
<div class="ttc" id="agroup___r_g_w_s_a_l_html_gab1b58d5f8747844fae5ddfb48fadf7bc"><div class="ttname"><a href="group___r_g_w_s_a_l.html#gab1b58d5f8747844fae5ddfb48fadf7bc">rgw::sal::Attrs</a></div><div class="ttdeci">std::map&lt; std::string, ceph::buffer::list &gt; Attrs</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l00053">rgw_common.h:53</a></div></div>
<div class="ttc" id="anamespacergw_1_1dmclock_html_a6ed0c6ad7f7fc29a06f52a0070d21493ae2942a04780e223b215eb8b663cf5353"><div class="ttname"><a href="namespacergw_1_1dmclock.html#a6ed0c6ad7f7fc29a06f52a0070d21493ae2942a04780e223b215eb8b663cf5353">rgw::dmclock::client_id::count</a></div><div class="ttdeci">@ count</div></div>
<div class="ttc" id="argw__crypt_8cc_html_a314d096a1d1963c887425d4913690130"><div class="ttname"><a href="rgw__crypt_8cc.html#a314d096a1d1963c887425d4913690130">fetch_bucket_key_id</a></div><div class="ttdeci">std::string fetch_bucket_key_id(struct req_state *s)</div><div class="ttdef"><b>Definition</b> <a href="rgw__crypt_8cc_source.html#l00895">rgw_crypt.cc:895</a></div></div>
<div class="ttc" id="argw__crypt_8cc_html_add5c64ea25e03aeb38706533c5f98ca8"><div class="ttname"><a href="rgw__crypt_8cc.html#add5c64ea25e03aeb38706533c5f98ca8">expand_key_name</a></div><div class="ttdeci">std::string expand_key_name(struct req_state *s, const std::string_view &amp;t)</div><div class="ttdef"><b>Definition</b> <a href="rgw__crypt_8cc_source.html#l00910">rgw_crypt.cc:910</a></div></div>
<div class="ttc" id="argw__kms_8cc_html_a087bd18f72d78135b349d958fcbfff96"><div class="ttname"><a href="rgw__kms_8cc.html#a087bd18f72d78135b349d958fcbfff96">create_sse_s3_bucket_key</a></div><div class="ttdeci">int create_sse_s3_bucket_key(const DoutPrefixProvider *dpp, CephContext *cct, const std::string &amp;bucket_key)</div><div class="ttdef"><b>Definition</b> <a href="rgw__kms_8cc_source.html#l01232">rgw_kms.cc:1232</a></div></div>
<div class="ttc" id="astructreq__state_html_a98ff7b0fe2e9f0a932493c80c89280dc"><div class="ttname"><a href="structreq__state.html#a98ff7b0fe2e9f0a932493c80c89280dc">req_state::cct</a></div><div class="ttdeci">CephContext * cct</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l01552">rgw_common.h:1552</a></div></div>
<div class="ttc" id="astructreq__state_html_aa4ee7f575b1d568e2a7396e472013441"><div class="ttname"><a href="structreq__state.html#aa4ee7f575b1d568e2a7396e472013441">req_state::err</a></div><div class="ttdeci">rgw_err err</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l01569">rgw_common.h:1569</a></div></div>
<div class="ttc" id="astructreq__state_html_ad3c78631c321aaeb2986ec3c2f2915c7"><div class="ttname"><a href="structreq__state.html#ad3c78631c321aaeb2986ec3c2f2915c7">req_state::yield</a></div><div class="ttdeci">optional_yield yield</div><div class="ttdoc">optional coroutine context</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l01688">rgw_common.h:1688</a></div></div>
<div class="ttc" id="astructrgw__err_html_ab3c8a498deb94929b307b9130edd6506"><div class="ttname"><a href="structrgw__err.html#ab3c8a498deb94929b307b9130edd6506">rgw_err::message</a></div><div class="ttdeci">std::string message</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l00307">rgw_common.h:307</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="rgw__crypt_8cc_a7a44f988f8c3329733f06e72d263666a_cgraph.png" border="0" usemap="#argw__crypt_8cc_a7a44f988f8c3329733f06e72d263666a_cgraph" alt=""/></div>
<map name="argw__crypt_8cc_a7a44f988f8c3329733f06e72d263666a_cgraph" id="argw__crypt_8cc_a7a44f988f8c3329733f06e72d263666a_cgraph">
<area shape="rect" title=" " alt="" coords="5,144,168,171"/>
<area shape="rect" href="rgw__kms_8cc.html#a087bd18f72d78135b349d958fcbfff96" title=" " alt="" coords="216,93,396,120"/>
<area shape="poly" title=" " alt="" coords="147,141,230,121,231,127,148,146"/>
<area shape="rect" href="rgw__crypt_8cc.html#add5c64ea25e03aeb38706533c5f98ca8" title=" " alt="" coords="241,144,371,171"/>
<area shape="poly" title=" " alt="" coords="168,155,225,155,225,160,168,160"/>
<area shape="rect" href="rgw__crypt_8cc.html#a314d096a1d1963c887425d4913690130" title=" " alt="" coords="236,195,376,221"/>
<area shape="poly" title=" " alt="" coords="148,169,231,188,230,193,147,174"/>
<area shape="rect" href="class_sse_s3_context.html#aad26c7b18dccb1932a77b8a817db2797" title=" " alt="" coords="444,5,606,32"/>
<area shape="poly" title=" " alt="" coords="334,90,443,42,461,35,463,40,445,46,336,95"/>
<area shape="rect" href="rgw__kms_8cc.html#a18f34abcef8bf2ff8ab2180171385010" title=" " alt="" coords="452,56,598,99"/>
<area shape="poly" title=" " alt="" coords="396,92,436,87,437,92,397,97"/>
<area shape="rect" href="class_transit_secret_engine.html#a4ca62b49e59785b7fb278c48253b2949" title=" " alt="" coords="456,195,595,237"/>
<area shape="poly" title=" " alt="" coords="366,118,397,130,444,155,486,183,483,188,441,160,395,134,364,123"/>
<area shape="rect" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5" title=" " alt="" coords="1135,249,1177,276"/>
<area shape="poly" title=" " alt="" coords="397,109,583,126,692,140,800,159,892,180,982,204,1121,248,1120,253,981,209,891,185,799,164,691,146,583,132,396,115"/>
<area shape="rect" href="rgw__kms_8cc.html#ae5268633f9996eea42716e2de4037b13" title=" " alt="" coords="654,173,800,200"/>
<area shape="poly" title=" " alt="" coords="595,203,638,197,639,202,595,209"/>
<area shape="poly" title=" " alt="" coords="595,218,1120,257,1120,263,595,224"/>
<area shape="rect" href="class_vault_secret_engine.html#a21ddaddc49189fb68733634ce8d26467" title=" " alt="" coords="658,771,796,813"/>
<area shape="poly" title=" " alt="" coords="537,237,716,755,711,756,532,239"/>
<area shape="poly" title=" " alt="" coords="728,770,741,671,764,533,780,463,799,399,821,347,846,311,866,299,896,288,971,274,1052,265,1119,261,1119,266,1052,270,971,279,897,293,869,303,849,315,825,349,804,401,785,464,769,534,746,672,733,770"/>
<area shape="rect" href="class_s_s_e_context.html#a35609fc25555f9a458b2dd6a22c18cde" title=" " alt="" coords="876,392,1002,419"/>
<area shape="poly" title=" " alt="" coords="726,770,732,704,749,612,764,563,785,514,812,469,846,429,860,418,863,423,849,433,816,472,790,516,769,564,754,613,737,704,731,770"/>
<area shape="rect" href="class_r_g_w_h_t_t_p_client.html#a8d4aa112a185bf07f192bea69b3c31fb" title=" " alt="" coords="855,443,1023,485"/>
<area shape="poly" title=" " alt="" coords="728,770,739,715,760,642,775,603,794,564,818,528,846,495,849,493,853,496,850,499,822,531,799,567,780,605,765,644,744,716,734,771"/>
<area shape="rect" href="class_s_s_e_context.html#ac0affb02e7b7f1a40b3bb115858a993d" title=" " alt="" coords="876,509,1002,536"/>
<area shape="poly" title=" " alt="" coords="730,769,743,723,765,663,799,600,820,571,846,546,860,537,863,541,849,550,824,575,803,603,770,665,748,724,735,771"/>
<area shape="rect" href="rgw__kms_8cc.html#a242cecf75d47f64b1de73858c54fb6f9" title=" " alt="" coords="898,560,980,587"/>
<area shape="poly" title=" " alt="" coords="733,769,748,732,772,685,805,637,846,596,882,579,884,584,849,601,809,641,777,688,753,734,738,771"/>
<area shape="rect" href="class_r_g_w_h_t_t_p_client.html#a8d89f57ce810c5320411cf2ddb01f339" title=" " alt="" coords="867,611,1011,653"/>
<area shape="poly" title=" " alt="" coords="742,769,785,716,814,688,846,663,854,658,856,663,849,668,818,692,789,720,746,772"/>
<area shape="rect" href="class_s_s_e_context.html#a36821644035d6a926046b950ed65e6f1" title=" " alt="" coords="848,677,1030,704"/>
<area shape="poly" title=" " alt="" coords="756,768,798,740,847,714,863,707,865,712,849,718,800,745,759,772"/>
<area shape="rect" href="class_vault_secret_engine.html#a8eb020a414a627058032342a99a29914" title=" " alt="" coords="869,325,1009,368"/>
<area shape="poly" title=" " alt="" coords="726,770,729,697,745,593,760,536,781,479,809,426,846,378,854,370,858,374,850,382,814,429,786,482,765,538,750,594,735,698,731,771"/>
<area shape="rect" href="class_s_s_e_context.html#a7db6b0d790ab7b4fe42306f209416fcf" title=" " alt="" coords="873,728,1005,755"/>
<area shape="poly" title=" " alt="" coords="796,773,865,756,866,761,797,778"/>
<area shape="rect" href="class_r_g_w_h_t_t_p_client.html#a38de0b9ceefce30a6003b12d562e425d" title=" " alt="" coords="853,779,1025,805"/>
<area shape="poly" title=" " alt="" coords="796,789,837,789,837,795,796,795"/>
<area shape="rect" href="class_r_g_w_h_t_t_p_client.html#aa7b0d717e67e4242b73f7741381f1856" title=" " alt="" coords="867,829,1011,872"/>
<area shape="poly" title=" " alt="" coords="797,808,852,824,851,829,796,814"/>
<area shape="rect" href="class_r_g_w_h_t_t_p_client.html#a7dcea71d200865dff0dfcd84328bf5ab" title=" " alt="" coords="867,896,1011,939"/>
<area shape="poly" title=" " alt="" coords="754,812,797,847,849,882,859,887,856,891,846,886,793,851,750,816"/>
<area shape="rect" href="class_r_g_w_h_t_t_p_client.html#a8008f2d1b953f662a8eb5fe5e385851a" title=" " alt="" coords="867,963,1011,1005"/>
<area shape="poly" title=" " alt="" coords="742,812,783,879,814,916,849,949,855,952,852,957,846,953,810,920,779,882,737,815"/>
<area shape="rect" href="class_r_g_w_h_t_t_p_transceiver.html#abd8c12eaff4e72b22336e632826663fd" title=" " alt="" coords="864,1029,1014,1072"/>
<area shape="poly" title=" " alt="" coords="737,813,751,856,774,910,806,966,827,992,849,1015,853,1018,850,1023,846,1019,823,996,802,969,769,912,746,857,732,815"/>
<area shape="rect" href="class_r_g_w_h_t_t_p_client.html#a340f32b14fc826866fe476175ceb2ed8" title=" " alt="" coords="867,1096,1011,1139"/>
<area shape="poly" title=" " alt="" coords="734,813,744,867,765,939,780,977,799,1015,822,1051,850,1082,855,1087,852,1091,846,1086,818,1054,794,1018,775,979,760,941,739,868,729,814"/>
<area shape="rect" href="class_r_g_w_h_t_t_p_client.html#a1db09d373a335c53cf1fd6d6339b5feb" title=" " alt="" coords="867,1163,1011,1205"/>
<area shape="poly" title=" " alt="" coords="732,814,739,878,757,968,772,1016,792,1064,818,1109,850,1149,855,1154,852,1158,846,1152,813,1112,787,1066,767,1018,752,969,733,879,727,814"/>
<area shape="rect" href="class_s_s_e_context.html#acac13eefbf73e3012d7f6607705720f1" title=" " alt="" coords="858,1229,1020,1256"/>
<area shape="poly" title=" " alt="" coords="730,814,732,890,737,941,746,998,761,1056,782,1114,811,1168,850,1216,853,1218,849,1222,846,1219,807,1171,777,1116,756,1058,741,999,732,942,727,890,725,814"/>
<area shape="rect" href="class_s_s_e_context.html#a3288cf381cc52282abf2805a614a2ffd" title=" " alt="" coords="850,1280,1028,1307"/>
<area shape="poly" title=" " alt="" coords="734,813,747,910,771,1047,787,1116,806,1180,827,1231,850,1266,853,1269,849,1273,846,1270,822,1234,801,1181,782,1117,766,1048,742,911,728,814"/>
<area shape="rect" href="class_s_s_e_context.html#afca6c5ff839511f7f7185921fd0fd24d" title=" " alt="" coords="850,1331,1028,1357"/>
<area shape="poly" title=" " alt="" coords="733,813,745,919,768,1071,784,1149,803,1220,825,1278,850,1317,852,1320,849,1323,846,1320,820,1280,798,1221,779,1150,763,1072,740,920,728,814"/>
<area shape="rect" href="class_s_s_e_context.html#ac2bf421e1be7cc18605373abe07e59d6" title=" " alt="" coords="862,1381,1016,1408"/>
<area shape="poly" title=" " alt="" coords="733,813,743,928,765,1095,781,1181,800,1260,823,1324,836,1349,850,1368,852,1370,848,1374,846,1371,831,1352,818,1326,795,1261,775,1182,760,1096,738,929,727,814"/>
<area shape="poly" title=" " alt="" coords="995,322,1120,274,1121,279,997,327"/>
<area shape="rect" href="class_s_s_e_context.html#abaaaa496191b276cc38cb00b2319ccf0" title=" " alt="" coords="1078,333,1234,360"/>
<area shape="poly" title=" " alt="" coords="1009,344,1063,344,1063,349,1009,349"/>
<area shape="rect" href="class_r_g_w_h_t_t_p.html#adfb34d20b834f501e738cacd37dc8586" title=" " alt="" coords="1087,779,1226,805"/>
<area shape="poly" title=" " alt="" coords="1026,789,1071,789,1071,795,1026,795"/>
<area shape="rect" href="class_r_g_w_h_t_t_p.html#ac8ab575c584649a3aaa6c3391f918e3a" title=" " alt="" coords="1296,752,1418,779"/>
<area shape="poly" title=" " alt="" coords="1226,780,1281,773,1282,778,1227,785"/>
<area shape="rect" href="class_r_g_w_h_t_t_p_client.html#a7d489c6689cd946b572415111b0c97b5" title=" " alt="" coords="1282,804,1432,831"/>
<area shape="poly" title=" " alt="" coords="1227,798,1267,803,1266,809,1226,803"/>
<area shape="rect" href="class_r_g_w_h_t_t_p_manager.html#a12fb23d99e733aa22fdfd983c7581698" title=" " alt="" coords="1480,671,1644,713"/>
<area shape="poly" title=" " alt="" coords="1396,749,1485,717,1487,722,1398,754"/>
<area shape="rect" href="class_r_g_w_h_t_t_p_manager.html#a16579a72dddb523cd5bdbf2957d22ef8" title=" " alt="" coords="1699,437,1872,480"/>
<area shape="poly" title=" " alt="" coords="1569,669,1586,631,1613,583,1647,533,1690,490,1695,486,1698,491,1694,494,1651,537,1617,586,1591,633,1574,671"/>
<area shape="rect" href="class_r_g_w_i_o_provider.html#a2bbd769b91d0d58e2d9ececade3a7c50" title=" " alt="" coords="1716,504,1854,547"/>
<area shape="poly" title=" " alt="" coords="1577,668,1624,613,1656,583,1691,556,1701,551,1703,555,1693,561,1659,587,1628,617,1581,672"/>
<area shape="rect" href="class_r_g_w_h_t_t_p_client.html#aa52a4d1d70d05fd7eb868df48bfc1c40" title=" " alt="" coords="1713,571,1857,613"/>
<area shape="poly" title=" " alt="" coords="1601,668,1691,623,1705,617,1707,622,1693,628,1603,673"/>
<area shape="rect" href="class_r_g_w_h_t_t_p_client.html#a8bbd7cf32732770e498d9c7e1033f519" title=" " alt="" coords="1714,704,1857,747"/>
<area shape="poly" title=" " alt="" coords="1644,702,1699,710,1698,715,1644,707"/>
<area shape="rect" href="class_r_g_w_h_t_t_p_manager.html#abb00c0a30c2ba9bfe83084e56e5dc897" title=" " alt="" coords="1704,637,1867,680"/>
<area shape="poly" title=" " alt="" coords="1644,677,1687,671,1688,676,1644,682"/>
<area shape="rect" href="class_r_g_w_h_t_t_p_manager.html#ae187bc0e80bace76ab6b7597491a73fb" title=" " alt="" coords="1692,771,1878,813"/>
<area shape="poly" title=" " alt="" coords="1603,711,1693,756,1707,762,1705,767,1691,761,1601,716"/>
<area shape="rect" href="class_r_g_w_h_t_t_p_manager.html#a3e3fd00dfa67812b4be7d3e5b80f126d" title=" " alt="" coords="1697,837,1874,880"/>
<area shape="poly" title=" " alt="" coords="1581,712,1628,767,1659,797,1693,823,1701,828,1698,832,1691,828,1656,801,1624,771,1577,716"/>
<area shape="rect" href="class_r_g_w_h_t_t_p_manager.html#ade749005387f5e6a4de36d5112ce54f0" title=" " alt="" coords="1926,404,2123,447"/>
<area shape="poly" title=" " alt="" coords="1872,444,1911,439,1911,444,1873,449"/>
<area shape="rect" href="structrgw__http__req__data.html#ad2784ed636d8d248f1672b72c1bb5c60" title=" " alt="" coords="1957,471,2092,513"/>
<area shape="poly" title=" " alt="" coords="1873,468,1942,478,1941,483,1872,473"/>
<area shape="rect" href="rgw__http__client_8cc.html#ab7a03eacc0f5a844c234c3dfc09dda2e" title=" " alt="" coords="1963,683,2086,709"/>
<area shape="poly" title=" " alt="" coords="1857,714,1947,703,1948,708,1857,719"/>
<area shape="rect" href="structrgw__http__req__data.html#af6cbebaa0a8812948d6d46938eade1c0" title=" " alt="" coords="1957,616,2092,659"/>
<area shape="poly" title=" " alt="" coords="1848,701,1877,690,1925,668,1942,662,1944,667,1927,673,1879,694,1849,706"/>
<area shape="rect" href="rgw__http__client_8cc.html#accc2196bc3f5081dc39a8e6c8a045c3e" title=" " alt="" coords="1966,733,2083,760"/>
<area shape="poly" title=" " alt="" coords="1857,729,1951,737,1950,743,1857,734"/>
<area shape="rect" href="rgw__http__client_8cc.html#a83802c1e67d9393048491932a74006bf" title=" " alt="" coords="1961,784,2088,811"/>
<area shape="poly" title=" " alt="" coords="1850,745,1927,769,1953,777,1952,782,1926,775,1848,750"/>
<area shape="rect" href="class_r_g_w_h_t_t_p_client.html#af5c3637b14b2ba94d473c5cd5fdace00" title=" " alt="" coords="1941,835,2108,877"/>
<area shape="poly" title=" " alt="" coords="1859,744,1880,757,1896,773,1905,790,1913,805,1928,821,1934,825,1931,829,1925,825,1909,808,1900,792,1892,776,1877,761,1856,749"/>
<area shape="poly" title=" " alt="" coords="1867,649,1941,642,1942,647,1868,654"/>
<area shape="rect" href="structrgw__http__req__data.html#a2cb0db213911deffc4b43a81a37098b5" title=" " alt="" coords="1483,808,1641,835"/>
<area shape="poly" title=" " alt="" coords="1432,816,1467,817,1467,822,1432,821"/>
<area shape="rect" href="structrgw__http__req__data.html#a5d6962235aabed5aabe98213b486ccb1" title=" " alt="" coords="1718,904,1853,947"/>
<area shape="poly" title=" " alt="" coords="1587,833,1635,860,1693,890,1707,895,1705,900,1691,894,1633,865,1585,838"/>
</map>
</div>
<div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="rgw__crypt_8cc_a7a44f988f8c3329733f06e72d263666a_icgraph.png" border="0" usemap="#argw__crypt_8cc_a7a44f988f8c3329733f06e72d263666a_icgraph" alt=""/></div>
<map name="argw__crypt_8cc_a7a44f988f8c3329733f06e72d263666a_icgraph" id="argw__crypt_8cc_a7a44f988f8c3329733f06e72d263666a_icgraph">
<area shape="rect" title=" " alt="" coords="442,80,604,107"/>
<area shape="rect" href="rgw__crypt_8cc.html#a644bbfaccd952cddc83967e91f89caf5" title=" " alt="" coords="232,80,394,107"/>
<area shape="poly" title=" " alt="" coords="427,96,395,96,395,91,427,91"/>
<area shape="rect" href="class_r_g_w_put_obj___obj_store___s3.html#aac43ef6294ae6f90061fa06e560dfc0a" title=" " alt="" coords="19,5,170,48"/>
<area shape="poly" title=" " alt="" coords="251,77,166,51,168,46,253,72"/>
<area shape="rect" href="class_r_g_w_post_obj___obj_store___s3.html#ae2c71dfde7f4e10024b6cf4d766f480b" title=" " alt="" coords="15,72,174,115"/>
<area shape="poly" title=" " alt="" coords="216,96,174,96,174,91,216,91"/>
<area shape="rect" href="class_r_g_w_init_multipart___obj_store___s3.html#aec0b31cd487b8d8ce2a61b7d71072713" title=" " alt="" coords="5,139,184,181"/>
<area shape="poly" title=" " alt="" coords="253,114,168,141,166,135,251,109"/>
</map>
</div>

</div>
</div>
<a id="af41e16ec2085c8a5ce5576bbe57b023b" name="af41e16ec2085c8a5ce5576bbe57b023b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af41e16ec2085c8a5ce5576bbe57b023b">&#9670;&#160;</a></span>get_tenant_or_id()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static const std::string &amp; get_tenant_or_id </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structreq__state.html">req_state</a> *&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="rgw__crypt_8cc_source.html">rgw_crypt.cc</a> 파일의 <a class="el" href="rgw__crypt_8cc_source.html#l00212">212</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  213</span>{</div>
<div class="line"><span class="lineno">  214</span>    <span class="keyword">const</span> std::string &amp;tenant{ s-&gt;<a class="code hl_variable" href="structreq__state.html#ab4d1aae69f6d4a5a0a6f22c52405262a">user</a>-&gt;get_tenant() };</div>
<div class="line"><span class="lineno">  215</span>    <span class="keywordflow">if</span> (!tenant.empty()) <span class="keywordflow">return</span> tenant;</div>
<div class="line"><span class="lineno">  216</span>    <span class="keywordflow">return</span> s-&gt;<a class="code hl_variable" href="structreq__state.html#ab4d1aae69f6d4a5a0a6f22c52405262a">user</a>-&gt;get_id().id;</div>
<div class="line"><span class="lineno">  217</span>}</div>
<div class="ttc" id="astructreq__state_html_ab4d1aae69f6d4a5a0a6f22c52405262a"><div class="ttname"><a href="structreq__state.html#ab4d1aae69f6d4a5a0a6f22c52405262a">req_state::user</a></div><div class="ttdeci">std::unique_ptr&lt; rgw::sal::User &gt; user</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l01608">rgw_common.h:1608</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="rgw__crypt_8cc_af41e16ec2085c8a5ce5576bbe57b023b_icgraph.png" border="0" usemap="#argw__crypt_8cc_af41e16ec2085c8a5ce5576bbe57b023b_icgraph" alt=""/></div>
<map name="argw__crypt_8cc_af41e16ec2085c8a5ce5576bbe57b023b_icgraph" id="argw__crypt_8cc_af41e16ec2085c8a5ce5576bbe57b023b_icgraph">
<area shape="rect" title=" " alt="" coords="655,80,773,107"/>
<area shape="rect" href="rgw__crypt_8cc.html#ad74b8dce6c7052201e0d2bc8fbe6b0c3" title=" " alt="" coords="442,80,607,107"/>
<area shape="poly" title=" " alt="" coords="640,96,608,96,608,91,640,91"/>
<area shape="rect" href="rgw__crypt_8cc.html#a644bbfaccd952cddc83967e91f89caf5" title=" " alt="" coords="232,80,394,107"/>
<area shape="poly" title=" " alt="" coords="427,96,394,96,394,91,427,91"/>
<area shape="rect" href="class_r_g_w_put_obj___obj_store___s3.html#aac43ef6294ae6f90061fa06e560dfc0a" title=" " alt="" coords="19,5,170,48"/>
<area shape="poly" title=" " alt="" coords="251,77,166,51,168,46,253,72"/>
<area shape="rect" href="class_r_g_w_post_obj___obj_store___s3.html#ae2c71dfde7f4e10024b6cf4d766f480b" title=" " alt="" coords="15,72,174,115"/>
<area shape="poly" title=" " alt="" coords="216,96,174,96,174,91,216,91"/>
<area shape="rect" href="class_r_g_w_init_multipart___obj_store___s3.html#aec0b31cd487b8d8ce2a61b7d71072713" title=" " alt="" coords="5,139,184,181"/>
<area shape="poly" title=" " alt="" coords="253,114,168,141,166,135,251,109"/>
</map>
</div>

</div>
</div>
<a id="ad74b8dce6c7052201e0d2bc8fbe6b0c3" name="ad74b8dce6c7052201e0d2bc8fbe6b0c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad74b8dce6c7052201e0d2bc8fbe6b0c3">&#9670;&#160;</a></span>make_canonical_context()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int make_canonical_context </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structreq__state.html">req_state</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string_view &amp;&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string &amp;&#160;</td>
          <td class="paramname"><em>cooked_context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="rgw__crypt_8cc_source.html">rgw_crypt.cc</a> 파일의 <a class="el" href="rgw__crypt_8cc_source.html#l00220">220</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  223</span>{</div>
<div class="line"><span class="lineno">  224</span>    rapidjson::Document d;</div>
<div class="line"><span class="lineno">  225</span>    <span class="keywordtype">bool</span> b = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  226</span><a class="code hl_enumeration" href="rgw__crypt_8cc.html#adde527b14a1813b09f5f168c2e92775c">mec_option</a> options {</div>
<div class="line"><span class="lineno">  227</span><span class="comment">//mec_option::number_ok :   SEE BOTTOM OF FILE</span></div>
<div class="line"><span class="lineno">  228</span><a class="code hl_enumvalue" href="rgw__crypt_8cc.html#adde527b14a1813b09f5f168c2e92775caa2e4822a98337283e39f7b60acf85ec9">mec_option::empty</a> };</div>
<div class="line"><span class="lineno">  229</span>    <a class="code hl_struct" href="structrgw__obj.html">rgw_obj</a> obj;</div>
<div class="line"><span class="lineno">  230</span>    std::ostringstream oss;</div>
<div class="line"><span class="lineno">  231</span>    <a class="code hl_class" href="classcanonical__char__sorter.html">canonical_char_sorter&lt;MyMember&gt;</a> ccs{s, s-&gt;<a class="code hl_variable" href="structreq__state.html#a98ff7b0fe2e9f0a932493c80c89280dc">cct</a>};</div>
<div class="line"><span class="lineno">  232</span> </div>
<div class="line"><span class="lineno">  233</span>    obj.<a class="code hl_variable" href="structrgw__obj.html#ae1e6e328be8e7429da83a04198cae1d2">bucket</a>.<a class="code hl_variable" href="structrgw__bucket.html#ac2d65e02c9242ad2ea2ad31da15d8836">tenant</a> = <a class="code hl_function" href="rgw__crypt_8cc.html#af41e16ec2085c8a5ce5576bbe57b023b">get_tenant_or_id</a>(s);</div>
<div class="line"><span class="lineno">  234</span>    obj.<a class="code hl_variable" href="structrgw__obj.html#ae1e6e328be8e7429da83a04198cae1d2">bucket</a>.<a class="code hl_variable" href="structrgw__bucket.html#a32d3529f5b0c53051c856a7abe867a6b">name</a> = s-&gt;<a class="code hl_variable" href="structreq__state.html#a8b94554a9fef0d41ef5797293a63f2e5">bucket</a>-&gt;get_name();</div>
<div class="line"><span class="lineno">  235</span>    obj.<a class="code hl_variable" href="structrgw__obj.html#a72f701ee22f8eb3f3868d0aefb581249">key</a>.<a class="code hl_variable" href="structrgw__obj__key.html#a009cbe657bf6a001d40af0a80e533186">name</a> = s-&gt;<a class="code hl_variable" href="structreq__state.html#a67c6558952757f16ddb49664ccc25a5c">object</a>-&gt;get_name();</div>
<div class="line"><span class="lineno">  236</span>    std::string iline;</div>
<div class="line"><span class="lineno">  237</span>    rapidjson::Document::AllocatorType &amp;allocator { d.GetAllocator() };</div>
<div class="line"><span class="lineno">  238</span> </div>
<div class="line"><span class="lineno">  239</span>    <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  240</span>    iline = <a class="code hl_function" href="namespacergw.html#ac234a4895c4d28112daeda8c2b8ec205">rgw::from_base64</a>(context);</div>
<div class="line"><span class="lineno">  241</span>    } <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::exception&amp; e) {</div>
<div class="line"><span class="lineno">  242</span>    oss &lt;&lt; <span class="stringliteral">&quot;bad context: &quot;</span> &lt;&lt; e.what();</div>
<div class="line"><span class="lineno">  243</span>    s-&gt;<a class="code hl_variable" href="structreq__state.html#aa4ee7f575b1d568e2a7396e472013441">err</a>.<a class="code hl_variable" href="structrgw__err.html#ab3c8a498deb94929b307b9130edd6506">message</a> = oss.str();</div>
<div class="line"><span class="lineno">  244</span>        <span class="keywordflow">return</span> -<a class="code hl_define" href="rgw__common_8h.html#ad9afe8cb242cef9c7e4cbd064c12aa83">ERR_INVALID_REQUEST</a>;</div>
<div class="line"><span class="lineno">  245</span>    }</div>
<div class="line"><span class="lineno">  246</span>    rapidjson::StringStream isw(iline.c_str());</div>
<div class="line"><span class="lineno">  247</span>    <span class="keywordflow">if</span> (!iline.length())</div>
<div class="line"><span class="lineno">  248</span>        d.SetObject();</div>
<div class="line"><span class="lineno">  249</span><span class="comment">//    else if (qflag)       SEE BOTTOM OF FILE</span></div>
<div class="line"><span class="lineno">  250</span><span class="comment">//       d.ParseStream&lt;rapidjson::kParseNumbersAsStringsFlag&gt;(isw);</span></div>
<div class="line"><span class="lineno">  251</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  252</span>        d.ParseStream&lt;rapidjson::kParseFullPrecisionFlag&gt;(isw);</div>
<div class="line"><span class="lineno">  253</span>    <span class="keywordflow">if</span> (isw.Tell() != iline.length()) {</div>
<div class="line"><span class="lineno">  254</span>        oss &lt;&lt; <span class="stringliteral">&quot;bad context: did not consume all of input: @ &quot;</span></div>
<div class="line"><span class="lineno">  255</span>        &lt;&lt; isw.Tell();</div>
<div class="line"><span class="lineno">  256</span>    s-&gt;<a class="code hl_variable" href="structreq__state.html#aa4ee7f575b1d568e2a7396e472013441">err</a>.<a class="code hl_variable" href="structrgw__err.html#ab3c8a498deb94929b307b9130edd6506">message</a> = oss.str();</div>
<div class="line"><span class="lineno">  257</span>        <span class="keywordflow">return</span> -<a class="code hl_define" href="rgw__common_8h.html#ad9afe8cb242cef9c7e4cbd064c12aa83">ERR_INVALID_REQUEST</a>;</div>
<div class="line"><span class="lineno">  258</span>    }</div>
<div class="line"><span class="lineno">  259</span>    <span class="keywordflow">if</span> (d.HasParseError()) {</div>
<div class="line"><span class="lineno">  260</span>        oss &lt;&lt; <span class="stringliteral">&quot;bad context: parse error: @ &quot;</span> &lt;&lt; d.GetErrorOffset()</div>
<div class="line"><span class="lineno">  261</span>        &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; rapidjson::GetParseError_En(d.GetParseError());</div>
<div class="line"><span class="lineno">  262</span>    s-&gt;<a class="code hl_variable" href="structreq__state.html#aa4ee7f575b1d568e2a7396e472013441">err</a>.<a class="code hl_variable" href="structrgw__err.html#ab3c8a498deb94929b307b9130edd6506">message</a> = oss.str();</div>
<div class="line"><span class="lineno">  263</span>        <span class="keywordflow">return</span> -<a class="code hl_define" href="rgw__common_8h.html#ad9afe8cb242cef9c7e4cbd064c12aa83">ERR_INVALID_REQUEST</a>;</div>
<div class="line"><span class="lineno">  264</span>    }</div>
<div class="line"><span class="lineno">  265</span>    rapidjson::StringBuffer buf;</div>
<div class="line"><span class="lineno">  266</span>    rapidjson::Writer&lt;rapidjson::StringBuffer&gt; writer(buf);</div>
<div class="line"><span class="lineno">  267</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="rgw__crypt_8cc.html#a468055d9acfdf57d836f7c110fae5a42">add_object_to_context</a>(obj, d)) {</div>
<div class="line"><span class="lineno">  268</span>    ldpp_dout(s, -1) &lt;&lt; <span class="stringliteral">&quot;ERROR: can&#39;t add default value to context&quot;</span> &lt;&lt; dendl;</div>
<div class="line"><span class="lineno">  269</span>    s-&gt;<a class="code hl_variable" href="structreq__state.html#aa4ee7f575b1d568e2a7396e472013441">err</a>.<a class="code hl_variable" href="structrgw__err.html#ab3c8a498deb94929b307b9130edd6506">message</a> = <span class="stringliteral">&quot;context: internal error adding defaults&quot;</span>;</div>
<div class="line"><span class="lineno">  270</span>        <span class="keywordflow">return</span> -<a class="code hl_define" href="rgw__common_8h.html#ad9afe8cb242cef9c7e4cbd064c12aa83">ERR_INVALID_REQUEST</a>;</div>
<div class="line"><span class="lineno">  271</span>    }</div>
<div class="line"><span class="lineno">  272</span>    b = <a class="code hl_function" href="rgw__crypt_8cc.html#a818709fd4c5831710c61c53868e74057">make_everything_canonical</a>(d, allocator, ccs, options) == <a class="code hl_enumvalue" href="rgw__crypt_8cc.html#a6fbab6cd1bb07bd350fe2d0567a91860a260ca9dd8a4577fc00b7bd5810298076">mec_error::success</a>;</div>
<div class="line"><span class="lineno">  273</span>    <span class="keywordflow">if</span> (!b) {</div>
<div class="line"><span class="lineno">  274</span>    ldpp_dout(s, -1) &lt;&lt; <span class="stringliteral">&quot;ERROR: can&#39;t make canonical json &lt;&quot;</span></div>
<div class="line"><span class="lineno">  275</span>        &lt;&lt; <a class="code hl_enumeration" href="namespacergw_1_1lua.html#a5652b6711c456135043c799876aec7c1">context</a> &lt;&lt; <span class="stringliteral">&quot;&gt;&quot;</span> &lt;&lt; dendl;</div>
<div class="line"><span class="lineno">  276</span>    s-&gt;<a class="code hl_variable" href="structreq__state.html#aa4ee7f575b1d568e2a7396e472013441">err</a>.<a class="code hl_variable" href="structrgw__err.html#ab3c8a498deb94929b307b9130edd6506">message</a> = <span class="stringliteral">&quot;context: can&#39;t make canonical&quot;</span>;</div>
<div class="line"><span class="lineno">  277</span>        <span class="keywordflow">return</span> -<a class="code hl_define" href="rgw__common_8h.html#ad9afe8cb242cef9c7e4cbd064c12aa83">ERR_INVALID_REQUEST</a>;</div>
<div class="line"><span class="lineno">  278</span>    }</div>
<div class="line"><span class="lineno">  279</span>    b = <a class="code hl_function" href="rgw__crypt_8cc.html#a968267093810809f7ec5d866d3c31e7b">sort_and_write</a>(d, writer, ccs);</div>
<div class="line"><span class="lineno">  280</span>    <span class="keywordflow">if</span> (!b) {</div>
<div class="line"><span class="lineno">  281</span>        ldpp_dout(s, 5) &lt;&lt; <span class="stringliteral">&quot;format error &lt;&quot;</span> &lt;&lt; <a class="code hl_enumeration" href="namespacergw_1_1lua.html#a5652b6711c456135043c799876aec7c1">context</a></div>
<div class="line"><span class="lineno">  282</span>        &lt;&lt; <span class="stringliteral">&quot;&gt;: partial.results=&quot;</span> &lt;&lt; buf.GetString() &lt;&lt; dendl;</div>
<div class="line"><span class="lineno">  283</span>    s-&gt;<a class="code hl_variable" href="structreq__state.html#aa4ee7f575b1d568e2a7396e472013441">err</a>.<a class="code hl_variable" href="structrgw__err.html#ab3c8a498deb94929b307b9130edd6506">message</a> = <span class="stringliteral">&quot;unable to reformat json&quot;</span>;</div>
<div class="line"><span class="lineno">  284</span>        <span class="keywordflow">return</span> -<a class="code hl_define" href="rgw__common_8h.html#ad9afe8cb242cef9c7e4cbd064c12aa83">ERR_INVALID_REQUEST</a>;</div>
<div class="line"><span class="lineno">  285</span>    }</div>
<div class="line"><span class="lineno">  286</span>    cooked_context = <a class="code hl_function" href="namespacergw.html#aa82f70521f78be16696f555e4ef745c6">rgw::to_base64</a>(buf.GetString());</div>
<div class="line"><span class="lineno">  287</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  288</span>}</div>
<div class="ttc" id="aclasscanonical__char__sorter_html"><div class="ttname"><a href="classcanonical__char__sorter.html">canonical_char_sorter</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__crypt_8cc_source.html#l00034">rgw_crypt.cc:34</a></div></div>
<div class="ttc" id="anamespacergw_1_1lua_html_a5652b6711c456135043c799876aec7c1"><div class="ttname"><a href="namespacergw_1_1lua.html#a5652b6711c456135043c799876aec7c1">rgw::lua::context</a></div><div class="ttdeci">context</div><div class="ttdef"><b>Definition</b> <a href="rgw__lua_8h_source.html#l00015">rgw_lua.h:15</a></div></div>
<div class="ttc" id="anamespacergw_html_aa82f70521f78be16696f555e4ef745c6"><div class="ttname"><a href="namespacergw.html#aa82f70521f78be16696f555e4ef745c6">rgw::to_base64</a></div><div class="ttdeci">std::string to_base64(std::string_view sview)</div><div class="ttdef"><b>Definition</b> <a href="rgw__b64_8h_source.html#l00029">rgw_b64.h:29</a></div></div>
<div class="ttc" id="anamespacergw_html_ac234a4895c4d28112daeda8c2b8ec205"><div class="ttname"><a href="namespacergw.html#ac234a4895c4d28112daeda8c2b8ec205">rgw::from_base64</a></div><div class="ttdeci">std::string from_base64(std::string_view sview)</div><div class="ttdef"><b>Definition</b> <a href="rgw__b64_8h_source.html#l00062">rgw_b64.h:62</a></div></div>
<div class="ttc" id="argw__common_8h_html_ad9afe8cb242cef9c7e4cbd064c12aa83"><div class="ttname"><a href="rgw__common_8h.html#ad9afe8cb242cef9c7e4cbd064c12aa83">ERR_INVALID_REQUEST</a></div><div class="ttdeci">#define ERR_INVALID_REQUEST</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l00215">rgw_common.h:215</a></div></div>
<div class="ttc" id="argw__crypt_8cc_html_a468055d9acfdf57d836f7c110fae5a42"><div class="ttname"><a href="rgw__crypt_8cc.html#a468055d9acfdf57d836f7c110fae5a42">add_object_to_context</a></div><div class="ttdeci">bool add_object_to_context(rgw_obj &amp;obj, rapidjson::Document &amp;d)</div><div class="ttdef"><b>Definition</b> <a href="rgw__crypt_8cc_source.html#l00193">rgw_crypt.cc:193</a></div></div>
<div class="ttc" id="argw__crypt_8cc_html_a818709fd4c5831710c61c53868e74057"><div class="ttname"><a href="rgw__crypt_8cc.html#a818709fd4c5831710c61c53868e74057">make_everything_canonical</a></div><div class="ttdeci">mec_error make_everything_canonical(rapidjson::Value &amp;d, rapidjson::Document::AllocatorType &amp;a, canonical_char_sorter&lt; MyMember &gt; &amp;ccs, mec_option f=mec_option::empty)</div><div class="ttdef"><b>Definition</b> <a href="rgw__crypt_8cc_source.html#l00152">rgw_crypt.cc:152</a></div></div>
<div class="ttc" id="argw__crypt_8cc_html_a968267093810809f7ec5d866d3c31e7b"><div class="ttname"><a href="rgw__crypt_8cc.html#a968267093810809f7ec5d866d3c31e7b">sort_and_write</a></div><div class="ttdeci">bool sort_and_write(rapidjson::Value &amp;d, H &amp;writer, canonical_char_sorter&lt; MyMember &gt; &amp;ccs)</div><div class="ttdef"><b>Definition</b> <a href="rgw__crypt_8cc_source.html#l00099">rgw_crypt.cc:99</a></div></div>
<div class="ttc" id="argw__crypt_8cc_html_adde527b14a1813b09f5f168c2e92775c"><div class="ttname"><a href="rgw__crypt_8cc.html#adde527b14a1813b09f5f168c2e92775c">mec_option</a></div><div class="ttdeci">mec_option</div><div class="ttdef"><b>Definition</b> <a href="rgw__crypt_8cc_source.html#l00143">rgw_crypt.cc:143</a></div></div>
<div class="ttc" id="argw__crypt_8cc_html_af41e16ec2085c8a5ce5576bbe57b023b"><div class="ttname"><a href="rgw__crypt_8cc.html#af41e16ec2085c8a5ce5576bbe57b023b">get_tenant_or_id</a></div><div class="ttdeci">static const std::string &amp; get_tenant_or_id(req_state *s)</div><div class="ttdef"><b>Definition</b> <a href="rgw__crypt_8cc_source.html#l00212">rgw_crypt.cc:212</a></div></div>
<div class="ttc" id="astructreq__state_html_a67c6558952757f16ddb49664ccc25a5c"><div class="ttname"><a href="structreq__state.html#a67c6558952757f16ddb49664ccc25a5c">req_state::object</a></div><div class="ttdeci">std::unique_ptr&lt; rgw::sal::Object &gt; object</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l01586">rgw_common.h:1586</a></div></div>
<div class="ttc" id="astructrgw__bucket_html_a32d3529f5b0c53051c856a7abe867a6b"><div class="ttname"><a href="structrgw__bucket.html#a32d3529f5b0c53051c856a7abe867a6b">rgw_bucket::name</a></div><div class="ttdeci">std::string name</div><div class="ttdef"><b>Definition</b> <a href="rgw__basic__types_8h_source.html#l00291">rgw_basic_types.h:291</a></div></div>
<div class="ttc" id="astructrgw__bucket_html_ac2d65e02c9242ad2ea2ad31da15d8836"><div class="ttname"><a href="structrgw__bucket.html#ac2d65e02c9242ad2ea2ad31da15d8836">rgw_bucket::tenant</a></div><div class="ttdeci">std::string tenant</div><div class="ttdef"><b>Definition</b> <a href="rgw__basic__types_8h_source.html#l00290">rgw_basic_types.h:290</a></div></div>
<div class="ttc" id="astructrgw__obj__key_html_a009cbe657bf6a001d40af0a80e533186"><div class="ttname"><a href="structrgw__obj__key.html#a009cbe657bf6a001d40af0a80e533186">rgw_obj_key::name</a></div><div class="ttdeci">std::string name</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l01249">rgw_common.h:1249</a></div></div>
<div class="ttc" id="astructrgw__obj_html"><div class="ttname"><a href="structrgw__obj.html">rgw_obj</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l01802">rgw_common.h:1802</a></div></div>
<div class="ttc" id="astructrgw__obj_html_a72f701ee22f8eb3f3868d0aefb581249"><div class="ttname"><a href="structrgw__obj.html#a72f701ee22f8eb3f3868d0aefb581249">rgw_obj::key</a></div><div class="ttdeci">rgw_obj_key key</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l01804">rgw_common.h:1804</a></div></div>
<div class="ttc" id="astructrgw__obj_html_ae1e6e328be8e7429da83a04198cae1d2"><div class="ttname"><a href="structrgw__obj.html#ae1e6e328be8e7429da83a04198cae1d2">rgw_obj::bucket</a></div><div class="ttdeci">rgw_bucket bucket</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l01803">rgw_common.h:1803</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="rgw__crypt_8cc_ad74b8dce6c7052201e0d2bc8fbe6b0c3_cgraph.png" border="0" usemap="#argw__crypt_8cc_ad74b8dce6c7052201e0d2bc8fbe6b0c3_cgraph" alt=""/></div>
<map name="argw__crypt_8cc_ad74b8dce6c7052201e0d2bc8fbe6b0c3_cgraph" id="argw__crypt_8cc_ad74b8dce6c7052201e0d2bc8fbe6b0c3_cgraph">
<area shape="rect" title=" " alt="" coords="5,144,171,171"/>
<area shape="rect" href="rgw__crypt_8cc.html#a468055d9acfdf57d836f7c110fae5a42" title=" " alt="" coords="233,5,385,32"/>
<area shape="poly" title=" " alt="" coords="99,142,147,93,181,65,217,42,230,36,232,40,220,46,184,70,151,97,103,146"/>
<area shape="rect" href="namespacergw.html#ac234a4895c4d28112daeda8c2b8ec205" title=" " alt="" coords="247,56,371,83"/>
<area shape="poly" title=" " alt="" coords="113,141,161,117,218,92,237,85,239,90,220,97,163,122,116,146"/>
<area shape="rect" href="rgw__crypt_8cc.html#af41e16ec2085c8a5ce5576bbe57b023b" title=" " alt="" coords="250,107,368,133"/>
<area shape="poly" title=" " alt="" coords="170,141,235,130,235,135,171,146"/>
<area shape="rect" href="rgw__crypt_8cc.html#a818709fd4c5831710c61c53868e74057" title=" " alt="" coords="219,181,399,208"/>
<area shape="poly" title=" " alt="" coords="171,169,211,175,210,181,170,174"/>
<area shape="rect" href="rgw__crypt_8cc.html#a968267093810809f7ec5d866d3c31e7b" title=" " alt="" coords="256,256,362,283"/>
<area shape="poly" title=" " alt="" coords="118,169,268,246,266,251,115,174"/>
<area shape="rect" href="namespacergw.html#aa82f70521f78be16696f555e4ef745c6" title=" " alt="" coords="254,307,364,333"/>
<area shape="poly" title=" " alt="" coords="100,169,147,229,181,263,220,292,241,302,239,307,217,297,178,267,143,232,96,173"/>
<area shape="poly" title=" " alt="" coords="272,182,265,173,270,163,285,157,309,155,335,157,349,164,346,168,333,162,309,160,286,162,273,167,270,172,276,179"/>
<area shape="rect" href="classcanonical__char__sorter.html#acd8130b748ba3911d6583f7f9754fe8c" title=" " alt="" coords="447,173,609,216"/>
<area shape="poly" title=" " alt="" coords="400,192,431,192,431,197,400,197"/>
<area shape="rect" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5" title=" " alt="" coords="657,181,700,208"/>
<area shape="poly" title=" " alt="" coords="610,192,642,192,642,197,610,197"/>
<area shape="poly" title=" " alt="" coords="272,257,265,247,270,237,285,231,309,229,335,232,349,238,346,243,333,237,309,235,286,237,273,241,270,247,276,254"/>
</map>
</div>
<div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="rgw__crypt_8cc_ad74b8dce6c7052201e0d2bc8fbe6b0c3_icgraph.png" border="0" usemap="#argw__crypt_8cc_ad74b8dce6c7052201e0d2bc8fbe6b0c3_icgraph" alt=""/></div>
<map name="argw__crypt_8cc_ad74b8dce6c7052201e0d2bc8fbe6b0c3_icgraph" id="argw__crypt_8cc_ad74b8dce6c7052201e0d2bc8fbe6b0c3_icgraph">
<area shape="rect" title=" " alt="" coords="442,80,607,107"/>
<area shape="rect" href="rgw__crypt_8cc.html#a644bbfaccd952cddc83967e91f89caf5" title=" " alt="" coords="232,80,394,107"/>
<area shape="poly" title=" " alt="" coords="427,96,394,96,394,91,427,91"/>
<area shape="rect" href="class_r_g_w_put_obj___obj_store___s3.html#aac43ef6294ae6f90061fa06e560dfc0a" title=" " alt="" coords="19,5,170,48"/>
<area shape="poly" title=" " alt="" coords="251,77,166,51,168,46,253,72"/>
<area shape="rect" href="class_r_g_w_post_obj___obj_store___s3.html#ae2c71dfde7f4e10024b6cf4d766f480b" title=" " alt="" coords="15,72,174,115"/>
<area shape="poly" title=" " alt="" coords="216,96,174,96,174,91,216,91"/>
<area shape="rect" href="class_r_g_w_init_multipart___obj_store___s3.html#aec0b31cd487b8d8ce2a61b7d71072713" title=" " alt="" coords="5,139,184,181"/>
<area shape="poly" title=" " alt="" coords="253,114,168,141,166,135,251,109"/>
</map>
</div>

</div>
</div>
<a id="a818709fd4c5831710c61c53868e74057" name="a818709fd4c5831710c61c53868e74057"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a818709fd4c5831710c61c53868e74057">&#9670;&#160;</a></span>make_everything_canonical()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="rgw__crypt_8cc.html#a6fbab6cd1bb07bd350fe2d0567a91860">mec_error</a> make_everything_canonical </td>
          <td>(</td>
          <td class="paramtype">rapidjson::Value &amp;&#160;</td>
          <td class="paramname"><em>d</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">rapidjson::Document::AllocatorType &amp;&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classcanonical__char__sorter.html">canonical_char_sorter</a>&lt; <a class="el" href="rgw__crypt_8cc.html#a3ea0937a0611dbce4a5879562f2d6324">MyMember</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>ccs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="rgw__crypt_8cc.html#adde527b14a1813b09f5f168c2e92775c">mec_option</a>&#160;</td>
          <td class="paramname"><em>f</em> = <code><a class="el" href="rgw__crypt_8cc.html#adde527b14a1813b09f5f168c2e92775caa2e4822a98337283e39f7b60acf85ec9">mec_option::empty</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="rgw__crypt_8cc_source.html">rgw_crypt.cc</a> 파일의 <a class="el" href="rgw__crypt_8cc_source.html#l00152">152</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  153</span>{</div>
<div class="line"><span class="lineno">  154</span>    <a class="code hl_enumeration" href="rgw__crypt_8cc.html#a6fbab6cd1bb07bd350fe2d0567a91860">mec_error</a> <a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a>;</div>
<div class="line"><span class="lineno">  155</span>    <span class="keywordflow">switch</span>(d.GetType()) {</div>
<div class="line"><span class="lineno">  156</span>    <span class="keywordflow">case</span> rapidjson::kObjectType:</div>
<div class="line"><span class="lineno">  157</span>        <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;m: d.<a class="code hl_enumeration" href="sqlite_d_b_8cc.html#af4eb4d29dcec668788484c5fb0494c26">GetObject</a>()) {</div>
<div class="line"><span class="lineno">  158</span>            assert(m.name.IsString());</div>
<div class="line"><span class="lineno">  159</span>            <span class="keywordflow">if</span> (!ccs.<a class="code hl_function" href="classcanonical__char__sorter.html#acd8130b748ba3911d6583f7f9754fe8c">make_string_canonical</a>(m.name, a)) {</div>
<div class="line"><span class="lineno">  160</span>                <a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a> = <a class="code hl_enumvalue" href="rgw__crypt_8cc.html#a6fbab6cd1bb07bd350fe2d0567a91860a8a496e4dcb443b1c529e75d7ec2888df">mec_error::conversion</a>;</div>
<div class="line"><span class="lineno">  161</span>                <span class="keywordflow">goto</span> Error;</div>
<div class="line"><span class="lineno">  162</span>            }</div>
<div class="line"><span class="lineno">  163</span>            <span class="keywordflow">if</span> ((<a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a> = <a class="code hl_function" href="rgw__crypt_8cc.html#a818709fd4c5831710c61c53868e74057">make_everything_canonical</a>(m.value, a, ccs, f)) != <a class="code hl_enumvalue" href="rgw__crypt_8cc.html#a6fbab6cd1bb07bd350fe2d0567a91860a260ca9dd8a4577fc00b7bd5810298076">mec_error::success</a>)</div>
<div class="line"><span class="lineno">  164</span>                <span class="keywordflow">goto</span> Error;</div>
<div class="line"><span class="lineno">  165</span>        }</div>
<div class="line"><span class="lineno">  166</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  167</span>    <span class="keywordflow">case</span> rapidjson::kArrayType:</div>
<div class="line"><span class="lineno">  168</span>        <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;v: d.GetArray()) {</div>
<div class="line"><span class="lineno">  169</span>            <span class="keywordflow">if</span> ((<a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a> = <a class="code hl_function" href="rgw__crypt_8cc.html#a818709fd4c5831710c61c53868e74057">make_everything_canonical</a>(v, a, ccs, f)) != <a class="code hl_enumvalue" href="rgw__crypt_8cc.html#a6fbab6cd1bb07bd350fe2d0567a91860a260ca9dd8a4577fc00b7bd5810298076">mec_error::success</a>)</div>
<div class="line"><span class="lineno">  170</span>                <span class="keywordflow">goto</span> Error;</div>
<div class="line"><span class="lineno">  171</span>        }</div>
<div class="line"><span class="lineno">  172</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  173</span>    <span class="keywordflow">case</span> rapidjson::kStringType:</div>
<div class="line"><span class="lineno">  174</span>        <span class="keywordflow">if</span> (!ccs.<a class="code hl_function" href="classcanonical__char__sorter.html#acd8130b748ba3911d6583f7f9754fe8c">make_string_canonical</a>(d, a)) {</div>
<div class="line"><span class="lineno">  175</span>            <a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a> = <a class="code hl_enumvalue" href="rgw__crypt_8cc.html#a6fbab6cd1bb07bd350fe2d0567a91860a8a496e4dcb443b1c529e75d7ec2888df">mec_error::conversion</a>;</div>
<div class="line"><span class="lineno">  176</span>            <span class="keywordflow">goto</span> Error;</div>
<div class="line"><span class="lineno">  177</span>        }</div>
<div class="line"><span class="lineno">  178</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  179</span>    <span class="keywordflow">case</span> rapidjson::kNumberType:</div>
<div class="line"><span class="lineno">  180</span>        <span class="keywordflow">if</span> (<span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(f) &amp; <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code hl_enumvalue" href="rgw__crypt_8cc.html#adde527b14a1813b09f5f168c2e92775ca1d6a876d564dd6d3d660e50cc8c02f2b">mec_option::number_ok</a>))</div>
<div class="line"><span class="lineno">  181</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  182</span>        <a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a> = <a class="code hl_enumvalue" href="rgw__crypt_8cc.html#a6fbab6cd1bb07bd350fe2d0567a91860ab1bc248a7ff2b2e95569f56de68615df">mec_error::number</a>;</div>
<div class="line"><span class="lineno">  183</span>        <span class="keywordflow">goto</span> Error;</div>
<div class="line"><span class="lineno">  184</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno">  185</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  186</span>    }</div>
<div class="line"><span class="lineno">  187</span>    <a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a> = <a class="code hl_enumvalue" href="rgw__crypt_8cc.html#a6fbab6cd1bb07bd350fe2d0567a91860a260ca9dd8a4577fc00b7bd5810298076">mec_error::success</a>;</div>
<div class="line"><span class="lineno">  188</span>Error:</div>
<div class="line"><span class="lineno">  189</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a>;</div>
<div class="line"><span class="lineno">  190</span>}</div>
<div class="ttc" id="aclasscanonical__char__sorter_html_acd8130b748ba3911d6583f7f9754fe8c"><div class="ttname"><a href="classcanonical__char__sorter.html#acd8130b748ba3911d6583f7f9754fe8c">canonical_char_sorter::make_string_canonical</a></div><div class="ttdeci">bool make_string_canonical(rapidjson::Value &amp;, rapidjson::Document::AllocatorType &amp;)</div><div class="ttdef"><b>Definition</b> <a href="rgw__crypt_8cc_source.html#l00073">rgw_crypt.cc:73</a></div></div>
<div class="ttc" id="argw__crypt_8cc_html_a6fbab6cd1bb07bd350fe2d0567a91860"><div class="ttname"><a href="rgw__crypt_8cc.html#a6fbab6cd1bb07bd350fe2d0567a91860">mec_error</a></div><div class="ttdeci">mec_error</div><div class="ttdef"><b>Definition</b> <a href="rgw__crypt_8cc_source.html#l00147">rgw_crypt.cc:147</a></div></div>
<div class="ttc" id="asqlite_d_b_8cc_html_af4eb4d29dcec668788484c5fb0494c26"><div class="ttname"><a href="sqlite_d_b_8cc.html#af4eb4d29dcec668788484c5fb0494c26">GetObject</a></div><div class="ttdeci">GetObject</div><div class="ttdef"><b>Definition</b> <a href="sqlite_d_b_8cc_source.html#l00220">sqliteDB.cc:220</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="rgw__crypt_8cc_a818709fd4c5831710c61c53868e74057_cgraph.png" border="0" usemap="#argw__crypt_8cc_a818709fd4c5831710c61c53868e74057_cgraph" alt=""/></div>
<map name="argw__crypt_8cc_a818709fd4c5831710c61c53868e74057_cgraph" id="argw__crypt_8cc_a818709fd4c5831710c61c53868e74057_cgraph">
<area shape="rect" title=" " alt="" coords="5,29,186,56"/>
<area shape="poly" title=" " alt="" coords="58,30,52,21,56,11,71,5,96,3,122,5,135,12,133,16,120,10,95,8,72,10,60,15,57,20,63,27"/>
<area shape="rect" href="classcanonical__char__sorter.html#acd8130b748ba3911d6583f7f9754fe8c" title=" " alt="" coords="234,21,396,64"/>
<area shape="poly" title=" " alt="" coords="186,40,218,40,218,45,186,45"/>
<area shape="rect" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5" title=" " alt="" coords="444,29,486,56"/>
<area shape="poly" title=" " alt="" coords="396,40,429,40,429,45,396,45"/>
</map>
</div>
<div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="rgw__crypt_8cc_a818709fd4c5831710c61c53868e74057_icgraph.png" border="0" usemap="#argw__crypt_8cc_a818709fd4c5831710c61c53868e74057_icgraph" alt=""/></div>
<map name="argw__crypt_8cc_a818709fd4c5831710c61c53868e74057_icgraph" id="argw__crypt_8cc_a818709fd4c5831710c61c53868e74057_icgraph">
<area shape="rect" title=" " alt="" coords="655,80,836,107"/>
<area shape="poly" title=" " alt="" coords="783,67,770,61,745,59,722,61,710,65,707,71,713,78,708,81,702,71,706,61,721,55,746,53,772,56,786,62"/>
<area shape="rect" href="rgw__crypt_8cc.html#ad74b8dce6c7052201e0d2bc8fbe6b0c3" title=" " alt="" coords="442,80,607,107"/>
<area shape="poly" title=" " alt="" coords="640,96,608,96,608,91,640,91"/>
<area shape="rect" href="rgw__crypt_8cc.html#a644bbfaccd952cddc83967e91f89caf5" title=" " alt="" coords="232,80,394,107"/>
<area shape="poly" title=" " alt="" coords="427,96,394,96,394,91,427,91"/>
<area shape="rect" href="class_r_g_w_put_obj___obj_store___s3.html#aac43ef6294ae6f90061fa06e560dfc0a" title=" " alt="" coords="19,5,170,48"/>
<area shape="poly" title=" " alt="" coords="251,77,166,51,168,46,253,72"/>
<area shape="rect" href="class_r_g_w_post_obj___obj_store___s3.html#ae2c71dfde7f4e10024b6cf4d766f480b" title=" " alt="" coords="15,72,174,115"/>
<area shape="poly" title=" " alt="" coords="216,96,174,96,174,91,216,91"/>
<area shape="rect" href="class_r_g_w_init_multipart___obj_store___s3.html#aec0b31cd487b8d8ce2a61b7d71072713" title=" " alt="" coords="5,139,184,181"/>
<area shape="poly" title=" " alt="" coords="253,114,168,141,166,135,251,109"/>
</map>
</div>

</div>
</div>
<a id="aa338e22213c357f47593f008b1d1fca3" name="aa338e22213c357f47593f008b1d1fca3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa338e22213c357f47593f008b1d1fca3">&#9670;&#160;</a></span>rgw_remove_sse_s3_bucket_key()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rgw_remove_sse_s3_bucket_key </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structreq__state.html">req_state</a> *&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="rgw__crypt_8cc_source.html">rgw_crypt.cc</a> 파일의 <a class="el" href="rgw__crypt_8cc_source.html#l01477">1477</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1478</span>{</div>
<div class="line"><span class="lineno"> 1479</span>  <span class="keywordtype">int</span> res;</div>
<div class="line"><span class="lineno"> 1480</span>  <span class="keyword">auto</span> key_id { <a class="code hl_function" href="rgw__crypt_8cc.html#add5c64ea25e03aeb38706533c5f98ca8">expand_key_name</a>(s, s-&gt;<a class="code hl_variable" href="structreq__state.html#a98ff7b0fe2e9f0a932493c80c89280dc">cct</a>-&gt;_conf-&gt;rgw_crypt_sse_s3_key_template) };</div>
<div class="line"><span class="lineno"> 1481</span>  <span class="keyword">auto</span> saved_key { <a class="code hl_function" href="rgw__crypt_8cc.html#a314d096a1d1963c887425d4913690130">fetch_bucket_key_id</a>(s) };</div>
<div class="line"><span class="lineno"> 1482</span>  <span class="keywordtype">size_t</span> i;</div>
<div class="line"><span class="lineno"> 1483</span> </div>
<div class="line"><span class="lineno"> 1484</span>  <span class="keywordflow">if</span> (key_id == <a class="code hl_variable" href="rgw__crypt_8cc.html#a7bbedbb5f2e198570553befb1e69a86d">cant_expand_key</a>) {</div>
<div class="line"><span class="lineno"> 1485</span>    ldpp_dout(s, 5) &lt;&lt; <span class="stringliteral">&quot;ERROR: unable to expand key_id &quot;</span> &lt;&lt;</div>
<div class="line"><span class="lineno"> 1486</span>      s-&gt;<a class="code hl_variable" href="structreq__state.html#a98ff7b0fe2e9f0a932493c80c89280dc">cct</a>-&gt;_conf-&gt;rgw_crypt_sse_s3_key_template &lt;&lt; <span class="stringliteral">&quot; on bucket&quot;</span> &lt;&lt; dendl;</div>
<div class="line"><span class="lineno"> 1487</span>    s-&gt;<a class="code hl_variable" href="structreq__state.html#aa4ee7f575b1d568e2a7396e472013441">err</a>.<a class="code hl_variable" href="structrgw__err.html#ab3c8a498deb94929b307b9130edd6506">message</a> = <span class="stringliteral">&quot;Server side error - unable to expand key_id&quot;</span>;</div>
<div class="line"><span class="lineno"> 1488</span>    <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><span class="lineno"> 1489</span>  }</div>
<div class="line"><span class="lineno"> 1490</span> </div>
<div class="line"><span class="lineno"> 1491</span>  <span class="keywordflow">if</span> (saved_key == <span class="stringliteral">&quot;&quot;</span>) {</div>
<div class="line"><span class="lineno"> 1492</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 1493</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (saved_key != key_id) {</div>
<div class="line"><span class="lineno"> 1494</span>    ldpp_dout(s, 5) &lt;&lt; <span class="stringliteral">&quot;Found but will not delete strange KEK ID: &quot;</span> &lt;&lt; saved_key &lt;&lt; dendl;</div>
<div class="line"><span class="lineno"> 1495</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 1496</span>  }</div>
<div class="line"><span class="lineno"> 1497</span>  i = s-&gt;<a class="code hl_variable" href="structreq__state.html#a98ff7b0fe2e9f0a932493c80c89280dc">cct</a>-&gt;_conf-&gt;rgw_crypt_sse_s3_key_template.find(<span class="stringliteral">&quot;%bucket_id&quot;</span>);</div>
<div class="line"><span class="lineno"> 1498</span>  <span class="keywordflow">if</span> (i == std::string_view::npos) {</div>
<div class="line"><span class="lineno"> 1499</span>    ldpp_dout(s, 5) &lt;&lt; <span class="stringliteral">&quot;Kept valid KEK ID: &quot;</span> &lt;&lt; saved_key &lt;&lt; dendl;</div>
<div class="line"><span class="lineno"> 1500</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 1501</span>  }</div>
<div class="line"><span class="lineno"> 1502</span>  ldpp_dout(s, 5) &lt;&lt; <span class="stringliteral">&quot;Removing valid KEK ID: &quot;</span> &lt;&lt; saved_key &lt;&lt; dendl;</div>
<div class="line"><span class="lineno"> 1503</span>  res = <a class="code hl_function" href="rgw__kms_8cc.html#a3f8c61648b425447343161a2ac7d3710">remove_sse_s3_bucket_key</a>(s, s-&gt;<a class="code hl_variable" href="structreq__state.html#a98ff7b0fe2e9f0a932493c80c89280dc">cct</a>, saved_key);</div>
<div class="line"><span class="lineno"> 1504</span>  <span class="keywordflow">if</span> (res != 0) {</div>
<div class="line"><span class="lineno"> 1505</span>    ldpp_dout(s, 0) &lt;&lt; <span class="stringliteral">&quot;ERROR: Unable to remove KEK ID: &quot;</span> &lt;&lt; saved_key &lt;&lt; <span class="stringliteral">&quot; got &quot;</span> &lt;&lt; res &lt;&lt; dendl;</div>
<div class="line"><span class="lineno"> 1506</span>  }</div>
<div class="line"><span class="lineno"> 1507</span>  <span class="keywordflow">return</span> res;</div>
<div class="line"><span class="lineno"> 1508</span>}</div>
<div class="ttc" id="argw__kms_8cc_html_a3f8c61648b425447343161a2ac7d3710"><div class="ttname"><a href="rgw__kms_8cc.html#a3f8c61648b425447343161a2ac7d3710">remove_sse_s3_bucket_key</a></div><div class="ttdeci">int remove_sse_s3_bucket_key(const DoutPrefixProvider *dpp, CephContext *cct, const std::string &amp;bucket_key)</div><div class="ttdef"><b>Definition</b> <a href="rgw__kms_8cc_source.html#l01259">rgw_kms.cc:1259</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="rgw__crypt_8cc_aa338e22213c357f47593f008b1d1fca3_cgraph.png" border="0" usemap="#argw__crypt_8cc_aa338e22213c357f47593f008b1d1fca3_cgraph" alt=""/></div>
<map name="argw__crypt_8cc_aa338e22213c357f47593f008b1d1fca3_cgraph" id="argw__crypt_8cc_aa338e22213c357f47593f008b1d1fca3_cgraph">
<area shape="rect" title=" " alt="" coords="5,56,218,83"/>
<area shape="rect" href="rgw__crypt_8cc.html#add5c64ea25e03aeb38706533c5f98ca8" title=" " alt="" coords="293,5,424,32"/>
<area shape="poly" title=" " alt="" coords="180,53,278,32,279,38,181,58"/>
<area shape="rect" href="rgw__crypt_8cc.html#a314d096a1d1963c887425d4913690130" title=" " alt="" coords="288,56,429,83"/>
<area shape="poly" title=" " alt="" coords="218,67,273,67,273,72,218,72"/>
<area shape="rect" href="rgw__kms_8cc.html#a3f8c61648b425447343161a2ac7d3710" title=" " alt="" coords="266,107,451,133"/>
<area shape="poly" title=" " alt="" coords="181,81,276,100,275,106,180,86"/>
<area shape="rect" href="rgw__kms_8cc.html#a18f34abcef8bf2ff8ab2180171385010" title=" " alt="" coords="501,11,647,53"/>
<area shape="poly" title=" " alt="" coords="416,104,450,92,518,59,520,63,452,97,418,109"/>
<area shape="rect" href="class_transit_secret_engine.html#ac1274a509f9b67963a0df2fd2c1a64fc" title=" " alt="" coords="505,128,643,171"/>
<area shape="poly" title=" " alt="" coords="451,130,490,135,489,141,451,135"/>
<area shape="rect" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5" title=" " alt="" coords="1177,204,1219,231"/>
<area shape="poly" title=" " alt="" coords="451,114,499,113,671,105,746,105,842,113,908,125,959,139,1073,176,1163,204,1161,209,1071,181,957,144,907,130,841,119,746,110,671,110,499,119,452,120"/>
<area shape="rect" href="class_sse_s3_context.html#a5205092fd88d0039bdc1bdab8020c499" title=" " alt="" coords="499,195,648,237"/>
<area shape="poly" title=" " alt="" coords="392,132,511,185,509,190,389,136"/>
<area shape="rect" href="rgw__kms_8cc.html#ae5268633f9996eea42716e2de4037b13" title=" " alt="" coords="696,128,842,155"/>
<area shape="poly" title=" " alt="" coords="643,144,681,142,681,148,644,149"/>
<area shape="poly" title=" " alt="" coords="643,157,697,164,964,193,1162,212,1162,217,964,198,696,169,643,162"/>
<area shape="rect" href="class_vault_secret_engine.html#a21ddaddc49189fb68733634ce8d26467" title=" " alt="" coords="700,725,838,768"/>
<area shape="poly" title=" " alt="" coords="638,169,650,181,674,223,695,283,714,356,730,435,753,591,767,709,762,710,748,592,724,436,709,357,690,285,669,226,646,184,634,173"/>
<area shape="poly" title=" " alt="" coords="770,724,783,626,806,488,822,417,841,353,863,301,888,266,908,253,938,243,1013,228,1094,220,1161,216,1161,221,1094,225,1013,233,939,248,911,258,891,270,867,304,846,355,827,419,811,489,788,627,775,725"/>
<area shape="rect" href="class_s_s_e_context.html#a35609fc25555f9a458b2dd6a22c18cde" title=" " alt="" coords="918,347,1044,373"/>
<area shape="poly" title=" " alt="" coords="768,724,774,658,791,567,806,517,827,469,854,423,888,383,902,373,905,377,891,387,858,426,832,471,811,519,796,568,779,659,773,725"/>
<area shape="rect" href="class_r_g_w_h_t_t_p_client.html#a8d4aa112a185bf07f192bea69b3c31fb" title=" " alt="" coords="897,397,1065,440"/>
<area shape="poly" title=" " alt="" coords="770,724,781,670,802,597,817,558,836,519,860,482,888,450,891,447,895,451,892,454,864,486,841,521,822,560,807,598,786,671,776,725"/>
<area shape="rect" href="class_s_s_e_context.html#ac0affb02e7b7f1a40b3bb115858a993d" title=" " alt="" coords="918,464,1044,491"/>
<area shape="poly" title=" " alt="" coords="772,724,785,677,807,617,841,555,862,526,888,501,902,491,905,496,891,505,866,529,845,557,812,619,790,679,777,725"/>
<area shape="rect" href="rgw__kms_8cc.html#a242cecf75d47f64b1de73858c54fb6f9" title=" " alt="" coords="940,515,1022,541"/>
<area shape="poly" title=" " alt="" coords="775,724,790,687,814,640,847,592,888,551,924,534,926,539,891,556,851,595,819,643,795,689,780,726"/>
<area shape="rect" href="class_r_g_w_h_t_t_p_client.html#a8d89f57ce810c5320411cf2ddb01f339" title=" " alt="" coords="909,565,1053,608"/>
<area shape="poly" title=" " alt="" coords="784,723,827,671,856,643,888,618,896,613,898,618,891,622,860,647,831,675,788,727"/>
<area shape="rect" href="class_s_s_e_context.html#a36821644035d6a926046b950ed65e6f1" title=" " alt="" coords="890,632,1072,659"/>
<area shape="poly" title=" " alt="" coords="798,723,840,695,889,668,905,662,907,666,891,673,842,699,801,727"/>
<area shape="rect" href="class_vault_secret_engine.html#a8eb020a414a627058032342a99a29914" title=" " alt="" coords="911,280,1051,323"/>
<area shape="poly" title=" " alt="" coords="768,725,771,652,787,548,802,491,823,434,851,381,888,333,896,325,900,329,892,336,856,383,828,436,807,492,792,549,777,652,773,725"/>
<area shape="rect" href="class_s_s_e_context.html#a7db6b0d790ab7b4fe42306f209416fcf" title=" " alt="" coords="915,683,1047,709"/>
<area shape="poly" title=" " alt="" coords="838,728,907,711,908,716,839,733"/>
<area shape="rect" href="class_r_g_w_h_t_t_p_client.html#a38de0b9ceefce30a6003b12d562e425d" title=" " alt="" coords="895,733,1067,760"/>
<area shape="poly" title=" " alt="" coords="838,744,879,744,879,749,838,749"/>
<area shape="rect" href="class_r_g_w_h_t_t_p_client.html#aa7b0d717e67e4242b73f7741381f1856" title=" " alt="" coords="909,784,1053,827"/>
<area shape="poly" title=" " alt="" coords="839,763,894,779,893,784,838,768"/>
<area shape="rect" href="class_r_g_w_h_t_t_p_client.html#a7dcea71d200865dff0dfcd84328bf5ab" title=" " alt="" coords="909,851,1053,893"/>
<area shape="poly" title=" " alt="" coords="796,766,839,802,891,836,901,841,898,846,888,841,835,806,792,770"/>
<area shape="rect" href="class_r_g_w_h_t_t_p_client.html#a8008f2d1b953f662a8eb5fe5e385851a" title=" " alt="" coords="909,917,1053,960"/>
<area shape="poly" title=" " alt="" coords="784,767,825,834,856,871,891,903,897,907,894,911,888,907,852,875,821,837,779,770"/>
<area shape="rect" href="class_r_g_w_h_t_t_p_transceiver.html#abd8c12eaff4e72b22336e632826663fd" title=" " alt="" coords="906,984,1056,1027"/>
<area shape="poly" title=" " alt="" coords="779,768,793,810,816,864,848,921,869,947,891,970,895,973,892,977,888,974,865,950,844,924,811,867,788,812,774,769"/>
<area shape="rect" href="class_r_g_w_h_t_t_p_client.html#a340f32b14fc826866fe476175ceb2ed8" title=" " alt="" coords="909,1051,1053,1093"/>
<area shape="poly" title=" " alt="" coords="776,768,786,822,807,894,822,932,841,970,864,1005,892,1037,897,1042,894,1046,888,1041,860,1009,836,972,817,934,802,895,781,823,771,769"/>
<area shape="rect" href="class_r_g_w_h_t_t_p_client.html#a1db09d373a335c53cf1fd6d6339b5feb" title=" " alt="" coords="909,1117,1053,1160"/>
<area shape="poly" title=" " alt="" coords="774,768,781,833,799,922,814,971,834,1019,860,1064,892,1104,897,1109,894,1113,888,1107,855,1067,829,1021,809,973,794,924,775,834,769,769"/>
<area shape="rect" href="class_s_s_e_context.html#acac13eefbf73e3012d7f6607705720f1" title=" " alt="" coords="900,1184,1062,1211"/>
<area shape="poly" title=" " alt="" coords="772,768,774,844,779,896,788,952,803,1011,824,1069,853,1123,892,1170,895,1173,891,1177,888,1174,849,1126,819,1071,798,1012,783,953,774,896,769,845,767,768"/>
<area shape="rect" href="class_s_s_e_context.html#a3288cf381cc52282abf2805a614a2ffd" title=" " alt="" coords="892,1235,1070,1261"/>
<area shape="poly" title=" " alt="" coords="776,768,789,865,813,1001,829,1071,848,1134,869,1186,892,1221,895,1224,891,1227,888,1224,864,1189,843,1136,824,1072,808,1002,784,866,770,769"/>
<area shape="rect" href="class_s_s_e_context.html#afca6c5ff839511f7f7185921fd0fd24d" title=" " alt="" coords="892,1285,1070,1312"/>
<area shape="poly" title=" " alt="" coords="775,768,787,874,810,1025,826,1103,845,1174,867,1232,892,1272,894,1274,891,1278,888,1275,862,1235,840,1176,821,1104,805,1026,782,874,770,768"/>
<area shape="rect" href="class_s_s_e_context.html#ac2bf421e1be7cc18605373abe07e59d6" title=" " alt="" coords="904,1336,1058,1363"/>
<area shape="poly" title=" " alt="" coords="775,768,785,883,807,1050,823,1136,842,1214,865,1279,878,1304,892,1322,894,1325,890,1328,888,1326,873,1306,860,1281,837,1216,817,1137,802,1051,780,883,769,768"/>
<area shape="poly" title=" " alt="" coords="1037,277,1162,228,1163,233,1039,282"/>
<area shape="rect" href="class_s_s_e_context.html#abaaaa496191b276cc38cb00b2319ccf0" title=" " alt="" coords="1120,288,1276,315"/>
<area shape="poly" title=" " alt="" coords="1051,299,1105,299,1105,304,1051,304"/>
<area shape="rect" href="class_r_g_w_h_t_t_p.html#adfb34d20b834f501e738cacd37dc8586" title=" " alt="" coords="1129,733,1268,760"/>
<area shape="poly" title=" " alt="" coords="1068,744,1113,744,1113,749,1068,749"/>
<area shape="rect" href="class_r_g_w_h_t_t_p.html#ac8ab575c584649a3aaa6c3391f918e3a" title=" " alt="" coords="1338,707,1460,733"/>
<area shape="poly" title=" " alt="" coords="1268,735,1323,727,1324,733,1269,740"/>
<area shape="rect" href="class_r_g_w_h_t_t_p_client.html#a7d489c6689cd946b572415111b0c97b5" title=" " alt="" coords="1324,759,1474,785"/>
<area shape="poly" title=" " alt="" coords="1269,753,1309,758,1308,763,1268,758"/>
<area shape="rect" href="class_r_g_w_h_t_t_p_manager.html#a12fb23d99e733aa22fdfd983c7581698" title=" " alt="" coords="1522,625,1686,668"/>
<area shape="poly" title=" " alt="" coords="1438,704,1527,671,1529,676,1440,709"/>
<area shape="rect" href="class_r_g_w_h_t_t_p_manager.html#a16579a72dddb523cd5bdbf2957d22ef8" title=" " alt="" coords="1741,392,1914,435"/>
<area shape="poly" title=" " alt="" coords="1611,624,1628,585,1655,538,1689,488,1732,445,1737,441,1740,445,1736,449,1693,491,1659,540,1633,588,1616,626"/>
<area shape="rect" href="class_r_g_w_i_o_provider.html#a2bbd769b91d0d58e2d9ececade3a7c50" title=" " alt="" coords="1758,459,1896,501"/>
<area shape="poly" title=" " alt="" coords="1619,623,1666,568,1698,538,1733,511,1743,505,1745,510,1735,516,1701,542,1670,572,1623,627"/>
<area shape="rect" href="class_r_g_w_h_t_t_p_client.html#aa52a4d1d70d05fd7eb868df48bfc1c40" title=" " alt="" coords="1755,525,1899,568"/>
<area shape="poly" title=" " alt="" coords="1643,623,1733,578,1747,572,1749,577,1735,582,1645,627"/>
<area shape="rect" href="class_r_g_w_h_t_t_p_client.html#a8bbd7cf32732770e498d9c7e1033f519" title=" " alt="" coords="1756,659,1899,701"/>
<area shape="poly" title=" " alt="" coords="1686,656,1741,664,1740,670,1686,662"/>
<area shape="rect" href="class_r_g_w_h_t_t_p_manager.html#abb00c0a30c2ba9bfe83084e56e5dc897" title=" " alt="" coords="1746,592,1909,635"/>
<area shape="poly" title=" " alt="" coords="1686,632,1729,625,1730,630,1686,637"/>
<area shape="rect" href="class_r_g_w_h_t_t_p_manager.html#ae187bc0e80bace76ab6b7597491a73fb" title=" " alt="" coords="1734,725,1920,768"/>
<area shape="poly" title=" " alt="" coords="1645,666,1735,711,1749,717,1747,722,1733,716,1643,671"/>
<area shape="rect" href="class_r_g_w_h_t_t_p_manager.html#a3e3fd00dfa67812b4be7d3e5b80f126d" title=" " alt="" coords="1739,792,1916,835"/>
<area shape="poly" title=" " alt="" coords="1623,667,1670,722,1701,752,1735,778,1743,782,1740,787,1733,782,1698,756,1666,725,1619,670"/>
<area shape="rect" href="class_r_g_w_h_t_t_p_manager.html#ade749005387f5e6a4de36d5112ce54f0" title=" " alt="" coords="1968,359,2165,401"/>
<area shape="poly" title=" " alt="" coords="1914,399,1953,393,1953,398,1915,404"/>
<area shape="rect" href="structrgw__http__req__data.html#ad2784ed636d8d248f1672b72c1bb5c60" title=" " alt="" coords="1999,425,2134,468"/>
<area shape="poly" title=" " alt="" coords="1915,423,1984,432,1983,438,1914,428"/>
<area shape="rect" href="rgw__http__client_8cc.html#ab7a03eacc0f5a844c234c3dfc09dda2e" title=" " alt="" coords="2005,637,2128,664"/>
<area shape="poly" title=" " alt="" coords="1899,669,1989,657,1990,663,1899,674"/>
<area shape="rect" href="structrgw__http__req__data.html#af6cbebaa0a8812948d6d46938eade1c0" title=" " alt="" coords="1999,571,2134,613"/>
<area shape="poly" title=" " alt="" coords="1890,656,1919,644,1967,623,1984,616,1986,621,1969,628,1921,649,1891,661"/>
<area shape="rect" href="rgw__http__client_8cc.html#accc2196bc3f5081dc39a8e6c8a045c3e" title=" " alt="" coords="2008,688,2125,715"/>
<area shape="poly" title=" " alt="" coords="1899,684,1993,692,1992,697,1899,689"/>
<area shape="rect" href="rgw__http__client_8cc.html#a83802c1e67d9393048491932a74006bf" title=" " alt="" coords="2003,739,2130,765"/>
<area shape="poly" title=" " alt="" coords="1892,699,1969,724,1995,732,1994,737,1968,729,1890,704"/>
<area shape="rect" href="class_r_g_w_h_t_t_p_client.html#af5c3637b14b2ba94d473c5cd5fdace00" title=" " alt="" coords="1983,789,2150,832"/>
<area shape="poly" title=" " alt="" coords="1901,699,1922,711,1938,728,1947,744,1955,760,1970,775,1976,779,1973,784,1967,779,1951,763,1942,747,1934,731,1919,715,1898,703"/>
<area shape="poly" title=" " alt="" coords="1909,603,1983,597,1984,602,1910,609"/>
<area shape="rect" href="structrgw__http__req__data.html#a2cb0db213911deffc4b43a81a37098b5" title=" " alt="" coords="1525,763,1683,789"/>
<area shape="poly" title=" " alt="" coords="1474,771,1509,771,1509,777,1474,776"/>
<area shape="rect" href="structrgw__http__req__data.html#a5d6962235aabed5aabe98213b486ccb1" title=" " alt="" coords="1760,859,1895,901"/>
<area shape="poly" title=" " alt="" coords="1629,788,1677,815,1735,844,1749,850,1747,855,1733,849,1675,820,1627,792"/>
</map>
</div>
<div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="rgw__crypt_8cc_aa338e22213c357f47593f008b1d1fca3_icgraph.png" border="0" usemap="#argw__crypt_8cc_aa338e22213c357f47593f008b1d1fca3_icgraph" alt=""/></div>
<map name="argw__crypt_8cc_aa338e22213c357f47593f008b1d1fca3_icgraph" id="argw__crypt_8cc_aa338e22213c357f47593f008b1d1fca3_icgraph">
<area shape="rect" title=" " alt="" coords="239,5,451,32"/>
<area shape="rect" href="class_r_g_w_delete_bucket.html#ab7f9d5cbeee75b6a27229f0084a5189b" title=" " alt="" coords="5,5,191,32"/>
<area shape="poly" title=" " alt="" coords="223,21,191,21,191,16,223,16"/>
</map>
</div>

</div>
</div>
<a id="a053d14367e9beb6222476b4732e17923" name="a053d14367e9beb6222476b4732e17923"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a053d14367e9beb6222476b4732e17923">&#9670;&#160;</a></span>rgw_s3_prepare_decrypt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rgw_s3_prepare_decrypt </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structreq__state.html">req_state</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">map&lt; string, bufferlist &gt; &amp;&#160;</td>
          <td class="paramname"><em>attrs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::unique_ptr&lt; <a class="el" href="class_block_crypt.html">BlockCrypt</a> &gt; *&#160;</td>
          <td class="paramname"><em>block_crypt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::map&lt; std::string, std::string &gt; &amp;&#160;</td>
          <td class="paramname"><em>crypt_http_responses</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="rgw__crypt_8cc_source.html">rgw_crypt.cc</a> 파일의 <a class="el" href="rgw__crypt_8cc_source.html#l01273">1273</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1277</span>{</div>
<div class="line"><span class="lineno"> 1278</span>  <span class="keywordtype">int</span> res = 0;</div>
<div class="line"><span class="lineno"> 1279</span>  std::string stored_mode = <a class="code hl_function" href="rgw__crypt_8h.html#a01489bc791eb4d27b5ce7ca0915289be">get_str_attribute</a>(attrs, <a class="code hl_define" href="rgw__common_8h.html#a5808b2eabc90655feacc05657c938c7a">RGW_ATTR_CRYPT_MODE</a>);</div>
<div class="line"><span class="lineno"> 1280</span>  ldpp_dout(s, 15) &lt;&lt; <span class="stringliteral">&quot;Encryption mode: &quot;</span> &lt;&lt; stored_mode &lt;&lt; dendl;</div>
<div class="line"><span class="lineno"> 1281</span> </div>
<div class="line"><span class="lineno"> 1282</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> *req_sse = s-&gt;<a class="code hl_variable" href="structreq__state.html#a494770c97c157bfcf918251e31ad2fdc">info</a>.<a class="code hl_variable" href="structreq__info.html#a8d7bb9e0a8699b24f8b3c511617685a6">env</a>-&gt;<a class="code hl_function" href="class_r_g_w_env.html#ade7d5d23b881eabbb09bce4ac164ea08">get</a>(<span class="stringliteral">&quot;HTTP_X_AMZ_SERVER_SIDE_ENCRYPTION&quot;</span>, NULL);</div>
<div class="line"><span class="lineno"> 1283</span>  <span class="keywordflow">if</span> (<span class="keyword">nullptr</span> != req_sse &amp;&amp; (s-&gt;<a class="code hl_variable" href="structreq__state.html#a8ac86427062e2716c5664b22510c22ef">op</a> == <a class="code hl_enumvalue" href="rgw__common_8h.html#a7d2f08967a81e2e29e2cfa6e376bc1efa30c255de586ab01e0cffc930fa653cef">OP_GET</a> || s-&gt;<a class="code hl_variable" href="structreq__state.html#a8ac86427062e2716c5664b22510c22ef">op</a> == <a class="code hl_enumvalue" href="rgw__common_8h.html#a7d2f08967a81e2e29e2cfa6e376bc1efa169bb226c5a71385f51495088bed6d18">OP_HEAD</a>)) {</div>
<div class="line"><span class="lineno"> 1284</span>    <span class="keywordflow">return</span> -<a class="code hl_define" href="rgw__common_8h.html#ad9afe8cb242cef9c7e4cbd064c12aa83">ERR_INVALID_REQUEST</a>;</div>
<div class="line"><span class="lineno"> 1285</span>  }</div>
<div class="line"><span class="lineno"> 1286</span> </div>
<div class="line"><span class="lineno"> 1287</span>  <span class="keywordflow">if</span> (stored_mode == <span class="stringliteral">&quot;SSE-C-AES256&quot;</span>) {</div>
<div class="line"><span class="lineno"> 1288</span>    <span class="keywordflow">if</span> (s-&gt;<a class="code hl_variable" href="structreq__state.html#a98ff7b0fe2e9f0a932493c80c89280dc">cct</a>-&gt;_conf-&gt;rgw_crypt_require_ssl &amp;&amp;</div>
<div class="line"><span class="lineno"> 1289</span>        !<a class="code hl_function" href="rgw__common_8cc.html#a123a44f16b39b0789809ab850f53441e">rgw_transport_is_secure</a>(s-&gt;<a class="code hl_variable" href="structreq__state.html#a98ff7b0fe2e9f0a932493c80c89280dc">cct</a>, *s-&gt;<a class="code hl_variable" href="structreq__state.html#a494770c97c157bfcf918251e31ad2fdc">info</a>.<a class="code hl_variable" href="structreq__info.html#a8d7bb9e0a8699b24f8b3c511617685a6">env</a>)) {</div>
<div class="line"><span class="lineno"> 1290</span>      ldpp_dout(s, 5) &lt;&lt; <span class="stringliteral">&quot;ERROR: Insecure request, rgw_crypt_require_ssl is set&quot;</span> &lt;&lt; dendl;</div>
<div class="line"><span class="lineno"> 1291</span>      <span class="keywordflow">return</span> -<a class="code hl_define" href="rgw__common_8h.html#ad9afe8cb242cef9c7e4cbd064c12aa83">ERR_INVALID_REQUEST</a>;</div>
<div class="line"><span class="lineno"> 1292</span>    }</div>
<div class="line"><span class="lineno"> 1293</span>    <span class="keyword">const</span> <span class="keywordtype">char</span> *req_cust_alg =</div>
<div class="line"><span class="lineno"> 1294</span>        s-&gt;<a class="code hl_variable" href="structreq__state.html#a494770c97c157bfcf918251e31ad2fdc">info</a>.<a class="code hl_variable" href="structreq__info.html#a8d7bb9e0a8699b24f8b3c511617685a6">env</a>-&gt;<a class="code hl_function" href="class_r_g_w_env.html#ade7d5d23b881eabbb09bce4ac164ea08">get</a>(<span class="stringliteral">&quot;HTTP_X_AMZ_SERVER_SIDE_ENCRYPTION_CUSTOMER_ALGORITHM&quot;</span>, NULL);</div>
<div class="line"><span class="lineno"> 1295</span> </div>
<div class="line"><span class="lineno"> 1296</span>    <span class="keywordflow">if</span> (<span class="keyword">nullptr</span> == req_cust_alg)  {</div>
<div class="line"><span class="lineno"> 1297</span>      ldpp_dout(s, 5) &lt;&lt; <span class="stringliteral">&quot;ERROR: Request for SSE-C encrypted object missing &quot;</span></div>
<div class="line"><span class="lineno"> 1298</span>                       &lt;&lt; <span class="stringliteral">&quot;x-amz-server-side-encryption-customer-algorithm&quot;</span></div>
<div class="line"><span class="lineno"> 1299</span>                       &lt;&lt; dendl;</div>
<div class="line"><span class="lineno"> 1300</span>      s-&gt;<a class="code hl_variable" href="structreq__state.html#aa4ee7f575b1d568e2a7396e472013441">err</a>.<a class="code hl_variable" href="structrgw__err.html#ab3c8a498deb94929b307b9130edd6506">message</a> = <span class="stringliteral">&quot;Requests specifying Server Side Encryption with Customer &quot;</span></div>
<div class="line"><span class="lineno"> 1301</span>                       <span class="stringliteral">&quot;provided keys must provide a valid encryption algorithm.&quot;</span>;</div>
<div class="line"><span class="lineno"> 1302</span>      <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><span class="lineno"> 1303</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(req_cust_alg, <span class="stringliteral">&quot;AES256&quot;</span>) != 0) {</div>
<div class="line"><span class="lineno"> 1304</span>      ldpp_dout(s, 5) &lt;&lt; <span class="stringliteral">&quot;ERROR: The requested encryption algorithm is not valid, must be AES256.&quot;</span> &lt;&lt; dendl;</div>
<div class="line"><span class="lineno"> 1305</span>      s-&gt;<a class="code hl_variable" href="structreq__state.html#aa4ee7f575b1d568e2a7396e472013441">err</a>.<a class="code hl_variable" href="structrgw__err.html#ab3c8a498deb94929b307b9130edd6506">message</a> = <span class="stringliteral">&quot;The requested encryption algorithm is not valid, must be AES256.&quot;</span>;</div>
<div class="line"><span class="lineno"> 1306</span>      <span class="keywordflow">return</span> -<a class="code hl_define" href="rgw__common_8h.html#a3f638196986549a20c3499230453db74">ERR_INVALID_ENCRYPTION_ALGORITHM</a>;</div>
<div class="line"><span class="lineno"> 1307</span>    }</div>
<div class="line"><span class="lineno"> 1308</span> </div>
<div class="line"><span class="lineno"> 1309</span>    std::string key_bin;</div>
<div class="line"><span class="lineno"> 1310</span>    <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno"> 1311</span>      key_bin = <a class="code hl_function" href="namespacergw.html#ac234a4895c4d28112daeda8c2b8ec205">from_base64</a>(s-&gt;<a class="code hl_variable" href="structreq__state.html#a494770c97c157bfcf918251e31ad2fdc">info</a>.<a class="code hl_variable" href="structreq__info.html#a8d7bb9e0a8699b24f8b3c511617685a6">env</a>-&gt;<a class="code hl_function" href="class_r_g_w_env.html#ade7d5d23b881eabbb09bce4ac164ea08">get</a>(<span class="stringliteral">&quot;HTTP_X_AMZ_SERVER_SIDE_ENCRYPTION_CUSTOMER_KEY&quot;</span>, <span class="stringliteral">&quot;&quot;</span>));</div>
<div class="line"><span class="lineno"> 1312</span>    } <span class="keywordflow">catch</span> (...) {</div>
<div class="line"><span class="lineno"> 1313</span>      ldpp_dout(s, 5) &lt;&lt; <span class="stringliteral">&quot;ERROR: rgw_s3_prepare_decrypt invalid encryption key &quot;</span></div>
<div class="line"><span class="lineno"> 1314</span>                       &lt;&lt; <span class="stringliteral">&quot;which contains character that is not base64 encoded.&quot;</span></div>
<div class="line"><span class="lineno"> 1315</span>                       &lt;&lt; dendl;</div>
<div class="line"><span class="lineno"> 1316</span>      s-&gt;<a class="code hl_variable" href="structreq__state.html#aa4ee7f575b1d568e2a7396e472013441">err</a>.<a class="code hl_variable" href="structrgw__err.html#ab3c8a498deb94929b307b9130edd6506">message</a> = <span class="stringliteral">&quot;Requests specifying Server Side Encryption with Customer &quot;</span></div>
<div class="line"><span class="lineno"> 1317</span>                       <span class="stringliteral">&quot;provided keys must provide an appropriate secret key.&quot;</span>;</div>
<div class="line"><span class="lineno"> 1318</span>      <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><span class="lineno"> 1319</span>    }</div>
<div class="line"><span class="lineno"> 1320</span> </div>
<div class="line"><span class="lineno"> 1321</span>    <span class="keywordflow">if</span> (key_bin.size() != <a class="code hl_variable" href="class_a_e_s__256___c_b_c.html#ab8c25a04996a772c94fe7887f635a0c2">AES_256_CBC::AES_256_KEYSIZE</a>) {</div>
<div class="line"><span class="lineno"> 1322</span>      ldpp_dout(s, 5) &lt;&lt; <span class="stringliteral">&quot;ERROR: Invalid encryption key size&quot;</span> &lt;&lt; dendl;</div>
<div class="line"><span class="lineno"> 1323</span>      s-&gt;<a class="code hl_variable" href="structreq__state.html#aa4ee7f575b1d568e2a7396e472013441">err</a>.<a class="code hl_variable" href="structrgw__err.html#ab3c8a498deb94929b307b9130edd6506">message</a> = <span class="stringliteral">&quot;Requests specifying Server Side Encryption with Customer &quot;</span></div>
<div class="line"><span class="lineno"> 1324</span>                       <span class="stringliteral">&quot;provided keys must provide an appropriate secret key.&quot;</span>;</div>
<div class="line"><span class="lineno"> 1325</span>      <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><span class="lineno"> 1326</span>    }</div>
<div class="line"><span class="lineno"> 1327</span> </div>
<div class="line"><span class="lineno"> 1328</span>    std::string keymd5 =</div>
<div class="line"><span class="lineno"> 1329</span>        s-&gt;<a class="code hl_variable" href="structreq__state.html#a494770c97c157bfcf918251e31ad2fdc">info</a>.<a class="code hl_variable" href="structreq__info.html#a8d7bb9e0a8699b24f8b3c511617685a6">env</a>-&gt;<a class="code hl_function" href="class_r_g_w_env.html#ade7d5d23b881eabbb09bce4ac164ea08">get</a>(<span class="stringliteral">&quot;HTTP_X_AMZ_SERVER_SIDE_ENCRYPTION_CUSTOMER_KEY_MD5&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><span class="lineno"> 1330</span>    std::string keymd5_bin;</div>
<div class="line"><span class="lineno"> 1331</span>    <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno"> 1332</span>      keymd5_bin = <a class="code hl_function" href="namespacergw.html#ac234a4895c4d28112daeda8c2b8ec205">from_base64</a>(keymd5);</div>
<div class="line"><span class="lineno"> 1333</span>    } <span class="keywordflow">catch</span> (...) {</div>
<div class="line"><span class="lineno"> 1334</span>      ldpp_dout(s, 5) &lt;&lt; <span class="stringliteral">&quot;ERROR: rgw_s3_prepare_decrypt invalid encryption key md5 &quot;</span></div>
<div class="line"><span class="lineno"> 1335</span>                       &lt;&lt; <span class="stringliteral">&quot;which contains character that is not base64 encoded.&quot;</span></div>
<div class="line"><span class="lineno"> 1336</span>                       &lt;&lt; dendl;</div>
<div class="line"><span class="lineno"> 1337</span>      s-&gt;<a class="code hl_variable" href="structreq__state.html#aa4ee7f575b1d568e2a7396e472013441">err</a>.<a class="code hl_variable" href="structrgw__err.html#ab3c8a498deb94929b307b9130edd6506">message</a> = <span class="stringliteral">&quot;Requests specifying Server Side Encryption with Customer &quot;</span></div>
<div class="line"><span class="lineno"> 1338</span>                       <span class="stringliteral">&quot;provided keys must provide an appropriate secret key md5.&quot;</span>;</div>
<div class="line"><span class="lineno"> 1339</span>      <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><span class="lineno"> 1340</span>    }</div>
<div class="line"><span class="lineno"> 1341</span> </div>
<div class="line"><span class="lineno"> 1342</span> </div>
<div class="line"><span class="lineno"> 1343</span>    <span class="keywordflow">if</span> (keymd5_bin.size() != CEPH_CRYPTO_MD5_DIGESTSIZE) {</div>
<div class="line"><span class="lineno"> 1344</span>      ldpp_dout(s, 5) &lt;&lt; <span class="stringliteral">&quot;ERROR: Invalid key md5 size &quot;</span> &lt;&lt; dendl;</div>
<div class="line"><span class="lineno"> 1345</span>      s-&gt;<a class="code hl_variable" href="structreq__state.html#aa4ee7f575b1d568e2a7396e472013441">err</a>.<a class="code hl_variable" href="structrgw__err.html#ab3c8a498deb94929b307b9130edd6506">message</a> = <span class="stringliteral">&quot;Requests specifying Server Side Encryption with Customer &quot;</span></div>
<div class="line"><span class="lineno"> 1346</span>                       <span class="stringliteral">&quot;provided keys must provide an appropriate secret key md5.&quot;</span>;</div>
<div class="line"><span class="lineno"> 1347</span>      <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><span class="lineno"> 1348</span>    }</div>
<div class="line"><span class="lineno"> 1349</span> </div>
<div class="line"><span class="lineno"> 1350</span>    MD5 key_hash;</div>
<div class="line"><span class="lineno"> 1351</span>    <span class="comment">// Allow use of MD5 digest in FIPS mode for non-cryptographic purposes</span></div>
<div class="line"><span class="lineno"> 1352</span>    key_hash.SetFlags(EVP_MD_CTX_FLAG_NON_FIPS_ALLOW);</div>
<div class="line"><span class="lineno"> 1353</span>    uint8_t key_hash_res[CEPH_CRYPTO_MD5_DIGESTSIZE];</div>
<div class="line"><span class="lineno"> 1354</span>    key_hash.Update(<span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span><span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(key_bin.c_str()), key_bin.size());</div>
<div class="line"><span class="lineno"> 1355</span>    key_hash.Final(key_hash_res);</div>
<div class="line"><span class="lineno"> 1356</span> </div>
<div class="line"><span class="lineno"> 1357</span>    <span class="keywordflow">if</span> ((memcmp(key_hash_res, keymd5_bin.c_str(), CEPH_CRYPTO_MD5_DIGESTSIZE) != 0) ||</div>
<div class="line"><span class="lineno"> 1358</span>        (<a class="code hl_function" href="rgw__crypt_8h.html#a01489bc791eb4d27b5ce7ca0915289be">get_str_attribute</a>(attrs, <a class="code hl_define" href="rgw__common_8h.html#a8c43cec1bbf10c276303edb1621b2e57">RGW_ATTR_CRYPT_KEYMD5</a>) != keymd5_bin)) {</div>
<div class="line"><span class="lineno"> 1359</span>      s-&gt;<a class="code hl_variable" href="structreq__state.html#aa4ee7f575b1d568e2a7396e472013441">err</a>.<a class="code hl_variable" href="structrgw__err.html#ab3c8a498deb94929b307b9130edd6506">message</a> = <span class="stringliteral">&quot;The calculated MD5 hash of the key did not match the hash that was provided.&quot;</span>;</div>
<div class="line"><span class="lineno"> 1360</span>      <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><span class="lineno"> 1361</span>    }</div>
<div class="line"><span class="lineno"> 1362</span>    <span class="keyword">auto</span> aes = std::unique_ptr&lt;AES_256_CBC&gt;(<span class="keyword">new</span> <a class="code hl_class" href="class_a_e_s__256___c_b_c.html">AES_256_CBC</a>(s, s-&gt;<a class="code hl_variable" href="structreq__state.html#a98ff7b0fe2e9f0a932493c80c89280dc">cct</a>));</div>
<div class="line"><span class="lineno"> 1363</span>    aes-&gt;set_key(<span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span>uint8_t*<span class="keyword">&gt;</span>(key_bin.c_str()), <a class="code hl_variable" href="class_a_e_s__256___c_b_c.html#ab8c25a04996a772c94fe7887f635a0c2">AES_256_CBC::AES_256_KEYSIZE</a>);</div>
<div class="line"><span class="lineno"> 1364</span>    <span class="keywordflow">if</span> (block_crypt) *block_crypt = std::move(aes);</div>
<div class="line"><span class="lineno"> 1365</span> </div>
<div class="line"><span class="lineno"> 1366</span>    crypt_http_responses[<span class="stringliteral">&quot;x-amz-server-side-encryption-customer-algorithm&quot;</span>] = <span class="stringliteral">&quot;AES256&quot;</span>;</div>
<div class="line"><span class="lineno"> 1367</span>    crypt_http_responses[<span class="stringliteral">&quot;x-amz-server-side-encryption-customer-key-MD5&quot;</span>] = keymd5;</div>
<div class="line"><span class="lineno"> 1368</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 1369</span>  }</div>
<div class="line"><span class="lineno"> 1370</span> </div>
<div class="line"><span class="lineno"> 1371</span>  <span class="keywordflow">if</span> (stored_mode == <span class="stringliteral">&quot;SSE-KMS&quot;</span>) {</div>
<div class="line"><span class="lineno"> 1372</span>    <span class="keywordflow">if</span> (s-&gt;<a class="code hl_variable" href="structreq__state.html#a98ff7b0fe2e9f0a932493c80c89280dc">cct</a>-&gt;_conf-&gt;rgw_crypt_require_ssl &amp;&amp;</div>
<div class="line"><span class="lineno"> 1373</span>        !<a class="code hl_function" href="rgw__common_8cc.html#a123a44f16b39b0789809ab850f53441e">rgw_transport_is_secure</a>(s-&gt;<a class="code hl_variable" href="structreq__state.html#a98ff7b0fe2e9f0a932493c80c89280dc">cct</a>, *s-&gt;<a class="code hl_variable" href="structreq__state.html#a494770c97c157bfcf918251e31ad2fdc">info</a>.<a class="code hl_variable" href="structreq__info.html#a8d7bb9e0a8699b24f8b3c511617685a6">env</a>)) {</div>
<div class="line"><span class="lineno"> 1374</span>      ldpp_dout(s, 5) &lt;&lt; <span class="stringliteral">&quot;ERROR: Insecure request, rgw_crypt_require_ssl is set&quot;</span> &lt;&lt; dendl;</div>
<div class="line"><span class="lineno"> 1375</span>      <span class="keywordflow">return</span> -<a class="code hl_define" href="rgw__common_8h.html#ad9afe8cb242cef9c7e4cbd064c12aa83">ERR_INVALID_REQUEST</a>;</div>
<div class="line"><span class="lineno"> 1376</span>    }</div>
<div class="line"><span class="lineno"> 1377</span>    <span class="comment">/* try to retrieve actual key */</span></div>
<div class="line"><span class="lineno"> 1378</span>    std::string key_id = <a class="code hl_function" href="rgw__crypt_8h.html#a01489bc791eb4d27b5ce7ca0915289be">get_str_attribute</a>(attrs, <a class="code hl_define" href="rgw__common_8h.html#a94260c0d2b4e544842cddd8205b587d5">RGW_ATTR_CRYPT_KEYID</a>);</div>
<div class="line"><span class="lineno"> 1379</span>    std::string actual_key;</div>
<div class="line"><span class="lineno"> 1380</span>    res = <a class="code hl_function" href="rgw__kms_8cc.html#a4a4d58b805a968e04ab2f2cb64d808a3">reconstitute_actual_key_from_kms</a>(s, s-&gt;<a class="code hl_variable" href="structreq__state.html#a98ff7b0fe2e9f0a932493c80c89280dc">cct</a>, attrs, actual_key);</div>
<div class="line"><span class="lineno"> 1381</span>    <span class="keywordflow">if</span> (res != 0) {</div>
<div class="line"><span class="lineno"> 1382</span>      ldpp_dout(s, 10) &lt;&lt; <span class="stringliteral">&quot;ERROR: failed to retrieve actual key from key_id: &quot;</span> &lt;&lt; key_id &lt;&lt; dendl;</div>
<div class="line"><span class="lineno"> 1383</span>      s-&gt;<a class="code hl_variable" href="structreq__state.html#aa4ee7f575b1d568e2a7396e472013441">err</a>.<a class="code hl_variable" href="structrgw__err.html#ab3c8a498deb94929b307b9130edd6506">message</a> = <span class="stringliteral">&quot;Failed to retrieve the actual key, kms-keyid: &quot;</span> + key_id;</div>
<div class="line"><span class="lineno"> 1384</span>      <span class="keywordflow">return</span> res;</div>
<div class="line"><span class="lineno"> 1385</span>    }</div>
<div class="line"><span class="lineno"> 1386</span>    <span class="keywordflow">if</span> (actual_key.size() != <a class="code hl_variable" href="rgw__crypt_8h.html#a41a559733e886bbe9c771acec4888a7e">AES_256_KEYSIZE</a>) {</div>
<div class="line"><span class="lineno"> 1387</span>      ldpp_dout(s, 0) &lt;&lt; <span class="stringliteral">&quot;ERROR: key obtained from key_id:&quot;</span> &lt;&lt;</div>
<div class="line"><span class="lineno"> 1388</span>          key_id &lt;&lt; <span class="stringliteral">&quot; is not 256 bit size&quot;</span> &lt;&lt; dendl;</div>
<div class="line"><span class="lineno"> 1389</span>      s-&gt;<a class="code hl_variable" href="structreq__state.html#aa4ee7f575b1d568e2a7396e472013441">err</a>.<a class="code hl_variable" href="structrgw__err.html#ab3c8a498deb94929b307b9130edd6506">message</a> = <span class="stringliteral">&quot;KMS provided an invalid key for the given kms-keyid.&quot;</span>;</div>
<div class="line"><span class="lineno"> 1390</span>      <span class="keywordflow">return</span> -<a class="code hl_define" href="rgw__common_8h.html#a61875168ddf0a54b11e3b4cde6bf8427">ERR_INVALID_ACCESS_KEY</a>;</div>
<div class="line"><span class="lineno"> 1391</span>    }</div>
<div class="line"><span class="lineno"> 1392</span> </div>
<div class="line"><span class="lineno"> 1393</span>    <span class="keyword">auto</span> aes = std::unique_ptr&lt;AES_256_CBC&gt;(<span class="keyword">new</span> <a class="code hl_class" href="class_a_e_s__256___c_b_c.html">AES_256_CBC</a>(s, s-&gt;<a class="code hl_variable" href="structreq__state.html#a98ff7b0fe2e9f0a932493c80c89280dc">cct</a>));</div>
<div class="line"><span class="lineno"> 1394</span>    aes-&gt;set_key(<span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span>uint8_t*<span class="keyword">&gt;</span>(actual_key.c_str()), <a class="code hl_variable" href="rgw__crypt_8h.html#a41a559733e886bbe9c771acec4888a7e">AES_256_KEYSIZE</a>);</div>
<div class="line"><span class="lineno"> 1395</span>    actual_key.replace(0, actual_key.length(), actual_key.length(), <span class="charliteral">&#39;\000&#39;</span>);</div>
<div class="line"><span class="lineno"> 1396</span>    <span class="keywordflow">if</span> (block_crypt) *block_crypt = std::move(aes);</div>
<div class="line"><span class="lineno"> 1397</span> </div>
<div class="line"><span class="lineno"> 1398</span>    crypt_http_responses[<span class="stringliteral">&quot;x-amz-server-side-encryption&quot;</span>] = <span class="stringliteral">&quot;aws:kms&quot;</span>;</div>
<div class="line"><span class="lineno"> 1399</span>    crypt_http_responses[<span class="stringliteral">&quot;x-amz-server-side-encryption-aws-kms-key-id&quot;</span>] = key_id;</div>
<div class="line"><span class="lineno"> 1400</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 1401</span>  }</div>
<div class="line"><span class="lineno"> 1402</span> </div>
<div class="line"><span class="lineno"> 1403</span>  <span class="keywordflow">if</span> (stored_mode == <span class="stringliteral">&quot;RGW-AUTO&quot;</span>) {</div>
<div class="line"><span class="lineno"> 1404</span>    std::string master_encryption_key;</div>
<div class="line"><span class="lineno"> 1405</span>    <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno"> 1406</span>      master_encryption_key = <a class="code hl_function" href="namespacergw.html#ac234a4895c4d28112daeda8c2b8ec205">from_base64</a>(std::string(s-&gt;<a class="code hl_variable" href="structreq__state.html#a98ff7b0fe2e9f0a932493c80c89280dc">cct</a>-&gt;_conf-&gt;rgw_crypt_default_encryption_key));</div>
<div class="line"><span class="lineno"> 1407</span>    } <span class="keywordflow">catch</span> (...) {</div>
<div class="line"><span class="lineno"> 1408</span>      ldpp_dout(s, 5) &lt;&lt; <span class="stringliteral">&quot;ERROR: rgw_s3_prepare_decrypt invalid default encryption key &quot;</span></div>
<div class="line"><span class="lineno"> 1409</span>                       &lt;&lt; <span class="stringliteral">&quot;which contains character that is not base64 encoded.&quot;</span></div>
<div class="line"><span class="lineno"> 1410</span>                       &lt;&lt; dendl;</div>
<div class="line"><span class="lineno"> 1411</span>      s-&gt;<a class="code hl_variable" href="structreq__state.html#aa4ee7f575b1d568e2a7396e472013441">err</a>.<a class="code hl_variable" href="structrgw__err.html#ab3c8a498deb94929b307b9130edd6506">message</a> = <span class="stringliteral">&quot;The default encryption key is not valid base64.&quot;</span>;</div>
<div class="line"><span class="lineno"> 1412</span>      <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><span class="lineno"> 1413</span>    }</div>
<div class="line"><span class="lineno"> 1414</span> </div>
<div class="line"><span class="lineno"> 1415</span>    <span class="keywordflow">if</span> (master_encryption_key.size() != 256 / 8) {</div>
<div class="line"><span class="lineno"> 1416</span>      ldpp_dout(s, 0) &lt;&lt; <span class="stringliteral">&quot;ERROR: failed to decode &#39;rgw crypt default encryption key&#39; to 256 bit string&quot;</span> &lt;&lt; dendl;</div>
<div class="line"><span class="lineno"> 1417</span>      <span class="keywordflow">return</span> -EIO;</div>
<div class="line"><span class="lineno"> 1418</span>    }</div>
<div class="line"><span class="lineno"> 1419</span>    std::string attr_key_selector = <a class="code hl_function" href="rgw__crypt_8h.html#a01489bc791eb4d27b5ce7ca0915289be">get_str_attribute</a>(attrs, <a class="code hl_define" href="rgw__common_8h.html#a4d7f613b0465a549a2e5a5de8dbd3175">RGW_ATTR_CRYPT_KEYSEL</a>);</div>
<div class="line"><span class="lineno"> 1420</span>    <span class="keywordflow">if</span> (attr_key_selector.size() != <a class="code hl_variable" href="class_a_e_s__256___c_b_c.html#ab8c25a04996a772c94fe7887f635a0c2">AES_256_CBC::AES_256_KEYSIZE</a>) {</div>
<div class="line"><span class="lineno"> 1421</span>      ldpp_dout(s, 0) &lt;&lt; <span class="stringliteral">&quot;ERROR: missing or invalid &quot;</span> <a class="code hl_define" href="rgw__common_8h.html#a4d7f613b0465a549a2e5a5de8dbd3175">RGW_ATTR_CRYPT_KEYSEL</a> &lt;&lt; dendl;</div>
<div class="line"><span class="lineno"> 1422</span>      <span class="keywordflow">return</span> -EIO;</div>
<div class="line"><span class="lineno"> 1423</span>    }</div>
<div class="line"><span class="lineno"> 1424</span>    uint8_t actual_key[<a class="code hl_variable" href="rgw__crypt_8h.html#a41a559733e886bbe9c771acec4888a7e">AES_256_KEYSIZE</a>];</div>
<div class="line"><span class="lineno"> 1425</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="rgw__crypt_8cc.html#ac7c06376b99620c995fb2e5726720fc0">AES_256_ECB_encrypt</a>(s, s-&gt;<a class="code hl_variable" href="structreq__state.html#a98ff7b0fe2e9f0a932493c80c89280dc">cct</a>,</div>
<div class="line"><span class="lineno"> 1426</span>                            <span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span>uint8_t*<span class="keyword">&gt;</span>(master_encryption_key.c_str()),</div>
<div class="line"><span class="lineno"> 1427</span>                            <a class="code hl_variable" href="rgw__crypt_8h.html#a41a559733e886bbe9c771acec4888a7e">AES_256_KEYSIZE</a>,</div>
<div class="line"><span class="lineno"> 1428</span>                            <span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span>uint8_t*<span class="keyword">&gt;</span>(attr_key_selector.c_str()),</div>
<div class="line"><span class="lineno"> 1429</span>                            actual_key, <a class="code hl_variable" href="rgw__crypt_8h.html#a41a559733e886bbe9c771acec4888a7e">AES_256_KEYSIZE</a>) != <span class="keyword">true</span>) {</div>
<div class="line"><span class="lineno"> 1430</span>      ::ceph::crypto::zeroize_for_security(actual_key, <span class="keyword">sizeof</span>(actual_key));</div>
<div class="line"><span class="lineno"> 1431</span>      <span class="keywordflow">return</span> -EIO;</div>
<div class="line"><span class="lineno"> 1432</span>    }</div>
<div class="line"><span class="lineno"> 1433</span>    <span class="keyword">auto</span> aes = std::unique_ptr&lt;AES_256_CBC&gt;(<span class="keyword">new</span> <a class="code hl_class" href="class_a_e_s__256___c_b_c.html">AES_256_CBC</a>(s, s-&gt;<a class="code hl_variable" href="structreq__state.html#a98ff7b0fe2e9f0a932493c80c89280dc">cct</a>));</div>
<div class="line"><span class="lineno"> 1434</span>    aes-&gt;set_key(actual_key, <a class="code hl_variable" href="rgw__crypt_8h.html#a41a559733e886bbe9c771acec4888a7e">AES_256_KEYSIZE</a>);</div>
<div class="line"><span class="lineno"> 1435</span>    ::ceph::crypto::zeroize_for_security(actual_key, <span class="keyword">sizeof</span>(actual_key));</div>
<div class="line"><span class="lineno"> 1436</span>    <span class="keywordflow">if</span> (block_crypt) *block_crypt = std::move(aes);</div>
<div class="line"><span class="lineno"> 1437</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 1438</span>  }</div>
<div class="line"><span class="lineno"> 1439</span> </div>
<div class="line"><span class="lineno"> 1440</span>  <span class="comment">/* SSE-S3 */</span></div>
<div class="line"><span class="lineno"> 1441</span>  <span class="keywordflow">if</span> (stored_mode == <span class="stringliteral">&quot;AES256&quot;</span>) {</div>
<div class="line"><span class="lineno"> 1442</span>    <span class="keywordflow">if</span> (s-&gt;<a class="code hl_variable" href="structreq__state.html#a98ff7b0fe2e9f0a932493c80c89280dc">cct</a>-&gt;_conf-&gt;rgw_crypt_require_ssl &amp;&amp;</div>
<div class="line"><span class="lineno"> 1443</span>        !<a class="code hl_function" href="rgw__common_8cc.html#a123a44f16b39b0789809ab850f53441e">rgw_transport_is_secure</a>(s-&gt;<a class="code hl_variable" href="structreq__state.html#a98ff7b0fe2e9f0a932493c80c89280dc">cct</a>, *s-&gt;<a class="code hl_variable" href="structreq__state.html#a494770c97c157bfcf918251e31ad2fdc">info</a>.<a class="code hl_variable" href="structreq__info.html#a8d7bb9e0a8699b24f8b3c511617685a6">env</a>)) {</div>
<div class="line"><span class="lineno"> 1444</span>      ldpp_dout(s, 5) &lt;&lt; <span class="stringliteral">&quot;ERROR: Insecure request, rgw_crypt_require_ssl is set&quot;</span> &lt;&lt; dendl;</div>
<div class="line"><span class="lineno"> 1445</span>      <span class="keywordflow">return</span> -<a class="code hl_define" href="rgw__common_8h.html#ad9afe8cb242cef9c7e4cbd064c12aa83">ERR_INVALID_REQUEST</a>;</div>
<div class="line"><span class="lineno"> 1446</span>    }</div>
<div class="line"><span class="lineno"> 1447</span>    <span class="comment">/* try to retrieve actual key */</span></div>
<div class="line"><span class="lineno"> 1448</span>    std::string key_id = <a class="code hl_function" href="rgw__crypt_8h.html#a01489bc791eb4d27b5ce7ca0915289be">get_str_attribute</a>(attrs, <a class="code hl_define" href="rgw__common_8h.html#a94260c0d2b4e544842cddd8205b587d5">RGW_ATTR_CRYPT_KEYID</a>);</div>
<div class="line"><span class="lineno"> 1449</span>    std::string actual_key;</div>
<div class="line"><span class="lineno"> 1450</span>    res = <a class="code hl_function" href="rgw__kms_8cc.html#ac931fb4d1ef5634b8a46ee1a8cb3b9d8">reconstitute_actual_key_from_sse_s3</a>(s, s-&gt;<a class="code hl_variable" href="structreq__state.html#a98ff7b0fe2e9f0a932493c80c89280dc">cct</a>, attrs, actual_key);</div>
<div class="line"><span class="lineno"> 1451</span>    <span class="keywordflow">if</span> (res != 0) {</div>
<div class="line"><span class="lineno"> 1452</span>      ldpp_dout(s, 10) &lt;&lt; <span class="stringliteral">&quot;ERROR: failed to retrieve actual key&quot;</span> &lt;&lt; dendl;</div>
<div class="line"><span class="lineno"> 1453</span>      s-&gt;<a class="code hl_variable" href="structreq__state.html#aa4ee7f575b1d568e2a7396e472013441">err</a>.<a class="code hl_variable" href="structrgw__err.html#ab3c8a498deb94929b307b9130edd6506">message</a> = <span class="stringliteral">&quot;Failed to retrieve the actual key&quot;</span>;</div>
<div class="line"><span class="lineno"> 1454</span>      <span class="keywordflow">return</span> res;</div>
<div class="line"><span class="lineno"> 1455</span>    }</div>
<div class="line"><span class="lineno"> 1456</span>    <span class="keywordflow">if</span> (actual_key.size() != <a class="code hl_variable" href="rgw__crypt_8h.html#a41a559733e886bbe9c771acec4888a7e">AES_256_KEYSIZE</a>) {</div>
<div class="line"><span class="lineno"> 1457</span>      ldpp_dout(s, 0) &lt;&lt; <span class="stringliteral">&quot;ERROR: key obtained &quot;</span> &lt;&lt;</div>
<div class="line"><span class="lineno"> 1458</span>          <span class="stringliteral">&quot;is not 256 bit size&quot;</span> &lt;&lt; dendl;</div>
<div class="line"><span class="lineno"> 1459</span>      s-&gt;<a class="code hl_variable" href="structreq__state.html#aa4ee7f575b1d568e2a7396e472013441">err</a>.<a class="code hl_variable" href="structrgw__err.html#ab3c8a498deb94929b307b9130edd6506">message</a> = <span class="stringliteral">&quot;SSE-S3 provided an invalid key for the given keyid.&quot;</span>;</div>
<div class="line"><span class="lineno"> 1460</span>      <span class="keywordflow">return</span> -<a class="code hl_define" href="rgw__common_8h.html#a61875168ddf0a54b11e3b4cde6bf8427">ERR_INVALID_ACCESS_KEY</a>;</div>
<div class="line"><span class="lineno"> 1461</span>    }</div>
<div class="line"><span class="lineno"> 1462</span> </div>
<div class="line"><span class="lineno"> 1463</span>    <span class="keyword">auto</span> aes = std::unique_ptr&lt;AES_256_CBC&gt;(<span class="keyword">new</span> <a class="code hl_class" href="class_a_e_s__256___c_b_c.html">AES_256_CBC</a>(s, s-&gt;<a class="code hl_variable" href="structreq__state.html#a98ff7b0fe2e9f0a932493c80c89280dc">cct</a>));</div>
<div class="line"><span class="lineno"> 1464</span>    aes-&gt;set_key(<span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span>uint8_t*<span class="keyword">&gt;</span>(actual_key.c_str()), <a class="code hl_variable" href="rgw__crypt_8h.html#a41a559733e886bbe9c771acec4888a7e">AES_256_KEYSIZE</a>);</div>
<div class="line"><span class="lineno"> 1465</span>    actual_key.replace(0, actual_key.length(), actual_key.length(), <span class="charliteral">&#39;\000&#39;</span>);</div>
<div class="line"><span class="lineno"> 1466</span>    <span class="keywordflow">if</span> (block_crypt) *block_crypt = std::move(aes);</div>
<div class="line"><span class="lineno"> 1467</span> </div>
<div class="line"><span class="lineno"> 1468</span>    crypt_http_responses[<span class="stringliteral">&quot;x-amz-server-side-encryption&quot;</span>] = <span class="stringliteral">&quot;AES256&quot;</span>;</div>
<div class="line"><span class="lineno"> 1469</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 1470</span>  }</div>
<div class="line"><span class="lineno"> 1471</span> </div>
<div class="line"><span class="lineno"> 1472</span> </div>
<div class="line"><span class="lineno"> 1473</span>  <span class="comment">/*no decryption*/</span></div>
<div class="line"><span class="lineno"> 1474</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 1475</span>}</div>
<div class="ttc" id="aclass_a_e_s__256___c_b_c_html_ab8c25a04996a772c94fe7887f635a0c2"><div class="ttname"><a href="class_a_e_s__256___c_b_c.html#ab8c25a04996a772c94fe7887f635a0c2">AES_256_CBC::AES_256_KEYSIZE</a></div><div class="ttdeci">static const size_t AES_256_KEYSIZE</div><div class="ttdef"><b>Definition</b> <a href="rgw__crypt_8cc_source.html#l00404">rgw_crypt.cc:404</a></div></div>
<div class="ttc" id="aclass_r_g_w_env_html_ade7d5d23b881eabbb09bce4ac164ea08"><div class="ttname"><a href="class_r_g_w_env.html#ade7d5d23b881eabbb09bce4ac164ea08">RGWEnv::get</a></div><div class="ttdeci">const char * get(const char *name, const char *def_val=nullptr) const</div><div class="ttdef"><b>Definition</b> <a href="rgw__env_8cc_source.html#l00055">rgw_env.cc:55</a></div></div>
<div class="ttc" id="argw__common_8cc_html_a123a44f16b39b0789809ab850f53441e"><div class="ttname"><a href="rgw__common_8cc.html#a123a44f16b39b0789809ab850f53441e">rgw_transport_is_secure</a></div><div class="ttdeci">bool rgw_transport_is_secure(CephContext *cct, const RGWEnv &amp;env)</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8cc_source.html#l01042">rgw_common.cc:1042</a></div></div>
<div class="ttc" id="argw__common_8h_html_a3f638196986549a20c3499230453db74"><div class="ttname"><a href="rgw__common_8h.html#a3f638196986549a20c3499230453db74">ERR_INVALID_ENCRYPTION_ALGORITHM</a></div><div class="ttdeci">#define ERR_INVALID_ENCRYPTION_ALGORITHM</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l00258">rgw_common.h:258</a></div></div>
<div class="ttc" id="argw__common_8h_html_a4d7f613b0465a549a2e5a5de8dbd3175"><div class="ttname"><a href="rgw__common_8h.html#a4d7f613b0465a549a2e5a5de8dbd3175">RGW_ATTR_CRYPT_KEYSEL</a></div><div class="ttdeci">#define RGW_ATTR_CRYPT_KEYSEL</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l00145">rgw_common.h:145</a></div></div>
<div class="ttc" id="argw__common_8h_html_a5808b2eabc90655feacc05657c938c7a"><div class="ttname"><a href="rgw__common_8h.html#a5808b2eabc90655feacc05657c938c7a">RGW_ATTR_CRYPT_MODE</a></div><div class="ttdeci">#define RGW_ATTR_CRYPT_MODE</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l00142">rgw_common.h:142</a></div></div>
<div class="ttc" id="argw__common_8h_html_a61875168ddf0a54b11e3b4cde6bf8427"><div class="ttname"><a href="rgw__common_8h.html#a61875168ddf0a54b11e3b4cde6bf8427">ERR_INVALID_ACCESS_KEY</a></div><div class="ttdeci">#define ERR_INVALID_ACCESS_KEY</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l00222">rgw_common.h:222</a></div></div>
<div class="ttc" id="argw__common_8h_html_a7d2f08967a81e2e29e2cfa6e376bc1efa169bb226c5a71385f51495088bed6d18"><div class="ttname"><a href="rgw__common_8h.html#a7d2f08967a81e2e29e2cfa6e376bc1efa169bb226c5a71385f51495088bed6d18">OP_HEAD</a></div><div class="ttdeci">@ OP_HEAD</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l00468">rgw_common.h:468</a></div></div>
<div class="ttc" id="argw__common_8h_html_a7d2f08967a81e2e29e2cfa6e376bc1efa30c255de586ab01e0cffc930fa653cef"><div class="ttname"><a href="rgw__common_8h.html#a7d2f08967a81e2e29e2cfa6e376bc1efa30c255de586ab01e0cffc930fa653cef">OP_GET</a></div><div class="ttdeci">@ OP_GET</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l00465">rgw_common.h:465</a></div></div>
<div class="ttc" id="argw__common_8h_html_a8c43cec1bbf10c276303edb1621b2e57"><div class="ttname"><a href="rgw__common_8h.html#a8c43cec1bbf10c276303edb1621b2e57">RGW_ATTR_CRYPT_KEYMD5</a></div><div class="ttdeci">#define RGW_ATTR_CRYPT_KEYMD5</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l00143">rgw_common.h:143</a></div></div>
<div class="ttc" id="argw__common_8h_html_a94260c0d2b4e544842cddd8205b587d5"><div class="ttname"><a href="rgw__common_8h.html#a94260c0d2b4e544842cddd8205b587d5">RGW_ATTR_CRYPT_KEYID</a></div><div class="ttdeci">#define RGW_ATTR_CRYPT_KEYID</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l00144">rgw_common.h:144</a></div></div>
<div class="ttc" id="argw__crypt_8cc_html_ac7c06376b99620c995fb2e5726720fc0"><div class="ttname"><a href="rgw__crypt_8cc.html#ac7c06376b99620c995fb2e5726720fc0">AES_256_ECB_encrypt</a></div><div class="ttdeci">bool AES_256_ECB_encrypt(const DoutPrefixProvider *dpp, CephContext *cct, const uint8_t *key, size_t key_size, const uint8_t *data_in, uint8_t *data_out, size_t data_size)</div><div class="ttdef"><b>Definition</b> <a href="rgw__crypt_8cc_source.html#l00616">rgw_crypt.cc:616</a></div></div>
<div class="ttc" id="argw__crypt_8h_html_a01489bc791eb4d27b5ce7ca0915289be"><div class="ttname"><a href="rgw__crypt_8h.html#a01489bc791eb4d27b5ce7ca0915289be">get_str_attribute</a></div><div class="ttdeci">static std::string get_str_attribute(std::map&lt; std::string, bufferlist &gt; &amp;attrs, const char *name)</div><div class="ttdef"><b>Definition</b> <a href="rgw__crypt_8h_source.html#l00163">rgw_crypt.h:163</a></div></div>
<div class="ttc" id="argw__kms_8cc_html_a4a4d58b805a968e04ab2f2cb64d808a3"><div class="ttname"><a href="rgw__kms_8cc.html#a4a4d58b805a968e04ab2f2cb64d808a3">reconstitute_actual_key_from_kms</a></div><div class="ttdeci">int reconstitute_actual_key_from_kms(const DoutPrefixProvider *dpp, CephContext *cct, map&lt; string, bufferlist &gt; &amp;attrs, std::string &amp;actual_key)</div><div class="ttdef"><b>Definition</b> <a href="rgw__kms_8cc_source.html#l01154">rgw_kms.cc:1154</a></div></div>
<div class="ttc" id="argw__kms_8cc_html_ac931fb4d1ef5634b8a46ee1a8cb3b9d8"><div class="ttname"><a href="rgw__kms_8cc.html#ac931fb4d1ef5634b8a46ee1a8cb3b9d8">reconstitute_actual_key_from_sse_s3</a></div><div class="ttdeci">int reconstitute_actual_key_from_sse_s3(const DoutPrefixProvider *dpp, CephContext *cct, map&lt; string, bufferlist &gt; &amp;attrs, std::string &amp;actual_key)</div><div class="ttdef"><b>Definition</b> <a href="rgw__kms_8cc_source.html#l01197">rgw_kms.cc:1197</a></div></div>
<div class="ttc" id="astructreq__info_html_a8d7bb9e0a8699b24f8b3c511617685a6"><div class="ttname"><a href="structreq__info.html#a8d7bb9e0a8699b24f8b3c511617685a6">req_info::env</a></div><div class="ttdeci">const RGWEnv * env</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l01226">rgw_common.h:1226</a></div></div>
<div class="ttc" id="astructreq__state_html_a494770c97c157bfcf918251e31ad2fdc"><div class="ttname"><a href="structreq__state.html#a494770c97c157bfcf918251e31ad2fdc">req_state::info</a></div><div class="ttdeci">req_info info</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l01669">rgw_common.h:1669</a></div></div>
<div class="ttc" id="astructreq__state_html_a8ac86427062e2716c5664b22510c22ef"><div class="ttname"><a href="structreq__state.html#a8ac86427062e2716c5664b22510c22ef">req_state::op</a></div><div class="ttdeci">http_op op</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l01554">rgw_common.h:1554</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="rgw__crypt_8cc_a053d14367e9beb6222476b4732e17923_cgraph.png" border="0" usemap="#argw__crypt_8cc_a053d14367e9beb6222476b4732e17923_cgraph" alt=""/></div>
<map name="argw__crypt_8cc_a053d14367e9beb6222476b4732e17923_cgraph" id="argw__crypt_8cc_a053d14367e9beb6222476b4732e17923_cgraph">
<area shape="rect" title=" " alt="" coords="5,1792,168,1819"/>
<area shape="rect" href="rgw__crypt_8cc.html#ac7c06376b99620c995fb2e5726720fc0" title=" " alt="" coords="1123,915,1283,941"/>
<area shape="poly" title=" " alt="" coords="86,1791,96,1658,119,1444,136,1330,157,1223,183,1134,198,1098,213,1070,258,1018,281,1001,304,988,357,968,426,951,834,951,1107,934,1108,939,834,956,426,956,359,974,306,992,284,1005,262,1022,218,1074,202,1101,188,1135,163,1224,141,1330,124,1445,101,1659,91,1792"/>
<area shape="rect" href="namespacergw.html#ac234a4895c4d28112daeda8c2b8ec205" title=" " alt="" coords="1651,1691,1774,1717"/>
<area shape="poly" title=" " alt="" coords="161,1817,322,1841,417,1850,513,1853,1204,1853,1273,1849,1342,1839,1409,1823,1474,1803,1588,1760,1671,1722,1673,1727,1590,1765,1475,1808,1410,1828,1343,1844,1273,1855,1205,1859,513,1859,417,1855,321,1846,160,1822"/>
<area shape="rect" href="class_r_g_w_env.html#ade7d5d23b881eabbb09bce4ac164ea08" title=" " alt="" coords="247,1893,347,1920"/>
<area shape="poly" title=" " alt="" coords="113,1817,217,1872,245,1885,243,1890,215,1877,110,1822"/>
<area shape="rect" href="rgw__crypt_8h.html#a01489bc791eb4d27b5ce7ca0915289be" title=" " alt="" coords="1146,1691,1261,1717"/>
<area shape="poly" title=" " alt="" coords="168,1803,513,1803,743,1803,801,1800,859,1794,972,1773,1072,1746,1150,1720,1152,1725,1074,1751,973,1778,859,1799,801,1806,743,1808,513,1808,168,1808"/>
<area shape="rect" href="rgw__kms_8cc.html#a4a4d58b805a968e04ab2f2cb64d808a3" title=" " alt="" coords="231,1084,363,1127"/>
<area shape="poly" title=" " alt="" coords="89,1791,282,1141,287,1142,95,1792"/>
<area shape="rect" href="rgw__kms_8cc.html#ac931fb4d1ef5634b8a46ee1a8cb3b9d8" title=" " alt="" coords="231,1683,363,1725"/>
<area shape="poly" title=" " alt="" coords="115,1789,236,1730,238,1735,117,1794"/>
<area shape="rect" href="rgw__common_8cc.html#a123a44f16b39b0789809ab850f53441e" title=" " alt="" coords="216,1944,378,1971"/>
<area shape="poly" title=" " alt="" coords="100,1818,147,1872,180,1903,217,1930,227,1935,225,1940,214,1934,177,1907,143,1876,96,1821"/>
<area shape="rect" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5" title=" " alt="" coords="1691,1092,1734,1119"/>
<area shape="poly" title=" " alt="" coords="1229,940,1285,970,1353,1002,1412,1022,1459,1033,1566,1059,1677,1092,1676,1097,1565,1064,1457,1038,1410,1027,1351,1006,1282,975,1227,944"/>
<area shape="rect" href="rgw__crypt_8cc.html#a401e875501c036ea3b55291eeb4dc956" title=" " alt="" coords="1392,965,1526,992"/>
<area shape="poly" title=" " alt="" coords="1275,939,1378,960,1377,965,1274,945"/>
<area shape="poly" title=" " alt="" coords="1518,990,1567,1008,1630,1044,1683,1080,1680,1085,1627,1048,1565,1013,1516,995"/>
<area shape="rect" href="rgw__common_8h.html#a47ecc49d73d32bd249865c3ed1bd902e" title=" " alt="" coords="466,1893,563,1920"/>
<area shape="poly" title=" " alt="" coords="347,1904,450,1904,450,1909,347,1909"/>
<area shape="poly" title=" " alt="" coords="361,1081,377,1075,425,1052,551,1019,762,970,974,924,1102,900,1203,893,1305,900,1437,921,1519,937,1567,951,1608,979,1644,1013,1696,1078,1692,1081,1640,1017,1605,983,1565,956,1517,942,1436,926,1304,905,1203,898,1102,905,975,929,763,975,552,1024,427,1057,379,1080,363,1086"/>
<area shape="poly" title=" " alt="" coords="311,1126,356,1209,390,1259,428,1306,539,1419,587,1462,634,1499,684,1532,740,1564,883,1632,946,1656,1012,1674,1131,1694,1130,1700,1011,1679,945,1661,881,1637,737,1569,681,1537,631,1504,584,1466,535,1423,424,1310,385,1263,352,1212,306,1129"/>
<area shape="rect" href="class_k_m_s_context.html#a456caa9cdc82486f4289aecf067512a6" title=" " alt="" coords="438,1067,590,1093"/>
<area shape="poly" title=" " alt="" coords="363,1095,422,1088,423,1093,363,1100"/>
<area shape="rect" href="rgw__kms_8cc.html#a658270317bcf66d63065b1ba618fbb57" title=" " alt="" coords="897,583,1039,625"/>
<area shape="poly" title=" " alt="" coords="311,1082,359,1020,424,951,487,899,553,849,688,758,812,683,909,630,912,635,815,688,691,762,556,853,490,903,428,955,363,1024,316,1085"/>
<area shape="rect" href="rgw__kms_8cc.html#a60375ded1848f6557218dfa172fb3273" title=" " alt="" coords="882,1117,1054,1144"/>
<area shape="poly" title=" " alt="" coords="363,1105,866,1124,866,1130,363,1110"/>
<area shape="rect" href="rgw__kms_8cc.html#a98dfadea209db9d3f510813cce53552a" title=" " alt="" coords="426,965,602,992"/>
<area shape="poly" title=" " alt="" coords="321,1081,368,1045,425,1008,453,995,455,1000,427,1013,371,1049,325,1086"/>
<area shape="rect" href="rgw__kms_8cc.html#ad422decf30b06979e6699cc45ea27dff" title=" " alt="" coords="449,1253,580,1296"/>
<area shape="poly" title=" " alt="" coords="327,1125,475,1241,471,1245,324,1129"/>
<area shape="poly" title=" " alt="" coords="1039,612,1102,626,1173,650,1244,685,1277,707,1306,733,1319,749,1326,766,1330,797,1334,828,1341,842,1354,857,1380,875,1406,883,1431,886,1456,885,1509,885,1537,892,1567,907,1613,946,1651,992,1680,1038,1701,1077,1696,1079,1676,1041,1647,995,1609,950,1564,912,1535,897,1508,890,1456,891,1431,891,1405,889,1378,879,1351,861,1337,845,1329,830,1325,798,1321,767,1314,752,1302,736,1274,711,1241,689,1171,655,1101,631,1038,617"/>
<area shape="rect" href="classrgw_1_1keystone_1_1_service.html#a9e7d874cb71bd97f167704520bc23b8d" title=" " alt="" coords="1102,409,1304,452"/>
<area shape="poly" title=" " alt="" coords="997,580,1159,459,1162,463,1000,584"/>
<area shape="rect" href="rgw__kms_8cc.html#a294fe847c5f903a71b7e71f5ad94bd58" title=" " alt="" coords="1369,544,1549,571"/>
<area shape="poly" title=" " alt="" coords="1039,595,1353,565,1354,570,1039,600"/>
<area shape="poly" title=" " alt="" coords="1212,452,1228,509,1256,588,1297,672,1324,713,1354,749,1381,772,1407,787,1458,804,1511,819,1539,834,1568,857,1615,912,1654,973,1684,1031,1703,1077,1698,1079,1679,1033,1650,975,1611,915,1564,861,1536,839,1509,824,1457,809,1405,792,1378,776,1350,753,1320,716,1293,675,1251,590,1222,511,1207,453"/>
<area shape="rect" href="class_r_g_w_h_t_t_p_client.html#a8d4aa112a185bf07f192bea69b3c31fb" title=" " alt="" coords="1628,411,1797,453"/>
<area shape="poly" title=" " alt="" coords="1218,407,1241,379,1272,348,1309,318,1351,295,1410,276,1459,269,1508,275,1567,295,1604,315,1638,341,1689,396,1685,400,1634,345,1601,319,1565,300,1507,281,1459,274,1411,281,1353,300,1312,322,1275,352,1245,383,1222,411"/>
<area shape="rect" href="classrgw_1_1keystone_1_1_barbican_token_request_ver2.html#ae1c5def8f9f19d826d916e0cb33b1314" title=" " alt="" coords="1361,125,1557,168"/>
<area shape="poly" title=" " alt="" coords="1209,408,1227,361,1256,299,1297,234,1322,204,1351,178,1356,174,1359,178,1354,182,1326,208,1301,237,1261,301,1232,363,1214,410"/>
<area shape="rect" href="classrgw_1_1keystone_1_1_barbican_token_request_ver3.html#acb220cb7ab33b76e76074cad3ad28e4d" title=" " alt="" coords="1361,192,1557,235"/>
<area shape="poly" title=" " alt="" coords="1215,408,1268,332,1307,289,1351,251,1370,240,1373,244,1354,255,1310,293,1272,335,1219,411"/>
<area shape="rect" href="class_r_g_w_h_t_t_p_client.html#a8d89f57ce810c5320411cf2ddb01f339" title=" " alt="" coords="1640,477,1785,520"/>
<area shape="poly" title=" " alt="" coords="1305,441,1625,484,1624,490,1304,447"/>
<area shape="rect" href="classrgw_1_1keystone_1_1_service_1_1_r_g_w_keystone_h_t_t_p_transceiver.html#a8bfa3dab71b1249408c632a457dd667f" title=" " alt="" coords="1352,309,1566,368"/>
<area shape="poly" title=" " alt="" coords="1264,406,1360,371,1362,376,1265,411"/>
<area shape="rect" href="classrgw_1_1keystone_1_1_token_envelope.html#a8c36783039ceb0dfd71aca33ddb1991e" title=" " alt="" coords="1360,59,1558,101"/>
<area shape="poly" title=" " alt="" coords="1206,408,1220,350,1247,270,1266,227,1289,185,1317,146,1351,111,1355,108,1358,112,1354,115,1322,149,1294,188,1271,229,1252,272,1225,351,1211,410"/>
<area shape="rect" href="class_r_g_w_h_t_t_p_client.html#a38de0b9ceefce30a6003b12d562e425d" title=" " alt="" coords="1626,544,1799,571"/>
<area shape="poly" title=" " alt="" coords="1260,450,1353,481,1473,509,1622,538,1621,543,1471,514,1352,487,1258,455"/>
<area shape="rect" href="class_r_g_w_h_t_t_p_transceiver.html#abd8c12eaff4e72b22336e632826663fd" title=" " alt="" coords="1637,645,1788,688"/>
<area shape="poly" title=" " alt="" coords="1221,451,1275,516,1312,551,1354,580,1391,593,1460,610,1622,646,1621,651,1458,615,1390,598,1351,585,1309,555,1271,520,1217,454"/>
<area shape="rect" href="class_r_g_w_h_t_t_p_client.html#a340f32b14fc826866fe476175ceb2ed8" title=" " alt="" coords="1640,712,1785,755"/>
<area shape="poly" title=" " alt="" coords="1216,451,1235,492,1265,543,1305,595,1328,618,1354,638,1382,654,1407,663,1455,670,1505,671,1566,681,1633,704,1632,709,1565,687,1504,677,1454,675,1406,668,1380,658,1351,642,1325,622,1301,599,1260,546,1230,495,1211,454"/>
<area shape="rect" href="class_r_g_w_h_t_t_p_client.html#a400e4705e23c98a4f0d2f931939327aa" title=" " alt="" coords="1376,392,1542,419"/>
<area shape="poly" title=" " alt="" coords="1305,418,1360,412,1361,418,1305,423"/>
<area shape="rect" href="rgw__admin_8cc.html#ab596b9e1a1fc78e98a4d13a66578b658" title=" " alt="" coords="1665,175,1760,201"/>
<area shape="poly" title=" " alt="" coords="1558,160,1650,175,1650,181,1557,165"/>
<area shape="poly" title=" " alt="" coords="1676,176,1669,166,1674,156,1688,150,1712,148,1738,151,1752,157,1749,162,1737,156,1712,153,1690,155,1677,160,1675,165,1680,173"/>
<area shape="poly" title=" " alt="" coords="1557,201,1649,192,1650,197,1558,206"/>
<area shape="poly" title=" " alt="" coords="1556,100,1568,112,1577,130,1584,159,1594,241,1605,468,1609,698,1612,784,1616,834,1635,904,1658,972,1701,1077,1696,1079,1653,974,1629,906,1611,835,1606,784,1604,698,1599,468,1589,242,1579,160,1572,132,1564,115,1552,104"/>
<area shape="rect" href="classrgw_1_1keystone_1_1_token_envelope.html#a94ae7136833f9fbe49a94b87f29bb20c" title=" " alt="" coords="1614,72,1811,115"/>
<area shape="poly" title=" " alt="" coords="1558,83,1598,85,1598,90,1558,88"/>
<area shape="rect" href="classrgw_1_1keystone_1_1_token_envelope.html#a207cdd22accbe89bfc3a1e514405702d" title=" " alt="" coords="1614,5,1811,48"/>
<area shape="poly" title=" " alt="" coords="1558,57,1598,48,1599,53,1559,62"/>
<area shape="rect" href="class_r_g_w_h_t_t_p.html#adfb34d20b834f501e738cacd37dc8586" title=" " alt="" coords="1859,544,1998,571"/>
<area shape="poly" title=" " alt="" coords="1799,555,1844,555,1844,560,1799,560"/>
<area shape="poly" title=" " alt="" coords="1477,569,1521,617,1546,649,1568,683,1587,723,1596,757,1616,834,1703,1077,1698,1078,1611,835,1591,758,1582,725,1563,685,1542,652,1517,620,1473,573"/>
<area shape="poly" title=" " alt="" coords="1479,541,1538,504,1612,463,1626,457,1628,462,1615,468,1540,508,1482,546"/>
<area shape="poly" title=" " alt="" coords="1519,541,1624,516,1626,521,1520,546"/>
<area shape="poly" title=" " alt="" coords="1550,555,1611,555,1611,560,1550,560"/>
<area shape="rect" href="rgw__kms_8cc.html#a242cecf75d47f64b1de73858c54fb6f9" title=" " alt="" coords="1672,595,1753,621"/>
<area shape="poly" title=" " alt="" coords="1530,569,1657,594,1656,600,1529,574"/>
<area shape="poly" title=" " alt="" coords="974,1116,992,1083,1020,1041,1057,996,1100,958,1124,945,1126,950,1104,962,1060,1000,1024,1044,996,1086,978,1118"/>
<area shape="poly" title=" " alt="" coords="1055,1125,1675,1104,1676,1109,1055,1130"/>
<area shape="poly" title=" " alt="" coords="982,1143,1017,1193,1056,1259,1070,1292,1076,1320,1085,1345,1104,1373,1128,1396,1151,1413,1197,1433,1246,1448,1306,1474,1516,1589,1676,1680,1673,1685,1513,1594,1303,1478,1244,1453,1195,1438,1149,1417,1125,1400,1100,1376,1080,1348,1071,1321,1065,1294,1052,1261,1012,1196,977,1146"/>
<area shape="poly" title=" " alt="" coords="553,990,627,1015,729,1044,846,1068,907,1075,967,1077,1205,1077,1341,1080,1476,1086,1676,1100,1675,1105,1475,1091,1341,1085,1204,1083,966,1083,906,1080,845,1073,728,1049,626,1020,551,995"/>
<area shape="rect" href="class_kmip_secret_engine.html#af470de24e1bab66aaac51220f1ca090a" title=" " alt="" coords="650,915,834,941"/>
<area shape="poly" title=" " alt="" coords="577,962,663,943,665,948,578,967"/>
<area shape="rect" href="class_kmip_get_the_key.html#ada7b968d9d16753c64783aad66738b27" title=" " alt="" coords="897,731,1039,773"/>
<area shape="poly" title=" " alt="" coords="803,912,832,894,843,881,850,868,855,840,861,812,868,798,880,783,883,781,887,784,884,787,872,801,866,814,861,841,855,869,848,884,835,898,806,916"/>
<area shape="rect" href="class_kmip_get_the_key.html#a99705d31109442d0ecf6c9c2787982ec" title=" " alt="" coords="889,664,1047,707"/>
<area shape="poly" title=" " alt="" coords="806,912,832,894,847,872,854,851,855,808,856,763,864,740,880,717,882,715,885,718,884,720,869,742,862,764,861,808,860,852,852,875,836,898,809,916"/>
<area shape="rect" href="class_kmip_get_the_key.html#a28480acd93c965658b869eeb44c68b07" title=" " alt="" coords="890,797,1046,840"/>
<area shape="poly" title=" " alt="" coords="790,912,832,894,856,876,880,856,901,845,903,850,883,861,860,880,835,898,793,917"/>
<area shape="rect" href="class_r_g_w_k_m_i_p_transceiver.html#af2edb8523bef2f3b6c4ee04b8cb0b0d3" title=" " alt="" coords="1128,747,1278,789"/>
<area shape="poly" title=" " alt="" coords="1040,754,1113,759,1112,765,1039,760"/>
<area shape="poly" title=" " alt="" coords="1032,705,1127,739,1125,744,1030,710"/>
<area shape="poly" title=" " alt="" coords="579,1250,656,1227,752,1204,859,1186,966,1179,1204,1179,1342,1171,1477,1153,1593,1131,1676,1112,1677,1117,1594,1136,1477,1158,1343,1176,1205,1184,967,1184,859,1191,753,1209,658,1233,580,1255"/>
<area shape="rect" href="rgw__kms_8cc.html#a26511610566afff47ea1d35f85222496" title=" " alt="" coords="671,1339,813,1381"/>
<area shape="poly" title=" " alt="" coords="574,1294,670,1330,668,1335,573,1299"/>
<area shape="poly" title=" " alt="" coords="757,1380,777,1413,806,1452,841,1492,883,1524,939,1553,987,1566,1102,1576,1349,1577,1565,1574,1590,1544,1614,1496,1636,1436,1656,1369,1686,1234,1704,1133,1709,1134,1691,1235,1661,1370,1641,1437,1619,1498,1594,1547,1567,1578,1349,1583,1102,1581,986,1571,937,1558,880,1529,838,1495,802,1455,773,1416,753,1383"/>
<area shape="poly" title=" " alt="" coords="754,1381,773,1420,801,1471,838,1523,883,1569,906,1584,926,1594,966,1604,1007,1612,1055,1632,1080,1651,1103,1670,1133,1683,1131,1688,1101,1674,1076,1656,1053,1637,1005,1618,964,1609,925,1599,903,1589,880,1573,834,1527,796,1474,768,1423,750,1383"/>
<area shape="rect" href="class_s_s_e_context.html#ac0affb02e7b7f1a40b3bb115858a993d" title=" " alt="" coords="1649,796,1776,823"/>
<area shape="poly" title=" " alt="" coords="749,1337,790,1250,822,1190,862,1126,911,1060,966,998,1030,943,1064,920,1101,900,1170,872,1242,849,1316,832,1389,820,1525,807,1634,804,1634,810,1525,813,1389,826,1317,838,1243,854,1171,877,1103,905,1067,925,1033,948,970,1002,915,1064,867,1129,827,1193,795,1252,754,1340"/>
<area shape="rect" href="rgw__kms_8cc.html#a18f34abcef8bf2ff8ab2180171385010" title=" " alt="" coords="895,1339,1041,1381"/>
<area shape="poly" title=" " alt="" coords="813,1357,879,1357,879,1363,813,1363"/>
<area shape="rect" href="class_kv_secret_engine.html#a174d36cd18421dbf233c41579ae612f9" title=" " alt="" coords="1120,1219,1287,1245"/>
<area shape="poly" title=" " alt="" coords="763,1336,814,1295,846,1274,881,1258,937,1241,995,1231,1104,1225,1104,1230,995,1236,938,1246,883,1262,849,1279,817,1299,767,1340"/>
<area shape="rect" href="class_transit_secret_engine.html#af9602ebec8e8e75b118010006d6f76ae" title=" " alt="" coords="899,1272,1037,1315"/>
<area shape="poly" title=" " alt="" coords="813,1337,883,1315,885,1321,814,1342"/>
<area shape="rect" href="class_transit_secret_engine.html#ac57ec387b020eb0885ebf96c1808dfd2" title=" " alt="" coords="884,1472,1052,1515"/>
<area shape="poly" title=" " alt="" coords="771,1380,821,1418,883,1458,893,1463,891,1468,880,1462,818,1423,767,1384"/>
<area shape="rect" href="class_s_s_e_context.html#ab9b4ec20f13120fff3192a872a7b71ce" title=" " alt="" coords="899,1405,1037,1448"/>
<area shape="poly" title=" " alt="" coords="814,1378,885,1400,884,1405,813,1383"/>
<area shape="poly" title=" " alt="" coords="1287,1233,1349,1232,1420,1228,1493,1216,1565,1197,1598,1183,1630,1165,1682,1127,1686,1131,1633,1169,1601,1188,1567,1203,1495,1222,1420,1233,1349,1238,1287,1239"/>
<area shape="rect" href="class_vault_secret_engine.html#a81860dab7305221bd54acd685b6c5337" title=" " alt="" coords="1390,1404,1528,1447"/>
<area shape="poly" title=" " alt="" coords="1225,1244,1306,1306,1419,1392,1416,1397,1303,1310,1221,1248"/>
<area shape="rect" href="class_vault_secret_engine.html#a21ddaddc49189fb68733634ce8d26467" title=" " alt="" coords="1390,696,1528,739"/>
<area shape="poly" title=" " alt="" coords="1210,1217,1302,1047,1381,883,1439,752,1444,754,1385,885,1307,1049,1215,1220"/>
<area shape="poly" title=" " alt="" coords="1501,1401,1534,1380,1564,1354,1609,1297,1647,1236,1677,1178,1697,1132,1702,1134,1682,1180,1652,1238,1614,1300,1568,1358,1537,1385,1504,1406"/>
<area shape="poly" title=" " alt="" coords="1482,1445,1691,1678,1687,1681,1478,1449"/>
<area shape="poly" title=" " alt="" coords="1529,731,1549,742,1568,755,1587,780,1607,816,1646,906,1681,1001,1705,1076,1700,1078,1676,1003,1641,908,1602,818,1582,783,1564,759,1547,746,1527,736"/>
<area shape="poly" title=" " alt="" coords="1479,694,1520,644,1563,581,1577,548,1582,520,1590,492,1612,464,1615,461,1619,465,1616,467,1595,494,1587,521,1582,550,1568,584,1525,647,1483,697"/>
<area shape="poly" title=" " alt="" coords="1475,694,1551,599,1612,530,1625,522,1628,527,1615,534,1555,603,1479,697"/>
<area shape="poly" title=" " alt="" coords="1477,694,1534,637,1571,606,1612,580,1626,574,1628,579,1615,585,1574,611,1537,641,1481,698"/>
<area shape="poly" title=" " alt="" coords="1528,701,1621,682,1622,687,1529,706"/>
<area shape="poly" title=" " alt="" coords="1528,719,1625,725,1624,730,1528,724"/>
<area shape="poly" title=" " alt="" coords="1493,693,1548,661,1613,631,1656,617,1658,622,1615,636,1551,666,1496,698"/>
<area shape="poly" title=" " alt="" coords="1521,737,1660,788,1658,793,1519,742"/>
<area shape="poly" title=" " alt="" coords="1037,1290,1164,1287,1317,1279,1463,1264,1521,1253,1565,1239,1603,1216,1638,1187,1690,1129,1694,1133,1642,1191,1607,1221,1567,1244,1523,1258,1463,1269,1318,1285,1164,1293,1037,1296"/>
<area shape="poly" title=" " alt="" coords="1039,1311,1056,1325,1074,1350,1085,1374,1089,1397,1091,1421,1092,1469,1095,1496,1104,1526,1145,1610,1186,1676,1182,1679,1141,1612,1100,1528,1090,1497,1086,1469,1085,1421,1084,1398,1080,1376,1070,1353,1052,1328,1036,1315"/>
<area shape="poly" title=" " alt="" coords="1034,1313,1056,1324,1070,1337,1079,1350,1089,1362,1103,1372,1171,1399,1243,1415,1313,1423,1375,1425,1375,1431,1312,1428,1242,1420,1170,1404,1101,1377,1085,1366,1075,1353,1066,1341,1052,1329,1032,1317"/>
<area shape="poly" title=" " alt="" coords="983,1270,1017,1219,1052,1155,1064,1113,1068,1077,1075,1044,1085,1026,1100,1009,1126,990,1151,980,1176,976,1200,976,1250,974,1276,967,1303,951,1328,930,1351,906,1391,852,1421,798,1442,752,1447,754,1426,800,1395,854,1355,909,1332,934,1306,956,1278,972,1251,979,1200,981,1176,981,1152,985,1128,994,1104,1013,1089,1029,1080,1046,1073,1078,1069,1114,1056,1157,1021,1221,987,1273"/>
<area shape="rect" href="rgw__kms_8cc.html#ae5268633f9996eea42716e2de4037b13" title=" " alt="" coords="1131,1488,1276,1515"/>
<area shape="poly" title=" " alt="" coords="1039,1312,1056,1325,1070,1344,1077,1362,1080,1398,1083,1433,1090,1450,1104,1467,1118,1478,1115,1483,1100,1471,1086,1453,1078,1435,1075,1399,1072,1363,1065,1346,1052,1329,1036,1316"/>
<area shape="rect" href="class_transit_secret_engine.html#ab2fd53b89319468f6450fe21e7ffd6b1" title=" " alt="" coords="1134,1320,1272,1363"/>
<area shape="poly" title=" " alt="" coords="1038,1305,1119,1322,1118,1327,1037,1310"/>
<area shape="poly" title=" " alt="" coords="1273,1347,1338,1349,1413,1344,1492,1329,1529,1316,1564,1299,1588,1283,1611,1263,1648,1218,1677,1171,1697,1132,1702,1134,1682,1174,1653,1221,1614,1267,1592,1287,1567,1304,1531,1321,1493,1334,1414,1350,1338,1354,1273,1352"/>
<area shape="poly" title=" " alt="" coords="1271,1361,1378,1396,1376,1401,1270,1366"/>
<area shape="poly" title=" " alt="" coords="1240,1318,1274,1291,1302,1256,1322,1215,1332,1178,1336,1143,1336,1110,1335,1039,1339,999,1350,953,1369,896,1392,841,1436,751,1441,753,1397,843,1374,898,1355,954,1344,1000,1341,1040,1342,1110,1341,1144,1337,1179,1327,1216,1307,1259,1278,1295,1243,1322"/>
<area shape="poly" title=" " alt="" coords="1014,1513,1056,1530,1103,1543,1240,1566,1299,1570,1353,1568,1405,1557,1456,1536,1509,1503,1564,1457,1597,1420,1625,1378,1648,1332,1667,1286,1692,1200,1705,1134,1710,1135,1697,1201,1672,1288,1653,1335,1630,1380,1602,1423,1568,1461,1512,1507,1459,1540,1407,1562,1354,1573,1299,1575,1239,1571,1101,1548,1054,1535,1012,1518"/>
<area shape="poly" title=" " alt="" coords="993,1513,1104,1619,1174,1679,1171,1683,1100,1623,989,1517"/>
<area shape="poly" title=" " alt="" coords="1038,1513,1096,1526,1163,1535,1234,1536,1270,1532,1304,1524,1337,1511,1368,1494,1421,1455,1424,1459,1371,1498,1339,1516,1305,1529,1270,1537,1235,1542,1163,1541,1095,1531,1037,1518"/>
<area shape="poly" title=" " alt="" coords="1040,1470,1052,1458,1072,1427,1082,1397,1084,1368,1082,1338,1079,1276,1085,1242,1100,1205,1123,1169,1146,1142,1196,1103,1248,1066,1275,1042,1302,1009,1347,941,1386,871,1441,752,1446,754,1391,873,1352,944,1306,1012,1278,1045,1251,1070,1199,1107,1150,1146,1127,1172,1104,1208,1090,1244,1085,1277,1088,1338,1090,1368,1087,1398,1077,1429,1056,1462,1043,1473"/>
<area shape="poly" title=" " alt="" coords="1052,1494,1115,1496,1115,1501,1052,1499"/>
<area shape="poly" title=" " alt="" coords="1030,1469,1053,1458,1115,1415,1167,1371,1170,1375,1118,1419,1055,1462,1033,1474"/>
<area shape="poly" title=" " alt="" coords="362,1686,426,1676,514,1672,603,1676,710,1686,802,1702,957,1736,1032,1749,1111,1754,1200,1747,1304,1727,1387,1705,1451,1682,1479,1666,1506,1646,1564,1585,1602,1529,1633,1467,1658,1402,1676,1337,1699,1219,1707,1134,1712,1135,1704,1220,1681,1339,1663,1404,1638,1469,1607,1531,1568,1588,1509,1650,1482,1671,1453,1687,1388,1710,1305,1732,1200,1753,1111,1759,1031,1754,956,1742,801,1707,709,1691,602,1681,514,1677,426,1681,363,1691"/>
<area shape="poly" title=" " alt="" coords="363,1717,426,1727,525,1734,626,1737,823,1733,998,1722,1130,1710,1130,1715,999,1728,824,1739,626,1742,525,1739,426,1732,362,1722"/>
<area shape="poly" title=" " alt="" coords="307,1681,493,1309,498,1311,311,1683"/>
<area shape="rect" href="class_sse_s3_context.html#aad26c7b18dccb1932a77b8a817db2797" title=" " alt="" coords="433,1691,595,1717"/>
<area shape="poly" title=" " alt="" coords="363,1701,417,1701,417,1707,363,1707"/>
</map>
</div>
<div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="rgw__crypt_8cc_a053d14367e9beb6222476b4732e17923_icgraph.png" border="0" usemap="#argw__crypt_8cc_a053d14367e9beb6222476b4732e17923_icgraph" alt=""/></div>
<map name="argw__crypt_8cc_a053d14367e9beb6222476b4732e17923_icgraph" id="argw__crypt_8cc_a053d14367e9beb6222476b4732e17923_icgraph">
<area shape="rect" title=" " alt="" coords="206,80,368,107"/>
<area shape="rect" href="class_r_g_w_get_obj___obj_store___s3.html#a479f22556a7b691fe272a2038b64fb14" title=" " alt="" coords="5,5,158,48"/>
<area shape="poly" title=" " alt="" coords="228,77,149,51,150,46,230,72"/>
<area shape="rect" href="class_r_g_w_put_obj___obj_store___s3.html#ae4da9c4b53db6f4e31ade32c3034e988" title=" " alt="" coords="6,72,157,115"/>
<area shape="poly" title=" " alt="" coords="190,96,158,96,158,91,190,91"/>
<area shape="rect" href="class_r_g_w_put_obj___obj_store___s3.html#aac43ef6294ae6f90061fa06e560dfc0a" title=" " alt="" coords="6,139,157,181"/>
<area shape="poly" title=" " alt="" coords="230,115,150,141,149,136,228,109"/>
</map>
</div>

</div>
</div>
<a id="a644bbfaccd952cddc83967e91f89caf5" name="a644bbfaccd952cddc83967e91f89caf5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a644bbfaccd952cddc83967e91f89caf5">&#9670;&#160;</a></span>rgw_s3_prepare_encrypt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rgw_s3_prepare_encrypt </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structreq__state.html">req_state</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::map&lt; std::string, ceph::bufferlist &gt; &amp;&#160;</td>
          <td class="paramname"><em>attrs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::unique_ptr&lt; <a class="el" href="class_block_crypt.html">BlockCrypt</a> &gt; *&#160;</td>
          <td class="paramname"><em>block_crypt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::map&lt; std::string, std::string &gt; &amp;&#160;</td>
          <td class="paramname"><em>crypt_http_responses</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="rgw__crypt_8cc_source.html">rgw_crypt.cc</a> 파일의 <a class="el" href="rgw__crypt_8cc_source.html#l00992">992</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  996</span>{</div>
<div class="line"><span class="lineno">  997</span>  <span class="keywordtype">int</span> res = 0;</div>
<div class="line"><span class="lineno">  998</span>  <a class="code hl_struct" href="struct_crypt_attributes.html">CryptAttributes</a> crypt_attributes { s };</div>
<div class="line"><span class="lineno">  999</span>  crypt_http_responses.clear();</div>
<div class="line"><span class="lineno"> 1000</span> </div>
<div class="line"><span class="lineno"> 1001</span>  {</div>
<div class="line"><span class="lineno"> 1002</span>    std::string_view req_sse_ca =</div>
<div class="line"><span class="lineno"> 1003</span>        crypt_attributes.get(<a class="code hl_enumvalue" href="rgw__crypt_8cc.html#a5edee254b500b534fe3bda4a70baab9ba9ab6040ef7c846b7aec289cea0f02d86">X_AMZ_SERVER_SIDE_ENCRYPTION_CUSTOMER_ALGORITHM</a>);</div>
<div class="line"><span class="lineno"> 1004</span>    <span class="keywordflow">if</span> (! req_sse_ca.empty()) {</div>
<div class="line"><span class="lineno"> 1005</span>      <span class="keywordflow">if</span> (req_sse_ca != <span class="stringliteral">&quot;AES256&quot;</span>) {</div>
<div class="line"><span class="lineno"> 1006</span>        ldpp_dout(s, 5) &lt;&lt; <span class="stringliteral">&quot;ERROR: Invalid value for header &quot;</span></div>
<div class="line"><span class="lineno"> 1007</span>                         &lt;&lt; <span class="stringliteral">&quot;x-amz-server-side-encryption-customer-algorithm&quot;</span></div>
<div class="line"><span class="lineno"> 1008</span>                         &lt;&lt; dendl;</div>
<div class="line"><span class="lineno"> 1009</span>        s-&gt;<a class="code hl_variable" href="structreq__state.html#aa4ee7f575b1d568e2a7396e472013441">err</a>.<a class="code hl_variable" href="structrgw__err.html#ab3c8a498deb94929b307b9130edd6506">message</a> = <span class="stringliteral">&quot;The requested encryption algorithm is not valid, must be AES256.&quot;</span>;</div>
<div class="line"><span class="lineno"> 1010</span>        <span class="keywordflow">return</span> -<a class="code hl_define" href="rgw__common_8h.html#a3f638196986549a20c3499230453db74">ERR_INVALID_ENCRYPTION_ALGORITHM</a>;</div>
<div class="line"><span class="lineno"> 1011</span>      }</div>
<div class="line"><span class="lineno"> 1012</span>      <span class="keywordflow">if</span> (s-&gt;<a class="code hl_variable" href="structreq__state.html#a98ff7b0fe2e9f0a932493c80c89280dc">cct</a>-&gt;_conf-&gt;rgw_crypt_require_ssl &amp;&amp;</div>
<div class="line"><span class="lineno"> 1013</span>          !<a class="code hl_function" href="rgw__common_8cc.html#a123a44f16b39b0789809ab850f53441e">rgw_transport_is_secure</a>(s-&gt;<a class="code hl_variable" href="structreq__state.html#a98ff7b0fe2e9f0a932493c80c89280dc">cct</a>, *s-&gt;<a class="code hl_variable" href="structreq__state.html#a494770c97c157bfcf918251e31ad2fdc">info</a>.<a class="code hl_variable" href="structreq__info.html#a8d7bb9e0a8699b24f8b3c511617685a6">env</a>)) {</div>
<div class="line"><span class="lineno"> 1014</span>        ldpp_dout(s, 5) &lt;&lt; <span class="stringliteral">&quot;ERROR: Insecure request, rgw_crypt_require_ssl is set&quot;</span> &lt;&lt; dendl;</div>
<div class="line"><span class="lineno"> 1015</span>        <span class="keywordflow">return</span> -<a class="code hl_define" href="rgw__common_8h.html#ad9afe8cb242cef9c7e4cbd064c12aa83">ERR_INVALID_REQUEST</a>;</div>
<div class="line"><span class="lineno"> 1016</span>      }</div>
<div class="line"><span class="lineno"> 1017</span> </div>
<div class="line"><span class="lineno"> 1018</span>      std::string key_bin;</div>
<div class="line"><span class="lineno"> 1019</span>      <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno"> 1020</span>        key_bin = <a class="code hl_function" href="namespacergw.html#ac234a4895c4d28112daeda8c2b8ec205">from_base64</a>(</div>
<div class="line"><span class="lineno"> 1021</span>          crypt_attributes.get(<a class="code hl_enumvalue" href="rgw__crypt_8cc.html#a5edee254b500b534fe3bda4a70baab9babd7c89df5c52fc5b8754984b74d398e2">X_AMZ_SERVER_SIDE_ENCRYPTION_CUSTOMER_KEY</a>) );</div>
<div class="line"><span class="lineno"> 1022</span>      } <span class="keywordflow">catch</span> (...) {</div>
<div class="line"><span class="lineno"> 1023</span>        ldpp_dout(s, 5) &lt;&lt; <span class="stringliteral">&quot;ERROR: rgw_s3_prepare_encrypt invalid encryption &quot;</span></div>
<div class="line"><span class="lineno"> 1024</span>                         &lt;&lt; <span class="stringliteral">&quot;key which contains character that is not base64 encoded.&quot;</span></div>
<div class="line"><span class="lineno"> 1025</span>                         &lt;&lt; dendl;</div>
<div class="line"><span class="lineno"> 1026</span>        s-&gt;<a class="code hl_variable" href="structreq__state.html#aa4ee7f575b1d568e2a7396e472013441">err</a>.<a class="code hl_variable" href="structrgw__err.html#ab3c8a498deb94929b307b9130edd6506">message</a> = <span class="stringliteral">&quot;Requests specifying Server Side Encryption with Customer &quot;</span></div>
<div class="line"><span class="lineno"> 1027</span>                         <span class="stringliteral">&quot;provided keys must provide an appropriate secret key.&quot;</span>;</div>
<div class="line"><span class="lineno"> 1028</span>        <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><span class="lineno"> 1029</span>      }</div>
<div class="line"><span class="lineno"> 1030</span> </div>
<div class="line"><span class="lineno"> 1031</span>      <span class="keywordflow">if</span> (key_bin.size() != <a class="code hl_variable" href="class_a_e_s__256___c_b_c.html#ab8c25a04996a772c94fe7887f635a0c2">AES_256_CBC::AES_256_KEYSIZE</a>) {</div>
<div class="line"><span class="lineno"> 1032</span>        ldpp_dout(s, 5) &lt;&lt; <span class="stringliteral">&quot;ERROR: invalid encryption key size&quot;</span> &lt;&lt; dendl;</div>
<div class="line"><span class="lineno"> 1033</span>        s-&gt;<a class="code hl_variable" href="structreq__state.html#aa4ee7f575b1d568e2a7396e472013441">err</a>.<a class="code hl_variable" href="structrgw__err.html#ab3c8a498deb94929b307b9130edd6506">message</a> = <span class="stringliteral">&quot;Requests specifying Server Side Encryption with Customer &quot;</span></div>
<div class="line"><span class="lineno"> 1034</span>                         <span class="stringliteral">&quot;provided keys must provide an appropriate secret key.&quot;</span>;</div>
<div class="line"><span class="lineno"> 1035</span>        <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><span class="lineno"> 1036</span>      }</div>
<div class="line"><span class="lineno"> 1037</span> </div>
<div class="line"><span class="lineno"> 1038</span>      std::string_view keymd5 =</div>
<div class="line"><span class="lineno"> 1039</span>          crypt_attributes.get(<a class="code hl_enumvalue" href="rgw__crypt_8cc.html#a5edee254b500b534fe3bda4a70baab9ba4bec56c93b7525eed4bf0966ce2a7d69">X_AMZ_SERVER_SIDE_ENCRYPTION_CUSTOMER_KEY_MD5</a>);</div>
<div class="line"><span class="lineno"> 1040</span> </div>
<div class="line"><span class="lineno"> 1041</span>      std::string keymd5_bin;</div>
<div class="line"><span class="lineno"> 1042</span>      <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno"> 1043</span>        keymd5_bin = <a class="code hl_function" href="namespacergw.html#ac234a4895c4d28112daeda8c2b8ec205">from_base64</a>(keymd5);</div>
<div class="line"><span class="lineno"> 1044</span>      } <span class="keywordflow">catch</span> (...) {</div>
<div class="line"><span class="lineno"> 1045</span>        ldpp_dout(s, 5) &lt;&lt; <span class="stringliteral">&quot;ERROR: rgw_s3_prepare_encrypt invalid encryption key &quot;</span></div>
<div class="line"><span class="lineno"> 1046</span>                         &lt;&lt; <span class="stringliteral">&quot;md5 which contains character that is not base64 encoded.&quot;</span></div>
<div class="line"><span class="lineno"> 1047</span>                         &lt;&lt; dendl;</div>
<div class="line"><span class="lineno"> 1048</span>        s-&gt;<a class="code hl_variable" href="structreq__state.html#aa4ee7f575b1d568e2a7396e472013441">err</a>.<a class="code hl_variable" href="structrgw__err.html#ab3c8a498deb94929b307b9130edd6506">message</a> = <span class="stringliteral">&quot;Requests specifying Server Side Encryption with Customer &quot;</span></div>
<div class="line"><span class="lineno"> 1049</span>                         <span class="stringliteral">&quot;provided keys must provide an appropriate secret key md5.&quot;</span>;</div>
<div class="line"><span class="lineno"> 1050</span>        <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><span class="lineno"> 1051</span>      }</div>
<div class="line"><span class="lineno"> 1052</span> </div>
<div class="line"><span class="lineno"> 1053</span>      <span class="keywordflow">if</span> (keymd5_bin.size() != CEPH_CRYPTO_MD5_DIGESTSIZE) {</div>
<div class="line"><span class="lineno"> 1054</span>        ldpp_dout(s, 5) &lt;&lt; <span class="stringliteral">&quot;ERROR: Invalid key md5 size&quot;</span> &lt;&lt; dendl;</div>
<div class="line"><span class="lineno"> 1055</span>        s-&gt;<a class="code hl_variable" href="structreq__state.html#aa4ee7f575b1d568e2a7396e472013441">err</a>.<a class="code hl_variable" href="structrgw__err.html#ab3c8a498deb94929b307b9130edd6506">message</a> = <span class="stringliteral">&quot;Requests specifying Server Side Encryption with Customer &quot;</span></div>
<div class="line"><span class="lineno"> 1056</span>                         <span class="stringliteral">&quot;provided keys must provide an appropriate secret key md5.&quot;</span>;</div>
<div class="line"><span class="lineno"> 1057</span>        <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><span class="lineno"> 1058</span>      }</div>
<div class="line"><span class="lineno"> 1059</span> </div>
<div class="line"><span class="lineno"> 1060</span>      MD5 key_hash;</div>
<div class="line"><span class="lineno"> 1061</span>      <span class="comment">// Allow use of MD5 digest in FIPS mode for non-cryptographic purposes</span></div>
<div class="line"><span class="lineno"> 1062</span>      key_hash.SetFlags(EVP_MD_CTX_FLAG_NON_FIPS_ALLOW);</div>
<div class="line"><span class="lineno"> 1063</span>      <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> key_hash_res[CEPH_CRYPTO_MD5_DIGESTSIZE];</div>
<div class="line"><span class="lineno"> 1064</span>      key_hash.Update(<span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span><span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(key_bin.c_str()), key_bin.size());</div>
<div class="line"><span class="lineno"> 1065</span>      key_hash.Final(key_hash_res);</div>
<div class="line"><span class="lineno"> 1066</span> </div>
<div class="line"><span class="lineno"> 1067</span>      <span class="keywordflow">if</span> (memcmp(key_hash_res, keymd5_bin.c_str(), CEPH_CRYPTO_MD5_DIGESTSIZE) != 0) {</div>
<div class="line"><span class="lineno"> 1068</span>        ldpp_dout(s, 5) &lt;&lt; <span class="stringliteral">&quot;ERROR: Invalid key md5 hash&quot;</span> &lt;&lt; dendl;</div>
<div class="line"><span class="lineno"> 1069</span>        s-&gt;<a class="code hl_variable" href="structreq__state.html#aa4ee7f575b1d568e2a7396e472013441">err</a>.<a class="code hl_variable" href="structrgw__err.html#ab3c8a498deb94929b307b9130edd6506">message</a> = <span class="stringliteral">&quot;The calculated MD5 hash of the key did not match the hash that was provided.&quot;</span>;</div>
<div class="line"><span class="lineno"> 1070</span>        <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><span class="lineno"> 1071</span>      }</div>
<div class="line"><span class="lineno"> 1072</span> </div>
<div class="line"><span class="lineno"> 1073</span>      <a class="code hl_function" href="rgw__crypt_8h.html#a6420673c4b1427cbc659f864c43caa76">set_attr</a>(attrs, <a class="code hl_define" href="rgw__common_8h.html#a5808b2eabc90655feacc05657c938c7a">RGW_ATTR_CRYPT_MODE</a>, <span class="stringliteral">&quot;SSE-C-AES256&quot;</span>);</div>
<div class="line"><span class="lineno"> 1074</span>      <a class="code hl_function" href="rgw__crypt_8h.html#a6420673c4b1427cbc659f864c43caa76">set_attr</a>(attrs, <a class="code hl_define" href="rgw__common_8h.html#a8c43cec1bbf10c276303edb1621b2e57">RGW_ATTR_CRYPT_KEYMD5</a>, keymd5_bin);</div>
<div class="line"><span class="lineno"> 1075</span> </div>
<div class="line"><span class="lineno"> 1076</span>      <span class="keywordflow">if</span> (block_crypt) {</div>
<div class="line"><span class="lineno"> 1077</span>        <span class="keyword">auto</span> aes = std::unique_ptr&lt;AES_256_CBC&gt;(<span class="keyword">new</span> <a class="code hl_class" href="class_a_e_s__256___c_b_c.html">AES_256_CBC</a>(s, s-&gt;<a class="code hl_variable" href="structreq__state.html#a98ff7b0fe2e9f0a932493c80c89280dc">cct</a>));</div>
<div class="line"><span class="lineno"> 1078</span>        aes-&gt;set_key(<span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span>uint8_t*<span class="keyword">&gt;</span>(key_bin.c_str()), <a class="code hl_variable" href="rgw__crypt_8h.html#a41a559733e886bbe9c771acec4888a7e">AES_256_KEYSIZE</a>);</div>
<div class="line"><span class="lineno"> 1079</span>        *block_crypt = std::move(aes);</div>
<div class="line"><span class="lineno"> 1080</span>      }</div>
<div class="line"><span class="lineno"> 1081</span> </div>
<div class="line"><span class="lineno"> 1082</span>      crypt_http_responses[<span class="stringliteral">&quot;x-amz-server-side-encryption-customer-algorithm&quot;</span>] = <span class="stringliteral">&quot;AES256&quot;</span>;</div>
<div class="line"><span class="lineno"> 1083</span>      crypt_http_responses[<span class="stringliteral">&quot;x-amz-server-side-encryption-customer-key-MD5&quot;</span>] = std::string(keymd5);</div>
<div class="line"><span class="lineno"> 1084</span>      <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 1085</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1086</span>      std::string_view customer_key =</div>
<div class="line"><span class="lineno"> 1087</span>          crypt_attributes.get(<a class="code hl_enumvalue" href="rgw__crypt_8cc.html#a5edee254b500b534fe3bda4a70baab9babd7c89df5c52fc5b8754984b74d398e2">X_AMZ_SERVER_SIDE_ENCRYPTION_CUSTOMER_KEY</a>);</div>
<div class="line"><span class="lineno"> 1088</span>      <span class="keywordflow">if</span> (!customer_key.empty()) {</div>
<div class="line"><span class="lineno"> 1089</span>        ldpp_dout(s, 5) &lt;&lt; <span class="stringliteral">&quot;ERROR: SSE-C encryption request is missing the header &quot;</span></div>
<div class="line"><span class="lineno"> 1090</span>                         &lt;&lt; <span class="stringliteral">&quot;x-amz-server-side-encryption-customer-algorithm&quot;</span></div>
<div class="line"><span class="lineno"> 1091</span>                         &lt;&lt; dendl;</div>
<div class="line"><span class="lineno"> 1092</span>        s-&gt;<a class="code hl_variable" href="structreq__state.html#aa4ee7f575b1d568e2a7396e472013441">err</a>.<a class="code hl_variable" href="structrgw__err.html#ab3c8a498deb94929b307b9130edd6506">message</a> = <span class="stringliteral">&quot;Requests specifying Server Side Encryption with Customer &quot;</span></div>
<div class="line"><span class="lineno"> 1093</span>                         <span class="stringliteral">&quot;provided keys must provide a valid encryption algorithm.&quot;</span>;</div>
<div class="line"><span class="lineno"> 1094</span>        <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><span class="lineno"> 1095</span>      }</div>
<div class="line"><span class="lineno"> 1096</span> </div>
<div class="line"><span class="lineno"> 1097</span>      std::string_view customer_key_md5 =</div>
<div class="line"><span class="lineno"> 1098</span>          crypt_attributes.get(<a class="code hl_enumvalue" href="rgw__crypt_8cc.html#a5edee254b500b534fe3bda4a70baab9ba4bec56c93b7525eed4bf0966ce2a7d69">X_AMZ_SERVER_SIDE_ENCRYPTION_CUSTOMER_KEY_MD5</a>);</div>
<div class="line"><span class="lineno"> 1099</span>      <span class="keywordflow">if</span> (!customer_key_md5.empty()) {</div>
<div class="line"><span class="lineno"> 1100</span>        ldpp_dout(s, 5) &lt;&lt; <span class="stringliteral">&quot;ERROR: SSE-C encryption request is missing the header &quot;</span></div>
<div class="line"><span class="lineno"> 1101</span>                         &lt;&lt; <span class="stringliteral">&quot;x-amz-server-side-encryption-customer-algorithm&quot;</span></div>
<div class="line"><span class="lineno"> 1102</span>                         &lt;&lt; dendl;</div>
<div class="line"><span class="lineno"> 1103</span>        s-&gt;<a class="code hl_variable" href="structreq__state.html#aa4ee7f575b1d568e2a7396e472013441">err</a>.<a class="code hl_variable" href="structrgw__err.html#ab3c8a498deb94929b307b9130edd6506">message</a> = <span class="stringliteral">&quot;Requests specifying Server Side Encryption with Customer &quot;</span></div>
<div class="line"><span class="lineno"> 1104</span>                         <span class="stringliteral">&quot;provided keys must provide a valid encryption algorithm.&quot;</span>;</div>
<div class="line"><span class="lineno"> 1105</span>        <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><span class="lineno"> 1106</span>      }</div>
<div class="line"><span class="lineno"> 1107</span>    }</div>
<div class="line"><span class="lineno"> 1108</span> </div>
<div class="line"><span class="lineno"> 1109</span>    <span class="comment">/* AMAZON server side encryption with KMS (key management service) */</span></div>
<div class="line"><span class="lineno"> 1110</span>    std::string_view req_sse =</div>
<div class="line"><span class="lineno"> 1111</span>        crypt_attributes.get(<a class="code hl_enumvalue" href="rgw__crypt_8cc.html#a5edee254b500b534fe3bda4a70baab9ba85b78d0b1581ae53d50268227acddc7f">X_AMZ_SERVER_SIDE_ENCRYPTION</a>);</div>
<div class="line"><span class="lineno"> 1112</span>    <span class="keywordflow">if</span> (! req_sse.empty()) {</div>
<div class="line"><span class="lineno"> 1113</span> </div>
<div class="line"><span class="lineno"> 1114</span>      <span class="keywordflow">if</span> (s-&gt;<a class="code hl_variable" href="structreq__state.html#a98ff7b0fe2e9f0a932493c80c89280dc">cct</a>-&gt;_conf-&gt;rgw_crypt_require_ssl &amp;&amp;</div>
<div class="line"><span class="lineno"> 1115</span>          !<a class="code hl_function" href="rgw__common_8cc.html#a123a44f16b39b0789809ab850f53441e">rgw_transport_is_secure</a>(s-&gt;<a class="code hl_variable" href="structreq__state.html#a98ff7b0fe2e9f0a932493c80c89280dc">cct</a>, *s-&gt;<a class="code hl_variable" href="structreq__state.html#a494770c97c157bfcf918251e31ad2fdc">info</a>.<a class="code hl_variable" href="structreq__info.html#a8d7bb9e0a8699b24f8b3c511617685a6">env</a>)) {</div>
<div class="line"><span class="lineno"> 1116</span>        ldpp_dout(s, 5) &lt;&lt; <span class="stringliteral">&quot;ERROR: insecure request, rgw_crypt_require_ssl is set&quot;</span> &lt;&lt; dendl;</div>
<div class="line"><span class="lineno"> 1117</span>        <span class="keywordflow">return</span> -<a class="code hl_define" href="rgw__common_8h.html#ad9afe8cb242cef9c7e4cbd064c12aa83">ERR_INVALID_REQUEST</a>;</div>
<div class="line"><span class="lineno"> 1118</span>      }</div>
<div class="line"><span class="lineno"> 1119</span> </div>
<div class="line"><span class="lineno"> 1120</span>      <span class="keywordflow">if</span> (req_sse == <span class="stringliteral">&quot;aws:kms&quot;</span>) {</div>
<div class="line"><span class="lineno"> 1121</span>        std::string_view <a class="code hl_enumeration" href="namespacergw_1_1lua.html#a5652b6711c456135043c799876aec7c1">context</a> =</div>
<div class="line"><span class="lineno"> 1122</span>          crypt_attributes.get(<a class="code hl_enumvalue" href="rgw__crypt_8cc.html#a5edee254b500b534fe3bda4a70baab9ba32173a05c37efc378b2aa9e0bc1268e9">X_AMZ_SERVER_SIDE_ENCRYPTION_CONTEXT</a>);</div>
<div class="line"><span class="lineno"> 1123</span>        std::string cooked_context;</div>
<div class="line"><span class="lineno"> 1124</span>        <span class="keywordflow">if</span> ((res = <a class="code hl_function" href="rgw__crypt_8cc.html#ad74b8dce6c7052201e0d2bc8fbe6b0c3">make_canonical_context</a>(s, context, cooked_context)))</div>
<div class="line"><span class="lineno"> 1125</span>          <span class="keywordflow">return</span> res;</div>
<div class="line"><span class="lineno"> 1126</span>        std::string_view key_id =</div>
<div class="line"><span class="lineno"> 1127</span>          crypt_attributes.get(<a class="code hl_enumvalue" href="rgw__crypt_8cc.html#a5edee254b500b534fe3bda4a70baab9bab1ae78349474479389f72ae0043d77b5">X_AMZ_SERVER_SIDE_ENCRYPTION_AWS_KMS_KEY_ID</a>);</div>
<div class="line"><span class="lineno"> 1128</span>        <span class="keywordflow">if</span> (key_id.empty()) {</div>
<div class="line"><span class="lineno"> 1129</span>          ldpp_dout(s, 5) &lt;&lt; <span class="stringliteral">&quot;ERROR: not provide a valid key id&quot;</span> &lt;&lt; dendl;</div>
<div class="line"><span class="lineno"> 1130</span>          s-&gt;<a class="code hl_variable" href="structreq__state.html#aa4ee7f575b1d568e2a7396e472013441">err</a>.<a class="code hl_variable" href="structrgw__err.html#ab3c8a498deb94929b307b9130edd6506">message</a> = <span class="stringliteral">&quot;Server Side Encryption with KMS managed key requires &quot;</span></div>
<div class="line"><span class="lineno"> 1131</span>            <span class="stringliteral">&quot;HTTP header x-amz-server-side-encryption-aws-kms-key-id&quot;</span>;</div>
<div class="line"><span class="lineno"> 1132</span>          <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><span class="lineno"> 1133</span>        }</div>
<div class="line"><span class="lineno"> 1134</span>        <span class="comment">/* try to retrieve actual key */</span></div>
<div class="line"><span class="lineno"> 1135</span>        std::string key_selector = <a class="code hl_function" href="rgw__crypt_8cc.html#a2e1e24b9370416b6b9e95a69986220b3">create_random_key_selector</a>(s-&gt;<a class="code hl_variable" href="structreq__state.html#a98ff7b0fe2e9f0a932493c80c89280dc">cct</a>);</div>
<div class="line"><span class="lineno"> 1136</span>        <a class="code hl_function" href="rgw__crypt_8h.html#a6420673c4b1427cbc659f864c43caa76">set_attr</a>(attrs, <a class="code hl_define" href="rgw__common_8h.html#a5808b2eabc90655feacc05657c938c7a">RGW_ATTR_CRYPT_MODE</a>, <span class="stringliteral">&quot;SSE-KMS&quot;</span>);</div>
<div class="line"><span class="lineno"> 1137</span>        <a class="code hl_function" href="rgw__crypt_8h.html#a6420673c4b1427cbc659f864c43caa76">set_attr</a>(attrs, <a class="code hl_define" href="rgw__common_8h.html#a94260c0d2b4e544842cddd8205b587d5">RGW_ATTR_CRYPT_KEYID</a>, key_id);</div>
<div class="line"><span class="lineno"> 1138</span>        <a class="code hl_function" href="rgw__crypt_8h.html#a6420673c4b1427cbc659f864c43caa76">set_attr</a>(attrs, <a class="code hl_define" href="rgw__common_8h.html#a4d7f613b0465a549a2e5a5de8dbd3175">RGW_ATTR_CRYPT_KEYSEL</a>, key_selector);</div>
<div class="line"><span class="lineno"> 1139</span>        <a class="code hl_function" href="rgw__crypt_8h.html#a6420673c4b1427cbc659f864c43caa76">set_attr</a>(attrs, <a class="code hl_define" href="rgw__common_8h.html#af5dc2b7fd74de52a7ad2f3efd34abf25">RGW_ATTR_CRYPT_CONTEXT</a>, cooked_context);</div>
<div class="line"><span class="lineno"> 1140</span>        std::string actual_key;</div>
<div class="line"><span class="lineno"> 1141</span>        res = <a class="code hl_function" href="rgw__kms_8cc.html#a5de03a7bb46cb5aa3ae77b1c93672527">make_actual_key_from_kms</a>(s, s-&gt;<a class="code hl_variable" href="structreq__state.html#a98ff7b0fe2e9f0a932493c80c89280dc">cct</a>, attrs, actual_key);</div>
<div class="line"><span class="lineno"> 1142</span>        <span class="keywordflow">if</span> (res != 0) {</div>
<div class="line"><span class="lineno"> 1143</span>          ldpp_dout(s, 5) &lt;&lt; <span class="stringliteral">&quot;ERROR: failed to retrieve actual key from key_id: &quot;</span> &lt;&lt; key_id &lt;&lt; dendl;</div>
<div class="line"><span class="lineno"> 1144</span>          s-&gt;<a class="code hl_variable" href="structreq__state.html#aa4ee7f575b1d568e2a7396e472013441">err</a>.<a class="code hl_variable" href="structrgw__err.html#ab3c8a498deb94929b307b9130edd6506">message</a> = <span class="stringliteral">&quot;Failed to retrieve the actual key, kms-keyid: &quot;</span> + std::string(key_id);</div>
<div class="line"><span class="lineno"> 1145</span>          <span class="keywordflow">return</span> res;</div>
<div class="line"><span class="lineno"> 1146</span>        }</div>
<div class="line"><span class="lineno"> 1147</span>        <span class="keywordflow">if</span> (actual_key.size() != <a class="code hl_variable" href="rgw__crypt_8h.html#a41a559733e886bbe9c771acec4888a7e">AES_256_KEYSIZE</a>) {</div>
<div class="line"><span class="lineno"> 1148</span>          ldpp_dout(s, 5) &lt;&lt; <span class="stringliteral">&quot;ERROR: key obtained from key_id:&quot;</span> &lt;&lt;</div>
<div class="line"><span class="lineno"> 1149</span>            key_id &lt;&lt; <span class="stringliteral">&quot; is not 256 bit size&quot;</span> &lt;&lt; dendl;</div>
<div class="line"><span class="lineno"> 1150</span>          s-&gt;<a class="code hl_variable" href="structreq__state.html#aa4ee7f575b1d568e2a7396e472013441">err</a>.<a class="code hl_variable" href="structrgw__err.html#ab3c8a498deb94929b307b9130edd6506">message</a> = <span class="stringliteral">&quot;KMS provided an invalid key for the given kms-keyid.&quot;</span>;</div>
<div class="line"><span class="lineno"> 1151</span>          <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><span class="lineno"> 1152</span>        }</div>
<div class="line"><span class="lineno"> 1153</span> </div>
<div class="line"><span class="lineno"> 1154</span>        <span class="keywordflow">if</span> (block_crypt) {</div>
<div class="line"><span class="lineno"> 1155</span>          <span class="keyword">auto</span> aes = std::unique_ptr&lt;AES_256_CBC&gt;(<span class="keyword">new</span> <a class="code hl_class" href="class_a_e_s__256___c_b_c.html">AES_256_CBC</a>(s, s-&gt;<a class="code hl_variable" href="structreq__state.html#a98ff7b0fe2e9f0a932493c80c89280dc">cct</a>));</div>
<div class="line"><span class="lineno"> 1156</span>          aes-&gt;set_key(<span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span>uint8_t*<span class="keyword">&gt;</span>(actual_key.c_str()), <a class="code hl_variable" href="rgw__crypt_8h.html#a41a559733e886bbe9c771acec4888a7e">AES_256_KEYSIZE</a>);</div>
<div class="line"><span class="lineno"> 1157</span>          *block_crypt = std::move(aes);</div>
<div class="line"><span class="lineno"> 1158</span>        }</div>
<div class="line"><span class="lineno"> 1159</span>        ::ceph::crypto::zeroize_for_security(actual_key.data(), actual_key.length());</div>
<div class="line"><span class="lineno"> 1160</span> </div>
<div class="line"><span class="lineno"> 1161</span>        crypt_http_responses[<span class="stringliteral">&quot;x-amz-server-side-encryption&quot;</span>] = <span class="stringliteral">&quot;aws:kms&quot;</span>;</div>
<div class="line"><span class="lineno"> 1162</span>        crypt_http_responses[<span class="stringliteral">&quot;x-amz-server-side-encryption-aws-kms-key-id&quot;</span>] = std::string(key_id);</div>
<div class="line"><span class="lineno"> 1163</span>        crypt_http_responses[<span class="stringliteral">&quot;x-amz-server-side-encryption-context&quot;</span>] = std::move(cooked_context);</div>
<div class="line"><span class="lineno"> 1164</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 1165</span>      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (req_sse == <span class="stringliteral">&quot;AES256&quot;</span>) {</div>
<div class="line"><span class="lineno"> 1166</span>        <span class="comment">/* SSE-S3: fall through to logic to look for vault or test key */</span></div>
<div class="line"><span class="lineno"> 1167</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1168</span>        ldpp_dout(s, 5) &lt;&lt; <span class="stringliteral">&quot;ERROR: Invalid value for header x-amz-server-side-encryption&quot;</span></div>
<div class="line"><span class="lineno"> 1169</span>                         &lt;&lt; dendl;</div>
<div class="line"><span class="lineno"> 1170</span>        s-&gt;<a class="code hl_variable" href="structreq__state.html#aa4ee7f575b1d568e2a7396e472013441">err</a>.<a class="code hl_variable" href="structrgw__err.html#ab3c8a498deb94929b307b9130edd6506">message</a> = <span class="stringliteral">&quot;Server Side Encryption with KMS managed key requires &quot;</span></div>
<div class="line"><span class="lineno"> 1171</span>          <span class="stringliteral">&quot;HTTP header x-amz-server-side-encryption : aws:kms or AES256&quot;</span>;</div>
<div class="line"><span class="lineno"> 1172</span>        <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><span class="lineno"> 1173</span>      }</div>
<div class="line"><span class="lineno"> 1174</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1175</span>  <span class="comment">/*no encryption*/</span></div>
<div class="line"><span class="lineno"> 1176</span>      <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 1177</span>    }</div>
<div class="line"><span class="lineno"> 1178</span> </div>
<div class="line"><span class="lineno"> 1179</span>    <span class="comment">/* from here on we are only handling SSE-S3 (req_sse==&quot;AES256&quot;) */</span></div>
<div class="line"><span class="lineno"> 1180</span> </div>
<div class="line"><span class="lineno"> 1181</span>    <span class="keywordflow">if</span> (s-&gt;<a class="code hl_variable" href="structreq__state.html#a98ff7b0fe2e9f0a932493c80c89280dc">cct</a>-&gt;_conf-&gt;rgw_crypt_sse_s3_backend == <span class="stringliteral">&quot;vault&quot;</span>) {</div>
<div class="line"><span class="lineno"> 1182</span>      ldpp_dout(s, 5) &lt;&lt; <span class="stringliteral">&quot;RGW_ATTR_BUCKET_ENCRYPTION ALGO: &quot;</span></div>
<div class="line"><span class="lineno"> 1183</span>              &lt;&lt;  req_sse &lt;&lt; dendl;</div>
<div class="line"><span class="lineno"> 1184</span>      std::string_view <a class="code hl_enumeration" href="namespacergw_1_1lua.html#a5652b6711c456135043c799876aec7c1">context</a> = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><span class="lineno"> 1185</span>      std::string cooked_context;</div>
<div class="line"><span class="lineno"> 1186</span>      <span class="keywordflow">if</span> ((res = <a class="code hl_function" href="rgw__crypt_8cc.html#ad74b8dce6c7052201e0d2bc8fbe6b0c3">make_canonical_context</a>(s, context, cooked_context)))</div>
<div class="line"><span class="lineno"> 1187</span>        <span class="keywordflow">return</span> res;</div>
<div class="line"><span class="lineno"> 1188</span> </div>
<div class="line"><span class="lineno"> 1189</span>      std::string key_id;</div>
<div class="line"><span class="lineno"> 1190</span>      res = <a class="code hl_function" href="rgw__crypt_8cc.html#a7a44f988f8c3329733f06e72d263666a">get_sse_s3_bucket_key</a>(s, key_id);</div>
<div class="line"><span class="lineno"> 1191</span>      <span class="keywordflow">if</span> (res != 0) {</div>
<div class="line"><span class="lineno"> 1192</span>        <span class="keywordflow">return</span> res;</div>
<div class="line"><span class="lineno"> 1193</span>      }</div>
<div class="line"><span class="lineno"> 1194</span>      std::string key_selector = <a class="code hl_function" href="rgw__crypt_8cc.html#a2e1e24b9370416b6b9e95a69986220b3">create_random_key_selector</a>(s-&gt;<a class="code hl_variable" href="structreq__state.html#a98ff7b0fe2e9f0a932493c80c89280dc">cct</a>);</div>
<div class="line"><span class="lineno"> 1195</span> </div>
<div class="line"><span class="lineno"> 1196</span>      <a class="code hl_function" href="rgw__crypt_8h.html#a6420673c4b1427cbc659f864c43caa76">set_attr</a>(attrs, <a class="code hl_define" href="rgw__common_8h.html#a4d7f613b0465a549a2e5a5de8dbd3175">RGW_ATTR_CRYPT_KEYSEL</a>, key_selector);</div>
<div class="line"><span class="lineno"> 1197</span>      <a class="code hl_function" href="rgw__crypt_8h.html#a6420673c4b1427cbc659f864c43caa76">set_attr</a>(attrs, <a class="code hl_define" href="rgw__common_8h.html#af5dc2b7fd74de52a7ad2f3efd34abf25">RGW_ATTR_CRYPT_CONTEXT</a>, cooked_context);</div>
<div class="line"><span class="lineno"> 1198</span>      <a class="code hl_function" href="rgw__crypt_8h.html#a6420673c4b1427cbc659f864c43caa76">set_attr</a>(attrs, <a class="code hl_define" href="rgw__common_8h.html#a5808b2eabc90655feacc05657c938c7a">RGW_ATTR_CRYPT_MODE</a>, <span class="stringliteral">&quot;AES256&quot;</span>);</div>
<div class="line"><span class="lineno"> 1199</span>      <a class="code hl_function" href="rgw__crypt_8h.html#a6420673c4b1427cbc659f864c43caa76">set_attr</a>(attrs, <a class="code hl_define" href="rgw__common_8h.html#a94260c0d2b4e544842cddd8205b587d5">RGW_ATTR_CRYPT_KEYID</a>, key_id);</div>
<div class="line"><span class="lineno"> 1200</span>      std::string actual_key;</div>
<div class="line"><span class="lineno"> 1201</span>      res = <a class="code hl_function" href="rgw__kms_8cc.html#a1a2098e456a124e359612b9326e76d22">make_actual_key_from_sse_s3</a>(s, s-&gt;<a class="code hl_variable" href="structreq__state.html#a98ff7b0fe2e9f0a932493c80c89280dc">cct</a>, attrs, actual_key);</div>
<div class="line"><span class="lineno"> 1202</span>      <span class="keywordflow">if</span> (res != 0) {</div>
<div class="line"><span class="lineno"> 1203</span>        ldpp_dout(s, 5) &lt;&lt; <span class="stringliteral">&quot;ERROR: failed to retrieve actual key from key_id: &quot;</span> &lt;&lt; key_id &lt;&lt; dendl;</div>
<div class="line"><span class="lineno"> 1204</span>        s-&gt;<a class="code hl_variable" href="structreq__state.html#aa4ee7f575b1d568e2a7396e472013441">err</a>.<a class="code hl_variable" href="structrgw__err.html#ab3c8a498deb94929b307b9130edd6506">message</a> = <span class="stringliteral">&quot;Failed to retrieve the actual key&quot;</span>;</div>
<div class="line"><span class="lineno"> 1205</span>        <span class="keywordflow">return</span> res;</div>
<div class="line"><span class="lineno"> 1206</span>      }</div>
<div class="line"><span class="lineno"> 1207</span>      <span class="keywordflow">if</span> (actual_key.size() != <a class="code hl_variable" href="rgw__crypt_8h.html#a41a559733e886bbe9c771acec4888a7e">AES_256_KEYSIZE</a>) {</div>
<div class="line"><span class="lineno"> 1208</span>        ldpp_dout(s, 5) &lt;&lt; <span class="stringliteral">&quot;ERROR: key obtained from key_id:&quot;</span> &lt;&lt;</div>
<div class="line"><span class="lineno"> 1209</span>                       key_id &lt;&lt; <span class="stringliteral">&quot; is not 256 bit size&quot;</span> &lt;&lt; dendl;</div>
<div class="line"><span class="lineno"> 1210</span>        s-&gt;<a class="code hl_variable" href="structreq__state.html#aa4ee7f575b1d568e2a7396e472013441">err</a>.<a class="code hl_variable" href="structrgw__err.html#ab3c8a498deb94929b307b9130edd6506">message</a> = <span class="stringliteral">&quot;SSE-S3 provided an invalid key for the given keyid.&quot;</span>;</div>
<div class="line"><span class="lineno"> 1211</span>        <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><span class="lineno"> 1212</span>      }</div>
<div class="line"><span class="lineno"> 1213</span> </div>
<div class="line"><span class="lineno"> 1214</span>      <span class="keywordflow">if</span> (block_crypt) {</div>
<div class="line"><span class="lineno"> 1215</span>        <span class="keyword">auto</span> aes = std::unique_ptr&lt;AES_256_CBC&gt;(<span class="keyword">new</span> <a class="code hl_class" href="class_a_e_s__256___c_b_c.html">AES_256_CBC</a>(s, s-&gt;<a class="code hl_variable" href="structreq__state.html#a98ff7b0fe2e9f0a932493c80c89280dc">cct</a>));</div>
<div class="line"><span class="lineno"> 1216</span>        aes-&gt;set_key(<span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span>uint8_t*<span class="keyword">&gt;</span>(actual_key.c_str()), <a class="code hl_variable" href="rgw__crypt_8h.html#a41a559733e886bbe9c771acec4888a7e">AES_256_KEYSIZE</a>);</div>
<div class="line"><span class="lineno"> 1217</span>        *block_crypt = std::move(aes);</div>
<div class="line"><span class="lineno"> 1218</span>      }</div>
<div class="line"><span class="lineno"> 1219</span>      ::ceph::crypto::zeroize_for_security(actual_key.data(), actual_key.length());</div>
<div class="line"><span class="lineno"> 1220</span> </div>
<div class="line"><span class="lineno"> 1221</span>      crypt_http_responses[<span class="stringliteral">&quot;x-amz-server-side-encryption&quot;</span>] = <span class="stringliteral">&quot;AES256&quot;</span>;</div>
<div class="line"><span class="lineno"> 1222</span> </div>
<div class="line"><span class="lineno"> 1223</span>      <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 1224</span>    }</div>
<div class="line"><span class="lineno"> 1225</span> </div>
<div class="line"><span class="lineno"> 1226</span>    <span class="comment">/* SSE-S3 and no backend, check if there is a test key */</span></div>
<div class="line"><span class="lineno"> 1227</span>    <span class="keywordflow">if</span> (s-&gt;<a class="code hl_variable" href="structreq__state.html#a98ff7b0fe2e9f0a932493c80c89280dc">cct</a>-&gt;_conf-&gt;rgw_crypt_default_encryption_key != <span class="stringliteral">&quot;&quot;</span>) {</div>
<div class="line"><span class="lineno"> 1228</span>      std::string master_encryption_key;</div>
<div class="line"><span class="lineno"> 1229</span>      <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno"> 1230</span>        master_encryption_key = <a class="code hl_function" href="namespacergw.html#ac234a4895c4d28112daeda8c2b8ec205">from_base64</a>(s-&gt;<a class="code hl_variable" href="structreq__state.html#a98ff7b0fe2e9f0a932493c80c89280dc">cct</a>-&gt;_conf-&gt;rgw_crypt_default_encryption_key);</div>
<div class="line"><span class="lineno"> 1231</span>      } <span class="keywordflow">catch</span> (...) {</div>
<div class="line"><span class="lineno"> 1232</span>        ldpp_dout(s, 5) &lt;&lt; <span class="stringliteral">&quot;ERROR: rgw_s3_prepare_encrypt invalid default encryption key &quot;</span></div>
<div class="line"><span class="lineno"> 1233</span>                         &lt;&lt; <span class="stringliteral">&quot;which contains character that is not base64 encoded.&quot;</span></div>
<div class="line"><span class="lineno"> 1234</span>                         &lt;&lt; dendl;</div>
<div class="line"><span class="lineno"> 1235</span>        s-&gt;<a class="code hl_variable" href="structreq__state.html#aa4ee7f575b1d568e2a7396e472013441">err</a>.<a class="code hl_variable" href="structrgw__err.html#ab3c8a498deb94929b307b9130edd6506">message</a> = <span class="stringliteral">&quot;Requests specifying Server Side Encryption with Customer &quot;</span></div>
<div class="line"><span class="lineno"> 1236</span>                         <span class="stringliteral">&quot;provided keys must provide an appropriate secret key.&quot;</span>;</div>
<div class="line"><span class="lineno"> 1237</span>        <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><span class="lineno"> 1238</span>      }</div>
<div class="line"><span class="lineno"> 1239</span> </div>
<div class="line"><span class="lineno"> 1240</span>      <span class="keywordflow">if</span> (master_encryption_key.size() != 256 / 8) {</div>
<div class="line"><span class="lineno"> 1241</span>        ldpp_dout(s, 0) &lt;&lt; <span class="stringliteral">&quot;ERROR: failed to decode &#39;rgw crypt default encryption key&#39; to 256 bit string&quot;</span> &lt;&lt; dendl;</div>
<div class="line"><span class="lineno"> 1242</span>        <span class="comment">/* not an error to return; missing encryption does not inhibit processing */</span></div>
<div class="line"><span class="lineno"> 1243</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 1244</span>      }</div>
<div class="line"><span class="lineno"> 1245</span> </div>
<div class="line"><span class="lineno"> 1246</span>      <a class="code hl_function" href="rgw__crypt_8h.html#a6420673c4b1427cbc659f864c43caa76">set_attr</a>(attrs, <a class="code hl_define" href="rgw__common_8h.html#a5808b2eabc90655feacc05657c938c7a">RGW_ATTR_CRYPT_MODE</a>, <span class="stringliteral">&quot;RGW-AUTO&quot;</span>);</div>
<div class="line"><span class="lineno"> 1247</span>      std::string key_selector = <a class="code hl_function" href="rgw__crypt_8cc.html#a2e1e24b9370416b6b9e95a69986220b3">create_random_key_selector</a>(s-&gt;<a class="code hl_variable" href="structreq__state.html#a98ff7b0fe2e9f0a932493c80c89280dc">cct</a>);</div>
<div class="line"><span class="lineno"> 1248</span>      <a class="code hl_function" href="rgw__crypt_8h.html#a6420673c4b1427cbc659f864c43caa76">set_attr</a>(attrs, <a class="code hl_define" href="rgw__common_8h.html#a4d7f613b0465a549a2e5a5de8dbd3175">RGW_ATTR_CRYPT_KEYSEL</a>, key_selector);</div>
<div class="line"><span class="lineno"> 1249</span> </div>
<div class="line"><span class="lineno"> 1250</span>      uint8_t actual_key[<a class="code hl_variable" href="rgw__crypt_8h.html#a41a559733e886bbe9c771acec4888a7e">AES_256_KEYSIZE</a>];</div>
<div class="line"><span class="lineno"> 1251</span>      <span class="keywordflow">if</span> (<a class="code hl_function" href="rgw__crypt_8cc.html#ac7c06376b99620c995fb2e5726720fc0">AES_256_ECB_encrypt</a>(s, s-&gt;<a class="code hl_variable" href="structreq__state.html#a98ff7b0fe2e9f0a932493c80c89280dc">cct</a>,</div>
<div class="line"><span class="lineno"> 1252</span>                              <span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span>uint8_t*<span class="keyword">&gt;</span>(master_encryption_key.c_str()), <a class="code hl_variable" href="rgw__crypt_8h.html#a41a559733e886bbe9c771acec4888a7e">AES_256_KEYSIZE</a>,</div>
<div class="line"><span class="lineno"> 1253</span>                              <span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span>uint8_t*<span class="keyword">&gt;</span>(key_selector.c_str()),</div>
<div class="line"><span class="lineno"> 1254</span>                              actual_key, <a class="code hl_variable" href="rgw__crypt_8h.html#a41a559733e886bbe9c771acec4888a7e">AES_256_KEYSIZE</a>) != <span class="keyword">true</span>) {</div>
<div class="line"><span class="lineno"> 1255</span>        ::ceph::crypto::zeroize_for_security(actual_key, <span class="keyword">sizeof</span>(actual_key));</div>
<div class="line"><span class="lineno"> 1256</span>        <span class="keywordflow">return</span> -EIO;</div>
<div class="line"><span class="lineno"> 1257</span>      }</div>
<div class="line"><span class="lineno"> 1258</span>      <span class="keywordflow">if</span> (block_crypt) {</div>
<div class="line"><span class="lineno"> 1259</span>        <span class="keyword">auto</span> aes = std::unique_ptr&lt;AES_256_CBC&gt;(<span class="keyword">new</span> <a class="code hl_class" href="class_a_e_s__256___c_b_c.html">AES_256_CBC</a>(s, s-&gt;<a class="code hl_variable" href="structreq__state.html#a98ff7b0fe2e9f0a932493c80c89280dc">cct</a>));</div>
<div class="line"><span class="lineno"> 1260</span>        aes-&gt;set_key(<span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span>uint8_t*<span class="keyword">&gt;</span>(actual_key), <a class="code hl_variable" href="rgw__crypt_8h.html#a41a559733e886bbe9c771acec4888a7e">AES_256_KEYSIZE</a>);</div>
<div class="line"><span class="lineno"> 1261</span>        *block_crypt = std::move(aes);</div>
<div class="line"><span class="lineno"> 1262</span>      }</div>
<div class="line"><span class="lineno"> 1263</span>      ::ceph::crypto::zeroize_for_security(actual_key, <span class="keyword">sizeof</span>(actual_key));</div>
<div class="line"><span class="lineno"> 1264</span>      <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 1265</span>    }</div>
<div class="line"><span class="lineno"> 1266</span>    s-&gt;<a class="code hl_variable" href="structreq__state.html#aa4ee7f575b1d568e2a7396e472013441">err</a>.<a class="code hl_variable" href="structrgw__err.html#ab3c8a498deb94929b307b9130edd6506">message</a> = <span class="stringliteral">&quot;Request specifies Server Side Encryption &quot;</span></div>
<div class="line"><span class="lineno"> 1267</span>                     <span class="stringliteral">&quot;but server configuration does not support this.&quot;</span>;</div>
<div class="line"><span class="lineno"> 1268</span>    <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><span class="lineno"> 1269</span>  }</div>
<div class="line"><span class="lineno"> 1270</span>}</div>
<div class="ttc" id="argw__common_8h_html_af5dc2b7fd74de52a7ad2f3efd34abf25"><div class="ttname"><a href="rgw__common_8h.html#af5dc2b7fd74de52a7ad2f3efd34abf25">RGW_ATTR_CRYPT_CONTEXT</a></div><div class="ttdeci">#define RGW_ATTR_CRYPT_CONTEXT</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l00146">rgw_common.h:146</a></div></div>
<div class="ttc" id="argw__crypt_8cc_html_a2e1e24b9370416b6b9e95a69986220b3"><div class="ttname"><a href="rgw__crypt_8cc.html#a2e1e24b9370416b6b9e95a69986220b3">create_random_key_selector</a></div><div class="ttdeci">std::string create_random_key_selector(CephContext *const cct)</div><div class="ttdef"><b>Definition</b> <a href="rgw__crypt_8cc_source.html#l00846">rgw_crypt.cc:846</a></div></div>
<div class="ttc" id="argw__crypt_8cc_html_a7a44f988f8c3329733f06e72d263666a"><div class="ttname"><a href="rgw__crypt_8cc.html#a7a44f988f8c3329733f06e72d263666a">get_sse_s3_bucket_key</a></div><div class="ttdeci">static int get_sse_s3_bucket_key(req_state *s, std::string &amp;key_id)</div><div class="ttdef"><b>Definition</b> <a href="rgw__crypt_8cc_source.html#l00945">rgw_crypt.cc:945</a></div></div>
<div class="ttc" id="argw__crypt_8cc_html_ad74b8dce6c7052201e0d2bc8fbe6b0c3"><div class="ttname"><a href="rgw__crypt_8cc.html#ad74b8dce6c7052201e0d2bc8fbe6b0c3">make_canonical_context</a></div><div class="ttdeci">int make_canonical_context(struct req_state *s, std::string_view &amp;context, std::string &amp;cooked_context)</div><div class="ttdef"><b>Definition</b> <a href="rgw__crypt_8cc_source.html#l00220">rgw_crypt.cc:220</a></div></div>
<div class="ttc" id="argw__crypt_8h_html_a6420673c4b1427cbc659f864c43caa76"><div class="ttname"><a href="rgw__crypt_8h.html#a6420673c4b1427cbc659f864c43caa76">set_attr</a></div><div class="ttdeci">static void set_attr(std::map&lt; std::string, bufferlist &gt; &amp;attrs, const char *key, std::string_view value)</div><div class="ttdef"><b>Definition</b> <a href="rgw__crypt_8h_source.html#l00154">rgw_crypt.h:154</a></div></div>
<div class="ttc" id="argw__kms_8cc_html_a1a2098e456a124e359612b9326e76d22"><div class="ttname"><a href="rgw__kms_8cc.html#a1a2098e456a124e359612b9326e76d22">make_actual_key_from_sse_s3</a></div><div class="ttdeci">int make_actual_key_from_sse_s3(const DoutPrefixProvider *dpp, CephContext *cct, map&lt; string, bufferlist &gt; &amp;attrs, std::string &amp;actual_key)</div><div class="ttdef"><b>Definition</b> <a href="rgw__kms_8cc_source.html#l01217">rgw_kms.cc:1217</a></div></div>
<div class="ttc" id="argw__kms_8cc_html_a5de03a7bb46cb5aa3ae77b1c93672527"><div class="ttname"><a href="rgw__kms_8cc.html#a5de03a7bb46cb5aa3ae77b1c93672527">make_actual_key_from_kms</a></div><div class="ttdeci">int make_actual_key_from_kms(const DoutPrefixProvider *dpp, CephContext *cct, map&lt; string, bufferlist &gt; &amp;attrs, std::string &amp;actual_key)</div><div class="ttdef"><b>Definition</b> <a href="rgw__kms_8cc_source.html#l01186">rgw_kms.cc:1186</a></div></div>
<div class="ttc" id="astruct_crypt_attributes_html"><div class="ttname"><a href="struct_crypt_attributes.html">CryptAttributes</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__crypt_8cc_source.html#l00874">rgw_crypt.cc:874</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="rgw__crypt_8cc_a644bbfaccd952cddc83967e91f89caf5_cgraph.png" border="0" usemap="#argw__crypt_8cc_a644bbfaccd952cddc83967e91f89caf5_cgraph" alt=""/></div>
<map name="argw__crypt_8cc_a644bbfaccd952cddc83967e91f89caf5_cgraph" id="argw__crypt_8cc_a644bbfaccd952cddc83967e91f89caf5_cgraph">
<area shape="rect" title=" " alt="" coords="5,1295,168,1321"/>
<area shape="rect" href="rgw__crypt_8cc.html#ac7c06376b99620c995fb2e5726720fc0" title=" " alt="" coords="891,1472,1052,1499"/>
<area shape="poly" title=" " alt="" coords="130,1319,353,1387,502,1426,656,1457,770,1472,876,1480,875,1485,769,1477,655,1463,501,1431,352,1392,129,1325"/>
<area shape="rect" href="rgw__crypt_8cc.html#a2e1e24b9370416b6b9e95a69986220b3" title=" " alt="" coords="216,932,404,959"/>
<area shape="poly" title=" " alt="" coords="86,1294,95,1236,116,1151,132,1104,154,1058,181,1014,214,975,229,964,233,968,217,979,185,1017,158,1060,137,1106,121,1153,100,1237,92,1295"/>
<area shape="rect" href="namespacergw.html#ac234a4895c4d28112daeda8c2b8ec205" title=" " alt="" coords="910,1523,1033,1549"/>
<area shape="poly" title=" " alt="" coords="103,1320,150,1363,182,1386,217,1406,306,1441,400,1470,495,1492,589,1508,762,1527,894,1533,894,1539,761,1532,589,1513,494,1497,399,1475,305,1446,215,1410,179,1391,147,1367,99,1324"/>
<area shape="rect" href="rgw__crypt_8cc.html#a7a44f988f8c3329733f06e72d263666a" title=" " alt="" coords="662,56,825,83"/>
<area shape="poly" title=" " alt="" coords="85,1294,86,1229,93,1121,108,980,136,817,156,730,180,642,210,554,245,467,286,382,334,301,388,226,450,157,494,123,544,99,596,83,646,74,647,79,597,88,546,104,497,128,454,161,392,229,338,304,291,385,250,469,215,556,185,644,161,731,141,818,113,980,98,1121,92,1229,90,1294"/>
<area shape="rect" href="rgw__kms_8cc.html#a5de03a7bb46cb5aa3ae77b1c93672527" title=" " alt="" coords="216,1033,404,1060"/>
<area shape="poly" title=" " alt="" coords="97,1293,285,1070,289,1074,101,1296"/>
<area shape="rect" href="rgw__crypt_8h.html#a6420673c4b1427cbc659f864c43caa76" title=" " alt="" coords="1395,1219,1460,1245"/>
<area shape="poly" title=" " alt="" coords="168,1302,553,1283,1063,1255,1380,1233,1380,1238,1063,1260,554,1288,168,1307"/>
<area shape="rect" href="rgw__kms_8cc.html#a1a2098e456a124e359612b9326e76d22" title=" " alt="" coords="452,171,607,213"/>
<area shape="poly" title=" " alt="" coords="87,1294,97,1242,120,1168,136,1128,157,1088,183,1051,214,1019,239,1003,265,996,314,997,338,999,360,996,381,988,402,969,418,943,430,910,437,870,441,826,442,727,436,619,428,510,425,408,430,319,438,283,450,252,461,235,476,221,479,225,465,239,454,255,443,284,436,320,430,408,434,510,441,619,447,727,447,827,442,871,435,911,423,945,406,972,384,992,361,1002,338,1004,314,1003,265,1002,241,1008,217,1023,187,1055,162,1091,141,1130,125,1170,103,1243,92,1295"/>
<area shape="rect" href="rgw__crypt_8cc.html#ad74b8dce6c7052201e0d2bc8fbe6b0c3" title=" " alt="" coords="661,1672,826,1699"/>
<area shape="poly" title=" " alt="" coords="93,1321,106,1366,129,1429,166,1496,190,1526,217,1552,274,1571,395,1602,666,1665,665,1671,393,1607,273,1576,214,1557,186,1530,161,1499,124,1431,101,1368,88,1322"/>
<area shape="rect" href="rgw__common_8cc.html#a123a44f16b39b0789809ab850f53441e" title=" " alt="" coords="229,1624,391,1651"/>
<area shape="poly" title=" " alt="" coords="92,1321,102,1373,125,1449,141,1490,162,1531,187,1570,217,1603,233,1615,230,1619,214,1607,183,1573,157,1534,136,1493,119,1451,97,1374,87,1322"/>
<area shape="rect" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5" title=" " alt="" coords="1807,1008,1849,1035"/>
<area shape="poly" title=" " alt="" coords="1042,1497,1212,1526,1317,1540,1426,1550,1531,1555,1626,1552,1704,1538,1734,1526,1757,1511,1769,1498,1780,1479,1797,1428,1809,1365,1818,1294,1825,1154,1825,1050,1830,1050,1830,1154,1823,1295,1815,1365,1802,1429,1785,1481,1774,1501,1761,1515,1737,1531,1706,1543,1627,1557,1531,1561,1425,1556,1316,1545,1211,1531,1041,1502"/>
<area shape="rect" href="rgw__crypt_8cc.html#a401e875501c036ea3b55291eeb4dc956" title=" " alt="" coords="1361,1472,1494,1499"/>
<area shape="poly" title=" " alt="" coords="1052,1483,1345,1483,1345,1488,1052,1488"/>
<area shape="poly" title=" " alt="" coords="1490,1497,1553,1505,1625,1504,1661,1499,1696,1488,1728,1473,1757,1452,1776,1423,1792,1379,1803,1324,1812,1264,1821,1143,1824,1050,1829,1051,1827,1143,1817,1264,1808,1325,1797,1380,1781,1425,1761,1455,1731,1478,1698,1493,1662,1504,1625,1509,1553,1510,1489,1502"/>
<area shape="rect" href="rgw__kms_8cc.html#a087bd18f72d78135b349d958fcbfff96" title=" " alt="" coords="881,208,1062,235"/>
<area shape="poly" title=" " alt="" coords="767,81,939,197,936,202,764,85"/>
<area shape="rect" href="rgw__crypt_8cc.html#add5c64ea25e03aeb38706533c5f98ca8" title=" " alt="" coords="906,5,1037,32"/>
<area shape="poly" title=" " alt="" coords="806,53,893,33,894,39,808,58"/>
<area shape="rect" href="rgw__crypt_8cc.html#a314d096a1d1963c887425d4913690130" title=" " alt="" coords="901,56,1042,83"/>
<area shape="poly" title=" " alt="" coords="825,67,886,67,886,72,825,72"/>
<area shape="poly" title=" " alt="" coords="1062,216,1246,212,1465,214,1568,218,1657,225,1723,235,1746,243,1761,251,1771,268,1780,294,1795,372,1806,475,1815,593,1825,828,1829,993,1824,993,1820,829,1810,593,1801,475,1790,373,1775,295,1766,270,1757,255,1744,248,1722,241,1656,230,1568,223,1465,219,1246,218,1062,221"/>
<area shape="rect" href="class_sse_s3_context.html#aad26c7b18dccb1932a77b8a817db2797" title=" " alt="" coords="1114,157,1276,184"/>
<area shape="poly" title=" " alt="" coords="1033,205,1117,185,1118,191,1034,210"/>
<area shape="rect" href="rgw__kms_8cc.html#a18f34abcef8bf2ff8ab2180171385010" title=" " alt="" coords="1122,451,1268,493"/>
<area shape="poly" title=" " alt="" coords="987,233,1166,437,1162,441,983,237"/>
<area shape="rect" href="class_transit_secret_engine.html#a4ca62b49e59785b7fb278c48253b2949" title=" " alt="" coords="1125,748,1264,791"/>
<area shape="poly" title=" " alt="" coords="978,234,992,303,1019,410,1059,536,1084,600,1113,661,1138,701,1165,735,1161,738,1134,704,1109,664,1080,602,1054,538,1014,411,987,304,973,236"/>
<area shape="poly" title=" " alt="" coords="1215,746,1247,708,1276,661,1286,635,1290,611,1291,567,1297,524,1307,503,1324,481,1377,433,1430,394,1484,364,1539,347,1595,341,1650,350,1706,374,1761,414,1769,426,1777,446,1790,506,1810,675,1822,859,1828,992,1823,992,1817,859,1804,676,1785,507,1772,448,1764,429,1757,418,1703,378,1649,355,1595,346,1540,352,1487,369,1433,398,1380,437,1328,484,1311,506,1302,526,1297,567,1296,612,1291,637,1281,664,1251,711,1219,749"/>
<area shape="rect" href="rgw__kms_8cc.html#ae5268633f9996eea42716e2de4037b13" title=" " alt="" coords="1355,920,1500,947"/>
<area shape="poly" title=" " alt="" coords="1263,789,1280,802,1292,816,1298,830,1304,856,1310,882,1317,894,1328,906,1342,915,1339,920,1325,910,1312,897,1305,884,1299,858,1293,831,1287,819,1276,806,1260,793"/>
<area shape="rect" href="class_vault_secret_engine.html#a21ddaddc49189fb68733634ce8d26467" title=" " alt="" coords="1359,853,1496,896"/>
<area shape="poly" title=" " alt="" coords="1250,789,1279,802,1369,844,1367,849,1277,806,1248,794"/>
<area shape="poly" title=" " alt="" coords="1498,885,1515,894,1531,906,1545,925,1551,945,1553,984,1555,1021,1563,1037,1578,1053,1601,1067,1622,1075,1643,1078,1662,1077,1706,1067,1758,1052,1792,1039,1794,1044,1760,1057,1707,1072,1663,1082,1642,1083,1621,1080,1599,1071,1575,1057,1558,1040,1550,1022,1547,985,1546,946,1540,928,1527,910,1512,899,1495,890"/>
<area shape="rect" href="class_s_s_e_context.html#a35609fc25555f9a458b2dd6a22c18cde" title=" " alt="" coords="1605,899,1731,925"/>
<area shape="poly" title=" " alt="" coords="1497,883,1590,897,1589,903,1496,888"/>
<area shape="rect" href="class_r_g_w_h_t_t_p_client.html#a8d4aa112a185bf07f192bea69b3c31fb" title=" " alt="" coords="1584,461,1752,504"/>
<area shape="poly" title=" " alt="" coords="1435,852,1526,632,1537,598,1543,569,1553,542,1575,514,1578,511,1582,515,1579,518,1557,545,1548,571,1542,599,1531,634,1440,854"/>
<area shape="rect" href="class_s_s_e_context.html#ac0affb02e7b7f1a40b3bb115858a993d" title=" " alt="" coords="1605,1168,1731,1195"/>
<area shape="poly" title=" " alt="" coords="1498,885,1515,894,1531,906,1548,930,1558,954,1561,976,1561,999,1561,1046,1567,1071,1579,1097,1605,1130,1635,1157,1632,1161,1601,1134,1574,1100,1562,1072,1556,1047,1556,999,1556,977,1552,955,1544,933,1527,910,1512,898,1495,889"/>
<area shape="rect" href="rgw__kms_8cc.html#a242cecf75d47f64b1de73858c54fb6f9" title=" " alt="" coords="1627,797,1709,824"/>
<area shape="poly" title=" " alt="" coords="1496,854,1612,823,1613,828,1497,859"/>
<area shape="rect" href="class_r_g_w_h_t_t_p_client.html#a8d89f57ce810c5320411cf2ddb01f339" title=" " alt="" coords="1596,528,1740,571"/>
<area shape="poly" title=" " alt="" coords="1443,851,1639,582,1644,585,1447,854"/>
<area shape="rect" href="class_s_s_e_context.html#a36821644035d6a926046b950ed65e6f1" title=" " alt="" coords="1577,949,1759,976"/>
<area shape="poly" title=" " alt="" coords="1498,893,1530,906,1554,921,1578,935,1595,941,1593,946,1575,940,1551,925,1527,910,1496,898"/>
<area shape="rect" href="class_vault_secret_engine.html#a8eb020a414a627058032342a99a29914" title=" " alt="" coords="1598,1000,1738,1043"/>
<area shape="poly" title=" " alt="" coords="1498,888,1530,906,1548,926,1555,947,1563,967,1579,986,1586,992,1583,996,1575,990,1558,969,1550,949,1543,929,1527,910,1495,892"/>
<area shape="rect" href="class_s_s_e_context.html#a7db6b0d790ab7b4fe42306f209416fcf" title=" " alt="" coords="1602,848,1734,875"/>
<area shape="poly" title=" " alt="" coords="1496,868,1586,863,1587,868,1496,874"/>
<area shape="poly" title=" " alt="" coords="1738,1019,1791,1019,1791,1024,1738,1024"/>
<area shape="poly" title=" " alt="" coords="395,1031,402,1025,421,1001,432,979,437,957,438,934,437,883,441,854,449,823,478,725,497,628,511,535,527,450,538,412,552,377,569,346,592,320,619,298,653,283,694,273,742,269,1429,269,1504,268,1602,270,1652,274,1697,282,1734,294,1761,311,1770,327,1778,351,1792,422,1803,516,1812,624,1824,840,1829,992,1823,992,1818,840,1807,624,1798,517,1787,423,1773,352,1765,329,1757,315,1732,299,1695,287,1651,280,1602,275,1504,274,1429,275,742,275,695,278,655,288,622,303,595,324,574,349,557,379,543,414,532,451,516,536,502,629,484,726,455,825,446,855,443,883,443,934,442,957,437,981,426,1004,406,1029,398,1035"/>
<area shape="rect" href="class_k_m_s_context.html#a456caa9cdc82486f4289aecf067512a6" title=" " alt="" coords="667,865,820,892"/>
<area shape="poly" title=" " alt="" coords="353,1030,403,1012,529,961,654,908,688,895,690,900,656,913,531,966,405,1017,354,1035"/>
<area shape="rect" href="rgw__kms_8cc.html#a28cf56d5d7411603b794f558e00fb03b" title=" " alt="" coords="666,537,821,580"/>
<area shape="poly" title=" " alt="" coords="369,1030,402,1013,419,997,429,981,450,943,598,742,714,591,718,594,602,745,454,945,433,984,423,1000,406,1017,371,1035"/>
<area shape="rect" href="rgw__kms_8cc.html#a4a4d58b805a968e04ab2f2cb64d808a3" title=" " alt="" coords="464,1080,595,1123"/>
<area shape="poly" title=" " alt="" coords="367,1058,449,1079,448,1084,366,1063"/>
<area shape="poly" title=" " alt="" coords="765,535,832,477,879,441,933,406,993,373,1057,345,1125,327,1193,320,1429,320,1481,317,1528,311,1610,300,1648,300,1685,308,1723,327,1761,360,1770,373,1777,396,1790,462,1810,648,1823,849,1829,992,1823,993,1817,849,1805,649,1785,463,1772,397,1765,376,1757,363,1720,332,1684,313,1648,306,1611,305,1529,317,1481,323,1429,325,1193,325,1125,332,1059,350,995,377,936,410,882,446,836,481,769,539"/>
<area shape="rect" href="rgw__kms_8cc.html#a26511610566afff47ea1d35f85222496" title=" " alt="" coords="901,967,1042,1009"/>
<area shape="poly" title=" " alt="" coords="759,579,954,951,949,954,754,582"/>
<area shape="poly" title=" " alt="" coords="991,965,1026,923,1061,872,1069,852,1074,833,1076,797,1083,764,1093,749,1110,734,1149,719,1218,707,1308,697,1411,692,1516,693,1616,703,1700,721,1734,735,1761,751,1774,768,1786,794,1805,860,1819,932,1826,992,1821,993,1813,933,1800,861,1781,796,1770,771,1757,755,1732,739,1699,726,1615,708,1516,699,1411,698,1308,702,1218,712,1150,725,1112,738,1097,752,1088,766,1082,798,1079,834,1074,854,1065,875,1031,926,995,968"/>
<area shape="poly" title=" " alt="" coords="976,966,1023,808,1062,701,1109,595,1137,546,1166,504,1170,507,1141,549,1113,597,1067,703,1028,810,981,967"/>
<area shape="poly" title=" " alt="" coords="994,1008,1044,1056,1077,1082,1112,1103,1173,1129,1237,1149,1302,1164,1367,1174,1489,1183,1589,1183,1589,1189,1489,1189,1366,1179,1301,1169,1235,1154,1171,1134,1110,1108,1074,1086,1041,1060,990,1012"/>
<area shape="rect" href="class_kv_secret_engine.html#a174d36cd18421dbf233c41579ae612f9" title=" " alt="" coords="1111,816,1278,843"/>
<area shape="poly" title=" " alt="" coords="1035,964,1061,946,1077,923,1084,900,1091,876,1109,853,1115,848,1118,853,1113,857,1096,879,1089,901,1082,925,1065,950,1038,968"/>
<area shape="rect" href="rgw__crypt_8h.html#a01489bc791eb4d27b5ce7ca0915289be" title=" " alt="" coords="1370,1117,1485,1144"/>
<area shape="poly" title=" " alt="" coords="1013,1007,1060,1031,1112,1052,1240,1090,1355,1115,1354,1120,1238,1095,1110,1057,1058,1035,1011,1012"/>
<area shape="rect" href="class_transit_secret_engine.html#af9602ebec8e8e75b118010006d6f76ae" title=" " alt="" coords="1126,933,1264,976"/>
<area shape="poly" title=" " alt="" coords="1042,975,1110,965,1110,970,1043,980"/>
<area shape="rect" href="class_transit_secret_engine.html#ac57ec387b020eb0885ebf96c1808dfd2" title=" " alt="" coords="1111,867,1278,909"/>
<area shape="poly" title=" " alt="" coords="1023,964,1062,946,1110,919,1122,913,1124,918,1112,924,1064,950,1025,969"/>
<area shape="rect" href="class_s_s_e_context.html#ab9b4ec20f13120fff3192a872a7b71ce" title=" " alt="" coords="1126,1000,1263,1043"/>
<area shape="poly" title=" " alt="" coords="1043,996,1111,1006,1110,1011,1042,1001"/>
<area shape="poly" title=" " alt="" coords="1254,813,1375,787,1525,765,1598,759,1665,758,1721,766,1743,773,1761,783,1773,798,1784,819,1803,876,1826,992,1820,993,1798,878,1779,821,1769,801,1757,787,1741,778,1719,771,1665,764,1599,764,1525,770,1376,793,1255,818"/>
<area shape="poly" title=" " alt="" coords="1267,841,1344,856,1343,861,1266,846"/>
<area shape="poly" title=" " alt="" coords="1261,974,1280,986,1296,1002,1304,1017,1313,1032,1328,1046,1355,1060,1381,1068,1430,1071,1479,1076,1504,1085,1530,1103,1542,1116,1549,1130,1554,1158,1559,1183,1566,1194,1578,1204,1626,1229,1669,1238,1690,1236,1711,1230,1757,1204,1774,1190,1788,1172,1808,1130,1819,1087,1823,1050,1829,1050,1824,1088,1813,1132,1793,1174,1778,1193,1761,1209,1713,1235,1691,1241,1668,1243,1624,1234,1575,1209,1562,1198,1554,1185,1549,1159,1544,1132,1538,1119,1527,1107,1501,1090,1477,1081,1430,1076,1380,1073,1353,1065,1325,1050,1309,1035,1300,1020,1291,1005,1277,990,1258,979"/>
<area shape="poly" title=" " alt="" coords="1264,946,1339,939,1340,944,1265,951"/>
<area shape="poly" title=" " alt="" coords="1255,930,1325,905,1345,899,1347,904,1327,911,1257,935"/>
<area shape="poly" title=" " alt="" coords="1265,974,1280,986,1292,1001,1299,1015,1304,1043,1310,1071,1317,1084,1328,1097,1356,1114,1354,1119,1325,1101,1312,1087,1305,1072,1299,1044,1294,1017,1288,1003,1276,990,1262,979"/>
<area shape="poly" title=" " alt="" coords="1266,974,1280,986,1296,1008,1304,1029,1308,1069,1310,1110,1316,1132,1329,1154,1356,1185,1388,1208,1385,1212,1353,1189,1324,1158,1311,1134,1305,1111,1303,1070,1299,1030,1291,1010,1276,990,1262,978"/>
<area shape="poly" title=" " alt="" coords="1257,908,1280,919,1304,938,1328,956,1383,987,1427,1008,1473,1027,1530,1055,1553,1071,1578,1083,1628,1096,1669,1102,1709,1098,1758,1083,1785,1066,1806,1045,1810,1049,1788,1071,1760,1088,1710,1104,1669,1107,1627,1101,1576,1088,1551,1076,1527,1060,1471,1032,1425,1013,1380,992,1325,961,1301,942,1277,924,1255,912"/>
<area shape="poly" title=" " alt="" coords="1279,902,1341,914,1340,919,1278,907"/>
<area shape="poly" title=" " alt="" coords="1278,881,1343,877,1343,882,1279,886"/>
<area shape="poly" title=" " alt="" coords="1266,908,1280,919,1293,936,1301,952,1308,982,1313,1013,1329,1047,1359,1080,1393,1106,1389,1111,1355,1084,1324,1049,1307,1014,1302,983,1296,953,1289,939,1276,923,1262,912"/>
<area shape="poly" title=" " alt="" coords="549,1121,594,1175,624,1204,657,1230,728,1277,792,1313,851,1340,908,1358,968,1371,1033,1377,1193,1381,1429,1381,1601,1390,1649,1390,1694,1386,1731,1377,1757,1363,1773,1342,1786,1309,1806,1220,1817,1125,1823,1050,1828,1051,1823,1126,1811,1221,1791,1310,1778,1344,1761,1367,1733,1382,1695,1391,1650,1395,1601,1395,1429,1387,1193,1387,1033,1383,967,1376,907,1364,849,1345,789,1318,726,1281,654,1234,621,1208,590,1178,545,1125"/>
<area shape="poly" title=" " alt="" coords="550,1078,578,1046,605,1009,618,981,625,957,634,933,654,909,670,897,673,902,657,913,639,936,630,958,623,983,610,1012,582,1050,554,1081"/>
<area shape="poly" title=" " alt="" coords="596,1101,1354,1126,1354,1131,596,1106"/>
<area shape="rect" href="rgw__kms_8cc.html#a658270317bcf66d63065b1ba618fbb57" title=" " alt="" coords="1124,608,1265,651"/>
<area shape="poly" title=" " alt="" coords="565,1077,684,1001,830,902,971,797,1109,689,1150,658,1153,662,1113,693,974,801,833,906,686,1006,568,1082"/>
<area shape="rect" href="rgw__kms_8cc.html#a60375ded1848f6557218dfa172fb3273" title=" " alt="" coords="657,1421,830,1448"/>
<area shape="poly" title=" " alt="" coords="547,1122,728,1407,723,1410,543,1125"/>
<area shape="rect" href="rgw__kms_8cc.html#a98dfadea209db9d3f510813cce53552a" title=" " alt="" coords="655,1193,832,1220"/>
<area shape="poly" title=" " alt="" coords="576,1121,702,1184,700,1189,574,1126"/>
<area shape="rect" href="rgw__kms_8cc.html#ad422decf30b06979e6699cc45ea27dff" title=" " alt="" coords="678,1051,809,1093"/>
<area shape="poly" title=" " alt="" coords="595,1090,662,1080,663,1086,596,1095"/>
<area shape="poly" title=" " alt="" coords="1266,630,1398,637,1553,649,1687,666,1734,677,1761,689,1777,711,1790,744,1810,829,1822,920,1828,992,1822,993,1816,921,1804,830,1785,746,1772,714,1757,693,1733,682,1686,671,1552,655,1398,642,1266,635"/>
<area shape="rect" href="classrgw_1_1keystone_1_1_service.html#a9e7d874cb71bd97f167704520bc23b8d" title=" " alt="" coords="1326,495,1529,537"/>
<area shape="poly" title=" " alt="" coords="1239,605,1367,542,1369,547,1242,610"/>
<area shape="rect" href="rgw__kms_8cc.html#a294fe847c5f903a71b7e71f5ad94bd58" title=" " alt="" coords="1337,595,1518,621"/>
<area shape="poly" title=" " alt="" coords="1265,620,1321,615,1322,620,1266,626"/>
<area shape="poly" title=" " alt="" coords="1459,492,1521,457,1560,439,1601,425,1644,416,1686,416,1725,425,1761,448,1776,478,1789,533,1808,693,1822,866,1828,992,1823,993,1816,866,1803,693,1783,534,1771,479,1757,451,1723,430,1685,421,1644,422,1603,430,1562,444,1524,461,1462,497"/>
<area shape="poly" title=" " alt="" coords="1529,499,1568,494,1569,499,1530,505"/>
<area shape="poly" title=" " alt="" coords="1530,527,1581,535,1580,540,1529,533"/>
<area shape="poly" title=" " alt="" coords="1490,591,1553,584,1626,585,1662,590,1698,600,1731,616,1761,638,1779,664,1793,703,1813,804,1824,910,1829,992,1823,993,1819,910,1808,804,1788,705,1774,667,1757,642,1728,621,1696,605,1661,595,1625,590,1554,589,1491,597"/>
<area shape="poly" title=" " alt="" coords="1452,592,1527,547,1551,530,1575,514,1586,508,1589,513,1578,518,1554,534,1530,552,1455,596"/>
<area shape="poly" title=" " alt="" coords="1447,620,1641,785,1638,789,1443,624"/>
<area shape="poly" title=" " alt="" coords="1485,592,1580,568,1581,573,1486,597"/>
<area shape="poly" title=" " alt="" coords="808,1446,894,1465,893,1471,806,1451"/>
<area shape="poly" title=" " alt="" coords="830,1432,1193,1432,1429,1432,1481,1435,1528,1441,1609,1454,1646,1454,1682,1447,1718,1430,1757,1401,1774,1376,1788,1338,1808,1238,1819,1132,1823,1050,1829,1050,1824,1133,1813,1239,1793,1340,1779,1378,1761,1405,1721,1435,1683,1452,1646,1459,1608,1459,1527,1446,1481,1440,1429,1437,1193,1437,830,1437"/>
<area shape="poly" title=" " alt="" coords="767,1446,818,1477,881,1508,899,1515,897,1520,879,1513,815,1482,764,1451"/>
<area shape="poly" title=" " alt="" coords="784,1218,833,1236,931,1276,1009,1306,1089,1324,1193,1331,1429,1331,1481,1334,1527,1341,1607,1356,1644,1359,1680,1354,1717,1339,1757,1311,1771,1294,1783,1266,1802,1194,1815,1115,1822,1050,1827,1051,1820,1115,1807,1195,1788,1268,1775,1296,1761,1315,1720,1344,1681,1359,1644,1364,1607,1362,1526,1346,1480,1339,1429,1336,1193,1336,1088,1329,1008,1311,929,1281,831,1241,782,1223"/>
<area shape="rect" href="class_kmip_secret_engine.html#af470de24e1bab66aaac51220f1ca090a" title=" " alt="" coords="880,1219,1063,1245"/>
<area shape="poly" title=" " alt="" coords="832,1214,864,1217,864,1223,832,1219"/>
<area shape="poly" title=" " alt="" coords="796,1091,893,1130,1023,1177,1172,1222,1250,1240,1327,1255,1394,1268,1453,1282,1507,1295,1557,1304,1606,1306,1654,1299,1703,1279,1757,1243,1777,1224,1793,1200,1813,1147,1823,1094,1825,1050,1830,1050,1828,1095,1819,1149,1798,1203,1781,1227,1761,1247,1706,1283,1655,1304,1606,1312,1557,1310,1506,1300,1452,1287,1393,1273,1326,1260,1249,1246,1171,1227,1021,1182,891,1135,794,1096"/>
<area shape="poly" title=" " alt="" coords="802,1048,896,1013,898,1018,804,1053"/>
<area shape="poly" title=" " alt="" coords="607,169,682,152,773,135,871,122,970,117,1429,117,1531,116,1575,117,1616,122,1653,133,1690,151,1725,178,1761,217,1770,235,1779,263,1793,346,1804,454,1813,577,1824,823,1829,993,1824,993,1819,823,1808,578,1799,455,1787,347,1773,265,1765,237,1757,220,1722,182,1687,155,1652,138,1615,127,1575,123,1531,121,1429,123,970,123,872,128,774,140,684,157,608,174"/>
<area shape="poly" title=" " alt="" coords="608,187,1098,171,1098,176,608,192"/>
<area shape="poly" title=" " alt="" coords="546,213,724,522,720,525,541,215"/>
<area shape="poly" title=" " alt="" coords="754,1670,804,1616,839,1585,878,1559,894,1552,896,1556,881,1564,842,1590,808,1620,758,1673"/>
<area shape="rect" href="rgw__crypt_8cc.html#a468055d9acfdf57d836f7c110fae5a42" title=" " alt="" coords="895,1773,1048,1800"/>
<area shape="poly" title=" " alt="" coords="767,1697,818,1728,881,1759,899,1766,897,1771,879,1764,815,1732,764,1701"/>
<area shape="rect" href="rgw__crypt_8cc.html#af41e16ec2085c8a5ce5576bbe57b023b" title=" " alt="" coords="913,1824,1030,1851"/>
<area shape="poly" title=" " alt="" coords="757,1697,807,1752,842,1783,881,1810,899,1818,897,1823,878,1814,839,1787,803,1756,754,1701"/>
<area shape="rect" href="rgw__crypt_8cc.html#a818709fd4c5831710c61c53868e74057" title=" " alt="" coords="881,1597,1062,1624"/>
<area shape="poly" title=" " alt="" coords="780,1669,879,1633,903,1626,904,1631,881,1639,782,1674"/>
<area shape="rect" href="rgw__crypt_8cc.html#a968267093810809f7ec5d866d3c31e7b" title=" " alt="" coords="919,1672,1024,1699"/>
<area shape="poly" title=" " alt="" coords="827,1683,903,1683,903,1688,827,1688"/>
<area shape="rect" href="namespacergw.html#aa82f70521f78be16696f555e4ef745c6" title=" " alt="" coords="917,1723,1026,1749"/>
<area shape="poly" title=" " alt="" coords="808,1697,902,1718,901,1723,806,1702"/>
<area shape="poly" title=" " alt="" coords="934,1598,927,1589,932,1579,947,1573,971,1571,998,1573,1012,1580,1010,1584,996,1578,971,1576,948,1578,935,1583,932,1588,938,1595"/>
<area shape="rect" href="classcanonical__char__sorter.html#acd8130b748ba3911d6583f7f9754fe8c" title=" " alt="" coords="1346,1577,1509,1620"/>
<area shape="poly" title=" " alt="" coords="1062,1606,1331,1599,1331,1604,1062,1611"/>
<area shape="poly" title=" " alt="" coords="1509,1610,1571,1614,1638,1608,1671,1601,1702,1590,1731,1574,1757,1553,1769,1537,1780,1515,1798,1459,1810,1389,1818,1313,1825,1161,1825,1050,1830,1050,1830,1161,1823,1313,1815,1390,1803,1460,1785,1517,1774,1540,1761,1557,1734,1578,1704,1595,1672,1606,1638,1614,1571,1619,1509,1615"/>
<area shape="poly" title=" " alt="" coords="934,1673,927,1663,932,1653,947,1647,971,1645,998,1648,1012,1654,1010,1659,996,1653,971,1651,948,1653,935,1657,932,1663,938,1670"/>
</map>
</div>
<div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="rgw__crypt_8cc_a644bbfaccd952cddc83967e91f89caf5_icgraph.png" border="0" usemap="#argw__crypt_8cc_a644bbfaccd952cddc83967e91f89caf5_icgraph" alt=""/></div>
<map name="argw__crypt_8cc_a644bbfaccd952cddc83967e91f89caf5_icgraph" id="argw__crypt_8cc_a644bbfaccd952cddc83967e91f89caf5_icgraph">
<area shape="rect" title=" " alt="" coords="232,80,394,107"/>
<area shape="rect" href="class_r_g_w_put_obj___obj_store___s3.html#aac43ef6294ae6f90061fa06e560dfc0a" title=" " alt="" coords="19,5,170,48"/>
<area shape="poly" title=" " alt="" coords="251,77,166,51,168,46,253,72"/>
<area shape="rect" href="class_r_g_w_post_obj___obj_store___s3.html#ae2c71dfde7f4e10024b6cf4d766f480b" title=" " alt="" coords="15,72,174,115"/>
<area shape="poly" title=" " alt="" coords="216,96,174,96,174,91,216,91"/>
<area shape="rect" href="class_r_g_w_init_multipart___obj_store___s3.html#aec0b31cd487b8d8ce2a61b7d71072713" title=" " alt="" coords="5,139,184,181"/>
<area shape="poly" title=" " alt="" coords="253,114,168,141,166,135,251,109"/>
</map>
</div>

</div>
</div>
<a id="a968267093810809f7ec5d866d3c31e7b" name="a968267093810809f7ec5d866d3c31e7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a968267093810809f7ec5d866d3c31e7b">&#9670;&#160;</a></span>sort_and_write()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename H &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">bool sort_and_write </td>
          <td>(</td>
          <td class="paramtype">rapidjson::Value &amp;&#160;</td>
          <td class="paramname"><em>d</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">H &amp;&#160;</td>
          <td class="paramname"><em>writer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classcanonical__char__sorter.html">canonical_char_sorter</a>&lt; <a class="el" href="rgw__crypt_8cc.html#a3ea0937a0611dbce4a5879562f2d6324">MyMember</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>ccs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="rgw__crypt_8cc_source.html">rgw_crypt.cc</a> 파일의 <a class="el" href="rgw__crypt_8cc_source.html#l00099">99</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  100</span>{</div>
<div class="line"><span class="lineno">  101</span>    <span class="keywordtype">bool</span> <a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a>;</div>
<div class="line"><span class="lineno">  102</span>    <span class="keywordflow">switch</span>(d.GetType()) {</div>
<div class="line"><span class="lineno">  103</span>    <span class="keywordflow">case</span> rapidjson::kObjectType: {</div>
<div class="line"><span class="lineno">  104</span>    <span class="keyword">struct </span>comparer {</div>
<div class="line"><span class="lineno">  105</span>        <a class="code hl_class" href="classcanonical__char__sorter.html">canonical_char_sorter&lt;MyMember&gt;</a> &amp;<a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a>;</div>
<div class="line"><span class="lineno">  106</span>        comparer(<a class="code hl_class" href="classcanonical__char__sorter.html">canonical_char_sorter&lt;MyMember&gt;</a> &amp;<a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a>) : <a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a>(<a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a>) {};</div>
<div class="line"><span class="lineno">  107</span>        <span class="keywordtype">bool</span> operator()(<span class="keyword">const</span> <a class="code hl_typedef" href="rgw__crypt_8cc.html#a3ea0937a0611dbce4a5879562f2d6324">MyMember</a>*a, <span class="keyword">const</span> <a class="code hl_typedef" href="rgw__crypt_8cc.html#a3ea0937a0611dbce4a5879562f2d6324">MyMember</a>*b) {</div>
<div class="line"><span class="lineno">  108</span>            <span class="keywordflow">return</span> <a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a>.compare_helper(a,b);</div>
<div class="line"><span class="lineno">  109</span>        }</div>
<div class="line"><span class="lineno">  110</span>    } cmp_functor{ccs};</div>
<div class="line"><span class="lineno">  111</span>        <span class="keywordflow">if</span> (!(<a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a> = writer.StartObject()))</div>
<div class="line"><span class="lineno">  112</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  113</span>        std::vector&lt;MyMember*&gt; q;</div>
<div class="line"><span class="lineno">  114</span>        <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;m: d.<a class="code hl_enumeration" href="sqlite_d_b_8cc.html#af4eb4d29dcec668788484c5fb0494c26">GetObject</a>())</div>
<div class="line"><span class="lineno">  115</span>            q.push_back(&amp;m);</div>
<div class="line"><span class="lineno">  116</span>        std::sort(q.begin(), q.end(), cmp_functor);</div>
<div class="line"><span class="lineno">  117</span>        <span class="keywordflow">for</span> (<span class="keyword">auto</span> m: q) {</div>
<div class="line"><span class="lineno">  118</span>            assert(m-&gt;name.IsString());</div>
<div class="line"><span class="lineno">  119</span>            <span class="keywordflow">if</span> (!(<a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a> = writer.Key(m-&gt;name.GetString(), m-&gt;name.GetStringLength())))</div>
<div class="line"><span class="lineno">  120</span>                <span class="keywordflow">goto</span> Done;</div>
<div class="line"><span class="lineno">  121</span>            <span class="keywordflow">if</span> (!(<a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a> = <a class="code hl_function" href="rgw__crypt_8cc.html#a968267093810809f7ec5d866d3c31e7b">sort_and_write</a>(m-&gt;value, writer, ccs)))</div>
<div class="line"><span class="lineno">  122</span>                <span class="keywordflow">goto</span> Done;</div>
<div class="line"><span class="lineno">  123</span>        }</div>
<div class="line"><span class="lineno">  124</span>        <a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a> = writer.EndObject();</div>
<div class="line"><span class="lineno">  125</span>        <span class="keywordflow">break</span>; }</div>
<div class="line"><span class="lineno">  126</span>    <span class="keywordflow">case</span> rapidjson::kArrayType:</div>
<div class="line"><span class="lineno">  127</span>        <span class="keywordflow">if</span> (!(<a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a> = writer.StartArray()))</div>
<div class="line"><span class="lineno">  128</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  129</span>        <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;v: d.GetArray()) {</div>
<div class="line"><span class="lineno">  130</span>            <span class="keywordflow">if</span> (!(<a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a> = <a class="code hl_function" href="rgw__crypt_8cc.html#a968267093810809f7ec5d866d3c31e7b">sort_and_write</a>(v, writer, ccs)))</div>
<div class="line"><span class="lineno">  131</span>                <span class="keywordflow">goto</span> Done;</div>
<div class="line"><span class="lineno">  132</span>        }</div>
<div class="line"><span class="lineno">  133</span>        <a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a> = writer.EndArray();</div>
<div class="line"><span class="lineno">  134</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  135</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno">  136</span>        <a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a> = d.Accept(writer);</div>
<div class="line"><span class="lineno">  137</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  138</span>    }</div>
<div class="line"><span class="lineno">  139</span>Done:</div>
<div class="line"><span class="lineno">  140</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a>;</div>
<div class="line"><span class="lineno">  141</span>}</div>
<div class="ttc" id="argw__crypt_8cc_html_a3ea0937a0611dbce4a5879562f2d6324"><div class="ttname"><a href="rgw__crypt_8cc.html#a3ea0937a0611dbce4a5879562f2d6324">MyMember</a></div><div class="ttdeci">rapidjson::GenericMember&lt; rapidjson::UTF8&lt;&gt;, rapidjson::MemoryPoolAllocator&lt;&gt; &gt; MyMember</div><div class="ttdef"><b>Definition</b> <a href="rgw__crypt_8cc_source.html#l00095">rgw_crypt.cc:95</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="rgw__crypt_8cc_a968267093810809f7ec5d866d3c31e7b_cgraph.png" border="0" usemap="#argw__crypt_8cc_a968267093810809f7ec5d866d3c31e7b_cgraph" alt=""/></div>
<map name="argw__crypt_8cc_a968267093810809f7ec5d866d3c31e7b_cgraph" id="argw__crypt_8cc_a968267093810809f7ec5d866d3c31e7b_cgraph">
<area shape="rect" title=" " alt="" coords="5,29,111,56"/>
<area shape="poly" title=" " alt="" coords="39,30,36,20,38,11,46,5,58,3,71,5,78,12,75,16,69,10,58,8,48,10,42,14,41,20,44,28"/>
</map>
</div>
<div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="rgw__crypt_8cc_a968267093810809f7ec5d866d3c31e7b_icgraph.png" border="0" usemap="#argw__crypt_8cc_a968267093810809f7ec5d866d3c31e7b_icgraph" alt=""/></div>
<map name="argw__crypt_8cc_a968267093810809f7ec5d866d3c31e7b_icgraph" id="argw__crypt_8cc_a968267093810809f7ec5d866d3c31e7b_icgraph">
<area shape="rect" title=" " alt="" coords="655,80,761,107"/>
<area shape="poly" title=" " alt="" coords="739,67,728,61,708,59,689,61,679,65,676,71,681,78,677,81,671,71,675,62,688,55,708,53,730,56,742,62"/>
<area shape="rect" href="rgw__crypt_8cc.html#ad74b8dce6c7052201e0d2bc8fbe6b0c3" title=" " alt="" coords="442,80,607,107"/>
<area shape="poly" title=" " alt="" coords="640,96,608,96,608,91,640,91"/>
<area shape="rect" href="rgw__crypt_8cc.html#a644bbfaccd952cddc83967e91f89caf5" title=" " alt="" coords="232,80,394,107"/>
<area shape="poly" title=" " alt="" coords="427,96,394,96,394,91,427,91"/>
<area shape="rect" href="class_r_g_w_put_obj___obj_store___s3.html#aac43ef6294ae6f90061fa06e560dfc0a" title=" " alt="" coords="19,5,170,48"/>
<area shape="poly" title=" " alt="" coords="251,77,166,51,168,46,253,72"/>
<area shape="rect" href="class_r_g_w_post_obj___obj_store___s3.html#ae2c71dfde7f4e10024b6cf4d766f480b" title=" " alt="" coords="15,72,174,115"/>
<area shape="poly" title=" " alt="" coords="216,96,174,96,174,91,216,91"/>
<area shape="rect" href="class_r_g_w_init_multipart___obj_store___s3.html#aec0b31cd487b8d8ce2a61b7d71072713" title=" " alt="" coords="5,139,184,181"/>
<area shape="poly" title=" " alt="" coords="253,114,168,141,166,135,251,109"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">변수 문서화</h2>
<a id="a7bbedbb5f2e198570553befb1e69a86d" name="a7bbedbb5f2e198570553befb1e69a86d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7bbedbb5f2e198570553befb1e69a86d">&#9670;&#160;</a></span>cant_expand_key</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const std::string cant_expand_key { &quot;\uFFFD&quot; }</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="rgw__crypt_8cc_source.html">rgw_crypt.cc</a> 파일의 <a class="el" href="rgw__crypt_8cc_source.html#l00909">909</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  909</span>{ <span class="stringliteral">&quot;\uFFFD&quot;</span> };</div>
</div><!-- fragment -->
</div>
</div>
<a id="afb49a525e8897bd173a827e72c1accec" name="afb49a525e8897bd173a827e72c1accec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb49a525e8897bd173a827e72c1accec">&#9670;&#160;</a></span>crypt_options</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structcrypt__option__names.html">crypt_option_names</a> crypt_options[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>초기값:</b><div class="fragment"><div class="line">= {</div>
<div class="line">    {  <span class="stringliteral">&quot;x-amz-server-side-encryption-customer-algorithm&quot;</span>},</div>
<div class="line">    {        <span class="stringliteral">&quot;x-amz-server-side-encryption-customer-key&quot;</span>},</div>
<div class="line">    {    <span class="stringliteral">&quot;x-amz-server-side-encryption-customer-key-md5&quot;</span>},</div>
<div class="line">    {                     <span class="stringliteral">&quot;x-amz-server-side-encryption&quot;</span>},</div>
<div class="line">    {      <span class="stringliteral">&quot;x-amz-server-side-encryption-aws-kms-key-id&quot;</span>},</div>
<div class="line">    {             <span class="stringliteral">&quot;x-amz-server-side-encryption-context&quot;</span>},</div>
<div class="line">}</div>
</div><!-- fragment -->
<p class="definition"><a class="el" href="rgw__crypt_8cc_source.html">rgw_crypt.cc</a> 파일의 <a class="el" href="rgw__crypt_8cc_source.html#l00865">865</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  865</span>                                                  {</div>
<div class="line"><span class="lineno">  866</span>    {  <span class="stringliteral">&quot;x-amz-server-side-encryption-customer-algorithm&quot;</span>},</div>
<div class="line"><span class="lineno">  867</span>    {        <span class="stringliteral">&quot;x-amz-server-side-encryption-customer-key&quot;</span>},</div>
<div class="line"><span class="lineno">  868</span>    {    <span class="stringliteral">&quot;x-amz-server-side-encryption-customer-key-md5&quot;</span>},</div>
<div class="line"><span class="lineno">  869</span>    {                     <span class="stringliteral">&quot;x-amz-server-side-encryption&quot;</span>},</div>
<div class="line"><span class="lineno">  870</span>    {      <span class="stringliteral">&quot;x-amz-server-side-encryption-aws-kms-key-id&quot;</span>},</div>
<div class="line"><span class="lineno">  871</span>    {             <span class="stringliteral">&quot;x-amz-server-side-encryption-context&quot;</span>},</div>
<div class="line"><span class="lineno">  872</span>};</div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_275089585c7fc1b5fd5d7d42c69cb1da.html">D:</a></li><li class="navelem"><a class="el" href="dir_e050007e69745d5ed950ce16eed8ed32.html">git</a></li><li class="navelem"><a class="el" href="dir_6892619f22dbda2b625e50c3cfe72b21.html">ceph</a></li><li class="navelem"><a class="el" href="dir_07a1996344d62ceb57ddf5fb87d6faf4.html">src</a></li><li class="navelem"><a class="el" href="dir_ddd8fa4b54862d6407f5aaf9a827e64e.html">rgw</a></li><li class="navelem"><a class="el" href="rgw__crypt_8cc.html">rgw_crypt.cc</a></li>
    <li class="footer">다음에 의해 생성됨 :  <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>

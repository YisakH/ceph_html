<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="ko">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: D:/git/ceph/src/rgw/rgw_sync_module_pubsub.cc 소스 파일</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 다음에 의해 생성됨 :  Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','검색');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function() { init_codefold(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('rgw__sync__module__pubsub_8cc_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">로딩중...</div>
<div class="SRStatus" id="Searching">검색중...</div>
<div class="SRStatus" id="NoMatches">일치하는것 없음</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">rgw_sync_module_pubsub.cc</div></div>
</div><!--header-->
<div class="contents">
<a href="rgw__sync__module__pubsub_8cc.html">이 파일의 문서화 페이지로 가기</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="comment">// -*- mode:C++; tab-width:8; c-basic-offset:2; indent-tabs-mode:t -*-</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="comment">// vim: ts=8 sw=2 smarttab ft=cpp</span></div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span> </div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="preprocessor">#include &quot;<a class="code" href="svc__zone_8h.html">services/svc_zone.h</a>&quot;</span></div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="preprocessor">#include &quot;<a class="code" href="rgw__common_8h.html">rgw_common.h</a>&quot;</span></div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span><span class="preprocessor">#include &quot;<a class="code" href="rgw__coroutine_8h.html">rgw_coroutine.h</a>&quot;</span></div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="preprocessor">#include &quot;<a class="code" href="rgw__sync__module_8h.html">rgw_sync_module.h</a>&quot;</span></div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="preprocessor">#include &quot;<a class="code" href="rgw__data__sync_8h.html">rgw_data_sync.h</a>&quot;</span></div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="preprocessor">#include &quot;<a class="code" href="rgw__sync__module__pubsub_8h.html">rgw_sync_module_pubsub.h</a>&quot;</span></div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span><span class="preprocessor">#include &quot;<a class="code" href="rgw__sync__module__pubsub__rest_8h.html">rgw_sync_module_pubsub_rest.h</a>&quot;</span></div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span><span class="preprocessor">#include &quot;<a class="code" href="rgw__rest__conn_8h.html">rgw_rest_conn.h</a>&quot;</span></div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span><span class="preprocessor">#include &quot;<a class="code" href="rgw__cr__rados_8h.html">rgw_cr_rados.h</a>&quot;</span></div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span><span class="preprocessor">#include &quot;<a class="code" href="rgw__cr__rest_8h.html">rgw_cr_rest.h</a>&quot;</span></div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="preprocessor">#include &quot;<a class="code" href="rgw__cr__tools_8h.html">rgw_cr_tools.h</a>&quot;</span></div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span><span class="preprocessor">#include &quot;<a class="code" href="rgw__op_8h.html">rgw_op.h</a>&quot;</span></div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span><span class="preprocessor">#include &quot;<a class="code" href="rgw__pubsub_8h.html">rgw_pubsub.h</a>&quot;</span></div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span><span class="preprocessor">#include &quot;<a class="code" href="rgw__pubsub__push_8h.html">rgw_pubsub_push.h</a>&quot;</span></div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span><span class="preprocessor">#include &quot;<a class="code" href="rgw__notify__event__type_8h.html">rgw_notify_event_type.h</a>&quot;</span></div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span><span class="preprocessor">#include &quot;<a class="code" href="rgw__perf__counters_8h.html">rgw_perf_counters.h</a>&quot;</span></div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span> </div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span><span class="preprocessor">#include &lt;boost/algorithm/hex.hpp&gt;</span></div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span><span class="preprocessor">#include &lt;boost/asio/yield.hpp&gt;</span></div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span> </div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno"><a class="line" href="rgw__sync__module__pubsub_8cc.html#a5580a2b7c4743669bb9ca22b07e84324">   24</a></span><span class="preprocessor">#define dout_subsys ceph_subsys_rgw</span></div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span> </div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span> </div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno"><a class="line" href="rgw__sync__module__pubsub_8cc.html#a70e5b84b7bca0feba6fcd9334622d05b">   27</a></span><span class="preprocessor">#define PUBSUB_EVENTS_RETENTION_DEFAULT 7</span></div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span> </div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span><span class="keyword">using namespace </span><a class="code hl_namespace" href="namespacestd.html">std</a>;</div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span> </div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span><span class="comment">/*</span></div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span><span class="comment"></span> </div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span><span class="comment">config:</span></div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span><span class="comment"></span> </div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span><span class="comment">{</span></div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span><span class="comment">   &quot;tenant&quot;: &lt;tenant&gt;,             # default: &lt;empty&gt;</span></div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span><span class="comment">   &quot;uid&quot;: &lt;uid&gt;,                   # default: &quot;pubsub&quot;</span></div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span><span class="comment">   &quot;data_bucket_prefix&quot;: &lt;prefix&gt;  # default: &quot;pubsub-&quot;</span></div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span><span class="comment">   &quot;data_oid_prefix&quot;: &lt;prefix&gt;     #</span></div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span><span class="comment">   &quot;events_retention_days&quot;: &lt;int&gt;  # default: 7</span></div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span><span class="comment">   &quot;start_with_full_sync&quot; &lt;bool&gt;   # default: false</span></div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span><span class="comment">}</span></div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span><span class="comment"></span> </div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span><span class="comment">*/</span></div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span> </div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span><span class="comment">// utility function to convert the args list from string format </span></div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span><span class="comment">// (ampresend separated with equal sign) to prased structure</span></div>
<div class="foldopen" id="foldopen00048" data-start="{" data-end="}">
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno"><a class="line" href="rgw__sync__module__pubsub_8cc.html#a7dfdc68b9c480a297b0765caacb2acf3">   48</a></span><a class="code hl_class" href="class_r_g_w_h_t_t_p_args.html">RGWHTTPArgs</a> <a class="code hl_function" href="rgw__sync__module__pubsub_8cc.html#a7dfdc68b9c480a297b0765caacb2acf3">string_to_args</a>(<span class="keyword">const</span> std::string&amp; str_args, <span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>) {</div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span>  <a class="code hl_class" href="class_r_g_w_h_t_t_p_args.html">RGWHTTPArgs</a> <a class="code hl_variable" href="dbstore__tests_8cc.html#a3284f7a2d0ea04744ec7605cbacce0de">args</a>;</div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span>  <a class="code hl_variable" href="dbstore__tests_8cc.html#a3284f7a2d0ea04744ec7605cbacce0de">args</a>.<a class="code hl_function" href="class_r_g_w_h_t_t_p_args.html#ad0167c36e38f885a5dae2bd2b86d67b0">set</a>(str_args);</div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span>  <a class="code hl_variable" href="dbstore__tests_8cc.html#a3284f7a2d0ea04744ec7605cbacce0de">args</a>.parse(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>);</div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="dbstore__tests_8cc.html#a3284f7a2d0ea04744ec7605cbacce0de">args</a>;</div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span>}</div>
</div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span> </div>
<div class="foldopen" id="foldopen00055" data-start="{" data-end="};">
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno"><a class="line" href="struct_p_s_sub_config.html">   55</a></span><span class="keyword">struct </span><a class="code hl_struct" href="struct_p_s_sub_config.html">PSSubConfig</a> {</div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno"><a class="line" href="struct_p_s_sub_config.html#a03238ea5955e12178cea7a7a1772ce01">   56</a></span>  std::string <a class="code hl_variable" href="struct_p_s_sub_config.html#a03238ea5955e12178cea7a7a1772ce01">name</a>;</div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno"><a class="line" href="struct_p_s_sub_config.html#ab18064f7dc58ff0a4a3d7b3be02297c9">   57</a></span>  std::string <a class="code hl_variable" href="struct_p_s_sub_config.html#ab18064f7dc58ff0a4a3d7b3be02297c9">topic</a>;</div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno"><a class="line" href="struct_p_s_sub_config.html#a6fc5ee773745f36bd759e3ca727a2fc3">   58</a></span>  std::string <a class="code hl_variable" href="struct_p_s_sub_config.html#a6fc5ee773745f36bd759e3ca727a2fc3">push_endpoint_name</a>;</div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno"><a class="line" href="struct_p_s_sub_config.html#acf41dc25c09e4a27cc26bb1f85a38b43">   59</a></span>  std::string <a class="code hl_variable" href="struct_p_s_sub_config.html#acf41dc25c09e4a27cc26bb1f85a38b43">push_endpoint_args</a>;</div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno"><a class="line" href="struct_p_s_sub_config.html#a8262c2223c4ebde2e6ab52692614b9bd">   60</a></span>  std::string <a class="code hl_variable" href="struct_p_s_sub_config.html#a8262c2223c4ebde2e6ab52692614b9bd">data_bucket_name</a>;</div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno"><a class="line" href="struct_p_s_sub_config.html#ac157d698c580721858457b2cf5b3d7a9">   61</a></span>  std::string <a class="code hl_variable" href="struct_p_s_sub_config.html#ac157d698c580721858457b2cf5b3d7a9">data_oid_prefix</a>;</div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno"><a class="line" href="struct_p_s_sub_config.html#a51ca2eaa634de0edb43aa51be69dde53">   62</a></span>  std::string <a class="code hl_variable" href="struct_p_s_sub_config.html#a51ca2eaa634de0edb43aa51be69dde53">s3_id</a>;</div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno"><a class="line" href="struct_p_s_sub_config.html#a51cfbe8aabdb7d03c620aba2f16b7ed6">   63</a></span>  std::string <a class="code hl_variable" href="struct_p_s_sub_config.html#a51cfbe8aabdb7d03c620aba2f16b7ed6">arn_topic</a>;</div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno"><a class="line" href="struct_p_s_sub_config.html#a3a98d3cc7cdab841b1bd37766b840cb1">   64</a></span>  <a class="code hl_typedef" href="class_r_g_w_pub_sub_endpoint.html#a16e4ed1be414fb196fd3e4db4511dff1">RGWPubSubEndpoint::Ptr</a> <a class="code hl_variable" href="struct_p_s_sub_config.html#a3a98d3cc7cdab841b1bd37766b840cb1">push_endpoint</a>;</div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span> </div>
<div class="foldopen" id="foldopen00066" data-start="{" data-end="}">
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno"><a class="line" href="struct_p_s_sub_config.html#aa8769e7ba834b6235f756e63f8e25c20">   66</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="struct_p_s_sub_config.html#aa8769e7ba834b6235f756e63f8e25c20">from_user_conf</a>(CephContext *<a class="code hl_variable" href="cls__fifo__legacy_8cc.html#aa76801f7597f40e158b5f38b2e6466c5">cct</a>, <span class="keyword">const</span> <a class="code hl_struct" href="structrgw__pubsub__sub__config.html">rgw_pubsub_sub_config</a>&amp; uc, <span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>) {</div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span>    <a class="code hl_variable" href="struct_p_s_sub_config.html#a03238ea5955e12178cea7a7a1772ce01">name</a> = uc.<a class="code hl_variable" href="structrgw__pubsub__sub__config.html#a92a3c47d697bc5b194927aa44c0e6015">name</a>;</div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span>    <a class="code hl_variable" href="struct_p_s_sub_config.html#ab18064f7dc58ff0a4a3d7b3be02297c9">topic</a> = uc.<a class="code hl_variable" href="structrgw__pubsub__sub__config.html#a79ce2e4dd5509860d73df83b9f0a9e90">topic</a>;</div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span>    <a class="code hl_variable" href="struct_p_s_sub_config.html#a6fc5ee773745f36bd759e3ca727a2fc3">push_endpoint_name</a> = uc.<a class="code hl_variable" href="structrgw__pubsub__sub__config.html#ae7c74458c25652c1198b1c3a55e98f65">dest</a>.<a class="code hl_variable" href="structrgw__pubsub__sub__dest.html#aaf8ab3b6b22e08943d0fbfa2b43403d7">push_endpoint</a>;</div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span>    <a class="code hl_variable" href="struct_p_s_sub_config.html#a8262c2223c4ebde2e6ab52692614b9bd">data_bucket_name</a> = uc.<a class="code hl_variable" href="structrgw__pubsub__sub__config.html#ae7c74458c25652c1198b1c3a55e98f65">dest</a>.<a class="code hl_variable" href="structrgw__pubsub__sub__dest.html#a1e5e9a00f5a86a940303451ffc0823a2">bucket_name</a>;</div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span>    <a class="code hl_variable" href="struct_p_s_sub_config.html#ac157d698c580721858457b2cf5b3d7a9">data_oid_prefix</a> = uc.<a class="code hl_variable" href="structrgw__pubsub__sub__config.html#ae7c74458c25652c1198b1c3a55e98f65">dest</a>.<a class="code hl_variable" href="structrgw__pubsub__sub__dest.html#a6c258a5d09b6e9ff74ddf5f36e673a12">oid_prefix</a>;</div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span>    <a class="code hl_variable" href="struct_p_s_sub_config.html#a51ca2eaa634de0edb43aa51be69dde53">s3_id</a> = uc.<a class="code hl_variable" href="structrgw__pubsub__sub__config.html#a2c6a74a3bb67eb35eb743301bdd37d8d">s3_id</a>;</div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span>    <a class="code hl_variable" href="struct_p_s_sub_config.html#a51cfbe8aabdb7d03c620aba2f16b7ed6">arn_topic</a> = uc.<a class="code hl_variable" href="structrgw__pubsub__sub__config.html#ae7c74458c25652c1198b1c3a55e98f65">dest</a>.<a class="code hl_variable" href="structrgw__pubsub__sub__dest.html#ab97eac8437ab564a809cdaa0889ada50">arn_topic</a>;</div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="struct_p_s_sub_config.html#a6fc5ee773745f36bd759e3ca727a2fc3">push_endpoint_name</a>.empty()) {</div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span>      <a class="code hl_variable" href="struct_p_s_sub_config.html#acf41dc25c09e4a27cc26bb1f85a38b43">push_endpoint_args</a> = uc.<a class="code hl_variable" href="structrgw__pubsub__sub__config.html#ae7c74458c25652c1198b1c3a55e98f65">dest</a>.<a class="code hl_variable" href="structrgw__pubsub__sub__dest.html#a110a1005dce12971695a00e702ef754e">push_endpoint_args</a>;</div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span>      <span class="keywordflow">try</span> {</div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span>        <a class="code hl_variable" href="struct_p_s_sub_config.html#a3a98d3cc7cdab841b1bd37766b840cb1">push_endpoint</a> = <a class="code hl_function" href="class_r_g_w_pub_sub_endpoint.html#a9003e177cc55046e2a889a07a42a2cb2">RGWPubSubEndpoint::create</a>(<a class="code hl_variable" href="struct_p_s_sub_config.html#a6fc5ee773745f36bd759e3ca727a2fc3">push_endpoint_name</a>, <a class="code hl_variable" href="struct_p_s_sub_config.html#a51cfbe8aabdb7d03c620aba2f16b7ed6">arn_topic</a>, <a class="code hl_function" href="rgw__sync__module__pubsub_8cc.html#a7dfdc68b9c480a297b0765caacb2acf3">string_to_args</a>(<a class="code hl_variable" href="struct_p_s_sub_config.html#acf41dc25c09e4a27cc26bb1f85a38b43">push_endpoint_args</a>, <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>), <a class="code hl_variable" href="cls__fifo__legacy_8cc.html#aa76801f7597f40e158b5f38b2e6466c5">cct</a>);</div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span>        ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 20) &lt;&lt; <span class="stringliteral">&quot;push endpoint created: &quot;</span> &lt;&lt; <a class="code hl_variable" href="struct_p_s_sub_config.html#a3a98d3cc7cdab841b1bd37766b840cb1">push_endpoint</a>-&gt;to_str() &lt;&lt; dendl;</div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span>      } <span class="keywordflow">catch</span> (<span class="keyword">const</span> <a class="code hl_struct" href="struct_r_g_w_pub_sub_endpoint_1_1configuration__error.html">RGWPubSubEndpoint::configuration_error</a>&amp; e) {</div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span>          ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 1) &lt;&lt; <span class="stringliteral">&quot;ERROR: failed to create push endpoint: &quot;</span> </div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span>            &lt;&lt; <a class="code hl_variable" href="struct_p_s_sub_config.html#a6fc5ee773745f36bd759e3ca727a2fc3">push_endpoint_name</a> &lt;&lt; <span class="stringliteral">&quot; due to: &quot;</span> &lt;&lt; e.what() &lt;&lt; dendl;</div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span>      }</div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span>    }</div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span>  }</div>
</div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span> </div>
<div class="foldopen" id="foldopen00086" data-start="{" data-end="}">
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno"><a class="line" href="struct_p_s_sub_config.html#a4c7c2170bd2cb019c1870e478da44eb3">   86</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="struct_p_s_sub_config.html#a4c7c2170bd2cb019c1870e478da44eb3">dump</a>(Formatter *f)<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span>    <a class="code hl_function" href="rgw__admin_8cc.html#ab596b9e1a1fc78e98a4d13a66578b658">encode_json</a>(<span class="stringliteral">&quot;name&quot;</span>, <a class="code hl_variable" href="struct_p_s_sub_config.html#a03238ea5955e12178cea7a7a1772ce01">name</a>, f);</div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span>    <a class="code hl_function" href="rgw__admin_8cc.html#ab596b9e1a1fc78e98a4d13a66578b658">encode_json</a>(<span class="stringliteral">&quot;topic&quot;</span>, <a class="code hl_variable" href="struct_p_s_sub_config.html#ab18064f7dc58ff0a4a3d7b3be02297c9">topic</a>, f);</div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span>    <a class="code hl_function" href="rgw__admin_8cc.html#ab596b9e1a1fc78e98a4d13a66578b658">encode_json</a>(<span class="stringliteral">&quot;push_endpoint&quot;</span>, <a class="code hl_variable" href="struct_p_s_sub_config.html#a6fc5ee773745f36bd759e3ca727a2fc3">push_endpoint_name</a>, f);</div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span>    <a class="code hl_function" href="rgw__admin_8cc.html#ab596b9e1a1fc78e98a4d13a66578b658">encode_json</a>(<span class="stringliteral">&quot;push_endpoint_args&quot;</span>, <a class="code hl_variable" href="struct_p_s_sub_config.html#acf41dc25c09e4a27cc26bb1f85a38b43">push_endpoint_args</a>, f);</div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span>    <a class="code hl_function" href="rgw__admin_8cc.html#ab596b9e1a1fc78e98a4d13a66578b658">encode_json</a>(<span class="stringliteral">&quot;data_bucket_name&quot;</span>, <a class="code hl_variable" href="struct_p_s_sub_config.html#a8262c2223c4ebde2e6ab52692614b9bd">data_bucket_name</a>, f);</div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span>    <a class="code hl_function" href="rgw__admin_8cc.html#ab596b9e1a1fc78e98a4d13a66578b658">encode_json</a>(<span class="stringliteral">&quot;data_oid_prefix&quot;</span>, <a class="code hl_variable" href="struct_p_s_sub_config.html#ac157d698c580721858457b2cf5b3d7a9">data_oid_prefix</a>, f);</div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span>    <a class="code hl_function" href="rgw__admin_8cc.html#ab596b9e1a1fc78e98a4d13a66578b658">encode_json</a>(<span class="stringliteral">&quot;s3_id&quot;</span>, <a class="code hl_variable" href="struct_p_s_sub_config.html#a51ca2eaa634de0edb43aa51be69dde53">s3_id</a>, f);</div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span>  }</div>
</div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span> </div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span>};</div>
</div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span> </div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno"><a class="line" href="rgw__sync__module__pubsub_8cc.html#a9c6fe8a9e35bb688bdc0dfcb46e74a91">   98</a></span><span class="keyword">using  </span><a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#a9c6fe8a9e35bb688bdc0dfcb46e74a91">PSSubConfigRef</a> = std::shared_ptr&lt;PSSubConfig&gt;;</div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span> </div>
<div class="foldopen" id="foldopen00100" data-start="{" data-end="};">
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno"><a class="line" href="struct_p_s_topic_config.html">  100</a></span><span class="keyword">struct </span><a class="code hl_struct" href="struct_p_s_topic_config.html">PSTopicConfig</a> {</div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno"><a class="line" href="struct_p_s_topic_config.html#a26e57a4405ccfebf21c0a8cbdbfeaee4">  101</a></span>  std::string <a class="code hl_variable" href="struct_p_s_topic_config.html#a26e57a4405ccfebf21c0a8cbdbfeaee4">name</a>;</div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno"><a class="line" href="struct_p_s_topic_config.html#a6fd0a0a9394a49e1ed75f95dc2ed30ba">  102</a></span>  std::set&lt;std::string&gt; <a class="code hl_variable" href="struct_p_s_topic_config.html#a6fd0a0a9394a49e1ed75f95dc2ed30ba">subs</a>;</div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno"><a class="line" href="struct_p_s_topic_config.html#ab543c8ee0b95c9cd27369656b82ef954">  103</a></span>  std::string <a class="code hl_variable" href="struct_p_s_topic_config.html#ab543c8ee0b95c9cd27369656b82ef954">opaque_data</a>;</div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span> </div>
<div class="foldopen" id="foldopen00105" data-start="{" data-end="}">
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno"><a class="line" href="struct_p_s_topic_config.html#a715109e8e76643e00a7e0254ad743e52">  105</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="struct_p_s_topic_config.html#a715109e8e76643e00a7e0254ad743e52">dump</a>(Formatter *f)<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span>    <a class="code hl_function" href="rgw__admin_8cc.html#ab596b9e1a1fc78e98a4d13a66578b658">encode_json</a>(<span class="stringliteral">&quot;name&quot;</span>, <a class="code hl_variable" href="struct_p_s_topic_config.html#a26e57a4405ccfebf21c0a8cbdbfeaee4">name</a>, f);</div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span>    <a class="code hl_function" href="rgw__admin_8cc.html#ab596b9e1a1fc78e98a4d13a66578b658">encode_json</a>(<span class="stringliteral">&quot;subs&quot;</span>, <a class="code hl_variable" href="struct_p_s_topic_config.html#a6fd0a0a9394a49e1ed75f95dc2ed30ba">subs</a>, f);</div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span>    <a class="code hl_function" href="rgw__admin_8cc.html#ab596b9e1a1fc78e98a4d13a66578b658">encode_json</a>(<span class="stringliteral">&quot;opaque&quot;</span>, <a class="code hl_variable" href="struct_p_s_topic_config.html#ab543c8ee0b95c9cd27369656b82ef954">opaque_data</a>, f);</div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span>  }</div>
</div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span>};</div>
</div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span> </div>
<div class="foldopen" id="foldopen00112" data-start="{" data-end="};">
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno"><a class="line" href="struct_p_s_notification_config.html">  112</a></span><span class="keyword">struct </span><a class="code hl_struct" href="struct_p_s_notification_config.html">PSNotificationConfig</a> {</div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno"><a class="line" href="struct_p_s_notification_config.html#ac1c4bc68960396253054e67e66f07196">  113</a></span>  uint64_t <span class="keywordtype">id</span>{0};</div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno"><a class="line" href="struct_p_s_notification_config.html#ab89a399a7361b3e7b440748c70ecac69">  114</a></span>  <span class="keywordtype">string</span> <a class="code hl_variable" href="struct_p_s_notification_config.html#ab89a399a7361b3e7b440748c70ecac69">path</a>; <span class="comment">/* a path or a path prefix that would trigger the event (prefix: if ends with a wildcard) */</span></div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno"><a class="line" href="struct_p_s_notification_config.html#a82e83f9c55b844e2bd355ba1358f108c">  115</a></span>  <span class="keywordtype">string</span> <a class="code hl_variable" href="struct_p_s_notification_config.html#a82e83f9c55b844e2bd355ba1358f108c">topic</a>;</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno"><a class="line" href="struct_p_s_notification_config.html#a14f1d0a8985462525b6ba2ada6fe82c3">  116</a></span>  <span class="keywordtype">bool</span> <a class="code hl_variable" href="struct_p_s_notification_config.html#a14f1d0a8985462525b6ba2ada6fe82c3">is_prefix</a>{<span class="keyword">false</span>};</div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span> </div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span> </div>
<div class="foldopen" id="foldopen00119" data-start="{" data-end="}">
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno"><a class="line" href="struct_p_s_notification_config.html#a3aca458c5d9c6afeb07c60672a3dc847">  119</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="struct_p_s_notification_config.html#a3aca458c5d9c6afeb07c60672a3dc847">dump</a>(Formatter *f)<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span>    <a class="code hl_function" href="rgw__admin_8cc.html#ab596b9e1a1fc78e98a4d13a66578b658">encode_json</a>(<span class="stringliteral">&quot;id&quot;</span>, <span class="keywordtype">id</span>, f);</div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span>    <a class="code hl_function" href="rgw__admin_8cc.html#ab596b9e1a1fc78e98a4d13a66578b658">encode_json</a>(<span class="stringliteral">&quot;path&quot;</span>, <a class="code hl_variable" href="struct_p_s_notification_config.html#ab89a399a7361b3e7b440748c70ecac69">path</a>, f);</div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span>    <a class="code hl_function" href="rgw__admin_8cc.html#ab596b9e1a1fc78e98a4d13a66578b658">encode_json</a>(<span class="stringliteral">&quot;topic&quot;</span>, <a class="code hl_variable" href="struct_p_s_notification_config.html#a82e83f9c55b844e2bd355ba1358f108c">topic</a>, f);</div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span>    <a class="code hl_function" href="rgw__admin_8cc.html#ab596b9e1a1fc78e98a4d13a66578b658">encode_json</a>(<span class="stringliteral">&quot;is_prefix&quot;</span>, <a class="code hl_variable" href="struct_p_s_notification_config.html#a14f1d0a8985462525b6ba2ada6fe82c3">is_prefix</a>, f);</div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span>  }</div>
</div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span> </div>
<div class="foldopen" id="foldopen00126" data-start="{" data-end="}">
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno"><a class="line" href="struct_p_s_notification_config.html#ab2237fa94b7667613f50482aea9cab06">  126</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="struct_p_s_notification_config.html#ab2237fa94b7667613f50482aea9cab06">init</a>(CephContext *<a class="code hl_variable" href="cls__fifo__legacy_8cc.html#aa76801f7597f40e158b5f38b2e6466c5">cct</a>, <span class="keyword">const</span> JSONFormattable&amp; config) {</div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span>    <a class="code hl_variable" href="struct_p_s_notification_config.html#ab89a399a7361b3e7b440748c70ecac69">path</a> = config[<span class="stringliteral">&quot;path&quot;</span>];</div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="struct_p_s_notification_config.html#ab89a399a7361b3e7b440748c70ecac69">path</a>.empty() &amp;&amp; <a class="code hl_variable" href="struct_p_s_notification_config.html#ab89a399a7361b3e7b440748c70ecac69">path</a>[<a class="code hl_variable" href="struct_p_s_notification_config.html#ab89a399a7361b3e7b440748c70ecac69">path</a>.size() - 1] == <span class="charliteral">&#39;*&#39;</span>) {</div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span>      <a class="code hl_variable" href="struct_p_s_notification_config.html#ab89a399a7361b3e7b440748c70ecac69">path</a> = <a class="code hl_variable" href="struct_p_s_notification_config.html#ab89a399a7361b3e7b440748c70ecac69">path</a>.substr(0, <a class="code hl_variable" href="struct_p_s_notification_config.html#ab89a399a7361b3e7b440748c70ecac69">path</a>.size() - 1);</div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span>      <a class="code hl_variable" href="struct_p_s_notification_config.html#a14f1d0a8985462525b6ba2ada6fe82c3">is_prefix</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span>    }</div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>    <a class="code hl_variable" href="struct_p_s_notification_config.html#a82e83f9c55b844e2bd355ba1358f108c">topic</a> = config[<span class="stringliteral">&quot;topic&quot;</span>];</div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span>  }</div>
</div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span>};</div>
</div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span> </div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span><span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;</div>
<div class="foldopen" id="foldopen00137" data-start="{" data-end="}">
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno"><a class="line" href="rgw__sync__module__pubsub_8cc.html#a95cd156406f6d627131b4faa761e7ae6">  137</a></span><span class="keyword">static</span> <span class="keywordtype">string</span> <a class="code hl_function" href="rgw__sync__module__pubsub_8cc.html#a95cd156406f6d627131b4faa761e7ae6">json_str</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *name, <span class="keyword">const</span> T&amp; obj, <span class="keywordtype">bool</span> pretty = <span class="keyword">false</span>)</div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span>{</div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span>  stringstream ss;</div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span>  JSONFormatter f(pretty);</div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span> </div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span>  <a class="code hl_function" href="rgw__admin_8cc.html#ab596b9e1a1fc78e98a4d13a66578b658">encode_json</a>(name, obj, &amp;f);</div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span>  f.flush(ss);</div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span> </div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>  <span class="keywordflow">return</span> ss.str();</div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span>}</div>
</div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span> </div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno"><a class="line" href="rgw__sync__module__pubsub_8cc.html#ae2fa2f9ee7be9ec943c521e7f7699c8e">  148</a></span><span class="keyword">using </span><a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#ae2fa2f9ee7be9ec943c521e7f7699c8e">PSTopicConfigRef</a> = std::shared_ptr&lt;PSTopicConfig&gt;;</div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno"><a class="line" href="rgw__sync__module__pubsub_8cc.html#a8fac3e9ba436ccafb2b1e164c38b2c93">  149</a></span><span class="keyword">using </span><a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#a8fac3e9ba436ccafb2b1e164c38b2c93">TopicsRef</a> = std::shared_ptr&lt;std::vector&lt;PSTopicConfigRef&gt;&gt;;</div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span> </div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span><span class="comment">// global pubsub configuration</span></div>
<div class="foldopen" id="foldopen00152" data-start="{" data-end="};">
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno"><a class="line" href="struct_p_s_config.html">  152</a></span><span class="keyword">struct </span><a class="code hl_struct" href="struct_p_s_config.html">PSConfig</a> {</div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno"><a class="line" href="struct_p_s_config.html#a7673b925985cdb92b6c238b8c6864fc1">  153</a></span>  <span class="keyword">const</span> std::string <span class="keywordtype">id</span>{<span class="stringliteral">&quot;pubsub&quot;</span>};</div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno"><a class="line" href="struct_p_s_config.html#a0df602336f5a24790614a208bc07b3f1">  154</a></span>  <a class="code hl_struct" href="structrgw__user.html">rgw_user</a> <a class="code hl_variable" href="struct_p_s_config.html#a0df602336f5a24790614a208bc07b3f1">user</a>;</div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno"><a class="line" href="struct_p_s_config.html#a18e2e43ebfb9f59cbac58f05a5e6ca17">  155</a></span>  std::string <a class="code hl_variable" href="struct_p_s_config.html#a18e2e43ebfb9f59cbac58f05a5e6ca17">data_bucket_prefix</a>;</div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno"><a class="line" href="struct_p_s_config.html#a1ee5e13f4ef43093281f5afcdf4a0b07">  156</a></span>  std::string <a class="code hl_variable" href="struct_p_s_config.html#a1ee5e13f4ef43093281f5afcdf4a0b07">data_oid_prefix</a>;</div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno"><a class="line" href="struct_p_s_config.html#a5065eb5d4e3f9ea317ba106646df4103">  157</a></span>  <span class="keywordtype">int</span> <a class="code hl_variable" href="struct_p_s_config.html#a5065eb5d4e3f9ea317ba106646df4103">events_retention_days</a>{0};</div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno"><a class="line" href="struct_p_s_config.html#af0dc2efa711ff046c9ec82eed4fe7eb5">  158</a></span>  uint64_t <a class="code hl_variable" href="struct_p_s_config.html#af0dc2efa711ff046c9ec82eed4fe7eb5">sync_instance</a>{0};</div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno"><a class="line" href="struct_p_s_config.html#a1011cdcb9dd21e8379affc79dd125dfb">  159</a></span>  <span class="keywordtype">bool</span> <a class="code hl_variable" href="struct_p_s_config.html#a1011cdcb9dd21e8379affc79dd125dfb">start_with_full_sync</a>{<span class="keyword">false</span>};</div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span> </div>
<div class="foldopen" id="foldopen00161" data-start="{" data-end="}">
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno"><a class="line" href="struct_p_s_config.html#ad04250d3a569e60e9ecffda77b82cc32">  161</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="struct_p_s_config.html#ad04250d3a569e60e9ecffda77b82cc32">dump</a>(Formatter *f)<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span>    <a class="code hl_function" href="rgw__admin_8cc.html#ab596b9e1a1fc78e98a4d13a66578b658">encode_json</a>(<span class="stringliteral">&quot;id&quot;</span>, <span class="keywordtype">id</span>, f);</div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span>    <a class="code hl_function" href="rgw__admin_8cc.html#ab596b9e1a1fc78e98a4d13a66578b658">encode_json</a>(<span class="stringliteral">&quot;user&quot;</span>, <a class="code hl_variable" href="struct_p_s_config.html#a0df602336f5a24790614a208bc07b3f1">user</a>, f);</div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span>    <a class="code hl_function" href="rgw__admin_8cc.html#ab596b9e1a1fc78e98a4d13a66578b658">encode_json</a>(<span class="stringliteral">&quot;data_bucket_prefix&quot;</span>, <a class="code hl_variable" href="struct_p_s_config.html#a18e2e43ebfb9f59cbac58f05a5e6ca17">data_bucket_prefix</a>, f);</div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span>    <a class="code hl_function" href="rgw__admin_8cc.html#ab596b9e1a1fc78e98a4d13a66578b658">encode_json</a>(<span class="stringliteral">&quot;data_oid_prefix&quot;</span>, <a class="code hl_variable" href="struct_p_s_config.html#a1ee5e13f4ef43093281f5afcdf4a0b07">data_oid_prefix</a>, f);</div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span>    <a class="code hl_function" href="rgw__admin_8cc.html#ab596b9e1a1fc78e98a4d13a66578b658">encode_json</a>(<span class="stringliteral">&quot;events_retention_days&quot;</span>, <a class="code hl_variable" href="struct_p_s_config.html#a5065eb5d4e3f9ea317ba106646df4103">events_retention_days</a>, f);</div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span>    <a class="code hl_function" href="rgw__admin_8cc.html#ab596b9e1a1fc78e98a4d13a66578b658">encode_json</a>(<span class="stringliteral">&quot;sync_instance&quot;</span>, <a class="code hl_variable" href="struct_p_s_config.html#af0dc2efa711ff046c9ec82eed4fe7eb5">sync_instance</a>, f);</div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span>    <a class="code hl_function" href="rgw__admin_8cc.html#ab596b9e1a1fc78e98a4d13a66578b658">encode_json</a>(<span class="stringliteral">&quot;start_with_full_sync&quot;</span>, <a class="code hl_variable" href="struct_p_s_config.html#a1011cdcb9dd21e8379affc79dd125dfb">start_with_full_sync</a>, f);</div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span>  }</div>
</div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span> </div>
<div class="foldopen" id="foldopen00171" data-start="{" data-end="}">
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno"><a class="line" href="struct_p_s_config.html#a43e8af7304151cecfe7b6bf5af81456c">  171</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="struct_p_s_config.html#a43e8af7304151cecfe7b6bf5af81456c">init</a>(CephContext *<a class="code hl_variable" href="cls__fifo__legacy_8cc.html#aa76801f7597f40e158b5f38b2e6466c5">cct</a>, <span class="keyword">const</span> JSONFormattable&amp; config) {</div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span>    <span class="keywordtype">string</span> uid = config[<span class="stringliteral">&quot;uid&quot;</span>](<span class="stringliteral">&quot;pubsub&quot;</span>);</div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span>    <a class="code hl_variable" href="struct_p_s_config.html#a0df602336f5a24790614a208bc07b3f1">user</a> = <a class="code hl_struct" href="structrgw__user.html">rgw_user</a>(config[<span class="stringliteral">&quot;tenant&quot;</span>], uid);</div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span>    <a class="code hl_variable" href="struct_p_s_config.html#a18e2e43ebfb9f59cbac58f05a5e6ca17">data_bucket_prefix</a> = config[<span class="stringliteral">&quot;data_bucket_prefix&quot;</span>](<span class="stringliteral">&quot;pubsub-&quot;</span>);</div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>    <a class="code hl_variable" href="struct_p_s_config.html#a1ee5e13f4ef43093281f5afcdf4a0b07">data_oid_prefix</a> = config[<span class="stringliteral">&quot;data_oid_prefix&quot;</span>];</div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span>    <a class="code hl_variable" href="struct_p_s_config.html#a5065eb5d4e3f9ea317ba106646df4103">events_retention_days</a> = config[<span class="stringliteral">&quot;events_retention_days&quot;</span>](<a class="code hl_define" href="rgw__sync__module__pubsub_8cc.html#a70e5b84b7bca0feba6fcd9334622d05b">PUBSUB_EVENTS_RETENTION_DEFAULT</a>);</div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span>    <a class="code hl_variable" href="struct_p_s_config.html#a1011cdcb9dd21e8379affc79dd125dfb">start_with_full_sync</a> = config[<span class="stringliteral">&quot;start_with_full_sync&quot;</span>](<span class="keyword">false</span>);</div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span> </div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span>    ldout(<a class="code hl_variable" href="cls__fifo__legacy_8cc.html#aa76801f7597f40e158b5f38b2e6466c5">cct</a>, 20) &lt;&lt; <span class="stringliteral">&quot;pubsub: module config (parsed representation):\n&quot;</span> &lt;&lt; <a class="code hl_function" href="rgw__sync__module__pubsub_8cc.html#a95cd156406f6d627131b4faa761e7ae6">json_str</a>(<span class="stringliteral">&quot;config&quot;</span>, *<span class="keyword">this</span>, <span class="keyword">true</span>) &lt;&lt; dendl;</div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span>  }</div>
</div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span> </div>
<div class="foldopen" id="foldopen00182" data-start="{" data-end="}">
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno"><a class="line" href="struct_p_s_config.html#a34f7155019591b8be21330d1533758dc">  182</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="struct_p_s_config.html#a34f7155019591b8be21330d1533758dc">init_instance</a>(<span class="keyword">const</span> <a class="code hl_class" href="class_r_g_w_realm.html">RGWRealm</a>&amp; realm, uint64_t instance_id) {</div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span>    <a class="code hl_variable" href="struct_p_s_config.html#af0dc2efa711ff046c9ec82eed4fe7eb5">sync_instance</a> = instance_id;</div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span>  }</div>
</div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>};</div>
</div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span> </div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno"><a class="line" href="rgw__sync__module__pubsub_8cc.html#ae3f05c1346843738a4e4afdd42062743">  187</a></span><span class="keyword">using </span><a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#ae3f05c1346843738a4e4afdd42062743">PSConfigRef</a> = std::shared_ptr&lt;PSConfig&gt;;</div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span><span class="keyword">template</span>&lt;<span class="keyword">typename</span> EventType&gt;</div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno"><a class="line" href="rgw__sync__module__pubsub_8cc.html#ad8b26748ff02957ec1ec373a4f0a420f">  189</a></span><span class="keyword">using </span><a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#ad8b26748ff02957ec1ec373a4f0a420f">EventRef</a> = std::shared_ptr&lt;EventType&gt;;</div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span> </div>
<div class="foldopen" id="foldopen00191" data-start="{" data-end="};">
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno"><a class="line" href="structobjstore__event.html">  191</a></span><span class="keyword">struct </span><a class="code hl_struct" href="structobjstore__event.html">objstore_event</a> {</div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno"><a class="line" href="structobjstore__event.html#ab35dd6cfecb32abe5ca39c05389a0dc4">  192</a></span>  <span class="keywordtype">string</span> <a class="code hl_variable" href="structobjstore__event.html#ab35dd6cfecb32abe5ca39c05389a0dc4">id</a>;</div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno"><a class="line" href="structobjstore__event.html#ab461bfcdd98095af4ccc46b89c53b56a">  193</a></span>  <span class="keyword">const</span> <a class="code hl_struct" href="structrgw__bucket.html">rgw_bucket</a>&amp; <a class="code hl_variable" href="structobjstore__event.html#ab461bfcdd98095af4ccc46b89c53b56a">bucket</a>;</div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno"><a class="line" href="structobjstore__event.html#a262cce77588787e038d0bfc43f26cad3">  194</a></span>  <span class="keyword">const</span> <a class="code hl_struct" href="structrgw__obj__key.html">rgw_obj_key</a>&amp; <a class="code hl_variable" href="structobjstore__event.html#a262cce77588787e038d0bfc43f26cad3">key</a>;</div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno"><a class="line" href="structobjstore__event.html#a34e342e85f1ba28a36ffccfc2a8c79ab">  195</a></span>  <span class="keyword">const</span> ceph::real_time&amp; <a class="code hl_variable" href="structobjstore__event.html#a34e342e85f1ba28a36ffccfc2a8c79ab">mtime</a>;</div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno"><a class="line" href="structobjstore__event.html#ad90c20b6ade97157088b251d7c012a5f">  196</a></span>  <span class="keyword">const</span> std::vector&lt;std::pair&lt;std::string, std::string&gt; &gt; *<a class="code hl_variable" href="structobjstore__event.html#ad90c20b6ade97157088b251d7c012a5f">attrs</a>;</div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span> </div>
<div class="foldopen" id="foldopen00198" data-start="{" data-end="}">
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno"><a class="line" href="structobjstore__event.html#a0abbaa9e526823a22e65a6364ab6de7b">  198</a></span>  <a class="code hl_function" href="structobjstore__event.html#a0abbaa9e526823a22e65a6364ab6de7b">objstore_event</a>(<span class="keyword">const</span> <a class="code hl_struct" href="structrgw__bucket.html">rgw_bucket</a>&amp; _bucket,</div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span>                 <span class="keyword">const</span> <a class="code hl_struct" href="structrgw__obj__key.html">rgw_obj_key</a>&amp; _key,</div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span>                 <span class="keyword">const</span> ceph::real_time&amp; _mtime,</div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span>                 <span class="keyword">const</span> std::vector&lt;std::pair&lt;std::string, std::string&gt; &gt; *_attrs) : <a class="code hl_variable" href="structobjstore__event.html#ab461bfcdd98095af4ccc46b89c53b56a">bucket</a>(_bucket),</div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span>                                                  <a class="code hl_variable" href="structobjstore__event.html#a262cce77588787e038d0bfc43f26cad3">key</a>(_key),</div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span>                                                  <a class="code hl_variable" href="structobjstore__event.html#a34e342e85f1ba28a36ffccfc2a8c79ab">mtime</a>(_mtime),</div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span>                                                  <a class="code hl_variable" href="structobjstore__event.html#ad90c20b6ade97157088b251d7c012a5f">attrs</a>(_attrs) {}</div>
</div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span> </div>
<div class="foldopen" id="foldopen00206" data-start="{" data-end="}">
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno"><a class="line" href="structobjstore__event.html#a68245bcb773218d0a9263ca05bff167a">  206</a></span>  <span class="keywordtype">string</span> <a class="code hl_function" href="structobjstore__event.html#a68245bcb773218d0a9263ca05bff167a">get_hash</a>() {</div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span>    <span class="keywordtype">string</span> etag;</div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span>    <a class="code hl_typedef" href="rgw__tools_8h.html#a85b5065426630907194d5173ec4800b8">RGWMD5Etag</a> hash;</div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span>    hash.update(<a class="code hl_variable" href="structobjstore__event.html#ab461bfcdd98095af4ccc46b89c53b56a">bucket</a>.<a class="code hl_variable" href="structrgw__bucket.html#adaba18504e183a1e80d861533a81c2a1">bucket_id</a>);</div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span>    hash.update(<a class="code hl_variable" href="structobjstore__event.html#a262cce77588787e038d0bfc43f26cad3">key</a>.<a class="code hl_variable" href="structrgw__obj__key.html#a009cbe657bf6a001d40af0a80e533186">name</a>);</div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span>    hash.update(<a class="code hl_variable" href="structobjstore__event.html#a262cce77588787e038d0bfc43f26cad3">key</a>.<a class="code hl_variable" href="structrgw__obj__key.html#aa73e7ab93fad1f34c58dc9e87917213c">instance</a>);</div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span>    hash.finish(&amp;etag);</div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span> </div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span>    assert(etag.size() &gt; 8);</div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span> </div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span>    <span class="keywordflow">return</span> etag.substr(0, 8);</div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span>  }</div>
</div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span> </div>
<div class="foldopen" id="foldopen00219" data-start="{" data-end="}">
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno"><a class="line" href="structobjstore__event.html#a6614af82d0158d75284b6b2edec6a7fc">  219</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="structobjstore__event.html#a6614af82d0158d75284b6b2edec6a7fc">dump</a>(Formatter *f)<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span>    {</div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span>      Formatter::ObjectSection s(*f, <span class="stringliteral">&quot;bucket&quot;</span>);</div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span>      <a class="code hl_function" href="rgw__admin_8cc.html#ab596b9e1a1fc78e98a4d13a66578b658">encode_json</a>(<span class="stringliteral">&quot;name&quot;</span>, <a class="code hl_variable" href="structobjstore__event.html#ab461bfcdd98095af4ccc46b89c53b56a">bucket</a>.<a class="code hl_variable" href="structrgw__bucket.html#a32d3529f5b0c53051c856a7abe867a6b">name</a>, f);</div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span>      <a class="code hl_function" href="rgw__admin_8cc.html#ab596b9e1a1fc78e98a4d13a66578b658">encode_json</a>(<span class="stringliteral">&quot;tenant&quot;</span>, <a class="code hl_variable" href="structobjstore__event.html#ab461bfcdd98095af4ccc46b89c53b56a">bucket</a>.<a class="code hl_variable" href="structrgw__bucket.html#ac2d65e02c9242ad2ea2ad31da15d8836">tenant</a>, f);</div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span>      <a class="code hl_function" href="rgw__admin_8cc.html#ab596b9e1a1fc78e98a4d13a66578b658">encode_json</a>(<span class="stringliteral">&quot;bucket_id&quot;</span>, <a class="code hl_variable" href="structobjstore__event.html#ab461bfcdd98095af4ccc46b89c53b56a">bucket</a>.<a class="code hl_variable" href="structrgw__bucket.html#adaba18504e183a1e80d861533a81c2a1">bucket_id</a>, f);</div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span>    }</div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span>    {</div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span>      Formatter::ObjectSection s(*f, <span class="stringliteral">&quot;key&quot;</span>);</div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span>      <a class="code hl_function" href="rgw__admin_8cc.html#ab596b9e1a1fc78e98a4d13a66578b658">encode_json</a>(<span class="stringliteral">&quot;name&quot;</span>, <a class="code hl_variable" href="structobjstore__event.html#a262cce77588787e038d0bfc43f26cad3">key</a>.<a class="code hl_variable" href="structrgw__obj__key.html#a009cbe657bf6a001d40af0a80e533186">name</a>, f);</div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span>      <a class="code hl_function" href="rgw__admin_8cc.html#ab596b9e1a1fc78e98a4d13a66578b658">encode_json</a>(<span class="stringliteral">&quot;instance&quot;</span>, <a class="code hl_variable" href="structobjstore__event.html#a262cce77588787e038d0bfc43f26cad3">key</a>.<a class="code hl_variable" href="structrgw__obj__key.html#aa73e7ab93fad1f34c58dc9e87917213c">instance</a>, f);</div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span>    }</div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span>    utime_t mt(<a class="code hl_variable" href="structobjstore__event.html#a34e342e85f1ba28a36ffccfc2a8c79ab">mtime</a>);</div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span>    <a class="code hl_function" href="rgw__admin_8cc.html#ab596b9e1a1fc78e98a4d13a66578b658">encode_json</a>(<span class="stringliteral">&quot;mtime&quot;</span>, mt, f);</div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span>    Formatter::ObjectSection s(*f, <span class="stringliteral">&quot;attrs&quot;</span>);</div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="structobjstore__event.html#ad90c20b6ade97157088b251d7c012a5f">attrs</a>) {</div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span>      <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; attr : *<a class="code hl_variable" href="structobjstore__event.html#ad90c20b6ade97157088b251d7c012a5f">attrs</a>) {</div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span>        <a class="code hl_function" href="rgw__admin_8cc.html#ab596b9e1a1fc78e98a4d13a66578b658">encode_json</a>(attr.first.c_str(), attr.second.c_str(), f);</div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span>      }</div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span>    }</div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span>  }</div>
</div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span>};</div>
</div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span> </div>
<div class="foldopen" id="foldopen00242" data-start="{" data-end="}">
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno"><a class="line" href="rgw__sync__module__pubsub_8cc.html#a680685668a648b33b677265fc07be8ae">  242</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="rgw__sync__module__pubsub_8cc.html#a680685668a648b33b677265fc07be8ae">make_event_ref</a>(CephContext *<a class="code hl_variable" href="cls__fifo__legacy_8cc.html#aa76801f7597f40e158b5f38b2e6466c5">cct</a>, <span class="keyword">const</span> <a class="code hl_struct" href="structrgw__bucket.html">rgw_bucket</a>&amp; bucket,</div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span>                       <span class="keyword">const</span> <a class="code hl_struct" href="structrgw__obj__key.html">rgw_obj_key</a>&amp; key,</div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span>                       <span class="keyword">const</span> ceph::real_time&amp; mtime,</div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span>                       <span class="keyword">const</span> std::vector&lt;std::pair&lt;std::string, std::string&gt; &gt; *attrs,</div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span>                       <a class="code hl_enumeration" href="namespacergw_1_1notify.html#a11587407d1aff95c9cb4a10979ba813b">rgw::notify::EventType</a> event_type,</div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span>                       <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#ad8b26748ff02957ec1ec373a4f0a420f">EventRef&lt;rgw_pubsub_event&gt;</a> *event) {</div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span>  *<span class="keyword">event</span> = std::make_shared&lt;rgw_pubsub_event&gt;();</div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span> </div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span>  <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#ad8b26748ff02957ec1ec373a4f0a420f">EventRef&lt;rgw_pubsub_event&gt;</a>&amp; e = *event;</div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span>  e-&gt;event_name = <a class="code hl_function" href="namespacergw_1_1notify.html#aa5f191df4111ed6a5034ba18ae6f8932">rgw::notify::to_ceph_string</a>(event_type);</div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span>  e-&gt;source = bucket.<a class="code hl_variable" href="structrgw__bucket.html#a32d3529f5b0c53051c856a7abe867a6b">name</a> + <span class="stringliteral">&quot;/&quot;</span> + key.<a class="code hl_variable" href="structrgw__obj__key.html#a009cbe657bf6a001d40af0a80e533186">name</a>;</div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span>  e-&gt;timestamp = real_clock::now();</div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span> </div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span>  <a class="code hl_struct" href="structobjstore__event.html">objstore_event</a> oevent(bucket, key, mtime, attrs);</div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span> </div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span>  <span class="keyword">const</span> utime_t ts(e-&gt;timestamp);</div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span>  <a class="code hl_function" href="rgw__pubsub_8cc.html#a9e56763a419e65292a4d5057e92d52a4">set_event_id</a>(e-&gt;id, oevent.<a class="code hl_function" href="structobjstore__event.html#a68245bcb773218d0a9263ca05bff167a">get_hash</a>(), ts);</div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span> </div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span>  <a class="code hl_function" href="rgw__admin_8cc.html#ab596b9e1a1fc78e98a4d13a66578b658">encode_json</a>(<span class="stringliteral">&quot;info&quot;</span>, oevent, &amp;e-&gt;info);</div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span>}</div>
</div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span> </div>
<div class="foldopen" id="foldopen00263" data-start="{" data-end="}">
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno"><a class="line" href="rgw__sync__module__pubsub_8cc.html#a8b3691422cb11d18dc41d77815abbb6b">  263</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="rgw__sync__module__pubsub_8cc.html#a8b3691422cb11d18dc41d77815abbb6b">make_s3_event_ref</a>(CephContext *<a class="code hl_variable" href="cls__fifo__legacy_8cc.html#aa76801f7597f40e158b5f38b2e6466c5">cct</a>, <span class="keyword">const</span> <a class="code hl_struct" href="structrgw__bucket.html">rgw_bucket</a>&amp; bucket,</div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span>                       <span class="keyword">const</span> <a class="code hl_struct" href="structrgw__user.html">rgw_user</a>&amp; owner,</div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span>                       <span class="keyword">const</span> <a class="code hl_struct" href="structrgw__obj__key.html">rgw_obj_key</a>&amp; key,</div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span>                       <span class="keyword">const</span> ceph::real_time&amp; mtime,</div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span>                       <span class="keyword">const</span> std::vector&lt;std::pair&lt;std::string, std::string&gt;&gt;* attrs,</div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span>                       <a class="code hl_enumeration" href="namespacergw_1_1notify.html#a11587407d1aff95c9cb4a10979ba813b">rgw::notify::EventType</a> event_type,</div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span>                       <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#ad8b26748ff02957ec1ec373a4f0a420f">EventRef&lt;rgw_pubsub_s3_event&gt;</a>* event) {</div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span>  *<span class="keyword">event</span> = std::make_shared&lt;rgw_pubsub_s3_event&gt;();</div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span> </div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span>  <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#ad8b26748ff02957ec1ec373a4f0a420f">EventRef&lt;rgw_pubsub_s3_event&gt;</a>&amp; e = *event;</div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span>  e-&gt;eventTime = mtime;</div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span>  e-&gt;eventName = <a class="code hl_function" href="namespacergw_1_1notify.html#a0de1420337c1b154fc1ac06c8edc8dd8">rgw::notify::to_event_string</a>(event_type);</div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span>  <span class="comment">// userIdentity: not supported in sync module</span></div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span>  <span class="comment">// x_amz_request_id: not supported in sync module</span></div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span>  <span class="comment">// x_amz_id_2: not supported in sync module</span></div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span>  <span class="comment">// configurationId is filled from subscription configuration</span></div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span>  e-&gt;bucket_name = bucket.<a class="code hl_variable" href="structrgw__bucket.html#a32d3529f5b0c53051c856a7abe867a6b">name</a>;</div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span>  e-&gt;bucket_ownerIdentity = owner.<a class="code hl_function" href="structrgw__user.html#af00f510d6a9ff0580d87ee46b274d96e">to_str</a>();</div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span>  e-&gt;bucket_arn = <a class="code hl_function" href="rgw__keystone_8cc.html#a97140a592af15535629f284708b8f5b4">to_string</a>(<a class="code hl_struct" href="structrgw_1_1_a_r_n.html">rgw::ARN</a>(bucket));</div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span>  e-&gt;bucket_id = bucket.<a class="code hl_variable" href="structrgw__bucket.html#adaba18504e183a1e80d861533a81c2a1">bucket_id</a>; <span class="comment">// rgw extension</span></div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span>  e-&gt;object_key = key.<a class="code hl_variable" href="structrgw__obj__key.html#a009cbe657bf6a001d40af0a80e533186">name</a>;</div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span>  <span class="comment">// object_size not supported in sync module</span></div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span>  <a class="code hl_struct" href="structobjstore__event.html">objstore_event</a> oevent(bucket, key, mtime, attrs);</div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span>  e-&gt;object_etag = oevent.<a class="code hl_function" href="structobjstore__event.html#a68245bcb773218d0a9263ca05bff167a">get_hash</a>();</div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span>  e-&gt;object_versionId = key.<a class="code hl_variable" href="structrgw__obj__key.html#aa73e7ab93fad1f34c58dc9e87917213c">instance</a>;</div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span> </div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span>  <span class="comment">// use timestamp as per key sequence id (hex encoded)</span></div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span>  <span class="keyword">const</span> utime_t ts(real_clock::now());</div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span>  boost::algorithm::hex((<span class="keyword">const</span> <span class="keywordtype">char</span>*)&amp;ts, (<span class="keyword">const</span> <span class="keywordtype">char</span>*)&amp;ts + <span class="keyword">sizeof</span>(utime_t), </div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span>          std::back_inserter(e-&gt;object_sequencer));</div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span> </div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span>  <a class="code hl_function" href="rgw__pubsub_8cc.html#a9e56763a419e65292a4d5057e92d52a4">set_event_id</a>(e-&gt;id, e-&gt;object_etag, ts);</div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span>}</div>
</div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span> </div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span><span class="keyword">class </span><a class="code hl_class" href="class_p_s_manager.html">PSManager</a>;</div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno"><a class="line" href="rgw__sync__module__pubsub_8cc.html#a3d66fdaaedde99f94c039dc9c8d47221">  298</a></span><span class="keyword">using </span><a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#a3d66fdaaedde99f94c039dc9c8d47221">PSManagerRef</a> = std::shared_ptr&lt;PSManager&gt;;</div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span> </div>
<div class="foldopen" id="foldopen00300" data-start="{" data-end="};">
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno"><a class="line" href="struct_p_s_env.html">  300</a></span><span class="keyword">struct </span><a class="code hl_struct" href="struct_p_s_env.html">PSEnv</a> {</div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno"><a class="line" href="struct_p_s_env.html#aaab4313f2e25eb7c50a7772c6ff5709b">  301</a></span>  <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#ae3f05c1346843738a4e4afdd42062743">PSConfigRef</a> <a class="code hl_variable" href="struct_p_s_env.html#aaab4313f2e25eb7c50a7772c6ff5709b">conf</a>;</div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno"><a class="line" href="struct_p_s_env.html#ae3f5221860df55b9e1e246b16029edef">  302</a></span>  shared_ptr&lt;RGWUserInfo&gt; <a class="code hl_variable" href="struct_p_s_env.html#ae3f5221860df55b9e1e246b16029edef">data_user_info</a>;</div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno"><a class="line" href="struct_p_s_env.html#aa9230495cea76b6a71da060edc8a5c04">  303</a></span>  <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#a3d66fdaaedde99f94c039dc9c8d47221">PSManagerRef</a> <a class="code hl_variable" href="struct_p_s_env.html#aa9230495cea76b6a71da060edc8a5c04">manager</a>;</div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span> </div>
<div class="foldopen" id="foldopen00305" data-start="{" data-end="}">
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno"><a class="line" href="struct_p_s_env.html#a5f6995908970b4892492a3d087cf51f5">  305</a></span>  <a class="code hl_function" href="struct_p_s_env.html#a5f6995908970b4892492a3d087cf51f5">PSEnv</a>() : <a class="code hl_variable" href="struct_p_s_env.html#aaab4313f2e25eb7c50a7772c6ff5709b">conf</a>(make_shared&lt;<a class="code hl_struct" href="struct_p_s_config.html">PSConfig</a>&gt;()),</div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span>            <a class="code hl_variable" href="struct_p_s_env.html#ae3f5221860df55b9e1e246b16029edef">data_user_info</a>(make_shared&lt;<a class="code hl_struct" href="struct_r_g_w_user_info.html">RGWUserInfo</a>&gt;()) {}</div>
</div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span> </div>
<div class="foldopen" id="foldopen00308" data-start="{" data-end="}">
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno"><a class="line" href="struct_p_s_env.html#aee0fd8840556210b994db8a07412d2ff">  308</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="struct_p_s_env.html#aee0fd8840556210b994db8a07412d2ff">init</a>(CephContext *<a class="code hl_variable" href="cls__fifo__legacy_8cc.html#aa76801f7597f40e158b5f38b2e6466c5">cct</a>, <span class="keyword">const</span> JSONFormattable&amp; config) {</div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span>    <a class="code hl_variable" href="struct_p_s_env.html#aaab4313f2e25eb7c50a7772c6ff5709b">conf</a>-&gt;init(<a class="code hl_variable" href="cls__fifo__legacy_8cc.html#aa76801f7597f40e158b5f38b2e6466c5">cct</a>, config);</div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span>  }</div>
</div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span> </div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span>  <span class="keywordtype">void</span> <a class="code hl_function" href="struct_p_s_env.html#a45e838ea9b7fda4ded69dcc450089dba">init_instance</a>(<span class="keyword">const</span> <a class="code hl_class" href="class_r_g_w_realm.html">RGWRealm</a>&amp; realm, uint64_t instance_id, <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#a3d66fdaaedde99f94c039dc9c8d47221">PSManagerRef</a>&amp; mgr);</div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span>};</div>
</div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span> </div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno"><a class="line" href="rgw__sync__module__pubsub_8cc.html#a8cf75fd83a22c03e4eeae0932b31752a">  315</a></span><span class="keyword">using </span><a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#a8cf75fd83a22c03e4eeae0932b31752a">PSEnvRef</a> = std::shared_ptr&lt;PSEnv&gt;;</div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span> </div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span><span class="keyword">template</span>&lt;<span class="keyword">typename</span> EventType&gt;</div>
<div class="foldopen" id="foldopen00318" data-start="{" data-end="};">
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno"><a class="line" href="class_p_s_event.html">  318</a></span><span class="keyword">class </span><a class="code hl_class" href="class_p_s_event.html">PSEvent</a> {</div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno"><a class="line" href="class_p_s_event.html#ae20bfb6cf34f8ca1a5cc7e68d035ba12">  319</a></span>  <span class="keyword">const</span> <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#ad8b26748ff02957ec1ec373a4f0a420f">EventRef&lt;EventType&gt;</a> <a class="code hl_variable" href="class_p_s_event.html#ae20bfb6cf34f8ca1a5cc7e68d035ba12">event</a>;</div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno">  320</span> </div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span><span class="keyword">public</span>:</div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno"><a class="line" href="class_p_s_event.html#aeb6397afbf705b874a4235e5390a1957">  322</a></span>  <a class="code hl_function" href="class_p_s_event.html#aeb6397afbf705b874a4235e5390a1957">PSEvent</a>(<span class="keyword">const</span> <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#ad8b26748ff02957ec1ec373a4f0a420f">EventRef&lt;EventType&gt;</a>&amp; _event) : <a class="code hl_variable" href="class_p_s_event.html#ae20bfb6cf34f8ca1a5cc7e68d035ba12">event</a>(_event) {}</div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span> </div>
<div class="foldopen" id="foldopen00324" data-start="{" data-end="}">
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno"><a class="line" href="class_p_s_event.html#afabf8c753decc69b48189ee73e04629e">  324</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="class_p_s_event.html#afabf8c753decc69b48189ee73e04629e">format</a>(bufferlist *bl)<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span>    bl-&gt;append(<a class="code hl_function" href="rgw__sync__module__pubsub_8cc.html#a95cd156406f6d627131b4faa761e7ae6">json_str</a>(<span class="stringliteral">&quot;&quot;</span>, *<a class="code hl_variable" href="class_p_s_event.html#ae20bfb6cf34f8ca1a5cc7e68d035ba12">event</a>));</div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno">  326</span>  }</div>
</div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span> </div>
<div class="foldopen" id="foldopen00328" data-start="{" data-end="}">
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno"><a class="line" href="class_p_s_event.html#a704ae8b1d791c16aef5be6aec9f02f6f">  328</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="class_p_s_event.html#a704ae8b1d791c16aef5be6aec9f02f6f">encode_event</a>(bufferlist&amp; bl)<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span>    <a class="code hl_function" href="rgw__log__backing_8h.html#adc91400029fb575818b2a0ccf89e7928">encode</a>(*<a class="code hl_variable" href="class_p_s_event.html#ae20bfb6cf34f8ca1a5cc7e68d035ba12">event</a>, bl);</div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span>  }</div>
</div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span> </div>
<div class="foldopen" id="foldopen00332" data-start="{" data-end="}">
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno"><a class="line" href="class_p_s_event.html#ad05eab9d15f549ab8521ec4771eba38f">  332</a></span>  <span class="keyword">const</span> <span class="keywordtype">string</span>&amp; <a class="code hl_function" href="class_p_s_event.html#ad05eab9d15f549ab8521ec4771eba38f">id</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span>    <span class="keywordflow">return</span> <span class="keyword">event</span>-&gt;id;</div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span>  }</div>
</div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno">  335</span>};</div>
</div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno">  336</span> </div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span><span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;</div>
<div class="foldopen" id="foldopen00338" data-start="{" data-end="};">
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno"><a class="line" href="class_r_g_w_singleton_c_r.html">  338</a></span><span class="keyword">class </span><a class="code hl_class" href="class_r_g_w_singleton_c_r.html">RGWSingletonCR</a> : <span class="keyword">public</span> <a class="code hl_class" href="class_r_g_w_coroutine.html">RGWCoroutine</a> {</div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno"><a class="line" href="class_r_g_w_singleton_c_r.html#a7f763ccf3f2a19bc38c4ac7d8e2bb2bc">  339</a></span>  <span class="keyword">friend</span> <span class="keyword">class </span><a class="code hl_friend" href="class_r_g_w_singleton_c_r.html#a7f763ccf3f2a19bc38c4ac7d8e2bb2bc">WrapperCR</a>;</div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span> </div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno"><a class="line" href="class_r_g_w_singleton_c_r.html#ae3902032df77636ea44b67acffe42e5c">  341</a></span>  boost::asio::coroutine <a class="code hl_variable" href="class_r_g_w_singleton_c_r.html#ae3902032df77636ea44b67acffe42e5c">wrapper_state</a>;</div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno"><a class="line" href="class_r_g_w_singleton_c_r.html#a8a9d0809e3201b86496a37210e0f210c">  342</a></span>  <span class="keywordtype">bool</span> <a class="code hl_variable" href="class_r_g_w_singleton_c_r.html#a8a9d0809e3201b86496a37210e0f210c">started</a>{<span class="keyword">false</span>};</div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno"><a class="line" href="class_r_g_w_singleton_c_r.html#a8a9d7e7272c3e70d22965f77efe10249">  343</a></span>  <span class="keywordtype">int</span> <a class="code hl_variable" href="class_r_g_w_singleton_c_r.html#a8a9d7e7272c3e70d22965f77efe10249">operate_ret</a>{0};</div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span> </div>
<div class="foldopen" id="foldopen00345" data-start="{" data-end="};">
<div class="line"><a id="l00345" name="l00345"></a><span class="lineno"><a class="line" href="struct_r_g_w_singleton_c_r_1_1_waiter_info.html">  345</a></span>  <span class="keyword">struct </span><a class="code hl_struct" href="struct_r_g_w_singleton_c_r_1_1_waiter_info.html">WaiterInfo</a> {</div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno"><a class="line" href="struct_r_g_w_singleton_c_r_1_1_waiter_info.html#aa22c38a798fe5ed3a9954d3871acb04d">  346</a></span>    <a class="code hl_class" href="class_r_g_w_coroutine.html">RGWCoroutine</a> *<a class="code hl_variable" href="struct_r_g_w_singleton_c_r_1_1_waiter_info.html#aa22c38a798fe5ed3a9954d3871acb04d">cr</a>{<span class="keyword">nullptr</span>};</div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno"><a class="line" href="struct_r_g_w_singleton_c_r_1_1_waiter_info.html#add957d50c34ab69844eb8fa49c480cc0">  347</a></span>    T *<a class="code hl_variable" href="struct_r_g_w_singleton_c_r_1_1_waiter_info.html#add957d50c34ab69844eb8fa49c480cc0">result</a>;</div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span>  };</div>
</div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno"><a class="line" href="class_r_g_w_singleton_c_r.html#aa8b6cc5695d596f614e3498f54720bc1">  349</a></span>  <span class="keyword">using </span><a class="code hl_typedef" href="class_r_g_w_singleton_c_r.html#aa8b6cc5695d596f614e3498f54720bc1">WaiterInfoRef</a> = std::shared_ptr&lt;WaiterInfo&gt;;</div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span> </div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno"><a class="line" href="class_r_g_w_singleton_c_r.html#ae4a0ab836402e2ec0995a90d60a0f0fd">  351</a></span>  deque&lt;WaiterInfoRef&gt; <a class="code hl_variable" href="class_r_g_w_singleton_c_r.html#ae4a0ab836402e2ec0995a90d60a0f0fd">waiters</a>;</div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno">  352</span> </div>
<div class="foldopen" id="foldopen00353" data-start="{" data-end="}">
<div class="line"><a id="l00353" name="l00353"></a><span class="lineno"><a class="line" href="class_r_g_w_singleton_c_r.html#ae5103028f3e6e71346e051697ce8019f">  353</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="class_r_g_w_singleton_c_r.html#ae5103028f3e6e71346e051697ce8019f">add_waiter</a>(<a class="code hl_class" href="class_r_g_w_coroutine.html">RGWCoroutine</a> *<a class="code hl_variable" href="class_r_g_w_coroutine.html#afe82e9cf95cc651b8ffd425bea688563">cr</a>, T *result) {</div>
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span>    <span class="keyword">auto</span> waiter = std::make_shared&lt;WaiterInfo&gt;();</div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span>    waiter-&gt;cr = <a class="code hl_variable" href="class_r_g_w_coroutine.html#afe82e9cf95cc651b8ffd425bea688563">cr</a>;</div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno">  356</span>    waiter-&gt;result = result;</div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span>    <a class="code hl_variable" href="class_r_g_w_singleton_c_r.html#ae4a0ab836402e2ec0995a90d60a0f0fd">waiters</a>.push_back(waiter);</div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno">  358</span>  };</div>
</div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span> </div>
<div class="foldopen" id="foldopen00360" data-start="{" data-end="}">
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno"><a class="line" href="class_r_g_w_singleton_c_r.html#acad4a5551313873c792e7d505a833abc">  360</a></span>  <span class="keywordtype">bool</span> <a class="code hl_function" href="class_r_g_w_singleton_c_r.html#acad4a5551313873c792e7d505a833abc">get_next_waiter</a>(<a class="code hl_typedef" href="class_r_g_w_singleton_c_r.html#aa8b6cc5695d596f614e3498f54720bc1">WaiterInfoRef</a> *waiter) {</div>
<div class="line"><a id="l00361" name="l00361"></a><span class="lineno">  361</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_r_g_w_singleton_c_r.html#ae4a0ab836402e2ec0995a90d60a0f0fd">waiters</a>.empty()) {</div>
<div class="line"><a id="l00362" name="l00362"></a><span class="lineno">  362</span>      waiter-&gt;reset();</div>
<div class="line"><a id="l00363" name="l00363"></a><span class="lineno">  363</span>      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00364" name="l00364"></a><span class="lineno">  364</span>    }</div>
<div class="line"><a id="l00365" name="l00365"></a><span class="lineno">  365</span> </div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span>    *waiter = <a class="code hl_variable" href="class_r_g_w_singleton_c_r.html#ae4a0ab836402e2ec0995a90d60a0f0fd">waiters</a>.front();</div>
<div class="line"><a id="l00367" name="l00367"></a><span class="lineno">  367</span>    <a class="code hl_variable" href="class_r_g_w_singleton_c_r.html#ae4a0ab836402e2ec0995a90d60a0f0fd">waiters</a>.pop_front();</div>
<div class="line"><a id="l00368" name="l00368"></a><span class="lineno">  368</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00369" name="l00369"></a><span class="lineno">  369</span>  }</div>
</div>
<div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span> </div>
<div class="foldopen" id="foldopen00371" data-start="{" data-end="}">
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno"><a class="line" href="class_r_g_w_singleton_c_r.html#ad547fc89f0175d7f7628b445723cbd48">  371</a></span>  <span class="keywordtype">int</span> <a class="code hl_function" href="class_r_g_w_singleton_c_r.html#ad547fc89f0175d7f7628b445723cbd48">operate_wrapper</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>)<span class="keyword"> override </span>{</div>
<div class="line"><a id="l00372" name="l00372"></a><span class="lineno">  372</span>    reenter(&amp;<a class="code hl_variable" href="class_r_g_w_singleton_c_r.html#ae3902032df77636ea44b67acffe42e5c">wrapper_state</a>) {</div>
<div class="line"><a id="l00373" name="l00373"></a><span class="lineno">  373</span>      <span class="keywordflow">while</span> (!<a class="code hl_function" href="class_r_g_w_coroutine.html#a448c57de2331dfe757400bc0187ee5b5">is_done</a>()) {</div>
<div class="line"><a id="l00374" name="l00374"></a><span class="lineno">  374</span>        ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 20) &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;(): operate_wrapper() -&gt; operate()&quot;</span> &lt;&lt; dendl;</div>
<div class="line"><a id="l00375" name="l00375"></a><span class="lineno">  375</span>        <a class="code hl_variable" href="class_r_g_w_singleton_c_r.html#a8a9d7e7272c3e70d22965f77efe10249">operate_ret</a> = <a class="code hl_function" href="class_r_g_w_coroutine.html#a32f8dded216b7ead89cfa5b2b3494dfe">operate</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>);</div>
<div class="line"><a id="l00376" name="l00376"></a><span class="lineno">  376</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_r_g_w_singleton_c_r.html#a8a9d7e7272c3e70d22965f77efe10249">operate_ret</a> &lt; 0) {</div>
<div class="line"><a id="l00377" name="l00377"></a><span class="lineno">  377</span>          ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 20) &lt;&lt; *<span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;: operate() returned r=&quot;</span> &lt;&lt; <a class="code hl_variable" href="class_r_g_w_singleton_c_r.html#a8a9d7e7272c3e70d22965f77efe10249">operate_ret</a> &lt;&lt; dendl;</div>
<div class="line"><a id="l00378" name="l00378"></a><span class="lineno">  378</span>        }</div>
<div class="line"><a id="l00379" name="l00379"></a><span class="lineno">  379</span>        <span class="keywordflow">if</span> (!<a class="code hl_function" href="class_r_g_w_coroutine.html#a448c57de2331dfe757400bc0187ee5b5">is_done</a>()) {</div>
<div class="line"><a id="l00380" name="l00380"></a><span class="lineno">  380</span>          yield;</div>
<div class="line"><a id="l00381" name="l00381"></a><span class="lineno">  381</span>        }</div>
<div class="line"><a id="l00382" name="l00382"></a><span class="lineno">  382</span>      }</div>
<div class="line"><a id="l00383" name="l00383"></a><span class="lineno">  383</span> </div>
<div class="line"><a id="l00384" name="l00384"></a><span class="lineno">  384</span>      ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 20) &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;(): RGWSingletonCR: operate_wrapper() done, need to wake up &quot;</span> &lt;&lt; <a class="code hl_variable" href="class_r_g_w_singleton_c_r.html#ae4a0ab836402e2ec0995a90d60a0f0fd">waiters</a>.size() &lt;&lt; <span class="stringliteral">&quot; waiters&quot;</span> &lt;&lt; dendl;</div>
<div class="line"><a id="l00385" name="l00385"></a><span class="lineno">  385</span>      <span class="comment">/* we&#39;re done, can&#39;t yield anymore */</span></div>
<div class="line"><a id="l00386" name="l00386"></a><span class="lineno">  386</span> </div>
<div class="line"><a id="l00387" name="l00387"></a><span class="lineno">  387</span>      <a class="code hl_typedef" href="class_r_g_w_singleton_c_r.html#aa8b6cc5695d596f614e3498f54720bc1">WaiterInfoRef</a> waiter;</div>
<div class="line"><a id="l00388" name="l00388"></a><span class="lineno">  388</span>      <span class="keywordflow">while</span> (<a class="code hl_function" href="class_r_g_w_singleton_c_r.html#acad4a5551313873c792e7d505a833abc">get_next_waiter</a>(&amp;waiter)) {</div>
<div class="line"><a id="l00389" name="l00389"></a><span class="lineno">  389</span>        ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 20) &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;(): RGWSingletonCR: waking up waiter&quot;</span> &lt;&lt; dendl;</div>
<div class="line"><a id="l00390" name="l00390"></a><span class="lineno">  390</span>        waiter-&gt;cr-&gt;set_retcode(<a class="code hl_variable" href="class_r_g_w_coroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a>);</div>
<div class="line"><a id="l00391" name="l00391"></a><span class="lineno">  391</span>        waiter-&gt;cr-&gt;set_sleeping(<span class="keyword">false</span>);</div>
<div class="line"><a id="l00392" name="l00392"></a><span class="lineno">  392</span>        <a class="code hl_function" href="class_r_g_w_singleton_c_r.html#a482e86c0bc1551827659f65ee24d0999">return_result</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, waiter-&gt;result);</div>
<div class="line"><a id="l00393" name="l00393"></a><span class="lineno">  393</span>        put();</div>
<div class="line"><a id="l00394" name="l00394"></a><span class="lineno">  394</span>      }</div>
<div class="line"><a id="l00395" name="l00395"></a><span class="lineno">  395</span> </div>
<div class="line"><a id="l00396" name="l00396"></a><span class="lineno">  396</span>      <span class="keywordflow">return</span> <a class="code hl_variable" href="class_r_g_w_coroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a>;</div>
<div class="line"><a id="l00397" name="l00397"></a><span class="lineno">  397</span>    }</div>
<div class="line"><a id="l00398" name="l00398"></a><span class="lineno">  398</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00399" name="l00399"></a><span class="lineno">  399</span>  }</div>
</div>
<div class="line"><a id="l00400" name="l00400"></a><span class="lineno">  400</span> </div>
<div class="line"><a id="l00401" name="l00401"></a><span class="lineno"><a class="line" href="class_r_g_w_singleton_c_r.html#a482e86c0bc1551827659f65ee24d0999">  401</a></span>  <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_r_g_w_singleton_c_r.html#a482e86c0bc1551827659f65ee24d0999">return_result</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, T *result) {}</div>
<div class="line"><a id="l00402" name="l00402"></a><span class="lineno">  402</span> </div>
<div class="line"><a id="l00403" name="l00403"></a><span class="lineno">  403</span><span class="keyword">public</span>:</div>
<div class="foldopen" id="foldopen00404" data-start="{" data-end="}">
<div class="line"><a id="l00404" name="l00404"></a><span class="lineno"><a class="line" href="class_r_g_w_singleton_c_r.html#ab35c142506f45e8a2d5cfbc3cabf3563">  404</a></span>  <a class="code hl_function" href="class_r_g_w_singleton_c_r.html#ab35c142506f45e8a2d5cfbc3cabf3563">RGWSingletonCR</a>(CephContext *_cct)</div>
<div class="line"><a id="l00405" name="l00405"></a><span class="lineno">  405</span>    : <a class="code hl_class" href="class_r_g_w_coroutine.html">RGWCoroutine</a>(_cct) {}</div>
</div>
<div class="line"><a id="l00406" name="l00406"></a><span class="lineno">  406</span> </div>
<div class="foldopen" id="foldopen00407" data-start="{" data-end="}">
<div class="line"><a id="l00407" name="l00407"></a><span class="lineno"><a class="line" href="class_r_g_w_singleton_c_r.html#ab91fb80e453b0fc5fd4fc596ff128b45">  407</a></span>  <span class="keywordtype">int</span> <a class="code hl_function" href="class_r_g_w_singleton_c_r.html#ab91fb80e453b0fc5fd4fc596ff128b45">execute</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_class" href="class_r_g_w_coroutine.html">RGWCoroutine</a> *caller, T *result = <span class="keyword">nullptr</span>) {</div>
<div class="line"><a id="l00408" name="l00408"></a><span class="lineno">  408</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="class_r_g_w_singleton_c_r.html#a8a9d0809e3201b86496a37210e0f210c">started</a>) {</div>
<div class="line"><a id="l00409" name="l00409"></a><span class="lineno">  409</span>      ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 20) &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;(): singleton not started, starting&quot;</span> &lt;&lt; dendl;</div>
<div class="line"><a id="l00410" name="l00410"></a><span class="lineno">  410</span>      <a class="code hl_variable" href="class_r_g_w_singleton_c_r.html#a8a9d0809e3201b86496a37210e0f210c">started</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00411" name="l00411"></a><span class="lineno">  411</span>      caller-&gt;<a class="code hl_function" href="class_r_g_w_coroutine.html#a60c1d6187851953e8a5e1dbc97f69bbd">call</a>(<span class="keyword">this</span>);</div>
<div class="line"><a id="l00412" name="l00412"></a><span class="lineno">  412</span>      <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00413" name="l00413"></a><span class="lineno">  413</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_function" href="class_r_g_w_coroutine.html#a448c57de2331dfe757400bc0187ee5b5">is_done</a>()) {</div>
<div class="line"><a id="l00414" name="l00414"></a><span class="lineno">  414</span>      ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 20) &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;(): singleton not done yet, registering as waiter&quot;</span> &lt;&lt; dendl;</div>
<div class="line"><a id="l00415" name="l00415"></a><span class="lineno">  415</span>      get();</div>
<div class="line"><a id="l00416" name="l00416"></a><span class="lineno">  416</span>      <a class="code hl_function" href="class_r_g_w_singleton_c_r.html#ae5103028f3e6e71346e051697ce8019f">add_waiter</a>(caller, result);</div>
<div class="line"><a id="l00417" name="l00417"></a><span class="lineno">  417</span>      caller-&gt;<a class="code hl_function" href="class_r_g_w_coroutine.html#aab2ada61e785db0e4d6f50f56825fdf8">set_sleeping</a>(<span class="keyword">true</span>);</div>
<div class="line"><a id="l00418" name="l00418"></a><span class="lineno">  418</span>      <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00419" name="l00419"></a><span class="lineno">  419</span>    }</div>
<div class="line"><a id="l00420" name="l00420"></a><span class="lineno">  420</span> </div>
<div class="line"><a id="l00421" name="l00421"></a><span class="lineno">  421</span>    ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 20) &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;(): singleton done, returning retcode=&quot;</span> &lt;&lt; <a class="code hl_variable" href="class_r_g_w_coroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a> &lt;&lt; dendl;</div>
<div class="line"><a id="l00422" name="l00422"></a><span class="lineno">  422</span>    caller-&gt;<a class="code hl_function" href="class_r_g_w_coroutine.html#a71a3278d2998c966e8a08021ed4a3936">set_retcode</a>(<a class="code hl_variable" href="class_r_g_w_coroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a>);</div>
<div class="line"><a id="l00423" name="l00423"></a><span class="lineno">  423</span>    <a class="code hl_function" href="class_r_g_w_singleton_c_r.html#a482e86c0bc1551827659f65ee24d0999">return_result</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, result);</div>
<div class="line"><a id="l00424" name="l00424"></a><span class="lineno">  424</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="class_r_g_w_coroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a>;</div>
<div class="line"><a id="l00425" name="l00425"></a><span class="lineno">  425</span>  }</div>
</div>
<div class="line"><a id="l00426" name="l00426"></a><span class="lineno">  426</span>};</div>
</div>
<div class="line"><a id="l00427" name="l00427"></a><span class="lineno">  427</span> </div>
<div class="line"><a id="l00428" name="l00428"></a><span class="lineno">  428</span> </div>
<div class="line"><a id="l00429" name="l00429"></a><span class="lineno">  429</span><span class="keyword">class </span><a class="code hl_class" href="class_p_s_subscription.html">PSSubscription</a>;</div>
<div class="line"><a id="l00430" name="l00430"></a><span class="lineno"><a class="line" href="rgw__sync__module__pubsub_8cc.html#a6b984d869299084410b95debaf7a9163">  430</a></span><span class="keyword">using </span><a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#a6b984d869299084410b95debaf7a9163">PSSubscriptionRef</a> = std::shared_ptr&lt;PSSubscription&gt;;</div>
<div class="line"><a id="l00431" name="l00431"></a><span class="lineno">  431</span> </div>
<div class="foldopen" id="foldopen00432" data-start="{" data-end="};">
<div class="line"><a id="l00432" name="l00432"></a><span class="lineno"><a class="line" href="class_p_s_subscription.html">  432</a></span><span class="keyword">class </span><a class="code hl_class" href="class_p_s_subscription.html">PSSubscription</a> {</div>
<div class="line"><a id="l00433" name="l00433"></a><span class="lineno">  433</span>  <span class="keyword">class </span><a class="code hl_class" href="class_p_s_subscription_1_1_init_c_r.html">InitCR</a>;</div>
<div class="line"><a id="l00434" name="l00434"></a><span class="lineno"><a class="line" href="class_p_s_subscription.html#a20ecee3272e7d1441b7846d150581ab2">  434</a></span>  <span class="keyword">friend</span> <span class="keyword">class </span><a class="code hl_class" href="class_p_s_subscription_1_1_init_c_r.html">InitCR</a>;</div>
<div class="line"><a id="l00435" name="l00435"></a><span class="lineno"><a class="line" href="class_p_s_subscription.html#aa91f9ed284522d1eb2520e246b69709c">  435</a></span>  <span class="keyword">friend</span> <span class="keyword">class </span><a class="code hl_class" href="class_r_g_w_p_s_handle_obj_event_c_r.html">RGWPSHandleObjEventCR</a>;</div>
<div class="line"><a id="l00436" name="l00436"></a><span class="lineno">  436</span> </div>
<div class="line"><a id="l00437" name="l00437"></a><span class="lineno"><a class="line" href="class_p_s_subscription.html#adc76ddde13ef0b537499d5b9de98dfe7">  437</a></span>  <a class="code hl_struct" href="struct_r_g_w_data_sync_ctx.html">RGWDataSyncCtx</a> *<a class="code hl_variable" href="class_p_s_subscription.html#adc76ddde13ef0b537499d5b9de98dfe7">sc</a>;</div>
<div class="line"><a id="l00438" name="l00438"></a><span class="lineno"><a class="line" href="class_p_s_subscription.html#a31143970c91f05756ab122702bea3bff">  438</a></span>  <a class="code hl_struct" href="struct_r_g_w_data_sync_env.html">RGWDataSyncEnv</a> *<a class="code hl_variable" href="class_p_s_subscription.html#a31143970c91f05756ab122702bea3bff">sync_env</a>;</div>
<div class="line"><a id="l00439" name="l00439"></a><span class="lineno"><a class="line" href="class_p_s_subscription.html#ac19d731eb2eefd3b630d14735f1b130c">  439</a></span>  <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#a8cf75fd83a22c03e4eeae0932b31752a">PSEnvRef</a> <a class="code hl_variable" href="class_p_s_subscription.html#ac19d731eb2eefd3b630d14735f1b130c">env</a>;</div>
<div class="line"><a id="l00440" name="l00440"></a><span class="lineno"><a class="line" href="class_p_s_subscription.html#a9c8bfa5cfb2bdfa87066800216853c3e">  440</a></span>  <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#a9c6fe8a9e35bb688bdc0dfcb46e74a91">PSSubConfigRef</a> <a class="code hl_variable" href="class_p_s_subscription.html#a9c8bfa5cfb2bdfa87066800216853c3e">sub_conf</a>;</div>
<div class="line"><a id="l00441" name="l00441"></a><span class="lineno"><a class="line" href="class_p_s_subscription.html#ab10b3e0a59846c58280ddc8b6e2022c2">  441</a></span>  std::shared_ptr&lt;rgw_get_bucket_info_result&gt; <a class="code hl_variable" href="class_p_s_subscription.html#ab10b3e0a59846c58280ddc8b6e2022c2">get_bucket_info_result</a>;</div>
<div class="line"><a id="l00442" name="l00442"></a><span class="lineno"><a class="line" href="class_p_s_subscription.html#a857b6d396707dd72963f20db53c1b15d">  442</a></span>  <a class="code hl_struct" href="struct_r_g_w_bucket_info.html">RGWBucketInfo</a> *<a class="code hl_variable" href="class_p_s_subscription.html#a857b6d396707dd72963f20db53c1b15d">bucket_info</a>{<span class="keyword">nullptr</span>};</div>
<div class="line"><a id="l00443" name="l00443"></a><span class="lineno"><a class="line" href="class_p_s_subscription.html#a111d5feeb4587d071f69f5304d368200">  443</a></span>  <a class="code hl_typedef" href="rgw__tools_8h.html#a424683aeaaea10250523c7ec526a3804">RGWDataAccessRef</a> <a class="code hl_variable" href="class_p_s_subscription.html#a111d5feeb4587d071f69f5304d368200">data_access</a>;</div>
<div class="line"><a id="l00444" name="l00444"></a><span class="lineno"><a class="line" href="class_p_s_subscription.html#aa9c57ccd05027899a7b816ecb03f751a">  444</a></span>  <a class="code hl_typedef" href="class_r_g_w_data_access.html#a111204bb0879434a2ae00e2eca9ec026">RGWDataAccess::BucketRef</a> <a class="code hl_variable" href="class_p_s_subscription.html#aa9c57ccd05027899a7b816ecb03f751a">bucket</a>;</div>
<div class="line"><a id="l00445" name="l00445"></a><span class="lineno">  445</span> </div>
<div class="line"><a id="l00446" name="l00446"></a><span class="lineno"><a class="line" href="class_p_s_subscription.html#aa1613e48f041939f124734d07ab51c9c">  446</a></span>  <a class="code hl_class" href="class_p_s_subscription_1_1_init_c_r.html">InitCR</a> *<a class="code hl_variable" href="class_p_s_subscription.html#aa1613e48f041939f124734d07ab51c9c">init_cr</a>{<span class="keyword">nullptr</span>};</div>
<div class="line"><a id="l00447" name="l00447"></a><span class="lineno">  447</span> </div>
<div class="foldopen" id="foldopen00448" data-start="{" data-end="};">
<div class="line"><a id="l00448" name="l00448"></a><span class="lineno"><a class="line" href="class_p_s_subscription_1_1_init_bucket_lifecycle_c_r.html">  448</a></span>  <span class="keyword">class </span><a class="code hl_class" href="class_p_s_subscription_1_1_init_bucket_lifecycle_c_r.html">InitBucketLifecycleCR</a> : <span class="keyword">public</span> <a class="code hl_class" href="class_r_g_w_coroutine.html">RGWCoroutine</a> {</div>
<div class="line"><a id="l00449" name="l00449"></a><span class="lineno"><a class="line" href="class_p_s_subscription_1_1_init_bucket_lifecycle_c_r.html#afbbc865bd8f1346577f38e5b5fbcb5f2">  449</a></span>    <a class="code hl_struct" href="struct_r_g_w_data_sync_ctx.html">RGWDataSyncCtx</a> *<a class="code hl_variable" href="class_p_s_subscription_1_1_init_bucket_lifecycle_c_r.html#afbbc865bd8f1346577f38e5b5fbcb5f2">sc</a>;</div>
<div class="line"><a id="l00450" name="l00450"></a><span class="lineno"><a class="line" href="class_p_s_subscription_1_1_init_bucket_lifecycle_c_r.html#a50a3f90df2a5d75f63f734bdba895d40">  450</a></span>    <a class="code hl_struct" href="struct_r_g_w_data_sync_env.html">RGWDataSyncEnv</a> *<a class="code hl_variable" href="class_p_s_subscription_1_1_init_bucket_lifecycle_c_r.html#a50a3f90df2a5d75f63f734bdba895d40">sync_env</a>;</div>
<div class="line"><a id="l00451" name="l00451"></a><span class="lineno"><a class="line" href="class_p_s_subscription_1_1_init_bucket_lifecycle_c_r.html#a384343c4750a29bb45980986e537d1a6">  451</a></span>    <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#ae3f05c1346843738a4e4afdd42062743">PSConfigRef</a>&amp; <a class="code hl_variable" href="class_p_s_subscription_1_1_init_bucket_lifecycle_c_r.html#a384343c4750a29bb45980986e537d1a6">conf</a>;</div>
<div class="line"><a id="l00452" name="l00452"></a><span class="lineno"><a class="line" href="class_p_s_subscription_1_1_init_bucket_lifecycle_c_r.html#a327c3734bf2552fcd592d568c64d8f39">  452</a></span>    <a class="code hl_class" href="class_l_c_rule.html">LCRule</a> <a class="code hl_variable" href="class_p_s_subscription_1_1_init_bucket_lifecycle_c_r.html#a327c3734bf2552fcd592d568c64d8f39">rule</a>;</div>
<div class="line"><a id="l00453" name="l00453"></a><span class="lineno">  453</span> </div>
<div class="line"><a id="l00454" name="l00454"></a><span class="lineno"><a class="line" href="class_p_s_subscription_1_1_init_bucket_lifecycle_c_r.html#a74052086b48ce1597f4a33650dfd5ea1">  454</a></span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="class_p_s_subscription_1_1_init_bucket_lifecycle_c_r.html#a74052086b48ce1597f4a33650dfd5ea1">retention_days</a>;</div>
<div class="line"><a id="l00455" name="l00455"></a><span class="lineno">  455</span> </div>
<div class="line"><a id="l00456" name="l00456"></a><span class="lineno"><a class="line" href="class_p_s_subscription_1_1_init_bucket_lifecycle_c_r.html#a7e24225925c564fa017efc3666500e75">  456</a></span>    <a class="code hl_struct" href="structrgw__bucket__lifecycle__config__params.html">rgw_bucket_lifecycle_config_params</a> <a class="code hl_variable" href="class_p_s_subscription_1_1_init_bucket_lifecycle_c_r.html#a7e24225925c564fa017efc3666500e75">lc_config</a>;</div>
<div class="line"><a id="l00457" name="l00457"></a><span class="lineno">  457</span> </div>
<div class="line"><a id="l00458" name="l00458"></a><span class="lineno">  458</span>  <span class="keyword">public</span>:</div>
<div class="foldopen" id="foldopen00459" data-start="{" data-end="}">
<div class="line"><a id="l00459" name="l00459"></a><span class="lineno"><a class="line" href="class_p_s_subscription_1_1_init_bucket_lifecycle_c_r.html#aec89593e1175db3de078f365b4ce3b3f">  459</a></span>    <a class="code hl_function" href="class_p_s_subscription_1_1_init_bucket_lifecycle_c_r.html#aec89593e1175db3de078f365b4ce3b3f">InitBucketLifecycleCR</a>(<a class="code hl_struct" href="struct_r_g_w_data_sync_ctx.html">RGWDataSyncCtx</a> *_sc,</div>
<div class="line"><a id="l00460" name="l00460"></a><span class="lineno">  460</span>           <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#ae3f05c1346843738a4e4afdd42062743">PSConfigRef</a>&amp; _conf,</div>
<div class="line"><a id="l00461" name="l00461"></a><span class="lineno">  461</span>           <a class="code hl_class" href="classrgw_1_1sal_1_1_bucket.html">rgw::sal::Bucket</a>* _bucket) : <a class="code hl_class" href="class_r_g_w_coroutine.html">RGWCoroutine</a>(_sc-&gt;<a class="code hl_variable" href="class_r_g_w_coroutine.html#a887e803a293aff88fd8d60003a73e50a">cct</a>),</div>
<div class="line"><a id="l00462" name="l00462"></a><span class="lineno">  462</span>                                                     <a class="code hl_variable" href="class_p_s_subscription_1_1_init_bucket_lifecycle_c_r.html#afbbc865bd8f1346577f38e5b5fbcb5f2">sc</a>(_sc), <a class="code hl_variable" href="class_p_s_subscription_1_1_init_bucket_lifecycle_c_r.html#a50a3f90df2a5d75f63f734bdba895d40">sync_env</a>(_sc-&gt;<a class="code hl_variable" href="class_p_s_subscription.html#ac19d731eb2eefd3b630d14735f1b130c">env</a>),</div>
<div class="line"><a id="l00463" name="l00463"></a><span class="lineno">  463</span>                                                     <a class="code hl_variable" href="class_p_s_subscription_1_1_init_bucket_lifecycle_c_r.html#a384343c4750a29bb45980986e537d1a6">conf</a>(_conf) {</div>
<div class="line"><a id="l00464" name="l00464"></a><span class="lineno">  464</span>      <a class="code hl_variable" href="class_p_s_subscription_1_1_init_bucket_lifecycle_c_r.html#a7e24225925c564fa017efc3666500e75">lc_config</a>.<a class="code hl_variable" href="structrgw__bucket__lifecycle__config__params.html#a69124459275686a3005182fe72a93545">bucket</a> = _bucket;</div>
<div class="line"><a id="l00465" name="l00465"></a><span class="lineno">  465</span>      <a class="code hl_variable" href="class_p_s_subscription_1_1_init_bucket_lifecycle_c_r.html#a7e24225925c564fa017efc3666500e75">lc_config</a>.<a class="code hl_variable" href="structrgw__bucket__lifecycle__config__params.html#acd50b70d47affff98aa9261f8840b21c">bucket_attrs</a> = _bucket-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_bucket.html#a8b49a035b8b328338492032f312fc3ca">get_attrs</a>();</div>
<div class="line"><a id="l00466" name="l00466"></a><span class="lineno">  466</span>      <a class="code hl_variable" href="class_p_s_subscription_1_1_init_bucket_lifecycle_c_r.html#a74052086b48ce1597f4a33650dfd5ea1">retention_days</a> = <a class="code hl_variable" href="class_p_s_subscription_1_1_init_bucket_lifecycle_c_r.html#a384343c4750a29bb45980986e537d1a6">conf</a>-&gt;events_retention_days;</div>
<div class="line"><a id="l00467" name="l00467"></a><span class="lineno">  467</span>    }</div>
</div>
<div class="line"><a id="l00468" name="l00468"></a><span class="lineno">  468</span> </div>
<div class="foldopen" id="foldopen00469" data-start="{" data-end="}">
<div class="line"><a id="l00469" name="l00469"></a><span class="lineno"><a class="line" href="class_p_s_subscription_1_1_init_bucket_lifecycle_c_r.html#a02befea4318992e6c981a36be065b411">  469</a></span>    <span class="keywordtype">int</span> <a class="code hl_function" href="class_p_s_subscription_1_1_init_bucket_lifecycle_c_r.html#a02befea4318992e6c981a36be065b411">operate</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>)<span class="keyword"> override </span>{</div>
<div class="line"><a id="l00470" name="l00470"></a><span class="lineno">  470</span>      reenter(<span class="keyword">this</span>) {</div>
<div class="line"><a id="l00471" name="l00471"></a><span class="lineno">  471</span> </div>
<div class="line"><a id="l00472" name="l00472"></a><span class="lineno">  472</span>        <a class="code hl_variable" href="class_p_s_subscription_1_1_init_bucket_lifecycle_c_r.html#a327c3734bf2552fcd592d568c64d8f39">rule</a>.<a class="code hl_function" href="class_l_c_rule.html#aaca162ef69c6f7e728fa918b2b588442">init_simple_days_rule</a>(<span class="stringliteral">&quot;Pubsub Expiration&quot;</span>, <span class="stringliteral">&quot;&quot;</span> <span class="comment">/* all objects in bucket */</span>, <a class="code hl_variable" href="class_p_s_subscription_1_1_init_bucket_lifecycle_c_r.html#a74052086b48ce1597f4a33650dfd5ea1">retention_days</a>);</div>
<div class="line"><a id="l00473" name="l00473"></a><span class="lineno">  473</span> </div>
<div class="line"><a id="l00474" name="l00474"></a><span class="lineno">  474</span>        {</div>
<div class="line"><a id="l00475" name="l00475"></a><span class="lineno">  475</span>          <span class="comment">/* maybe we already have it configured? */</span></div>
<div class="line"><a id="l00476" name="l00476"></a><span class="lineno">  476</span>          <a class="code hl_class" href="class_r_g_w_lifecycle_configuration.html">RGWLifecycleConfiguration</a> old_config;</div>
<div class="line"><a id="l00477" name="l00477"></a><span class="lineno">  477</span>          <span class="keyword">auto</span> aiter = <a class="code hl_variable" href="class_p_s_subscription_1_1_init_bucket_lifecycle_c_r.html#a7e24225925c564fa017efc3666500e75">lc_config</a>.<a class="code hl_variable" href="structrgw__bucket__lifecycle__config__params.html#acd50b70d47affff98aa9261f8840b21c">bucket_attrs</a>.find(<a class="code hl_define" href="rgw__common_8h.html#a7f53e4298c577378477ce3009f21c769">RGW_ATTR_LC</a>);</div>
<div class="line"><a id="l00478" name="l00478"></a><span class="lineno">  478</span>          <span class="keywordflow">if</span> (aiter != <a class="code hl_variable" href="class_p_s_subscription_1_1_init_bucket_lifecycle_c_r.html#a7e24225925c564fa017efc3666500e75">lc_config</a>.<a class="code hl_variable" href="structrgw__bucket__lifecycle__config__params.html#acd50b70d47affff98aa9261f8840b21c">bucket_attrs</a>.end()) {</div>
<div class="line"><a id="l00479" name="l00479"></a><span class="lineno">  479</span>            bufferlist::const_iterator iter{&amp;aiter-&gt;second};</div>
<div class="line"><a id="l00480" name="l00480"></a><span class="lineno">  480</span>            <span class="keywordflow">try</span> {</div>
<div class="line"><a id="l00481" name="l00481"></a><span class="lineno">  481</span>              old_config.<a class="code hl_function" href="class_r_g_w_lifecycle_configuration.html#a6b347083bb8ca25863db9234c3caac6e">decode</a>(iter);</div>
<div class="line"><a id="l00482" name="l00482"></a><span class="lineno">  482</span>            } <span class="keywordflow">catch</span> (<span class="keyword">const</span> buffer::error&amp; e) {</div>
<div class="line"><a id="l00483" name="l00483"></a><span class="lineno">  483</span>              ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 0) &lt;&lt; __func__ &lt;&lt;  <span class="stringliteral">&quot;(): decode life cycle config failed&quot;</span> &lt;&lt; dendl;</div>
<div class="line"><a id="l00484" name="l00484"></a><span class="lineno">  484</span>            }</div>
<div class="line"><a id="l00485" name="l00485"></a><span class="lineno">  485</span>          }</div>
<div class="line"><a id="l00486" name="l00486"></a><span class="lineno">  486</span> </div>
<div class="line"><a id="l00487" name="l00487"></a><span class="lineno">  487</span>          <span class="keyword">auto</span> old_rules = old_config.<a class="code hl_function" href="class_r_g_w_lifecycle_configuration.html#abfa0fc18e96b931427579d8c61546c1e">get_rule_map</a>();</div>
<div class="line"><a id="l00488" name="l00488"></a><span class="lineno">  488</span>          <span class="keywordflow">for</span> (<span class="keyword">auto</span> ori : old_rules) {</div>
<div class="line"><a id="l00489" name="l00489"></a><span class="lineno">  489</span>            <span class="keyword">auto</span>&amp; old_rule = ori.second;</div>
<div class="line"><a id="l00490" name="l00490"></a><span class="lineno">  490</span> </div>
<div class="line"><a id="l00491" name="l00491"></a><span class="lineno">  491</span>            <span class="keywordflow">if</span> (old_rule.get_prefix().empty() &amp;&amp; </div>
<div class="line"><a id="l00492" name="l00492"></a><span class="lineno">  492</span>                old_rule.get_expiration().get_days() == <a class="code hl_variable" href="class_p_s_subscription_1_1_init_bucket_lifecycle_c_r.html#a74052086b48ce1597f4a33650dfd5ea1">retention_days</a> &amp;&amp;</div>
<div class="line"><a id="l00493" name="l00493"></a><span class="lineno">  493</span>                old_rule.is_enabled()) {</div>
<div class="line"><a id="l00494" name="l00494"></a><span class="lineno">  494</span>              ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 20) &lt;&lt; <span class="stringliteral">&quot;no need to set lifecycle rule on bucket, existing rule matches config&quot;</span> &lt;&lt; dendl;</div>
<div class="line"><a id="l00495" name="l00495"></a><span class="lineno">  495</span>              <span class="keywordflow">return</span> <a class="code hl_function" href="class_r_g_w_coroutine.html#a15bce10b8fbd959412a9473b03f0dd82">set_cr_done</a>();</div>
<div class="line"><a id="l00496" name="l00496"></a><span class="lineno">  496</span>            }</div>
<div class="line"><a id="l00497" name="l00497"></a><span class="lineno">  497</span>          }</div>
<div class="line"><a id="l00498" name="l00498"></a><span class="lineno">  498</span>        }</div>
<div class="line"><a id="l00499" name="l00499"></a><span class="lineno">  499</span> </div>
<div class="line"><a id="l00500" name="l00500"></a><span class="lineno">  500</span>        <a class="code hl_variable" href="class_p_s_subscription_1_1_init_bucket_lifecycle_c_r.html#a7e24225925c564fa017efc3666500e75">lc_config</a>.<a class="code hl_variable" href="structrgw__bucket__lifecycle__config__params.html#ad89c41a7a010a81f95b2da9623fcb973">config</a>.<a class="code hl_function" href="class_r_g_w_lifecycle_configuration.html#a1dd31a492ee4532b87fd345eb4d5e91c">add_rule</a>(<a class="code hl_variable" href="class_p_s_subscription_1_1_init_bucket_lifecycle_c_r.html#a327c3734bf2552fcd592d568c64d8f39">rule</a>);</div>
<div class="line"><a id="l00501" name="l00501"></a><span class="lineno">  501</span>        yield <a class="code hl_function" href="class_r_g_w_coroutine.html#a60c1d6187851953e8a5e1dbc97f69bbd">call</a>(<span class="keyword">new</span> <a class="code hl_typedef" href="rgw__cr__tools_8h.html#a77993615d2488afa7addd93a603e32c5">RGWBucketLifecycleConfigCR</a>(<a class="code hl_variable" href="class_p_s_subscription_1_1_init_bucket_lifecycle_c_r.html#a50a3f90df2a5d75f63f734bdba895d40">sync_env</a>-&gt;<a class="code hl_variable" href="struct_r_g_w_data_sync_env.html#a01a643690d3fa3344fc0a8b4633b3998">async_rados</a>,</div>
<div class="line"><a id="l00502" name="l00502"></a><span class="lineno">  502</span>                                                  <a class="code hl_variable" href="class_p_s_subscription_1_1_init_bucket_lifecycle_c_r.html#a50a3f90df2a5d75f63f734bdba895d40">sync_env</a>-&gt;<a class="code hl_variable" href="struct_r_g_w_data_sync_env.html#acfebf6dda76ac5469de5a7edeb00548a">store</a>,</div>
<div class="line"><a id="l00503" name="l00503"></a><span class="lineno">  503</span>                                                  <a class="code hl_variable" href="class_p_s_subscription_1_1_init_bucket_lifecycle_c_r.html#a7e24225925c564fa017efc3666500e75">lc_config</a>,</div>
<div class="line"><a id="l00504" name="l00504"></a><span class="lineno">  504</span>                                                  <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>));</div>
<div class="line"><a id="l00505" name="l00505"></a><span class="lineno">  505</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_r_g_w_coroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a> &lt; 0) {</div>
<div class="line"><a id="l00506" name="l00506"></a><span class="lineno">  506</span>          ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 1) &lt;&lt; <span class="stringliteral">&quot;ERROR: failed to set lifecycle on bucket: ret=&quot;</span> &lt;&lt; <a class="code hl_variable" href="class_r_g_w_coroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a> &lt;&lt; dendl;</div>
<div class="line"><a id="l00507" name="l00507"></a><span class="lineno">  507</span>          <span class="keywordflow">return</span> <a class="code hl_function" href="class_r_g_w_coroutine.html#a576a8ced300f52809ad477f0082e3bcd">set_cr_error</a>(<a class="code hl_variable" href="class_r_g_w_coroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a>);</div>
<div class="line"><a id="l00508" name="l00508"></a><span class="lineno">  508</span>        }</div>
<div class="line"><a id="l00509" name="l00509"></a><span class="lineno">  509</span> </div>
<div class="line"><a id="l00510" name="l00510"></a><span class="lineno">  510</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="class_r_g_w_coroutine.html#a15bce10b8fbd959412a9473b03f0dd82">set_cr_done</a>();</div>
<div class="line"><a id="l00511" name="l00511"></a><span class="lineno">  511</span>      }</div>
<div class="line"><a id="l00512" name="l00512"></a><span class="lineno">  512</span>      <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00513" name="l00513"></a><span class="lineno">  513</span>    }</div>
</div>
<div class="line"><a id="l00514" name="l00514"></a><span class="lineno">  514</span>  };</div>
</div>
<div class="line"><a id="l00515" name="l00515"></a><span class="lineno">  515</span> </div>
<div class="foldopen" id="foldopen00516" data-start="{" data-end="};">
<div class="line"><a id="l00516" name="l00516"></a><span class="lineno"><a class="line" href="class_p_s_subscription_1_1_init_c_r.html">  516</a></span>  <span class="keyword">class </span><a class="code hl_class" href="class_p_s_subscription_1_1_init_c_r.html">InitCR</a> : <span class="keyword">public</span> <a class="code hl_class" href="class_r_g_w_singleton_c_r.html">RGWSingletonCR</a>&lt;bool&gt; {</div>
<div class="line"><a id="l00517" name="l00517"></a><span class="lineno"><a class="line" href="class_p_s_subscription_1_1_init_c_r.html#a88a1382bc33d8cf67463bae68c4b09f2">  517</a></span>    <a class="code hl_struct" href="struct_r_g_w_data_sync_ctx.html">RGWDataSyncCtx</a> *<a class="code hl_variable" href="class_p_s_subscription_1_1_init_c_r.html#a88a1382bc33d8cf67463bae68c4b09f2">sc</a>;</div>
<div class="line"><a id="l00518" name="l00518"></a><span class="lineno"><a class="line" href="class_p_s_subscription_1_1_init_c_r.html#af7c22ab0be0235ea54bb01d5d8d50d89">  518</a></span>    <a class="code hl_struct" href="struct_r_g_w_data_sync_env.html">RGWDataSyncEnv</a> *<a class="code hl_variable" href="class_p_s_subscription_1_1_init_c_r.html#af7c22ab0be0235ea54bb01d5d8d50d89">sync_env</a>;</div>
<div class="line"><a id="l00519" name="l00519"></a><span class="lineno"><a class="line" href="class_p_s_subscription_1_1_init_c_r.html#a05e716a3f023df31b830ad487794ddd8">  519</a></span>    <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#a6b984d869299084410b95debaf7a9163">PSSubscriptionRef</a> <a class="code hl_variable" href="class_p_s_subscription_1_1_init_c_r.html#a05e716a3f023df31b830ad487794ddd8">sub</a>;</div>
<div class="line"><a id="l00520" name="l00520"></a><span class="lineno"><a class="line" href="class_p_s_subscription_1_1_init_c_r.html#a84c691d49e004f21b326559f58a6d302">  520</a></span>    <a class="code hl_struct" href="structrgw__get__bucket__info__params.html">rgw_get_bucket_info_params</a> <a class="code hl_variable" href="class_p_s_subscription_1_1_init_c_r.html#a84c691d49e004f21b326559f58a6d302">get_bucket_info</a>;</div>
<div class="line"><a id="l00521" name="l00521"></a><span class="lineno"><a class="line" href="class_p_s_subscription_1_1_init_c_r.html#a72c9832c0231fd6c653546c7125fc71c">  521</a></span>    <a class="code hl_struct" href="structrgw__bucket__create__local__params.html">rgw_bucket_create_local_params</a> <a class="code hl_variable" href="class_p_s_subscription_1_1_init_c_r.html#a72c9832c0231fd6c653546c7125fc71c">create_bucket</a>;</div>
<div class="line"><a id="l00522" name="l00522"></a><span class="lineno"><a class="line" href="class_p_s_subscription_1_1_init_c_r.html#aac9ebbd5b3f7cb1e112ad0176435776a">  522</a></span>    <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#ae3f05c1346843738a4e4afdd42062743">PSConfigRef</a>&amp; <a class="code hl_variable" href="class_p_s_subscription_1_1_init_c_r.html#aac9ebbd5b3f7cb1e112ad0176435776a">conf</a>;</div>
<div class="line"><a id="l00523" name="l00523"></a><span class="lineno"><a class="line" href="class_p_s_subscription_1_1_init_c_r.html#ab4e42246caaeef3539208d83e805dc90">  523</a></span>    <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#a9c6fe8a9e35bb688bdc0dfcb46e74a91">PSSubConfigRef</a>&amp; <a class="code hl_variable" href="class_p_s_subscription_1_1_init_c_r.html#ab4e42246caaeef3539208d83e805dc90">sub_conf</a>;</div>
<div class="line"><a id="l00524" name="l00524"></a><span class="lineno"><a class="line" href="class_p_s_subscription_1_1_init_c_r.html#ac19b843b0c8f3d75ee9469f25b2e980a">  524</a></span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="class_p_s_subscription_1_1_init_c_r.html#ac19b843b0c8f3d75ee9469f25b2e980a">i</a>;</div>
<div class="line"><a id="l00525" name="l00525"></a><span class="lineno">  525</span> </div>
<div class="line"><a id="l00526" name="l00526"></a><span class="lineno">  526</span>  <span class="keyword">public</span>:</div>
<div class="foldopen" id="foldopen00527" data-start="{" data-end="}">
<div class="line"><a id="l00527" name="l00527"></a><span class="lineno"><a class="line" href="class_p_s_subscription_1_1_init_c_r.html#a8e55df7756d047be746274782e169c24">  527</a></span>    <a class="code hl_function" href="class_p_s_subscription_1_1_init_c_r.html#a8e55df7756d047be746274782e169c24">InitCR</a>(<a class="code hl_struct" href="struct_r_g_w_data_sync_ctx.html">RGWDataSyncCtx</a> *_sc,</div>
<div class="line"><a id="l00528" name="l00528"></a><span class="lineno">  528</span>           <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#a6b984d869299084410b95debaf7a9163">PSSubscriptionRef</a>&amp; _sub) : <a class="code hl_class" href="class_r_g_w_singleton_c_r.html">RGWSingletonCR</a>&lt;bool&gt;(_sc-&gt;<a class="code hl_variable" href="class_r_g_w_coroutine.html#a887e803a293aff88fd8d60003a73e50a">cct</a>),</div>
<div class="line"><a id="l00529" name="l00529"></a><span class="lineno">  529</span>                                    <a class="code hl_variable" href="class_p_s_subscription_1_1_init_c_r.html#a88a1382bc33d8cf67463bae68c4b09f2">sc</a>(_sc), <a class="code hl_variable" href="class_p_s_subscription_1_1_init_c_r.html#af7c22ab0be0235ea54bb01d5d8d50d89">sync_env</a>(_sc-&gt;<a class="code hl_variable" href="class_p_s_subscription.html#ac19d731eb2eefd3b630d14735f1b130c">env</a>),</div>
<div class="line"><a id="l00530" name="l00530"></a><span class="lineno">  530</span>                                    <a class="code hl_variable" href="class_p_s_subscription_1_1_init_c_r.html#a05e716a3f023df31b830ad487794ddd8">sub</a>(_sub), <a class="code hl_variable" href="class_p_s_subscription_1_1_init_c_r.html#aac9ebbd5b3f7cb1e112ad0176435776a">conf</a>(<a class="code hl_variable" href="class_p_s_subscription_1_1_init_c_r.html#a05e716a3f023df31b830ad487794ddd8">sub</a>-&gt;<a class="code hl_variable" href="class_p_s_subscription.html#ac19d731eb2eefd3b630d14735f1b130c">env</a>-&gt;<a class="code hl_variable" href="class_p_s_subscription_1_1_init_c_r.html#aac9ebbd5b3f7cb1e112ad0176435776a">conf</a>),</div>
<div class="line"><a id="l00531" name="l00531"></a><span class="lineno">  531</span>                                    <a class="code hl_variable" href="class_p_s_subscription_1_1_init_c_r.html#ab4e42246caaeef3539208d83e805dc90">sub_conf</a>(<a class="code hl_variable" href="class_p_s_subscription_1_1_init_c_r.html#a05e716a3f023df31b830ad487794ddd8">sub</a>-&gt;<a class="code hl_variable" href="class_p_s_subscription_1_1_init_c_r.html#ab4e42246caaeef3539208d83e805dc90">sub_conf</a>) {</div>
<div class="line"><a id="l00532" name="l00532"></a><span class="lineno">  532</span>    }</div>
</div>
<div class="line"><a id="l00533" name="l00533"></a><span class="lineno">  533</span> </div>
<div class="foldopen" id="foldopen00534" data-start="{" data-end="}">
<div class="line"><a id="l00534" name="l00534"></a><span class="lineno"><a class="line" href="class_p_s_subscription_1_1_init_c_r.html#ad359665f23d5f60eecd6213a9639ed89">  534</a></span>    <span class="keywordtype">int</span> <a class="code hl_function" href="class_p_s_subscription_1_1_init_c_r.html#ad359665f23d5f60eecd6213a9639ed89">operate</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>)<span class="keyword"> override </span>{</div>
<div class="line"><a id="l00535" name="l00535"></a><span class="lineno">  535</span>      reenter(<span class="keyword">this</span>) {</div>
<div class="line"><a id="l00536" name="l00536"></a><span class="lineno">  536</span>        <a class="code hl_variable" href="class_p_s_subscription_1_1_init_c_r.html#a84c691d49e004f21b326559f58a6d302">get_bucket_info</a>.<a class="code hl_variable" href="structrgw__get__bucket__info__params.html#a7f015bafc42bdd6a6f49b5cc27e06f2b">tenant</a> = <a class="code hl_variable" href="class_p_s_subscription_1_1_init_c_r.html#aac9ebbd5b3f7cb1e112ad0176435776a">conf</a>-&gt;user.tenant;</div>
<div class="line"><a id="l00537" name="l00537"></a><span class="lineno">  537</span>        <a class="code hl_variable" href="class_p_s_subscription_1_1_init_c_r.html#a84c691d49e004f21b326559f58a6d302">get_bucket_info</a>.<a class="code hl_variable" href="structrgw__get__bucket__info__params.html#a72ff9cd0ec86635fd8c6021095661a86">bucket_name</a> = <a class="code hl_variable" href="class_p_s_subscription_1_1_init_c_r.html#ab4e42246caaeef3539208d83e805dc90">sub_conf</a>-&gt;data_bucket_name;</div>
<div class="line"><a id="l00538" name="l00538"></a><span class="lineno">  538</span>        <a class="code hl_variable" href="class_p_s_subscription_1_1_init_c_r.html#a05e716a3f023df31b830ad487794ddd8">sub</a>-&gt;get_bucket_info_result = make_shared&lt;rgw_get_bucket_info_result&gt;();</div>
<div class="line"><a id="l00539" name="l00539"></a><span class="lineno">  539</span> </div>
<div class="line"><a id="l00540" name="l00540"></a><span class="lineno">  540</span>        <span class="keywordflow">for</span> (<a class="code hl_variable" href="class_p_s_subscription_1_1_init_c_r.html#ac19b843b0c8f3d75ee9469f25b2e980a">i</a> = 0; <a class="code hl_variable" href="class_p_s_subscription_1_1_init_c_r.html#ac19b843b0c8f3d75ee9469f25b2e980a">i</a> &lt; 2; ++<a class="code hl_variable" href="class_p_s_subscription_1_1_init_c_r.html#ac19b843b0c8f3d75ee9469f25b2e980a">i</a>) {</div>
<div class="line"><a id="l00541" name="l00541"></a><span class="lineno">  541</span>          yield <a class="code hl_function" href="class_r_g_w_coroutine.html#a60c1d6187851953e8a5e1dbc97f69bbd">call</a>(<span class="keyword">new</span> <a class="code hl_typedef" href="rgw__cr__tools_8h.html#a38e1914ad3d44c3fc59fb313f28bbcb1">RGWGetBucketInfoCR</a>(<a class="code hl_variable" href="class_p_s_subscription_1_1_init_c_r.html#af7c22ab0be0235ea54bb01d5d8d50d89">sync_env</a>-&gt;<a class="code hl_variable" href="struct_r_g_w_data_sync_env.html#a01a643690d3fa3344fc0a8b4633b3998">async_rados</a>,</div>
<div class="line"><a id="l00542" name="l00542"></a><span class="lineno">  542</span>                                            <a class="code hl_variable" href="class_p_s_subscription_1_1_init_c_r.html#af7c22ab0be0235ea54bb01d5d8d50d89">sync_env</a>-&gt;<a class="code hl_variable" href="struct_r_g_w_data_sync_env.html#acfebf6dda76ac5469de5a7edeb00548a">store</a>,</div>
<div class="line"><a id="l00543" name="l00543"></a><span class="lineno">  543</span>                                            <a class="code hl_variable" href="class_p_s_subscription_1_1_init_c_r.html#a84c691d49e004f21b326559f58a6d302">get_bucket_info</a>,</div>
<div class="line"><a id="l00544" name="l00544"></a><span class="lineno">  544</span>                                            <a class="code hl_variable" href="class_p_s_subscription_1_1_init_c_r.html#a05e716a3f023df31b830ad487794ddd8">sub</a>-&gt;get_bucket_info_result,</div>
<div class="line"><a id="l00545" name="l00545"></a><span class="lineno">  545</span>                                            <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>));</div>
<div class="line"><a id="l00546" name="l00546"></a><span class="lineno">  546</span>          <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_r_g_w_coroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a> &lt; 0 &amp;&amp; <a class="code hl_variable" href="class_r_g_w_coroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a> != -ENOENT) {</div>
<div class="line"><a id="l00547" name="l00547"></a><span class="lineno">  547</span>            ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 1) &lt;&lt; <span class="stringliteral">&quot;ERROR: failed to geting bucket info: &quot;</span> &lt;&lt; <span class="stringliteral">&quot;tenant=&quot;</span></div>
<div class="line"><a id="l00548" name="l00548"></a><span class="lineno">  548</span>              &lt;&lt; <a class="code hl_variable" href="class_p_s_subscription_1_1_init_c_r.html#a84c691d49e004f21b326559f58a6d302">get_bucket_info</a>.<a class="code hl_variable" href="structrgw__get__bucket__info__params.html#a7f015bafc42bdd6a6f49b5cc27e06f2b">tenant</a> &lt;&lt; <span class="stringliteral">&quot; name=&quot;</span> &lt;&lt; <a class="code hl_variable" href="class_p_s_subscription_1_1_init_c_r.html#a84c691d49e004f21b326559f58a6d302">get_bucket_info</a>.<a class="code hl_variable" href="structrgw__get__bucket__info__params.html#a72ff9cd0ec86635fd8c6021095661a86">bucket_name</a> &lt;&lt; <span class="stringliteral">&quot;: ret=&quot;</span> &lt;&lt; <a class="code hl_variable" href="class_r_g_w_coroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a> &lt;&lt; dendl;</div>
<div class="line"><a id="l00549" name="l00549"></a><span class="lineno">  549</span>          }</div>
<div class="line"><a id="l00550" name="l00550"></a><span class="lineno">  550</span>          <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_r_g_w_coroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a> == 0) {</div>
<div class="line"><a id="l00551" name="l00551"></a><span class="lineno">  551</span>            {</div>
<div class="line"><a id="l00552" name="l00552"></a><span class="lineno">  552</span>              <span class="keyword">auto</span>&amp; result = <a class="code hl_variable" href="class_p_s_subscription_1_1_init_c_r.html#a05e716a3f023df31b830ad487794ddd8">sub</a>-&gt;get_bucket_info_result;</div>
<div class="line"><a id="l00553" name="l00553"></a><span class="lineno">  553</span>              <a class="code hl_variable" href="class_p_s_subscription_1_1_init_c_r.html#a05e716a3f023df31b830ad487794ddd8">sub</a>-&gt;bucket_info = &amp;result-&gt;bucket-&gt;get_info();</div>
<div class="line"><a id="l00554" name="l00554"></a><span class="lineno">  554</span> </div>
<div class="line"><a id="l00555" name="l00555"></a><span class="lineno">  555</span>              <span class="keywordtype">int</span> <a class="code hl_variable" href="class_r_g_w_coroutine.html#a19f441c7625a995ca230d26bcd3c8454">ret</a> = <a class="code hl_variable" href="class_p_s_subscription_1_1_init_c_r.html#a05e716a3f023df31b830ad487794ddd8">sub</a>-&gt;data_access-&gt;get_bucket(result-&gt;bucket-&gt;get_info(), result-&gt;bucket-&gt;get_attrs(), &amp;<a class="code hl_variable" href="class_p_s_subscription_1_1_init_c_r.html#a05e716a3f023df31b830ad487794ddd8">sub</a>-&gt;bucket);</div>
<div class="line"><a id="l00556" name="l00556"></a><span class="lineno">  556</span>              <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_r_g_w_coroutine.html#a19f441c7625a995ca230d26bcd3c8454">ret</a> &lt; 0) {</div>
<div class="line"><a id="l00557" name="l00557"></a><span class="lineno">  557</span>                ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 1) &lt;&lt; <span class="stringliteral">&quot;ERROR: data_access.get_bucket() bucket=&quot;</span> &lt;&lt; result-&gt;bucket &lt;&lt; <span class="stringliteral">&quot; failed, ret=&quot;</span> &lt;&lt; <a class="code hl_variable" href="class_r_g_w_coroutine.html#a19f441c7625a995ca230d26bcd3c8454">ret</a> &lt;&lt; dendl;</div>
<div class="line"><a id="l00558" name="l00558"></a><span class="lineno">  558</span>                <span class="keywordflow">return</span> <a class="code hl_function" href="class_r_g_w_coroutine.html#a576a8ced300f52809ad477f0082e3bcd">set_cr_error</a>(<a class="code hl_variable" href="class_r_g_w_coroutine.html#a19f441c7625a995ca230d26bcd3c8454">ret</a>);</div>
<div class="line"><a id="l00559" name="l00559"></a><span class="lineno">  559</span>              }</div>
<div class="line"><a id="l00560" name="l00560"></a><span class="lineno">  560</span>            }</div>
<div class="line"><a id="l00561" name="l00561"></a><span class="lineno">  561</span> </div>
<div class="line"><a id="l00562" name="l00562"></a><span class="lineno">  562</span>            yield <a class="code hl_function" href="class_r_g_w_coroutine.html#a60c1d6187851953e8a5e1dbc97f69bbd">call</a>(<span class="keyword">new</span> <a class="code hl_class" href="class_p_s_subscription_1_1_init_bucket_lifecycle_c_r.html">InitBucketLifecycleCR</a>(<a class="code hl_variable" href="class_p_s_subscription_1_1_init_c_r.html#a88a1382bc33d8cf67463bae68c4b09f2">sc</a>, <a class="code hl_variable" href="class_p_s_subscription_1_1_init_c_r.html#aac9ebbd5b3f7cb1e112ad0176435776a">conf</a>,</div>
<div class="line"><a id="l00563" name="l00563"></a><span class="lineno">  563</span>                                                 <a class="code hl_variable" href="class_p_s_subscription_1_1_init_c_r.html#a05e716a3f023df31b830ad487794ddd8">sub</a>-&gt;get_bucket_info_result-&gt;bucket.get()));</div>
<div class="line"><a id="l00564" name="l00564"></a><span class="lineno">  564</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_r_g_w_coroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a> &lt; 0) {</div>
<div class="line"><a id="l00565" name="l00565"></a><span class="lineno">  565</span>              ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 1) &lt;&lt; <span class="stringliteral">&quot;ERROR: failed to init lifecycle on bucket (bucket=&quot;</span> &lt;&lt; <a class="code hl_variable" href="class_p_s_subscription_1_1_init_c_r.html#ab4e42246caaeef3539208d83e805dc90">sub_conf</a>-&gt;data_bucket_name &lt;&lt; <span class="stringliteral">&quot;) ret=&quot;</span> &lt;&lt; <a class="code hl_variable" href="class_r_g_w_coroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a> &lt;&lt; dendl;</div>
<div class="line"><a id="l00566" name="l00566"></a><span class="lineno">  566</span>              <span class="keywordflow">return</span> <a class="code hl_function" href="class_r_g_w_coroutine.html#a576a8ced300f52809ad477f0082e3bcd">set_cr_error</a>(<a class="code hl_variable" href="class_r_g_w_coroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a>);</div>
<div class="line"><a id="l00567" name="l00567"></a><span class="lineno">  567</span>            }</div>
<div class="line"><a id="l00568" name="l00568"></a><span class="lineno">  568</span> </div>
<div class="line"><a id="l00569" name="l00569"></a><span class="lineno">  569</span>            <span class="keywordflow">return</span> <a class="code hl_function" href="class_r_g_w_coroutine.html#a15bce10b8fbd959412a9473b03f0dd82">set_cr_done</a>();</div>
<div class="line"><a id="l00570" name="l00570"></a><span class="lineno">  570</span>          }</div>
<div class="line"><a id="l00571" name="l00571"></a><span class="lineno">  571</span> </div>
<div class="line"><a id="l00572" name="l00572"></a><span class="lineno">  572</span>          <a class="code hl_variable" href="class_p_s_subscription_1_1_init_c_r.html#a72c9832c0231fd6c653546c7125fc71c">create_bucket</a>.<a class="code hl_variable" href="structrgw__bucket__create__local__params.html#a35277269af4d1f83c6695a81bd9c156a">user_info</a> = <a class="code hl_variable" href="class_p_s_subscription_1_1_init_c_r.html#a05e716a3f023df31b830ad487794ddd8">sub</a>-&gt;env-&gt;data_user_info;</div>
<div class="line"><a id="l00573" name="l00573"></a><span class="lineno">  573</span>          <a class="code hl_variable" href="class_p_s_subscription_1_1_init_c_r.html#a72c9832c0231fd6c653546c7125fc71c">create_bucket</a>.<a class="code hl_variable" href="structrgw__bucket__create__local__params.html#a9436a7087e3e00ac114df8c36bcee0db">bucket_name</a> = <a class="code hl_variable" href="class_p_s_subscription_1_1_init_c_r.html#ab4e42246caaeef3539208d83e805dc90">sub_conf</a>-&gt;data_bucket_name;</div>
<div class="line"><a id="l00574" name="l00574"></a><span class="lineno">  574</span>          ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 20) &lt;&lt; <span class="stringliteral">&quot;pubsub: bucket create: using user info: &quot;</span> &lt;&lt; <a class="code hl_function" href="rgw__sync__module__pubsub_8cc.html#a95cd156406f6d627131b4faa761e7ae6">json_str</a>(<span class="stringliteral">&quot;obj&quot;</span>, *<a class="code hl_variable" href="class_p_s_subscription_1_1_init_c_r.html#a05e716a3f023df31b830ad487794ddd8">sub</a>-&gt;env-&gt;data_user_info, <span class="keyword">true</span>) &lt;&lt; dendl;</div>
<div class="line"><a id="l00575" name="l00575"></a><span class="lineno">  575</span>          yield <a class="code hl_function" href="class_r_g_w_coroutine.html#a60c1d6187851953e8a5e1dbc97f69bbd">call</a>(<span class="keyword">new</span> <a class="code hl_typedef" href="rgw__cr__tools_8h.html#a167ac77a509121e34667659eea294483">RGWBucketCreateLocalCR</a>(<a class="code hl_variable" href="class_p_s_subscription_1_1_init_c_r.html#af7c22ab0be0235ea54bb01d5d8d50d89">sync_env</a>-&gt;<a class="code hl_variable" href="struct_r_g_w_data_sync_env.html#a01a643690d3fa3344fc0a8b4633b3998">async_rados</a>,</div>
<div class="line"><a id="l00576" name="l00576"></a><span class="lineno">  576</span>                                                <a class="code hl_variable" href="class_p_s_subscription_1_1_init_c_r.html#af7c22ab0be0235ea54bb01d5d8d50d89">sync_env</a>-&gt;<a class="code hl_variable" href="struct_r_g_w_data_sync_env.html#acfebf6dda76ac5469de5a7edeb00548a">store</a>,</div>
<div class="line"><a id="l00577" name="l00577"></a><span class="lineno">  577</span>                                                <a class="code hl_variable" href="class_p_s_subscription_1_1_init_c_r.html#a72c9832c0231fd6c653546c7125fc71c">create_bucket</a>,</div>
<div class="line"><a id="l00578" name="l00578"></a><span class="lineno">  578</span>                                                <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>));</div>
<div class="line"><a id="l00579" name="l00579"></a><span class="lineno">  579</span>          <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_r_g_w_coroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a> &lt; 0) {</div>
<div class="line"><a id="l00580" name="l00580"></a><span class="lineno">  580</span>            ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 1) &lt;&lt; <span class="stringliteral">&quot;ERROR: failed to create bucket: &quot;</span> &lt;&lt; <span class="stringliteral">&quot;tenant=&quot;</span></div>
<div class="line"><a id="l00581" name="l00581"></a><span class="lineno">  581</span>              &lt;&lt; <a class="code hl_variable" href="class_p_s_subscription_1_1_init_c_r.html#a84c691d49e004f21b326559f58a6d302">get_bucket_info</a>.<a class="code hl_variable" href="structrgw__get__bucket__info__params.html#a7f015bafc42bdd6a6f49b5cc27e06f2b">tenant</a> &lt;&lt; <span class="stringliteral">&quot; name=&quot;</span> &lt;&lt; <a class="code hl_variable" href="class_p_s_subscription_1_1_init_c_r.html#a84c691d49e004f21b326559f58a6d302">get_bucket_info</a>.<a class="code hl_variable" href="structrgw__get__bucket__info__params.html#a72ff9cd0ec86635fd8c6021095661a86">bucket_name</a> &lt;&lt; <span class="stringliteral">&quot;: ret=&quot;</span> &lt;&lt; <a class="code hl_variable" href="class_r_g_w_coroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a> &lt;&lt; dendl;</div>
<div class="line"><a id="l00582" name="l00582"></a><span class="lineno">  582</span>            <span class="keywordflow">return</span> <a class="code hl_function" href="class_r_g_w_coroutine.html#a576a8ced300f52809ad477f0082e3bcd">set_cr_error</a>(<a class="code hl_variable" href="class_r_g_w_coroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a>);</div>
<div class="line"><a id="l00583" name="l00583"></a><span class="lineno">  583</span>          }</div>
<div class="line"><a id="l00584" name="l00584"></a><span class="lineno">  584</span> </div>
<div class="line"><a id="l00585" name="l00585"></a><span class="lineno">  585</span>          <span class="comment">/* second iteration: we got -ENOENT and created a bucket */</span></div>
<div class="line"><a id="l00586" name="l00586"></a><span class="lineno">  586</span>        }</div>
<div class="line"><a id="l00587" name="l00587"></a><span class="lineno">  587</span> </div>
<div class="line"><a id="l00588" name="l00588"></a><span class="lineno">  588</span>        <span class="comment">/* failed twice on -ENOENT, unexpected */</span></div>
<div class="line"><a id="l00589" name="l00589"></a><span class="lineno">  589</span>        ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 1) &lt;&lt; <span class="stringliteral">&quot;ERROR: failed to create bucket &quot;</span> &lt;&lt; <span class="stringliteral">&quot;tenant=&quot;</span> &lt;&lt; <a class="code hl_variable" href="class_p_s_subscription_1_1_init_c_r.html#a84c691d49e004f21b326559f58a6d302">get_bucket_info</a>.<a class="code hl_variable" href="structrgw__get__bucket__info__params.html#a7f015bafc42bdd6a6f49b5cc27e06f2b">tenant</a></div>
<div class="line"><a id="l00590" name="l00590"></a><span class="lineno">  590</span>          &lt;&lt; <span class="stringliteral">&quot; name=&quot;</span> &lt;&lt; <a class="code hl_variable" href="class_p_s_subscription_1_1_init_c_r.html#a84c691d49e004f21b326559f58a6d302">get_bucket_info</a>.<a class="code hl_variable" href="structrgw__get__bucket__info__params.html#a72ff9cd0ec86635fd8c6021095661a86">bucket_name</a> &lt;&lt; dendl;</div>
<div class="line"><a id="l00591" name="l00591"></a><span class="lineno">  591</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="class_r_g_w_coroutine.html#a576a8ced300f52809ad477f0082e3bcd">set_cr_error</a>(-EIO);</div>
<div class="line"><a id="l00592" name="l00592"></a><span class="lineno">  592</span>      }</div>
<div class="line"><a id="l00593" name="l00593"></a><span class="lineno">  593</span>      <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00594" name="l00594"></a><span class="lineno">  594</span>    }</div>
</div>
<div class="line"><a id="l00595" name="l00595"></a><span class="lineno">  595</span>  };</div>
</div>
<div class="line"><a id="l00596" name="l00596"></a><span class="lineno">  596</span> </div>
<div class="line"><a id="l00597" name="l00597"></a><span class="lineno">  597</span>  <span class="keyword">template</span>&lt;<span class="keyword">typename</span> EventType&gt;</div>
<div class="foldopen" id="foldopen00598" data-start="{" data-end="};">
<div class="line"><a id="l00598" name="l00598"></a><span class="lineno"><a class="line" href="class_p_s_subscription_1_1_store_event_c_r.html">  598</a></span>  <span class="keyword">class </span><a class="code hl_class" href="class_p_s_subscription_1_1_store_event_c_r.html">StoreEventCR</a> : <span class="keyword">public</span> <a class="code hl_class" href="class_r_g_w_coroutine.html">RGWCoroutine</a> {</div>
<div class="line"><a id="l00599" name="l00599"></a><span class="lineno"><a class="line" href="class_p_s_subscription_1_1_store_event_c_r.html#a9fb6ec2417f8c3e00ca4633db0ce9b5f">  599</a></span>    <a class="code hl_struct" href="struct_r_g_w_data_sync_ctx.html">RGWDataSyncCtx</a>* <span class="keyword">const</span> <a class="code hl_variable" href="class_p_s_subscription_1_1_store_event_c_r.html#a9fb6ec2417f8c3e00ca4633db0ce9b5f">sc</a>;</div>
<div class="line"><a id="l00600" name="l00600"></a><span class="lineno"><a class="line" href="class_p_s_subscription_1_1_store_event_c_r.html#a2b6d94e2107fb44f25b2b1abb0a0a483">  600</a></span>    <a class="code hl_struct" href="struct_r_g_w_data_sync_env.html">RGWDataSyncEnv</a>* <span class="keyword">const</span> <a class="code hl_variable" href="class_p_s_subscription_1_1_store_event_c_r.html#a2b6d94e2107fb44f25b2b1abb0a0a483">sync_env</a>;</div>
<div class="line"><a id="l00601" name="l00601"></a><span class="lineno"><a class="line" href="class_p_s_subscription_1_1_store_event_c_r.html#a018bb213403fc80342a2c898db7a4fa4">  601</a></span>    <span class="keyword">const</span> <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#a6b984d869299084410b95debaf7a9163">PSSubscriptionRef</a> <a class="code hl_variable" href="class_p_s_subscription_1_1_store_event_c_r.html#a018bb213403fc80342a2c898db7a4fa4">sub</a>;</div>
<div class="line"><a id="l00602" name="l00602"></a><span class="lineno"><a class="line" href="class_p_s_subscription_1_1_store_event_c_r.html#a9913c5cdfac81c8faee065a382e17c7c">  602</a></span>    <span class="keyword">const</span> <a class="code hl_class" href="class_p_s_event.html">PSEvent&lt;EventType&gt;</a> <a class="code hl_variable" href="class_p_s_subscription_1_1_store_event_c_r.html#a9913c5cdfac81c8faee065a382e17c7c">pse</a>;</div>
<div class="line"><a id="l00603" name="l00603"></a><span class="lineno"><a class="line" href="class_p_s_subscription_1_1_store_event_c_r.html#ab6430a6b718695d30f66ba0df62991cc">  603</a></span>    <span class="keyword">const</span> <span class="keywordtype">string</span> <a class="code hl_variable" href="class_p_s_subscription_1_1_store_event_c_r.html#ab6430a6b718695d30f66ba0df62991cc">oid_prefix</a>;</div>
<div class="line"><a id="l00604" name="l00604"></a><span class="lineno">  604</span> </div>
<div class="line"><a id="l00605" name="l00605"></a><span class="lineno">  605</span>  <span class="keyword">public</span>:</div>
<div class="foldopen" id="foldopen00606" data-start="{" data-end="}">
<div class="line"><a id="l00606" name="l00606"></a><span class="lineno"><a class="line" href="class_p_s_subscription_1_1_store_event_c_r.html#a7a0abb4ce4e2b32e67e112ea4179b7d5">  606</a></span>    <a class="code hl_function" href="class_p_s_subscription_1_1_store_event_c_r.html#a7a0abb4ce4e2b32e67e112ea4179b7d5">StoreEventCR</a>(<a class="code hl_struct" href="struct_r_g_w_data_sync_ctx.html">RGWDataSyncCtx</a>* <span class="keyword">const</span> _sc,</div>
<div class="line"><a id="l00607" name="l00607"></a><span class="lineno">  607</span>                 <span class="keyword">const</span> <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#a6b984d869299084410b95debaf7a9163">PSSubscriptionRef</a>&amp; _sub,</div>
<div class="line"><a id="l00608" name="l00608"></a><span class="lineno">  608</span>                 <span class="keyword">const</span> <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#ad8b26748ff02957ec1ec373a4f0a420f">EventRef&lt;EventType&gt;</a>&amp; _event) : <a class="code hl_class" href="class_r_g_w_coroutine.html">RGWCoroutine</a>(_sc-&gt;<a class="code hl_variable" href="class_r_g_w_coroutine.html#a887e803a293aff88fd8d60003a73e50a">cct</a>),</div>
<div class="line"><a id="l00609" name="l00609"></a><span class="lineno">  609</span>                                     <a class="code hl_variable" href="class_p_s_subscription_1_1_store_event_c_r.html#a9fb6ec2417f8c3e00ca4633db0ce9b5f">sc</a>(_sc), <a class="code hl_variable" href="class_p_s_subscription_1_1_store_event_c_r.html#a2b6d94e2107fb44f25b2b1abb0a0a483">sync_env</a>(_sc-&gt;<a class="code hl_variable" href="class_p_s_subscription.html#ac19d731eb2eefd3b630d14735f1b130c">env</a>),</div>
<div class="line"><a id="l00610" name="l00610"></a><span class="lineno">  610</span>                                     <a class="code hl_variable" href="class_p_s_subscription_1_1_store_event_c_r.html#a018bb213403fc80342a2c898db7a4fa4">sub</a>(_sub),</div>
<div class="line"><a id="l00611" name="l00611"></a><span class="lineno">  611</span>                                     <a class="code hl_variable" href="class_p_s_subscription_1_1_store_event_c_r.html#a9913c5cdfac81c8faee065a382e17c7c">pse</a>(_event),</div>
<div class="line"><a id="l00612" name="l00612"></a><span class="lineno">  612</span>                                     <a class="code hl_variable" href="class_p_s_subscription_1_1_store_event_c_r.html#ab6430a6b718695d30f66ba0df62991cc">oid_prefix</a>(<a class="code hl_variable" href="class_p_s_subscription_1_1_store_event_c_r.html#a018bb213403fc80342a2c898db7a4fa4">sub</a>-&gt;<a class="code hl_variable" href="class_p_s_subscription.html#a9c8bfa5cfb2bdfa87066800216853c3e">sub_conf</a>-&gt;data_oid_prefix) {</div>
<div class="line"><a id="l00613" name="l00613"></a><span class="lineno">  613</span>    }</div>
</div>
<div class="line"><a id="l00614" name="l00614"></a><span class="lineno">  614</span> </div>
<div class="foldopen" id="foldopen00615" data-start="{" data-end="}">
<div class="line"><a id="l00615" name="l00615"></a><span class="lineno"><a class="line" href="class_p_s_subscription_1_1_store_event_c_r.html#a90c4335550a3f6534f7950cdb28fd30d">  615</a></span>    <span class="keywordtype">int</span> <a class="code hl_function" href="class_p_s_subscription_1_1_store_event_c_r.html#a90c4335550a3f6534f7950cdb28fd30d">operate</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>)<span class="keyword"> override </span>{</div>
<div class="line"><a id="l00616" name="l00616"></a><span class="lineno">  616</span>      <a class="code hl_struct" href="structrgw__object__simple__put__params.html">rgw_object_simple_put_params</a> put_obj;</div>
<div class="line"><a id="l00617" name="l00617"></a><span class="lineno">  617</span>      reenter(<span class="keyword">this</span>) {</div>
<div class="line"><a id="l00618" name="l00618"></a><span class="lineno">  618</span> </div>
<div class="line"><a id="l00619" name="l00619"></a><span class="lineno">  619</span>        put_obj.<a class="code hl_variable" href="structrgw__object__simple__put__params.html#a6b50628ccd86f6d890fd1c1881cf8952">bucket</a> = <a class="code hl_variable" href="class_p_s_subscription_1_1_store_event_c_r.html#a018bb213403fc80342a2c898db7a4fa4">sub</a>-&gt;bucket;</div>
<div class="line"><a id="l00620" name="l00620"></a><span class="lineno">  620</span>        put_obj.<a class="code hl_variable" href="structrgw__object__simple__put__params.html#a7d93d93ec10761ea3b8cbd5608326e9f">key</a> = <a class="code hl_struct" href="structrgw__obj__key.html">rgw_obj_key</a>(<a class="code hl_variable" href="class_p_s_subscription_1_1_store_event_c_r.html#ab6430a6b718695d30f66ba0df62991cc">oid_prefix</a> + <a class="code hl_variable" href="class_p_s_subscription_1_1_store_event_c_r.html#a9913c5cdfac81c8faee065a382e17c7c">pse</a>.id());</div>
<div class="line"><a id="l00621" name="l00621"></a><span class="lineno">  621</span> </div>
<div class="line"><a id="l00622" name="l00622"></a><span class="lineno">  622</span>        <a class="code hl_variable" href="class_p_s_subscription_1_1_store_event_c_r.html#a9913c5cdfac81c8faee065a382e17c7c">pse</a>.format(&amp;put_obj.<a class="code hl_variable" href="structrgw__object__simple__put__params.html#a938de9f134a1dc186cf8d8eccf2709a9">data</a>);</div>
<div class="line"><a id="l00623" name="l00623"></a><span class="lineno">  623</span>       </div>
<div class="line"><a id="l00624" name="l00624"></a><span class="lineno">  624</span>        {</div>
<div class="line"><a id="l00625" name="l00625"></a><span class="lineno">  625</span>          bufferlist bl;</div>
<div class="line"><a id="l00626" name="l00626"></a><span class="lineno">  626</span>          <a class="code hl_variable" href="class_p_s_subscription_1_1_store_event_c_r.html#a9913c5cdfac81c8faee065a382e17c7c">pse</a>.encode_event(bl);</div>
<div class="line"><a id="l00627" name="l00627"></a><span class="lineno">  627</span>          bufferlist bl64;</div>
<div class="line"><a id="l00628" name="l00628"></a><span class="lineno">  628</span>          bl.encode_base64(bl64);</div>
<div class="line"><a id="l00629" name="l00629"></a><span class="lineno">  629</span>          put_obj.<a class="code hl_variable" href="structrgw__object__simple__put__params.html#a1365b4827b01099307ae857bd42aecbb">user_data</a> = bl64.to_str();</div>
<div class="line"><a id="l00630" name="l00630"></a><span class="lineno">  630</span>        }</div>
<div class="line"><a id="l00631" name="l00631"></a><span class="lineno">  631</span>        </div>
<div class="line"><a id="l00632" name="l00632"></a><span class="lineno">  632</span>        yield <a class="code hl_function" href="class_r_g_w_coroutine.html#a60c1d6187851953e8a5e1dbc97f69bbd">call</a>(<span class="keyword">new</span> <a class="code hl_typedef" href="rgw__cr__tools_8h.html#abf95ff846d1dc3626ed9c61af109a6c4">RGWObjectSimplePutCR</a>(<a class="code hl_variable" href="class_p_s_subscription_1_1_store_event_c_r.html#a2b6d94e2107fb44f25b2b1abb0a0a483">sync_env</a>-&gt;<a class="code hl_variable" href="struct_r_g_w_data_sync_env.html#a01a643690d3fa3344fc0a8b4633b3998">async_rados</a>,</div>
<div class="line"><a id="l00633" name="l00633"></a><span class="lineno">  633</span>                                            <a class="code hl_variable" href="class_p_s_subscription_1_1_store_event_c_r.html#a2b6d94e2107fb44f25b2b1abb0a0a483">sync_env</a>-&gt;<a class="code hl_variable" href="struct_r_g_w_data_sync_env.html#acfebf6dda76ac5469de5a7edeb00548a">store</a>,</div>
<div class="line"><a id="l00634" name="l00634"></a><span class="lineno">  634</span>                                            put_obj,</div>
<div class="line"><a id="l00635" name="l00635"></a><span class="lineno">  635</span>                                            <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>));</div>
<div class="line"><a id="l00636" name="l00636"></a><span class="lineno">  636</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_r_g_w_coroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a> &lt; 0) {</div>
<div class="line"><a id="l00637" name="l00637"></a><span class="lineno">  637</span>          ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 10) &lt;&lt; <span class="stringliteral">&quot;failed to store event: &quot;</span> &lt;&lt; put_obj.<a class="code hl_variable" href="structrgw__object__simple__put__params.html#a6b50628ccd86f6d890fd1c1881cf8952">bucket</a> &lt;&lt; <span class="stringliteral">&quot;/&quot;</span> &lt;&lt; put_obj.<a class="code hl_variable" href="structrgw__object__simple__put__params.html#a7d93d93ec10761ea3b8cbd5608326e9f">key</a> &lt;&lt; <span class="stringliteral">&quot; ret=&quot;</span> &lt;&lt; <a class="code hl_variable" href="class_r_g_w_coroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a> &lt;&lt; dendl;</div>
<div class="line"><a id="l00638" name="l00638"></a><span class="lineno">  638</span>          <span class="keywordflow">return</span> <a class="code hl_function" href="class_r_g_w_coroutine.html#a576a8ced300f52809ad477f0082e3bcd">set_cr_error</a>(<a class="code hl_variable" href="class_r_g_w_coroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a>);</div>
<div class="line"><a id="l00639" name="l00639"></a><span class="lineno">  639</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00640" name="l00640"></a><span class="lineno">  640</span>          ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 20) &lt;&lt; <span class="stringliteral">&quot;event stored: &quot;</span> &lt;&lt; put_obj.<a class="code hl_variable" href="structrgw__object__simple__put__params.html#a6b50628ccd86f6d890fd1c1881cf8952">bucket</a> &lt;&lt; <span class="stringliteral">&quot;/&quot;</span> &lt;&lt; put_obj.<a class="code hl_variable" href="structrgw__object__simple__put__params.html#a7d93d93ec10761ea3b8cbd5608326e9f">key</a> &lt;&lt; dendl;</div>
<div class="line"><a id="l00641" name="l00641"></a><span class="lineno">  641</span>        }</div>
<div class="line"><a id="l00642" name="l00642"></a><span class="lineno">  642</span> </div>
<div class="line"><a id="l00643" name="l00643"></a><span class="lineno">  643</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="class_r_g_w_coroutine.html#a15bce10b8fbd959412a9473b03f0dd82">set_cr_done</a>();</div>
<div class="line"><a id="l00644" name="l00644"></a><span class="lineno">  644</span>      }</div>
<div class="line"><a id="l00645" name="l00645"></a><span class="lineno">  645</span>      <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00646" name="l00646"></a><span class="lineno">  646</span>    }</div>
</div>
<div class="line"><a id="l00647" name="l00647"></a><span class="lineno">  647</span>  };</div>
</div>
<div class="line"><a id="l00648" name="l00648"></a><span class="lineno">  648</span> </div>
<div class="line"><a id="l00649" name="l00649"></a><span class="lineno">  649</span>  <span class="keyword">template</span>&lt;<span class="keyword">typename</span> EventType&gt;</div>
<div class="foldopen" id="foldopen00650" data-start="{" data-end="};">
<div class="line"><a id="l00650" name="l00650"></a><span class="lineno"><a class="line" href="class_p_s_subscription_1_1_push_event_c_r.html">  650</a></span>  <span class="keyword">class </span><a class="code hl_class" href="class_p_s_subscription_1_1_push_event_c_r.html">PushEventCR</a> : <span class="keyword">public</span> <a class="code hl_class" href="class_r_g_w_coroutine.html">RGWCoroutine</a> {</div>
<div class="line"><a id="l00651" name="l00651"></a><span class="lineno"><a class="line" href="class_p_s_subscription_1_1_push_event_c_r.html#a914623b49595a7d8fcefbbc0307a7a1a">  651</a></span>    <a class="code hl_struct" href="struct_r_g_w_data_sync_ctx.html">RGWDataSyncCtx</a>* <span class="keyword">const</span> <a class="code hl_variable" href="class_p_s_subscription_1_1_push_event_c_r.html#a914623b49595a7d8fcefbbc0307a7a1a">sc</a>;</div>
<div class="line"><a id="l00652" name="l00652"></a><span class="lineno"><a class="line" href="class_p_s_subscription_1_1_push_event_c_r.html#a776692c794be9dec1e251d5753a97527">  652</a></span>    <a class="code hl_struct" href="struct_r_g_w_data_sync_env.html">RGWDataSyncEnv</a>* <span class="keyword">const</span> <a class="code hl_variable" href="class_p_s_subscription_1_1_push_event_c_r.html#a776692c794be9dec1e251d5753a97527">sync_env</a>;</div>
<div class="line"><a id="l00653" name="l00653"></a><span class="lineno"><a class="line" href="class_p_s_subscription_1_1_push_event_c_r.html#add9cbebb4997490b4815d6b3911990ac">  653</a></span>    <span class="keyword">const</span> <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#ad8b26748ff02957ec1ec373a4f0a420f">EventRef&lt;EventType&gt;</a> <a class="code hl_variable" href="class_p_s_subscription_1_1_push_event_c_r.html#add9cbebb4997490b4815d6b3911990ac">event</a>;</div>
<div class="line"><a id="l00654" name="l00654"></a><span class="lineno"><a class="line" href="class_p_s_subscription_1_1_push_event_c_r.html#add0adf1643dd88088669683f866085f0">  654</a></span>    <span class="keyword">const</span> <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#a9c6fe8a9e35bb688bdc0dfcb46e74a91">PSSubConfigRef</a>&amp; <a class="code hl_variable" href="class_p_s_subscription_1_1_push_event_c_r.html#add0adf1643dd88088669683f866085f0">sub_conf</a>;</div>
<div class="line"><a id="l00655" name="l00655"></a><span class="lineno">  655</span> </div>
<div class="line"><a id="l00656" name="l00656"></a><span class="lineno">  656</span>  <span class="keyword">public</span>:</div>
<div class="foldopen" id="foldopen00657" data-start="{" data-end="}">
<div class="line"><a id="l00657" name="l00657"></a><span class="lineno"><a class="line" href="class_p_s_subscription_1_1_push_event_c_r.html#ac15fd8a2c8470cabb0a664cf897b0dd7">  657</a></span>    <a class="code hl_function" href="class_p_s_subscription_1_1_push_event_c_r.html#ac15fd8a2c8470cabb0a664cf897b0dd7">PushEventCR</a>(<a class="code hl_struct" href="struct_r_g_w_data_sync_ctx.html">RGWDataSyncCtx</a>* <span class="keyword">const</span> _sc,</div>
<div class="line"><a id="l00658" name="l00658"></a><span class="lineno">  658</span>                 <span class="keyword">const</span> <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#a6b984d869299084410b95debaf7a9163">PSSubscriptionRef</a>&amp; _sub,</div>
<div class="line"><a id="l00659" name="l00659"></a><span class="lineno">  659</span>                 <span class="keyword">const</span> <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#ad8b26748ff02957ec1ec373a4f0a420f">EventRef&lt;EventType&gt;</a>&amp; _event) : <a class="code hl_class" href="class_r_g_w_coroutine.html">RGWCoroutine</a>(_sc-&gt;<a class="code hl_variable" href="class_r_g_w_coroutine.html#a887e803a293aff88fd8d60003a73e50a">cct</a>),</div>
<div class="line"><a id="l00660" name="l00660"></a><span class="lineno">  660</span>                                     <a class="code hl_variable" href="class_p_s_subscription_1_1_push_event_c_r.html#a914623b49595a7d8fcefbbc0307a7a1a">sc</a>(_sc), <a class="code hl_variable" href="class_p_s_subscription_1_1_push_event_c_r.html#a776692c794be9dec1e251d5753a97527">sync_env</a>(_sc-&gt;<a class="code hl_variable" href="class_p_s_subscription.html#ac19d731eb2eefd3b630d14735f1b130c">env</a>),</div>
<div class="line"><a id="l00661" name="l00661"></a><span class="lineno">  661</span>                                     <a class="code hl_variable" href="class_p_s_subscription_1_1_push_event_c_r.html#add9cbebb4997490b4815d6b3911990ac">event</a>(_event),</div>
<div class="line"><a id="l00662" name="l00662"></a><span class="lineno">  662</span>                                     <a class="code hl_variable" href="class_p_s_subscription_1_1_push_event_c_r.html#add0adf1643dd88088669683f866085f0">sub_conf</a>(_sub-&gt;<a class="code hl_variable" href="class_p_s_subscription_1_1_push_event_c_r.html#add0adf1643dd88088669683f866085f0">sub_conf</a>) {</div>
<div class="line"><a id="l00663" name="l00663"></a><span class="lineno">  663</span>    }</div>
</div>
<div class="line"><a id="l00664" name="l00664"></a><span class="lineno">  664</span> </div>
<div class="foldopen" id="foldopen00665" data-start="{" data-end="}">
<div class="line"><a id="l00665" name="l00665"></a><span class="lineno"><a class="line" href="class_p_s_subscription_1_1_push_event_c_r.html#a0427bbe23dd682305d9ac3cf585881df">  665</a></span>    <span class="keywordtype">int</span> <a class="code hl_function" href="class_p_s_subscription_1_1_push_event_c_r.html#a0427bbe23dd682305d9ac3cf585881df">operate</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>)<span class="keyword"> override </span>{</div>
<div class="line"><a id="l00666" name="l00666"></a><span class="lineno">  666</span>      reenter(<span class="keyword">this</span>) {</div>
<div class="line"><a id="l00667" name="l00667"></a><span class="lineno">  667</span>        ceph_assert(<a class="code hl_variable" href="class_p_s_subscription_1_1_push_event_c_r.html#add0adf1643dd88088669683f866085f0">sub_conf</a>-&gt;push_endpoint);</div>
<div class="line"><a id="l00668" name="l00668"></a><span class="lineno">  668</span>        yield <a class="code hl_function" href="class_r_g_w_coroutine.html#a60c1d6187851953e8a5e1dbc97f69bbd">call</a>(<a class="code hl_variable" href="class_p_s_subscription_1_1_push_event_c_r.html#add0adf1643dd88088669683f866085f0">sub_conf</a>-&gt;push_endpoint-&gt;send_to_completion_async(*<a class="code hl_variable" href="class_p_s_subscription_1_1_push_event_c_r.html#add9cbebb4997490b4815d6b3911990ac">event</a>.get(), <a class="code hl_variable" href="class_p_s_subscription_1_1_push_event_c_r.html#a776692c794be9dec1e251d5753a97527">sync_env</a>));</div>
<div class="line"><a id="l00669" name="l00669"></a><span class="lineno">  669</span>      </div>
<div class="line"><a id="l00670" name="l00670"></a><span class="lineno">  670</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_r_g_w_coroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a> &lt; 0) {</div>
<div class="line"><a id="l00671" name="l00671"></a><span class="lineno">  671</span>          ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 10) &lt;&lt; <span class="stringliteral">&quot;failed to push event: &quot;</span> &lt;&lt; <span class="keyword">event</span>-&gt;id &lt;&lt;</div>
<div class="line"><a id="l00672" name="l00672"></a><span class="lineno">  672</span>            <span class="stringliteral">&quot; to endpoint: &quot;</span> &lt;&lt; <a class="code hl_variable" href="class_p_s_subscription_1_1_push_event_c_r.html#add0adf1643dd88088669683f866085f0">sub_conf</a>-&gt;push_endpoint_name &lt;&lt; <span class="stringliteral">&quot; ret=&quot;</span> &lt;&lt; <a class="code hl_variable" href="class_r_g_w_coroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a> &lt;&lt; dendl;</div>
<div class="line"><a id="l00673" name="l00673"></a><span class="lineno">  673</span>          <span class="keywordflow">return</span> <a class="code hl_function" href="class_r_g_w_coroutine.html#a576a8ced300f52809ad477f0082e3bcd">set_cr_error</a>(<a class="code hl_variable" href="class_r_g_w_coroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a>);</div>
<div class="line"><a id="l00674" name="l00674"></a><span class="lineno">  674</span>        }</div>
<div class="line"><a id="l00675" name="l00675"></a><span class="lineno">  675</span>        </div>
<div class="line"><a id="l00676" name="l00676"></a><span class="lineno">  676</span>        ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 20) &lt;&lt; <span class="stringliteral">&quot;event: &quot;</span> &lt;&lt; <span class="keyword">event</span>-&gt;id &lt;&lt;</div>
<div class="line"><a id="l00677" name="l00677"></a><span class="lineno">  677</span>          <span class="stringliteral">&quot; pushed to endpoint: &quot;</span> &lt;&lt; <a class="code hl_variable" href="class_p_s_subscription_1_1_push_event_c_r.html#add0adf1643dd88088669683f866085f0">sub_conf</a>-&gt;push_endpoint_name &lt;&lt; dendl;</div>
<div class="line"><a id="l00678" name="l00678"></a><span class="lineno">  678</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="class_r_g_w_coroutine.html#a15bce10b8fbd959412a9473b03f0dd82">set_cr_done</a>();</div>
<div class="line"><a id="l00679" name="l00679"></a><span class="lineno">  679</span>      }</div>
<div class="line"><a id="l00680" name="l00680"></a><span class="lineno">  680</span>      <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00681" name="l00681"></a><span class="lineno">  681</span>    }</div>
</div>
<div class="line"><a id="l00682" name="l00682"></a><span class="lineno">  682</span>  };</div>
</div>
<div class="line"><a id="l00683" name="l00683"></a><span class="lineno">  683</span> </div>
<div class="line"><a id="l00684" name="l00684"></a><span class="lineno">  684</span><span class="keyword">public</span>:</div>
<div class="foldopen" id="foldopen00685" data-start="{" data-end="}">
<div class="line"><a id="l00685" name="l00685"></a><span class="lineno"><a class="line" href="class_p_s_subscription.html#ac4b85e6ab3b24a238da701fd23e96dcd">  685</a></span>  <a class="code hl_function" href="class_p_s_subscription.html#ac4b85e6ab3b24a238da701fd23e96dcd">PSSubscription</a>(<a class="code hl_struct" href="struct_r_g_w_data_sync_ctx.html">RGWDataSyncCtx</a> *_sc,</div>
<div class="line"><a id="l00686" name="l00686"></a><span class="lineno">  686</span>                 <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#a8cf75fd83a22c03e4eeae0932b31752a">PSEnvRef</a> _env,</div>
<div class="line"><a id="l00687" name="l00687"></a><span class="lineno">  687</span>                 <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#a9c6fe8a9e35bb688bdc0dfcb46e74a91">PSSubConfigRef</a>&amp; _sub_conf) : <a class="code hl_variable" href="class_p_s_subscription.html#adc76ddde13ef0b537499d5b9de98dfe7">sc</a>(_sc), <a class="code hl_variable" href="class_p_s_subscription.html#a31143970c91f05756ab122702bea3bff">sync_env</a>(_sc-&gt;<a class="code hl_variable" href="class_p_s_subscription.html#ac19d731eb2eefd3b630d14735f1b130c">env</a>),</div>
<div class="line"><a id="l00688" name="l00688"></a><span class="lineno">  688</span>                                      <a class="code hl_variable" href="class_p_s_subscription.html#ac19d731eb2eefd3b630d14735f1b130c">env</a>(_env),</div>
<div class="line"><a id="l00689" name="l00689"></a><span class="lineno">  689</span>                                      <a class="code hl_variable" href="class_p_s_subscription.html#a9c8bfa5cfb2bdfa87066800216853c3e">sub_conf</a>(_sub_conf),</div>
<div class="line"><a id="l00690" name="l00690"></a><span class="lineno">  690</span>                                      <a class="code hl_variable" href="class_p_s_subscription.html#a111d5feeb4587d071f69f5304d368200">data_access</a>(<a class="code hl_namespace" href="namespacestd.html">std</a>::make_shared&lt;<a class="code hl_class" href="class_r_g_w_data_access.html">RGWDataAccess</a>&gt;(<a class="code hl_variable" href="class_p_s_subscription.html#a31143970c91f05756ab122702bea3bff">sync_env</a>-&gt;<a class="code hl_variable" href="rgw__admin_8cc.html#a6fdb26d64b14d837b60e83a6ca3e2863">store</a>)) {}</div>
</div>
<div class="line"><a id="l00691" name="l00691"></a><span class="lineno">  691</span> </div>
<div class="foldopen" id="foldopen00692" data-start="{" data-end="}">
<div class="line"><a id="l00692" name="l00692"></a><span class="lineno"><a class="line" href="class_p_s_subscription.html#ac1ca0832c0c476de049a7f565cc8ccc2">  692</a></span>  <a class="code hl_function" href="class_p_s_subscription.html#ac1ca0832c0c476de049a7f565cc8ccc2">PSSubscription</a>(<a class="code hl_struct" href="struct_r_g_w_data_sync_ctx.html">RGWDataSyncCtx</a> *_sc,</div>
<div class="line"><a id="l00693" name="l00693"></a><span class="lineno">  693</span>                 <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#a8cf75fd83a22c03e4eeae0932b31752a">PSEnvRef</a> _env,</div>
<div class="line"><a id="l00694" name="l00694"></a><span class="lineno">  694</span>                 <a class="code hl_struct" href="structrgw__pubsub__sub__config.html">rgw_pubsub_sub_config</a>&amp; user_sub_conf) : <a class="code hl_variable" href="class_p_s_subscription.html#adc76ddde13ef0b537499d5b9de98dfe7">sc</a>(_sc), <a class="code hl_variable" href="class_p_s_subscription.html#a31143970c91f05756ab122702bea3bff">sync_env</a>(_sc-&gt;<a class="code hl_variable" href="class_p_s_subscription.html#ac19d731eb2eefd3b630d14735f1b130c">env</a>),</div>
<div class="line"><a id="l00695" name="l00695"></a><span class="lineno">  695</span>                                      <a class="code hl_variable" href="class_p_s_subscription.html#ac19d731eb2eefd3b630d14735f1b130c">env</a>(_env),</div>
<div class="line"><a id="l00696" name="l00696"></a><span class="lineno">  696</span>                                      <a class="code hl_variable" href="class_p_s_subscription.html#a9c8bfa5cfb2bdfa87066800216853c3e">sub_conf</a>(<a class="code hl_namespace" href="namespacestd.html">std</a>::make_shared&lt;<a class="code hl_struct" href="struct_p_s_sub_config.html">PSSubConfig</a>&gt;()),</div>
<div class="line"><a id="l00697" name="l00697"></a><span class="lineno">  697</span>                                      <a class="code hl_variable" href="class_p_s_subscription.html#a111d5feeb4587d071f69f5304d368200">data_access</a>(<a class="code hl_namespace" href="namespacestd.html">std</a>::make_shared&lt;<a class="code hl_class" href="class_r_g_w_data_access.html">RGWDataAccess</a>&gt;(<a class="code hl_variable" href="class_p_s_subscription.html#a31143970c91f05756ab122702bea3bff">sync_env</a>-&gt;<a class="code hl_variable" href="rgw__admin_8cc.html#a6fdb26d64b14d837b60e83a6ca3e2863">store</a>)) {</div>
<div class="line"><a id="l00698" name="l00698"></a><span class="lineno">  698</span>    <a class="code hl_variable" href="class_p_s_subscription.html#a9c8bfa5cfb2bdfa87066800216853c3e">sub_conf</a>-&gt;from_user_conf(<a class="code hl_variable" href="class_p_s_subscription.html#a31143970c91f05756ab122702bea3bff">sync_env</a>-&gt;<a class="code hl_variable" href="struct_r_g_w_data_sync_env.html#a28c4175bfd0cee40dbe554d69445901e">cct</a>, user_sub_conf, <a class="code hl_variable" href="class_p_s_subscription.html#a31143970c91f05756ab122702bea3bff">sync_env</a>-&gt;<a class="code hl_variable" href="struct_r_g_w_data_sync_env.html#a92cf8eace4df60fbb7c9ea2f63994772">dpp</a>);</div>
<div class="line"><a id="l00699" name="l00699"></a><span class="lineno">  699</span>  }</div>
</div>
<div class="foldopen" id="foldopen00700" data-start="{" data-end="}">
<div class="line"><a id="l00700" name="l00700"></a><span class="lineno"><a class="line" href="class_p_s_subscription.html#a82aea08fb6e91579cb002a26795c6b82">  700</a></span>  <span class="keyword">virtual</span> <a class="code hl_function" href="class_p_s_subscription.html#a82aea08fb6e91579cb002a26795c6b82">~PSSubscription</a>() {</div>
<div class="line"><a id="l00701" name="l00701"></a><span class="lineno">  701</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_p_s_subscription.html#aa1613e48f041939f124734d07ab51c9c">init_cr</a>) {</div>
<div class="line"><a id="l00702" name="l00702"></a><span class="lineno">  702</span>      <a class="code hl_variable" href="class_p_s_subscription.html#aa1613e48f041939f124734d07ab51c9c">init_cr</a>-&gt;put();</div>
<div class="line"><a id="l00703" name="l00703"></a><span class="lineno">  703</span>    }</div>
<div class="line"><a id="l00704" name="l00704"></a><span class="lineno">  704</span>  }</div>
</div>
<div class="line"><a id="l00705" name="l00705"></a><span class="lineno">  705</span> </div>
<div class="line"><a id="l00706" name="l00706"></a><span class="lineno">  706</span>  <span class="keyword">template</span> &lt;<span class="keyword">class</span> C&gt;</div>
<div class="foldopen" id="foldopen00707" data-start="{" data-end="}">
<div class="line"><a id="l00707" name="l00707"></a><span class="lineno"><a class="line" href="class_p_s_subscription.html#a074ee864eceb9cd46902471e60fd2af2">  707</a></span>  <span class="keyword">static</span> <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#a6b984d869299084410b95debaf7a9163">PSSubscriptionRef</a> <a class="code hl_function" href="class_p_s_subscription.html#a074ee864eceb9cd46902471e60fd2af2">get_shared</a>(<a class="code hl_struct" href="struct_r_g_w_data_sync_ctx.html">RGWDataSyncCtx</a> *_sc,</div>
<div class="line"><a id="l00708" name="l00708"></a><span class="lineno">  708</span>                                <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#a8cf75fd83a22c03e4eeae0932b31752a">PSEnvRef</a> _env,</div>
<div class="line"><a id="l00709" name="l00709"></a><span class="lineno">  709</span>                                C&amp; _sub_conf) {</div>
<div class="line"><a id="l00710" name="l00710"></a><span class="lineno">  710</span>    <span class="keyword">auto</span> sub = std::make_shared&lt;PSSubscription&gt;(_sc, _env, _sub_conf);</div>
<div class="line"><a id="l00711" name="l00711"></a><span class="lineno">  711</span>    sub-&gt;init_cr = <span class="keyword">new</span> <a class="code hl_class" href="class_p_s_subscription_1_1_init_c_r.html">InitCR</a>(_sc, sub);</div>
<div class="line"><a id="l00712" name="l00712"></a><span class="lineno">  712</span>    sub-&gt;init_cr-&gt;get();</div>
<div class="line"><a id="l00713" name="l00713"></a><span class="lineno">  713</span>    <span class="keywordflow">return</span> sub;</div>
<div class="line"><a id="l00714" name="l00714"></a><span class="lineno">  714</span>  }</div>
</div>
<div class="line"><a id="l00715" name="l00715"></a><span class="lineno">  715</span> </div>
<div class="foldopen" id="foldopen00716" data-start="{" data-end="}">
<div class="line"><a id="l00716" name="l00716"></a><span class="lineno"><a class="line" href="class_p_s_subscription.html#a83ddd238da4e9e609de738fe1ecaecc3">  716</a></span>  <span class="keywordtype">int</span> <a class="code hl_function" href="class_p_s_subscription.html#a83ddd238da4e9e609de738fe1ecaecc3">call_init_cr</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_class" href="class_r_g_w_coroutine.html">RGWCoroutine</a> *caller) {</div>
<div class="line"><a id="l00717" name="l00717"></a><span class="lineno">  717</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="class_p_s_subscription.html#aa1613e48f041939f124734d07ab51c9c">init_cr</a>-&gt;<a class="code hl_function" href="class_r_g_w_singleton_c_r.html#ab91fb80e453b0fc5fd4fc596ff128b45">execute</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, caller);</div>
<div class="line"><a id="l00718" name="l00718"></a><span class="lineno">  718</span>  }</div>
</div>
<div class="line"><a id="l00719" name="l00719"></a><span class="lineno">  719</span> </div>
<div class="line"><a id="l00720" name="l00720"></a><span class="lineno">  720</span>  <span class="keyword">template</span>&lt;<span class="keyword">typename</span> EventType&gt;</div>
<div class="foldopen" id="foldopen00721" data-start="{" data-end="}">
<div class="line"><a id="l00721" name="l00721"></a><span class="lineno"><a class="line" href="class_p_s_subscription.html#a1296667b0db9a71aa796b567bc66f44a">  721</a></span>  <span class="keyword">static</span> <a class="code hl_class" href="class_r_g_w_coroutine.html">RGWCoroutine</a> *<a class="code hl_function" href="class_p_s_subscription.html#a1296667b0db9a71aa796b567bc66f44a">store_event_cr</a>(<a class="code hl_struct" href="struct_r_g_w_data_sync_ctx.html">RGWDataSyncCtx</a>* <span class="keyword">const</span> <a class="code hl_variable" href="class_p_s_subscription.html#adc76ddde13ef0b537499d5b9de98dfe7">sc</a>, <span class="keyword">const</span> <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#a6b984d869299084410b95debaf7a9163">PSSubscriptionRef</a>&amp; sub, <span class="keyword">const</span> <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#ad8b26748ff02957ec1ec373a4f0a420f">EventRef&lt;EventType&gt;</a>&amp; event) {</div>
<div class="line"><a id="l00722" name="l00722"></a><span class="lineno">  722</span>    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code hl_class" href="class_p_s_subscription_1_1_store_event_c_r.html">StoreEventCR&lt;EventType&gt;</a>(<a class="code hl_variable" href="class_p_s_subscription.html#adc76ddde13ef0b537499d5b9de98dfe7">sc</a>, sub, event);</div>
<div class="line"><a id="l00723" name="l00723"></a><span class="lineno">  723</span>  }</div>
</div>
<div class="line"><a id="l00724" name="l00724"></a><span class="lineno">  724</span> </div>
<div class="line"><a id="l00725" name="l00725"></a><span class="lineno">  725</span>  <span class="keyword">template</span>&lt;<span class="keyword">typename</span> EventType&gt;</div>
<div class="foldopen" id="foldopen00726" data-start="{" data-end="}">
<div class="line"><a id="l00726" name="l00726"></a><span class="lineno"><a class="line" href="class_p_s_subscription.html#ad2da75a138437c4189359f764205b4ad">  726</a></span>  <span class="keyword">static</span> <a class="code hl_class" href="class_r_g_w_coroutine.html">RGWCoroutine</a> *<a class="code hl_function" href="class_p_s_subscription.html#ad2da75a138437c4189359f764205b4ad">push_event_cr</a>(<a class="code hl_struct" href="struct_r_g_w_data_sync_ctx.html">RGWDataSyncCtx</a>* <span class="keyword">const</span> <a class="code hl_variable" href="class_p_s_subscription.html#adc76ddde13ef0b537499d5b9de98dfe7">sc</a>, <span class="keyword">const</span> <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#a6b984d869299084410b95debaf7a9163">PSSubscriptionRef</a>&amp; sub, <span class="keyword">const</span> <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#ad8b26748ff02957ec1ec373a4f0a420f">EventRef&lt;EventType&gt;</a>&amp; event) {</div>
<div class="line"><a id="l00727" name="l00727"></a><span class="lineno">  727</span>    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code hl_class" href="class_p_s_subscription_1_1_push_event_c_r.html">PushEventCR&lt;EventType&gt;</a>(<a class="code hl_variable" href="class_p_s_subscription.html#adc76ddde13ef0b537499d5b9de98dfe7">sc</a>, sub, event);</div>
<div class="line"><a id="l00728" name="l00728"></a><span class="lineno">  728</span>  }</div>
</div>
<div class="line"><a id="l00729" name="l00729"></a><span class="lineno">  729</span>  <span class="keyword">friend</span> <span class="keyword">class </span>InitCR;</div>
<div class="line"><a id="l00730" name="l00730"></a><span class="lineno">  730</span>};</div>
</div>
<div class="line"><a id="l00731" name="l00731"></a><span class="lineno">  731</span> </div>
<div class="foldopen" id="foldopen00732" data-start="{" data-end="};">
<div class="line"><a id="l00732" name="l00732"></a><span class="lineno"><a class="line" href="class_p_s_manager.html">  732</a></span><span class="keyword">class </span><a class="code hl_class" href="class_p_s_manager.html">PSManager</a></div>
<div class="line"><a id="l00733" name="l00733"></a><span class="lineno">  733</span>{</div>
<div class="line"><a id="l00734" name="l00734"></a><span class="lineno"><a class="line" href="class_p_s_manager.html#a585e7be0c31b30a2e67a60cd26ecb533">  734</a></span>  <a class="code hl_struct" href="struct_r_g_w_data_sync_ctx.html">RGWDataSyncCtx</a> *<a class="code hl_variable" href="class_p_s_manager.html#a585e7be0c31b30a2e67a60cd26ecb533">sc</a>;</div>
<div class="line"><a id="l00735" name="l00735"></a><span class="lineno"><a class="line" href="class_p_s_manager.html#a477536a6dae9d495439f7fa6419ac754">  735</a></span>  <a class="code hl_struct" href="struct_r_g_w_data_sync_env.html">RGWDataSyncEnv</a> *<a class="code hl_variable" href="class_p_s_manager.html#a477536a6dae9d495439f7fa6419ac754">sync_env</a>;</div>
<div class="line"><a id="l00736" name="l00736"></a><span class="lineno"><a class="line" href="class_p_s_manager.html#aa5623a0737e94dc34c14d76c6fd68b13">  736</a></span>  <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#a8cf75fd83a22c03e4eeae0932b31752a">PSEnvRef</a> <a class="code hl_variable" href="class_p_s_manager.html#aa5623a0737e94dc34c14d76c6fd68b13">env</a>;</div>
<div class="line"><a id="l00737" name="l00737"></a><span class="lineno">  737</span> </div>
<div class="line"><a id="l00738" name="l00738"></a><span class="lineno"><a class="line" href="class_p_s_manager.html#ae9bf24747e9b91743258d254a6feacb9">  738</a></span>  std::map&lt;string, PSSubscriptionRef&gt; <a class="code hl_variable" href="class_p_s_manager.html#ae9bf24747e9b91743258d254a6feacb9">subs</a>;</div>
<div class="line"><a id="l00739" name="l00739"></a><span class="lineno">  739</span> </div>
<div class="foldopen" id="foldopen00740" data-start="{" data-end="};">
<div class="line"><a id="l00740" name="l00740"></a><span class="lineno"><a class="line" href="class_p_s_manager_1_1_get_sub_c_r.html">  740</a></span>  <span class="keyword">class </span><a class="code hl_class" href="class_p_s_manager_1_1_get_sub_c_r.html">GetSubCR</a> : <span class="keyword">public</span> <a class="code hl_class" href="class_r_g_w_singleton_c_r.html">RGWSingletonCR</a>&lt;PSSubscriptionRef&gt; {</div>
<div class="line"><a id="l00741" name="l00741"></a><span class="lineno"><a class="line" href="class_p_s_manager_1_1_get_sub_c_r.html#a995f7c6f6bd6509136b26d287cd9349c">  741</a></span>    <a class="code hl_struct" href="struct_r_g_w_data_sync_ctx.html">RGWDataSyncCtx</a> *<a class="code hl_variable" href="class_p_s_manager_1_1_get_sub_c_r.html#a995f7c6f6bd6509136b26d287cd9349c">sc</a>;</div>
<div class="line"><a id="l00742" name="l00742"></a><span class="lineno"><a class="line" href="class_p_s_manager_1_1_get_sub_c_r.html#aa2ef7f08fbc3d2481bc5a166308b0e43">  742</a></span>    <a class="code hl_struct" href="struct_r_g_w_data_sync_env.html">RGWDataSyncEnv</a> *<a class="code hl_variable" href="class_p_s_manager_1_1_get_sub_c_r.html#aa2ef7f08fbc3d2481bc5a166308b0e43">sync_env</a>;</div>
<div class="line"><a id="l00743" name="l00743"></a><span class="lineno"><a class="line" href="class_p_s_manager_1_1_get_sub_c_r.html#ae4b3efb486c6c86d1ef7f5b2ad8443c9">  743</a></span>    <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#a3d66fdaaedde99f94c039dc9c8d47221">PSManagerRef</a> <a class="code hl_variable" href="class_p_s_manager_1_1_get_sub_c_r.html#ae4b3efb486c6c86d1ef7f5b2ad8443c9">mgr</a>;</div>
<div class="line"><a id="l00744" name="l00744"></a><span class="lineno"><a class="line" href="class_p_s_manager_1_1_get_sub_c_r.html#a6b2c6ad1264a3f6d2d75f8a3ef21d4de">  744</a></span>    <a class="code hl_struct" href="structrgw__user.html">rgw_user</a> <a class="code hl_variable" href="class_p_s_manager_1_1_get_sub_c_r.html#a6b2c6ad1264a3f6d2d75f8a3ef21d4de">owner</a>;</div>
<div class="line"><a id="l00745" name="l00745"></a><span class="lineno"><a class="line" href="class_p_s_manager_1_1_get_sub_c_r.html#a5c67d0e4828c5b1f26ae1d876bbe4e70">  745</a></span>    <span class="keywordtype">string</span> <a class="code hl_variable" href="class_p_s_manager_1_1_get_sub_c_r.html#a5c67d0e4828c5b1f26ae1d876bbe4e70">sub_name</a>;</div>
<div class="line"><a id="l00746" name="l00746"></a><span class="lineno"><a class="line" href="class_p_s_manager_1_1_get_sub_c_r.html#a2dfe4b183106936c38f1ce797dd9bacf">  746</a></span>    <span class="keywordtype">string</span> <a class="code hl_variable" href="class_p_s_manager_1_1_get_sub_c_r.html#a2dfe4b183106936c38f1ce797dd9bacf">sub_id</a>;</div>
<div class="line"><a id="l00747" name="l00747"></a><span class="lineno"><a class="line" href="class_p_s_manager_1_1_get_sub_c_r.html#abfbe58a2441ccf9af9ea0895332bf4c4">  747</a></span>    <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#a6b984d869299084410b95debaf7a9163">PSSubscriptionRef</a> *<a class="code hl_variable" href="class_p_s_manager_1_1_get_sub_c_r.html#abfbe58a2441ccf9af9ea0895332bf4c4">ref</a>;</div>
<div class="line"><a id="l00748" name="l00748"></a><span class="lineno">  748</span> </div>
<div class="line"><a id="l00749" name="l00749"></a><span class="lineno"><a class="line" href="class_p_s_manager_1_1_get_sub_c_r.html#a32f92da12578a563043fbd723f04280d">  749</a></span>    <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#ae3f05c1346843738a4e4afdd42062743">PSConfigRef</a> <a class="code hl_variable" href="class_p_s_manager_1_1_get_sub_c_r.html#a32f92da12578a563043fbd723f04280d">conf</a>;</div>
<div class="line"><a id="l00750" name="l00750"></a><span class="lineno">  750</span> </div>
<div class="line"><a id="l00751" name="l00751"></a><span class="lineno"><a class="line" href="class_p_s_manager_1_1_get_sub_c_r.html#aa7e3ed056fdc0ddd7a3b9afcf57fd1ab">  751</a></span>    <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#a9c6fe8a9e35bb688bdc0dfcb46e74a91">PSSubConfigRef</a> <a class="code hl_variable" href="class_p_s_manager_1_1_get_sub_c_r.html#aa7e3ed056fdc0ddd7a3b9afcf57fd1ab">sub_conf</a>;</div>
<div class="line"><a id="l00752" name="l00752"></a><span class="lineno"><a class="line" href="class_p_s_manager_1_1_get_sub_c_r.html#a5f139a5a146f5bc350ffcf3f5c1bdfba">  752</a></span>    <a class="code hl_struct" href="structrgw__pubsub__sub__config.html">rgw_pubsub_sub_config</a> <a class="code hl_variable" href="class_p_s_manager_1_1_get_sub_c_r.html#a5f139a5a146f5bc350ffcf3f5c1bdfba">user_sub_conf</a>;</div>
<div class="line"><a id="l00753" name="l00753"></a><span class="lineno">  753</span> </div>
<div class="line"><a id="l00754" name="l00754"></a><span class="lineno">  754</span>  <span class="keyword">public</span>:</div>
<div class="foldopen" id="foldopen00755" data-start="{" data-end="}">
<div class="line"><a id="l00755" name="l00755"></a><span class="lineno"><a class="line" href="class_p_s_manager_1_1_get_sub_c_r.html#a8f84e18e648c98291c57ad80b68ecf13">  755</a></span>    <a class="code hl_function" href="class_p_s_manager_1_1_get_sub_c_r.html#a8f84e18e648c98291c57ad80b68ecf13">GetSubCR</a>(<a class="code hl_struct" href="struct_r_g_w_data_sync_ctx.html">RGWDataSyncCtx</a> *_sc,</div>
<div class="line"><a id="l00756" name="l00756"></a><span class="lineno">  756</span>                      <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#a3d66fdaaedde99f94c039dc9c8d47221">PSManagerRef</a>&amp; _mgr,</div>
<div class="line"><a id="l00757" name="l00757"></a><span class="lineno">  757</span>                      <span class="keyword">const</span> <a class="code hl_struct" href="structrgw__user.html">rgw_user</a>&amp; _owner,</div>
<div class="line"><a id="l00758" name="l00758"></a><span class="lineno">  758</span>                      <span class="keyword">const</span> <span class="keywordtype">string</span>&amp; _sub_name,</div>
<div class="line"><a id="l00759" name="l00759"></a><span class="lineno">  759</span>                      <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#a6b984d869299084410b95debaf7a9163">PSSubscriptionRef</a> *_ref) : <a class="code hl_class" href="class_r_g_w_singleton_c_r.html">RGWSingletonCR</a>&lt;<a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#a6b984d869299084410b95debaf7a9163">PSSubscriptionRef</a>&gt;(_sc-&gt;<a class="code hl_variable" href="class_r_g_w_coroutine.html#a887e803a293aff88fd8d60003a73e50a">cct</a>),</div>
<div class="line"><a id="l00760" name="l00760"></a><span class="lineno">  760</span>                                                 <a class="code hl_variable" href="class_p_s_manager_1_1_get_sub_c_r.html#a995f7c6f6bd6509136b26d287cd9349c">sc</a>(_sc), <a class="code hl_variable" href="class_p_s_manager_1_1_get_sub_c_r.html#aa2ef7f08fbc3d2481bc5a166308b0e43">sync_env</a>(_sc-&gt;<a class="code hl_variable" href="class_p_s_manager.html#aa5623a0737e94dc34c14d76c6fd68b13">env</a>),</div>
<div class="line"><a id="l00761" name="l00761"></a><span class="lineno">  761</span>                                                 <a class="code hl_variable" href="class_p_s_manager_1_1_get_sub_c_r.html#ae4b3efb486c6c86d1ef7f5b2ad8443c9">mgr</a>(_mgr),</div>
<div class="line"><a id="l00762" name="l00762"></a><span class="lineno">  762</span>                                                 <a class="code hl_variable" href="class_p_s_manager_1_1_get_sub_c_r.html#a6b2c6ad1264a3f6d2d75f8a3ef21d4de">owner</a>(_owner),</div>
<div class="line"><a id="l00763" name="l00763"></a><span class="lineno">  763</span>                                                 <a class="code hl_variable" href="class_p_s_manager_1_1_get_sub_c_r.html#a5c67d0e4828c5b1f26ae1d876bbe4e70">sub_name</a>(_sub_name),</div>
<div class="line"><a id="l00764" name="l00764"></a><span class="lineno">  764</span>                                                 <a class="code hl_variable" href="class_p_s_manager_1_1_get_sub_c_r.html#abfbe58a2441ccf9af9ea0895332bf4c4">ref</a>(_ref),</div>
<div class="line"><a id="l00765" name="l00765"></a><span class="lineno">  765</span>                                                 <a class="code hl_variable" href="class_p_s_manager_1_1_get_sub_c_r.html#a32f92da12578a563043fbd723f04280d">conf</a>(<a class="code hl_variable" href="class_p_s_manager_1_1_get_sub_c_r.html#ae4b3efb486c6c86d1ef7f5b2ad8443c9">mgr</a>-&gt;<a class="code hl_variable" href="class_p_s_manager.html#aa5623a0737e94dc34c14d76c6fd68b13">env</a>-&gt;<a class="code hl_variable" href="class_p_s_manager_1_1_get_sub_c_r.html#a32f92da12578a563043fbd723f04280d">conf</a>) {</div>
<div class="line"><a id="l00766" name="l00766"></a><span class="lineno">  766</span>    }</div>
</div>
<div class="line"><a id="l00767" name="l00767"></a><span class="lineno"><a class="line" href="class_p_s_manager_1_1_get_sub_c_r.html#a1d973de5e0017309a8c0054de34b9f25">  767</a></span>    <a class="code hl_function" href="class_p_s_manager_1_1_get_sub_c_r.html#a1d973de5e0017309a8c0054de34b9f25">~GetSubCR</a>() { }</div>
<div class="line"><a id="l00768" name="l00768"></a><span class="lineno">  768</span> </div>
<div class="foldopen" id="foldopen00769" data-start="{" data-end="}">
<div class="line"><a id="l00769" name="l00769"></a><span class="lineno"><a class="line" href="class_p_s_manager_1_1_get_sub_c_r.html#a690fc3848bb956a67d28310d7f57d93e">  769</a></span>    <span class="keywordtype">int</span> <a class="code hl_function" href="class_p_s_manager_1_1_get_sub_c_r.html#a690fc3848bb956a67d28310d7f57d93e">operate</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>)<span class="keyword"> override </span>{</div>
<div class="line"><a id="l00770" name="l00770"></a><span class="lineno">  770</span>      reenter(<span class="keyword">this</span>) {</div>
<div class="line"><a id="l00771" name="l00771"></a><span class="lineno">  771</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_p_s_manager_1_1_get_sub_c_r.html#a6b2c6ad1264a3f6d2d75f8a3ef21d4de">owner</a>.<a class="code hl_function" href="structrgw__user.html#afd8a9e36c5a9f7773c13d903c3124e99">empty</a>()) {</div>
<div class="line"><a id="l00772" name="l00772"></a><span class="lineno">  772</span>          ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 1) &lt;&lt; <span class="stringliteral">&quot;ERROR: missing user info when getting subscription: &quot;</span> &lt;&lt; <a class="code hl_variable" href="class_p_s_manager_1_1_get_sub_c_r.html#a5c67d0e4828c5b1f26ae1d876bbe4e70">sub_name</a> &lt;&lt; dendl;</div>
<div class="line"><a id="l00773" name="l00773"></a><span class="lineno">  773</span>            <a class="code hl_variable" href="class_p_s_manager_1_1_get_sub_c_r.html#ae4b3efb486c6c86d1ef7f5b2ad8443c9">mgr</a>-&gt;remove_get_sub(<a class="code hl_variable" href="class_p_s_manager_1_1_get_sub_c_r.html#a6b2c6ad1264a3f6d2d75f8a3ef21d4de">owner</a>, <a class="code hl_variable" href="class_p_s_manager_1_1_get_sub_c_r.html#a5c67d0e4828c5b1f26ae1d876bbe4e70">sub_name</a>);</div>
<div class="line"><a id="l00774" name="l00774"></a><span class="lineno">  774</span>            <span class="keywordflow">return</span> <a class="code hl_function" href="class_r_g_w_coroutine.html#a576a8ced300f52809ad477f0082e3bcd">set_cr_error</a>(-EINVAL);</div>
<div class="line"><a id="l00775" name="l00775"></a><span class="lineno">  775</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00776" name="l00776"></a><span class="lineno">  776</span>          <span class="keyword">using </span>ReadInfoCR = <a class="code hl_class" href="class_r_g_w_simple_rados_read_c_r.html">RGWSimpleRadosReadCR&lt;rgw_pubsub_sub_config&gt;</a>;</div>
<div class="line"><a id="l00777" name="l00777"></a><span class="lineno">  777</span>          yield {</div>
<div class="line"><a id="l00778" name="l00778"></a><span class="lineno">  778</span>            <a class="code hl_class" href="class_r_g_w_pub_sub.html">RGWPubSub</a> ps(<a class="code hl_variable" href="class_p_s_manager_1_1_get_sub_c_r.html#aa2ef7f08fbc3d2481bc5a166308b0e43">sync_env</a>-&gt;<a class="code hl_variable" href="struct_r_g_w_data_sync_env.html#acfebf6dda76ac5469de5a7edeb00548a">store</a>, <a class="code hl_variable" href="class_p_s_manager_1_1_get_sub_c_r.html#a6b2c6ad1264a3f6d2d75f8a3ef21d4de">owner</a>.<a class="code hl_variable" href="structrgw__user.html#a2bf13ba0bf6b95ba5a0832e2ba1370e0">tenant</a>);</div>
<div class="line"><a id="l00779" name="l00779"></a><span class="lineno">  779</span>            <a class="code hl_struct" href="structrgw__raw__obj.html">rgw_raw_obj</a> obj;</div>
<div class="line"><a id="l00780" name="l00780"></a><span class="lineno">  780</span>            ps.<a class="code hl_function" href="class_r_g_w_pub_sub.html#a42a64bee787ac29c7963e9e81aa8fe45">get_sub_meta_obj</a>(<a class="code hl_variable" href="class_p_s_manager_1_1_get_sub_c_r.html#a5c67d0e4828c5b1f26ae1d876bbe4e70">sub_name</a>, &amp;obj);</div>
<div class="line"><a id="l00781" name="l00781"></a><span class="lineno">  781</span>            <span class="keywordtype">bool</span> empty_on_enoent = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00782" name="l00782"></a><span class="lineno">  782</span>            <a class="code hl_function" href="class_r_g_w_coroutine.html#a60c1d6187851953e8a5e1dbc97f69bbd">call</a>(<span class="keyword">new</span> ReadInfoCR(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_variable" href="class_p_s_manager_1_1_get_sub_c_r.html#aa2ef7f08fbc3d2481bc5a166308b0e43">sync_env</a>-&gt;<a class="code hl_variable" href="struct_r_g_w_data_sync_env.html#a01a643690d3fa3344fc0a8b4633b3998">async_rados</a>, <a class="code hl_variable" href="class_p_s_manager_1_1_get_sub_c_r.html#aa2ef7f08fbc3d2481bc5a166308b0e43">sync_env</a>-&gt;<a class="code hl_variable" href="struct_r_g_w_data_sync_env.html#acfebf6dda76ac5469de5a7edeb00548a">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#abe4f0602b771d5549a02c0a326d6a832">svc</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_services.html#a742bbed66b1688310eeb8c0b692bf6b9">sysobj</a>,</div>
<div class="line"><a id="l00783" name="l00783"></a><span class="lineno">  783</span>                                obj,</div>
<div class="line"><a id="l00784" name="l00784"></a><span class="lineno">  784</span>                                &amp;<a class="code hl_variable" href="class_p_s_manager_1_1_get_sub_c_r.html#a5f139a5a146f5bc350ffcf3f5c1bdfba">user_sub_conf</a>, empty_on_enoent));</div>
<div class="line"><a id="l00785" name="l00785"></a><span class="lineno">  785</span>          }</div>
<div class="line"><a id="l00786" name="l00786"></a><span class="lineno">  786</span>          <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_r_g_w_coroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a> &lt; 0) {</div>
<div class="line"><a id="l00787" name="l00787"></a><span class="lineno">  787</span>            <a class="code hl_variable" href="class_p_s_manager_1_1_get_sub_c_r.html#ae4b3efb486c6c86d1ef7f5b2ad8443c9">mgr</a>-&gt;remove_get_sub(<a class="code hl_variable" href="class_p_s_manager_1_1_get_sub_c_r.html#a6b2c6ad1264a3f6d2d75f8a3ef21d4de">owner</a>, <a class="code hl_variable" href="class_p_s_manager_1_1_get_sub_c_r.html#a5c67d0e4828c5b1f26ae1d876bbe4e70">sub_name</a>);</div>
<div class="line"><a id="l00788" name="l00788"></a><span class="lineno">  788</span>            <span class="keywordflow">return</span> <a class="code hl_function" href="class_r_g_w_coroutine.html#a576a8ced300f52809ad477f0082e3bcd">set_cr_error</a>(<a class="code hl_variable" href="class_r_g_w_coroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a>);</div>
<div class="line"><a id="l00789" name="l00789"></a><span class="lineno">  789</span>          }</div>
<div class="line"><a id="l00790" name="l00790"></a><span class="lineno">  790</span> </div>
<div class="line"><a id="l00791" name="l00791"></a><span class="lineno">  791</span>          *<a class="code hl_variable" href="class_p_s_manager_1_1_get_sub_c_r.html#abfbe58a2441ccf9af9ea0895332bf4c4">ref</a> = <a class="code hl_function" href="class_p_s_subscription.html#a074ee864eceb9cd46902471e60fd2af2">PSSubscription::get_shared</a>(<a class="code hl_variable" href="class_p_s_manager_1_1_get_sub_c_r.html#a995f7c6f6bd6509136b26d287cd9349c">sc</a>, <a class="code hl_variable" href="class_p_s_manager_1_1_get_sub_c_r.html#ae4b3efb486c6c86d1ef7f5b2ad8443c9">mgr</a>-&gt;<a class="code hl_variable" href="struct_r_g_w_data_sync_ctx.html#aa591262f323062da9bcb164d1e6a1057">env</a>, <a class="code hl_variable" href="class_p_s_manager_1_1_get_sub_c_r.html#a5f139a5a146f5bc350ffcf3f5c1bdfba">user_sub_conf</a>);</div>
<div class="line"><a id="l00792" name="l00792"></a><span class="lineno">  792</span>        }</div>
<div class="line"><a id="l00793" name="l00793"></a><span class="lineno">  793</span> </div>
<div class="line"><a id="l00794" name="l00794"></a><span class="lineno">  794</span>        yield (*ref)-&gt;call_init_cr(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <span class="keyword">this</span>);</div>
<div class="line"><a id="l00795" name="l00795"></a><span class="lineno">  795</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_r_g_w_coroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a> &lt; 0) {</div>
<div class="line"><a id="l00796" name="l00796"></a><span class="lineno">  796</span>          ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 1) &lt;&lt; <span class="stringliteral">&quot;ERROR: failed to init subscription when getting subscription: &quot;</span> &lt;&lt; <a class="code hl_variable" href="class_p_s_manager_1_1_get_sub_c_r.html#a5c67d0e4828c5b1f26ae1d876bbe4e70">sub_name</a> &lt;&lt; dendl;</div>
<div class="line"><a id="l00797" name="l00797"></a><span class="lineno">  797</span>          <a class="code hl_variable" href="class_p_s_manager_1_1_get_sub_c_r.html#ae4b3efb486c6c86d1ef7f5b2ad8443c9">mgr</a>-&gt;remove_get_sub(<a class="code hl_variable" href="class_p_s_manager_1_1_get_sub_c_r.html#a6b2c6ad1264a3f6d2d75f8a3ef21d4de">owner</a>, <a class="code hl_variable" href="class_p_s_manager_1_1_get_sub_c_r.html#a5c67d0e4828c5b1f26ae1d876bbe4e70">sub_name</a>);</div>
<div class="line"><a id="l00798" name="l00798"></a><span class="lineno">  798</span>          <span class="keywordflow">return</span> <a class="code hl_function" href="class_r_g_w_coroutine.html#a576a8ced300f52809ad477f0082e3bcd">set_cr_error</a>(<a class="code hl_variable" href="class_r_g_w_coroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a>);</div>
<div class="line"><a id="l00799" name="l00799"></a><span class="lineno">  799</span>        }</div>
<div class="line"><a id="l00800" name="l00800"></a><span class="lineno">  800</span> </div>
<div class="line"><a id="l00801" name="l00801"></a><span class="lineno">  801</span>        <a class="code hl_variable" href="class_p_s_manager_1_1_get_sub_c_r.html#ae4b3efb486c6c86d1ef7f5b2ad8443c9">mgr</a>-&gt;remove_get_sub(<a class="code hl_variable" href="class_p_s_manager_1_1_get_sub_c_r.html#a6b2c6ad1264a3f6d2d75f8a3ef21d4de">owner</a>, <a class="code hl_variable" href="class_p_s_manager_1_1_get_sub_c_r.html#a5c67d0e4828c5b1f26ae1d876bbe4e70">sub_name</a>);</div>
<div class="line"><a id="l00802" name="l00802"></a><span class="lineno">  802</span> </div>
<div class="line"><a id="l00803" name="l00803"></a><span class="lineno">  803</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="class_r_g_w_coroutine.html#a15bce10b8fbd959412a9473b03f0dd82">set_cr_done</a>();</div>
<div class="line"><a id="l00804" name="l00804"></a><span class="lineno">  804</span>      }</div>
<div class="line"><a id="l00805" name="l00805"></a><span class="lineno">  805</span>      <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00806" name="l00806"></a><span class="lineno">  806</span>    }</div>
</div>
<div class="line"><a id="l00807" name="l00807"></a><span class="lineno">  807</span> </div>
<div class="foldopen" id="foldopen00808" data-start="{" data-end="}">
<div class="line"><a id="l00808" name="l00808"></a><span class="lineno"><a class="line" href="class_p_s_manager_1_1_get_sub_c_r.html#af0df0f337862cf2b11f80818b86cfdec">  808</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="class_p_s_manager_1_1_get_sub_c_r.html#af0df0f337862cf2b11f80818b86cfdec">return_result</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#a6b984d869299084410b95debaf7a9163">PSSubscriptionRef</a> *result)<span class="keyword"> override </span>{</div>
<div class="line"><a id="l00809" name="l00809"></a><span class="lineno">  809</span>      ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 20) &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;(): returning result: retcode=&quot;</span> &lt;&lt; <a class="code hl_variable" href="class_r_g_w_coroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a> &lt;&lt; <span class="stringliteral">&quot; resultp=&quot;</span> &lt;&lt; (<span class="keywordtype">void</span> *)result &lt;&lt; dendl;</div>
<div class="line"><a id="l00810" name="l00810"></a><span class="lineno">  810</span>      <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_r_g_w_coroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a> &gt;= 0) {</div>
<div class="line"><a id="l00811" name="l00811"></a><span class="lineno">  811</span>        *result = *<a class="code hl_variable" href="class_p_s_manager_1_1_get_sub_c_r.html#abfbe58a2441ccf9af9ea0895332bf4c4">ref</a>;</div>
<div class="line"><a id="l00812" name="l00812"></a><span class="lineno">  812</span>      }</div>
<div class="line"><a id="l00813" name="l00813"></a><span class="lineno">  813</span>    }</div>
</div>
<div class="line"><a id="l00814" name="l00814"></a><span class="lineno">  814</span>  };</div>
</div>
<div class="line"><a id="l00815" name="l00815"></a><span class="lineno">  815</span> </div>
<div class="foldopen" id="foldopen00816" data-start="{" data-end="}">
<div class="line"><a id="l00816" name="l00816"></a><span class="lineno"><a class="line" href="class_p_s_manager.html#af00e65e53ad3003ed195d0bf6d55e5ff">  816</a></span>  <span class="keywordtype">string</span> <a class="code hl_function" href="class_p_s_manager.html#af00e65e53ad3003ed195d0bf6d55e5ff">sub_id</a>(<span class="keyword">const</span> <a class="code hl_struct" href="structrgw__user.html">rgw_user</a>&amp; owner, <span class="keyword">const</span> <span class="keywordtype">string</span>&amp; sub_name) {</div>
<div class="line"><a id="l00817" name="l00817"></a><span class="lineno">  817</span>    <span class="keywordtype">string</span> owner_prefix;</div>
<div class="line"><a id="l00818" name="l00818"></a><span class="lineno">  818</span>    <span class="keywordflow">if</span> (!owner.<a class="code hl_function" href="structrgw__user.html#afd8a9e36c5a9f7773c13d903c3124e99">empty</a>()) {</div>
<div class="line"><a id="l00819" name="l00819"></a><span class="lineno">  819</span>      owner_prefix = owner.<a class="code hl_function" href="structrgw__user.html#af00f510d6a9ff0580d87ee46b274d96e">to_str</a>() + <span class="stringliteral">&quot;/&quot;</span>;</div>
<div class="line"><a id="l00820" name="l00820"></a><span class="lineno">  820</span>    }</div>
<div class="line"><a id="l00821" name="l00821"></a><span class="lineno">  821</span> </div>
<div class="line"><a id="l00822" name="l00822"></a><span class="lineno">  822</span>    <span class="keywordflow">return</span> owner_prefix + sub_name;</div>
<div class="line"><a id="l00823" name="l00823"></a><span class="lineno">  823</span>  }</div>
</div>
<div class="line"><a id="l00824" name="l00824"></a><span class="lineno">  824</span> </div>
<div class="line"><a id="l00825" name="l00825"></a><span class="lineno"><a class="line" href="class_p_s_manager.html#af760403fd6debb69b22284e3f83afe58">  825</a></span>  std::map&lt;std::string, GetSubCR *&gt; <a class="code hl_variable" href="class_p_s_manager.html#af760403fd6debb69b22284e3f83afe58">get_subs</a>;</div>
<div class="line"><a id="l00826" name="l00826"></a><span class="lineno">  826</span> </div>
<div class="foldopen" id="foldopen00827" data-start="{" data-end="}">
<div class="line"><a id="l00827" name="l00827"></a><span class="lineno"><a class="line" href="class_p_s_manager.html#a1bfb4ae030026db9fb51b382ba98d1c2">  827</a></span>  <a class="code hl_class" href="class_p_s_manager_1_1_get_sub_c_r.html">GetSubCR</a> *&amp; <a class="code hl_function" href="class_p_s_manager.html#a1bfb4ae030026db9fb51b382ba98d1c2">get_get_subs</a>(<span class="keyword">const</span> <a class="code hl_struct" href="structrgw__user.html">rgw_user</a>&amp; owner, <span class="keyword">const</span> <span class="keywordtype">string</span>&amp; name) {</div>
<div class="line"><a id="l00828" name="l00828"></a><span class="lineno">  828</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="class_p_s_manager.html#af760403fd6debb69b22284e3f83afe58">get_subs</a>[<a class="code hl_function" href="class_p_s_manager.html#af00e65e53ad3003ed195d0bf6d55e5ff">sub_id</a>(owner, name)];</div>
<div class="line"><a id="l00829" name="l00829"></a><span class="lineno">  829</span>  }</div>
</div>
<div class="line"><a id="l00830" name="l00830"></a><span class="lineno">  830</span> </div>
<div class="foldopen" id="foldopen00831" data-start="{" data-end="}">
<div class="line"><a id="l00831" name="l00831"></a><span class="lineno"><a class="line" href="class_p_s_manager.html#a5539347b0f711419ddf20bd17e15ac75">  831</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="class_p_s_manager.html#a5539347b0f711419ddf20bd17e15ac75">remove_get_sub</a>(<span class="keyword">const</span> <a class="code hl_struct" href="structrgw__user.html">rgw_user</a>&amp; owner, <span class="keyword">const</span> <span class="keywordtype">string</span>&amp; name) {</div>
<div class="line"><a id="l00832" name="l00832"></a><span class="lineno">  832</span>    <a class="code hl_variable" href="class_p_s_manager.html#af760403fd6debb69b22284e3f83afe58">get_subs</a>.erase(<a class="code hl_function" href="class_p_s_manager.html#af00e65e53ad3003ed195d0bf6d55e5ff">sub_id</a>(owner, name));</div>
<div class="line"><a id="l00833" name="l00833"></a><span class="lineno">  833</span>  }</div>
</div>
<div class="line"><a id="l00834" name="l00834"></a><span class="lineno">  834</span> </div>
<div class="foldopen" id="foldopen00835" data-start="{" data-end="}">
<div class="line"><a id="l00835" name="l00835"></a><span class="lineno"><a class="line" href="class_p_s_manager.html#a2dd0df3c4402e4e32b84845152f3dcbc">  835</a></span>  <span class="keywordtype">bool</span> <a class="code hl_function" href="class_p_s_manager.html#a2dd0df3c4402e4e32b84845152f3dcbc">find_sub_instance</a>(<span class="keyword">const</span> <a class="code hl_struct" href="structrgw__user.html">rgw_user</a>&amp; owner, <span class="keyword">const</span> <span class="keywordtype">string</span>&amp; sub_name, <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#a6b984d869299084410b95debaf7a9163">PSSubscriptionRef</a> *sub) {</div>
<div class="line"><a id="l00836" name="l00836"></a><span class="lineno">  836</span>    <span class="keyword">auto</span> iter = <a class="code hl_variable" href="class_p_s_manager.html#ae9bf24747e9b91743258d254a6feacb9">subs</a>.find(<a class="code hl_function" href="class_p_s_manager.html#af00e65e53ad3003ed195d0bf6d55e5ff">sub_id</a>(owner, sub_name));</div>
<div class="line"><a id="l00837" name="l00837"></a><span class="lineno">  837</span>    <span class="keywordflow">if</span> (iter != <a class="code hl_variable" href="class_p_s_manager.html#ae9bf24747e9b91743258d254a6feacb9">subs</a>.end()) {</div>
<div class="line"><a id="l00838" name="l00838"></a><span class="lineno">  838</span>      *sub = iter-&gt;second;</div>
<div class="line"><a id="l00839" name="l00839"></a><span class="lineno">  839</span>      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00840" name="l00840"></a><span class="lineno">  840</span>    }</div>
<div class="line"><a id="l00841" name="l00841"></a><span class="lineno">  841</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00842" name="l00842"></a><span class="lineno">  842</span>  }</div>
</div>
<div class="line"><a id="l00843" name="l00843"></a><span class="lineno">  843</span> </div>
<div class="foldopen" id="foldopen00844" data-start="{" data-end="}">
<div class="line"><a id="l00844" name="l00844"></a><span class="lineno"><a class="line" href="class_p_s_manager.html#a4cb42fdc069cbd064cce2d8c6d701cab">  844</a></span>  <a class="code hl_function" href="class_p_s_manager.html#a4cb42fdc069cbd064cce2d8c6d701cab">PSManager</a>(<a class="code hl_struct" href="struct_r_g_w_data_sync_ctx.html">RGWDataSyncCtx</a> *_sc,</div>
<div class="line"><a id="l00845" name="l00845"></a><span class="lineno">  845</span>            <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#a8cf75fd83a22c03e4eeae0932b31752a">PSEnvRef</a> _env) : <a class="code hl_variable" href="class_p_s_manager.html#a585e7be0c31b30a2e67a60cd26ecb533">sc</a>(_sc), <a class="code hl_variable" href="class_p_s_manager.html#a477536a6dae9d495439f7fa6419ac754">sync_env</a>(_sc-&gt;<a class="code hl_variable" href="class_p_s_manager.html#aa5623a0737e94dc34c14d76c6fd68b13">env</a>),</div>
<div class="line"><a id="l00846" name="l00846"></a><span class="lineno">  846</span>                             <a class="code hl_variable" href="class_p_s_manager.html#aa5623a0737e94dc34c14d76c6fd68b13">env</a>(_env) {}</div>
</div>
<div class="line"><a id="l00847" name="l00847"></a><span class="lineno">  847</span> </div>
<div class="line"><a id="l00848" name="l00848"></a><span class="lineno">  848</span><span class="keyword">public</span>:</div>
<div class="foldopen" id="foldopen00849" data-start="{" data-end="}">
<div class="line"><a id="l00849" name="l00849"></a><span class="lineno"><a class="line" href="class_p_s_manager.html#a9f753d83e8dfe9c301b5df6bf4aa5a38">  849</a></span>  <span class="keyword">static</span> <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#a3d66fdaaedde99f94c039dc9c8d47221">PSManagerRef</a> <a class="code hl_function" href="class_p_s_manager.html#a9f753d83e8dfe9c301b5df6bf4aa5a38">get_shared</a>(<a class="code hl_struct" href="struct_r_g_w_data_sync_ctx.html">RGWDataSyncCtx</a> *_sc,</div>
<div class="line"><a id="l00850" name="l00850"></a><span class="lineno">  850</span>                                 <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#a8cf75fd83a22c03e4eeae0932b31752a">PSEnvRef</a> _env) {</div>
<div class="line"><a id="l00851" name="l00851"></a><span class="lineno">  851</span>    <span class="keywordflow">return</span> std::shared_ptr&lt;PSManager&gt;(<span class="keyword">new</span> <a class="code hl_class" href="class_p_s_manager.html">PSManager</a>(_sc, _env));</div>
<div class="line"><a id="l00852" name="l00852"></a><span class="lineno">  852</span>  }</div>
</div>
<div class="line"><a id="l00853" name="l00853"></a><span class="lineno">  853</span> </div>
<div class="foldopen" id="foldopen00854" data-start="{" data-end="}">
<div class="line"><a id="l00854" name="l00854"></a><span class="lineno"><a class="line" href="class_p_s_manager.html#ab8a477525daf311f9308a2d2c73d0d0d">  854</a></span>  <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code hl_function" href="class_p_s_manager.html#ab8a477525daf311f9308a2d2c73d0d0d">call_get_subscription_cr</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_struct" href="struct_r_g_w_data_sync_ctx.html">RGWDataSyncCtx</a> *<a class="code hl_variable" href="class_p_s_manager.html#a585e7be0c31b30a2e67a60cd26ecb533">sc</a>, <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#a3d66fdaaedde99f94c039dc9c8d47221">PSManagerRef</a>&amp; mgr, </div>
<div class="line"><a id="l00855" name="l00855"></a><span class="lineno">  855</span>      <a class="code hl_class" href="class_r_g_w_coroutine.html">RGWCoroutine</a> *caller, <span class="keyword">const</span> <a class="code hl_struct" href="structrgw__user.html">rgw_user</a>&amp; owner, <span class="keyword">const</span> <span class="keywordtype">string</span>&amp; sub_name, <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#a6b984d869299084410b95debaf7a9163">PSSubscriptionRef</a> *ref) {</div>
<div class="line"><a id="l00856" name="l00856"></a><span class="lineno">  856</span>    <span class="keywordflow">if</span> (mgr-&gt;find_sub_instance(owner, sub_name, ref)) {</div>
<div class="line"><a id="l00857" name="l00857"></a><span class="lineno">  857</span>      <span class="comment">/* found it! nothing to execute */</span></div>
<div class="line"><a id="l00858" name="l00858"></a><span class="lineno">  858</span>      ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 20) &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;(): found sub instance&quot;</span> &lt;&lt; dendl;</div>
<div class="line"><a id="l00859" name="l00859"></a><span class="lineno">  859</span>    }</div>
<div class="line"><a id="l00860" name="l00860"></a><span class="lineno">  860</span>    <span class="keyword">auto</span>&amp; gs = mgr-&gt;get_get_subs(owner, sub_name);</div>
<div class="line"><a id="l00861" name="l00861"></a><span class="lineno">  861</span>    <span class="keywordflow">if</span> (!gs) {</div>
<div class="line"><a id="l00862" name="l00862"></a><span class="lineno">  862</span>      ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 20) &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;(): first get subs&quot;</span> &lt;&lt; dendl;</div>
<div class="line"><a id="l00863" name="l00863"></a><span class="lineno">  863</span>      gs = <span class="keyword">new</span> <a class="code hl_class" href="class_p_s_manager_1_1_get_sub_c_r.html">GetSubCR</a>(<a class="code hl_variable" href="class_p_s_manager.html#a585e7be0c31b30a2e67a60cd26ecb533">sc</a>, mgr, owner, sub_name, ref);</div>
<div class="line"><a id="l00864" name="l00864"></a><span class="lineno">  864</span>    }</div>
<div class="line"><a id="l00865" name="l00865"></a><span class="lineno">  865</span>    ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 20) &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;(): executing get subs&quot;</span> &lt;&lt; dendl;</div>
<div class="line"><a id="l00866" name="l00866"></a><span class="lineno">  866</span>    <span class="keywordflow">return</span> gs-&gt;execute(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, caller, ref);</div>
<div class="line"><a id="l00867" name="l00867"></a><span class="lineno">  867</span>  }</div>
</div>
<div class="line"><a id="l00868" name="l00868"></a><span class="lineno">  868</span> </div>
<div class="line"><a id="l00869" name="l00869"></a><span class="lineno"><a class="line" href="class_p_s_manager.html#a8c538eb146a2161f5e88aa46d63ff348">  869</a></span>  <span class="keyword">friend</span> <span class="keyword">class </span><a class="code hl_class" href="class_p_s_manager_1_1_get_sub_c_r.html">GetSubCR</a>;</div>
<div class="line"><a id="l00870" name="l00870"></a><span class="lineno">  870</span>};</div>
</div>
<div class="line"><a id="l00871" name="l00871"></a><span class="lineno">  871</span> </div>
<div class="foldopen" id="foldopen00872" data-start="{" data-end="}">
<div class="line"><a id="l00872" name="l00872"></a><span class="lineno"><a class="line" href="struct_p_s_env.html#a45e838ea9b7fda4ded69dcc450089dba">  872</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="struct_p_s_env.html#a45e838ea9b7fda4ded69dcc450089dba">PSEnv::init_instance</a>(<span class="keyword">const</span> <a class="code hl_class" href="class_r_g_w_realm.html">RGWRealm</a>&amp; realm, uint64_t instance_id, <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#a3d66fdaaedde99f94c039dc9c8d47221">PSManagerRef</a>&amp; mgr) {</div>
<div class="line"><a id="l00873" name="l00873"></a><span class="lineno">  873</span>  <a class="code hl_variable" href="struct_p_s_env.html#aa9230495cea76b6a71da060edc8a5c04">manager</a> = mgr;</div>
<div class="line"><a id="l00874" name="l00874"></a><span class="lineno">  874</span>  <a class="code hl_variable" href="struct_p_s_env.html#aaab4313f2e25eb7c50a7772c6ff5709b">conf</a>-&gt;init_instance(realm, instance_id);</div>
<div class="line"><a id="l00875" name="l00875"></a><span class="lineno">  875</span>}</div>
</div>
<div class="line"><a id="l00876" name="l00876"></a><span class="lineno">  876</span> </div>
<div class="foldopen" id="foldopen00877" data-start="{" data-end="};">
<div class="line"><a id="l00877" name="l00877"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_init_env_c_b_c_r.html">  877</a></span><span class="keyword">class </span><a class="code hl_class" href="class_r_g_w_p_s_init_env_c_b_c_r.html">RGWPSInitEnvCBCR</a> : <span class="keyword">public</span> <a class="code hl_class" href="class_r_g_w_coroutine.html">RGWCoroutine</a> {</div>
<div class="line"><a id="l00878" name="l00878"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_init_env_c_b_c_r.html#af0b859183376647ce88f5f799936fc2e">  878</a></span>  <a class="code hl_struct" href="struct_r_g_w_data_sync_ctx.html">RGWDataSyncCtx</a> *<a class="code hl_variable" href="class_r_g_w_p_s_init_env_c_b_c_r.html#af0b859183376647ce88f5f799936fc2e">sc</a>;</div>
<div class="line"><a id="l00879" name="l00879"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_init_env_c_b_c_r.html#ab305272d1f2d827cacf6a1008b66d953">  879</a></span>  <a class="code hl_struct" href="struct_r_g_w_data_sync_env.html">RGWDataSyncEnv</a> *<a class="code hl_variable" href="class_r_g_w_p_s_init_env_c_b_c_r.html#ab305272d1f2d827cacf6a1008b66d953">sync_env</a>;</div>
<div class="line"><a id="l00880" name="l00880"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_init_env_c_b_c_r.html#a2a06c58c300901e0fe3394d64e337084">  880</a></span>  <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#a8cf75fd83a22c03e4eeae0932b31752a">PSEnvRef</a> <a class="code hl_variable" href="class_r_g_w_p_s_init_env_c_b_c_r.html#a2a06c58c300901e0fe3394d64e337084">env</a>;</div>
<div class="line"><a id="l00881" name="l00881"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_init_env_c_b_c_r.html#ad8a0eb4248223416175df7d91d5e15a8">  881</a></span>  <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#ae3f05c1346843738a4e4afdd42062743">PSConfigRef</a>&amp; <a class="code hl_variable" href="class_r_g_w_p_s_init_env_c_b_c_r.html#ad8a0eb4248223416175df7d91d5e15a8">conf</a>;</div>
<div class="line"><a id="l00882" name="l00882"></a><span class="lineno">  882</span> </div>
<div class="line"><a id="l00883" name="l00883"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_init_env_c_b_c_r.html#aa4f8828e4f628249a52bad2d75165ea8">  883</a></span>  <a class="code hl_struct" href="structrgw__user__create__params.html">rgw_user_create_params</a> <a class="code hl_variable" href="class_r_g_w_p_s_init_env_c_b_c_r.html#aa4f8828e4f628249a52bad2d75165ea8">create_user</a>;</div>
<div class="line"><a id="l00884" name="l00884"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_init_env_c_b_c_r.html#af8380d34a7037f4a8a19a976342fd320">  884</a></span>  <a class="code hl_struct" href="structrgw__get__user__info__params.html">rgw_get_user_info_params</a> <a class="code hl_variable" href="class_r_g_w_p_s_init_env_c_b_c_r.html#af8380d34a7037f4a8a19a976342fd320">get_user_info</a>;</div>
<div class="line"><a id="l00885" name="l00885"></a><span class="lineno">  885</span><span class="keyword">public</span>:</div>
<div class="foldopen" id="foldopen00886" data-start="{" data-end="}">
<div class="line"><a id="l00886" name="l00886"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_init_env_c_b_c_r.html#a7f49632b07c41398f758c200bd150587">  886</a></span>  <a class="code hl_function" href="class_r_g_w_p_s_init_env_c_b_c_r.html#a7f49632b07c41398f758c200bd150587">RGWPSInitEnvCBCR</a>(<a class="code hl_struct" href="struct_r_g_w_data_sync_ctx.html">RGWDataSyncCtx</a> *_sc,</div>
<div class="line"><a id="l00887" name="l00887"></a><span class="lineno">  887</span>                       <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#a8cf75fd83a22c03e4eeae0932b31752a">PSEnvRef</a>&amp; _env) : <a class="code hl_class" href="class_r_g_w_coroutine.html">RGWCoroutine</a>(_sc-&gt;<a class="code hl_variable" href="class_r_g_w_coroutine.html#a887e803a293aff88fd8d60003a73e50a">cct</a>),</div>
<div class="line"><a id="l00888" name="l00888"></a><span class="lineno">  888</span>                                                    <a class="code hl_variable" href="class_r_g_w_p_s_init_env_c_b_c_r.html#af0b859183376647ce88f5f799936fc2e">sc</a>(_sc), <a class="code hl_variable" href="class_r_g_w_p_s_init_env_c_b_c_r.html#ab305272d1f2d827cacf6a1008b66d953">sync_env</a>(_sc-&gt;<a class="code hl_variable" href="class_r_g_w_p_s_init_env_c_b_c_r.html#a2a06c58c300901e0fe3394d64e337084">env</a>),</div>
<div class="line"><a id="l00889" name="l00889"></a><span class="lineno">  889</span>                                                    <a class="code hl_variable" href="class_r_g_w_p_s_init_env_c_b_c_r.html#a2a06c58c300901e0fe3394d64e337084">env</a>(_env), <a class="code hl_variable" href="class_r_g_w_p_s_init_env_c_b_c_r.html#ad8a0eb4248223416175df7d91d5e15a8">conf</a>(<a class="code hl_variable" href="class_r_g_w_p_s_init_env_c_b_c_r.html#a2a06c58c300901e0fe3394d64e337084">env</a>-&gt;<a class="code hl_variable" href="class_r_g_w_p_s_init_env_c_b_c_r.html#ad8a0eb4248223416175df7d91d5e15a8">conf</a>) {}</div>
</div>
<div class="foldopen" id="foldopen00890" data-start="{" data-end="}">
<div class="line"><a id="l00890" name="l00890"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_init_env_c_b_c_r.html#ad1d4b24c6f68f978507b91d565b9714d">  890</a></span>  <span class="keywordtype">int</span> <a class="code hl_function" href="class_r_g_w_p_s_init_env_c_b_c_r.html#ad1d4b24c6f68f978507b91d565b9714d">operate</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>)<span class="keyword"> override </span>{</div>
<div class="line"><a id="l00891" name="l00891"></a><span class="lineno">  891</span>    reenter(<span class="keyword">this</span>) {</div>
<div class="line"><a id="l00892" name="l00892"></a><span class="lineno">  892</span>      ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 1) &lt;&lt; <span class="stringliteral">&quot;: init pubsub config zone=&quot;</span> &lt;&lt; <a class="code hl_variable" href="class_r_g_w_p_s_init_env_c_b_c_r.html#af0b859183376647ce88f5f799936fc2e">sc</a>-&gt;<a class="code hl_variable" href="struct_r_g_w_data_sync_ctx.html#aaa4f4a845ebb475fbdfa87c5df786afb">source_zone</a> &lt;&lt; dendl;</div>
<div class="line"><a id="l00893" name="l00893"></a><span class="lineno">  893</span> </div>
<div class="line"><a id="l00894" name="l00894"></a><span class="lineno">  894</span>      <span class="comment">/* nothing to do here right now */</span></div>
<div class="line"><a id="l00895" name="l00895"></a><span class="lineno">  895</span>      <a class="code hl_variable" href="class_r_g_w_p_s_init_env_c_b_c_r.html#aa4f8828e4f628249a52bad2d75165ea8">create_user</a>.<a class="code hl_variable" href="structrgw__user__create__params.html#a402e0e953064cc0d57dd87460c3d1d37">user</a> = <a class="code hl_variable" href="class_r_g_w_p_s_init_env_c_b_c_r.html#ad8a0eb4248223416175df7d91d5e15a8">conf</a>-&gt;user;</div>
<div class="line"><a id="l00896" name="l00896"></a><span class="lineno">  896</span>      <a class="code hl_variable" href="class_r_g_w_p_s_init_env_c_b_c_r.html#aa4f8828e4f628249a52bad2d75165ea8">create_user</a>.<a class="code hl_variable" href="structrgw__user__create__params.html#a245a940036f4d4cd02a9ea31e4f76bcd">max_buckets</a> = 0; <span class="comment">/* unlimited */</span></div>
<div class="line"><a id="l00897" name="l00897"></a><span class="lineno">  897</span>      <a class="code hl_variable" href="class_r_g_w_p_s_init_env_c_b_c_r.html#aa4f8828e4f628249a52bad2d75165ea8">create_user</a>.<a class="code hl_variable" href="structrgw__user__create__params.html#a940417f1b31319cb6a53e5361fb897f8">display_name</a> = <span class="stringliteral">&quot;pubsub&quot;</span>;</div>
<div class="line"><a id="l00898" name="l00898"></a><span class="lineno">  898</span>      <a class="code hl_variable" href="class_r_g_w_p_s_init_env_c_b_c_r.html#aa4f8828e4f628249a52bad2d75165ea8">create_user</a>.<a class="code hl_variable" href="structrgw__user__create__params.html#a6090daa6a3eea7805709061ff9c00c81">generate_key</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00899" name="l00899"></a><span class="lineno">  899</span>      yield <a class="code hl_function" href="class_r_g_w_coroutine.html#a60c1d6187851953e8a5e1dbc97f69bbd">call</a>(<span class="keyword">new</span> <a class="code hl_typedef" href="rgw__cr__tools_8h.html#ac04dba484d5d560d4949fd9e8009b0ff">RGWUserCreateCR</a>(<a class="code hl_variable" href="class_r_g_w_p_s_init_env_c_b_c_r.html#ab305272d1f2d827cacf6a1008b66d953">sync_env</a>-&gt;<a class="code hl_variable" href="struct_r_g_w_data_sync_env.html#a01a643690d3fa3344fc0a8b4633b3998">async_rados</a>, <a class="code hl_variable" href="class_r_g_w_p_s_init_env_c_b_c_r.html#ab305272d1f2d827cacf6a1008b66d953">sync_env</a>-&gt;<a class="code hl_variable" href="struct_r_g_w_data_sync_env.html#acfebf6dda76ac5469de5a7edeb00548a">store</a>, <a class="code hl_variable" href="class_r_g_w_p_s_init_env_c_b_c_r.html#aa4f8828e4f628249a52bad2d75165ea8">create_user</a>, <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>));</div>
<div class="line"><a id="l00900" name="l00900"></a><span class="lineno">  900</span>      <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_r_g_w_coroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a> &lt; 0 &amp;&amp; <a class="code hl_variable" href="class_r_g_w_coroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a> != -<a class="code hl_define" href="rgw__common_8h.html#af16fc319d56173215e1a7fccad799d6c">ERR_USER_EXIST</a>) {</div>
<div class="line"><a id="l00901" name="l00901"></a><span class="lineno">  901</span>        ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 1) &lt;&lt; <span class="stringliteral">&quot;ERROR: failed to create rgw user: ret=&quot;</span> &lt;&lt; <a class="code hl_variable" href="class_r_g_w_coroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a> &lt;&lt; dendl;</div>
<div class="line"><a id="l00902" name="l00902"></a><span class="lineno">  902</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="class_r_g_w_coroutine.html#a576a8ced300f52809ad477f0082e3bcd">set_cr_error</a>(<a class="code hl_variable" href="class_r_g_w_coroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a>);</div>
<div class="line"><a id="l00903" name="l00903"></a><span class="lineno">  903</span>      }</div>
<div class="line"><a id="l00904" name="l00904"></a><span class="lineno">  904</span> </div>
<div class="line"><a id="l00905" name="l00905"></a><span class="lineno">  905</span>      <a class="code hl_variable" href="class_r_g_w_p_s_init_env_c_b_c_r.html#af8380d34a7037f4a8a19a976342fd320">get_user_info</a>.<a class="code hl_variable" href="structrgw__get__user__info__params.html#ab2a2f83240eecb2269d32359e5ca61d3">user</a> = <a class="code hl_variable" href="class_r_g_w_p_s_init_env_c_b_c_r.html#ad8a0eb4248223416175df7d91d5e15a8">conf</a>-&gt;user;</div>
<div class="line"><a id="l00906" name="l00906"></a><span class="lineno">  906</span>      yield <a class="code hl_function" href="class_r_g_w_coroutine.html#a60c1d6187851953e8a5e1dbc97f69bbd">call</a>(<span class="keyword">new</span> <a class="code hl_typedef" href="rgw__cr__tools_8h.html#a6574e07e6e1d4ff7ff46e824d3ee1791">RGWGetUserInfoCR</a>(<a class="code hl_variable" href="class_r_g_w_p_s_init_env_c_b_c_r.html#ab305272d1f2d827cacf6a1008b66d953">sync_env</a>-&gt;<a class="code hl_variable" href="struct_r_g_w_data_sync_env.html#a01a643690d3fa3344fc0a8b4633b3998">async_rados</a>, <a class="code hl_variable" href="class_r_g_w_p_s_init_env_c_b_c_r.html#ab305272d1f2d827cacf6a1008b66d953">sync_env</a>-&gt;<a class="code hl_variable" href="struct_r_g_w_data_sync_env.html#acfebf6dda76ac5469de5a7edeb00548a">store</a>, <a class="code hl_variable" href="class_r_g_w_p_s_init_env_c_b_c_r.html#af8380d34a7037f4a8a19a976342fd320">get_user_info</a>, <a class="code hl_variable" href="class_r_g_w_p_s_init_env_c_b_c_r.html#a2a06c58c300901e0fe3394d64e337084">env</a>-&gt;data_user_info, <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>));</div>
<div class="line"><a id="l00907" name="l00907"></a><span class="lineno">  907</span>      <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_r_g_w_coroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a> &lt; 0) {</div>
<div class="line"><a id="l00908" name="l00908"></a><span class="lineno">  908</span>        ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 1) &lt;&lt; <span class="stringliteral">&quot;ERROR: failed to create rgw user: ret=&quot;</span> &lt;&lt; <a class="code hl_variable" href="class_r_g_w_coroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a> &lt;&lt; dendl;</div>
<div class="line"><a id="l00909" name="l00909"></a><span class="lineno">  909</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="class_r_g_w_coroutine.html#a576a8ced300f52809ad477f0082e3bcd">set_cr_error</a>(<a class="code hl_variable" href="class_r_g_w_coroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a>);</div>
<div class="line"><a id="l00910" name="l00910"></a><span class="lineno">  910</span>      }</div>
<div class="line"><a id="l00911" name="l00911"></a><span class="lineno">  911</span> </div>
<div class="line"><a id="l00912" name="l00912"></a><span class="lineno">  912</span>      ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 20) &lt;&lt; <span class="stringliteral">&quot;pubsub: get user info cr returned: &quot;</span> &lt;&lt; <a class="code hl_function" href="rgw__sync__module__pubsub_8cc.html#a95cd156406f6d627131b4faa761e7ae6">json_str</a>(<span class="stringliteral">&quot;obj&quot;</span>, *<a class="code hl_variable" href="class_r_g_w_p_s_init_env_c_b_c_r.html#a2a06c58c300901e0fe3394d64e337084">env</a>-&gt;data_user_info, <span class="keyword">true</span>) &lt;&lt; dendl;</div>
<div class="line"><a id="l00913" name="l00913"></a><span class="lineno">  913</span> </div>
<div class="line"><a id="l00914" name="l00914"></a><span class="lineno">  914</span> </div>
<div class="line"><a id="l00915" name="l00915"></a><span class="lineno">  915</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="class_r_g_w_coroutine.html#a15bce10b8fbd959412a9473b03f0dd82">set_cr_done</a>();</div>
<div class="line"><a id="l00916" name="l00916"></a><span class="lineno">  916</span>    }</div>
<div class="line"><a id="l00917" name="l00917"></a><span class="lineno">  917</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00918" name="l00918"></a><span class="lineno">  918</span>  }</div>
</div>
<div class="line"><a id="l00919" name="l00919"></a><span class="lineno">  919</span>};</div>
</div>
<div class="line"><a id="l00920" name="l00920"></a><span class="lineno">  920</span> </div>
<div class="foldopen" id="foldopen00921" data-start="{" data-end="}">
<div class="line"><a id="l00921" name="l00921"></a><span class="lineno"><a class="line" href="rgw__sync__module__pubsub_8cc.html#aa7fc929948fb038192288e423ea816d0">  921</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="rgw__sync__module__pubsub_8cc.html#aa7fc929948fb038192288e423ea816d0">match</a>(<span class="keyword">const</span> <a class="code hl_struct" href="structrgw__pubsub__topic__filter.html">rgw_pubsub_topic_filter</a>&amp; filter, <span class="keyword">const</span> std::string&amp; key_name, <a class="code hl_enumeration" href="namespacergw_1_1notify.html#a11587407d1aff95c9cb4a10979ba813b">rgw::notify::EventType</a> event_type) {</div>
<div class="line"><a id="l00922" name="l00922"></a><span class="lineno">  922</span>  <span class="keywordflow">if</span> (!<a class="code hl_function" href="rgw__sync__module__pubsub_8cc.html#aa7fc929948fb038192288e423ea816d0">match</a>(filter.<a class="code hl_variable" href="structrgw__pubsub__topic__filter.html#ae52f145d30a6ca6338fbb32e07df532c">events</a>, event_type)) {</div>
<div class="line"><a id="l00923" name="l00923"></a><span class="lineno">  923</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00924" name="l00924"></a><span class="lineno">  924</span>  }</div>
<div class="line"><a id="l00925" name="l00925"></a><span class="lineno">  925</span>  <span class="keywordflow">if</span> (!<a class="code hl_function" href="rgw__sync__module__pubsub_8cc.html#aa7fc929948fb038192288e423ea816d0">match</a>(filter.<a class="code hl_variable" href="structrgw__pubsub__topic__filter.html#aedbefc04debf9258f76149ed50cfefb8">s3_filter</a>.<a class="code hl_variable" href="structrgw__s3__filter.html#a8c693d29716c600c15f8080ffbf1d776">key_filter</a>, key_name)) {</div>
<div class="line"><a id="l00926" name="l00926"></a><span class="lineno">  926</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00927" name="l00927"></a><span class="lineno">  927</span>  }</div>
<div class="line"><a id="l00928" name="l00928"></a><span class="lineno">  928</span>  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00929" name="l00929"></a><span class="lineno">  929</span>}</div>
</div>
<div class="line"><a id="l00930" name="l00930"></a><span class="lineno">  930</span> </div>
<div class="foldopen" id="foldopen00931" data-start="{" data-end="};">
<div class="line"><a id="l00931" name="l00931"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_find_bucket_topics_c_r.html">  931</a></span><span class="keyword">class </span><a class="code hl_class" href="class_r_g_w_p_s_find_bucket_topics_c_r.html">RGWPSFindBucketTopicsCR</a> : <span class="keyword">public</span> <a class="code hl_class" href="class_r_g_w_coroutine.html">RGWCoroutine</a> {</div>
<div class="line"><a id="l00932" name="l00932"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_find_bucket_topics_c_r.html#ab99e91fc80f611ae2c4bb209e2bc4e13">  932</a></span>  <a class="code hl_struct" href="struct_r_g_w_data_sync_ctx.html">RGWDataSyncCtx</a> *<a class="code hl_variable" href="class_r_g_w_p_s_find_bucket_topics_c_r.html#ab99e91fc80f611ae2c4bb209e2bc4e13">sc</a>;</div>
<div class="line"><a id="l00933" name="l00933"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_find_bucket_topics_c_r.html#adf7b8e13e32a21f25fd0ab760d09ef11">  933</a></span>  <a class="code hl_struct" href="struct_r_g_w_data_sync_env.html">RGWDataSyncEnv</a> *<a class="code hl_variable" href="class_r_g_w_p_s_find_bucket_topics_c_r.html#adf7b8e13e32a21f25fd0ab760d09ef11">sync_env</a>;</div>
<div class="line"><a id="l00934" name="l00934"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_find_bucket_topics_c_r.html#a00a706912528c20a472687af8c7ff9ea">  934</a></span>  <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#a8cf75fd83a22c03e4eeae0932b31752a">PSEnvRef</a> <a class="code hl_variable" href="class_r_g_w_p_s_find_bucket_topics_c_r.html#a00a706912528c20a472687af8c7ff9ea">env</a>;</div>
<div class="line"><a id="l00935" name="l00935"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_find_bucket_topics_c_r.html#a0be46f59f4719503019c9ac161901255">  935</a></span>  <a class="code hl_struct" href="structrgw__user.html">rgw_user</a> <a class="code hl_variable" href="class_r_g_w_p_s_find_bucket_topics_c_r.html#a0be46f59f4719503019c9ac161901255">owner</a>;</div>
<div class="line"><a id="l00936" name="l00936"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_find_bucket_topics_c_r.html#a0a90b7e37b2ba54977883d4b2c04ca44">  936</a></span>  <a class="code hl_struct" href="structrgw__bucket.html">rgw_bucket</a> <a class="code hl_variable" href="class_r_g_w_p_s_find_bucket_topics_c_r.html#a0a90b7e37b2ba54977883d4b2c04ca44">bucket</a>;</div>
<div class="line"><a id="l00937" name="l00937"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_find_bucket_topics_c_r.html#a70c6fe9ebaa9f382945ac0ebd3aaabfa">  937</a></span>  <a class="code hl_struct" href="structrgw__obj__key.html">rgw_obj_key</a> <a class="code hl_variable" href="class_r_g_w_p_s_find_bucket_topics_c_r.html#a70c6fe9ebaa9f382945ac0ebd3aaabfa">key</a>;</div>
<div class="line"><a id="l00938" name="l00938"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_find_bucket_topics_c_r.html#a4f2ccba5d0fb57addc7b22634ded00de">  938</a></span>  <a class="code hl_enumeration" href="namespacergw_1_1notify.html#a11587407d1aff95c9cb4a10979ba813b">rgw::notify::EventType</a> <a class="code hl_variable" href="class_r_g_w_p_s_find_bucket_topics_c_r.html#a4f2ccba5d0fb57addc7b22634ded00de">event_type</a>;</div>
<div class="line"><a id="l00939" name="l00939"></a><span class="lineno">  939</span> </div>
<div class="line"><a id="l00940" name="l00940"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_find_bucket_topics_c_r.html#a30702afb10821ac96031c6b6651ec84b">  940</a></span>  <a class="code hl_class" href="class_r_g_w_pub_sub.html">RGWPubSub</a> <a class="code hl_variable" href="class_r_g_w_p_s_find_bucket_topics_c_r.html#a30702afb10821ac96031c6b6651ec84b">ps</a>;</div>
<div class="line"><a id="l00941" name="l00941"></a><span class="lineno">  941</span> </div>
<div class="line"><a id="l00942" name="l00942"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_find_bucket_topics_c_r.html#a739933a47419bac5b390db7655e61e43">  942</a></span>  <a class="code hl_struct" href="structrgw__raw__obj.html">rgw_raw_obj</a> <a class="code hl_variable" href="class_r_g_w_p_s_find_bucket_topics_c_r.html#a739933a47419bac5b390db7655e61e43">bucket_obj</a>;</div>
<div class="line"><a id="l00943" name="l00943"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_find_bucket_topics_c_r.html#ad410180186eb553313fa85742b3fe6e5">  943</a></span>  <a class="code hl_struct" href="structrgw__raw__obj.html">rgw_raw_obj</a> <a class="code hl_variable" href="class_r_g_w_p_s_find_bucket_topics_c_r.html#ad410180186eb553313fa85742b3fe6e5">user_obj</a>;</div>
<div class="line"><a id="l00944" name="l00944"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_find_bucket_topics_c_r.html#a18812f04412b816e1e91fc7a9d84170b">  944</a></span>  <a class="code hl_struct" href="structrgw__pubsub__bucket__topics.html">rgw_pubsub_bucket_topics</a> <a class="code hl_variable" href="class_r_g_w_p_s_find_bucket_topics_c_r.html#a18812f04412b816e1e91fc7a9d84170b">bucket_topics</a>;</div>
<div class="line"><a id="l00945" name="l00945"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_find_bucket_topics_c_r.html#ab22c4b769539506751b7f7a08b9bc286">  945</a></span>  <a class="code hl_struct" href="structrgw__pubsub__topics.html">rgw_pubsub_topics</a> <a class="code hl_variable" href="class_r_g_w_p_s_find_bucket_topics_c_r.html#ab22c4b769539506751b7f7a08b9bc286">user_topics</a>;</div>
<div class="line"><a id="l00946" name="l00946"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_find_bucket_topics_c_r.html#a6aa8740a060e1db07d248d1746517b3c">  946</a></span>  <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#a8fac3e9ba436ccafb2b1e164c38b2c93">TopicsRef</a> *<a class="code hl_variable" href="class_r_g_w_p_s_find_bucket_topics_c_r.html#a6aa8740a060e1db07d248d1746517b3c">topics</a>;</div>
<div class="line"><a id="l00947" name="l00947"></a><span class="lineno">  947</span><span class="keyword">public</span>:</div>
<div class="foldopen" id="foldopen00948" data-start="{" data-end="}">
<div class="line"><a id="l00948" name="l00948"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_find_bucket_topics_c_r.html#a6378c6690c72c1af45d488b050419886">  948</a></span>  <a class="code hl_function" href="class_r_g_w_p_s_find_bucket_topics_c_r.html#a6378c6690c72c1af45d488b050419886">RGWPSFindBucketTopicsCR</a>(<a class="code hl_struct" href="struct_r_g_w_data_sync_ctx.html">RGWDataSyncCtx</a> *_sc,</div>
<div class="line"><a id="l00949" name="l00949"></a><span class="lineno">  949</span>                      <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#a8cf75fd83a22c03e4eeae0932b31752a">PSEnvRef</a>&amp; _env,</div>
<div class="line"><a id="l00950" name="l00950"></a><span class="lineno">  950</span>                      <span class="keyword">const</span> <a class="code hl_struct" href="structrgw__user.html">rgw_user</a>&amp; _owner,</div>
<div class="line"><a id="l00951" name="l00951"></a><span class="lineno">  951</span>                      <span class="keyword">const</span> <a class="code hl_struct" href="structrgw__bucket.html">rgw_bucket</a>&amp; _bucket,</div>
<div class="line"><a id="l00952" name="l00952"></a><span class="lineno">  952</span>                      <span class="keyword">const</span> <a class="code hl_struct" href="structrgw__obj__key.html">rgw_obj_key</a>&amp; _key,</div>
<div class="line"><a id="l00953" name="l00953"></a><span class="lineno">  953</span>                      <a class="code hl_enumeration" href="namespacergw_1_1notify.html#a11587407d1aff95c9cb4a10979ba813b">rgw::notify::EventType</a> _event_type,</div>
<div class="line"><a id="l00954" name="l00954"></a><span class="lineno">  954</span>                      <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#a8fac3e9ba436ccafb2b1e164c38b2c93">TopicsRef</a> *_topics) : <a class="code hl_class" href="class_r_g_w_coroutine.html">RGWCoroutine</a>(_sc-&gt;<a class="code hl_variable" href="class_r_g_w_coroutine.html#a887e803a293aff88fd8d60003a73e50a">cct</a>),</div>
<div class="line"><a id="l00955" name="l00955"></a><span class="lineno">  955</span>                                                          <a class="code hl_variable" href="class_r_g_w_p_s_find_bucket_topics_c_r.html#ab99e91fc80f611ae2c4bb209e2bc4e13">sc</a>(_sc), <a class="code hl_variable" href="class_r_g_w_p_s_find_bucket_topics_c_r.html#adf7b8e13e32a21f25fd0ab760d09ef11">sync_env</a>(_sc-&gt;<a class="code hl_variable" href="class_r_g_w_p_s_find_bucket_topics_c_r.html#a00a706912528c20a472687af8c7ff9ea">env</a>),</div>
<div class="line"><a id="l00956" name="l00956"></a><span class="lineno">  956</span>                                                          <a class="code hl_variable" href="class_r_g_w_p_s_find_bucket_topics_c_r.html#a00a706912528c20a472687af8c7ff9ea">env</a>(_env),</div>
<div class="line"><a id="l00957" name="l00957"></a><span class="lineno">  957</span>                                                          <a class="code hl_variable" href="class_r_g_w_p_s_find_bucket_topics_c_r.html#a0be46f59f4719503019c9ac161901255">owner</a>(_owner),</div>
<div class="line"><a id="l00958" name="l00958"></a><span class="lineno">  958</span>                                                          <a class="code hl_variable" href="class_r_g_w_p_s_find_bucket_topics_c_r.html#a0a90b7e37b2ba54977883d4b2c04ca44">bucket</a>(_bucket),</div>
<div class="line"><a id="l00959" name="l00959"></a><span class="lineno">  959</span>                                                          <a class="code hl_variable" href="class_r_g_w_p_s_find_bucket_topics_c_r.html#a70c6fe9ebaa9f382945ac0ebd3aaabfa">key</a>(_key),</div>
<div class="line"><a id="l00960" name="l00960"></a><span class="lineno">  960</span>                                                          <a class="code hl_variable" href="class_r_g_w_p_s_find_bucket_topics_c_r.html#a4f2ccba5d0fb57addc7b22634ded00de">event_type</a>(_event_type),</div>
<div class="line"><a id="l00961" name="l00961"></a><span class="lineno">  961</span>                                                          <a class="code hl_variable" href="class_r_g_w_p_s_find_bucket_topics_c_r.html#a30702afb10821ac96031c6b6651ec84b">ps</a>(<a class="code hl_variable" href="class_r_g_w_p_s_find_bucket_topics_c_r.html#adf7b8e13e32a21f25fd0ab760d09ef11">sync_env</a>-&gt;<a class="code hl_variable" href="rgw__admin_8cc.html#a6fdb26d64b14d837b60e83a6ca3e2863">store</a>, <a class="code hl_variable" href="class_r_g_w_p_s_find_bucket_topics_c_r.html#a0be46f59f4719503019c9ac161901255">owner</a>.tenant),</div>
<div class="line"><a id="l00962" name="l00962"></a><span class="lineno">  962</span>                                                          <a class="code hl_variable" href="class_r_g_w_p_s_find_bucket_topics_c_r.html#a6aa8740a060e1db07d248d1746517b3c">topics</a>(_topics) {</div>
<div class="line"><a id="l00963" name="l00963"></a><span class="lineno">  963</span>    *<a class="code hl_variable" href="class_r_g_w_p_s_find_bucket_topics_c_r.html#a6aa8740a060e1db07d248d1746517b3c">topics</a> = std::make_shared&lt;vector&lt;PSTopicConfigRef&gt; &gt;();</div>
<div class="line"><a id="l00964" name="l00964"></a><span class="lineno">  964</span>  }</div>
</div>
<div class="foldopen" id="foldopen00965" data-start="{" data-end="}">
<div class="line"><a id="l00965" name="l00965"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_find_bucket_topics_c_r.html#aff2c0fe890bf39b48bc5b5e90399a09e">  965</a></span>  <span class="keywordtype">int</span> <a class="code hl_function" href="class_r_g_w_p_s_find_bucket_topics_c_r.html#aff2c0fe890bf39b48bc5b5e90399a09e">operate</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>)<span class="keyword"> override </span>{</div>
<div class="line"><a id="l00966" name="l00966"></a><span class="lineno">  966</span>    reenter(<span class="keyword">this</span>) {</div>
<div class="line"><a id="l00967" name="l00967"></a><span class="lineno">  967</span>      <a class="code hl_variable" href="class_r_g_w_p_s_find_bucket_topics_c_r.html#a30702afb10821ac96031c6b6651ec84b">ps</a>.<a class="code hl_function" href="class_r_g_w_pub_sub.html#a7fe136b8c366a902d1cae1ccfa91dde8">get_bucket_meta_obj</a>(<a class="code hl_variable" href="class_r_g_w_p_s_find_bucket_topics_c_r.html#a0a90b7e37b2ba54977883d4b2c04ca44">bucket</a>, &amp;<a class="code hl_variable" href="class_r_g_w_p_s_find_bucket_topics_c_r.html#a739933a47419bac5b390db7655e61e43">bucket_obj</a>);</div>
<div class="line"><a id="l00968" name="l00968"></a><span class="lineno">  968</span>      <a class="code hl_variable" href="class_r_g_w_p_s_find_bucket_topics_c_r.html#a30702afb10821ac96031c6b6651ec84b">ps</a>.<a class="code hl_function" href="class_r_g_w_pub_sub.html#afbed72ac582056d15fd13d9ebc591f0f">get_meta_obj</a>(&amp;<a class="code hl_variable" href="class_r_g_w_p_s_find_bucket_topics_c_r.html#ad410180186eb553313fa85742b3fe6e5">user_obj</a>);</div>
<div class="line"><a id="l00969" name="l00969"></a><span class="lineno">  969</span> </div>
<div class="line"><a id="l00970" name="l00970"></a><span class="lineno">  970</span>      <span class="keyword">using </span>ReadInfoCR = <a class="code hl_class" href="class_r_g_w_simple_rados_read_c_r.html">RGWSimpleRadosReadCR&lt;rgw_pubsub_bucket_topics&gt;</a>;</div>
<div class="line"><a id="l00971" name="l00971"></a><span class="lineno">  971</span>      yield {</div>
<div class="line"><a id="l00972" name="l00972"></a><span class="lineno">  972</span>        <span class="keywordtype">bool</span> empty_on_enoent = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00973" name="l00973"></a><span class="lineno">  973</span>        <a class="code hl_function" href="class_r_g_w_coroutine.html#a60c1d6187851953e8a5e1dbc97f69bbd">call</a>(<span class="keyword">new</span> ReadInfoCR(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_variable" href="class_r_g_w_p_s_find_bucket_topics_c_r.html#adf7b8e13e32a21f25fd0ab760d09ef11">sync_env</a>-&gt;<a class="code hl_variable" href="struct_r_g_w_data_sync_env.html#a01a643690d3fa3344fc0a8b4633b3998">async_rados</a>, <a class="code hl_variable" href="class_r_g_w_p_s_find_bucket_topics_c_r.html#adf7b8e13e32a21f25fd0ab760d09ef11">sync_env</a>-&gt;<a class="code hl_variable" href="struct_r_g_w_data_sync_env.html#acfebf6dda76ac5469de5a7edeb00548a">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#abe4f0602b771d5549a02c0a326d6a832">svc</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_services.html#a742bbed66b1688310eeb8c0b692bf6b9">sysobj</a>,</div>
<div class="line"><a id="l00974" name="l00974"></a><span class="lineno">  974</span>                            <a class="code hl_variable" href="class_r_g_w_p_s_find_bucket_topics_c_r.html#a739933a47419bac5b390db7655e61e43">bucket_obj</a>,</div>
<div class="line"><a id="l00975" name="l00975"></a><span class="lineno">  975</span>                            &amp;<a class="code hl_variable" href="class_r_g_w_p_s_find_bucket_topics_c_r.html#a18812f04412b816e1e91fc7a9d84170b">bucket_topics</a>, empty_on_enoent));</div>
<div class="line"><a id="l00976" name="l00976"></a><span class="lineno">  976</span>      }</div>
<div class="line"><a id="l00977" name="l00977"></a><span class="lineno">  977</span>      <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_r_g_w_coroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a> &lt; 0 &amp;&amp; <a class="code hl_variable" href="class_r_g_w_coroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a> != -ENOENT) {</div>
<div class="line"><a id="l00978" name="l00978"></a><span class="lineno">  978</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="class_r_g_w_coroutine.html#a576a8ced300f52809ad477f0082e3bcd">set_cr_error</a>(<a class="code hl_variable" href="class_r_g_w_coroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a>);</div>
<div class="line"><a id="l00979" name="l00979"></a><span class="lineno">  979</span>      }</div>
<div class="line"><a id="l00980" name="l00980"></a><span class="lineno">  980</span> </div>
<div class="line"><a id="l00981" name="l00981"></a><span class="lineno">  981</span>      ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 20) &lt;&lt; <span class="stringliteral">&quot;RGWPSFindBucketTopicsCR(): found &quot;</span> &lt;&lt; <a class="code hl_variable" href="class_r_g_w_p_s_find_bucket_topics_c_r.html#a18812f04412b816e1e91fc7a9d84170b">bucket_topics</a>.<a class="code hl_variable" href="structrgw__pubsub__bucket__topics.html#ae70a9ae1dafaa04f4937295595a6a1bf">topics</a>.size() &lt;&lt; <span class="stringliteral">&quot; topics for bucket &quot;</span> &lt;&lt; <a class="code hl_variable" href="class_r_g_w_p_s_find_bucket_topics_c_r.html#a0a90b7e37b2ba54977883d4b2c04ca44">bucket</a> &lt;&lt; dendl;</div>
<div class="line"><a id="l00982" name="l00982"></a><span class="lineno">  982</span> </div>
<div class="line"><a id="l00983" name="l00983"></a><span class="lineno">  983</span>      <span class="keywordflow">if</span> (!<a class="code hl_variable" href="class_r_g_w_p_s_find_bucket_topics_c_r.html#a18812f04412b816e1e91fc7a9d84170b">bucket_topics</a>.<a class="code hl_variable" href="structrgw__pubsub__bucket__topics.html#ae70a9ae1dafaa04f4937295595a6a1bf">topics</a>.empty()) {</div>
<div class="line"><a id="l00984" name="l00984"></a><span class="lineno">  984</span>    <span class="keyword">using </span>ReadUserTopicsInfoCR = <a class="code hl_class" href="class_r_g_w_simple_rados_read_c_r.html">RGWSimpleRadosReadCR&lt;rgw_pubsub_topics&gt;</a>;</div>
<div class="line"><a id="l00985" name="l00985"></a><span class="lineno">  985</span>    yield {</div>
<div class="line"><a id="l00986" name="l00986"></a><span class="lineno">  986</span>      <span class="keywordtype">bool</span> empty_on_enoent = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00987" name="l00987"></a><span class="lineno">  987</span>      <a class="code hl_function" href="class_r_g_w_coroutine.html#a60c1d6187851953e8a5e1dbc97f69bbd">call</a>(<span class="keyword">new</span> ReadUserTopicsInfoCR(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_variable" href="class_r_g_w_p_s_find_bucket_topics_c_r.html#adf7b8e13e32a21f25fd0ab760d09ef11">sync_env</a>-&gt;<a class="code hl_variable" href="struct_r_g_w_data_sync_env.html#a01a643690d3fa3344fc0a8b4633b3998">async_rados</a>, <a class="code hl_variable" href="class_r_g_w_p_s_find_bucket_topics_c_r.html#adf7b8e13e32a21f25fd0ab760d09ef11">sync_env</a>-&gt;<a class="code hl_variable" href="struct_r_g_w_data_sync_env.html#acfebf6dda76ac5469de5a7edeb00548a">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#abe4f0602b771d5549a02c0a326d6a832">svc</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_services.html#a742bbed66b1688310eeb8c0b692bf6b9">sysobj</a>,</div>
<div class="line"><a id="l00988" name="l00988"></a><span class="lineno">  988</span>                    <a class="code hl_variable" href="class_r_g_w_p_s_find_bucket_topics_c_r.html#ad410180186eb553313fa85742b3fe6e5">user_obj</a>,</div>
<div class="line"><a id="l00989" name="l00989"></a><span class="lineno">  989</span>                    &amp;<a class="code hl_variable" href="class_r_g_w_p_s_find_bucket_topics_c_r.html#ab22c4b769539506751b7f7a08b9bc286">user_topics</a>, empty_on_enoent));</div>
<div class="line"><a id="l00990" name="l00990"></a><span class="lineno">  990</span>    }</div>
<div class="line"><a id="l00991" name="l00991"></a><span class="lineno">  991</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_r_g_w_coroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a> &lt; 0 &amp;&amp; <a class="code hl_variable" href="class_r_g_w_coroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a> != -ENOENT) {</div>
<div class="line"><a id="l00992" name="l00992"></a><span class="lineno">  992</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="class_r_g_w_coroutine.html#a576a8ced300f52809ad477f0082e3bcd">set_cr_error</a>(<a class="code hl_variable" href="class_r_g_w_coroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a>);</div>
<div class="line"><a id="l00993" name="l00993"></a><span class="lineno">  993</span>    }</div>
<div class="line"><a id="l00994" name="l00994"></a><span class="lineno">  994</span>      }</div>
<div class="line"><a id="l00995" name="l00995"></a><span class="lineno">  995</span> </div>
<div class="line"><a id="l00996" name="l00996"></a><span class="lineno">  996</span>      <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; titer : <a class="code hl_variable" href="class_r_g_w_p_s_find_bucket_topics_c_r.html#a18812f04412b816e1e91fc7a9d84170b">bucket_topics</a>.<a class="code hl_variable" href="structrgw__pubsub__bucket__topics.html#ae70a9ae1dafaa04f4937295595a6a1bf">topics</a>) {</div>
<div class="line"><a id="l00997" name="l00997"></a><span class="lineno">  997</span>        <span class="keyword">auto</span>&amp; topic_filter = titer.second;</div>
<div class="line"><a id="l00998" name="l00998"></a><span class="lineno">  998</span>        <span class="keyword">auto</span>&amp; info = topic_filter.topic;</div>
<div class="line"><a id="l00999" name="l00999"></a><span class="lineno">  999</span>        <span class="keywordflow">if</span> (!<a class="code hl_function" href="rgw__sync__module__pubsub_8cc.html#aa7fc929948fb038192288e423ea816d0">match</a>(topic_filter, <a class="code hl_variable" href="class_r_g_w_p_s_find_bucket_topics_c_r.html#a70c6fe9ebaa9f382945ac0ebd3aaabfa">key</a>.<a class="code hl_variable" href="structrgw__obj__key.html#a009cbe657bf6a001d40af0a80e533186">name</a>, <a class="code hl_variable" href="class_r_g_w_p_s_find_bucket_topics_c_r.html#a4f2ccba5d0fb57addc7b22634ded00de">event_type</a>)) {</div>
<div class="line"><a id="l01000" name="l01000"></a><span class="lineno"> 1000</span>          <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01001" name="l01001"></a><span class="lineno"> 1001</span>        }</div>
<div class="line"><a id="l01002" name="l01002"></a><span class="lineno"> 1002</span>        std::shared_ptr&lt;PSTopicConfig&gt; tc = std::make_shared&lt;PSTopicConfig&gt;();</div>
<div class="line"><a id="l01003" name="l01003"></a><span class="lineno"> 1003</span>        tc-&gt;name = info.name;</div>
<div class="line"><a id="l01004" name="l01004"></a><span class="lineno"> 1004</span>        tc-&gt;subs = <a class="code hl_variable" href="class_r_g_w_p_s_find_bucket_topics_c_r.html#ab22c4b769539506751b7f7a08b9bc286">user_topics</a>.<a class="code hl_variable" href="structrgw__pubsub__topics.html#a95545bbeb3a48899a1be51b2fa62a43c">topics</a>[info.name].subs;</div>
<div class="line"><a id="l01005" name="l01005"></a><span class="lineno"> 1005</span>        tc-&gt;opaque_data = info.opaque_data;</div>
<div class="line"><a id="l01006" name="l01006"></a><span class="lineno"> 1006</span>        (*topics)-&gt;push_back(tc);</div>
<div class="line"><a id="l01007" name="l01007"></a><span class="lineno"> 1007</span>      }</div>
<div class="line"><a id="l01008" name="l01008"></a><span class="lineno"> 1008</span> </div>
<div class="line"><a id="l01009" name="l01009"></a><span class="lineno"> 1009</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="class_r_g_w_coroutine.html#a15bce10b8fbd959412a9473b03f0dd82">set_cr_done</a>();</div>
<div class="line"><a id="l01010" name="l01010"></a><span class="lineno"> 1010</span>    }</div>
<div class="line"><a id="l01011" name="l01011"></a><span class="lineno"> 1011</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l01012" name="l01012"></a><span class="lineno"> 1012</span>  }</div>
</div>
<div class="line"><a id="l01013" name="l01013"></a><span class="lineno"> 1013</span>};</div>
</div>
<div class="line"><a id="l01014" name="l01014"></a><span class="lineno"> 1014</span> </div>
<div class="foldopen" id="foldopen01015" data-start="{" data-end="};">
<div class="line"><a id="l01015" name="l01015"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_handle_obj_event_c_r.html"> 1015</a></span><span class="keyword">class </span><a class="code hl_class" href="class_r_g_w_p_s_handle_obj_event_c_r.html">RGWPSHandleObjEventCR</a> : <span class="keyword">public</span> <a class="code hl_class" href="class_r_g_w_coroutine.html">RGWCoroutine</a> {</div>
<div class="line"><a id="l01016" name="l01016"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_handle_obj_event_c_r.html#a1bf9f16ac0bcc2fbcecb17ed442fee65"> 1016</a></span>  <a class="code hl_struct" href="struct_r_g_w_data_sync_ctx.html">RGWDataSyncCtx</a>* <span class="keyword">const</span> <a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_event_c_r.html#a1bf9f16ac0bcc2fbcecb17ed442fee65">sc</a>;</div>
<div class="line"><a id="l01017" name="l01017"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_handle_obj_event_c_r.html#a8f29440c7da3eae5ebe7cdd92c4cca59"> 1017</a></span>  <span class="keyword">const</span> <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#a8cf75fd83a22c03e4eeae0932b31752a">PSEnvRef</a> <a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_event_c_r.html#a8f29440c7da3eae5ebe7cdd92c4cca59">env</a>;</div>
<div class="line"><a id="l01018" name="l01018"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_handle_obj_event_c_r.html#aac75c6d5bf2abc05b8953750d8137f40"> 1018</a></span>  <span class="keyword">const</span> <a class="code hl_struct" href="structrgw__user.html">rgw_user</a> <a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_event_c_r.html#aac75c6d5bf2abc05b8953750d8137f40">owner</a>;</div>
<div class="line"><a id="l01019" name="l01019"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_handle_obj_event_c_r.html#abcf90892c3553217018881f1807d740c"> 1019</a></span>  <span class="keyword">const</span> <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#ad8b26748ff02957ec1ec373a4f0a420f">EventRef&lt;rgw_pubsub_event&gt;</a> <a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_event_c_r.html#abcf90892c3553217018881f1807d740c">event</a>;</div>
<div class="line"><a id="l01020" name="l01020"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_handle_obj_event_c_r.html#a1b3937a05b7d1c3413c7aadb6406134e"> 1020</a></span>  <span class="keyword">const</span> <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#ad8b26748ff02957ec1ec373a4f0a420f">EventRef&lt;rgw_pubsub_s3_event&gt;</a> <a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_event_c_r.html#a1b3937a05b7d1c3413c7aadb6406134e">s3_event</a>;</div>
<div class="line"><a id="l01021" name="l01021"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_handle_obj_event_c_r.html#a57b8b07d2d55f40cf2a24e2baf63ac09"> 1021</a></span>  <span class="keyword">const</span> <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#a8fac3e9ba436ccafb2b1e164c38b2c93">TopicsRef</a> <a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_event_c_r.html#a57b8b07d2d55f40cf2a24e2baf63ac09">topics</a>;</div>
<div class="line"><a id="l01022" name="l01022"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_handle_obj_event_c_r.html#ae47a7f34b8636a1f2fee10cd7cb7b14f"> 1022</a></span>  <span class="keywordtype">bool</span> <a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_event_c_r.html#ae47a7f34b8636a1f2fee10cd7cb7b14f">has_subscriptions</a>;</div>
<div class="line"><a id="l01023" name="l01023"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_handle_obj_event_c_r.html#a00d49412c14d328b02edd12275956419"> 1023</a></span>  <span class="keywordtype">bool</span> <a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_event_c_r.html#a00d49412c14d328b02edd12275956419">event_handled</a>;</div>
<div class="line"><a id="l01024" name="l01024"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_handle_obj_event_c_r.html#a1dfe341c484540ebc7428e84258f50a6"> 1024</a></span>  <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#a6b984d869299084410b95debaf7a9163">PSSubscriptionRef</a> <a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_event_c_r.html#a1dfe341c484540ebc7428e84258f50a6">sub</a>;</div>
<div class="line"><a id="l01025" name="l01025"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_handle_obj_event_c_r.html#a50a5b2552d68f456674e981ae7593a86"> 1025</a></span>  std::vector&lt;PSTopicConfigRef&gt;::const_iterator <a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_event_c_r.html#a50a5b2552d68f456674e981ae7593a86">titer</a>;</div>
<div class="line"><a id="l01026" name="l01026"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_handle_obj_event_c_r.html#a0171884ed1316d33b2c35f49d05311fb"> 1026</a></span>  std::set&lt;std::string&gt;::const_iterator <a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_event_c_r.html#a0171884ed1316d33b2c35f49d05311fb">siter</a>;</div>
<div class="line"><a id="l01027" name="l01027"></a><span class="lineno"> 1027</span> </div>
<div class="line"><a id="l01028" name="l01028"></a><span class="lineno"> 1028</span><span class="keyword">public</span>:</div>
<div class="foldopen" id="foldopen01029" data-start="{" data-end="}">
<div class="line"><a id="l01029" name="l01029"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_handle_obj_event_c_r.html#a258a09e09113be984fd57ce574ee5a25"> 1029</a></span>  <a class="code hl_function" href="class_r_g_w_p_s_handle_obj_event_c_r.html#a258a09e09113be984fd57ce574ee5a25">RGWPSHandleObjEventCR</a>(<a class="code hl_struct" href="struct_r_g_w_data_sync_ctx.html">RGWDataSyncCtx</a>* <span class="keyword">const</span> _sc,</div>
<div class="line"><a id="l01030" name="l01030"></a><span class="lineno"> 1030</span>                      <span class="keyword">const</span> <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#a8cf75fd83a22c03e4eeae0932b31752a">PSEnvRef</a> _env,</div>
<div class="line"><a id="l01031" name="l01031"></a><span class="lineno"> 1031</span>                      <span class="keyword">const</span> <a class="code hl_struct" href="structrgw__user.html">rgw_user</a>&amp; _owner,</div>
<div class="line"><a id="l01032" name="l01032"></a><span class="lineno"> 1032</span>                      <span class="keyword">const</span> <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#ad8b26748ff02957ec1ec373a4f0a420f">EventRef&lt;rgw_pubsub_event&gt;</a>&amp; _event,</div>
<div class="line"><a id="l01033" name="l01033"></a><span class="lineno"> 1033</span>                      <span class="keyword">const</span> <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#ad8b26748ff02957ec1ec373a4f0a420f">EventRef&lt;rgw_pubsub_s3_event&gt;</a>&amp; _s3_event,</div>
<div class="line"><a id="l01034" name="l01034"></a><span class="lineno"> 1034</span>                      <span class="keyword">const</span> <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#a8fac3e9ba436ccafb2b1e164c38b2c93">TopicsRef</a>&amp; _topics) : <a class="code hl_class" href="class_r_g_w_coroutine.html">RGWCoroutine</a>(_sc-&gt;<a class="code hl_variable" href="class_r_g_w_coroutine.html#a887e803a293aff88fd8d60003a73e50a">cct</a>),</div>
<div class="line"><a id="l01035" name="l01035"></a><span class="lineno"> 1035</span>                                          <a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_event_c_r.html#a1bf9f16ac0bcc2fbcecb17ed442fee65">sc</a>(_sc),</div>
<div class="line"><a id="l01036" name="l01036"></a><span class="lineno"> 1036</span>                                          <a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_event_c_r.html#a8f29440c7da3eae5ebe7cdd92c4cca59">env</a>(_env),</div>
<div class="line"><a id="l01037" name="l01037"></a><span class="lineno"> 1037</span>                                          <a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_event_c_r.html#aac75c6d5bf2abc05b8953750d8137f40">owner</a>(_owner),</div>
<div class="line"><a id="l01038" name="l01038"></a><span class="lineno"> 1038</span>                                          <a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_event_c_r.html#abcf90892c3553217018881f1807d740c">event</a>(_event),</div>
<div class="line"><a id="l01039" name="l01039"></a><span class="lineno"> 1039</span>                                          <a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_event_c_r.html#a1b3937a05b7d1c3413c7aadb6406134e">s3_event</a>(_s3_event),</div>
<div class="line"><a id="l01040" name="l01040"></a><span class="lineno"> 1040</span>                                          <a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_event_c_r.html#a57b8b07d2d55f40cf2a24e2baf63ac09">topics</a>(_topics),</div>
<div class="line"><a id="l01041" name="l01041"></a><span class="lineno"> 1041</span>                                          <a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_event_c_r.html#ae47a7f34b8636a1f2fee10cd7cb7b14f">has_subscriptions</a>(false),</div>
<div class="line"><a id="l01042" name="l01042"></a><span class="lineno"> 1042</span>                                          <a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_event_c_r.html#a00d49412c14d328b02edd12275956419">event_handled</a>(false) {}</div>
</div>
<div class="line"><a id="l01043" name="l01043"></a><span class="lineno"> 1043</span> </div>
<div class="foldopen" id="foldopen01044" data-start="{" data-end="}">
<div class="line"><a id="l01044" name="l01044"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_handle_obj_event_c_r.html#a159b407cc30e5ddcb8b0c7d7118ac7d6"> 1044</a></span>  <span class="keywordtype">int</span> <a class="code hl_function" href="class_r_g_w_p_s_handle_obj_event_c_r.html#a159b407cc30e5ddcb8b0c7d7118ac7d6">operate</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>)<span class="keyword"> override </span>{</div>
<div class="line"><a id="l01045" name="l01045"></a><span class="lineno"> 1045</span>    reenter(<span class="keyword">this</span>) {</div>
<div class="line"><a id="l01046" name="l01046"></a><span class="lineno"> 1046</span>      ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 20) &lt;&lt; <span class="stringliteral">&quot;: handle event: obj: z=&quot;</span> &lt;&lt; <a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_event_c_r.html#a1bf9f16ac0bcc2fbcecb17ed442fee65">sc</a>-&gt;<a class="code hl_variable" href="struct_r_g_w_data_sync_ctx.html#aaa4f4a845ebb475fbdfa87c5df786afb">source_zone</a></div>
<div class="line"><a id="l01047" name="l01047"></a><span class="lineno"> 1047</span>                               &lt;&lt; <span class="stringliteral">&quot; event=&quot;</span> &lt;&lt; <a class="code hl_function" href="rgw__sync__module__pubsub_8cc.html#a95cd156406f6d627131b4faa761e7ae6">json_str</a>(<span class="stringliteral">&quot;event&quot;</span>, *<a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_event_c_r.html#abcf90892c3553217018881f1807d740c">event</a>, <span class="keyword">false</span>)</div>
<div class="line"><a id="l01048" name="l01048"></a><span class="lineno"> 1048</span>                               &lt;&lt; <span class="stringliteral">&quot; owner=&quot;</span> &lt;&lt; <a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_event_c_r.html#aac75c6d5bf2abc05b8953750d8137f40">owner</a> &lt;&lt; dendl;</div>
<div class="line"><a id="l01049" name="l01049"></a><span class="lineno"> 1049</span> </div>
<div class="line"><a id="l01050" name="l01050"></a><span class="lineno"> 1050</span>      ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 20) &lt;&lt; <span class="stringliteral">&quot;pubsub: &quot;</span> &lt;&lt; <a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_event_c_r.html#a57b8b07d2d55f40cf2a24e2baf63ac09">topics</a>-&gt;size() &lt;&lt; <span class="stringliteral">&quot; topics found for path&quot;</span> &lt;&lt; dendl;</div>
<div class="line"><a id="l01051" name="l01051"></a><span class="lineno"> 1051</span>     </div>
<div class="line"><a id="l01052" name="l01052"></a><span class="lineno"> 1052</span>      <span class="comment">// outside caller should check that</span></div>
<div class="line"><a id="l01053" name="l01053"></a><span class="lineno"> 1053</span>      ceph_assert(!<a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_event_c_r.html#a57b8b07d2d55f40cf2a24e2baf63ac09">topics</a>-&gt;empty());</div>
<div class="line"><a id="l01054" name="l01054"></a><span class="lineno"> 1054</span> </div>
<div class="line"><a id="l01055" name="l01055"></a><span class="lineno"> 1055</span>      <span class="keywordflow">if</span> (<a class="code hl_variable" href="rgw__perf__counters_8cc.html#a770a29716cf802e8b212dbd61b157b2e">perfcounter</a>) <a class="code hl_variable" href="rgw__perf__counters_8cc.html#a770a29716cf802e8b212dbd61b157b2e">perfcounter</a>-&gt;inc(<a class="code hl_enumvalue" href="rgw__perf__counters_8h.html#a05589fbab0657f08285ebdfe93f5ec9eaa49fe8411dbcfbc2dfd60a993e4ce89f">l_rgw_pubsub_event_triggered</a>);</div>
<div class="line"><a id="l01056" name="l01056"></a><span class="lineno"> 1056</span> </div>
<div class="line"><a id="l01057" name="l01057"></a><span class="lineno"> 1057</span>      <span class="comment">// loop over all topics related to the bucket/object</span></div>
<div class="line"><a id="l01058" name="l01058"></a><span class="lineno"> 1058</span>      <span class="keywordflow">for</span> (<a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_event_c_r.html#a50a5b2552d68f456674e981ae7593a86">titer</a> = <a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_event_c_r.html#a57b8b07d2d55f40cf2a24e2baf63ac09">topics</a>-&gt;begin(); <a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_event_c_r.html#a50a5b2552d68f456674e981ae7593a86">titer</a> != <a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_event_c_r.html#a57b8b07d2d55f40cf2a24e2baf63ac09">topics</a>-&gt;end(); ++<a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_event_c_r.html#a50a5b2552d68f456674e981ae7593a86">titer</a>) {</div>
<div class="line"><a id="l01059" name="l01059"></a><span class="lineno"> 1059</span>        ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 20) &lt;&lt; <span class="stringliteral">&quot;: notification for &quot;</span> &lt;&lt; <span class="keyword">event</span>-&gt;source &lt;&lt; <span class="stringliteral">&quot;: topic=&quot;</span> &lt;&lt; </div>
<div class="line"><a id="l01060" name="l01060"></a><span class="lineno"> 1060</span>          (*titer)-&gt;name &lt;&lt; <span class="stringliteral">&quot;, has &quot;</span> &lt;&lt; (*titer)-&gt;subs.size() &lt;&lt; <span class="stringliteral">&quot; subscriptions&quot;</span> &lt;&lt; dendl;</div>
<div class="line"><a id="l01061" name="l01061"></a><span class="lineno"> 1061</span>        <span class="comment">// loop over all subscriptions of the topic</span></div>
<div class="line"><a id="l01062" name="l01062"></a><span class="lineno"> 1062</span>        <span class="keywordflow">for</span> (<a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_event_c_r.html#a0171884ed1316d33b2c35f49d05311fb">siter</a> = (*titer)-&gt;subs.begin(); <a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_event_c_r.html#a0171884ed1316d33b2c35f49d05311fb">siter</a> != (*titer)-&gt;subs.end(); ++<a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_event_c_r.html#a0171884ed1316d33b2c35f49d05311fb">siter</a>) {</div>
<div class="line"><a id="l01063" name="l01063"></a><span class="lineno"> 1063</span>          ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 20) &lt;&lt; <span class="stringliteral">&quot;: subscription: &quot;</span> &lt;&lt; *<a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_event_c_r.html#a0171884ed1316d33b2c35f49d05311fb">siter</a> &lt;&lt; dendl;</div>
<div class="line"><a id="l01064" name="l01064"></a><span class="lineno"> 1064</span>          <a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_event_c_r.html#ae47a7f34b8636a1f2fee10cd7cb7b14f">has_subscriptions</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01065" name="l01065"></a><span class="lineno"> 1065</span>          <span class="comment">// try to read subscription configuration</span></div>
<div class="line"><a id="l01066" name="l01066"></a><span class="lineno"> 1066</span>          yield <a class="code hl_function" href="class_p_s_manager.html#ab8a477525daf311f9308a2d2c73d0d0d">PSManager::call_get_subscription_cr</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_event_c_r.html#a1bf9f16ac0bcc2fbcecb17ed442fee65">sc</a>, <a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_event_c_r.html#a8f29440c7da3eae5ebe7cdd92c4cca59">env</a>-&gt;manager, <span class="keyword">this</span>, <a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_event_c_r.html#aac75c6d5bf2abc05b8953750d8137f40">owner</a>, *<a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_event_c_r.html#a0171884ed1316d33b2c35f49d05311fb">siter</a>, &amp;<a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_event_c_r.html#a1dfe341c484540ebc7428e84258f50a6">sub</a>);</div>
<div class="line"><a id="l01067" name="l01067"></a><span class="lineno"> 1067</span>          <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_r_g_w_coroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a> &lt; 0) {</div>
<div class="line"><a id="l01068" name="l01068"></a><span class="lineno"> 1068</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="rgw__perf__counters_8cc.html#a770a29716cf802e8b212dbd61b157b2e">perfcounter</a>) <a class="code hl_variable" href="rgw__perf__counters_8cc.html#a770a29716cf802e8b212dbd61b157b2e">perfcounter</a>-&gt;inc(<a class="code hl_enumvalue" href="rgw__perf__counters_8h.html#a05589fbab0657f08285ebdfe93f5ec9ea9611ef33cd8cbe8082993d9d57f3a731">l_rgw_pubsub_missing_conf</a>);</div>
<div class="line"><a id="l01069" name="l01069"></a><span class="lineno"> 1069</span>            ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 1) &lt;&lt; <span class="stringliteral">&quot;ERROR: failed to find subscription config for subscription=&quot;</span> &lt;&lt; *<a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_event_c_r.html#a0171884ed1316d33b2c35f49d05311fb">siter</a> </div>
<div class="line"><a id="l01070" name="l01070"></a><span class="lineno"> 1070</span>              &lt;&lt; <span class="stringliteral">&quot; ret=&quot;</span> &lt;&lt; <a class="code hl_variable" href="class_r_g_w_coroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a> &lt;&lt; dendl;</div>
<div class="line"><a id="l01071" name="l01071"></a><span class="lineno"> 1071</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_r_g_w_coroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a> == -ENOENT) {</div>
<div class="line"><a id="l01072" name="l01072"></a><span class="lineno"> 1072</span>              <span class="comment">// missing subscription info should be reflected back as invalid argument</span></div>
<div class="line"><a id="l01073" name="l01073"></a><span class="lineno"> 1073</span>              <span class="comment">// and not as missing object</span></div>
<div class="line"><a id="l01074" name="l01074"></a><span class="lineno"> 1074</span>              <a class="code hl_variable" href="class_r_g_w_coroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a> = -EINVAL;</div>
<div class="line"><a id="l01075" name="l01075"></a><span class="lineno"> 1075</span>            }</div>
<div class="line"><a id="l01076" name="l01076"></a><span class="lineno"> 1076</span>            <span class="comment">// try the next subscription</span></div>
<div class="line"><a id="l01077" name="l01077"></a><span class="lineno"> 1077</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01078" name="l01078"></a><span class="lineno"> 1078</span>          }</div>
<div class="line"><a id="l01079" name="l01079"></a><span class="lineno"> 1079</span>          <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_event_c_r.html#a1dfe341c484540ebc7428e84258f50a6">sub</a>-&gt;sub_conf-&gt;s3_id.empty()) {</div>
<div class="line"><a id="l01080" name="l01080"></a><span class="lineno"> 1080</span>            <span class="comment">// subscription was not made by S3 compatible API</span></div>
<div class="line"><a id="l01081" name="l01081"></a><span class="lineno"> 1081</span>            ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 20) &lt;&lt; <span class="stringliteral">&quot;storing event for subscription=&quot;</span> &lt;&lt; *<a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_event_c_r.html#a0171884ed1316d33b2c35f49d05311fb">siter</a> &lt;&lt; <span class="stringliteral">&quot; owner=&quot;</span> &lt;&lt; <a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_event_c_r.html#aac75c6d5bf2abc05b8953750d8137f40">owner</a> &lt;&lt; <span class="stringliteral">&quot; ret=&quot;</span> &lt;&lt; <a class="code hl_variable" href="class_r_g_w_coroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a> &lt;&lt; dendl;</div>
<div class="line"><a id="l01082" name="l01082"></a><span class="lineno"> 1082</span>            yield <a class="code hl_function" href="class_r_g_w_coroutine.html#a60c1d6187851953e8a5e1dbc97f69bbd">call</a>(<a class="code hl_function" href="class_p_s_subscription.html#a1296667b0db9a71aa796b567bc66f44a">PSSubscription::store_event_cr</a>(<a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_event_c_r.html#a1bf9f16ac0bcc2fbcecb17ed442fee65">sc</a>, <a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_event_c_r.html#a1dfe341c484540ebc7428e84258f50a6">sub</a>, <a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_event_c_r.html#abcf90892c3553217018881f1807d740c">event</a>));</div>
<div class="line"><a id="l01083" name="l01083"></a><span class="lineno"> 1083</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_r_g_w_coroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a> &lt; 0) {</div>
<div class="line"><a id="l01084" name="l01084"></a><span class="lineno"> 1084</span>              <span class="keywordflow">if</span> (<a class="code hl_variable" href="rgw__perf__counters_8cc.html#a770a29716cf802e8b212dbd61b157b2e">perfcounter</a>) <a class="code hl_variable" href="rgw__perf__counters_8cc.html#a770a29716cf802e8b212dbd61b157b2e">perfcounter</a>-&gt;inc(<a class="code hl_enumvalue" href="rgw__perf__counters_8h.html#a05589fbab0657f08285ebdfe93f5ec9ea5b3588bd65b27cfafd2a25c0c224b1c4">l_rgw_pubsub_store_fail</a>);</div>
<div class="line"><a id="l01085" name="l01085"></a><span class="lineno"> 1085</span>              ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 1) &lt;&lt; <span class="stringliteral">&quot;ERROR: failed to store event for subscription=&quot;</span> &lt;&lt; *<a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_event_c_r.html#a0171884ed1316d33b2c35f49d05311fb">siter</a> &lt;&lt; <span class="stringliteral">&quot; ret=&quot;</span> &lt;&lt; <a class="code hl_variable" href="class_r_g_w_coroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a> &lt;&lt; dendl;</div>
<div class="line"><a id="l01086" name="l01086"></a><span class="lineno"> 1086</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01087" name="l01087"></a><span class="lineno"> 1087</span>              <span class="keywordflow">if</span> (<a class="code hl_variable" href="rgw__perf__counters_8cc.html#a770a29716cf802e8b212dbd61b157b2e">perfcounter</a>) <a class="code hl_variable" href="rgw__perf__counters_8cc.html#a770a29716cf802e8b212dbd61b157b2e">perfcounter</a>-&gt;inc(<a class="code hl_enumvalue" href="rgw__perf__counters_8h.html#a05589fbab0657f08285ebdfe93f5ec9ea331676acc720470c551fa63c4c5e398c">l_rgw_pubsub_store_ok</a>);</div>
<div class="line"><a id="l01088" name="l01088"></a><span class="lineno"> 1088</span>              <a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_event_c_r.html#a00d49412c14d328b02edd12275956419">event_handled</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01089" name="l01089"></a><span class="lineno"> 1089</span>            }</div>
<div class="line"><a id="l01090" name="l01090"></a><span class="lineno"> 1090</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_event_c_r.html#a1dfe341c484540ebc7428e84258f50a6">sub</a>-&gt;sub_conf-&gt;push_endpoint) {</div>
<div class="line"><a id="l01091" name="l01091"></a><span class="lineno"> 1091</span>              ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 20) &lt;&lt; <span class="stringliteral">&quot;push event for subscription=&quot;</span> &lt;&lt; *<a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_event_c_r.html#a0171884ed1316d33b2c35f49d05311fb">siter</a> &lt;&lt; <span class="stringliteral">&quot; owner=&quot;</span> &lt;&lt; <a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_event_c_r.html#aac75c6d5bf2abc05b8953750d8137f40">owner</a> &lt;&lt; <span class="stringliteral">&quot; ret=&quot;</span> &lt;&lt; <a class="code hl_variable" href="class_r_g_w_coroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a> &lt;&lt; dendl;</div>
<div class="line"><a id="l01092" name="l01092"></a><span class="lineno"> 1092</span>              yield <a class="code hl_function" href="class_r_g_w_coroutine.html#a60c1d6187851953e8a5e1dbc97f69bbd">call</a>(<a class="code hl_function" href="class_p_s_subscription.html#ad2da75a138437c4189359f764205b4ad">PSSubscription::push_event_cr</a>(<a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_event_c_r.html#a1bf9f16ac0bcc2fbcecb17ed442fee65">sc</a>, <a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_event_c_r.html#a1dfe341c484540ebc7428e84258f50a6">sub</a>, <a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_event_c_r.html#abcf90892c3553217018881f1807d740c">event</a>));</div>
<div class="line"><a id="l01093" name="l01093"></a><span class="lineno"> 1093</span>              <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_r_g_w_coroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a> &lt; 0) {</div>
<div class="line"><a id="l01094" name="l01094"></a><span class="lineno"> 1094</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="rgw__perf__counters_8cc.html#a770a29716cf802e8b212dbd61b157b2e">perfcounter</a>) <a class="code hl_variable" href="rgw__perf__counters_8cc.html#a770a29716cf802e8b212dbd61b157b2e">perfcounter</a>-&gt;inc(<a class="code hl_enumvalue" href="rgw__perf__counters_8h.html#a05589fbab0657f08285ebdfe93f5ec9ea9c2577f0a81fbc733c3eb68cffd5049b">l_rgw_pubsub_push_failed</a>);</div>
<div class="line"><a id="l01095" name="l01095"></a><span class="lineno"> 1095</span>                ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 1) &lt;&lt; <span class="stringliteral">&quot;ERROR: failed to push event for subscription=&quot;</span> &lt;&lt; *<a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_event_c_r.html#a0171884ed1316d33b2c35f49d05311fb">siter</a> &lt;&lt; <span class="stringliteral">&quot; ret=&quot;</span> &lt;&lt; <a class="code hl_variable" href="class_r_g_w_coroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a> &lt;&lt; dendl;</div>
<div class="line"><a id="l01096" name="l01096"></a><span class="lineno"> 1096</span>              } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01097" name="l01097"></a><span class="lineno"> 1097</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="rgw__perf__counters_8cc.html#a770a29716cf802e8b212dbd61b157b2e">perfcounter</a>) <a class="code hl_variable" href="rgw__perf__counters_8cc.html#a770a29716cf802e8b212dbd61b157b2e">perfcounter</a>-&gt;inc(<a class="code hl_enumvalue" href="rgw__perf__counters_8h.html#a05589fbab0657f08285ebdfe93f5ec9eac2b8c6e14023c5eedf4c354641731bc0">l_rgw_pubsub_push_ok</a>);</div>
<div class="line"><a id="l01098" name="l01098"></a><span class="lineno"> 1098</span>                <a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_event_c_r.html#a00d49412c14d328b02edd12275956419">event_handled</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01099" name="l01099"></a><span class="lineno"> 1099</span>              }</div>
<div class="line"><a id="l01100" name="l01100"></a><span class="lineno"> 1100</span>            } </div>
<div class="line"><a id="l01101" name="l01101"></a><span class="lineno"> 1101</span>          } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01102" name="l01102"></a><span class="lineno"> 1102</span>            <span class="comment">// subscription was made by S3 compatible API</span></div>
<div class="line"><a id="l01103" name="l01103"></a><span class="lineno"> 1103</span>            ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 20) &lt;&lt; <span class="stringliteral">&quot;storing s3 event for subscription=&quot;</span> &lt;&lt; *<a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_event_c_r.html#a0171884ed1316d33b2c35f49d05311fb">siter</a> &lt;&lt; <span class="stringliteral">&quot; owner=&quot;</span> &lt;&lt; <a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_event_c_r.html#aac75c6d5bf2abc05b8953750d8137f40">owner</a> &lt;&lt; <span class="stringliteral">&quot; ret=&quot;</span> &lt;&lt; <a class="code hl_variable" href="class_r_g_w_coroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a> &lt;&lt; dendl;</div>
<div class="line"><a id="l01104" name="l01104"></a><span class="lineno"> 1104</span>            <a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_event_c_r.html#a1b3937a05b7d1c3413c7aadb6406134e">s3_event</a>-&gt;configurationId = <a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_event_c_r.html#a1dfe341c484540ebc7428e84258f50a6">sub</a>-&gt;sub_conf-&gt;s3_id;</div>
<div class="line"><a id="l01105" name="l01105"></a><span class="lineno"> 1105</span>            <a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_event_c_r.html#a1b3937a05b7d1c3413c7aadb6406134e">s3_event</a>-&gt;opaque_data = (*titer)-&gt;opaque_data;</div>
<div class="line"><a id="l01106" name="l01106"></a><span class="lineno"> 1106</span>            yield <a class="code hl_function" href="class_r_g_w_coroutine.html#a60c1d6187851953e8a5e1dbc97f69bbd">call</a>(<a class="code hl_function" href="class_p_s_subscription.html#a1296667b0db9a71aa796b567bc66f44a">PSSubscription::store_event_cr</a>(<a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_event_c_r.html#a1bf9f16ac0bcc2fbcecb17ed442fee65">sc</a>, <a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_event_c_r.html#a1dfe341c484540ebc7428e84258f50a6">sub</a>, <a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_event_c_r.html#a1b3937a05b7d1c3413c7aadb6406134e">s3_event</a>));</div>
<div class="line"><a id="l01107" name="l01107"></a><span class="lineno"> 1107</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_r_g_w_coroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a> &lt; 0) {</div>
<div class="line"><a id="l01108" name="l01108"></a><span class="lineno"> 1108</span>              <span class="keywordflow">if</span> (<a class="code hl_variable" href="rgw__perf__counters_8cc.html#a770a29716cf802e8b212dbd61b157b2e">perfcounter</a>) <a class="code hl_variable" href="rgw__perf__counters_8cc.html#a770a29716cf802e8b212dbd61b157b2e">perfcounter</a>-&gt;inc(<a class="code hl_enumvalue" href="rgw__perf__counters_8h.html#a05589fbab0657f08285ebdfe93f5ec9ea5b3588bd65b27cfafd2a25c0c224b1c4">l_rgw_pubsub_store_fail</a>);</div>
<div class="line"><a id="l01109" name="l01109"></a><span class="lineno"> 1109</span>              ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 1) &lt;&lt; <span class="stringliteral">&quot;ERROR: failed to store s3 event for subscription=&quot;</span> &lt;&lt; *<a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_event_c_r.html#a0171884ed1316d33b2c35f49d05311fb">siter</a> &lt;&lt; <span class="stringliteral">&quot; ret=&quot;</span> &lt;&lt; <a class="code hl_variable" href="class_r_g_w_coroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a> &lt;&lt; dendl;</div>
<div class="line"><a id="l01110" name="l01110"></a><span class="lineno"> 1110</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01111" name="l01111"></a><span class="lineno"> 1111</span>              <span class="keywordflow">if</span> (<a class="code hl_variable" href="rgw__perf__counters_8cc.html#a770a29716cf802e8b212dbd61b157b2e">perfcounter</a>) <a class="code hl_variable" href="rgw__perf__counters_8cc.html#a770a29716cf802e8b212dbd61b157b2e">perfcounter</a>-&gt;inc(<a class="code hl_enumvalue" href="rgw__perf__counters_8h.html#a05589fbab0657f08285ebdfe93f5ec9ea331676acc720470c551fa63c4c5e398c">l_rgw_pubsub_store_ok</a>);</div>
<div class="line"><a id="l01112" name="l01112"></a><span class="lineno"> 1112</span>              <a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_event_c_r.html#a00d49412c14d328b02edd12275956419">event_handled</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01113" name="l01113"></a><span class="lineno"> 1113</span>            }</div>
<div class="line"><a id="l01114" name="l01114"></a><span class="lineno"> 1114</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_event_c_r.html#a1dfe341c484540ebc7428e84258f50a6">sub</a>-&gt;sub_conf-&gt;push_endpoint) {</div>
<div class="line"><a id="l01115" name="l01115"></a><span class="lineno"> 1115</span>                ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 20) &lt;&lt; <span class="stringliteral">&quot;push s3 event for subscription=&quot;</span> &lt;&lt; *<a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_event_c_r.html#a0171884ed1316d33b2c35f49d05311fb">siter</a> &lt;&lt; <span class="stringliteral">&quot; owner=&quot;</span> &lt;&lt; <a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_event_c_r.html#aac75c6d5bf2abc05b8953750d8137f40">owner</a> &lt;&lt; <span class="stringliteral">&quot; ret=&quot;</span> &lt;&lt; <a class="code hl_variable" href="class_r_g_w_coroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a> &lt;&lt; dendl;</div>
<div class="line"><a id="l01116" name="l01116"></a><span class="lineno"> 1116</span>              yield <a class="code hl_function" href="class_r_g_w_coroutine.html#a60c1d6187851953e8a5e1dbc97f69bbd">call</a>(<a class="code hl_function" href="class_p_s_subscription.html#ad2da75a138437c4189359f764205b4ad">PSSubscription::push_event_cr</a>(<a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_event_c_r.html#a1bf9f16ac0bcc2fbcecb17ed442fee65">sc</a>, <a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_event_c_r.html#a1dfe341c484540ebc7428e84258f50a6">sub</a>, <a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_event_c_r.html#a1b3937a05b7d1c3413c7aadb6406134e">s3_event</a>));</div>
<div class="line"><a id="l01117" name="l01117"></a><span class="lineno"> 1117</span>              <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_r_g_w_coroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a> &lt; 0) {</div>
<div class="line"><a id="l01118" name="l01118"></a><span class="lineno"> 1118</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="rgw__perf__counters_8cc.html#a770a29716cf802e8b212dbd61b157b2e">perfcounter</a>) <a class="code hl_variable" href="rgw__perf__counters_8cc.html#a770a29716cf802e8b212dbd61b157b2e">perfcounter</a>-&gt;inc(<a class="code hl_enumvalue" href="rgw__perf__counters_8h.html#a05589fbab0657f08285ebdfe93f5ec9ea9c2577f0a81fbc733c3eb68cffd5049b">l_rgw_pubsub_push_failed</a>);</div>
<div class="line"><a id="l01119" name="l01119"></a><span class="lineno"> 1119</span>                ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 1) &lt;&lt; <span class="stringliteral">&quot;ERROR: failed to push s3 event for subscription=&quot;</span> &lt;&lt; *<a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_event_c_r.html#a0171884ed1316d33b2c35f49d05311fb">siter</a> &lt;&lt; <span class="stringliteral">&quot; ret=&quot;</span> &lt;&lt; <a class="code hl_variable" href="class_r_g_w_coroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a> &lt;&lt; dendl;</div>
<div class="line"><a id="l01120" name="l01120"></a><span class="lineno"> 1120</span>              } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01121" name="l01121"></a><span class="lineno"> 1121</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="rgw__perf__counters_8cc.html#a770a29716cf802e8b212dbd61b157b2e">perfcounter</a>) <a class="code hl_variable" href="rgw__perf__counters_8cc.html#a770a29716cf802e8b212dbd61b157b2e">perfcounter</a>-&gt;inc(<a class="code hl_enumvalue" href="rgw__perf__counters_8h.html#a05589fbab0657f08285ebdfe93f5ec9eac2b8c6e14023c5eedf4c354641731bc0">l_rgw_pubsub_push_ok</a>);</div>
<div class="line"><a id="l01122" name="l01122"></a><span class="lineno"> 1122</span>                <a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_event_c_r.html#a00d49412c14d328b02edd12275956419">event_handled</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01123" name="l01123"></a><span class="lineno"> 1123</span>              }</div>
<div class="line"><a id="l01124" name="l01124"></a><span class="lineno"> 1124</span>            }</div>
<div class="line"><a id="l01125" name="l01125"></a><span class="lineno"> 1125</span>          }</div>
<div class="line"><a id="l01126" name="l01126"></a><span class="lineno"> 1126</span>        }</div>
<div class="line"><a id="l01127" name="l01127"></a><span class="lineno"> 1127</span>      }</div>
<div class="line"><a id="l01128" name="l01128"></a><span class="lineno"> 1128</span>      <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_event_c_r.html#ae47a7f34b8636a1f2fee10cd7cb7b14f">has_subscriptions</a> &amp;&amp; !<a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_event_c_r.html#a00d49412c14d328b02edd12275956419">event_handled</a>) {</div>
<div class="line"><a id="l01129" name="l01129"></a><span class="lineno"> 1129</span>        <span class="comment">// event is considered &quot;lost&quot; of it has subscriptions on any of its topics</span></div>
<div class="line"><a id="l01130" name="l01130"></a><span class="lineno"> 1130</span>        <span class="comment">// but it was not stored in, or pushed to, any of them</span></div>
<div class="line"><a id="l01131" name="l01131"></a><span class="lineno"> 1131</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="rgw__perf__counters_8cc.html#a770a29716cf802e8b212dbd61b157b2e">perfcounter</a>) <a class="code hl_variable" href="rgw__perf__counters_8cc.html#a770a29716cf802e8b212dbd61b157b2e">perfcounter</a>-&gt;inc(<a class="code hl_enumvalue" href="rgw__perf__counters_8h.html#a05589fbab0657f08285ebdfe93f5ec9ea88b3946fb92bbbd47d09cc34a377d970">l_rgw_pubsub_event_lost</a>);</div>
<div class="line"><a id="l01132" name="l01132"></a><span class="lineno"> 1132</span>      }</div>
<div class="line"><a id="l01133" name="l01133"></a><span class="lineno"> 1133</span>      <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_r_g_w_coroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a> &lt; 0) {</div>
<div class="line"><a id="l01134" name="l01134"></a><span class="lineno"> 1134</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="class_r_g_w_coroutine.html#a576a8ced300f52809ad477f0082e3bcd">set_cr_error</a>(<a class="code hl_variable" href="class_r_g_w_coroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a>);</div>
<div class="line"><a id="l01135" name="l01135"></a><span class="lineno"> 1135</span>      }</div>
<div class="line"><a id="l01136" name="l01136"></a><span class="lineno"> 1136</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="class_r_g_w_coroutine.html#a15bce10b8fbd959412a9473b03f0dd82">set_cr_done</a>();</div>
<div class="line"><a id="l01137" name="l01137"></a><span class="lineno"> 1137</span>    }</div>
<div class="line"><a id="l01138" name="l01138"></a><span class="lineno"> 1138</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l01139" name="l01139"></a><span class="lineno"> 1139</span>  }</div>
</div>
<div class="line"><a id="l01140" name="l01140"></a><span class="lineno"> 1140</span>};</div>
</div>
<div class="line"><a id="l01141" name="l01141"></a><span class="lineno"> 1141</span> </div>
<div class="line"><a id="l01142" name="l01142"></a><span class="lineno"> 1142</span><span class="comment">// coroutine invoked on remote object creation</span></div>
<div class="foldopen" id="foldopen01143" data-start="{" data-end="};">
<div class="line"><a id="l01143" name="l01143"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_handle_remote_obj_c_b_c_r.html"> 1143</a></span><span class="keyword">class </span><a class="code hl_class" href="class_r_g_w_p_s_handle_remote_obj_c_b_c_r.html">RGWPSHandleRemoteObjCBCR</a> : <span class="keyword">public</span> <a class="code hl_class" href="class_r_g_w_stat_remote_obj_c_b_c_r.html">RGWStatRemoteObjCBCR</a> {</div>
<div class="line"><a id="l01144" name="l01144"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_handle_remote_obj_c_b_c_r.html#acf7673551c62c36b581a63a5c9871668"> 1144</a></span>  <a class="code hl_struct" href="struct_r_g_w_data_sync_ctx.html">RGWDataSyncCtx</a> *<a class="code hl_variable" href="class_r_g_w_p_s_handle_remote_obj_c_b_c_r.html#acf7673551c62c36b581a63a5c9871668">sc</a>;</div>
<div class="line"><a id="l01145" name="l01145"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_handle_remote_obj_c_b_c_r.html#a2aa2b288f64668cb95fd89f003b3274f"> 1145</a></span>  <a class="code hl_struct" href="structrgw__bucket__sync__pipe.html">rgw_bucket_sync_pipe</a> <a class="code hl_variable" href="class_r_g_w_p_s_handle_remote_obj_c_b_c_r.html#a2aa2b288f64668cb95fd89f003b3274f">sync_pipe</a>;</div>
<div class="line"><a id="l01146" name="l01146"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_handle_remote_obj_c_b_c_r.html#a8f86ab311c9989b5894dc133bf7ce6ca"> 1146</a></span>  <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#a8cf75fd83a22c03e4eeae0932b31752a">PSEnvRef</a> <a class="code hl_variable" href="class_r_g_w_p_s_handle_remote_obj_c_b_c_r.html#a8f86ab311c9989b5894dc133bf7ce6ca">env</a>;</div>
<div class="line"><a id="l01147" name="l01147"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_handle_remote_obj_c_b_c_r.html#a52c5a635c92a2be51b577391b5056bfc"> 1147</a></span>  std::optional&lt;uint64_t&gt; <a class="code hl_variable" href="class_r_g_w_p_s_handle_remote_obj_c_b_c_r.html#a52c5a635c92a2be51b577391b5056bfc">versioned_epoch</a>;</div>
<div class="line"><a id="l01148" name="l01148"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_handle_remote_obj_c_b_c_r.html#a39eb4be947cfb814b5eae5f0ca374145"> 1148</a></span>  <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#ad8b26748ff02957ec1ec373a4f0a420f">EventRef&lt;rgw_pubsub_event&gt;</a> <a class="code hl_variable" href="class_r_g_w_p_s_handle_remote_obj_c_b_c_r.html#a39eb4be947cfb814b5eae5f0ca374145">event</a>;</div>
<div class="line"><a id="l01149" name="l01149"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_handle_remote_obj_c_b_c_r.html#ab37ed19bbe187de7ea345abbb7ed6294"> 1149</a></span>  <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#ad8b26748ff02957ec1ec373a4f0a420f">EventRef&lt;rgw_pubsub_s3_event&gt;</a> <a class="code hl_variable" href="class_r_g_w_p_s_handle_remote_obj_c_b_c_r.html#ab37ed19bbe187de7ea345abbb7ed6294">s3_event</a>;</div>
<div class="line"><a id="l01150" name="l01150"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_handle_remote_obj_c_b_c_r.html#a59b0ebeebc82b3c5333ccc25f612475b"> 1150</a></span>  <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#a8fac3e9ba436ccafb2b1e164c38b2c93">TopicsRef</a> <a class="code hl_variable" href="class_r_g_w_p_s_handle_remote_obj_c_b_c_r.html#a59b0ebeebc82b3c5333ccc25f612475b">topics</a>;</div>
<div class="line"><a id="l01151" name="l01151"></a><span class="lineno"> 1151</span><span class="keyword">public</span>:</div>
<div class="foldopen" id="foldopen01152" data-start="{" data-end="}">
<div class="line"><a id="l01152" name="l01152"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_handle_remote_obj_c_b_c_r.html#a3a924fec456fc3a0179d515348e78190"> 1152</a></span>  <a class="code hl_function" href="class_r_g_w_p_s_handle_remote_obj_c_b_c_r.html#a3a924fec456fc3a0179d515348e78190">RGWPSHandleRemoteObjCBCR</a>(<a class="code hl_struct" href="struct_r_g_w_data_sync_ctx.html">RGWDataSyncCtx</a> *_sc,</div>
<div class="line"><a id="l01153" name="l01153"></a><span class="lineno"> 1153</span>                          <a class="code hl_struct" href="structrgw__bucket__sync__pipe.html">rgw_bucket_sync_pipe</a>&amp; _sync_pipe, <a class="code hl_struct" href="structrgw__obj__key.html">rgw_obj_key</a>&amp; _key,</div>
<div class="line"><a id="l01154" name="l01154"></a><span class="lineno"> 1154</span>                          <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#a8cf75fd83a22c03e4eeae0932b31752a">PSEnvRef</a> _env, std::optional&lt;uint64_t&gt; _versioned_epoch,</div>
<div class="line"><a id="l01155" name="l01155"></a><span class="lineno"> 1155</span>                          <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#a8fac3e9ba436ccafb2b1e164c38b2c93">TopicsRef</a>&amp; _topics) : <a class="code hl_class" href="class_r_g_w_stat_remote_obj_c_b_c_r.html">RGWStatRemoteObjCBCR</a>(_sc, _sync_pipe.info.source_bs.bucket, _key),</div>
<div class="line"><a id="l01156" name="l01156"></a><span class="lineno"> 1156</span>                                                                      <a class="code hl_variable" href="class_r_g_w_p_s_handle_remote_obj_c_b_c_r.html#acf7673551c62c36b581a63a5c9871668">sc</a>(_sc),</div>
<div class="line"><a id="l01157" name="l01157"></a><span class="lineno"> 1157</span>                                                                      <a class="code hl_variable" href="class_r_g_w_p_s_handle_remote_obj_c_b_c_r.html#a2aa2b288f64668cb95fd89f003b3274f">sync_pipe</a>(_sync_pipe),</div>
<div class="line"><a id="l01158" name="l01158"></a><span class="lineno"> 1158</span>                                                                      <a class="code hl_variable" href="class_r_g_w_p_s_handle_remote_obj_c_b_c_r.html#a8f86ab311c9989b5894dc133bf7ce6ca">env</a>(_env),</div>
<div class="line"><a id="l01159" name="l01159"></a><span class="lineno"> 1159</span>                                                                      <a class="code hl_variable" href="class_r_g_w_p_s_handle_remote_obj_c_b_c_r.html#a52c5a635c92a2be51b577391b5056bfc">versioned_epoch</a>(_versioned_epoch),</div>
<div class="line"><a id="l01160" name="l01160"></a><span class="lineno"> 1160</span>                                                                      <a class="code hl_variable" href="class_r_g_w_p_s_handle_remote_obj_c_b_c_r.html#a59b0ebeebc82b3c5333ccc25f612475b">topics</a>(_topics) {</div>
<div class="line"><a id="l01161" name="l01161"></a><span class="lineno"> 1161</span>  }</div>
</div>
<div class="foldopen" id="foldopen01162" data-start="{" data-end="}">
<div class="line"><a id="l01162" name="l01162"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_handle_remote_obj_c_b_c_r.html#a0006bcf65d152efa3aea512aa11ab384"> 1162</a></span>  <span class="keywordtype">int</span> <a class="code hl_function" href="class_r_g_w_p_s_handle_remote_obj_c_b_c_r.html#a0006bcf65d152efa3aea512aa11ab384">operate</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>)<span class="keyword"> override </span>{</div>
<div class="line"><a id="l01163" name="l01163"></a><span class="lineno"> 1163</span>    reenter(<span class="keyword">this</span>) {</div>
<div class="line"><a id="l01164" name="l01164"></a><span class="lineno"> 1164</span>      ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 20) &lt;&lt; <span class="stringliteral">&quot;: stat of remote obj: z=&quot;</span> &lt;&lt; <a class="code hl_variable" href="class_r_g_w_p_s_handle_remote_obj_c_b_c_r.html#acf7673551c62c36b581a63a5c9871668">sc</a>-&gt;<a class="code hl_variable" href="struct_r_g_w_data_sync_ctx.html#aaa4f4a845ebb475fbdfa87c5df786afb">source_zone</a></div>
<div class="line"><a id="l01165" name="l01165"></a><span class="lineno"> 1165</span>                               &lt;&lt; <span class="stringliteral">&quot; b=&quot;</span> &lt;&lt; <a class="code hl_variable" href="class_r_g_w_p_s_handle_remote_obj_c_b_c_r.html#a2aa2b288f64668cb95fd89f003b3274f">sync_pipe</a>.<a class="code hl_variable" href="structrgw__bucket__sync__pipe.html#a24becd8d2b536e5483ac8bbe0853f811">info</a>.<a class="code hl_variable" href="structrgw__bucket__sync__pair__info.html#a0ece37c1c51ed70a1ceade1049619445">source_bs</a>.<a class="code hl_variable" href="structrgw__bucket__shard.html#aa6821665d28ae2987ee05096b8a284e8">bucket</a> &lt;&lt; <span class="stringliteral">&quot; k=&quot;</span> &lt;&lt; <a class="code hl_variable" href="class_r_g_w_stat_remote_obj_c_b_c_r.html#aed705de4ac538552a3c4581ff73fe0d2">key</a> &lt;&lt; <span class="stringliteral">&quot; size=&quot;</span> &lt;&lt; <a class="code hl_variable" href="class_r_g_w_stat_remote_obj_c_b_c_r.html#a1c4c474c82f713e2f6c4c960bb45f15f">size</a> &lt;&lt; <span class="stringliteral">&quot; mtime=&quot;</span> &lt;&lt; <a class="code hl_variable" href="class_r_g_w_stat_remote_obj_c_b_c_r.html#acc62327d02a31f0b233678d30c6e2960">mtime</a></div>
<div class="line"><a id="l01166" name="l01166"></a><span class="lineno"> 1166</span>                               &lt;&lt; <span class="stringliteral">&quot; attrs=&quot;</span> &lt;&lt; <a class="code hl_variable" href="class_r_g_w_stat_remote_obj_c_b_c_r.html#a5922639e84e215801ee018ba9b4f5c32">attrs</a> &lt;&lt; dendl;</div>
<div class="line"><a id="l01167" name="l01167"></a><span class="lineno"> 1167</span>      {</div>
<div class="line"><a id="l01168" name="l01168"></a><span class="lineno"> 1168</span>        std::vector&lt;std::pair&lt;std::string, std::string&gt; &gt; <a class="code hl_variable" href="class_r_g_w_stat_remote_obj_c_b_c_r.html#a5922639e84e215801ee018ba9b4f5c32">attrs</a>;</div>
<div class="line"><a id="l01169" name="l01169"></a><span class="lineno"> 1169</span>        <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; attr : <a class="code hl_variable" href="class_r_g_w_stat_remote_obj_c_b_c_r.html#a5922639e84e215801ee018ba9b4f5c32">attrs</a>) {</div>
<div class="line"><a id="l01170" name="l01170"></a><span class="lineno"> 1170</span>          std::string k = attr.first;</div>
<div class="line"><a id="l01171" name="l01171"></a><span class="lineno"> 1171</span>          <span class="keywordflow">if</span> (boost::algorithm::starts_with(k, <a class="code hl_define" href="rgw__common_8h.html#ade0f9ba81b5312d54a44746055c920be">RGW_ATTR_PREFIX</a>)) {</div>
<div class="line"><a id="l01172" name="l01172"></a><span class="lineno"> 1172</span>            k = k.substr(<span class="keyword">sizeof</span>(<a class="code hl_define" href="rgw__common_8h.html#ade0f9ba81b5312d54a44746055c920be">RGW_ATTR_PREFIX</a>) - 1);</div>
<div class="line"><a id="l01173" name="l01173"></a><span class="lineno"> 1173</span>          }</div>
<div class="line"><a id="l01174" name="l01174"></a><span class="lineno"> 1174</span>          <a class="code hl_variable" href="class_r_g_w_stat_remote_obj_c_b_c_r.html#a5922639e84e215801ee018ba9b4f5c32">attrs</a>.push_back(std::make_pair(k, attr.second));</div>
<div class="line"><a id="l01175" name="l01175"></a><span class="lineno"> 1175</span>        } </div>
<div class="line"><a id="l01176" name="l01176"></a><span class="lineno"> 1176</span>        <span class="comment">// at this point we don&#39;t know whether we need the ceph event or S3 event</span></div>
<div class="line"><a id="l01177" name="l01177"></a><span class="lineno"> 1177</span>        <span class="comment">// this is why both are created here, once we have information about the </span></div>
<div class="line"><a id="l01178" name="l01178"></a><span class="lineno"> 1178</span>        <span class="comment">// subscription, we will store/push only the relevant ones</span></div>
<div class="line"><a id="l01179" name="l01179"></a><span class="lineno"> 1179</span>        <a class="code hl_function" href="rgw__sync__module__pubsub_8cc.html#a680685668a648b33b677265fc07be8ae">make_event_ref</a>(<a class="code hl_variable" href="class_r_g_w_p_s_handle_remote_obj_c_b_c_r.html#acf7673551c62c36b581a63a5c9871668">sc</a>-&gt;<a class="code hl_variable" href="struct_r_g_w_data_sync_ctx.html#ac3f462ed79fd418c4fede613a2700072">cct</a>,</div>
<div class="line"><a id="l01180" name="l01180"></a><span class="lineno"> 1180</span>                       <a class="code hl_variable" href="class_r_g_w_p_s_handle_remote_obj_c_b_c_r.html#a2aa2b288f64668cb95fd89f003b3274f">sync_pipe</a>.<a class="code hl_variable" href="structrgw__bucket__sync__pipe.html#a24becd8d2b536e5483ac8bbe0853f811">info</a>.<a class="code hl_variable" href="structrgw__bucket__sync__pair__info.html#a0ece37c1c51ed70a1ceade1049619445">source_bs</a>.<a class="code hl_variable" href="structrgw__bucket__shard.html#aa6821665d28ae2987ee05096b8a284e8">bucket</a>, <a class="code hl_variable" href="class_r_g_w_stat_remote_obj_c_b_c_r.html#aed705de4ac538552a3c4581ff73fe0d2">key</a>,</div>
<div class="line"><a id="l01181" name="l01181"></a><span class="lineno"> 1181</span>                       <a class="code hl_variable" href="class_r_g_w_stat_remote_obj_c_b_c_r.html#acc62327d02a31f0b233678d30c6e2960">mtime</a>, &amp;<a class="code hl_variable" href="class_r_g_w_stat_remote_obj_c_b_c_r.html#a5922639e84e215801ee018ba9b4f5c32">attrs</a>,</div>
<div class="line"><a id="l01182" name="l01182"></a><span class="lineno"> 1182</span>                       <a class="code hl_enumvalue" href="namespacergw_1_1notify.html#a11587407d1aff95c9cb4a10979ba813baba7b131f3f73a847c08afe620d978dd0">rgw::notify::ObjectCreated</a>, &amp;<a class="code hl_variable" href="class_r_g_w_p_s_handle_remote_obj_c_b_c_r.html#a39eb4be947cfb814b5eae5f0ca374145">event</a>);</div>
<div class="line"><a id="l01183" name="l01183"></a><span class="lineno"> 1183</span>        <a class="code hl_function" href="rgw__sync__module__pubsub_8cc.html#a8b3691422cb11d18dc41d77815abbb6b">make_s3_event_ref</a>(<a class="code hl_variable" href="class_r_g_w_p_s_handle_remote_obj_c_b_c_r.html#acf7673551c62c36b581a63a5c9871668">sc</a>-&gt;<a class="code hl_variable" href="struct_r_g_w_data_sync_ctx.html#ac3f462ed79fd418c4fede613a2700072">cct</a>,</div>
<div class="line"><a id="l01184" name="l01184"></a><span class="lineno"> 1184</span>                       <a class="code hl_variable" href="class_r_g_w_p_s_handle_remote_obj_c_b_c_r.html#a2aa2b288f64668cb95fd89f003b3274f">sync_pipe</a>.<a class="code hl_variable" href="structrgw__bucket__sync__pipe.html#a24becd8d2b536e5483ac8bbe0853f811">info</a>.<a class="code hl_variable" href="structrgw__bucket__sync__pair__info.html#a0ece37c1c51ed70a1ceade1049619445">source_bs</a>.<a class="code hl_variable" href="structrgw__bucket__shard.html#aa6821665d28ae2987ee05096b8a284e8">bucket</a>, <a class="code hl_variable" href="class_r_g_w_p_s_handle_remote_obj_c_b_c_r.html#a2aa2b288f64668cb95fd89f003b3274f">sync_pipe</a>.<a class="code hl_variable" href="structrgw__bucket__sync__pipe.html#ae426d285bde7b00520046d98e56f3a04">dest_bucket_info</a>.<a class="code hl_variable" href="struct_r_g_w_bucket_info.html#a18215d487317142f30bd2675ccec2293">owner</a>, <a class="code hl_variable" href="class_r_g_w_stat_remote_obj_c_b_c_r.html#aed705de4ac538552a3c4581ff73fe0d2">key</a>,</div>
<div class="line"><a id="l01185" name="l01185"></a><span class="lineno"> 1185</span>                       <a class="code hl_variable" href="class_r_g_w_stat_remote_obj_c_b_c_r.html#acc62327d02a31f0b233678d30c6e2960">mtime</a>, &amp;<a class="code hl_variable" href="class_r_g_w_stat_remote_obj_c_b_c_r.html#a5922639e84e215801ee018ba9b4f5c32">attrs</a>,</div>
<div class="line"><a id="l01186" name="l01186"></a><span class="lineno"> 1186</span>                       <a class="code hl_enumvalue" href="namespacergw_1_1notify.html#a11587407d1aff95c9cb4a10979ba813baba7b131f3f73a847c08afe620d978dd0">rgw::notify::ObjectCreated</a>, &amp;<a class="code hl_variable" href="class_r_g_w_p_s_handle_remote_obj_c_b_c_r.html#ab37ed19bbe187de7ea345abbb7ed6294">s3_event</a>);</div>
<div class="line"><a id="l01187" name="l01187"></a><span class="lineno"> 1187</span>      }</div>
<div class="line"><a id="l01188" name="l01188"></a><span class="lineno"> 1188</span> </div>
<div class="line"><a id="l01189" name="l01189"></a><span class="lineno"> 1189</span>      yield <a class="code hl_function" href="class_r_g_w_coroutine.html#a60c1d6187851953e8a5e1dbc97f69bbd">call</a>(<span class="keyword">new</span> <a class="code hl_class" href="class_r_g_w_p_s_handle_obj_event_c_r.html">RGWPSHandleObjEventCR</a>(<a class="code hl_variable" href="class_r_g_w_p_s_handle_remote_obj_c_b_c_r.html#acf7673551c62c36b581a63a5c9871668">sc</a>, <a class="code hl_variable" href="class_r_g_w_p_s_handle_remote_obj_c_b_c_r.html#a8f86ab311c9989b5894dc133bf7ce6ca">env</a>, <a class="code hl_variable" href="class_r_g_w_p_s_handle_remote_obj_c_b_c_r.html#a2aa2b288f64668cb95fd89f003b3274f">sync_pipe</a>.<a class="code hl_variable" href="structrgw__bucket__sync__pipe.html#a365bed8fa6911b1e2ce2a0c92017ec7c">source_bucket_info</a>.<a class="code hl_variable" href="struct_r_g_w_bucket_info.html#a18215d487317142f30bd2675ccec2293">owner</a>, <a class="code hl_variable" href="class_r_g_w_p_s_handle_remote_obj_c_b_c_r.html#a39eb4be947cfb814b5eae5f0ca374145">event</a>, <a class="code hl_variable" href="class_r_g_w_p_s_handle_remote_obj_c_b_c_r.html#ab37ed19bbe187de7ea345abbb7ed6294">s3_event</a>, <a class="code hl_variable" href="class_r_g_w_p_s_handle_remote_obj_c_b_c_r.html#a59b0ebeebc82b3c5333ccc25f612475b">topics</a>));</div>
<div class="line"><a id="l01190" name="l01190"></a><span class="lineno"> 1190</span>      <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_r_g_w_coroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a> &lt; 0) {</div>
<div class="line"><a id="l01191" name="l01191"></a><span class="lineno"> 1191</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="class_r_g_w_coroutine.html#a576a8ced300f52809ad477f0082e3bcd">set_cr_error</a>(<a class="code hl_variable" href="class_r_g_w_coroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a>);</div>
<div class="line"><a id="l01192" name="l01192"></a><span class="lineno"> 1192</span>      }</div>
<div class="line"><a id="l01193" name="l01193"></a><span class="lineno"> 1193</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="class_r_g_w_coroutine.html#a15bce10b8fbd959412a9473b03f0dd82">set_cr_done</a>();</div>
<div class="line"><a id="l01194" name="l01194"></a><span class="lineno"> 1194</span>    }</div>
<div class="line"><a id="l01195" name="l01195"></a><span class="lineno"> 1195</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l01196" name="l01196"></a><span class="lineno"> 1196</span>  }</div>
</div>
<div class="line"><a id="l01197" name="l01197"></a><span class="lineno"> 1197</span>};</div>
</div>
<div class="line"><a id="l01198" name="l01198"></a><span class="lineno"> 1198</span> </div>
<div class="foldopen" id="foldopen01199" data-start="{" data-end="};">
<div class="line"><a id="l01199" name="l01199"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_handle_remote_obj_c_r.html"> 1199</a></span><span class="keyword">class </span><a class="code hl_class" href="class_r_g_w_p_s_handle_remote_obj_c_r.html">RGWPSHandleRemoteObjCR</a> : <span class="keyword">public</span> <a class="code hl_class" href="class_r_g_w_call_stat_remote_obj_c_r.html">RGWCallStatRemoteObjCR</a> {</div>
<div class="line"><a id="l01200" name="l01200"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_handle_remote_obj_c_r.html#ac8ee982c5f54fa1a97ace8c5df21a068"> 1200</a></span>  <a class="code hl_struct" href="structrgw__bucket__sync__pipe.html">rgw_bucket_sync_pipe</a> <a class="code hl_variable" href="class_r_g_w_p_s_handle_remote_obj_c_r.html#ac8ee982c5f54fa1a97ace8c5df21a068">sync_pipe</a>;</div>
<div class="line"><a id="l01201" name="l01201"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_handle_remote_obj_c_r.html#a8a6fc4415a8a2462ac23ff070205f2bb"> 1201</a></span>  <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#a8cf75fd83a22c03e4eeae0932b31752a">PSEnvRef</a> <a class="code hl_variable" href="class_r_g_w_p_s_handle_remote_obj_c_r.html#a8a6fc4415a8a2462ac23ff070205f2bb">env</a>;</div>
<div class="line"><a id="l01202" name="l01202"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_handle_remote_obj_c_r.html#a3ee95bc7a11940c31385aa4173add887"> 1202</a></span>  std::optional&lt;uint64_t&gt; <a class="code hl_variable" href="class_r_g_w_p_s_handle_remote_obj_c_r.html#a3ee95bc7a11940c31385aa4173add887">versioned_epoch</a>;</div>
<div class="line"><a id="l01203" name="l01203"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_handle_remote_obj_c_r.html#a4f3deff5d134b2b61453c871be5f5429"> 1203</a></span>  <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#a8fac3e9ba436ccafb2b1e164c38b2c93">TopicsRef</a> <a class="code hl_variable" href="class_r_g_w_p_s_handle_remote_obj_c_r.html#a4f3deff5d134b2b61453c871be5f5429">topics</a>;</div>
<div class="line"><a id="l01204" name="l01204"></a><span class="lineno"> 1204</span><span class="keyword">public</span>:</div>
<div class="foldopen" id="foldopen01205" data-start="{" data-end="}">
<div class="line"><a id="l01205" name="l01205"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_handle_remote_obj_c_r.html#a3d94e7997a1eec90b5a4ebef57257a4b"> 1205</a></span>  <a class="code hl_function" href="class_r_g_w_p_s_handle_remote_obj_c_r.html#a3d94e7997a1eec90b5a4ebef57257a4b">RGWPSHandleRemoteObjCR</a>(<a class="code hl_struct" href="struct_r_g_w_data_sync_ctx.html">RGWDataSyncCtx</a> *_sc,</div>
<div class="line"><a id="l01206" name="l01206"></a><span class="lineno"> 1206</span>                        <a class="code hl_struct" href="structrgw__bucket__sync__pipe.html">rgw_bucket_sync_pipe</a>&amp; _sync_pipe, <a class="code hl_struct" href="structrgw__obj__key.html">rgw_obj_key</a>&amp; _key,</div>
<div class="line"><a id="l01207" name="l01207"></a><span class="lineno"> 1207</span>                        <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#a8cf75fd83a22c03e4eeae0932b31752a">PSEnvRef</a> _env, std::optional&lt;uint64_t&gt; _versioned_epoch,</div>
<div class="line"><a id="l01208" name="l01208"></a><span class="lineno"> 1208</span>                        <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#a8fac3e9ba436ccafb2b1e164c38b2c93">TopicsRef</a>&amp; _topics) : <a class="code hl_class" href="class_r_g_w_call_stat_remote_obj_c_r.html">RGWCallStatRemoteObjCR</a>(_sc, _sync_pipe.info.source_bs.bucket, _key),</div>
<div class="line"><a id="l01209" name="l01209"></a><span class="lineno"> 1209</span>                                                           <a class="code hl_variable" href="class_r_g_w_p_s_handle_remote_obj_c_r.html#ac8ee982c5f54fa1a97ace8c5df21a068">sync_pipe</a>(_sync_pipe),</div>
<div class="line"><a id="l01210" name="l01210"></a><span class="lineno"> 1210</span>                                                           <a class="code hl_variable" href="class_r_g_w_p_s_handle_remote_obj_c_r.html#a8a6fc4415a8a2462ac23ff070205f2bb">env</a>(_env), <a class="code hl_variable" href="class_r_g_w_p_s_handle_remote_obj_c_r.html#a3ee95bc7a11940c31385aa4173add887">versioned_epoch</a>(_versioned_epoch),</div>
<div class="line"><a id="l01211" name="l01211"></a><span class="lineno"> 1211</span>                                                           <a class="code hl_variable" href="class_r_g_w_p_s_handle_remote_obj_c_r.html#a4f3deff5d134b2b61453c871be5f5429">topics</a>(_topics) {</div>
<div class="line"><a id="l01212" name="l01212"></a><span class="lineno"> 1212</span>  }</div>
</div>
<div class="line"><a id="l01213" name="l01213"></a><span class="lineno"> 1213</span> </div>
<div class="line"><a id="l01214" name="l01214"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_handle_remote_obj_c_r.html#a4c7c687e055b18ec0ccef3ad5a6d0d1a"> 1214</a></span>  <a class="code hl_function" href="class_r_g_w_p_s_handle_remote_obj_c_r.html#a4c7c687e055b18ec0ccef3ad5a6d0d1a">~RGWPSHandleRemoteObjCR</a>()<span class="keyword"> override </span>{}</div>
<div class="line"><a id="l01215" name="l01215"></a><span class="lineno"> 1215</span> </div>
<div class="foldopen" id="foldopen01216" data-start="{" data-end="}">
<div class="line"><a id="l01216" name="l01216"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_handle_remote_obj_c_r.html#a5f2ce6d411b7709726ffcc3af16312b1"> 1216</a></span>  <a class="code hl_class" href="class_r_g_w_stat_remote_obj_c_b_c_r.html">RGWStatRemoteObjCBCR</a> *<a class="code hl_function" href="class_r_g_w_p_s_handle_remote_obj_c_r.html#a5f2ce6d411b7709726ffcc3af16312b1">allocate_callback</a>()<span class="keyword"> override </span>{</div>
<div class="line"><a id="l01217" name="l01217"></a><span class="lineno"> 1217</span>    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code hl_class" href="class_r_g_w_p_s_handle_remote_obj_c_b_c_r.html">RGWPSHandleRemoteObjCBCR</a>(<a class="code hl_variable" href="class_r_g_w_call_stat_remote_obj_c_r.html#a1957800f11ca717cc6ea98837bc8e3e0">sc</a>, <a class="code hl_variable" href="class_r_g_w_p_s_handle_remote_obj_c_r.html#ac8ee982c5f54fa1a97ace8c5df21a068">sync_pipe</a>, <a class="code hl_variable" href="class_r_g_w_call_stat_remote_obj_c_r.html#a7e2c7a26a3f7627674772c959a9847ca">key</a>, <a class="code hl_variable" href="class_r_g_w_p_s_handle_remote_obj_c_r.html#a8a6fc4415a8a2462ac23ff070205f2bb">env</a>, <a class="code hl_variable" href="class_r_g_w_p_s_handle_remote_obj_c_r.html#a3ee95bc7a11940c31385aa4173add887">versioned_epoch</a>, <a class="code hl_variable" href="class_r_g_w_p_s_handle_remote_obj_c_r.html#a4f3deff5d134b2b61453c871be5f5429">topics</a>);</div>
<div class="line"><a id="l01218" name="l01218"></a><span class="lineno"> 1218</span>  }</div>
</div>
<div class="line"><a id="l01219" name="l01219"></a><span class="lineno"> 1219</span>};</div>
</div>
<div class="line"><a id="l01220" name="l01220"></a><span class="lineno"> 1220</span> </div>
<div class="foldopen" id="foldopen01221" data-start="{" data-end="};">
<div class="line"><a id="l01221" name="l01221"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_handle_obj_create_c_r.html"> 1221</a></span><span class="keyword">class </span><a class="code hl_class" href="class_r_g_w_p_s_handle_obj_create_c_r.html">RGWPSHandleObjCreateCR</a> : <span class="keyword">public</span> <a class="code hl_class" href="class_r_g_w_coroutine.html">RGWCoroutine</a> {</div>
<div class="line"><a id="l01222" name="l01222"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_handle_obj_create_c_r.html#afccca42625143aae19374350199fd0fb"> 1222</a></span>  <a class="code hl_struct" href="struct_r_g_w_data_sync_ctx.html">RGWDataSyncCtx</a> *<a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_create_c_r.html#afccca42625143aae19374350199fd0fb">sc</a>;</div>
<div class="line"><a id="l01223" name="l01223"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_handle_obj_create_c_r.html#aa1142120fb6d3ad1f0f7f3d923ca316d"> 1223</a></span>  <a class="code hl_struct" href="structrgw__bucket__sync__pipe.html">rgw_bucket_sync_pipe</a> <a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_create_c_r.html#aa1142120fb6d3ad1f0f7f3d923ca316d">sync_pipe</a>;</div>
<div class="line"><a id="l01224" name="l01224"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_handle_obj_create_c_r.html#a071180d1d7bc528f817b215c6ad6f9a7"> 1224</a></span>  <a class="code hl_struct" href="structrgw__obj__key.html">rgw_obj_key</a> <a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_create_c_r.html#a071180d1d7bc528f817b215c6ad6f9a7">key</a>;</div>
<div class="line"><a id="l01225" name="l01225"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_handle_obj_create_c_r.html#aeb54babcd39a3ba6887e981c12e44aec"> 1225</a></span>  <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#a8cf75fd83a22c03e4eeae0932b31752a">PSEnvRef</a> <a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_create_c_r.html#aeb54babcd39a3ba6887e981c12e44aec">env</a>;</div>
<div class="line"><a id="l01226" name="l01226"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_handle_obj_create_c_r.html#a7df924cdba935761d2e9a23e96d5133c"> 1226</a></span>  std::optional&lt;uint64_t&gt; <a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_create_c_r.html#a7df924cdba935761d2e9a23e96d5133c">versioned_epoch</a>;</div>
<div class="line"><a id="l01227" name="l01227"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_handle_obj_create_c_r.html#abec9cb0b9d84088c129d6f8e47338d42"> 1227</a></span>  <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#a8fac3e9ba436ccafb2b1e164c38b2c93">TopicsRef</a> <a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_create_c_r.html#abec9cb0b9d84088c129d6f8e47338d42">topics</a>;</div>
<div class="line"><a id="l01228" name="l01228"></a><span class="lineno"> 1228</span><span class="keyword">public</span>:</div>
<div class="foldopen" id="foldopen01229" data-start="{" data-end="}">
<div class="line"><a id="l01229" name="l01229"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_handle_obj_create_c_r.html#a2b8e121b086c38bc987156ab3203a077"> 1229</a></span>  <a class="code hl_function" href="class_r_g_w_p_s_handle_obj_create_c_r.html#a2b8e121b086c38bc987156ab3203a077">RGWPSHandleObjCreateCR</a>(<a class="code hl_struct" href="struct_r_g_w_data_sync_ctx.html">RGWDataSyncCtx</a> *_sc,</div>
<div class="line"><a id="l01230" name="l01230"></a><span class="lineno"> 1230</span>                       <a class="code hl_struct" href="structrgw__bucket__sync__pipe.html">rgw_bucket_sync_pipe</a>&amp; _sync_pipe, <a class="code hl_struct" href="structrgw__obj__key.html">rgw_obj_key</a>&amp; _key,</div>
<div class="line"><a id="l01231" name="l01231"></a><span class="lineno"> 1231</span>                       <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#a8cf75fd83a22c03e4eeae0932b31752a">PSEnvRef</a> _env, std::optional&lt;uint64_t&gt; _versioned_epoch) : <a class="code hl_class" href="class_r_g_w_coroutine.html">RGWCoroutine</a>(_sc-&gt;<a class="code hl_variable" href="class_r_g_w_coroutine.html#a887e803a293aff88fd8d60003a73e50a">cct</a>),</div>
<div class="line"><a id="l01232" name="l01232"></a><span class="lineno"> 1232</span>                                                                   <a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_create_c_r.html#afccca42625143aae19374350199fd0fb">sc</a>(_sc),</div>
<div class="line"><a id="l01233" name="l01233"></a><span class="lineno"> 1233</span>                                                                   <a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_create_c_r.html#aa1142120fb6d3ad1f0f7f3d923ca316d">sync_pipe</a>(_sync_pipe),</div>
<div class="line"><a id="l01234" name="l01234"></a><span class="lineno"> 1234</span>                                                                   <a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_create_c_r.html#a071180d1d7bc528f817b215c6ad6f9a7">key</a>(_key),</div>
<div class="line"><a id="l01235" name="l01235"></a><span class="lineno"> 1235</span>                                                                   <a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_create_c_r.html#aeb54babcd39a3ba6887e981c12e44aec">env</a>(_env),</div>
<div class="line"><a id="l01236" name="l01236"></a><span class="lineno"> 1236</span>                                                                   <a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_create_c_r.html#a7df924cdba935761d2e9a23e96d5133c">versioned_epoch</a>(_versioned_epoch) {</div>
<div class="line"><a id="l01237" name="l01237"></a><span class="lineno"> 1237</span>  }</div>
</div>
<div class="line"><a id="l01238" name="l01238"></a><span class="lineno"> 1238</span> </div>
<div class="line"><a id="l01239" name="l01239"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_handle_obj_create_c_r.html#a7d4fb54026bfd0cc2d0c95648c9fa479"> 1239</a></span>  <a class="code hl_function" href="class_r_g_w_p_s_handle_obj_create_c_r.html#a7d4fb54026bfd0cc2d0c95648c9fa479">~RGWPSHandleObjCreateCR</a>()<span class="keyword"> override </span>{}</div>
<div class="line"><a id="l01240" name="l01240"></a><span class="lineno"> 1240</span> </div>
<div class="foldopen" id="foldopen01241" data-start="{" data-end="}">
<div class="line"><a id="l01241" name="l01241"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_handle_obj_create_c_r.html#acc0ac1a6523f81e04670c13ec53605a5"> 1241</a></span>  <span class="keywordtype">int</span> <a class="code hl_function" href="class_r_g_w_p_s_handle_obj_create_c_r.html#acc0ac1a6523f81e04670c13ec53605a5">operate</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>)<span class="keyword"> override </span>{</div>
<div class="line"><a id="l01242" name="l01242"></a><span class="lineno"> 1242</span>    reenter(<span class="keyword">this</span>) {</div>
<div class="line"><a id="l01243" name="l01243"></a><span class="lineno"> 1243</span>      yield <a class="code hl_function" href="class_r_g_w_coroutine.html#a60c1d6187851953e8a5e1dbc97f69bbd">call</a>(<span class="keyword">new</span> <a class="code hl_class" href="class_r_g_w_p_s_find_bucket_topics_c_r.html">RGWPSFindBucketTopicsCR</a>(<a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_create_c_r.html#afccca42625143aae19374350199fd0fb">sc</a>, <a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_create_c_r.html#aeb54babcd39a3ba6887e981c12e44aec">env</a>, <a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_create_c_r.html#aa1142120fb6d3ad1f0f7f3d923ca316d">sync_pipe</a>.<a class="code hl_variable" href="structrgw__bucket__sync__pipe.html#ae426d285bde7b00520046d98e56f3a04">dest_bucket_info</a>.<a class="code hl_variable" href="struct_r_g_w_bucket_info.html#a18215d487317142f30bd2675ccec2293">owner</a>,</div>
<div class="line"><a id="l01244" name="l01244"></a><span class="lineno"> 1244</span>                                             <a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_create_c_r.html#aa1142120fb6d3ad1f0f7f3d923ca316d">sync_pipe</a>.<a class="code hl_variable" href="structrgw__bucket__sync__pipe.html#a24becd8d2b536e5483ac8bbe0853f811">info</a>.<a class="code hl_variable" href="structrgw__bucket__sync__pair__info.html#a0ece37c1c51ed70a1ceade1049619445">source_bs</a>.<a class="code hl_variable" href="structrgw__bucket__shard.html#aa6821665d28ae2987ee05096b8a284e8">bucket</a>, <a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_create_c_r.html#a071180d1d7bc528f817b215c6ad6f9a7">key</a>,</div>
<div class="line"><a id="l01245" name="l01245"></a><span class="lineno"> 1245</span>                                             <a class="code hl_enumvalue" href="namespacergw_1_1notify.html#a11587407d1aff95c9cb4a10979ba813baba7b131f3f73a847c08afe620d978dd0">rgw::notify::ObjectCreated</a>,</div>
<div class="line"><a id="l01246" name="l01246"></a><span class="lineno"> 1246</span>                                             &amp;<a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_create_c_r.html#abec9cb0b9d84088c129d6f8e47338d42">topics</a>));</div>
<div class="line"><a id="l01247" name="l01247"></a><span class="lineno"> 1247</span>      <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_r_g_w_coroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a> &lt; 0) {</div>
<div class="line"><a id="l01248" name="l01248"></a><span class="lineno"> 1248</span>        ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 1) &lt;&lt; <span class="stringliteral">&quot;ERROR: RGWPSFindBucketTopicsCR returned ret=&quot;</span> &lt;&lt; <a class="code hl_variable" href="class_r_g_w_coroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a> &lt;&lt; dendl;</div>
<div class="line"><a id="l01249" name="l01249"></a><span class="lineno"> 1249</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="class_r_g_w_coroutine.html#a576a8ced300f52809ad477f0082e3bcd">set_cr_error</a>(<a class="code hl_variable" href="class_r_g_w_coroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a>);</div>
<div class="line"><a id="l01250" name="l01250"></a><span class="lineno"> 1250</span>      }</div>
<div class="line"><a id="l01251" name="l01251"></a><span class="lineno"> 1251</span>      <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_create_c_r.html#abec9cb0b9d84088c129d6f8e47338d42">topics</a>-&gt;empty()) {</div>
<div class="line"><a id="l01252" name="l01252"></a><span class="lineno"> 1252</span>        ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 20) &lt;&lt; <span class="stringliteral">&quot;no topics found for &quot;</span> &lt;&lt; <a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_create_c_r.html#aa1142120fb6d3ad1f0f7f3d923ca316d">sync_pipe</a>.<a class="code hl_variable" href="structrgw__bucket__sync__pipe.html#a24becd8d2b536e5483ac8bbe0853f811">info</a>.<a class="code hl_variable" href="structrgw__bucket__sync__pair__info.html#a0ece37c1c51ed70a1ceade1049619445">source_bs</a>.<a class="code hl_variable" href="structrgw__bucket__shard.html#aa6821665d28ae2987ee05096b8a284e8">bucket</a> &lt;&lt; <span class="stringliteral">&quot;/&quot;</span> &lt;&lt; <a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_create_c_r.html#a071180d1d7bc528f817b215c6ad6f9a7">key</a> &lt;&lt; dendl;</div>
<div class="line"><a id="l01253" name="l01253"></a><span class="lineno"> 1253</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="class_r_g_w_coroutine.html#a15bce10b8fbd959412a9473b03f0dd82">set_cr_done</a>();</div>
<div class="line"><a id="l01254" name="l01254"></a><span class="lineno"> 1254</span>      }</div>
<div class="line"><a id="l01255" name="l01255"></a><span class="lineno"> 1255</span>      yield <a class="code hl_function" href="class_r_g_w_coroutine.html#a60c1d6187851953e8a5e1dbc97f69bbd">call</a>(<span class="keyword">new</span> <a class="code hl_class" href="class_r_g_w_p_s_handle_remote_obj_c_r.html">RGWPSHandleRemoteObjCR</a>(<a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_create_c_r.html#afccca42625143aae19374350199fd0fb">sc</a>, <a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_create_c_r.html#aa1142120fb6d3ad1f0f7f3d923ca316d">sync_pipe</a>, <a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_create_c_r.html#a071180d1d7bc528f817b215c6ad6f9a7">key</a>, <a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_create_c_r.html#aeb54babcd39a3ba6887e981c12e44aec">env</a>, <a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_create_c_r.html#a7df924cdba935761d2e9a23e96d5133c">versioned_epoch</a>, <a class="code hl_variable" href="class_r_g_w_p_s_handle_obj_create_c_r.html#abec9cb0b9d84088c129d6f8e47338d42">topics</a>));</div>
<div class="line"><a id="l01256" name="l01256"></a><span class="lineno"> 1256</span>      <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_r_g_w_coroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a> &lt; 0) {</div>
<div class="line"><a id="l01257" name="l01257"></a><span class="lineno"> 1257</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="class_r_g_w_coroutine.html#a576a8ced300f52809ad477f0082e3bcd">set_cr_error</a>(<a class="code hl_variable" href="class_r_g_w_coroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a>);</div>
<div class="line"><a id="l01258" name="l01258"></a><span class="lineno"> 1258</span>      }</div>
<div class="line"><a id="l01259" name="l01259"></a><span class="lineno"> 1259</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="class_r_g_w_coroutine.html#a15bce10b8fbd959412a9473b03f0dd82">set_cr_done</a>();</div>
<div class="line"><a id="l01260" name="l01260"></a><span class="lineno"> 1260</span>    }</div>
<div class="line"><a id="l01261" name="l01261"></a><span class="lineno"> 1261</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l01262" name="l01262"></a><span class="lineno"> 1262</span>  }</div>
</div>
<div class="line"><a id="l01263" name="l01263"></a><span class="lineno"> 1263</span>};</div>
</div>
<div class="line"><a id="l01264" name="l01264"></a><span class="lineno"> 1264</span> </div>
<div class="line"><a id="l01265" name="l01265"></a><span class="lineno"> 1265</span><span class="comment">// coroutine invoked on remote object deletion</span></div>
<div class="foldopen" id="foldopen01266" data-start="{" data-end="};">
<div class="line"><a id="l01266" name="l01266"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html"> 1266</a></span><span class="keyword">class </span><a class="code hl_class" href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html">RGWPSGenericObjEventCBCR</a> : <span class="keyword">public</span> <a class="code hl_class" href="class_r_g_w_coroutine.html">RGWCoroutine</a> {</div>
<div class="line"><a id="l01267" name="l01267"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#ae5616fd50a7cb8de961328df0e1b4812"> 1267</a></span>  <a class="code hl_struct" href="struct_r_g_w_data_sync_ctx.html">RGWDataSyncCtx</a> *<a class="code hl_variable" href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#ae5616fd50a7cb8de961328df0e1b4812">sc</a>;</div>
<div class="line"><a id="l01268" name="l01268"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#aceaab4f3a77f297d1fa181338be0eb8d"> 1268</a></span>  <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#a8cf75fd83a22c03e4eeae0932b31752a">PSEnvRef</a> <a class="code hl_variable" href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#aceaab4f3a77f297d1fa181338be0eb8d">env</a>;</div>
<div class="line"><a id="l01269" name="l01269"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#ac20339032c0aea537caf19095c3c7de1"> 1269</a></span>  <a class="code hl_struct" href="structrgw__user.html">rgw_user</a> <a class="code hl_variable" href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#ac20339032c0aea537caf19095c3c7de1">owner</a>;</div>
<div class="line"><a id="l01270" name="l01270"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#a59ce6cea55f603205011b51ada4b9c14"> 1270</a></span>  <a class="code hl_struct" href="structrgw__bucket.html">rgw_bucket</a> <a class="code hl_variable" href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#a59ce6cea55f603205011b51ada4b9c14">bucket</a>;</div>
<div class="line"><a id="l01271" name="l01271"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#ab8dee2bc66d6e43328f7d35a105309fc"> 1271</a></span>  <a class="code hl_struct" href="structrgw__obj__key.html">rgw_obj_key</a> <a class="code hl_variable" href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#ab8dee2bc66d6e43328f7d35a105309fc">key</a>;</div>
<div class="line"><a id="l01272" name="l01272"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#ac8954b15065d9868090bc0d9ca757440"> 1272</a></span>  ceph::real_time <a class="code hl_variable" href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#ac8954b15065d9868090bc0d9ca757440">mtime</a>;</div>
<div class="line"><a id="l01273" name="l01273"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#a47e951e4b30a875432fcf9571c18a02e"> 1273</a></span>  <a class="code hl_enumeration" href="namespacergw_1_1notify.html#a11587407d1aff95c9cb4a10979ba813b">rgw::notify::EventType</a> <a class="code hl_variable" href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#a47e951e4b30a875432fcf9571c18a02e">event_type</a>;</div>
<div class="line"><a id="l01274" name="l01274"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#a496fe00339ebaec7c491831d51c73648"> 1274</a></span>  <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#ad8b26748ff02957ec1ec373a4f0a420f">EventRef&lt;rgw_pubsub_event&gt;</a> <a class="code hl_variable" href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#a496fe00339ebaec7c491831d51c73648">event</a>;</div>
<div class="line"><a id="l01275" name="l01275"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#a471aa976e94d8cf8800952126ebb4b6d"> 1275</a></span>  <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#ad8b26748ff02957ec1ec373a4f0a420f">EventRef&lt;rgw_pubsub_s3_event&gt;</a> <a class="code hl_variable" href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#a471aa976e94d8cf8800952126ebb4b6d">s3_event</a>;</div>
<div class="line"><a id="l01276" name="l01276"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#a9f9e7bdbf3b41c110b5c38606edb2e93"> 1276</a></span>  <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#a8fac3e9ba436ccafb2b1e164c38b2c93">TopicsRef</a> <a class="code hl_variable" href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#a9f9e7bdbf3b41c110b5c38606edb2e93">topics</a>;</div>
<div class="line"><a id="l01277" name="l01277"></a><span class="lineno"> 1277</span><span class="keyword">public</span>:</div>
<div class="foldopen" id="foldopen01278" data-start="{" data-end="}">
<div class="line"><a id="l01278" name="l01278"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#a3331e048df1b3d548332ddf29ac00ea4"> 1278</a></span>  <a class="code hl_function" href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#a3331e048df1b3d548332ddf29ac00ea4">RGWPSGenericObjEventCBCR</a>(<a class="code hl_struct" href="struct_r_g_w_data_sync_ctx.html">RGWDataSyncCtx</a> *_sc,</div>
<div class="line"><a id="l01279" name="l01279"></a><span class="lineno"> 1279</span>                           <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#a8cf75fd83a22c03e4eeae0932b31752a">PSEnvRef</a> _env,</div>
<div class="line"><a id="l01280" name="l01280"></a><span class="lineno"> 1280</span>                           <a class="code hl_struct" href="structrgw__bucket__sync__pipe.html">rgw_bucket_sync_pipe</a>&amp; _sync_pipe, <a class="code hl_struct" href="structrgw__obj__key.html">rgw_obj_key</a>&amp; _key, <span class="keyword">const</span> ceph::real_time&amp; _mtime,</div>
<div class="line"><a id="l01281" name="l01281"></a><span class="lineno"> 1281</span>                           <a class="code hl_enumeration" href="namespacergw_1_1notify.html#a11587407d1aff95c9cb4a10979ba813b">rgw::notify::EventType</a> _event_type) : <a class="code hl_class" href="class_r_g_w_coroutine.html">RGWCoroutine</a>(_sc-&gt;<a class="code hl_variable" href="class_r_g_w_coroutine.html#a887e803a293aff88fd8d60003a73e50a">cct</a>),</div>
<div class="line"><a id="l01282" name="l01282"></a><span class="lineno"> 1282</span>                                                             <a class="code hl_variable" href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#ae5616fd50a7cb8de961328df0e1b4812">sc</a>(_sc),</div>
<div class="line"><a id="l01283" name="l01283"></a><span class="lineno"> 1283</span>                                                             <a class="code hl_variable" href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#aceaab4f3a77f297d1fa181338be0eb8d">env</a>(_env),</div>
<div class="line"><a id="l01284" name="l01284"></a><span class="lineno"> 1284</span>                                                             <a class="code hl_variable" href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#ac20339032c0aea537caf19095c3c7de1">owner</a>(_sync_pipe.dest_bucket_info.<a class="code hl_variable" href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#ac20339032c0aea537caf19095c3c7de1">owner</a>),</div>
<div class="line"><a id="l01285" name="l01285"></a><span class="lineno"> 1285</span>                                                             <a class="code hl_variable" href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#a59ce6cea55f603205011b51ada4b9c14">bucket</a>(_sync_pipe.dest_bucket_info.<a class="code hl_variable" href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#a59ce6cea55f603205011b51ada4b9c14">bucket</a>),</div>
<div class="line"><a id="l01286" name="l01286"></a><span class="lineno"> 1286</span>                                                             <a class="code hl_variable" href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#ab8dee2bc66d6e43328f7d35a105309fc">key</a>(_key),</div>
<div class="line"><a id="l01287" name="l01287"></a><span class="lineno"> 1287</span>                                                             <a class="code hl_variable" href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#ac8954b15065d9868090bc0d9ca757440">mtime</a>(_mtime), <a class="code hl_variable" href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#a47e951e4b30a875432fcf9571c18a02e">event_type</a>(_event_type) {}</div>
</div>
<div class="foldopen" id="foldopen01288" data-start="{" data-end="}">
<div class="line"><a id="l01288" name="l01288"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#a294323e7573ea73747570b2eda958ca3"> 1288</a></span>  <span class="keywordtype">int</span> <a class="code hl_function" href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#a294323e7573ea73747570b2eda958ca3">operate</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>)<span class="keyword"> override </span>{</div>
<div class="line"><a id="l01289" name="l01289"></a><span class="lineno"> 1289</span>    reenter(<span class="keyword">this</span>) {</div>
<div class="line"><a id="l01290" name="l01290"></a><span class="lineno"> 1290</span>      ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 20) &lt;&lt; <span class="stringliteral">&quot;: remove remote obj: z=&quot;</span> &lt;&lt; <a class="code hl_variable" href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#ae5616fd50a7cb8de961328df0e1b4812">sc</a>-&gt;<a class="code hl_variable" href="struct_r_g_w_data_sync_ctx.html#aaa4f4a845ebb475fbdfa87c5df786afb">source_zone</a></div>
<div class="line"><a id="l01291" name="l01291"></a><span class="lineno"> 1291</span>                               &lt;&lt; <span class="stringliteral">&quot; b=&quot;</span> &lt;&lt; <a class="code hl_variable" href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#a59ce6cea55f603205011b51ada4b9c14">bucket</a> &lt;&lt; <span class="stringliteral">&quot; k=&quot;</span> &lt;&lt; <a class="code hl_variable" href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#ab8dee2bc66d6e43328f7d35a105309fc">key</a> &lt;&lt; <span class="stringliteral">&quot; mtime=&quot;</span> &lt;&lt; <a class="code hl_variable" href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#ac8954b15065d9868090bc0d9ca757440">mtime</a> &lt;&lt; dendl;</div>
<div class="line"><a id="l01292" name="l01292"></a><span class="lineno"> 1292</span>      yield <a class="code hl_function" href="class_r_g_w_coroutine.html#a60c1d6187851953e8a5e1dbc97f69bbd">call</a>(<span class="keyword">new</span> <a class="code hl_class" href="class_r_g_w_p_s_find_bucket_topics_c_r.html">RGWPSFindBucketTopicsCR</a>(<a class="code hl_variable" href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#ae5616fd50a7cb8de961328df0e1b4812">sc</a>, <a class="code hl_variable" href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#aceaab4f3a77f297d1fa181338be0eb8d">env</a>, <a class="code hl_variable" href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#ac20339032c0aea537caf19095c3c7de1">owner</a>, <a class="code hl_variable" href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#a59ce6cea55f603205011b51ada4b9c14">bucket</a>, <a class="code hl_variable" href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#ab8dee2bc66d6e43328f7d35a105309fc">key</a>, <a class="code hl_variable" href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#a47e951e4b30a875432fcf9571c18a02e">event_type</a>, &amp;<a class="code hl_variable" href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#a9f9e7bdbf3b41c110b5c38606edb2e93">topics</a>));</div>
<div class="line"><a id="l01293" name="l01293"></a><span class="lineno"> 1293</span>      <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_r_g_w_coroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a> &lt; 0) {</div>
<div class="line"><a id="l01294" name="l01294"></a><span class="lineno"> 1294</span>        ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 1) &lt;&lt; <span class="stringliteral">&quot;ERROR: RGWPSFindBucketTopicsCR returned ret=&quot;</span> &lt;&lt; <a class="code hl_variable" href="class_r_g_w_coroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a> &lt;&lt; dendl;</div>
<div class="line"><a id="l01295" name="l01295"></a><span class="lineno"> 1295</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="class_r_g_w_coroutine.html#a576a8ced300f52809ad477f0082e3bcd">set_cr_error</a>(<a class="code hl_variable" href="class_r_g_w_coroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a>);</div>
<div class="line"><a id="l01296" name="l01296"></a><span class="lineno"> 1296</span>      }</div>
<div class="line"><a id="l01297" name="l01297"></a><span class="lineno"> 1297</span>      <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#a9f9e7bdbf3b41c110b5c38606edb2e93">topics</a>-&gt;empty()) {</div>
<div class="line"><a id="l01298" name="l01298"></a><span class="lineno"> 1298</span>        ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 20) &lt;&lt; <span class="stringliteral">&quot;no topics found for &quot;</span> &lt;&lt; <a class="code hl_variable" href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#a59ce6cea55f603205011b51ada4b9c14">bucket</a> &lt;&lt; <span class="stringliteral">&quot;/&quot;</span> &lt;&lt; <a class="code hl_variable" href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#ab8dee2bc66d6e43328f7d35a105309fc">key</a> &lt;&lt; dendl;</div>
<div class="line"><a id="l01299" name="l01299"></a><span class="lineno"> 1299</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="class_r_g_w_coroutine.html#a15bce10b8fbd959412a9473b03f0dd82">set_cr_done</a>();</div>
<div class="line"><a id="l01300" name="l01300"></a><span class="lineno"> 1300</span>      }</div>
<div class="line"><a id="l01301" name="l01301"></a><span class="lineno"> 1301</span>      <span class="comment">// at this point we don&#39;t know whether we need the ceph event or S3 event</span></div>
<div class="line"><a id="l01302" name="l01302"></a><span class="lineno"> 1302</span>      <span class="comment">// this is why both are created here, once we have information about the </span></div>
<div class="line"><a id="l01303" name="l01303"></a><span class="lineno"> 1303</span>      <span class="comment">// subscription, we will store/push only the relevant ones</span></div>
<div class="line"><a id="l01304" name="l01304"></a><span class="lineno"> 1304</span>      <a class="code hl_function" href="rgw__sync__module__pubsub_8cc.html#a680685668a648b33b677265fc07be8ae">make_event_ref</a>(<a class="code hl_variable" href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#ae5616fd50a7cb8de961328df0e1b4812">sc</a>-&gt;<a class="code hl_variable" href="struct_r_g_w_data_sync_ctx.html#ac3f462ed79fd418c4fede613a2700072">cct</a>,</div>
<div class="line"><a id="l01305" name="l01305"></a><span class="lineno"> 1305</span>                     <a class="code hl_variable" href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#a59ce6cea55f603205011b51ada4b9c14">bucket</a>, <a class="code hl_variable" href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#ab8dee2bc66d6e43328f7d35a105309fc">key</a>,</div>
<div class="line"><a id="l01306" name="l01306"></a><span class="lineno"> 1306</span>                     <a class="code hl_variable" href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#ac8954b15065d9868090bc0d9ca757440">mtime</a>, <span class="keyword">nullptr</span>,</div>
<div class="line"><a id="l01307" name="l01307"></a><span class="lineno"> 1307</span>                     <a class="code hl_variable" href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#a47e951e4b30a875432fcf9571c18a02e">event_type</a>, &amp;<a class="code hl_variable" href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#a496fe00339ebaec7c491831d51c73648">event</a>);</div>
<div class="line"><a id="l01308" name="l01308"></a><span class="lineno"> 1308</span>      <a class="code hl_function" href="rgw__sync__module__pubsub_8cc.html#a8b3691422cb11d18dc41d77815abbb6b">make_s3_event_ref</a>(<a class="code hl_variable" href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#ae5616fd50a7cb8de961328df0e1b4812">sc</a>-&gt;<a class="code hl_variable" href="struct_r_g_w_data_sync_ctx.html#ac3f462ed79fd418c4fede613a2700072">cct</a>,</div>
<div class="line"><a id="l01309" name="l01309"></a><span class="lineno"> 1309</span>                     <a class="code hl_variable" href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#a59ce6cea55f603205011b51ada4b9c14">bucket</a>, <a class="code hl_variable" href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#ac20339032c0aea537caf19095c3c7de1">owner</a>, <a class="code hl_variable" href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#ab8dee2bc66d6e43328f7d35a105309fc">key</a>,</div>
<div class="line"><a id="l01310" name="l01310"></a><span class="lineno"> 1310</span>                     <a class="code hl_variable" href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#ac8954b15065d9868090bc0d9ca757440">mtime</a>, <span class="keyword">nullptr</span>,</div>
<div class="line"><a id="l01311" name="l01311"></a><span class="lineno"> 1311</span>                     <a class="code hl_variable" href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#a47e951e4b30a875432fcf9571c18a02e">event_type</a>, &amp;<a class="code hl_variable" href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#a471aa976e94d8cf8800952126ebb4b6d">s3_event</a>);</div>
<div class="line"><a id="l01312" name="l01312"></a><span class="lineno"> 1312</span>      yield <a class="code hl_function" href="class_r_g_w_coroutine.html#a60c1d6187851953e8a5e1dbc97f69bbd">call</a>(<span class="keyword">new</span> <a class="code hl_class" href="class_r_g_w_p_s_handle_obj_event_c_r.html">RGWPSHandleObjEventCR</a>(<a class="code hl_variable" href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#ae5616fd50a7cb8de961328df0e1b4812">sc</a>, <a class="code hl_variable" href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#aceaab4f3a77f297d1fa181338be0eb8d">env</a>, <a class="code hl_variable" href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#ac20339032c0aea537caf19095c3c7de1">owner</a>, <a class="code hl_variable" href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#a496fe00339ebaec7c491831d51c73648">event</a>, <a class="code hl_variable" href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#a471aa976e94d8cf8800952126ebb4b6d">s3_event</a>, <a class="code hl_variable" href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#a9f9e7bdbf3b41c110b5c38606edb2e93">topics</a>));</div>
<div class="line"><a id="l01313" name="l01313"></a><span class="lineno"> 1313</span>      <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_r_g_w_coroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a> &lt; 0) {</div>
<div class="line"><a id="l01314" name="l01314"></a><span class="lineno"> 1314</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="class_r_g_w_coroutine.html#a576a8ced300f52809ad477f0082e3bcd">set_cr_error</a>(<a class="code hl_variable" href="class_r_g_w_coroutine.html#afe652dd81659a23225be50fb0a4a7edb">retcode</a>);</div>
<div class="line"><a id="l01315" name="l01315"></a><span class="lineno"> 1315</span>      }</div>
<div class="line"><a id="l01316" name="l01316"></a><span class="lineno"> 1316</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="class_r_g_w_coroutine.html#a15bce10b8fbd959412a9473b03f0dd82">set_cr_done</a>();</div>
<div class="line"><a id="l01317" name="l01317"></a><span class="lineno"> 1317</span>    }</div>
<div class="line"><a id="l01318" name="l01318"></a><span class="lineno"> 1318</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l01319" name="l01319"></a><span class="lineno"> 1319</span>  }</div>
</div>
<div class="line"><a id="l01320" name="l01320"></a><span class="lineno"> 1320</span> </div>
<div class="line"><a id="l01321" name="l01321"></a><span class="lineno"> 1321</span>};</div>
</div>
<div class="line"><a id="l01322" name="l01322"></a><span class="lineno"> 1322</span> </div>
<div class="foldopen" id="foldopen01323" data-start="{" data-end="};">
<div class="line"><a id="l01323" name="l01323"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_data_sync_module.html"> 1323</a></span><span class="keyword">class </span><a class="code hl_class" href="class_r_g_w_p_s_data_sync_module.html">RGWPSDataSyncModule</a> : <span class="keyword">public</span> <a class="code hl_class" href="class_r_g_w_data_sync_module.html">RGWDataSyncModule</a> {</div>
<div class="line"><a id="l01324" name="l01324"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_data_sync_module.html#af4fc65706a99bd24c8913541da178569"> 1324</a></span>  <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#a8cf75fd83a22c03e4eeae0932b31752a">PSEnvRef</a> <a class="code hl_variable" href="class_r_g_w_p_s_data_sync_module.html#af4fc65706a99bd24c8913541da178569">env</a>;</div>
<div class="line"><a id="l01325" name="l01325"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_data_sync_module.html#aac3b731945a5dc1ab6160b10f24e685a"> 1325</a></span>  <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#ae3f05c1346843738a4e4afdd42062743">PSConfigRef</a>&amp; <a class="code hl_variable" href="class_r_g_w_p_s_data_sync_module.html#aac3b731945a5dc1ab6160b10f24e685a">conf</a>;</div>
<div class="line"><a id="l01326" name="l01326"></a><span class="lineno"> 1326</span> </div>
<div class="line"><a id="l01327" name="l01327"></a><span class="lineno"> 1327</span><span class="keyword">public</span>:</div>
<div class="foldopen" id="foldopen01328" data-start="{" data-end="}">
<div class="line"><a id="l01328" name="l01328"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_data_sync_module.html#a09050550226b91071a21f6753d86a23b"> 1328</a></span>  <a class="code hl_function" href="class_r_g_w_p_s_data_sync_module.html#a09050550226b91071a21f6753d86a23b">RGWPSDataSyncModule</a>(CephContext *<a class="code hl_variable" href="cls__fifo__legacy_8cc.html#aa76801f7597f40e158b5f38b2e6466c5">cct</a>, <span class="keyword">const</span> JSONFormattable&amp; config) : <a class="code hl_variable" href="class_r_g_w_p_s_data_sync_module.html#af4fc65706a99bd24c8913541da178569">env</a>(<a class="code hl_namespace" href="namespacestd.html">std</a>::make_shared&lt;<a class="code hl_struct" href="struct_p_s_env.html">PSEnv</a>&gt;()), <a class="code hl_variable" href="class_r_g_w_p_s_data_sync_module.html#aac3b731945a5dc1ab6160b10f24e685a">conf</a>(<a class="code hl_variable" href="class_r_g_w_p_s_data_sync_module.html#af4fc65706a99bd24c8913541da178569">env</a>-&gt;<a class="code hl_variable" href="class_r_g_w_p_s_data_sync_module.html#aac3b731945a5dc1ab6160b10f24e685a">conf</a>) {</div>
<div class="line"><a id="l01329" name="l01329"></a><span class="lineno"> 1329</span>    <a class="code hl_variable" href="class_r_g_w_p_s_data_sync_module.html#af4fc65706a99bd24c8913541da178569">env</a>-&gt;init(<a class="code hl_variable" href="cls__fifo__legacy_8cc.html#aa76801f7597f40e158b5f38b2e6466c5">cct</a>, config);</div>
<div class="line"><a id="l01330" name="l01330"></a><span class="lineno"> 1330</span>  }</div>
</div>
<div class="line"><a id="l01331" name="l01331"></a><span class="lineno"> 1331</span> </div>
<div class="line"><a id="l01332" name="l01332"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_data_sync_module.html#a4a6c6aa52683f56d8863740d9ffe4e47"> 1332</a></span>  <a class="code hl_function" href="class_r_g_w_p_s_data_sync_module.html#a4a6c6aa52683f56d8863740d9ffe4e47">~RGWPSDataSyncModule</a>()<span class="keyword"> override </span>{}</div>
<div class="line"><a id="l01333" name="l01333"></a><span class="lineno"> 1333</span> </div>
<div class="foldopen" id="foldopen01334" data-start="{" data-end="}">
<div class="line"><a id="l01334" name="l01334"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_data_sync_module.html#aa27481f832415f14c1889609ce26c9ce"> 1334</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="class_r_g_w_p_s_data_sync_module.html#aa27481f832415f14c1889609ce26c9ce">init</a>(<a class="code hl_struct" href="struct_r_g_w_data_sync_ctx.html">RGWDataSyncCtx</a> *sc, uint64_t instance_id)<span class="keyword"> override </span>{</div>
<div class="line"><a id="l01335" name="l01335"></a><span class="lineno"> 1335</span>    <span class="keyword">auto</span> sync_env = sc-&gt;<a class="code hl_variable" href="struct_r_g_w_data_sync_ctx.html#aa591262f323062da9bcb164d1e6a1057">env</a>;</div>
<div class="line"><a id="l01336" name="l01336"></a><span class="lineno"> 1336</span>    <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#a3d66fdaaedde99f94c039dc9c8d47221">PSManagerRef</a> mgr = <a class="code hl_function" href="class_p_s_manager.html#a9f753d83e8dfe9c301b5df6bf4aa5a38">PSManager::get_shared</a>(sc, <a class="code hl_variable" href="class_r_g_w_p_s_data_sync_module.html#af4fc65706a99bd24c8913541da178569">env</a>);</div>
<div class="line"><a id="l01337" name="l01337"></a><span class="lineno"> 1337</span>    <a class="code hl_variable" href="class_r_g_w_p_s_data_sync_module.html#af4fc65706a99bd24c8913541da178569">env</a>-&gt;init_instance(sync_env-&gt;svc-&gt;zone-&gt;get_realm(), instance_id, mgr);</div>
<div class="line"><a id="l01338" name="l01338"></a><span class="lineno"> 1338</span>  }</div>
</div>
<div class="line"><a id="l01339" name="l01339"></a><span class="lineno"> 1339</span> </div>
<div class="foldopen" id="foldopen01340" data-start="{" data-end="}">
<div class="line"><a id="l01340" name="l01340"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_data_sync_module.html#aab4410b0a8a1dc56c60a811e1d40274d"> 1340</a></span>  <a class="code hl_class" href="class_r_g_w_coroutine.html">RGWCoroutine</a> *<a class="code hl_function" href="class_r_g_w_p_s_data_sync_module.html#aab4410b0a8a1dc56c60a811e1d40274d">start_sync</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_struct" href="struct_r_g_w_data_sync_ctx.html">RGWDataSyncCtx</a> *sc)<span class="keyword"> override </span>{</div>
<div class="line"><a id="l01341" name="l01341"></a><span class="lineno"> 1341</span>    ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 5) &lt;&lt; <a class="code hl_variable" href="class_r_g_w_p_s_data_sync_module.html#aac3b731945a5dc1ab6160b10f24e685a">conf</a>-&gt;id &lt;&lt; <span class="stringliteral">&quot;: start&quot;</span> &lt;&lt; dendl;</div>
<div class="line"><a id="l01342" name="l01342"></a><span class="lineno"> 1342</span>    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code hl_class" href="class_r_g_w_p_s_init_env_c_b_c_r.html">RGWPSInitEnvCBCR</a>(sc, <a class="code hl_variable" href="class_r_g_w_p_s_data_sync_module.html#af4fc65706a99bd24c8913541da178569">env</a>);</div>
<div class="line"><a id="l01343" name="l01343"></a><span class="lineno"> 1343</span>  }</div>
</div>
<div class="line"><a id="l01344" name="l01344"></a><span class="lineno"> 1344</span> </div>
<div class="foldopen" id="foldopen01345" data-start="{" data-end="}">
<div class="line"><a id="l01345" name="l01345"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_data_sync_module.html#a5ebbcf466ba1f89044ea3aa9dac2dc5c"> 1345</a></span>  <a class="code hl_class" href="class_r_g_w_coroutine.html">RGWCoroutine</a> *<a class="code hl_function" href="class_r_g_w_p_s_data_sync_module.html#a5ebbcf466ba1f89044ea3aa9dac2dc5c">sync_object</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_struct" href="struct_r_g_w_data_sync_ctx.html">RGWDataSyncCtx</a> *sc, <a class="code hl_struct" href="structrgw__bucket__sync__pipe.html">rgw_bucket_sync_pipe</a>&amp; sync_pipe, </div>
<div class="line"><a id="l01346" name="l01346"></a><span class="lineno"> 1346</span>      <a class="code hl_struct" href="structrgw__obj__key.html">rgw_obj_key</a>&amp; key, std::optional&lt;uint64_t&gt; versioned_epoch, rgw_zone_set *zones_trace)<span class="keyword"> override </span>{</div>
<div class="line"><a id="l01347" name="l01347"></a><span class="lineno"> 1347</span>    ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 10) &lt;&lt; <a class="code hl_variable" href="class_r_g_w_p_s_data_sync_module.html#aac3b731945a5dc1ab6160b10f24e685a">conf</a>-&gt;id &lt;&lt; <span class="stringliteral">&quot;: sync_object: b=&quot;</span> &lt;&lt; sync_pipe &lt;&lt; </div>
<div class="line"><a id="l01348" name="l01348"></a><span class="lineno"> 1348</span>          <span class="stringliteral">&quot; k=&quot;</span> &lt;&lt; key &lt;&lt; <span class="stringliteral">&quot; versioned_epoch=&quot;</span> &lt;&lt; versioned_epoch.value_or(0) &lt;&lt; dendl;</div>
<div class="line"><a id="l01349" name="l01349"></a><span class="lineno"> 1349</span>    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code hl_class" href="class_r_g_w_p_s_handle_obj_create_c_r.html">RGWPSHandleObjCreateCR</a>(sc, sync_pipe, key, <a class="code hl_variable" href="class_r_g_w_p_s_data_sync_module.html#af4fc65706a99bd24c8913541da178569">env</a>, versioned_epoch);</div>
<div class="line"><a id="l01350" name="l01350"></a><span class="lineno"> 1350</span>  }</div>
</div>
<div class="line"><a id="l01351" name="l01351"></a><span class="lineno"> 1351</span> </div>
<div class="foldopen" id="foldopen01352" data-start="{" data-end="}">
<div class="line"><a id="l01352" name="l01352"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_data_sync_module.html#addd274c25358453e22ff6daa9245f474"> 1352</a></span>  <a class="code hl_class" href="class_r_g_w_coroutine.html">RGWCoroutine</a> *<a class="code hl_function" href="class_r_g_w_p_s_data_sync_module.html#addd274c25358453e22ff6daa9245f474">remove_object</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_struct" href="struct_r_g_w_data_sync_ctx.html">RGWDataSyncCtx</a> *sc, <a class="code hl_struct" href="structrgw__bucket__sync__pipe.html">rgw_bucket_sync_pipe</a>&amp; sync_pipe, </div>
<div class="line"><a id="l01353" name="l01353"></a><span class="lineno"> 1353</span>      <a class="code hl_struct" href="structrgw__obj__key.html">rgw_obj_key</a>&amp; key, real_time&amp; mtime, <span class="keywordtype">bool</span> versioned, uint64_t versioned_epoch, rgw_zone_set *zones_trace)<span class="keyword"> override </span>{</div>
<div class="line"><a id="l01354" name="l01354"></a><span class="lineno"> 1354</span>    ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 10) &lt;&lt; <a class="code hl_variable" href="class_r_g_w_p_s_data_sync_module.html#aac3b731945a5dc1ab6160b10f24e685a">conf</a>-&gt;id &lt;&lt; <span class="stringliteral">&quot;: rm_object: b=&quot;</span> &lt;&lt; sync_pipe &lt;&lt; </div>
<div class="line"><a id="l01355" name="l01355"></a><span class="lineno"> 1355</span>          <span class="stringliteral">&quot; k=&quot;</span> &lt;&lt; key &lt;&lt; <span class="stringliteral">&quot; mtime=&quot;</span> &lt;&lt; mtime &lt;&lt; <span class="stringliteral">&quot; versioned=&quot;</span> &lt;&lt; versioned &lt;&lt; <span class="stringliteral">&quot; versioned_epoch=&quot;</span> &lt;&lt; versioned_epoch &lt;&lt; dendl;</div>
<div class="line"><a id="l01356" name="l01356"></a><span class="lineno"> 1356</span>    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code hl_class" href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html">RGWPSGenericObjEventCBCR</a>(sc, <a class="code hl_variable" href="class_r_g_w_p_s_data_sync_module.html#af4fc65706a99bd24c8913541da178569">env</a>, sync_pipe, key, mtime, <a class="code hl_enumvalue" href="namespacergw_1_1notify.html#a11587407d1aff95c9cb4a10979ba813baec295ba7b04d1a20faf9338e9b217fc5">rgw::notify::ObjectRemovedDelete</a>);</div>
<div class="line"><a id="l01357" name="l01357"></a><span class="lineno"> 1357</span>  }</div>
</div>
<div class="line"><a id="l01358" name="l01358"></a><span class="lineno"> 1358</span> </div>
<div class="foldopen" id="foldopen01359" data-start="{" data-end="}">
<div class="line"><a id="l01359" name="l01359"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_data_sync_module.html#a2620948dfc987dfcdf4a67fb2716f2d2"> 1359</a></span>  <a class="code hl_class" href="class_r_g_w_coroutine.html">RGWCoroutine</a> *<a class="code hl_function" href="class_r_g_w_p_s_data_sync_module.html#a2620948dfc987dfcdf4a67fb2716f2d2">create_delete_marker</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_struct" href="struct_r_g_w_data_sync_ctx.html">RGWDataSyncCtx</a> *sc, <a class="code hl_struct" href="structrgw__bucket__sync__pipe.html">rgw_bucket_sync_pipe</a>&amp; sync_pipe, </div>
<div class="line"><a id="l01360" name="l01360"></a><span class="lineno"> 1360</span>      <a class="code hl_struct" href="structrgw__obj__key.html">rgw_obj_key</a>&amp; key, real_time&amp; mtime, <a class="code hl_struct" href="structrgw__bucket__entry__owner.html">rgw_bucket_entry_owner</a>&amp; owner, <span class="keywordtype">bool</span> versioned, uint64_t versioned_epoch, rgw_zone_set *zones_trace)<span class="keyword"> override </span>{</div>
<div class="line"><a id="l01361" name="l01361"></a><span class="lineno"> 1361</span>    ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 10) &lt;&lt; <a class="code hl_variable" href="class_r_g_w_p_s_data_sync_module.html#aac3b731945a5dc1ab6160b10f24e685a">conf</a>-&gt;id &lt;&lt; <span class="stringliteral">&quot;: create_delete_marker: b=&quot;</span> &lt;&lt; sync_pipe &lt;&lt; </div>
<div class="line"><a id="l01362" name="l01362"></a><span class="lineno"> 1362</span>          <span class="stringliteral">&quot; k=&quot;</span> &lt;&lt; key &lt;&lt; <span class="stringliteral">&quot; mtime=&quot;</span> &lt;&lt; mtime &lt;&lt; <span class="stringliteral">&quot; versioned=&quot;</span> &lt;&lt; versioned &lt;&lt; <span class="stringliteral">&quot; versioned_epoch=&quot;</span> &lt;&lt; versioned_epoch &lt;&lt; dendl;</div>
<div class="line"><a id="l01363" name="l01363"></a><span class="lineno"> 1363</span>    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code hl_class" href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html">RGWPSGenericObjEventCBCR</a>(sc, <a class="code hl_variable" href="class_r_g_w_p_s_data_sync_module.html#af4fc65706a99bd24c8913541da178569">env</a>, sync_pipe, key, mtime, <a class="code hl_enumvalue" href="namespacergw_1_1notify.html#a11587407d1aff95c9cb4a10979ba813bae65163a7367caa28e2d82e0cf8850088">rgw::notify::ObjectRemovedDeleteMarkerCreated</a>);</div>
<div class="line"><a id="l01364" name="l01364"></a><span class="lineno"> 1364</span>  }</div>
</div>
<div class="line"><a id="l01365" name="l01365"></a><span class="lineno"> 1365</span> </div>
<div class="line"><a id="l01366" name="l01366"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_data_sync_module.html#ab5389b5bb6bd063f68c98240ab7c6024"> 1366</a></span>  <a class="code hl_typedef" href="rgw__sync__module__pubsub_8cc.html#ae3f05c1346843738a4e4afdd42062743">PSConfigRef</a>&amp; <a class="code hl_function" href="class_r_g_w_p_s_data_sync_module.html#ab5389b5bb6bd063f68c98240ab7c6024">get_conf</a>() { <span class="keywordflow">return</span> <a class="code hl_variable" href="class_r_g_w_p_s_data_sync_module.html#aac3b731945a5dc1ab6160b10f24e685a">conf</a>; }</div>
<div class="line"><a id="l01367" name="l01367"></a><span class="lineno"> 1367</span>};</div>
</div>
<div class="line"><a id="l01368" name="l01368"></a><span class="lineno"> 1368</span> </div>
<div class="foldopen" id="foldopen01369" data-start="{" data-end="}">
<div class="line"><a id="l01369" name="l01369"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_sync_module_instance.html#ac1aa3dac184a028bb0d626024183f26d"> 1369</a></span><a class="code hl_function" href="class_r_g_w_p_s_sync_module_instance.html#ac1aa3dac184a028bb0d626024183f26d">RGWPSSyncModuleInstance::RGWPSSyncModuleInstance</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, CephContext *<a class="code hl_variable" href="cls__fifo__legacy_8cc.html#aa76801f7597f40e158b5f38b2e6466c5">cct</a>, <span class="keyword">const</span> JSONFormattable&amp; config)</div>
<div class="line"><a id="l01370" name="l01370"></a><span class="lineno"> 1370</span>{</div>
<div class="line"><a id="l01371" name="l01371"></a><span class="lineno"> 1371</span>  <a class="code hl_variable" href="class_r_g_w_p_s_sync_module_instance.html#a9c8b809cb670ca51913146eec6dd85e2">data_handler</a> = std::unique_ptr&lt;RGWPSDataSyncModule&gt;(<span class="keyword">new</span> <a class="code hl_class" href="class_r_g_w_p_s_data_sync_module.html">RGWPSDataSyncModule</a>(<a class="code hl_variable" href="cls__fifo__legacy_8cc.html#aa76801f7597f40e158b5f38b2e6466c5">cct</a>, config));</div>
<div class="line"><a id="l01372" name="l01372"></a><span class="lineno"> 1372</span>  <span class="keyword">const</span> std::string jconf = <a class="code hl_function" href="rgw__sync__module__pubsub_8cc.html#a95cd156406f6d627131b4faa761e7ae6">json_str</a>(<span class="stringliteral">&quot;conf&quot;</span>, *<a class="code hl_variable" href="class_r_g_w_p_s_sync_module_instance.html#a9c8b809cb670ca51913146eec6dd85e2">data_handler</a>-&gt;get_conf());</div>
<div class="line"><a id="l01373" name="l01373"></a><span class="lineno"> 1373</span>  JSONParser p;</div>
<div class="line"><a id="l01374" name="l01374"></a><span class="lineno"> 1374</span>  <span class="keywordflow">if</span> (!p.parse(jconf.c_str(), jconf.size())) {</div>
<div class="line"><a id="l01375" name="l01375"></a><span class="lineno"> 1375</span>    ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 1) &lt;&lt; <span class="stringliteral">&quot;ERROR: failed to parse sync module effective conf: &quot;</span> &lt;&lt; jconf &lt;&lt; dendl;</div>
<div class="line"><a id="l01376" name="l01376"></a><span class="lineno"> 1376</span>    <a class="code hl_variable" href="class_r_g_w_p_s_sync_module_instance.html#afe7d7710adea03771bb7c033acbcb9d7">effective_conf</a> = config;</div>
<div class="line"><a id="l01377" name="l01377"></a><span class="lineno"> 1377</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01378" name="l01378"></a><span class="lineno"> 1378</span>    <a class="code hl_variable" href="class_r_g_w_p_s_sync_module_instance.html#afe7d7710adea03771bb7c033acbcb9d7">effective_conf</a>.decode_json(&amp;p);</div>
<div class="line"><a id="l01379" name="l01379"></a><span class="lineno"> 1379</span>  }</div>
<div class="line"><a id="l01380" name="l01380"></a><span class="lineno"> 1380</span>}</div>
</div>
<div class="line"><a id="l01381" name="l01381"></a><span class="lineno"> 1381</span> </div>
<div class="foldopen" id="foldopen01382" data-start="{" data-end="}">
<div class="line"><a id="l01382" name="l01382"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_sync_module_instance.html#aa8506bb372512f986189a095e808aa2c"> 1382</a></span><a class="code hl_class" href="class_r_g_w_data_sync_module.html">RGWDataSyncModule</a> *<a class="code hl_function" href="class_r_g_w_p_s_sync_module_instance.html#aa8506bb372512f986189a095e808aa2c">RGWPSSyncModuleInstance::get_data_handler</a>()</div>
<div class="line"><a id="l01383" name="l01383"></a><span class="lineno"> 1383</span>{</div>
<div class="line"><a id="l01384" name="l01384"></a><span class="lineno"> 1384</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="class_r_g_w_p_s_sync_module_instance.html#a9c8b809cb670ca51913146eec6dd85e2">data_handler</a>.get();</div>
<div class="line"><a id="l01385" name="l01385"></a><span class="lineno"> 1385</span>}</div>
</div>
<div class="line"><a id="l01386" name="l01386"></a><span class="lineno"> 1386</span> </div>
<div class="foldopen" id="foldopen01387" data-start="{" data-end="}">
<div class="line"><a id="l01387" name="l01387"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_sync_module_instance.html#a25bb4611b5f673aed7ea11f9a8aee289"> 1387</a></span><a class="code hl_class" href="class_r_g_w_r_e_s_t_mgr.html">RGWRESTMgr</a> *<a class="code hl_function" href="class_r_g_w_p_s_sync_module_instance.html#a25bb4611b5f673aed7ea11f9a8aee289">RGWPSSyncModuleInstance::get_rest_filter</a>(<span class="keywordtype">int</span> dialect, <a class="code hl_class" href="class_r_g_w_r_e_s_t_mgr.html">RGWRESTMgr</a> *orig) {</div>
<div class="line"><a id="l01388" name="l01388"></a><span class="lineno"> 1388</span>  <span class="keywordflow">if</span> (dialect != <a class="code hl_define" href="rgw__common_8h.html#a5a1a44fe2de69e33f5ccfbb3a659c82a">RGW_REST_S3</a>) {</div>
<div class="line"><a id="l01389" name="l01389"></a><span class="lineno"> 1389</span>    <span class="keywordflow">return</span> orig;</div>
<div class="line"><a id="l01390" name="l01390"></a><span class="lineno"> 1390</span>  }</div>
<div class="line"><a id="l01391" name="l01391"></a><span class="lineno"> 1391</span>  <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code hl_class" href="class_r_g_w_r_e_s_t_mgr___pub_sub.html">RGWRESTMgr_PubSub</a>();</div>
<div class="line"><a id="l01392" name="l01392"></a><span class="lineno"> 1392</span>}</div>
</div>
<div class="line"><a id="l01393" name="l01393"></a><span class="lineno"> 1393</span> </div>
<div class="foldopen" id="foldopen01394" data-start="{" data-end="}">
<div class="line"><a id="l01394" name="l01394"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_sync_module_instance.html#ab3bb1e4cbb8234bdf176c21dc6ada5c1"> 1394</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="class_r_g_w_p_s_sync_module_instance.html#ab3bb1e4cbb8234bdf176c21dc6ada5c1">RGWPSSyncModuleInstance::should_full_sync</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a id="l01395" name="l01395"></a><span class="lineno"> 1395</span>   <span class="keywordflow">return</span> <a class="code hl_variable" href="class_r_g_w_p_s_sync_module_instance.html#a9c8b809cb670ca51913146eec6dd85e2">data_handler</a>-&gt;get_conf()-&gt;start_with_full_sync;</div>
<div class="line"><a id="l01396" name="l01396"></a><span class="lineno"> 1396</span>}</div>
</div>
<div class="line"><a id="l01397" name="l01397"></a><span class="lineno"> 1397</span> </div>
<div class="foldopen" id="foldopen01398" data-start="{" data-end="}">
<div class="line"><a id="l01398" name="l01398"></a><span class="lineno"><a class="line" href="class_r_g_w_p_s_sync_module.html#a596ed4a3616ca1c519717e6fd1e9b405"> 1398</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="class_r_g_w_p_s_sync_module.html#a596ed4a3616ca1c519717e6fd1e9b405">RGWPSSyncModule::create_instance</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, CephContext *<a class="code hl_variable" href="cls__fifo__legacy_8cc.html#aa76801f7597f40e158b5f38b2e6466c5">cct</a>, <span class="keyword">const</span> JSONFormattable&amp; config, <a class="code hl_typedef" href="rgw__sal_8h.html#a2a039ebea62bea24dff4df3905db41df">RGWSyncModuleInstanceRef</a> *instance) {</div>
<div class="line"><a id="l01399" name="l01399"></a><span class="lineno"> 1399</span>  instance-&gt;reset(<span class="keyword">new</span> <a class="code hl_class" href="class_r_g_w_p_s_sync_module_instance.html">RGWPSSyncModuleInstance</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_variable" href="cls__fifo__legacy_8cc.html#aa76801f7597f40e158b5f38b2e6466c5">cct</a>, config));</div>
<div class="line"><a id="l01400" name="l01400"></a><span class="lineno"> 1400</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l01401" name="l01401"></a><span class="lineno"> 1401</span>}</div>
</div>
<div class="line"><a id="l01402" name="l01402"></a><span class="lineno"> 1402</span> </div>
<div class="line"><a id="l01403" name="l01403"></a><span class="lineno"> 1403</span> </div>
<div class="ttc" id="aclass_l_c_rule_html"><div class="ttname"><a href="class_l_c_rule.html">LCRule</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__lc_8h_source.html#l00215">rgw_lc.h:216</a></div></div>
<div class="ttc" id="aclass_l_c_rule_html_aaca162ef69c6f7e728fa918b2b588442"><div class="ttname"><a href="class_l_c_rule.html#aaca162ef69c6f7e728fa918b2b588442">LCRule::init_simple_days_rule</a></div><div class="ttdeci">void init_simple_days_rule(std::string_view _id, std::string_view _prefix, int num_days)</div><div class="ttdef"><b>Definition</b> <a href="rgw__lc_8cc_source.html#l00095">rgw_lc.cc:95</a></div></div>
<div class="ttc" id="aclass_p_s_event_html"><div class="ttname"><a href="class_p_s_event.html">PSEvent</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00318">rgw_sync_module_pubsub.cc:318</a></div></div>
<div class="ttc" id="aclass_p_s_event_html_a704ae8b1d791c16aef5be6aec9f02f6f"><div class="ttname"><a href="class_p_s_event.html#a704ae8b1d791c16aef5be6aec9f02f6f">PSEvent::encode_event</a></div><div class="ttdeci">void encode_event(bufferlist &amp;bl) const</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00328">rgw_sync_module_pubsub.cc:328</a></div></div>
<div class="ttc" id="aclass_p_s_event_html_ad05eab9d15f549ab8521ec4771eba38f"><div class="ttname"><a href="class_p_s_event.html#ad05eab9d15f549ab8521ec4771eba38f">PSEvent::id</a></div><div class="ttdeci">const string &amp; id() const</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00332">rgw_sync_module_pubsub.cc:332</a></div></div>
<div class="ttc" id="aclass_p_s_event_html_ae20bfb6cf34f8ca1a5cc7e68d035ba12"><div class="ttname"><a href="class_p_s_event.html#ae20bfb6cf34f8ca1a5cc7e68d035ba12">PSEvent::event</a></div><div class="ttdeci">const EventRef&lt; EventType &gt; event</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00319">rgw_sync_module_pubsub.cc:319</a></div></div>
<div class="ttc" id="aclass_p_s_event_html_aeb6397afbf705b874a4235e5390a1957"><div class="ttname"><a href="class_p_s_event.html#aeb6397afbf705b874a4235e5390a1957">PSEvent::PSEvent</a></div><div class="ttdeci">PSEvent(const EventRef&lt; EventType &gt; &amp;_event)</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00322">rgw_sync_module_pubsub.cc:322</a></div></div>
<div class="ttc" id="aclass_p_s_event_html_afabf8c753decc69b48189ee73e04629e"><div class="ttname"><a href="class_p_s_event.html#afabf8c753decc69b48189ee73e04629e">PSEvent::format</a></div><div class="ttdeci">void format(bufferlist *bl) const</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00324">rgw_sync_module_pubsub.cc:324</a></div></div>
<div class="ttc" id="aclass_p_s_manager_1_1_get_sub_c_r_html"><div class="ttname"><a href="class_p_s_manager_1_1_get_sub_c_r.html">PSManager::GetSubCR</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00740">rgw_sync_module_pubsub.cc:740</a></div></div>
<div class="ttc" id="aclass_p_s_manager_1_1_get_sub_c_r_html_a1d973de5e0017309a8c0054de34b9f25"><div class="ttname"><a href="class_p_s_manager_1_1_get_sub_c_r.html#a1d973de5e0017309a8c0054de34b9f25">PSManager::GetSubCR::~GetSubCR</a></div><div class="ttdeci">~GetSubCR()</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00767">rgw_sync_module_pubsub.cc:767</a></div></div>
<div class="ttc" id="aclass_p_s_manager_1_1_get_sub_c_r_html_a2dfe4b183106936c38f1ce797dd9bacf"><div class="ttname"><a href="class_p_s_manager_1_1_get_sub_c_r.html#a2dfe4b183106936c38f1ce797dd9bacf">PSManager::GetSubCR::sub_id</a></div><div class="ttdeci">string sub_id</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00746">rgw_sync_module_pubsub.cc:746</a></div></div>
<div class="ttc" id="aclass_p_s_manager_1_1_get_sub_c_r_html_a32f92da12578a563043fbd723f04280d"><div class="ttname"><a href="class_p_s_manager_1_1_get_sub_c_r.html#a32f92da12578a563043fbd723f04280d">PSManager::GetSubCR::conf</a></div><div class="ttdeci">PSConfigRef conf</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00749">rgw_sync_module_pubsub.cc:749</a></div></div>
<div class="ttc" id="aclass_p_s_manager_1_1_get_sub_c_r_html_a5c67d0e4828c5b1f26ae1d876bbe4e70"><div class="ttname"><a href="class_p_s_manager_1_1_get_sub_c_r.html#a5c67d0e4828c5b1f26ae1d876bbe4e70">PSManager::GetSubCR::sub_name</a></div><div class="ttdeci">string sub_name</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00745">rgw_sync_module_pubsub.cc:745</a></div></div>
<div class="ttc" id="aclass_p_s_manager_1_1_get_sub_c_r_html_a5f139a5a146f5bc350ffcf3f5c1bdfba"><div class="ttname"><a href="class_p_s_manager_1_1_get_sub_c_r.html#a5f139a5a146f5bc350ffcf3f5c1bdfba">PSManager::GetSubCR::user_sub_conf</a></div><div class="ttdeci">rgw_pubsub_sub_config user_sub_conf</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00752">rgw_sync_module_pubsub.cc:752</a></div></div>
<div class="ttc" id="aclass_p_s_manager_1_1_get_sub_c_r_html_a690fc3848bb956a67d28310d7f57d93e"><div class="ttname"><a href="class_p_s_manager_1_1_get_sub_c_r.html#a690fc3848bb956a67d28310d7f57d93e">PSManager::GetSubCR::operate</a></div><div class="ttdeci">int operate(const DoutPrefixProvider *dpp) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00769">rgw_sync_module_pubsub.cc:769</a></div></div>
<div class="ttc" id="aclass_p_s_manager_1_1_get_sub_c_r_html_a6b2c6ad1264a3f6d2d75f8a3ef21d4de"><div class="ttname"><a href="class_p_s_manager_1_1_get_sub_c_r.html#a6b2c6ad1264a3f6d2d75f8a3ef21d4de">PSManager::GetSubCR::owner</a></div><div class="ttdeci">rgw_user owner</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00744">rgw_sync_module_pubsub.cc:744</a></div></div>
<div class="ttc" id="aclass_p_s_manager_1_1_get_sub_c_r_html_a8f84e18e648c98291c57ad80b68ecf13"><div class="ttname"><a href="class_p_s_manager_1_1_get_sub_c_r.html#a8f84e18e648c98291c57ad80b68ecf13">PSManager::GetSubCR::GetSubCR</a></div><div class="ttdeci">GetSubCR(RGWDataSyncCtx *_sc, PSManagerRef &amp;_mgr, const rgw_user &amp;_owner, const string &amp;_sub_name, PSSubscriptionRef *_ref)</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00755">rgw_sync_module_pubsub.cc:755</a></div></div>
<div class="ttc" id="aclass_p_s_manager_1_1_get_sub_c_r_html_a995f7c6f6bd6509136b26d287cd9349c"><div class="ttname"><a href="class_p_s_manager_1_1_get_sub_c_r.html#a995f7c6f6bd6509136b26d287cd9349c">PSManager::GetSubCR::sc</a></div><div class="ttdeci">RGWDataSyncCtx * sc</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00741">rgw_sync_module_pubsub.cc:741</a></div></div>
<div class="ttc" id="aclass_p_s_manager_1_1_get_sub_c_r_html_aa2ef7f08fbc3d2481bc5a166308b0e43"><div class="ttname"><a href="class_p_s_manager_1_1_get_sub_c_r.html#aa2ef7f08fbc3d2481bc5a166308b0e43">PSManager::GetSubCR::sync_env</a></div><div class="ttdeci">RGWDataSyncEnv * sync_env</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00742">rgw_sync_module_pubsub.cc:742</a></div></div>
<div class="ttc" id="aclass_p_s_manager_1_1_get_sub_c_r_html_aa7e3ed056fdc0ddd7a3b9afcf57fd1ab"><div class="ttname"><a href="class_p_s_manager_1_1_get_sub_c_r.html#aa7e3ed056fdc0ddd7a3b9afcf57fd1ab">PSManager::GetSubCR::sub_conf</a></div><div class="ttdeci">PSSubConfigRef sub_conf</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00751">rgw_sync_module_pubsub.cc:751</a></div></div>
<div class="ttc" id="aclass_p_s_manager_1_1_get_sub_c_r_html_abfbe58a2441ccf9af9ea0895332bf4c4"><div class="ttname"><a href="class_p_s_manager_1_1_get_sub_c_r.html#abfbe58a2441ccf9af9ea0895332bf4c4">PSManager::GetSubCR::ref</a></div><div class="ttdeci">PSSubscriptionRef * ref</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00747">rgw_sync_module_pubsub.cc:747</a></div></div>
<div class="ttc" id="aclass_p_s_manager_1_1_get_sub_c_r_html_ae4b3efb486c6c86d1ef7f5b2ad8443c9"><div class="ttname"><a href="class_p_s_manager_1_1_get_sub_c_r.html#ae4b3efb486c6c86d1ef7f5b2ad8443c9">PSManager::GetSubCR::mgr</a></div><div class="ttdeci">PSManagerRef mgr</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00743">rgw_sync_module_pubsub.cc:743</a></div></div>
<div class="ttc" id="aclass_p_s_manager_1_1_get_sub_c_r_html_af0df0f337862cf2b11f80818b86cfdec"><div class="ttname"><a href="class_p_s_manager_1_1_get_sub_c_r.html#af0df0f337862cf2b11f80818b86cfdec">PSManager::GetSubCR::return_result</a></div><div class="ttdeci">void return_result(const DoutPrefixProvider *dpp, PSSubscriptionRef *result) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00808">rgw_sync_module_pubsub.cc:808</a></div></div>
<div class="ttc" id="aclass_p_s_manager_html"><div class="ttname"><a href="class_p_s_manager.html">PSManager</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00732">rgw_sync_module_pubsub.cc:733</a></div></div>
<div class="ttc" id="aclass_p_s_manager_html_a1bfb4ae030026db9fb51b382ba98d1c2"><div class="ttname"><a href="class_p_s_manager.html#a1bfb4ae030026db9fb51b382ba98d1c2">PSManager::get_get_subs</a></div><div class="ttdeci">GetSubCR *&amp; get_get_subs(const rgw_user &amp;owner, const string &amp;name)</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00827">rgw_sync_module_pubsub.cc:827</a></div></div>
<div class="ttc" id="aclass_p_s_manager_html_a2dd0df3c4402e4e32b84845152f3dcbc"><div class="ttname"><a href="class_p_s_manager.html#a2dd0df3c4402e4e32b84845152f3dcbc">PSManager::find_sub_instance</a></div><div class="ttdeci">bool find_sub_instance(const rgw_user &amp;owner, const string &amp;sub_name, PSSubscriptionRef *sub)</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00835">rgw_sync_module_pubsub.cc:835</a></div></div>
<div class="ttc" id="aclass_p_s_manager_html_a477536a6dae9d495439f7fa6419ac754"><div class="ttname"><a href="class_p_s_manager.html#a477536a6dae9d495439f7fa6419ac754">PSManager::sync_env</a></div><div class="ttdeci">RGWDataSyncEnv * sync_env</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00735">rgw_sync_module_pubsub.cc:735</a></div></div>
<div class="ttc" id="aclass_p_s_manager_html_a4cb42fdc069cbd064cce2d8c6d701cab"><div class="ttname"><a href="class_p_s_manager.html#a4cb42fdc069cbd064cce2d8c6d701cab">PSManager::PSManager</a></div><div class="ttdeci">PSManager(RGWDataSyncCtx *_sc, PSEnvRef _env)</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00844">rgw_sync_module_pubsub.cc:844</a></div></div>
<div class="ttc" id="aclass_p_s_manager_html_a5539347b0f711419ddf20bd17e15ac75"><div class="ttname"><a href="class_p_s_manager.html#a5539347b0f711419ddf20bd17e15ac75">PSManager::remove_get_sub</a></div><div class="ttdeci">void remove_get_sub(const rgw_user &amp;owner, const string &amp;name)</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00831">rgw_sync_module_pubsub.cc:831</a></div></div>
<div class="ttc" id="aclass_p_s_manager_html_a585e7be0c31b30a2e67a60cd26ecb533"><div class="ttname"><a href="class_p_s_manager.html#a585e7be0c31b30a2e67a60cd26ecb533">PSManager::sc</a></div><div class="ttdeci">RGWDataSyncCtx * sc</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00734">rgw_sync_module_pubsub.cc:734</a></div></div>
<div class="ttc" id="aclass_p_s_manager_html_a9f753d83e8dfe9c301b5df6bf4aa5a38"><div class="ttname"><a href="class_p_s_manager.html#a9f753d83e8dfe9c301b5df6bf4aa5a38">PSManager::get_shared</a></div><div class="ttdeci">static PSManagerRef get_shared(RGWDataSyncCtx *_sc, PSEnvRef _env)</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00849">rgw_sync_module_pubsub.cc:849</a></div></div>
<div class="ttc" id="aclass_p_s_manager_html_aa5623a0737e94dc34c14d76c6fd68b13"><div class="ttname"><a href="class_p_s_manager.html#aa5623a0737e94dc34c14d76c6fd68b13">PSManager::env</a></div><div class="ttdeci">PSEnvRef env</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00736">rgw_sync_module_pubsub.cc:736</a></div></div>
<div class="ttc" id="aclass_p_s_manager_html_ab8a477525daf311f9308a2d2c73d0d0d"><div class="ttname"><a href="class_p_s_manager.html#ab8a477525daf311f9308a2d2c73d0d0d">PSManager::call_get_subscription_cr</a></div><div class="ttdeci">static int call_get_subscription_cr(const DoutPrefixProvider *dpp, RGWDataSyncCtx *sc, PSManagerRef &amp;mgr, RGWCoroutine *caller, const rgw_user &amp;owner, const string &amp;sub_name, PSSubscriptionRef *ref)</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00854">rgw_sync_module_pubsub.cc:854</a></div></div>
<div class="ttc" id="aclass_p_s_manager_html_ae9bf24747e9b91743258d254a6feacb9"><div class="ttname"><a href="class_p_s_manager.html#ae9bf24747e9b91743258d254a6feacb9">PSManager::subs</a></div><div class="ttdeci">std::map&lt; string, PSSubscriptionRef &gt; subs</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00738">rgw_sync_module_pubsub.cc:738</a></div></div>
<div class="ttc" id="aclass_p_s_manager_html_af00e65e53ad3003ed195d0bf6d55e5ff"><div class="ttname"><a href="class_p_s_manager.html#af00e65e53ad3003ed195d0bf6d55e5ff">PSManager::sub_id</a></div><div class="ttdeci">string sub_id(const rgw_user &amp;owner, const string &amp;sub_name)</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00816">rgw_sync_module_pubsub.cc:816</a></div></div>
<div class="ttc" id="aclass_p_s_manager_html_af760403fd6debb69b22284e3f83afe58"><div class="ttname"><a href="class_p_s_manager.html#af760403fd6debb69b22284e3f83afe58">PSManager::get_subs</a></div><div class="ttdeci">std::map&lt; std::string, GetSubCR * &gt; get_subs</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00825">rgw_sync_module_pubsub.cc:825</a></div></div>
<div class="ttc" id="aclass_p_s_subscription_1_1_init_bucket_lifecycle_c_r_html"><div class="ttname"><a href="class_p_s_subscription_1_1_init_bucket_lifecycle_c_r.html">PSSubscription::InitBucketLifecycleCR</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00448">rgw_sync_module_pubsub.cc:448</a></div></div>
<div class="ttc" id="aclass_p_s_subscription_1_1_init_bucket_lifecycle_c_r_html_a02befea4318992e6c981a36be065b411"><div class="ttname"><a href="class_p_s_subscription_1_1_init_bucket_lifecycle_c_r.html#a02befea4318992e6c981a36be065b411">PSSubscription::InitBucketLifecycleCR::operate</a></div><div class="ttdeci">int operate(const DoutPrefixProvider *dpp) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00469">rgw_sync_module_pubsub.cc:469</a></div></div>
<div class="ttc" id="aclass_p_s_subscription_1_1_init_bucket_lifecycle_c_r_html_a327c3734bf2552fcd592d568c64d8f39"><div class="ttname"><a href="class_p_s_subscription_1_1_init_bucket_lifecycle_c_r.html#a327c3734bf2552fcd592d568c64d8f39">PSSubscription::InitBucketLifecycleCR::rule</a></div><div class="ttdeci">LCRule rule</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00452">rgw_sync_module_pubsub.cc:452</a></div></div>
<div class="ttc" id="aclass_p_s_subscription_1_1_init_bucket_lifecycle_c_r_html_a384343c4750a29bb45980986e537d1a6"><div class="ttname"><a href="class_p_s_subscription_1_1_init_bucket_lifecycle_c_r.html#a384343c4750a29bb45980986e537d1a6">PSSubscription::InitBucketLifecycleCR::conf</a></div><div class="ttdeci">PSConfigRef &amp; conf</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00451">rgw_sync_module_pubsub.cc:451</a></div></div>
<div class="ttc" id="aclass_p_s_subscription_1_1_init_bucket_lifecycle_c_r_html_a50a3f90df2a5d75f63f734bdba895d40"><div class="ttname"><a href="class_p_s_subscription_1_1_init_bucket_lifecycle_c_r.html#a50a3f90df2a5d75f63f734bdba895d40">PSSubscription::InitBucketLifecycleCR::sync_env</a></div><div class="ttdeci">RGWDataSyncEnv * sync_env</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00450">rgw_sync_module_pubsub.cc:450</a></div></div>
<div class="ttc" id="aclass_p_s_subscription_1_1_init_bucket_lifecycle_c_r_html_a74052086b48ce1597f4a33650dfd5ea1"><div class="ttname"><a href="class_p_s_subscription_1_1_init_bucket_lifecycle_c_r.html#a74052086b48ce1597f4a33650dfd5ea1">PSSubscription::InitBucketLifecycleCR::retention_days</a></div><div class="ttdeci">int retention_days</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00454">rgw_sync_module_pubsub.cc:454</a></div></div>
<div class="ttc" id="aclass_p_s_subscription_1_1_init_bucket_lifecycle_c_r_html_a7e24225925c564fa017efc3666500e75"><div class="ttname"><a href="class_p_s_subscription_1_1_init_bucket_lifecycle_c_r.html#a7e24225925c564fa017efc3666500e75">PSSubscription::InitBucketLifecycleCR::lc_config</a></div><div class="ttdeci">rgw_bucket_lifecycle_config_params lc_config</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00456">rgw_sync_module_pubsub.cc:456</a></div></div>
<div class="ttc" id="aclass_p_s_subscription_1_1_init_bucket_lifecycle_c_r_html_aec89593e1175db3de078f365b4ce3b3f"><div class="ttname"><a href="class_p_s_subscription_1_1_init_bucket_lifecycle_c_r.html#aec89593e1175db3de078f365b4ce3b3f">PSSubscription::InitBucketLifecycleCR::InitBucketLifecycleCR</a></div><div class="ttdeci">InitBucketLifecycleCR(RGWDataSyncCtx *_sc, PSConfigRef &amp;_conf, rgw::sal::Bucket *_bucket)</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00459">rgw_sync_module_pubsub.cc:459</a></div></div>
<div class="ttc" id="aclass_p_s_subscription_1_1_init_bucket_lifecycle_c_r_html_afbbc865bd8f1346577f38e5b5fbcb5f2"><div class="ttname"><a href="class_p_s_subscription_1_1_init_bucket_lifecycle_c_r.html#afbbc865bd8f1346577f38e5b5fbcb5f2">PSSubscription::InitBucketLifecycleCR::sc</a></div><div class="ttdeci">RGWDataSyncCtx * sc</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00449">rgw_sync_module_pubsub.cc:449</a></div></div>
<div class="ttc" id="aclass_p_s_subscription_1_1_init_c_r_html"><div class="ttname"><a href="class_p_s_subscription_1_1_init_c_r.html">PSSubscription::InitCR</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00516">rgw_sync_module_pubsub.cc:516</a></div></div>
<div class="ttc" id="aclass_p_s_subscription_1_1_init_c_r_html_a05e716a3f023df31b830ad487794ddd8"><div class="ttname"><a href="class_p_s_subscription_1_1_init_c_r.html#a05e716a3f023df31b830ad487794ddd8">PSSubscription::InitCR::sub</a></div><div class="ttdeci">PSSubscriptionRef sub</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00519">rgw_sync_module_pubsub.cc:519</a></div></div>
<div class="ttc" id="aclass_p_s_subscription_1_1_init_c_r_html_a72c9832c0231fd6c653546c7125fc71c"><div class="ttname"><a href="class_p_s_subscription_1_1_init_c_r.html#a72c9832c0231fd6c653546c7125fc71c">PSSubscription::InitCR::create_bucket</a></div><div class="ttdeci">rgw_bucket_create_local_params create_bucket</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00521">rgw_sync_module_pubsub.cc:521</a></div></div>
<div class="ttc" id="aclass_p_s_subscription_1_1_init_c_r_html_a84c691d49e004f21b326559f58a6d302"><div class="ttname"><a href="class_p_s_subscription_1_1_init_c_r.html#a84c691d49e004f21b326559f58a6d302">PSSubscription::InitCR::get_bucket_info</a></div><div class="ttdeci">rgw_get_bucket_info_params get_bucket_info</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00520">rgw_sync_module_pubsub.cc:520</a></div></div>
<div class="ttc" id="aclass_p_s_subscription_1_1_init_c_r_html_a88a1382bc33d8cf67463bae68c4b09f2"><div class="ttname"><a href="class_p_s_subscription_1_1_init_c_r.html#a88a1382bc33d8cf67463bae68c4b09f2">PSSubscription::InitCR::sc</a></div><div class="ttdeci">RGWDataSyncCtx * sc</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00517">rgw_sync_module_pubsub.cc:517</a></div></div>
<div class="ttc" id="aclass_p_s_subscription_1_1_init_c_r_html_a8e55df7756d047be746274782e169c24"><div class="ttname"><a href="class_p_s_subscription_1_1_init_c_r.html#a8e55df7756d047be746274782e169c24">PSSubscription::InitCR::InitCR</a></div><div class="ttdeci">InitCR(RGWDataSyncCtx *_sc, PSSubscriptionRef &amp;_sub)</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00527">rgw_sync_module_pubsub.cc:527</a></div></div>
<div class="ttc" id="aclass_p_s_subscription_1_1_init_c_r_html_aac9ebbd5b3f7cb1e112ad0176435776a"><div class="ttname"><a href="class_p_s_subscription_1_1_init_c_r.html#aac9ebbd5b3f7cb1e112ad0176435776a">PSSubscription::InitCR::conf</a></div><div class="ttdeci">PSConfigRef &amp; conf</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00522">rgw_sync_module_pubsub.cc:522</a></div></div>
<div class="ttc" id="aclass_p_s_subscription_1_1_init_c_r_html_ab4e42246caaeef3539208d83e805dc90"><div class="ttname"><a href="class_p_s_subscription_1_1_init_c_r.html#ab4e42246caaeef3539208d83e805dc90">PSSubscription::InitCR::sub_conf</a></div><div class="ttdeci">PSSubConfigRef &amp; sub_conf</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00523">rgw_sync_module_pubsub.cc:523</a></div></div>
<div class="ttc" id="aclass_p_s_subscription_1_1_init_c_r_html_ac19b843b0c8f3d75ee9469f25b2e980a"><div class="ttname"><a href="class_p_s_subscription_1_1_init_c_r.html#ac19b843b0c8f3d75ee9469f25b2e980a">PSSubscription::InitCR::i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00524">rgw_sync_module_pubsub.cc:524</a></div></div>
<div class="ttc" id="aclass_p_s_subscription_1_1_init_c_r_html_ad359665f23d5f60eecd6213a9639ed89"><div class="ttname"><a href="class_p_s_subscription_1_1_init_c_r.html#ad359665f23d5f60eecd6213a9639ed89">PSSubscription::InitCR::operate</a></div><div class="ttdeci">int operate(const DoutPrefixProvider *dpp) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00534">rgw_sync_module_pubsub.cc:534</a></div></div>
<div class="ttc" id="aclass_p_s_subscription_1_1_init_c_r_html_af7c22ab0be0235ea54bb01d5d8d50d89"><div class="ttname"><a href="class_p_s_subscription_1_1_init_c_r.html#af7c22ab0be0235ea54bb01d5d8d50d89">PSSubscription::InitCR::sync_env</a></div><div class="ttdeci">RGWDataSyncEnv * sync_env</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00518">rgw_sync_module_pubsub.cc:518</a></div></div>
<div class="ttc" id="aclass_p_s_subscription_1_1_push_event_c_r_html"><div class="ttname"><a href="class_p_s_subscription_1_1_push_event_c_r.html">PSSubscription::PushEventCR</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00650">rgw_sync_module_pubsub.cc:650</a></div></div>
<div class="ttc" id="aclass_p_s_subscription_1_1_push_event_c_r_html_a0427bbe23dd682305d9ac3cf585881df"><div class="ttname"><a href="class_p_s_subscription_1_1_push_event_c_r.html#a0427bbe23dd682305d9ac3cf585881df">PSSubscription::PushEventCR::operate</a></div><div class="ttdeci">int operate(const DoutPrefixProvider *dpp) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00665">rgw_sync_module_pubsub.cc:665</a></div></div>
<div class="ttc" id="aclass_p_s_subscription_1_1_push_event_c_r_html_a776692c794be9dec1e251d5753a97527"><div class="ttname"><a href="class_p_s_subscription_1_1_push_event_c_r.html#a776692c794be9dec1e251d5753a97527">PSSubscription::PushEventCR::sync_env</a></div><div class="ttdeci">RGWDataSyncEnv *const sync_env</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00652">rgw_sync_module_pubsub.cc:652</a></div></div>
<div class="ttc" id="aclass_p_s_subscription_1_1_push_event_c_r_html_a914623b49595a7d8fcefbbc0307a7a1a"><div class="ttname"><a href="class_p_s_subscription_1_1_push_event_c_r.html#a914623b49595a7d8fcefbbc0307a7a1a">PSSubscription::PushEventCR::sc</a></div><div class="ttdeci">RGWDataSyncCtx *const sc</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00651">rgw_sync_module_pubsub.cc:651</a></div></div>
<div class="ttc" id="aclass_p_s_subscription_1_1_push_event_c_r_html_ac15fd8a2c8470cabb0a664cf897b0dd7"><div class="ttname"><a href="class_p_s_subscription_1_1_push_event_c_r.html#ac15fd8a2c8470cabb0a664cf897b0dd7">PSSubscription::PushEventCR::PushEventCR</a></div><div class="ttdeci">PushEventCR(RGWDataSyncCtx *const _sc, const PSSubscriptionRef &amp;_sub, const EventRef&lt; EventType &gt; &amp;_event)</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00657">rgw_sync_module_pubsub.cc:657</a></div></div>
<div class="ttc" id="aclass_p_s_subscription_1_1_push_event_c_r_html_add0adf1643dd88088669683f866085f0"><div class="ttname"><a href="class_p_s_subscription_1_1_push_event_c_r.html#add0adf1643dd88088669683f866085f0">PSSubscription::PushEventCR::sub_conf</a></div><div class="ttdeci">const PSSubConfigRef &amp; sub_conf</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00654">rgw_sync_module_pubsub.cc:654</a></div></div>
<div class="ttc" id="aclass_p_s_subscription_1_1_push_event_c_r_html_add9cbebb4997490b4815d6b3911990ac"><div class="ttname"><a href="class_p_s_subscription_1_1_push_event_c_r.html#add9cbebb4997490b4815d6b3911990ac">PSSubscription::PushEventCR::event</a></div><div class="ttdeci">const EventRef&lt; EventType &gt; event</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00653">rgw_sync_module_pubsub.cc:653</a></div></div>
<div class="ttc" id="aclass_p_s_subscription_1_1_store_event_c_r_html"><div class="ttname"><a href="class_p_s_subscription_1_1_store_event_c_r.html">PSSubscription::StoreEventCR</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00598">rgw_sync_module_pubsub.cc:598</a></div></div>
<div class="ttc" id="aclass_p_s_subscription_1_1_store_event_c_r_html_a018bb213403fc80342a2c898db7a4fa4"><div class="ttname"><a href="class_p_s_subscription_1_1_store_event_c_r.html#a018bb213403fc80342a2c898db7a4fa4">PSSubscription::StoreEventCR::sub</a></div><div class="ttdeci">const PSSubscriptionRef sub</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00601">rgw_sync_module_pubsub.cc:601</a></div></div>
<div class="ttc" id="aclass_p_s_subscription_1_1_store_event_c_r_html_a2b6d94e2107fb44f25b2b1abb0a0a483"><div class="ttname"><a href="class_p_s_subscription_1_1_store_event_c_r.html#a2b6d94e2107fb44f25b2b1abb0a0a483">PSSubscription::StoreEventCR::sync_env</a></div><div class="ttdeci">RGWDataSyncEnv *const sync_env</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00600">rgw_sync_module_pubsub.cc:600</a></div></div>
<div class="ttc" id="aclass_p_s_subscription_1_1_store_event_c_r_html_a7a0abb4ce4e2b32e67e112ea4179b7d5"><div class="ttname"><a href="class_p_s_subscription_1_1_store_event_c_r.html#a7a0abb4ce4e2b32e67e112ea4179b7d5">PSSubscription::StoreEventCR::StoreEventCR</a></div><div class="ttdeci">StoreEventCR(RGWDataSyncCtx *const _sc, const PSSubscriptionRef &amp;_sub, const EventRef&lt; EventType &gt; &amp;_event)</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00606">rgw_sync_module_pubsub.cc:606</a></div></div>
<div class="ttc" id="aclass_p_s_subscription_1_1_store_event_c_r_html_a90c4335550a3f6534f7950cdb28fd30d"><div class="ttname"><a href="class_p_s_subscription_1_1_store_event_c_r.html#a90c4335550a3f6534f7950cdb28fd30d">PSSubscription::StoreEventCR::operate</a></div><div class="ttdeci">int operate(const DoutPrefixProvider *dpp) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00615">rgw_sync_module_pubsub.cc:615</a></div></div>
<div class="ttc" id="aclass_p_s_subscription_1_1_store_event_c_r_html_a9913c5cdfac81c8faee065a382e17c7c"><div class="ttname"><a href="class_p_s_subscription_1_1_store_event_c_r.html#a9913c5cdfac81c8faee065a382e17c7c">PSSubscription::StoreEventCR::pse</a></div><div class="ttdeci">const PSEvent&lt; EventType &gt; pse</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00602">rgw_sync_module_pubsub.cc:602</a></div></div>
<div class="ttc" id="aclass_p_s_subscription_1_1_store_event_c_r_html_a9fb6ec2417f8c3e00ca4633db0ce9b5f"><div class="ttname"><a href="class_p_s_subscription_1_1_store_event_c_r.html#a9fb6ec2417f8c3e00ca4633db0ce9b5f">PSSubscription::StoreEventCR::sc</a></div><div class="ttdeci">RGWDataSyncCtx *const sc</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00599">rgw_sync_module_pubsub.cc:599</a></div></div>
<div class="ttc" id="aclass_p_s_subscription_1_1_store_event_c_r_html_ab6430a6b718695d30f66ba0df62991cc"><div class="ttname"><a href="class_p_s_subscription_1_1_store_event_c_r.html#ab6430a6b718695d30f66ba0df62991cc">PSSubscription::StoreEventCR::oid_prefix</a></div><div class="ttdeci">const string oid_prefix</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00603">rgw_sync_module_pubsub.cc:603</a></div></div>
<div class="ttc" id="aclass_p_s_subscription_html"><div class="ttname"><a href="class_p_s_subscription.html">PSSubscription</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00432">rgw_sync_module_pubsub.cc:432</a></div></div>
<div class="ttc" id="aclass_p_s_subscription_html_a074ee864eceb9cd46902471e60fd2af2"><div class="ttname"><a href="class_p_s_subscription.html#a074ee864eceb9cd46902471e60fd2af2">PSSubscription::get_shared</a></div><div class="ttdeci">static PSSubscriptionRef get_shared(RGWDataSyncCtx *_sc, PSEnvRef _env, C &amp;_sub_conf)</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00707">rgw_sync_module_pubsub.cc:707</a></div></div>
<div class="ttc" id="aclass_p_s_subscription_html_a111d5feeb4587d071f69f5304d368200"><div class="ttname"><a href="class_p_s_subscription.html#a111d5feeb4587d071f69f5304d368200">PSSubscription::data_access</a></div><div class="ttdeci">RGWDataAccessRef data_access</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00443">rgw_sync_module_pubsub.cc:443</a></div></div>
<div class="ttc" id="aclass_p_s_subscription_html_a1296667b0db9a71aa796b567bc66f44a"><div class="ttname"><a href="class_p_s_subscription.html#a1296667b0db9a71aa796b567bc66f44a">PSSubscription::store_event_cr</a></div><div class="ttdeci">static RGWCoroutine * store_event_cr(RGWDataSyncCtx *const sc, const PSSubscriptionRef &amp;sub, const EventRef&lt; EventType &gt; &amp;event)</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00721">rgw_sync_module_pubsub.cc:721</a></div></div>
<div class="ttc" id="aclass_p_s_subscription_html_a31143970c91f05756ab122702bea3bff"><div class="ttname"><a href="class_p_s_subscription.html#a31143970c91f05756ab122702bea3bff">PSSubscription::sync_env</a></div><div class="ttdeci">RGWDataSyncEnv * sync_env</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00438">rgw_sync_module_pubsub.cc:438</a></div></div>
<div class="ttc" id="aclass_p_s_subscription_html_a82aea08fb6e91579cb002a26795c6b82"><div class="ttname"><a href="class_p_s_subscription.html#a82aea08fb6e91579cb002a26795c6b82">PSSubscription::~PSSubscription</a></div><div class="ttdeci">virtual ~PSSubscription()</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00700">rgw_sync_module_pubsub.cc:700</a></div></div>
<div class="ttc" id="aclass_p_s_subscription_html_a83ddd238da4e9e609de738fe1ecaecc3"><div class="ttname"><a href="class_p_s_subscription.html#a83ddd238da4e9e609de738fe1ecaecc3">PSSubscription::call_init_cr</a></div><div class="ttdeci">int call_init_cr(const DoutPrefixProvider *dpp, RGWCoroutine *caller)</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00716">rgw_sync_module_pubsub.cc:716</a></div></div>
<div class="ttc" id="aclass_p_s_subscription_html_a857b6d396707dd72963f20db53c1b15d"><div class="ttname"><a href="class_p_s_subscription.html#a857b6d396707dd72963f20db53c1b15d">PSSubscription::bucket_info</a></div><div class="ttdeci">RGWBucketInfo * bucket_info</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00442">rgw_sync_module_pubsub.cc:442</a></div></div>
<div class="ttc" id="aclass_p_s_subscription_html_a9c8bfa5cfb2bdfa87066800216853c3e"><div class="ttname"><a href="class_p_s_subscription.html#a9c8bfa5cfb2bdfa87066800216853c3e">PSSubscription::sub_conf</a></div><div class="ttdeci">PSSubConfigRef sub_conf</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00440">rgw_sync_module_pubsub.cc:440</a></div></div>
<div class="ttc" id="aclass_p_s_subscription_html_aa1613e48f041939f124734d07ab51c9c"><div class="ttname"><a href="class_p_s_subscription.html#aa1613e48f041939f124734d07ab51c9c">PSSubscription::init_cr</a></div><div class="ttdeci">InitCR * init_cr</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00446">rgw_sync_module_pubsub.cc:446</a></div></div>
<div class="ttc" id="aclass_p_s_subscription_html_aa9c57ccd05027899a7b816ecb03f751a"><div class="ttname"><a href="class_p_s_subscription.html#aa9c57ccd05027899a7b816ecb03f751a">PSSubscription::bucket</a></div><div class="ttdeci">RGWDataAccess::BucketRef bucket</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00444">rgw_sync_module_pubsub.cc:444</a></div></div>
<div class="ttc" id="aclass_p_s_subscription_html_ab10b3e0a59846c58280ddc8b6e2022c2"><div class="ttname"><a href="class_p_s_subscription.html#ab10b3e0a59846c58280ddc8b6e2022c2">PSSubscription::get_bucket_info_result</a></div><div class="ttdeci">std::shared_ptr&lt; rgw_get_bucket_info_result &gt; get_bucket_info_result</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00441">rgw_sync_module_pubsub.cc:441</a></div></div>
<div class="ttc" id="aclass_p_s_subscription_html_ac19d731eb2eefd3b630d14735f1b130c"><div class="ttname"><a href="class_p_s_subscription.html#ac19d731eb2eefd3b630d14735f1b130c">PSSubscription::env</a></div><div class="ttdeci">PSEnvRef env</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00439">rgw_sync_module_pubsub.cc:439</a></div></div>
<div class="ttc" id="aclass_p_s_subscription_html_ac1ca0832c0c476de049a7f565cc8ccc2"><div class="ttname"><a href="class_p_s_subscription.html#ac1ca0832c0c476de049a7f565cc8ccc2">PSSubscription::PSSubscription</a></div><div class="ttdeci">PSSubscription(RGWDataSyncCtx *_sc, PSEnvRef _env, rgw_pubsub_sub_config &amp;user_sub_conf)</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00692">rgw_sync_module_pubsub.cc:692</a></div></div>
<div class="ttc" id="aclass_p_s_subscription_html_ac4b85e6ab3b24a238da701fd23e96dcd"><div class="ttname"><a href="class_p_s_subscription.html#ac4b85e6ab3b24a238da701fd23e96dcd">PSSubscription::PSSubscription</a></div><div class="ttdeci">PSSubscription(RGWDataSyncCtx *_sc, PSEnvRef _env, PSSubConfigRef &amp;_sub_conf)</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00685">rgw_sync_module_pubsub.cc:685</a></div></div>
<div class="ttc" id="aclass_p_s_subscription_html_ad2da75a138437c4189359f764205b4ad"><div class="ttname"><a href="class_p_s_subscription.html#ad2da75a138437c4189359f764205b4ad">PSSubscription::push_event_cr</a></div><div class="ttdeci">static RGWCoroutine * push_event_cr(RGWDataSyncCtx *const sc, const PSSubscriptionRef &amp;sub, const EventRef&lt; EventType &gt; &amp;event)</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00726">rgw_sync_module_pubsub.cc:726</a></div></div>
<div class="ttc" id="aclass_p_s_subscription_html_adc76ddde13ef0b537499d5b9de98dfe7"><div class="ttname"><a href="class_p_s_subscription.html#adc76ddde13ef0b537499d5b9de98dfe7">PSSubscription::sc</a></div><div class="ttdeci">RGWDataSyncCtx * sc</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00437">rgw_sync_module_pubsub.cc:437</a></div></div>
<div class="ttc" id="aclass_r_g_w_call_stat_remote_obj_c_r_html"><div class="ttname"><a href="class_r_g_w_call_stat_remote_obj_c_r.html">RGWCallStatRemoteObjCR</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module_8h_source.html#l00173">rgw_sync_module.h:173</a></div></div>
<div class="ttc" id="aclass_r_g_w_call_stat_remote_obj_c_r_html_a1957800f11ca717cc6ea98837bc8e3e0"><div class="ttname"><a href="class_r_g_w_call_stat_remote_obj_c_r.html#a1957800f11ca717cc6ea98837bc8e3e0">RGWCallStatRemoteObjCR::sc</a></div><div class="ttdeci">RGWDataSyncCtx * sc</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module_8h_source.html#l00181">rgw_sync_module.h:181</a></div></div>
<div class="ttc" id="aclass_r_g_w_call_stat_remote_obj_c_r_html_a7e2c7a26a3f7627674772c959a9847ca"><div class="ttname"><a href="class_r_g_w_call_stat_remote_obj_c_r.html#a7e2c7a26a3f7627674772c959a9847ca">RGWCallStatRemoteObjCR::key</a></div><div class="ttdeci">rgw_obj_key key</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module_8h_source.html#l00185">rgw_sync_module.h:185</a></div></div>
<div class="ttc" id="aclass_r_g_w_coroutine_html"><div class="ttname"><a href="class_r_g_w_coroutine.html">RGWCoroutine</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__coroutine_8h_source.html#l00186">rgw_coroutine.h:186</a></div></div>
<div class="ttc" id="aclass_r_g_w_coroutine_html_a15bce10b8fbd959412a9473b03f0dd82"><div class="ttname"><a href="class_r_g_w_coroutine.html#a15bce10b8fbd959412a9473b03f0dd82">RGWCoroutine::set_cr_done</a></div><div class="ttdeci">int set_cr_done()</div><div class="ttdef"><b>Definition</b> <a href="rgw__coroutine_8h_source.html#l00251">rgw_coroutine.h:251</a></div></div>
<div class="ttc" id="aclass_r_g_w_coroutine_html_a19f441c7625a995ca230d26bcd3c8454"><div class="ttname"><a href="class_r_g_w_coroutine.html#a19f441c7625a995ca230d26bcd3c8454">RGWCoroutine::ret</a></div><div class="ttdeci">int ret</div><div class="ttdef"><b>Definition</b> <a href="rgw__coroutine_8h_source.html#l00224">rgw_coroutine.h:224</a></div></div>
<div class="ttc" id="aclass_r_g_w_coroutine_html_a32f8dded216b7ead89cfa5b2b3494dfe"><div class="ttname"><a href="class_r_g_w_coroutine.html#a32f8dded216b7ead89cfa5b2b3494dfe">RGWCoroutine::operate</a></div><div class="ttdeci">virtual int operate(const DoutPrefixProvider *dpp)=0</div></div>
<div class="ttc" id="aclass_r_g_w_coroutine_html_a448c57de2331dfe757400bc0187ee5b5"><div class="ttname"><a href="class_r_g_w_coroutine.html#a448c57de2331dfe757400bc0187ee5b5">RGWCoroutine::is_done</a></div><div class="ttdeci">bool is_done()</div><div class="ttdef"><b>Definition</b> <a href="rgw__coroutine_8h_source.html#l00282">rgw_coroutine.h:282</a></div></div>
<div class="ttc" id="aclass_r_g_w_coroutine_html_a576a8ced300f52809ad477f0082e3bcd"><div class="ttname"><a href="class_r_g_w_coroutine.html#a576a8ced300f52809ad477f0082e3bcd">RGWCoroutine::set_cr_error</a></div><div class="ttdeci">int set_cr_error(int ret)</div><div class="ttdef"><b>Definition</b> <a href="rgw__coroutine_8h_source.html#l00248">rgw_coroutine.h:248</a></div></div>
<div class="ttc" id="aclass_r_g_w_coroutine_html_a60c1d6187851953e8a5e1dbc97f69bbd"><div class="ttname"><a href="class_r_g_w_coroutine.html#a60c1d6187851953e8a5e1dbc97f69bbd">RGWCoroutine::call</a></div><div class="ttdeci">void call(RGWCoroutine *op)</div><div class="ttdef"><b>Definition</b> <a href="rgw__coroutine_8cc_source.html#l00917">rgw_coroutine.cc:917</a></div></div>
<div class="ttc" id="aclass_r_g_w_coroutine_html_a71a3278d2998c966e8a08021ed4a3936"><div class="ttname"><a href="class_r_g_w_coroutine.html#a71a3278d2998c966e8a08021ed4a3936">RGWCoroutine::set_retcode</a></div><div class="ttdeci">void set_retcode(int r)</div><div class="ttdef"><b>Definition</b> <a href="rgw__coroutine_8h_source.html#l00290">rgw_coroutine.h:290</a></div></div>
<div class="ttc" id="aclass_r_g_w_coroutine_html_a887e803a293aff88fd8d60003a73e50a"><div class="ttname"><a href="class_r_g_w_coroutine.html#a887e803a293aff88fd8d60003a73e50a">RGWCoroutine::cct</a></div><div class="ttdeci">CephContext * cct</div><div class="ttdef"><b>Definition</b> <a href="rgw__coroutine_8h_source.html#l00233">rgw_coroutine.h:233</a></div></div>
<div class="ttc" id="aclass_r_g_w_coroutine_html_aab2ada61e785db0e4d6f50f56825fdf8"><div class="ttname"><a href="class_r_g_w_coroutine.html#aab2ada61e785db0e4d6f50f56825fdf8">RGWCoroutine::set_sleeping</a></div><div class="ttdeci">void set_sleeping(bool flag)</div><div class="ttdef"><b>Definition</b> <a href="rgw__coroutine_8cc_source.html#l00156">rgw_coroutine.cc:156</a></div></div>
<div class="ttc" id="aclass_r_g_w_coroutine_html_afe652dd81659a23225be50fb0a4a7edb"><div class="ttname"><a href="class_r_g_w_coroutine.html#afe652dd81659a23225be50fb0a4a7edb">RGWCoroutine::retcode</a></div><div class="ttdeci">int retcode</div><div class="ttdef"><b>Definition</b> <a href="rgw__coroutine_8h_source.html#l00236">rgw_coroutine.h:236</a></div></div>
<div class="ttc" id="aclass_r_g_w_coroutine_html_afe82e9cf95cc651b8ffd425bea688563"><div class="ttname"><a href="class_r_g_w_coroutine.html#afe82e9cf95cc651b8ffd425bea688563">RGWCoroutine::cr</a></div><div class="ttdeci">boost::asio::coroutine cr</div><div class="ttdef"><b>Definition</b> <a href="rgw__coroutine_8h_source.html#l00222">rgw_coroutine.h:222</a></div></div>
<div class="ttc" id="aclass_r_g_w_data_access_html"><div class="ttname"><a href="class_r_g_w_data_access.html">RGWDataAccess</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__tools_8h_source.html#l00155">rgw_tools.h:156</a></div></div>
<div class="ttc" id="aclass_r_g_w_data_access_html_a111204bb0879434a2ae00e2eca9ec026"><div class="ttname"><a href="class_r_g_w_data_access.html#a111204bb0879434a2ae00e2eca9ec026">RGWDataAccess::BucketRef</a></div><div class="ttdeci">std::shared_ptr&lt; Bucket &gt; BucketRef</div><div class="ttdef"><b>Definition</b> <a href="rgw__tools_8h_source.html#l00165">rgw_tools.h:165</a></div></div>
<div class="ttc" id="aclass_r_g_w_data_sync_module_html"><div class="ttname"><a href="class_r_g_w_data_sync_module.html">RGWDataSyncModule</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module_8h_source.html#l00019">rgw_sync_module.h:19</a></div></div>
<div class="ttc" id="aclass_r_g_w_h_t_t_p_args_html"><div class="ttname"><a href="class_r_g_w_h_t_t_p_args.html">RGWHTTPArgs</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l00327">rgw_common.h:327</a></div></div>
<div class="ttc" id="aclass_r_g_w_h_t_t_p_args_html_ad0167c36e38f885a5dae2bd2b86d67b0"><div class="ttname"><a href="class_r_g_w_h_t_t_p_args.html#ad0167c36e38f885a5dae2bd2b86d67b0">RGWHTTPArgs::set</a></div><div class="ttdeci">void set(const std::string &amp;s)</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l00342">rgw_common.h:342</a></div></div>
<div class="ttc" id="aclass_r_g_w_lifecycle_configuration_html"><div class="ttname"><a href="class_r_g_w_lifecycle_configuration.html">RGWLifecycleConfiguration</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__lc_8h_source.html#l00405">rgw_lc.h:406</a></div></div>
<div class="ttc" id="aclass_r_g_w_lifecycle_configuration_html_a1dd31a492ee4532b87fd345eb4d5e91c"><div class="ttname"><a href="class_r_g_w_lifecycle_configuration.html#a1dd31a492ee4532b87fd345eb4d5e91c">RGWLifecycleConfiguration::add_rule</a></div><div class="ttdeci">void add_rule(const LCRule &amp;rule)</div><div class="ttdef"><b>Definition</b> <a href="rgw__lc_8cc_source.html#l00106">rgw_lc.cc:106</a></div></div>
<div class="ttc" id="aclass_r_g_w_lifecycle_configuration_html_a6b347083bb8ca25863db9234c3caac6e"><div class="ttname"><a href="class_r_g_w_lifecycle_configuration.html#a6b347083bb8ca25863db9234c3caac6e">RGWLifecycleConfiguration::decode</a></div><div class="ttdeci">void decode(bufferlist::const_iterator &amp;bl)</div><div class="ttdef"><b>Definition</b> <a href="rgw__lc_8h_source.html#l00430">rgw_lc.h:430</a></div></div>
<div class="ttc" id="aclass_r_g_w_lifecycle_configuration_html_abfa0fc18e96b931427579d8c61546c1e"><div class="ttname"><a href="class_r_g_w_lifecycle_configuration.html#abfa0fc18e96b931427579d8c61546c1e">RGWLifecycleConfiguration::get_rule_map</a></div><div class="ttdeci">std::multimap&lt; std::string, LCRule &gt; &amp; get_rule_map()</div><div class="ttdef"><b>Definition</b> <a href="rgw__lc_8h_source.html#l00449">rgw_lc.h:449</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_data_sync_module_html"><div class="ttname"><a href="class_r_g_w_p_s_data_sync_module.html">RGWPSDataSyncModule</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l01323">rgw_sync_module_pubsub.cc:1323</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_data_sync_module_html_a09050550226b91071a21f6753d86a23b"><div class="ttname"><a href="class_r_g_w_p_s_data_sync_module.html#a09050550226b91071a21f6753d86a23b">RGWPSDataSyncModule::RGWPSDataSyncModule</a></div><div class="ttdeci">RGWPSDataSyncModule(CephContext *cct, const JSONFormattable &amp;config)</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l01328">rgw_sync_module_pubsub.cc:1328</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_data_sync_module_html_a2620948dfc987dfcdf4a67fb2716f2d2"><div class="ttname"><a href="class_r_g_w_p_s_data_sync_module.html#a2620948dfc987dfcdf4a67fb2716f2d2">RGWPSDataSyncModule::create_delete_marker</a></div><div class="ttdeci">RGWCoroutine * create_delete_marker(const DoutPrefixProvider *dpp, RGWDataSyncCtx *sc, rgw_bucket_sync_pipe &amp;sync_pipe, rgw_obj_key &amp;key, real_time &amp;mtime, rgw_bucket_entry_owner &amp;owner, bool versioned, uint64_t versioned_epoch, rgw_zone_set *zones_trace) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l01359">rgw_sync_module_pubsub.cc:1359</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_data_sync_module_html_a4a6c6aa52683f56d8863740d9ffe4e47"><div class="ttname"><a href="class_r_g_w_p_s_data_sync_module.html#a4a6c6aa52683f56d8863740d9ffe4e47">RGWPSDataSyncModule::~RGWPSDataSyncModule</a></div><div class="ttdeci">~RGWPSDataSyncModule() override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l01332">rgw_sync_module_pubsub.cc:1332</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_data_sync_module_html_a5ebbcf466ba1f89044ea3aa9dac2dc5c"><div class="ttname"><a href="class_r_g_w_p_s_data_sync_module.html#a5ebbcf466ba1f89044ea3aa9dac2dc5c">RGWPSDataSyncModule::sync_object</a></div><div class="ttdeci">RGWCoroutine * sync_object(const DoutPrefixProvider *dpp, RGWDataSyncCtx *sc, rgw_bucket_sync_pipe &amp;sync_pipe, rgw_obj_key &amp;key, std::optional&lt; uint64_t &gt; versioned_epoch, rgw_zone_set *zones_trace) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l01345">rgw_sync_module_pubsub.cc:1345</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_data_sync_module_html_aa27481f832415f14c1889609ce26c9ce"><div class="ttname"><a href="class_r_g_w_p_s_data_sync_module.html#aa27481f832415f14c1889609ce26c9ce">RGWPSDataSyncModule::init</a></div><div class="ttdeci">void init(RGWDataSyncCtx *sc, uint64_t instance_id) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l01334">rgw_sync_module_pubsub.cc:1334</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_data_sync_module_html_aab4410b0a8a1dc56c60a811e1d40274d"><div class="ttname"><a href="class_r_g_w_p_s_data_sync_module.html#aab4410b0a8a1dc56c60a811e1d40274d">RGWPSDataSyncModule::start_sync</a></div><div class="ttdeci">RGWCoroutine * start_sync(const DoutPrefixProvider *dpp, RGWDataSyncCtx *sc) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l01340">rgw_sync_module_pubsub.cc:1340</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_data_sync_module_html_aac3b731945a5dc1ab6160b10f24e685a"><div class="ttname"><a href="class_r_g_w_p_s_data_sync_module.html#aac3b731945a5dc1ab6160b10f24e685a">RGWPSDataSyncModule::conf</a></div><div class="ttdeci">PSConfigRef &amp; conf</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l01325">rgw_sync_module_pubsub.cc:1325</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_data_sync_module_html_ab5389b5bb6bd063f68c98240ab7c6024"><div class="ttname"><a href="class_r_g_w_p_s_data_sync_module.html#ab5389b5bb6bd063f68c98240ab7c6024">RGWPSDataSyncModule::get_conf</a></div><div class="ttdeci">PSConfigRef &amp; get_conf()</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l01366">rgw_sync_module_pubsub.cc:1366</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_data_sync_module_html_addd274c25358453e22ff6daa9245f474"><div class="ttname"><a href="class_r_g_w_p_s_data_sync_module.html#addd274c25358453e22ff6daa9245f474">RGWPSDataSyncModule::remove_object</a></div><div class="ttdeci">RGWCoroutine * remove_object(const DoutPrefixProvider *dpp, RGWDataSyncCtx *sc, rgw_bucket_sync_pipe &amp;sync_pipe, rgw_obj_key &amp;key, real_time &amp;mtime, bool versioned, uint64_t versioned_epoch, rgw_zone_set *zones_trace) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l01352">rgw_sync_module_pubsub.cc:1352</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_data_sync_module_html_af4fc65706a99bd24c8913541da178569"><div class="ttname"><a href="class_r_g_w_p_s_data_sync_module.html#af4fc65706a99bd24c8913541da178569">RGWPSDataSyncModule::env</a></div><div class="ttdeci">PSEnvRef env</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l01324">rgw_sync_module_pubsub.cc:1324</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_find_bucket_topics_c_r_html"><div class="ttname"><a href="class_r_g_w_p_s_find_bucket_topics_c_r.html">RGWPSFindBucketTopicsCR</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00931">rgw_sync_module_pubsub.cc:931</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_find_bucket_topics_c_r_html_a00a706912528c20a472687af8c7ff9ea"><div class="ttname"><a href="class_r_g_w_p_s_find_bucket_topics_c_r.html#a00a706912528c20a472687af8c7ff9ea">RGWPSFindBucketTopicsCR::env</a></div><div class="ttdeci">PSEnvRef env</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00934">rgw_sync_module_pubsub.cc:934</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_find_bucket_topics_c_r_html_a0a90b7e37b2ba54977883d4b2c04ca44"><div class="ttname"><a href="class_r_g_w_p_s_find_bucket_topics_c_r.html#a0a90b7e37b2ba54977883d4b2c04ca44">RGWPSFindBucketTopicsCR::bucket</a></div><div class="ttdeci">rgw_bucket bucket</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00936">rgw_sync_module_pubsub.cc:936</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_find_bucket_topics_c_r_html_a0be46f59f4719503019c9ac161901255"><div class="ttname"><a href="class_r_g_w_p_s_find_bucket_topics_c_r.html#a0be46f59f4719503019c9ac161901255">RGWPSFindBucketTopicsCR::owner</a></div><div class="ttdeci">rgw_user owner</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00935">rgw_sync_module_pubsub.cc:935</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_find_bucket_topics_c_r_html_a18812f04412b816e1e91fc7a9d84170b"><div class="ttname"><a href="class_r_g_w_p_s_find_bucket_topics_c_r.html#a18812f04412b816e1e91fc7a9d84170b">RGWPSFindBucketTopicsCR::bucket_topics</a></div><div class="ttdeci">rgw_pubsub_bucket_topics bucket_topics</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00944">rgw_sync_module_pubsub.cc:944</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_find_bucket_topics_c_r_html_a30702afb10821ac96031c6b6651ec84b"><div class="ttname"><a href="class_r_g_w_p_s_find_bucket_topics_c_r.html#a30702afb10821ac96031c6b6651ec84b">RGWPSFindBucketTopicsCR::ps</a></div><div class="ttdeci">RGWPubSub ps</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00940">rgw_sync_module_pubsub.cc:940</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_find_bucket_topics_c_r_html_a4f2ccba5d0fb57addc7b22634ded00de"><div class="ttname"><a href="class_r_g_w_p_s_find_bucket_topics_c_r.html#a4f2ccba5d0fb57addc7b22634ded00de">RGWPSFindBucketTopicsCR::event_type</a></div><div class="ttdeci">rgw::notify::EventType event_type</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00938">rgw_sync_module_pubsub.cc:938</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_find_bucket_topics_c_r_html_a6378c6690c72c1af45d488b050419886"><div class="ttname"><a href="class_r_g_w_p_s_find_bucket_topics_c_r.html#a6378c6690c72c1af45d488b050419886">RGWPSFindBucketTopicsCR::RGWPSFindBucketTopicsCR</a></div><div class="ttdeci">RGWPSFindBucketTopicsCR(RGWDataSyncCtx *_sc, PSEnvRef &amp;_env, const rgw_user &amp;_owner, const rgw_bucket &amp;_bucket, const rgw_obj_key &amp;_key, rgw::notify::EventType _event_type, TopicsRef *_topics)</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00948">rgw_sync_module_pubsub.cc:948</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_find_bucket_topics_c_r_html_a6aa8740a060e1db07d248d1746517b3c"><div class="ttname"><a href="class_r_g_w_p_s_find_bucket_topics_c_r.html#a6aa8740a060e1db07d248d1746517b3c">RGWPSFindBucketTopicsCR::topics</a></div><div class="ttdeci">TopicsRef * topics</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00946">rgw_sync_module_pubsub.cc:946</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_find_bucket_topics_c_r_html_a70c6fe9ebaa9f382945ac0ebd3aaabfa"><div class="ttname"><a href="class_r_g_w_p_s_find_bucket_topics_c_r.html#a70c6fe9ebaa9f382945ac0ebd3aaabfa">RGWPSFindBucketTopicsCR::key</a></div><div class="ttdeci">rgw_obj_key key</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00937">rgw_sync_module_pubsub.cc:937</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_find_bucket_topics_c_r_html_a739933a47419bac5b390db7655e61e43"><div class="ttname"><a href="class_r_g_w_p_s_find_bucket_topics_c_r.html#a739933a47419bac5b390db7655e61e43">RGWPSFindBucketTopicsCR::bucket_obj</a></div><div class="ttdeci">rgw_raw_obj bucket_obj</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00942">rgw_sync_module_pubsub.cc:942</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_find_bucket_topics_c_r_html_ab22c4b769539506751b7f7a08b9bc286"><div class="ttname"><a href="class_r_g_w_p_s_find_bucket_topics_c_r.html#ab22c4b769539506751b7f7a08b9bc286">RGWPSFindBucketTopicsCR::user_topics</a></div><div class="ttdeci">rgw_pubsub_topics user_topics</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00945">rgw_sync_module_pubsub.cc:945</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_find_bucket_topics_c_r_html_ab99e91fc80f611ae2c4bb209e2bc4e13"><div class="ttname"><a href="class_r_g_w_p_s_find_bucket_topics_c_r.html#ab99e91fc80f611ae2c4bb209e2bc4e13">RGWPSFindBucketTopicsCR::sc</a></div><div class="ttdeci">RGWDataSyncCtx * sc</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00932">rgw_sync_module_pubsub.cc:932</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_find_bucket_topics_c_r_html_ad410180186eb553313fa85742b3fe6e5"><div class="ttname"><a href="class_r_g_w_p_s_find_bucket_topics_c_r.html#ad410180186eb553313fa85742b3fe6e5">RGWPSFindBucketTopicsCR::user_obj</a></div><div class="ttdeci">rgw_raw_obj user_obj</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00943">rgw_sync_module_pubsub.cc:943</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_find_bucket_topics_c_r_html_adf7b8e13e32a21f25fd0ab760d09ef11"><div class="ttname"><a href="class_r_g_w_p_s_find_bucket_topics_c_r.html#adf7b8e13e32a21f25fd0ab760d09ef11">RGWPSFindBucketTopicsCR::sync_env</a></div><div class="ttdeci">RGWDataSyncEnv * sync_env</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00933">rgw_sync_module_pubsub.cc:933</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_find_bucket_topics_c_r_html_aff2c0fe890bf39b48bc5b5e90399a09e"><div class="ttname"><a href="class_r_g_w_p_s_find_bucket_topics_c_r.html#aff2c0fe890bf39b48bc5b5e90399a09e">RGWPSFindBucketTopicsCR::operate</a></div><div class="ttdeci">int operate(const DoutPrefixProvider *dpp) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00965">rgw_sync_module_pubsub.cc:965</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_generic_obj_event_c_b_c_r_html"><div class="ttname"><a href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html">RGWPSGenericObjEventCBCR</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l01266">rgw_sync_module_pubsub.cc:1266</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_generic_obj_event_c_b_c_r_html_a294323e7573ea73747570b2eda958ca3"><div class="ttname"><a href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#a294323e7573ea73747570b2eda958ca3">RGWPSGenericObjEventCBCR::operate</a></div><div class="ttdeci">int operate(const DoutPrefixProvider *dpp) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l01288">rgw_sync_module_pubsub.cc:1288</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_generic_obj_event_c_b_c_r_html_a3331e048df1b3d548332ddf29ac00ea4"><div class="ttname"><a href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#a3331e048df1b3d548332ddf29ac00ea4">RGWPSGenericObjEventCBCR::RGWPSGenericObjEventCBCR</a></div><div class="ttdeci">RGWPSGenericObjEventCBCR(RGWDataSyncCtx *_sc, PSEnvRef _env, rgw_bucket_sync_pipe &amp;_sync_pipe, rgw_obj_key &amp;_key, const ceph::real_time &amp;_mtime, rgw::notify::EventType _event_type)</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l01278">rgw_sync_module_pubsub.cc:1278</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_generic_obj_event_c_b_c_r_html_a471aa976e94d8cf8800952126ebb4b6d"><div class="ttname"><a href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#a471aa976e94d8cf8800952126ebb4b6d">RGWPSGenericObjEventCBCR::s3_event</a></div><div class="ttdeci">EventRef&lt; rgw_pubsub_s3_event &gt; s3_event</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l01275">rgw_sync_module_pubsub.cc:1275</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_generic_obj_event_c_b_c_r_html_a47e951e4b30a875432fcf9571c18a02e"><div class="ttname"><a href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#a47e951e4b30a875432fcf9571c18a02e">RGWPSGenericObjEventCBCR::event_type</a></div><div class="ttdeci">rgw::notify::EventType event_type</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l01273">rgw_sync_module_pubsub.cc:1273</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_generic_obj_event_c_b_c_r_html_a496fe00339ebaec7c491831d51c73648"><div class="ttname"><a href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#a496fe00339ebaec7c491831d51c73648">RGWPSGenericObjEventCBCR::event</a></div><div class="ttdeci">EventRef&lt; rgw_pubsub_event &gt; event</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l01274">rgw_sync_module_pubsub.cc:1274</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_generic_obj_event_c_b_c_r_html_a59ce6cea55f603205011b51ada4b9c14"><div class="ttname"><a href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#a59ce6cea55f603205011b51ada4b9c14">RGWPSGenericObjEventCBCR::bucket</a></div><div class="ttdeci">rgw_bucket bucket</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l01270">rgw_sync_module_pubsub.cc:1270</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_generic_obj_event_c_b_c_r_html_a9f9e7bdbf3b41c110b5c38606edb2e93"><div class="ttname"><a href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#a9f9e7bdbf3b41c110b5c38606edb2e93">RGWPSGenericObjEventCBCR::topics</a></div><div class="ttdeci">TopicsRef topics</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l01276">rgw_sync_module_pubsub.cc:1276</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_generic_obj_event_c_b_c_r_html_ab8dee2bc66d6e43328f7d35a105309fc"><div class="ttname"><a href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#ab8dee2bc66d6e43328f7d35a105309fc">RGWPSGenericObjEventCBCR::key</a></div><div class="ttdeci">rgw_obj_key key</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l01271">rgw_sync_module_pubsub.cc:1271</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_generic_obj_event_c_b_c_r_html_ac20339032c0aea537caf19095c3c7de1"><div class="ttname"><a href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#ac20339032c0aea537caf19095c3c7de1">RGWPSGenericObjEventCBCR::owner</a></div><div class="ttdeci">rgw_user owner</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l01269">rgw_sync_module_pubsub.cc:1269</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_generic_obj_event_c_b_c_r_html_ac8954b15065d9868090bc0d9ca757440"><div class="ttname"><a href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#ac8954b15065d9868090bc0d9ca757440">RGWPSGenericObjEventCBCR::mtime</a></div><div class="ttdeci">ceph::real_time mtime</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l01272">rgw_sync_module_pubsub.cc:1272</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_generic_obj_event_c_b_c_r_html_aceaab4f3a77f297d1fa181338be0eb8d"><div class="ttname"><a href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#aceaab4f3a77f297d1fa181338be0eb8d">RGWPSGenericObjEventCBCR::env</a></div><div class="ttdeci">PSEnvRef env</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l01268">rgw_sync_module_pubsub.cc:1268</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_generic_obj_event_c_b_c_r_html_ae5616fd50a7cb8de961328df0e1b4812"><div class="ttname"><a href="class_r_g_w_p_s_generic_obj_event_c_b_c_r.html#ae5616fd50a7cb8de961328df0e1b4812">RGWPSGenericObjEventCBCR::sc</a></div><div class="ttdeci">RGWDataSyncCtx * sc</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l01267">rgw_sync_module_pubsub.cc:1267</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_handle_obj_create_c_r_html"><div class="ttname"><a href="class_r_g_w_p_s_handle_obj_create_c_r.html">RGWPSHandleObjCreateCR</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l01221">rgw_sync_module_pubsub.cc:1221</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_handle_obj_create_c_r_html_a071180d1d7bc528f817b215c6ad6f9a7"><div class="ttname"><a href="class_r_g_w_p_s_handle_obj_create_c_r.html#a071180d1d7bc528f817b215c6ad6f9a7">RGWPSHandleObjCreateCR::key</a></div><div class="ttdeci">rgw_obj_key key</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l01224">rgw_sync_module_pubsub.cc:1224</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_handle_obj_create_c_r_html_a2b8e121b086c38bc987156ab3203a077"><div class="ttname"><a href="class_r_g_w_p_s_handle_obj_create_c_r.html#a2b8e121b086c38bc987156ab3203a077">RGWPSHandleObjCreateCR::RGWPSHandleObjCreateCR</a></div><div class="ttdeci">RGWPSHandleObjCreateCR(RGWDataSyncCtx *_sc, rgw_bucket_sync_pipe &amp;_sync_pipe, rgw_obj_key &amp;_key, PSEnvRef _env, std::optional&lt; uint64_t &gt; _versioned_epoch)</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l01229">rgw_sync_module_pubsub.cc:1229</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_handle_obj_create_c_r_html_a7d4fb54026bfd0cc2d0c95648c9fa479"><div class="ttname"><a href="class_r_g_w_p_s_handle_obj_create_c_r.html#a7d4fb54026bfd0cc2d0c95648c9fa479">RGWPSHandleObjCreateCR::~RGWPSHandleObjCreateCR</a></div><div class="ttdeci">~RGWPSHandleObjCreateCR() override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l01239">rgw_sync_module_pubsub.cc:1239</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_handle_obj_create_c_r_html_a7df924cdba935761d2e9a23e96d5133c"><div class="ttname"><a href="class_r_g_w_p_s_handle_obj_create_c_r.html#a7df924cdba935761d2e9a23e96d5133c">RGWPSHandleObjCreateCR::versioned_epoch</a></div><div class="ttdeci">std::optional&lt; uint64_t &gt; versioned_epoch</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l01226">rgw_sync_module_pubsub.cc:1226</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_handle_obj_create_c_r_html_aa1142120fb6d3ad1f0f7f3d923ca316d"><div class="ttname"><a href="class_r_g_w_p_s_handle_obj_create_c_r.html#aa1142120fb6d3ad1f0f7f3d923ca316d">RGWPSHandleObjCreateCR::sync_pipe</a></div><div class="ttdeci">rgw_bucket_sync_pipe sync_pipe</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l01223">rgw_sync_module_pubsub.cc:1223</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_handle_obj_create_c_r_html_abec9cb0b9d84088c129d6f8e47338d42"><div class="ttname"><a href="class_r_g_w_p_s_handle_obj_create_c_r.html#abec9cb0b9d84088c129d6f8e47338d42">RGWPSHandleObjCreateCR::topics</a></div><div class="ttdeci">TopicsRef topics</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l01227">rgw_sync_module_pubsub.cc:1227</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_handle_obj_create_c_r_html_acc0ac1a6523f81e04670c13ec53605a5"><div class="ttname"><a href="class_r_g_w_p_s_handle_obj_create_c_r.html#acc0ac1a6523f81e04670c13ec53605a5">RGWPSHandleObjCreateCR::operate</a></div><div class="ttdeci">int operate(const DoutPrefixProvider *dpp) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l01241">rgw_sync_module_pubsub.cc:1241</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_handle_obj_create_c_r_html_aeb54babcd39a3ba6887e981c12e44aec"><div class="ttname"><a href="class_r_g_w_p_s_handle_obj_create_c_r.html#aeb54babcd39a3ba6887e981c12e44aec">RGWPSHandleObjCreateCR::env</a></div><div class="ttdeci">PSEnvRef env</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l01225">rgw_sync_module_pubsub.cc:1225</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_handle_obj_create_c_r_html_afccca42625143aae19374350199fd0fb"><div class="ttname"><a href="class_r_g_w_p_s_handle_obj_create_c_r.html#afccca42625143aae19374350199fd0fb">RGWPSHandleObjCreateCR::sc</a></div><div class="ttdeci">RGWDataSyncCtx * sc</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l01222">rgw_sync_module_pubsub.cc:1222</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_handle_obj_event_c_r_html"><div class="ttname"><a href="class_r_g_w_p_s_handle_obj_event_c_r.html">RGWPSHandleObjEventCR</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l01015">rgw_sync_module_pubsub.cc:1015</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_handle_obj_event_c_r_html_a00d49412c14d328b02edd12275956419"><div class="ttname"><a href="class_r_g_w_p_s_handle_obj_event_c_r.html#a00d49412c14d328b02edd12275956419">RGWPSHandleObjEventCR::event_handled</a></div><div class="ttdeci">bool event_handled</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l01023">rgw_sync_module_pubsub.cc:1023</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_handle_obj_event_c_r_html_a0171884ed1316d33b2c35f49d05311fb"><div class="ttname"><a href="class_r_g_w_p_s_handle_obj_event_c_r.html#a0171884ed1316d33b2c35f49d05311fb">RGWPSHandleObjEventCR::siter</a></div><div class="ttdeci">std::set&lt; std::string &gt;::const_iterator siter</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l01026">rgw_sync_module_pubsub.cc:1026</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_handle_obj_event_c_r_html_a159b407cc30e5ddcb8b0c7d7118ac7d6"><div class="ttname"><a href="class_r_g_w_p_s_handle_obj_event_c_r.html#a159b407cc30e5ddcb8b0c7d7118ac7d6">RGWPSHandleObjEventCR::operate</a></div><div class="ttdeci">int operate(const DoutPrefixProvider *dpp) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l01044">rgw_sync_module_pubsub.cc:1044</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_handle_obj_event_c_r_html_a1b3937a05b7d1c3413c7aadb6406134e"><div class="ttname"><a href="class_r_g_w_p_s_handle_obj_event_c_r.html#a1b3937a05b7d1c3413c7aadb6406134e">RGWPSHandleObjEventCR::s3_event</a></div><div class="ttdeci">const EventRef&lt; rgw_pubsub_s3_event &gt; s3_event</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l01020">rgw_sync_module_pubsub.cc:1020</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_handle_obj_event_c_r_html_a1bf9f16ac0bcc2fbcecb17ed442fee65"><div class="ttname"><a href="class_r_g_w_p_s_handle_obj_event_c_r.html#a1bf9f16ac0bcc2fbcecb17ed442fee65">RGWPSHandleObjEventCR::sc</a></div><div class="ttdeci">RGWDataSyncCtx *const sc</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l01016">rgw_sync_module_pubsub.cc:1016</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_handle_obj_event_c_r_html_a1dfe341c484540ebc7428e84258f50a6"><div class="ttname"><a href="class_r_g_w_p_s_handle_obj_event_c_r.html#a1dfe341c484540ebc7428e84258f50a6">RGWPSHandleObjEventCR::sub</a></div><div class="ttdeci">PSSubscriptionRef sub</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l01024">rgw_sync_module_pubsub.cc:1024</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_handle_obj_event_c_r_html_a258a09e09113be984fd57ce574ee5a25"><div class="ttname"><a href="class_r_g_w_p_s_handle_obj_event_c_r.html#a258a09e09113be984fd57ce574ee5a25">RGWPSHandleObjEventCR::RGWPSHandleObjEventCR</a></div><div class="ttdeci">RGWPSHandleObjEventCR(RGWDataSyncCtx *const _sc, const PSEnvRef _env, const rgw_user &amp;_owner, const EventRef&lt; rgw_pubsub_event &gt; &amp;_event, const EventRef&lt; rgw_pubsub_s3_event &gt; &amp;_s3_event, const TopicsRef &amp;_topics)</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l01029">rgw_sync_module_pubsub.cc:1029</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_handle_obj_event_c_r_html_a50a5b2552d68f456674e981ae7593a86"><div class="ttname"><a href="class_r_g_w_p_s_handle_obj_event_c_r.html#a50a5b2552d68f456674e981ae7593a86">RGWPSHandleObjEventCR::titer</a></div><div class="ttdeci">std::vector&lt; PSTopicConfigRef &gt;::const_iterator titer</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l01025">rgw_sync_module_pubsub.cc:1025</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_handle_obj_event_c_r_html_a57b8b07d2d55f40cf2a24e2baf63ac09"><div class="ttname"><a href="class_r_g_w_p_s_handle_obj_event_c_r.html#a57b8b07d2d55f40cf2a24e2baf63ac09">RGWPSHandleObjEventCR::topics</a></div><div class="ttdeci">const TopicsRef topics</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l01021">rgw_sync_module_pubsub.cc:1021</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_handle_obj_event_c_r_html_a8f29440c7da3eae5ebe7cdd92c4cca59"><div class="ttname"><a href="class_r_g_w_p_s_handle_obj_event_c_r.html#a8f29440c7da3eae5ebe7cdd92c4cca59">RGWPSHandleObjEventCR::env</a></div><div class="ttdeci">const PSEnvRef env</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l01017">rgw_sync_module_pubsub.cc:1017</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_handle_obj_event_c_r_html_aac75c6d5bf2abc05b8953750d8137f40"><div class="ttname"><a href="class_r_g_w_p_s_handle_obj_event_c_r.html#aac75c6d5bf2abc05b8953750d8137f40">RGWPSHandleObjEventCR::owner</a></div><div class="ttdeci">const rgw_user owner</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l01018">rgw_sync_module_pubsub.cc:1018</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_handle_obj_event_c_r_html_abcf90892c3553217018881f1807d740c"><div class="ttname"><a href="class_r_g_w_p_s_handle_obj_event_c_r.html#abcf90892c3553217018881f1807d740c">RGWPSHandleObjEventCR::event</a></div><div class="ttdeci">const EventRef&lt; rgw_pubsub_event &gt; event</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l01019">rgw_sync_module_pubsub.cc:1019</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_handle_obj_event_c_r_html_ae47a7f34b8636a1f2fee10cd7cb7b14f"><div class="ttname"><a href="class_r_g_w_p_s_handle_obj_event_c_r.html#ae47a7f34b8636a1f2fee10cd7cb7b14f">RGWPSHandleObjEventCR::has_subscriptions</a></div><div class="ttdeci">bool has_subscriptions</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l01022">rgw_sync_module_pubsub.cc:1022</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_handle_remote_obj_c_b_c_r_html"><div class="ttname"><a href="class_r_g_w_p_s_handle_remote_obj_c_b_c_r.html">RGWPSHandleRemoteObjCBCR</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l01143">rgw_sync_module_pubsub.cc:1143</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_handle_remote_obj_c_b_c_r_html_a0006bcf65d152efa3aea512aa11ab384"><div class="ttname"><a href="class_r_g_w_p_s_handle_remote_obj_c_b_c_r.html#a0006bcf65d152efa3aea512aa11ab384">RGWPSHandleRemoteObjCBCR::operate</a></div><div class="ttdeci">int operate(const DoutPrefixProvider *dpp) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l01162">rgw_sync_module_pubsub.cc:1162</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_handle_remote_obj_c_b_c_r_html_a2aa2b288f64668cb95fd89f003b3274f"><div class="ttname"><a href="class_r_g_w_p_s_handle_remote_obj_c_b_c_r.html#a2aa2b288f64668cb95fd89f003b3274f">RGWPSHandleRemoteObjCBCR::sync_pipe</a></div><div class="ttdeci">rgw_bucket_sync_pipe sync_pipe</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l01145">rgw_sync_module_pubsub.cc:1145</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_handle_remote_obj_c_b_c_r_html_a39eb4be947cfb814b5eae5f0ca374145"><div class="ttname"><a href="class_r_g_w_p_s_handle_remote_obj_c_b_c_r.html#a39eb4be947cfb814b5eae5f0ca374145">RGWPSHandleRemoteObjCBCR::event</a></div><div class="ttdeci">EventRef&lt; rgw_pubsub_event &gt; event</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l01148">rgw_sync_module_pubsub.cc:1148</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_handle_remote_obj_c_b_c_r_html_a3a924fec456fc3a0179d515348e78190"><div class="ttname"><a href="class_r_g_w_p_s_handle_remote_obj_c_b_c_r.html#a3a924fec456fc3a0179d515348e78190">RGWPSHandleRemoteObjCBCR::RGWPSHandleRemoteObjCBCR</a></div><div class="ttdeci">RGWPSHandleRemoteObjCBCR(RGWDataSyncCtx *_sc, rgw_bucket_sync_pipe &amp;_sync_pipe, rgw_obj_key &amp;_key, PSEnvRef _env, std::optional&lt; uint64_t &gt; _versioned_epoch, TopicsRef &amp;_topics)</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l01152">rgw_sync_module_pubsub.cc:1152</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_handle_remote_obj_c_b_c_r_html_a52c5a635c92a2be51b577391b5056bfc"><div class="ttname"><a href="class_r_g_w_p_s_handle_remote_obj_c_b_c_r.html#a52c5a635c92a2be51b577391b5056bfc">RGWPSHandleRemoteObjCBCR::versioned_epoch</a></div><div class="ttdeci">std::optional&lt; uint64_t &gt; versioned_epoch</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l01147">rgw_sync_module_pubsub.cc:1147</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_handle_remote_obj_c_b_c_r_html_a59b0ebeebc82b3c5333ccc25f612475b"><div class="ttname"><a href="class_r_g_w_p_s_handle_remote_obj_c_b_c_r.html#a59b0ebeebc82b3c5333ccc25f612475b">RGWPSHandleRemoteObjCBCR::topics</a></div><div class="ttdeci">TopicsRef topics</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l01150">rgw_sync_module_pubsub.cc:1150</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_handle_remote_obj_c_b_c_r_html_a8f86ab311c9989b5894dc133bf7ce6ca"><div class="ttname"><a href="class_r_g_w_p_s_handle_remote_obj_c_b_c_r.html#a8f86ab311c9989b5894dc133bf7ce6ca">RGWPSHandleRemoteObjCBCR::env</a></div><div class="ttdeci">PSEnvRef env</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l01146">rgw_sync_module_pubsub.cc:1146</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_handle_remote_obj_c_b_c_r_html_ab37ed19bbe187de7ea345abbb7ed6294"><div class="ttname"><a href="class_r_g_w_p_s_handle_remote_obj_c_b_c_r.html#ab37ed19bbe187de7ea345abbb7ed6294">RGWPSHandleRemoteObjCBCR::s3_event</a></div><div class="ttdeci">EventRef&lt; rgw_pubsub_s3_event &gt; s3_event</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l01149">rgw_sync_module_pubsub.cc:1149</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_handle_remote_obj_c_b_c_r_html_acf7673551c62c36b581a63a5c9871668"><div class="ttname"><a href="class_r_g_w_p_s_handle_remote_obj_c_b_c_r.html#acf7673551c62c36b581a63a5c9871668">RGWPSHandleRemoteObjCBCR::sc</a></div><div class="ttdeci">RGWDataSyncCtx * sc</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l01144">rgw_sync_module_pubsub.cc:1144</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_handle_remote_obj_c_r_html"><div class="ttname"><a href="class_r_g_w_p_s_handle_remote_obj_c_r.html">RGWPSHandleRemoteObjCR</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l01199">rgw_sync_module_pubsub.cc:1199</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_handle_remote_obj_c_r_html_a3d94e7997a1eec90b5a4ebef57257a4b"><div class="ttname"><a href="class_r_g_w_p_s_handle_remote_obj_c_r.html#a3d94e7997a1eec90b5a4ebef57257a4b">RGWPSHandleRemoteObjCR::RGWPSHandleRemoteObjCR</a></div><div class="ttdeci">RGWPSHandleRemoteObjCR(RGWDataSyncCtx *_sc, rgw_bucket_sync_pipe &amp;_sync_pipe, rgw_obj_key &amp;_key, PSEnvRef _env, std::optional&lt; uint64_t &gt; _versioned_epoch, TopicsRef &amp;_topics)</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l01205">rgw_sync_module_pubsub.cc:1205</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_handle_remote_obj_c_r_html_a3ee95bc7a11940c31385aa4173add887"><div class="ttname"><a href="class_r_g_w_p_s_handle_remote_obj_c_r.html#a3ee95bc7a11940c31385aa4173add887">RGWPSHandleRemoteObjCR::versioned_epoch</a></div><div class="ttdeci">std::optional&lt; uint64_t &gt; versioned_epoch</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l01202">rgw_sync_module_pubsub.cc:1202</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_handle_remote_obj_c_r_html_a4c7c687e055b18ec0ccef3ad5a6d0d1a"><div class="ttname"><a href="class_r_g_w_p_s_handle_remote_obj_c_r.html#a4c7c687e055b18ec0ccef3ad5a6d0d1a">RGWPSHandleRemoteObjCR::~RGWPSHandleRemoteObjCR</a></div><div class="ttdeci">~RGWPSHandleRemoteObjCR() override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l01214">rgw_sync_module_pubsub.cc:1214</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_handle_remote_obj_c_r_html_a4f3deff5d134b2b61453c871be5f5429"><div class="ttname"><a href="class_r_g_w_p_s_handle_remote_obj_c_r.html#a4f3deff5d134b2b61453c871be5f5429">RGWPSHandleRemoteObjCR::topics</a></div><div class="ttdeci">TopicsRef topics</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l01203">rgw_sync_module_pubsub.cc:1203</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_handle_remote_obj_c_r_html_a5f2ce6d411b7709726ffcc3af16312b1"><div class="ttname"><a href="class_r_g_w_p_s_handle_remote_obj_c_r.html#a5f2ce6d411b7709726ffcc3af16312b1">RGWPSHandleRemoteObjCR::allocate_callback</a></div><div class="ttdeci">RGWStatRemoteObjCBCR * allocate_callback() override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l01216">rgw_sync_module_pubsub.cc:1216</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_handle_remote_obj_c_r_html_a8a6fc4415a8a2462ac23ff070205f2bb"><div class="ttname"><a href="class_r_g_w_p_s_handle_remote_obj_c_r.html#a8a6fc4415a8a2462ac23ff070205f2bb">RGWPSHandleRemoteObjCR::env</a></div><div class="ttdeci">PSEnvRef env</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l01201">rgw_sync_module_pubsub.cc:1201</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_handle_remote_obj_c_r_html_ac8ee982c5f54fa1a97ace8c5df21a068"><div class="ttname"><a href="class_r_g_w_p_s_handle_remote_obj_c_r.html#ac8ee982c5f54fa1a97ace8c5df21a068">RGWPSHandleRemoteObjCR::sync_pipe</a></div><div class="ttdeci">rgw_bucket_sync_pipe sync_pipe</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l01200">rgw_sync_module_pubsub.cc:1200</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_init_env_c_b_c_r_html"><div class="ttname"><a href="class_r_g_w_p_s_init_env_c_b_c_r.html">RGWPSInitEnvCBCR</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00877">rgw_sync_module_pubsub.cc:877</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_init_env_c_b_c_r_html_a2a06c58c300901e0fe3394d64e337084"><div class="ttname"><a href="class_r_g_w_p_s_init_env_c_b_c_r.html#a2a06c58c300901e0fe3394d64e337084">RGWPSInitEnvCBCR::env</a></div><div class="ttdeci">PSEnvRef env</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00880">rgw_sync_module_pubsub.cc:880</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_init_env_c_b_c_r_html_a7f49632b07c41398f758c200bd150587"><div class="ttname"><a href="class_r_g_w_p_s_init_env_c_b_c_r.html#a7f49632b07c41398f758c200bd150587">RGWPSInitEnvCBCR::RGWPSInitEnvCBCR</a></div><div class="ttdeci">RGWPSInitEnvCBCR(RGWDataSyncCtx *_sc, PSEnvRef &amp;_env)</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00886">rgw_sync_module_pubsub.cc:886</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_init_env_c_b_c_r_html_aa4f8828e4f628249a52bad2d75165ea8"><div class="ttname"><a href="class_r_g_w_p_s_init_env_c_b_c_r.html#aa4f8828e4f628249a52bad2d75165ea8">RGWPSInitEnvCBCR::create_user</a></div><div class="ttdeci">rgw_user_create_params create_user</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00883">rgw_sync_module_pubsub.cc:883</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_init_env_c_b_c_r_html_ab305272d1f2d827cacf6a1008b66d953"><div class="ttname"><a href="class_r_g_w_p_s_init_env_c_b_c_r.html#ab305272d1f2d827cacf6a1008b66d953">RGWPSInitEnvCBCR::sync_env</a></div><div class="ttdeci">RGWDataSyncEnv * sync_env</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00879">rgw_sync_module_pubsub.cc:879</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_init_env_c_b_c_r_html_ad1d4b24c6f68f978507b91d565b9714d"><div class="ttname"><a href="class_r_g_w_p_s_init_env_c_b_c_r.html#ad1d4b24c6f68f978507b91d565b9714d">RGWPSInitEnvCBCR::operate</a></div><div class="ttdeci">int operate(const DoutPrefixProvider *dpp) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00890">rgw_sync_module_pubsub.cc:890</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_init_env_c_b_c_r_html_ad8a0eb4248223416175df7d91d5e15a8"><div class="ttname"><a href="class_r_g_w_p_s_init_env_c_b_c_r.html#ad8a0eb4248223416175df7d91d5e15a8">RGWPSInitEnvCBCR::conf</a></div><div class="ttdeci">PSConfigRef &amp; conf</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00881">rgw_sync_module_pubsub.cc:881</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_init_env_c_b_c_r_html_af0b859183376647ce88f5f799936fc2e"><div class="ttname"><a href="class_r_g_w_p_s_init_env_c_b_c_r.html#af0b859183376647ce88f5f799936fc2e">RGWPSInitEnvCBCR::sc</a></div><div class="ttdeci">RGWDataSyncCtx * sc</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00878">rgw_sync_module_pubsub.cc:878</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_init_env_c_b_c_r_html_af8380d34a7037f4a8a19a976342fd320"><div class="ttname"><a href="class_r_g_w_p_s_init_env_c_b_c_r.html#af8380d34a7037f4a8a19a976342fd320">RGWPSInitEnvCBCR::get_user_info</a></div><div class="ttdeci">rgw_get_user_info_params get_user_info</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00884">rgw_sync_module_pubsub.cc:884</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_sync_module_html_a596ed4a3616ca1c519717e6fd1e9b405"><div class="ttname"><a href="class_r_g_w_p_s_sync_module.html#a596ed4a3616ca1c519717e6fd1e9b405">RGWPSSyncModule::create_instance</a></div><div class="ttdeci">int create_instance(const DoutPrefixProvider *dpp, CephContext *cct, const JSONFormattable &amp;config, RGWSyncModuleInstanceRef *instance) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l01398">rgw_sync_module_pubsub.cc:1398</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_sync_module_instance_html"><div class="ttname"><a href="class_r_g_w_p_s_sync_module_instance.html">RGWPSSyncModuleInstance</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8h_source.html#l00024">rgw_sync_module_pubsub.h:24</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_sync_module_instance_html_a25bb4611b5f673aed7ea11f9a8aee289"><div class="ttname"><a href="class_r_g_w_p_s_sync_module_instance.html#a25bb4611b5f673aed7ea11f9a8aee289">RGWPSSyncModuleInstance::get_rest_filter</a></div><div class="ttdeci">RGWRESTMgr * get_rest_filter(int dialect, RGWRESTMgr *orig) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l01387">rgw_sync_module_pubsub.cc:1387</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_sync_module_instance_html_a9c8b809cb670ca51913146eec6dd85e2"><div class="ttname"><a href="class_r_g_w_p_s_sync_module_instance.html#a9c8b809cb670ca51913146eec6dd85e2">RGWPSSyncModuleInstance::data_handler</a></div><div class="ttdeci">std::unique_ptr&lt; RGWPSDataSyncModule &gt; data_handler</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8h_source.html#l00025">rgw_sync_module_pubsub.h:25</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_sync_module_instance_html_aa8506bb372512f986189a095e808aa2c"><div class="ttname"><a href="class_r_g_w_p_s_sync_module_instance.html#aa8506bb372512f986189a095e808aa2c">RGWPSSyncModuleInstance::get_data_handler</a></div><div class="ttdeci">RGWDataSyncModule * get_data_handler() override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l01382">rgw_sync_module_pubsub.cc:1382</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_sync_module_instance_html_ab3bb1e4cbb8234bdf176c21dc6ada5c1"><div class="ttname"><a href="class_r_g_w_p_s_sync_module_instance.html#ab3bb1e4cbb8234bdf176c21dc6ada5c1">RGWPSSyncModuleInstance::should_full_sync</a></div><div class="ttdeci">virtual bool should_full_sync() const override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l01394">rgw_sync_module_pubsub.cc:1394</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_sync_module_instance_html_ac1aa3dac184a028bb0d626024183f26d"><div class="ttname"><a href="class_r_g_w_p_s_sync_module_instance.html#ac1aa3dac184a028bb0d626024183f26d">RGWPSSyncModuleInstance::RGWPSSyncModuleInstance</a></div><div class="ttdeci">RGWPSSyncModuleInstance(const DoutPrefixProvider *dpp, CephContext *cct, const JSONFormattable &amp;config)</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l01369">rgw_sync_module_pubsub.cc:1369</a></div></div>
<div class="ttc" id="aclass_r_g_w_p_s_sync_module_instance_html_afe7d7710adea03771bb7c033acbcb9d7"><div class="ttname"><a href="class_r_g_w_p_s_sync_module_instance.html#afe7d7710adea03771bb7c033acbcb9d7">RGWPSSyncModuleInstance::effective_conf</a></div><div class="ttdeci">JSONFormattable effective_conf</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8h_source.html#l00026">rgw_sync_module_pubsub.h:26</a></div></div>
<div class="ttc" id="aclass_r_g_w_pub_sub_endpoint_html_a16e4ed1be414fb196fd3e4db4511dff1"><div class="ttname"><a href="class_r_g_w_pub_sub_endpoint.html#a16e4ed1be414fb196fd3e4db4511dff1">RGWPubSubEndpoint::Ptr</a></div><div class="ttdeci">std::unique_ptr&lt; RGWPubSubEndpoint &gt; Ptr</div><div class="ttdef"><b>Definition</b> <a href="rgw__pubsub__push_8h_source.html#l00027">rgw_pubsub_push.h:27</a></div></div>
<div class="ttc" id="aclass_r_g_w_pub_sub_endpoint_html_a9003e177cc55046e2a889a07a42a2cb2"><div class="ttname"><a href="class_r_g_w_pub_sub_endpoint.html#a9003e177cc55046e2a889a07a42a2cb2">RGWPubSubEndpoint::create</a></div><div class="ttdeci">static Ptr create(const std::string &amp;endpoint, const std::string &amp;topic, const RGWHTTPArgs &amp;args, CephContext *cct=nullptr)</div><div class="ttdef"><b>Definition</b> <a href="rgw__pubsub__push_8cc_source.html#l00700">rgw_pubsub_push.cc:700</a></div></div>
<div class="ttc" id="aclass_r_g_w_pub_sub_html"><div class="ttname"><a href="class_r_g_w_pub_sub.html">RGWPubSub</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__pubsub_8h_source.html#l00598">rgw_pubsub.h:599</a></div></div>
<div class="ttc" id="aclass_r_g_w_pub_sub_html_a42a64bee787ac29c7963e9e81aa8fe45"><div class="ttname"><a href="class_r_g_w_pub_sub.html#a42a64bee787ac29c7963e9e81aa8fe45">RGWPubSub::get_sub_meta_obj</a></div><div class="ttdeci">void get_sub_meta_obj(const std::string &amp;name, rgw_raw_obj *obj) const</div><div class="ttdef"><b>Definition</b> <a href="rgw__pubsub_8cc_source.html#l00975">rgw_pubsub.cc:975</a></div></div>
<div class="ttc" id="aclass_r_g_w_pub_sub_html_a7fe136b8c366a902d1cae1ccfa91dde8"><div class="ttname"><a href="class_r_g_w_pub_sub.html#a7fe136b8c366a902d1cae1ccfa91dde8">RGWPubSub::get_bucket_meta_obj</a></div><div class="ttdeci">void get_bucket_meta_obj(const rgw_bucket &amp;bucket, rgw_raw_obj *obj) const</div><div class="ttdef"><b>Definition</b> <a href="rgw__pubsub_8cc_source.html#l00971">rgw_pubsub.cc:971</a></div></div>
<div class="ttc" id="aclass_r_g_w_pub_sub_html_afbed72ac582056d15fd13d9ebc591f0f"><div class="ttname"><a href="class_r_g_w_pub_sub.html#afbed72ac582056d15fd13d9ebc591f0f">RGWPubSub::get_meta_obj</a></div><div class="ttdeci">void get_meta_obj(rgw_raw_obj *obj) const</div><div class="ttdef"><b>Definition</b> <a href="rgw__pubsub_8cc_source.html#l00967">rgw_pubsub.cc:967</a></div></div>
<div class="ttc" id="aclass_r_g_w_r_e_s_t_mgr___pub_sub_html"><div class="ttname"><a href="class_r_g_w_r_e_s_t_mgr___pub_sub.html">RGWRESTMgr_PubSub</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub__rest_8h_source.html#l00008">rgw_sync_module_pubsub_rest.h:8</a></div></div>
<div class="ttc" id="aclass_r_g_w_r_e_s_t_mgr_html"><div class="ttname"><a href="class_r_g_w_r_e_s_t_mgr.html">RGWRESTMgr</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__rest_8h_source.html#l00580">rgw_rest.h:580</a></div></div>
<div class="ttc" id="aclass_r_g_w_realm_html"><div class="ttname"><a href="class_r_g_w_realm.html">RGWRealm</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__zone_8h_source.html#l01119">rgw_zone.h:1120</a></div></div>
<div class="ttc" id="aclass_r_g_w_simple_rados_read_c_r_html"><div class="ttname"><a href="class_r_g_w_simple_rados_read_c_r.html">RGWSimpleRadosReadCR</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__cr__rados_8h_source.html#l00401">rgw_cr_rados.h:401</a></div></div>
<div class="ttc" id="aclass_r_g_w_singleton_c_r_html"><div class="ttname"><a href="class_r_g_w_singleton_c_r.html">RGWSingletonCR</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00338">rgw_sync_module_pubsub.cc:338</a></div></div>
<div class="ttc" id="aclass_r_g_w_singleton_c_r_html_a482e86c0bc1551827659f65ee24d0999"><div class="ttname"><a href="class_r_g_w_singleton_c_r.html#a482e86c0bc1551827659f65ee24d0999">RGWSingletonCR::return_result</a></div><div class="ttdeci">virtual void return_result(const DoutPrefixProvider *dpp, T *result)</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00401">rgw_sync_module_pubsub.cc:401</a></div></div>
<div class="ttc" id="aclass_r_g_w_singleton_c_r_html_a7f763ccf3f2a19bc38c4ac7d8e2bb2bc"><div class="ttname"><a href="class_r_g_w_singleton_c_r.html#a7f763ccf3f2a19bc38c4ac7d8e2bb2bc">RGWSingletonCR::WrapperCR</a></div><div class="ttdeci">friend class WrapperCR</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00339">rgw_sync_module_pubsub.cc:339</a></div></div>
<div class="ttc" id="aclass_r_g_w_singleton_c_r_html_a8a9d0809e3201b86496a37210e0f210c"><div class="ttname"><a href="class_r_g_w_singleton_c_r.html#a8a9d0809e3201b86496a37210e0f210c">RGWSingletonCR::started</a></div><div class="ttdeci">bool started</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00342">rgw_sync_module_pubsub.cc:342</a></div></div>
<div class="ttc" id="aclass_r_g_w_singleton_c_r_html_a8a9d7e7272c3e70d22965f77efe10249"><div class="ttname"><a href="class_r_g_w_singleton_c_r.html#a8a9d7e7272c3e70d22965f77efe10249">RGWSingletonCR::operate_ret</a></div><div class="ttdeci">int operate_ret</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00343">rgw_sync_module_pubsub.cc:343</a></div></div>
<div class="ttc" id="aclass_r_g_w_singleton_c_r_html_aa8b6cc5695d596f614e3498f54720bc1"><div class="ttname"><a href="class_r_g_w_singleton_c_r.html#aa8b6cc5695d596f614e3498f54720bc1">RGWSingletonCR::WaiterInfoRef</a></div><div class="ttdeci">std::shared_ptr&lt; WaiterInfo &gt; WaiterInfoRef</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00349">rgw_sync_module_pubsub.cc:349</a></div></div>
<div class="ttc" id="aclass_r_g_w_singleton_c_r_html_ab35c142506f45e8a2d5cfbc3cabf3563"><div class="ttname"><a href="class_r_g_w_singleton_c_r.html#ab35c142506f45e8a2d5cfbc3cabf3563">RGWSingletonCR::RGWSingletonCR</a></div><div class="ttdeci">RGWSingletonCR(CephContext *_cct)</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00404">rgw_sync_module_pubsub.cc:404</a></div></div>
<div class="ttc" id="aclass_r_g_w_singleton_c_r_html_ab91fb80e453b0fc5fd4fc596ff128b45"><div class="ttname"><a href="class_r_g_w_singleton_c_r.html#ab91fb80e453b0fc5fd4fc596ff128b45">RGWSingletonCR::execute</a></div><div class="ttdeci">int execute(const DoutPrefixProvider *dpp, RGWCoroutine *caller, T *result=nullptr)</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00407">rgw_sync_module_pubsub.cc:407</a></div></div>
<div class="ttc" id="aclass_r_g_w_singleton_c_r_html_acad4a5551313873c792e7d505a833abc"><div class="ttname"><a href="class_r_g_w_singleton_c_r.html#acad4a5551313873c792e7d505a833abc">RGWSingletonCR::get_next_waiter</a></div><div class="ttdeci">bool get_next_waiter(WaiterInfoRef *waiter)</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00360">rgw_sync_module_pubsub.cc:360</a></div></div>
<div class="ttc" id="aclass_r_g_w_singleton_c_r_html_ad547fc89f0175d7f7628b445723cbd48"><div class="ttname"><a href="class_r_g_w_singleton_c_r.html#ad547fc89f0175d7f7628b445723cbd48">RGWSingletonCR::operate_wrapper</a></div><div class="ttdeci">int operate_wrapper(const DoutPrefixProvider *dpp) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00371">rgw_sync_module_pubsub.cc:371</a></div></div>
<div class="ttc" id="aclass_r_g_w_singleton_c_r_html_ae3902032df77636ea44b67acffe42e5c"><div class="ttname"><a href="class_r_g_w_singleton_c_r.html#ae3902032df77636ea44b67acffe42e5c">RGWSingletonCR::wrapper_state</a></div><div class="ttdeci">boost::asio::coroutine wrapper_state</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00341">rgw_sync_module_pubsub.cc:341</a></div></div>
<div class="ttc" id="aclass_r_g_w_singleton_c_r_html_ae4a0ab836402e2ec0995a90d60a0f0fd"><div class="ttname"><a href="class_r_g_w_singleton_c_r.html#ae4a0ab836402e2ec0995a90d60a0f0fd">RGWSingletonCR::waiters</a></div><div class="ttdeci">deque&lt; WaiterInfoRef &gt; waiters</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00351">rgw_sync_module_pubsub.cc:351</a></div></div>
<div class="ttc" id="aclass_r_g_w_singleton_c_r_html_ae5103028f3e6e71346e051697ce8019f"><div class="ttname"><a href="class_r_g_w_singleton_c_r.html#ae5103028f3e6e71346e051697ce8019f">RGWSingletonCR::add_waiter</a></div><div class="ttdeci">void add_waiter(RGWCoroutine *cr, T *result)</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00353">rgw_sync_module_pubsub.cc:353</a></div></div>
<div class="ttc" id="aclass_r_g_w_stat_remote_obj_c_b_c_r_html"><div class="ttname"><a href="class_r_g_w_stat_remote_obj_c_b_c_r.html">RGWStatRemoteObjCBCR</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module_8h_source.html#l00142">rgw_sync_module.h:142</a></div></div>
<div class="ttc" id="aclass_r_g_w_stat_remote_obj_c_b_c_r_html_a1c4c474c82f713e2f6c4c960bb45f15f"><div class="ttname"><a href="class_r_g_w_stat_remote_obj_c_b_c_r.html#a1c4c474c82f713e2f6c4c960bb45f15f">RGWStatRemoteObjCBCR::size</a></div><div class="ttdeci">uint64_t size</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module_8h_source.html#l00151">rgw_sync_module.h:151</a></div></div>
<div class="ttc" id="aclass_r_g_w_stat_remote_obj_c_b_c_r_html_a5922639e84e215801ee018ba9b4f5c32"><div class="ttname"><a href="class_r_g_w_stat_remote_obj_c_b_c_r.html#a5922639e84e215801ee018ba9b4f5c32">RGWStatRemoteObjCBCR::attrs</a></div><div class="ttdeci">std::map&lt; std::string, bufferlist &gt; attrs</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module_8h_source.html#l00153">rgw_sync_module.h:153</a></div></div>
<div class="ttc" id="aclass_r_g_w_stat_remote_obj_c_b_c_r_html_acc62327d02a31f0b233678d30c6e2960"><div class="ttname"><a href="class_r_g_w_stat_remote_obj_c_b_c_r.html#acc62327d02a31f0b233678d30c6e2960">RGWStatRemoteObjCBCR::mtime</a></div><div class="ttdeci">ceph::real_time mtime</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module_8h_source.html#l00150">rgw_sync_module.h:150</a></div></div>
<div class="ttc" id="aclass_r_g_w_stat_remote_obj_c_b_c_r_html_aed705de4ac538552a3c4581ff73fe0d2"><div class="ttname"><a href="class_r_g_w_stat_remote_obj_c_b_c_r.html#aed705de4ac538552a3c4581ff73fe0d2">RGWStatRemoteObjCBCR::key</a></div><div class="ttdeci">rgw_obj_key key</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module_8h_source.html#l00148">rgw_sync_module.h:148</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_bucket_html"><div class="ttname"><a href="classrgw_1_1sal_1_1_bucket.html">rgw::sal::Bucket</a></div><div class="ttdoc">Bucket abstraction</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l00553">rgw_sal.h:553</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_bucket_html_a8b49a035b8b328338492032f312fc3ca"><div class="ttname"><a href="classrgw_1_1sal_1_1_bucket.html#a8b49a035b8b328338492032f312fc3ca">rgw::sal::Bucket::get_attrs</a></div><div class="ttdeci">virtual Attrs &amp; get_attrs(void)</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l00637">rgw_sal.h:637</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_store_html_abe4f0602b771d5549a02c0a326d6a832"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_store.html#abe4f0602b771d5549a02c0a326d6a832">rgw::sal::RadosStore::svc</a></div><div class="ttdeci">RGWServices * svc()</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8h_source.html#l00501">rgw_sal_rados.h:501</a></div></div>
<div class="ttc" id="acls__fifo__legacy_8cc_html_aa76801f7597f40e158b5f38b2e6466c5"><div class="ttname"><a href="cls__fifo__legacy_8cc.html#aa76801f7597f40e158b5f38b2e6466c5">cct</a></div><div class="ttdeci">CephContext * cct</div><div class="ttdef"><b>Definition</b> <a href="cls__fifo__legacy_8cc_source.html#l00247">cls_fifo_legacy.cc:247</a></div></div>
<div class="ttc" id="adbstore__tests_8cc_html_a3284f7a2d0ea04744ec7605cbacce0de"><div class="ttname"><a href="dbstore__tests_8cc.html#a3284f7a2d0ea04744ec7605cbacce0de">args</a></div><div class="ttdeci">vector&lt; const char * &gt; args</div><div class="ttdef"><b>Definition</b> <a href="dbstore__tests_8cc_source.html#l00014">dbstore_tests.cc:14</a></div></div>
<div class="ttc" id="anamespacergw_1_1notify_html_a0de1420337c1b154fc1ac06c8edc8dd8"><div class="ttname"><a href="namespacergw_1_1notify.html#a0de1420337c1b154fc1ac06c8edc8dd8">rgw::notify::to_event_string</a></div><div class="ttdeci">std::string to_event_string(EventType t)</div><div class="ttdef"><b>Definition</b> <a href="rgw__notify__event__type_8cc_source.html#l00082">rgw_notify_event_type.cc:82</a></div></div>
<div class="ttc" id="anamespacergw_1_1notify_html_a11587407d1aff95c9cb4a10979ba813b"><div class="ttname"><a href="namespacergw_1_1notify.html#a11587407d1aff95c9cb4a10979ba813b">rgw::notify::EventType</a></div><div class="ttdeci">EventType</div><div class="ttdef"><b>Definition</b> <a href="rgw__notify__event__type_8h_source.html#l00009">rgw_notify_event_type.h:9</a></div></div>
<div class="ttc" id="anamespacergw_1_1notify_html_a11587407d1aff95c9cb4a10979ba813baba7b131f3f73a847c08afe620d978dd0"><div class="ttname"><a href="namespacergw_1_1notify.html#a11587407d1aff95c9cb4a10979ba813baba7b131f3f73a847c08afe620d978dd0">rgw::notify::ObjectCreated</a></div><div class="ttdeci">@ ObjectCreated</div><div class="ttdef"><b>Definition</b> <a href="rgw__notify__event__type_8h_source.html#l00010">rgw_notify_event_type.h:10</a></div></div>
<div class="ttc" id="anamespacergw_1_1notify_html_a11587407d1aff95c9cb4a10979ba813bae65163a7367caa28e2d82e0cf8850088"><div class="ttname"><a href="namespacergw_1_1notify.html#a11587407d1aff95c9cb4a10979ba813bae65163a7367caa28e2d82e0cf8850088">rgw::notify::ObjectRemovedDeleteMarkerCreated</a></div><div class="ttdeci">@ ObjectRemovedDeleteMarkerCreated</div><div class="ttdef"><b>Definition</b> <a href="rgw__notify__event__type_8h_source.html#l00017">rgw_notify_event_type.h:17</a></div></div>
<div class="ttc" id="anamespacergw_1_1notify_html_a11587407d1aff95c9cb4a10979ba813baec295ba7b04d1a20faf9338e9b217fc5"><div class="ttname"><a href="namespacergw_1_1notify.html#a11587407d1aff95c9cb4a10979ba813baec295ba7b04d1a20faf9338e9b217fc5">rgw::notify::ObjectRemovedDelete</a></div><div class="ttdeci">@ ObjectRemovedDelete</div><div class="ttdef"><b>Definition</b> <a href="rgw__notify__event__type_8h_source.html#l00016">rgw_notify_event_type.h:16</a></div></div>
<div class="ttc" id="anamespacergw_1_1notify_html_aa5f191df4111ed6a5034ba18ae6f8932"><div class="ttname"><a href="namespacergw_1_1notify.html#aa5f191df4111ed6a5034ba18ae6f8932">rgw::notify::to_ceph_string</a></div><div class="ttdeci">std::string to_ceph_string(EventType t)</div><div class="ttdef"><b>Definition</b> <a href="rgw__notify__event__type_8cc_source.html#l00051">rgw_notify_event_type.cc:51</a></div></div>
<div class="ttc" id="anamespacestd_html"><div class="ttname"><a href="namespacestd.html">std</a></div><div class="ttdef"><b>Definition</b> <a href="picojson_8h_source.html#l01152">picojson.h:1152</a></div></div>
<div class="ttc" id="argw__admin_8cc_html_a6fdb26d64b14d837b60e83a6ca3e2863"><div class="ttname"><a href="rgw__admin_8cc.html#a6fdb26d64b14d837b60e83a6ca3e2863">store</a></div><div class="ttdeci">static rgw::sal::Store * store</div><div class="ttdef"><b>Definition</b> <a href="rgw__admin_8cc_source.html#l00079">rgw_admin.cc:79</a></div></div>
<div class="ttc" id="argw__admin_8cc_html_ab596b9e1a1fc78e98a4d13a66578b658"><div class="ttname"><a href="rgw__admin_8cc.html#ab596b9e1a1fc78e98a4d13a66578b658">encode_json</a></div><div class="ttdeci">void encode_json(const char *name, const RGWBucketSyncFlowManager::pipe_set &amp;pset, Formatter *f)</div><div class="ttdef"><b>Definition</b> <a href="rgw__admin_8cc_source.html#l02560">rgw_admin.cc:2560</a></div></div>
<div class="ttc" id="argw__admin_8cc_html_afe3e74bcdf0327f8777c02b83cfea5b5"><div class="ttname"><a href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a></div><div class="ttdeci">static const DoutPrefixProvider * dpp()</div><div class="ttdef"><b>Definition</b> <a href="rgw__admin_8cc_source.html#l00081">rgw_admin.cc:81</a></div></div>
<div class="ttc" id="argw__common_8h_html"><div class="ttname"><a href="rgw__common_8h.html">rgw_common.h</a></div></div>
<div class="ttc" id="argw__common_8h_html_a5a1a44fe2de69e33f5ccfbb3a659c82a"><div class="ttname"><a href="rgw__common_8h.html#a5a1a44fe2de69e33f5ccfbb3a659c82a">RGW_REST_S3</a></div><div class="ttdeci">#define RGW_REST_S3</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l00167">rgw_common.h:167</a></div></div>
<div class="ttc" id="argw__common_8h_html_a7f53e4298c577378477ce3009f21c769"><div class="ttname"><a href="rgw__common_8h.html#a7f53e4298c577378477ce3009f21c769">RGW_ATTR_LC</a></div><div class="ttdeci">#define RGW_ATTR_LC</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l00072">rgw_common.h:72</a></div></div>
<div class="ttc" id="argw__common_8h_html_ade0f9ba81b5312d54a44746055c920be"><div class="ttname"><a href="rgw__common_8h.html#ade0f9ba81b5312d54a44746055c920be">RGW_ATTR_PREFIX</a></div><div class="ttdeci">#define RGW_ATTR_PREFIX</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l00058">rgw_common.h:58</a></div></div>
<div class="ttc" id="argw__common_8h_html_af16fc319d56173215e1a7fccad799d6c"><div class="ttname"><a href="rgw__common_8h.html#af16fc319d56173215e1a7fccad799d6c">ERR_USER_EXIST</a></div><div class="ttdeci">#define ERR_USER_EXIST</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l00224">rgw_common.h:224</a></div></div>
<div class="ttc" id="argw__coroutine_8h_html"><div class="ttname"><a href="rgw__coroutine_8h.html">rgw_coroutine.h</a></div></div>
<div class="ttc" id="argw__cr__rados_8h_html"><div class="ttname"><a href="rgw__cr__rados_8h.html">rgw_cr_rados.h</a></div></div>
<div class="ttc" id="argw__cr__rest_8h_html"><div class="ttname"><a href="rgw__cr__rest_8h.html">rgw_cr_rest.h</a></div></div>
<div class="ttc" id="argw__cr__tools_8h_html"><div class="ttname"><a href="rgw__cr__tools_8h.html">rgw_cr_tools.h</a></div></div>
<div class="ttc" id="argw__cr__tools_8h_html_a167ac77a509121e34667659eea294483"><div class="ttname"><a href="rgw__cr__tools_8h.html#a167ac77a509121e34667659eea294483">RGWBucketCreateLocalCR</a></div><div class="ttdeci">RGWSimpleWriteOnlyAsyncCR&lt; rgw_bucket_create_local_params &gt; RGWBucketCreateLocalCR</div><div class="ttdef"><b>Definition</b> <a href="rgw__cr__tools_8h_source.html#l00055">rgw_cr_tools.h:55</a></div></div>
<div class="ttc" id="argw__cr__tools_8h_html_a38e1914ad3d44c3fc59fb313f28bbcb1"><div class="ttname"><a href="rgw__cr__tools_8h.html#a38e1914ad3d44c3fc59fb313f28bbcb1">RGWGetBucketInfoCR</a></div><div class="ttdeci">RGWSimpleAsyncCR&lt; rgw_get_bucket_info_params, rgw_get_bucket_info_result &gt; RGWGetBucketInfoCR</div><div class="ttdef"><b>Definition</b> <a href="rgw__cr__tools_8h_source.html#l00047">rgw_cr_tools.h:47</a></div></div>
<div class="ttc" id="argw__cr__tools_8h_html_a6574e07e6e1d4ff7ff46e824d3ee1791"><div class="ttname"><a href="rgw__cr__tools_8h.html#a6574e07e6e1d4ff7ff46e824d3ee1791">RGWGetUserInfoCR</a></div><div class="ttdeci">RGWSimpleAsyncCR&lt; rgw_get_user_info_params, RGWUserInfo &gt; RGWGetUserInfoCR</div><div class="ttdef"><b>Definition</b> <a href="rgw__cr__tools_8h_source.html#l00036">rgw_cr_tools.h:36</a></div></div>
<div class="ttc" id="argw__cr__tools_8h_html_a77993615d2488afa7addd93a603e32c5"><div class="ttname"><a href="rgw__cr__tools_8h.html#a77993615d2488afa7addd93a603e32c5">RGWBucketLifecycleConfigCR</a></div><div class="ttdeci">RGWSimpleWriteOnlyAsyncCR&lt; rgw_bucket_lifecycle_config_params &gt; RGWBucketLifecycleConfigCR</div><div class="ttdef"><b>Definition</b> <a href="rgw__cr__tools_8h_source.html#l00074">rgw_cr_tools.h:74</a></div></div>
<div class="ttc" id="argw__cr__tools_8h_html_abf95ff846d1dc3626ed9c61af109a6c4"><div class="ttname"><a href="rgw__cr__tools_8h.html#abf95ff846d1dc3626ed9c61af109a6c4">RGWObjectSimplePutCR</a></div><div class="ttdeci">RGWSimpleWriteOnlyAsyncCR&lt; rgw_object_simple_put_params &gt; RGWObjectSimplePutCR</div><div class="ttdef"><b>Definition</b> <a href="rgw__cr__tools_8h_source.html#l00065">rgw_cr_tools.h:65</a></div></div>
<div class="ttc" id="argw__cr__tools_8h_html_ac04dba484d5d560d4949fd9e8009b0ff"><div class="ttname"><a href="rgw__cr__tools_8h.html#ac04dba484d5d560d4949fd9e8009b0ff">RGWUserCreateCR</a></div><div class="ttdeci">RGWSimpleWriteOnlyAsyncCR&lt; rgw_user_create_params &gt; RGWUserCreateCR</div><div class="ttdef"><b>Definition</b> <a href="rgw__cr__tools_8h_source.html#l00030">rgw_cr_tools.h:30</a></div></div>
<div class="ttc" id="argw__data__sync_8h_html"><div class="ttname"><a href="rgw__data__sync_8h.html">rgw_data_sync.h</a></div></div>
<div class="ttc" id="argw__keystone_8cc_html_a97140a592af15535629f284708b8f5b4"><div class="ttname"><a href="rgw__keystone_8cc.html#a97140a592af15535629f284708b8f5b4">to_string</a></div><div class="ttdeci">static std::string to_string(const std::string_view &amp;s)</div><div class="ttdef"><b>Definition</b> <a href="rgw__keystone_8cc_source.html#l00571">rgw_keystone.cc:571</a></div></div>
<div class="ttc" id="argw__log__backing_8h_html_adc91400029fb575818b2a0ccf89e7928"><div class="ttname"><a href="rgw__log__backing_8h.html#adc91400029fb575818b2a0ccf89e7928">encode</a></div><div class="ttdeci">void encode(const log_type &amp;type, ceph::buffer::list &amp;bl)</div><div class="ttdef"><b>Definition</b> <a href="rgw__log__backing_8h_source.html#l00044">rgw_log_backing.h:44</a></div></div>
<div class="ttc" id="argw__notify__event__type_8h_html"><div class="ttname"><a href="rgw__notify__event__type_8h.html">rgw_notify_event_type.h</a></div></div>
<div class="ttc" id="argw__op_8h_html"><div class="ttname"><a href="rgw__op_8h.html">rgw_op.h</a></div></div>
<div class="ttc" id="argw__perf__counters_8cc_html_a770a29716cf802e8b212dbd61b157b2e"><div class="ttname"><a href="rgw__perf__counters_8cc.html#a770a29716cf802e8b212dbd61b157b2e">perfcounter</a></div><div class="ttdeci">PerfCounters * perfcounter</div><div class="ttdef"><b>Definition</b> <a href="rgw__perf__counters_8cc_source.html#l00008">rgw_perf_counters.cc:8</a></div></div>
<div class="ttc" id="argw__perf__counters_8h_html"><div class="ttname"><a href="rgw__perf__counters_8h.html">rgw_perf_counters.h</a></div></div>
<div class="ttc" id="argw__perf__counters_8h_html_a05589fbab0657f08285ebdfe93f5ec9ea331676acc720470c551fa63c4c5e398c"><div class="ttname"><a href="rgw__perf__counters_8h.html#a05589fbab0657f08285ebdfe93f5ec9ea331676acc720470c551fa63c4c5e398c">l_rgw_pubsub_store_ok</a></div><div class="ttdeci">@ l_rgw_pubsub_store_ok</div><div class="ttdef"><b>Definition</b> <a href="rgw__perf__counters_8h_source.html#l00045">rgw_perf_counters.h:45</a></div></div>
<div class="ttc" id="argw__perf__counters_8h_html_a05589fbab0657f08285ebdfe93f5ec9ea5b3588bd65b27cfafd2a25c0c224b1c4"><div class="ttname"><a href="rgw__perf__counters_8h.html#a05589fbab0657f08285ebdfe93f5ec9ea5b3588bd65b27cfafd2a25c0c224b1c4">l_rgw_pubsub_store_fail</a></div><div class="ttdeci">@ l_rgw_pubsub_store_fail</div><div class="ttdef"><b>Definition</b> <a href="rgw__perf__counters_8h_source.html#l00046">rgw_perf_counters.h:46</a></div></div>
<div class="ttc" id="argw__perf__counters_8h_html_a05589fbab0657f08285ebdfe93f5ec9ea88b3946fb92bbbd47d09cc34a377d970"><div class="ttname"><a href="rgw__perf__counters_8h.html#a05589fbab0657f08285ebdfe93f5ec9ea88b3946fb92bbbd47d09cc34a377d970">l_rgw_pubsub_event_lost</a></div><div class="ttdeci">@ l_rgw_pubsub_event_lost</div><div class="ttdef"><b>Definition</b> <a href="rgw__perf__counters_8h_source.html#l00044">rgw_perf_counters.h:44</a></div></div>
<div class="ttc" id="argw__perf__counters_8h_html_a05589fbab0657f08285ebdfe93f5ec9ea9611ef33cd8cbe8082993d9d57f3a731"><div class="ttname"><a href="rgw__perf__counters_8h.html#a05589fbab0657f08285ebdfe93f5ec9ea9611ef33cd8cbe8082993d9d57f3a731">l_rgw_pubsub_missing_conf</a></div><div class="ttdeci">@ l_rgw_pubsub_missing_conf</div><div class="ttdef"><b>Definition</b> <a href="rgw__perf__counters_8h_source.html#l00051">rgw_perf_counters.h:51</a></div></div>
<div class="ttc" id="argw__perf__counters_8h_html_a05589fbab0657f08285ebdfe93f5ec9ea9c2577f0a81fbc733c3eb68cffd5049b"><div class="ttname"><a href="rgw__perf__counters_8h.html#a05589fbab0657f08285ebdfe93f5ec9ea9c2577f0a81fbc733c3eb68cffd5049b">l_rgw_pubsub_push_failed</a></div><div class="ttdeci">@ l_rgw_pubsub_push_failed</div><div class="ttdef"><b>Definition</b> <a href="rgw__perf__counters_8h_source.html#l00049">rgw_perf_counters.h:49</a></div></div>
<div class="ttc" id="argw__perf__counters_8h_html_a05589fbab0657f08285ebdfe93f5ec9eaa49fe8411dbcfbc2dfd60a993e4ce89f"><div class="ttname"><a href="rgw__perf__counters_8h.html#a05589fbab0657f08285ebdfe93f5ec9eaa49fe8411dbcfbc2dfd60a993e4ce89f">l_rgw_pubsub_event_triggered</a></div><div class="ttdeci">@ l_rgw_pubsub_event_triggered</div><div class="ttdef"><b>Definition</b> <a href="rgw__perf__counters_8h_source.html#l00043">rgw_perf_counters.h:43</a></div></div>
<div class="ttc" id="argw__perf__counters_8h_html_a05589fbab0657f08285ebdfe93f5ec9eac2b8c6e14023c5eedf4c354641731bc0"><div class="ttname"><a href="rgw__perf__counters_8h.html#a05589fbab0657f08285ebdfe93f5ec9eac2b8c6e14023c5eedf4c354641731bc0">l_rgw_pubsub_push_ok</a></div><div class="ttdeci">@ l_rgw_pubsub_push_ok</div><div class="ttdef"><b>Definition</b> <a href="rgw__perf__counters_8h_source.html#l00048">rgw_perf_counters.h:48</a></div></div>
<div class="ttc" id="argw__pubsub_8cc_html_a9e56763a419e65292a4d5057e92d52a4"><div class="ttname"><a href="rgw__pubsub_8cc.html#a9e56763a419e65292a4d5057e92d52a4">set_event_id</a></div><div class="ttdeci">void set_event_id(std::string &amp;id, const std::string &amp;hash, const utime_t &amp;ts)</div><div class="ttdef"><b>Definition</b> <a href="rgw__pubsub_8cc_source.html#l00019">rgw_pubsub.cc:19</a></div></div>
<div class="ttc" id="argw__pubsub_8h_html"><div class="ttname"><a href="rgw__pubsub_8h.html">rgw_pubsub.h</a></div></div>
<div class="ttc" id="argw__pubsub__push_8h_html"><div class="ttname"><a href="rgw__pubsub__push_8h.html">rgw_pubsub_push.h</a></div></div>
<div class="ttc" id="argw__rest__conn_8h_html"><div class="ttname"><a href="rgw__rest__conn_8h.html">rgw_rest_conn.h</a></div></div>
<div class="ttc" id="argw__sal_8h_html_a2a039ebea62bea24dff4df3905db41df"><div class="ttname"><a href="rgw__sal_8h.html#a2a039ebea62bea24dff4df3905db41df">RGWSyncModuleInstanceRef</a></div><div class="ttdeci">std::shared_ptr&lt; RGWSyncModuleInstance &gt; RGWSyncModuleInstanceRef</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l00039">rgw_sal.h:39</a></div></div>
<div class="ttc" id="argw__sync__module_8h_html"><div class="ttname"><a href="rgw__sync__module_8h.html">rgw_sync_module.h</a></div></div>
<div class="ttc" id="argw__sync__module__pubsub_8cc_html_a3d66fdaaedde99f94c039dc9c8d47221"><div class="ttname"><a href="rgw__sync__module__pubsub_8cc.html#a3d66fdaaedde99f94c039dc9c8d47221">PSManagerRef</a></div><div class="ttdeci">std::shared_ptr&lt; PSManager &gt; PSManagerRef</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00298">rgw_sync_module_pubsub.cc:298</a></div></div>
<div class="ttc" id="argw__sync__module__pubsub_8cc_html_a680685668a648b33b677265fc07be8ae"><div class="ttname"><a href="rgw__sync__module__pubsub_8cc.html#a680685668a648b33b677265fc07be8ae">make_event_ref</a></div><div class="ttdeci">static void make_event_ref(CephContext *cct, const rgw_bucket &amp;bucket, const rgw_obj_key &amp;key, const ceph::real_time &amp;mtime, const std::vector&lt; std::pair&lt; std::string, std::string &gt; &gt; *attrs, rgw::notify::EventType event_type, EventRef&lt; rgw_pubsub_event &gt; *event)</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00242">rgw_sync_module_pubsub.cc:242</a></div></div>
<div class="ttc" id="argw__sync__module__pubsub_8cc_html_a6b984d869299084410b95debaf7a9163"><div class="ttname"><a href="rgw__sync__module__pubsub_8cc.html#a6b984d869299084410b95debaf7a9163">PSSubscriptionRef</a></div><div class="ttdeci">std::shared_ptr&lt; PSSubscription &gt; PSSubscriptionRef</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00430">rgw_sync_module_pubsub.cc:430</a></div></div>
<div class="ttc" id="argw__sync__module__pubsub_8cc_html_a70e5b84b7bca0feba6fcd9334622d05b"><div class="ttname"><a href="rgw__sync__module__pubsub_8cc.html#a70e5b84b7bca0feba6fcd9334622d05b">PUBSUB_EVENTS_RETENTION_DEFAULT</a></div><div class="ttdeci">#define PUBSUB_EVENTS_RETENTION_DEFAULT</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00027">rgw_sync_module_pubsub.cc:27</a></div></div>
<div class="ttc" id="argw__sync__module__pubsub_8cc_html_a7dfdc68b9c480a297b0765caacb2acf3"><div class="ttname"><a href="rgw__sync__module__pubsub_8cc.html#a7dfdc68b9c480a297b0765caacb2acf3">string_to_args</a></div><div class="ttdeci">RGWHTTPArgs string_to_args(const std::string &amp;str_args, const DoutPrefixProvider *dpp)</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00048">rgw_sync_module_pubsub.cc:48</a></div></div>
<div class="ttc" id="argw__sync__module__pubsub_8cc_html_a8b3691422cb11d18dc41d77815abbb6b"><div class="ttname"><a href="rgw__sync__module__pubsub_8cc.html#a8b3691422cb11d18dc41d77815abbb6b">make_s3_event_ref</a></div><div class="ttdeci">static void make_s3_event_ref(CephContext *cct, const rgw_bucket &amp;bucket, const rgw_user &amp;owner, const rgw_obj_key &amp;key, const ceph::real_time &amp;mtime, const std::vector&lt; std::pair&lt; std::string, std::string &gt; &gt; *attrs, rgw::notify::EventType event_type, EventRef&lt; rgw_pubsub_s3_event &gt; *event)</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00263">rgw_sync_module_pubsub.cc:263</a></div></div>
<div class="ttc" id="argw__sync__module__pubsub_8cc_html_a8cf75fd83a22c03e4eeae0932b31752a"><div class="ttname"><a href="rgw__sync__module__pubsub_8cc.html#a8cf75fd83a22c03e4eeae0932b31752a">PSEnvRef</a></div><div class="ttdeci">std::shared_ptr&lt; PSEnv &gt; PSEnvRef</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00315">rgw_sync_module_pubsub.cc:315</a></div></div>
<div class="ttc" id="argw__sync__module__pubsub_8cc_html_a8fac3e9ba436ccafb2b1e164c38b2c93"><div class="ttname"><a href="rgw__sync__module__pubsub_8cc.html#a8fac3e9ba436ccafb2b1e164c38b2c93">TopicsRef</a></div><div class="ttdeci">std::shared_ptr&lt; std::vector&lt; PSTopicConfigRef &gt; &gt; TopicsRef</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00149">rgw_sync_module_pubsub.cc:149</a></div></div>
<div class="ttc" id="argw__sync__module__pubsub_8cc_html_a95cd156406f6d627131b4faa761e7ae6"><div class="ttname"><a href="rgw__sync__module__pubsub_8cc.html#a95cd156406f6d627131b4faa761e7ae6">json_str</a></div><div class="ttdeci">static string json_str(const char *name, const T &amp;obj, bool pretty=false)</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00137">rgw_sync_module_pubsub.cc:137</a></div></div>
<div class="ttc" id="argw__sync__module__pubsub_8cc_html_a9c6fe8a9e35bb688bdc0dfcb46e74a91"><div class="ttname"><a href="rgw__sync__module__pubsub_8cc.html#a9c6fe8a9e35bb688bdc0dfcb46e74a91">PSSubConfigRef</a></div><div class="ttdeci">std::shared_ptr&lt; PSSubConfig &gt; PSSubConfigRef</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00098">rgw_sync_module_pubsub.cc:98</a></div></div>
<div class="ttc" id="argw__sync__module__pubsub_8cc_html_aa7fc929948fb038192288e423ea816d0"><div class="ttname"><a href="rgw__sync__module__pubsub_8cc.html#aa7fc929948fb038192288e423ea816d0">match</a></div><div class="ttdeci">bool match(const rgw_pubsub_topic_filter &amp;filter, const std::string &amp;key_name, rgw::notify::EventType event_type)</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00921">rgw_sync_module_pubsub.cc:921</a></div></div>
<div class="ttc" id="argw__sync__module__pubsub_8cc_html_ad8b26748ff02957ec1ec373a4f0a420f"><div class="ttname"><a href="rgw__sync__module__pubsub_8cc.html#ad8b26748ff02957ec1ec373a4f0a420f">EventRef</a></div><div class="ttdeci">std::shared_ptr&lt; EventType &gt; EventRef</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00189">rgw_sync_module_pubsub.cc:189</a></div></div>
<div class="ttc" id="argw__sync__module__pubsub_8cc_html_ae2fa2f9ee7be9ec943c521e7f7699c8e"><div class="ttname"><a href="rgw__sync__module__pubsub_8cc.html#ae2fa2f9ee7be9ec943c521e7f7699c8e">PSTopicConfigRef</a></div><div class="ttdeci">std::shared_ptr&lt; PSTopicConfig &gt; PSTopicConfigRef</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00148">rgw_sync_module_pubsub.cc:148</a></div></div>
<div class="ttc" id="argw__sync__module__pubsub_8cc_html_ae3f05c1346843738a4e4afdd42062743"><div class="ttname"><a href="rgw__sync__module__pubsub_8cc.html#ae3f05c1346843738a4e4afdd42062743">PSConfigRef</a></div><div class="ttdeci">std::shared_ptr&lt; PSConfig &gt; PSConfigRef</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00187">rgw_sync_module_pubsub.cc:187</a></div></div>
<div class="ttc" id="argw__sync__module__pubsub_8h_html"><div class="ttname"><a href="rgw__sync__module__pubsub_8h.html">rgw_sync_module_pubsub.h</a></div></div>
<div class="ttc" id="argw__sync__module__pubsub__rest_8h_html"><div class="ttname"><a href="rgw__sync__module__pubsub__rest_8h.html">rgw_sync_module_pubsub_rest.h</a></div></div>
<div class="ttc" id="argw__tools_8h_html_a424683aeaaea10250523c7ec526a3804"><div class="ttname"><a href="rgw__tools_8h.html#a424683aeaaea10250523c7ec526a3804">RGWDataAccessRef</a></div><div class="ttdeci">std::shared_ptr&lt; RGWDataAccess &gt; RGWDataAccessRef</div><div class="ttdef"><b>Definition</b> <a href="rgw__tools_8h_source.html#l00266">rgw_tools.h:266</a></div></div>
<div class="ttc" id="argw__tools_8h_html_a85b5065426630907194d5173ec4800b8"><div class="ttname"><a href="rgw__tools_8h.html#a85b5065426630907194d5173ec4800b8">RGWMD5Etag</a></div><div class="ttdeci">RGWEtag&lt; MD5, CEPH_CRYPTO_MD5_DIGESTSIZE &gt; RGWMD5Etag</div><div class="ttdef"><b>Definition</b> <a href="rgw__tools_8h_source.html#l00153">rgw_tools.h:153</a></div></div>
<div class="ttc" id="astruct_p_s_config_html"><div class="ttname"><a href="struct_p_s_config.html">PSConfig</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00152">rgw_sync_module_pubsub.cc:152</a></div></div>
<div class="ttc" id="astruct_p_s_config_html_a0df602336f5a24790614a208bc07b3f1"><div class="ttname"><a href="struct_p_s_config.html#a0df602336f5a24790614a208bc07b3f1">PSConfig::user</a></div><div class="ttdeci">rgw_user user</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00154">rgw_sync_module_pubsub.cc:154</a></div></div>
<div class="ttc" id="astruct_p_s_config_html_a1011cdcb9dd21e8379affc79dd125dfb"><div class="ttname"><a href="struct_p_s_config.html#a1011cdcb9dd21e8379affc79dd125dfb">PSConfig::start_with_full_sync</a></div><div class="ttdeci">bool start_with_full_sync</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00159">rgw_sync_module_pubsub.cc:159</a></div></div>
<div class="ttc" id="astruct_p_s_config_html_a18e2e43ebfb9f59cbac58f05a5e6ca17"><div class="ttname"><a href="struct_p_s_config.html#a18e2e43ebfb9f59cbac58f05a5e6ca17">PSConfig::data_bucket_prefix</a></div><div class="ttdeci">std::string data_bucket_prefix</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00155">rgw_sync_module_pubsub.cc:155</a></div></div>
<div class="ttc" id="astruct_p_s_config_html_a1ee5e13f4ef43093281f5afcdf4a0b07"><div class="ttname"><a href="struct_p_s_config.html#a1ee5e13f4ef43093281f5afcdf4a0b07">PSConfig::data_oid_prefix</a></div><div class="ttdeci">std::string data_oid_prefix</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00156">rgw_sync_module_pubsub.cc:156</a></div></div>
<div class="ttc" id="astruct_p_s_config_html_a34f7155019591b8be21330d1533758dc"><div class="ttname"><a href="struct_p_s_config.html#a34f7155019591b8be21330d1533758dc">PSConfig::init_instance</a></div><div class="ttdeci">void init_instance(const RGWRealm &amp;realm, uint64_t instance_id)</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00182">rgw_sync_module_pubsub.cc:182</a></div></div>
<div class="ttc" id="astruct_p_s_config_html_a43e8af7304151cecfe7b6bf5af81456c"><div class="ttname"><a href="struct_p_s_config.html#a43e8af7304151cecfe7b6bf5af81456c">PSConfig::init</a></div><div class="ttdeci">void init(CephContext *cct, const JSONFormattable &amp;config)</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00171">rgw_sync_module_pubsub.cc:171</a></div></div>
<div class="ttc" id="astruct_p_s_config_html_a5065eb5d4e3f9ea317ba106646df4103"><div class="ttname"><a href="struct_p_s_config.html#a5065eb5d4e3f9ea317ba106646df4103">PSConfig::events_retention_days</a></div><div class="ttdeci">int events_retention_days</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00157">rgw_sync_module_pubsub.cc:157</a></div></div>
<div class="ttc" id="astruct_p_s_config_html_ad04250d3a569e60e9ecffda77b82cc32"><div class="ttname"><a href="struct_p_s_config.html#ad04250d3a569e60e9ecffda77b82cc32">PSConfig::dump</a></div><div class="ttdeci">void dump(Formatter *f) const</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00161">rgw_sync_module_pubsub.cc:161</a></div></div>
<div class="ttc" id="astruct_p_s_config_html_af0dc2efa711ff046c9ec82eed4fe7eb5"><div class="ttname"><a href="struct_p_s_config.html#af0dc2efa711ff046c9ec82eed4fe7eb5">PSConfig::sync_instance</a></div><div class="ttdeci">uint64_t sync_instance</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00158">rgw_sync_module_pubsub.cc:158</a></div></div>
<div class="ttc" id="astruct_p_s_env_html"><div class="ttname"><a href="struct_p_s_env.html">PSEnv</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00300">rgw_sync_module_pubsub.cc:300</a></div></div>
<div class="ttc" id="astruct_p_s_env_html_a45e838ea9b7fda4ded69dcc450089dba"><div class="ttname"><a href="struct_p_s_env.html#a45e838ea9b7fda4ded69dcc450089dba">PSEnv::init_instance</a></div><div class="ttdeci">void init_instance(const RGWRealm &amp;realm, uint64_t instance_id, PSManagerRef &amp;mgr)</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00872">rgw_sync_module_pubsub.cc:872</a></div></div>
<div class="ttc" id="astruct_p_s_env_html_a5f6995908970b4892492a3d087cf51f5"><div class="ttname"><a href="struct_p_s_env.html#a5f6995908970b4892492a3d087cf51f5">PSEnv::PSEnv</a></div><div class="ttdeci">PSEnv()</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00305">rgw_sync_module_pubsub.cc:305</a></div></div>
<div class="ttc" id="astruct_p_s_env_html_aa9230495cea76b6a71da060edc8a5c04"><div class="ttname"><a href="struct_p_s_env.html#aa9230495cea76b6a71da060edc8a5c04">PSEnv::manager</a></div><div class="ttdeci">PSManagerRef manager</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00303">rgw_sync_module_pubsub.cc:303</a></div></div>
<div class="ttc" id="astruct_p_s_env_html_aaab4313f2e25eb7c50a7772c6ff5709b"><div class="ttname"><a href="struct_p_s_env.html#aaab4313f2e25eb7c50a7772c6ff5709b">PSEnv::conf</a></div><div class="ttdeci">PSConfigRef conf</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00301">rgw_sync_module_pubsub.cc:301</a></div></div>
<div class="ttc" id="astruct_p_s_env_html_ae3f5221860df55b9e1e246b16029edef"><div class="ttname"><a href="struct_p_s_env.html#ae3f5221860df55b9e1e246b16029edef">PSEnv::data_user_info</a></div><div class="ttdeci">shared_ptr&lt; RGWUserInfo &gt; data_user_info</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00302">rgw_sync_module_pubsub.cc:302</a></div></div>
<div class="ttc" id="astruct_p_s_env_html_aee0fd8840556210b994db8a07412d2ff"><div class="ttname"><a href="struct_p_s_env.html#aee0fd8840556210b994db8a07412d2ff">PSEnv::init</a></div><div class="ttdeci">void init(CephContext *cct, const JSONFormattable &amp;config)</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00308">rgw_sync_module_pubsub.cc:308</a></div></div>
<div class="ttc" id="astruct_p_s_notification_config_html"><div class="ttname"><a href="struct_p_s_notification_config.html">PSNotificationConfig</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00112">rgw_sync_module_pubsub.cc:112</a></div></div>
<div class="ttc" id="astruct_p_s_notification_config_html_a14f1d0a8985462525b6ba2ada6fe82c3"><div class="ttname"><a href="struct_p_s_notification_config.html#a14f1d0a8985462525b6ba2ada6fe82c3">PSNotificationConfig::is_prefix</a></div><div class="ttdeci">bool is_prefix</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00116">rgw_sync_module_pubsub.cc:116</a></div></div>
<div class="ttc" id="astruct_p_s_notification_config_html_a3aca458c5d9c6afeb07c60672a3dc847"><div class="ttname"><a href="struct_p_s_notification_config.html#a3aca458c5d9c6afeb07c60672a3dc847">PSNotificationConfig::dump</a></div><div class="ttdeci">void dump(Formatter *f) const</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00119">rgw_sync_module_pubsub.cc:119</a></div></div>
<div class="ttc" id="astruct_p_s_notification_config_html_a82e83f9c55b844e2bd355ba1358f108c"><div class="ttname"><a href="struct_p_s_notification_config.html#a82e83f9c55b844e2bd355ba1358f108c">PSNotificationConfig::topic</a></div><div class="ttdeci">string topic</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00115">rgw_sync_module_pubsub.cc:115</a></div></div>
<div class="ttc" id="astruct_p_s_notification_config_html_ab2237fa94b7667613f50482aea9cab06"><div class="ttname"><a href="struct_p_s_notification_config.html#ab2237fa94b7667613f50482aea9cab06">PSNotificationConfig::init</a></div><div class="ttdeci">void init(CephContext *cct, const JSONFormattable &amp;config)</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00126">rgw_sync_module_pubsub.cc:126</a></div></div>
<div class="ttc" id="astruct_p_s_notification_config_html_ab89a399a7361b3e7b440748c70ecac69"><div class="ttname"><a href="struct_p_s_notification_config.html#ab89a399a7361b3e7b440748c70ecac69">PSNotificationConfig::path</a></div><div class="ttdeci">string path</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00114">rgw_sync_module_pubsub.cc:114</a></div></div>
<div class="ttc" id="astruct_p_s_sub_config_html"><div class="ttname"><a href="struct_p_s_sub_config.html">PSSubConfig</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00055">rgw_sync_module_pubsub.cc:55</a></div></div>
<div class="ttc" id="astruct_p_s_sub_config_html_a03238ea5955e12178cea7a7a1772ce01"><div class="ttname"><a href="struct_p_s_sub_config.html#a03238ea5955e12178cea7a7a1772ce01">PSSubConfig::name</a></div><div class="ttdeci">std::string name</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00056">rgw_sync_module_pubsub.cc:56</a></div></div>
<div class="ttc" id="astruct_p_s_sub_config_html_a3a98d3cc7cdab841b1bd37766b840cb1"><div class="ttname"><a href="struct_p_s_sub_config.html#a3a98d3cc7cdab841b1bd37766b840cb1">PSSubConfig::push_endpoint</a></div><div class="ttdeci">RGWPubSubEndpoint::Ptr push_endpoint</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00064">rgw_sync_module_pubsub.cc:64</a></div></div>
<div class="ttc" id="astruct_p_s_sub_config_html_a4c7c2170bd2cb019c1870e478da44eb3"><div class="ttname"><a href="struct_p_s_sub_config.html#a4c7c2170bd2cb019c1870e478da44eb3">PSSubConfig::dump</a></div><div class="ttdeci">void dump(Formatter *f) const</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00086">rgw_sync_module_pubsub.cc:86</a></div></div>
<div class="ttc" id="astruct_p_s_sub_config_html_a51ca2eaa634de0edb43aa51be69dde53"><div class="ttname"><a href="struct_p_s_sub_config.html#a51ca2eaa634de0edb43aa51be69dde53">PSSubConfig::s3_id</a></div><div class="ttdeci">std::string s3_id</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00062">rgw_sync_module_pubsub.cc:62</a></div></div>
<div class="ttc" id="astruct_p_s_sub_config_html_a51cfbe8aabdb7d03c620aba2f16b7ed6"><div class="ttname"><a href="struct_p_s_sub_config.html#a51cfbe8aabdb7d03c620aba2f16b7ed6">PSSubConfig::arn_topic</a></div><div class="ttdeci">std::string arn_topic</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00063">rgw_sync_module_pubsub.cc:63</a></div></div>
<div class="ttc" id="astruct_p_s_sub_config_html_a6fc5ee773745f36bd759e3ca727a2fc3"><div class="ttname"><a href="struct_p_s_sub_config.html#a6fc5ee773745f36bd759e3ca727a2fc3">PSSubConfig::push_endpoint_name</a></div><div class="ttdeci">std::string push_endpoint_name</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00058">rgw_sync_module_pubsub.cc:58</a></div></div>
<div class="ttc" id="astruct_p_s_sub_config_html_a8262c2223c4ebde2e6ab52692614b9bd"><div class="ttname"><a href="struct_p_s_sub_config.html#a8262c2223c4ebde2e6ab52692614b9bd">PSSubConfig::data_bucket_name</a></div><div class="ttdeci">std::string data_bucket_name</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00060">rgw_sync_module_pubsub.cc:60</a></div></div>
<div class="ttc" id="astruct_p_s_sub_config_html_aa8769e7ba834b6235f756e63f8e25c20"><div class="ttname"><a href="struct_p_s_sub_config.html#aa8769e7ba834b6235f756e63f8e25c20">PSSubConfig::from_user_conf</a></div><div class="ttdeci">void from_user_conf(CephContext *cct, const rgw_pubsub_sub_config &amp;uc, const DoutPrefixProvider *dpp)</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00066">rgw_sync_module_pubsub.cc:66</a></div></div>
<div class="ttc" id="astruct_p_s_sub_config_html_ab18064f7dc58ff0a4a3d7b3be02297c9"><div class="ttname"><a href="struct_p_s_sub_config.html#ab18064f7dc58ff0a4a3d7b3be02297c9">PSSubConfig::topic</a></div><div class="ttdeci">std::string topic</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00057">rgw_sync_module_pubsub.cc:57</a></div></div>
<div class="ttc" id="astruct_p_s_sub_config_html_ac157d698c580721858457b2cf5b3d7a9"><div class="ttname"><a href="struct_p_s_sub_config.html#ac157d698c580721858457b2cf5b3d7a9">PSSubConfig::data_oid_prefix</a></div><div class="ttdeci">std::string data_oid_prefix</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00061">rgw_sync_module_pubsub.cc:61</a></div></div>
<div class="ttc" id="astruct_p_s_sub_config_html_acf41dc25c09e4a27cc26bb1f85a38b43"><div class="ttname"><a href="struct_p_s_sub_config.html#acf41dc25c09e4a27cc26bb1f85a38b43">PSSubConfig::push_endpoint_args</a></div><div class="ttdeci">std::string push_endpoint_args</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00059">rgw_sync_module_pubsub.cc:59</a></div></div>
<div class="ttc" id="astruct_p_s_topic_config_html"><div class="ttname"><a href="struct_p_s_topic_config.html">PSTopicConfig</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00100">rgw_sync_module_pubsub.cc:100</a></div></div>
<div class="ttc" id="astruct_p_s_topic_config_html_a26e57a4405ccfebf21c0a8cbdbfeaee4"><div class="ttname"><a href="struct_p_s_topic_config.html#a26e57a4405ccfebf21c0a8cbdbfeaee4">PSTopicConfig::name</a></div><div class="ttdeci">std::string name</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00101">rgw_sync_module_pubsub.cc:101</a></div></div>
<div class="ttc" id="astruct_p_s_topic_config_html_a6fd0a0a9394a49e1ed75f95dc2ed30ba"><div class="ttname"><a href="struct_p_s_topic_config.html#a6fd0a0a9394a49e1ed75f95dc2ed30ba">PSTopicConfig::subs</a></div><div class="ttdeci">std::set&lt; std::string &gt; subs</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00102">rgw_sync_module_pubsub.cc:102</a></div></div>
<div class="ttc" id="astruct_p_s_topic_config_html_a715109e8e76643e00a7e0254ad743e52"><div class="ttname"><a href="struct_p_s_topic_config.html#a715109e8e76643e00a7e0254ad743e52">PSTopicConfig::dump</a></div><div class="ttdeci">void dump(Formatter *f) const</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00105">rgw_sync_module_pubsub.cc:105</a></div></div>
<div class="ttc" id="astruct_p_s_topic_config_html_ab543c8ee0b95c9cd27369656b82ef954"><div class="ttname"><a href="struct_p_s_topic_config.html#ab543c8ee0b95c9cd27369656b82ef954">PSTopicConfig::opaque_data</a></div><div class="ttdeci">std::string opaque_data</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00103">rgw_sync_module_pubsub.cc:103</a></div></div>
<div class="ttc" id="astruct_r_g_w_bucket_info_html"><div class="ttname"><a href="struct_r_g_w_bucket_info.html">RGWBucketInfo</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l01062">rgw_common.h:1062</a></div></div>
<div class="ttc" id="astruct_r_g_w_bucket_info_html_a18215d487317142f30bd2675ccec2293"><div class="ttname"><a href="struct_r_g_w_bucket_info.html#a18215d487317142f30bd2675ccec2293">RGWBucketInfo::owner</a></div><div class="ttdeci">rgw_user owner</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l01064">rgw_common.h:1064</a></div></div>
<div class="ttc" id="astruct_r_g_w_data_sync_ctx_html"><div class="ttname"><a href="struct_r_g_w_data_sync_ctx.html">RGWDataSyncCtx</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__data__sync_8h_source.html#l00333">rgw_data_sync.h:333</a></div></div>
<div class="ttc" id="astruct_r_g_w_data_sync_ctx_html_aa591262f323062da9bcb164d1e6a1057"><div class="ttname"><a href="struct_r_g_w_data_sync_ctx.html#aa591262f323062da9bcb164d1e6a1057">RGWDataSyncCtx::env</a></div><div class="ttdeci">RGWDataSyncEnv * env</div><div class="ttdef"><b>Definition</b> <a href="rgw__data__sync_8h_source.html#l00335">rgw_data_sync.h:335</a></div></div>
<div class="ttc" id="astruct_r_g_w_data_sync_ctx_html_aaa4f4a845ebb475fbdfa87c5df786afb"><div class="ttname"><a href="struct_r_g_w_data_sync_ctx.html#aaa4f4a845ebb475fbdfa87c5df786afb">RGWDataSyncCtx::source_zone</a></div><div class="ttdeci">rgw_zone_id source_zone</div><div class="ttdef"><b>Definition</b> <a href="rgw__data__sync_8h_source.html#l00338">rgw_data_sync.h:338</a></div></div>
<div class="ttc" id="astruct_r_g_w_data_sync_ctx_html_ac3f462ed79fd418c4fede613a2700072"><div class="ttname"><a href="struct_r_g_w_data_sync_ctx.html#ac3f462ed79fd418c4fede613a2700072">RGWDataSyncCtx::cct</a></div><div class="ttdeci">CephContext * cct</div><div class="ttdef"><b>Definition</b> <a href="rgw__data__sync_8h_source.html#l00334">rgw_data_sync.h:334</a></div></div>
<div class="ttc" id="astruct_r_g_w_data_sync_env_html"><div class="ttname"><a href="struct_r_g_w_data_sync_env.html">RGWDataSyncEnv</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__data__sync_8h_source.html#l00298">rgw_data_sync.h:298</a></div></div>
<div class="ttc" id="astruct_r_g_w_data_sync_env_html_a01a643690d3fa3344fc0a8b4633b3998"><div class="ttname"><a href="struct_r_g_w_data_sync_env.html#a01a643690d3fa3344fc0a8b4633b3998">RGWDataSyncEnv::async_rados</a></div><div class="ttdeci">RGWAsyncRadosProcessor * async_rados</div><div class="ttdef"><b>Definition</b> <a href="rgw__data__sync_8h_source.html#l00303">rgw_data_sync.h:303</a></div></div>
<div class="ttc" id="astruct_r_g_w_data_sync_env_html_a28c4175bfd0cee40dbe554d69445901e"><div class="ttname"><a href="struct_r_g_w_data_sync_env.html#a28c4175bfd0cee40dbe554d69445901e">RGWDataSyncEnv::cct</a></div><div class="ttdeci">CephContext * cct</div><div class="ttdef"><b>Definition</b> <a href="rgw__data__sync_8h_source.html#l00300">rgw_data_sync.h:300</a></div></div>
<div class="ttc" id="astruct_r_g_w_data_sync_env_html_a92cf8eace4df60fbb7c9ea2f63994772"><div class="ttname"><a href="struct_r_g_w_data_sync_env.html#a92cf8eace4df60fbb7c9ea2f63994772">RGWDataSyncEnv::dpp</a></div><div class="ttdeci">const DoutPrefixProvider * dpp</div><div class="ttdef"><b>Definition</b> <a href="rgw__data__sync_8h_source.html#l00299">rgw_data_sync.h:299</a></div></div>
<div class="ttc" id="astruct_r_g_w_data_sync_env_html_acfebf6dda76ac5469de5a7edeb00548a"><div class="ttname"><a href="struct_r_g_w_data_sync_env.html#acfebf6dda76ac5469de5a7edeb00548a">RGWDataSyncEnv::store</a></div><div class="ttdeci">rgw::sal::RadosStore * store</div><div class="ttdef"><b>Definition</b> <a href="rgw__data__sync_8h_source.html#l00301">rgw_data_sync.h:301</a></div></div>
<div class="ttc" id="astruct_r_g_w_pub_sub_endpoint_1_1configuration__error_html"><div class="ttname"><a href="struct_r_g_w_pub_sub_endpoint_1_1configuration__error.html">RGWPubSubEndpoint::configuration_error</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__pubsub__push_8h_source.html#l00052">rgw_pubsub_push.h:52</a></div></div>
<div class="ttc" id="astruct_r_g_w_services_html_a742bbed66b1688310eeb8c0b692bf6b9"><div class="ttname"><a href="struct_r_g_w_services.html#a742bbed66b1688310eeb8c0b692bf6b9">RGWServices::sysobj</a></div><div class="ttdeci">RGWSI_SysObj * sysobj</div><div class="ttdef"><b>Definition</b> <a href="rgw__service_8h_source.html#l00147">rgw_service.h:147</a></div></div>
<div class="ttc" id="astruct_r_g_w_singleton_c_r_1_1_waiter_info_html"><div class="ttname"><a href="struct_r_g_w_singleton_c_r_1_1_waiter_info.html">RGWSingletonCR::WaiterInfo</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00345">rgw_sync_module_pubsub.cc:345</a></div></div>
<div class="ttc" id="astruct_r_g_w_singleton_c_r_1_1_waiter_info_html_aa22c38a798fe5ed3a9954d3871acb04d"><div class="ttname"><a href="struct_r_g_w_singleton_c_r_1_1_waiter_info.html#aa22c38a798fe5ed3a9954d3871acb04d">RGWSingletonCR::WaiterInfo::cr</a></div><div class="ttdeci">RGWCoroutine * cr</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00346">rgw_sync_module_pubsub.cc:346</a></div></div>
<div class="ttc" id="astruct_r_g_w_singleton_c_r_1_1_waiter_info_html_add957d50c34ab69844eb8fa49c480cc0"><div class="ttname"><a href="struct_r_g_w_singleton_c_r_1_1_waiter_info.html#add957d50c34ab69844eb8fa49c480cc0">RGWSingletonCR::WaiterInfo::result</a></div><div class="ttdeci">T * result</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00347">rgw_sync_module_pubsub.cc:347</a></div></div>
<div class="ttc" id="astruct_r_g_w_user_info_html"><div class="ttname"><a href="struct_r_g_w_user_info.html">RGWUserInfo</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l00736">rgw_common.h:737</a></div></div>
<div class="ttc" id="astructobjstore__event_html"><div class="ttname"><a href="structobjstore__event.html">objstore_event</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00191">rgw_sync_module_pubsub.cc:191</a></div></div>
<div class="ttc" id="astructobjstore__event_html_a0abbaa9e526823a22e65a6364ab6de7b"><div class="ttname"><a href="structobjstore__event.html#a0abbaa9e526823a22e65a6364ab6de7b">objstore_event::objstore_event</a></div><div class="ttdeci">objstore_event(const rgw_bucket &amp;_bucket, const rgw_obj_key &amp;_key, const ceph::real_time &amp;_mtime, const std::vector&lt; std::pair&lt; std::string, std::string &gt; &gt; *_attrs)</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00198">rgw_sync_module_pubsub.cc:198</a></div></div>
<div class="ttc" id="astructobjstore__event_html_a262cce77588787e038d0bfc43f26cad3"><div class="ttname"><a href="structobjstore__event.html#a262cce77588787e038d0bfc43f26cad3">objstore_event::key</a></div><div class="ttdeci">const rgw_obj_key &amp; key</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00194">rgw_sync_module_pubsub.cc:194</a></div></div>
<div class="ttc" id="astructobjstore__event_html_a34e342e85f1ba28a36ffccfc2a8c79ab"><div class="ttname"><a href="structobjstore__event.html#a34e342e85f1ba28a36ffccfc2a8c79ab">objstore_event::mtime</a></div><div class="ttdeci">const ceph::real_time &amp; mtime</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00195">rgw_sync_module_pubsub.cc:195</a></div></div>
<div class="ttc" id="astructobjstore__event_html_a6614af82d0158d75284b6b2edec6a7fc"><div class="ttname"><a href="structobjstore__event.html#a6614af82d0158d75284b6b2edec6a7fc">objstore_event::dump</a></div><div class="ttdeci">void dump(Formatter *f) const</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00219">rgw_sync_module_pubsub.cc:219</a></div></div>
<div class="ttc" id="astructobjstore__event_html_a68245bcb773218d0a9263ca05bff167a"><div class="ttname"><a href="structobjstore__event.html#a68245bcb773218d0a9263ca05bff167a">objstore_event::get_hash</a></div><div class="ttdeci">string get_hash()</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00206">rgw_sync_module_pubsub.cc:206</a></div></div>
<div class="ttc" id="astructobjstore__event_html_ab35dd6cfecb32abe5ca39c05389a0dc4"><div class="ttname"><a href="structobjstore__event.html#ab35dd6cfecb32abe5ca39c05389a0dc4">objstore_event::id</a></div><div class="ttdeci">string id</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00192">rgw_sync_module_pubsub.cc:192</a></div></div>
<div class="ttc" id="astructobjstore__event_html_ab461bfcdd98095af4ccc46b89c53b56a"><div class="ttname"><a href="structobjstore__event.html#ab461bfcdd98095af4ccc46b89c53b56a">objstore_event::bucket</a></div><div class="ttdeci">const rgw_bucket &amp; bucket</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00193">rgw_sync_module_pubsub.cc:193</a></div></div>
<div class="ttc" id="astructobjstore__event_html_ad90c20b6ade97157088b251d7c012a5f"><div class="ttname"><a href="structobjstore__event.html#ad90c20b6ade97157088b251d7c012a5f">objstore_event::attrs</a></div><div class="ttdeci">const std::vector&lt; std::pair&lt; std::string, std::string &gt; &gt; * attrs</div><div class="ttdef"><b>Definition</b> <a href="rgw__sync__module__pubsub_8cc_source.html#l00196">rgw_sync_module_pubsub.cc:196</a></div></div>
<div class="ttc" id="astructrgw_1_1_a_r_n_html"><div class="ttname"><a href="structrgw_1_1_a_r_n.html">rgw::ARN</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__arn_8h_source.html#l00042">rgw_arn.h:42</a></div></div>
<div class="ttc" id="astructrgw__bucket__create__local__params_html"><div class="ttname"><a href="structrgw__bucket__create__local__params.html">rgw_bucket_create_local_params</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__cr__tools_8h_source.html#l00049">rgw_cr_tools.h:49</a></div></div>
<div class="ttc" id="astructrgw__bucket__create__local__params_html_a35277269af4d1f83c6695a81bd9c156a"><div class="ttname"><a href="structrgw__bucket__create__local__params.html#a35277269af4d1f83c6695a81bd9c156a">rgw_bucket_create_local_params::user_info</a></div><div class="ttdeci">std::shared_ptr&lt; RGWUserInfo &gt; user_info</div><div class="ttdef"><b>Definition</b> <a href="rgw__cr__tools_8h_source.html#l00050">rgw_cr_tools.h:50</a></div></div>
<div class="ttc" id="astructrgw__bucket__create__local__params_html_a9436a7087e3e00ac114df8c36bcee0db"><div class="ttname"><a href="structrgw__bucket__create__local__params.html#a9436a7087e3e00ac114df8c36bcee0db">rgw_bucket_create_local_params::bucket_name</a></div><div class="ttdeci">std::string bucket_name</div><div class="ttdef"><b>Definition</b> <a href="rgw__cr__tools_8h_source.html#l00051">rgw_cr_tools.h:51</a></div></div>
<div class="ttc" id="astructrgw__bucket__entry__owner_html"><div class="ttname"><a href="structrgw__bucket__entry__owner.html">rgw_bucket_entry_owner</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__data__sync_8h_source.html#l00284">rgw_data_sync.h:284</a></div></div>
<div class="ttc" id="astructrgw__bucket__lifecycle__config__params_html"><div class="ttname"><a href="structrgw__bucket__lifecycle__config__params.html">rgw_bucket_lifecycle_config_params</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__cr__tools_8h_source.html#l00068">rgw_cr_tools.h:68</a></div></div>
<div class="ttc" id="astructrgw__bucket__lifecycle__config__params_html_a69124459275686a3005182fe72a93545"><div class="ttname"><a href="structrgw__bucket__lifecycle__config__params.html#a69124459275686a3005182fe72a93545">rgw_bucket_lifecycle_config_params::bucket</a></div><div class="ttdeci">rgw::sal::Bucket * bucket</div><div class="ttdef"><b>Definition</b> <a href="rgw__cr__tools_8h_source.html#l00069">rgw_cr_tools.h:69</a></div></div>
<div class="ttc" id="astructrgw__bucket__lifecycle__config__params_html_acd50b70d47affff98aa9261f8840b21c"><div class="ttname"><a href="structrgw__bucket__lifecycle__config__params.html#acd50b70d47affff98aa9261f8840b21c">rgw_bucket_lifecycle_config_params::bucket_attrs</a></div><div class="ttdeci">rgw::sal::Attrs bucket_attrs</div><div class="ttdef"><b>Definition</b> <a href="rgw__cr__tools_8h_source.html#l00070">rgw_cr_tools.h:70</a></div></div>
<div class="ttc" id="astructrgw__bucket__lifecycle__config__params_html_ad89c41a7a010a81f95b2da9623fcb973"><div class="ttname"><a href="structrgw__bucket__lifecycle__config__params.html#ad89c41a7a010a81f95b2da9623fcb973">rgw_bucket_lifecycle_config_params::config</a></div><div class="ttdeci">RGWLifecycleConfiguration config</div><div class="ttdef"><b>Definition</b> <a href="rgw__cr__tools_8h_source.html#l00071">rgw_cr_tools.h:71</a></div></div>
<div class="ttc" id="astructrgw__bucket__shard_html_aa6821665d28ae2987ee05096b8a284e8"><div class="ttname"><a href="structrgw__bucket__shard.html#aa6821665d28ae2987ee05096b8a284e8">rgw_bucket_shard::bucket</a></div><div class="ttdeci">rgw_bucket bucket</div><div class="ttdef"><b>Definition</b> <a href="rgw__basic__types_8h_source.html#l00431">rgw_basic_types.h:431</a></div></div>
<div class="ttc" id="astructrgw__bucket__sync__pair__info_html_a0ece37c1c51ed70a1ceade1049619445"><div class="ttname"><a href="structrgw__bucket__sync__pair__info.html#a0ece37c1c51ed70a1ceade1049619445">rgw_bucket_sync_pair_info::source_bs</a></div><div class="ttdeci">rgw_bucket_shard source_bs</div><div class="ttdef"><b>Definition</b> <a href="rgw__data__sync_8h_source.html#l00049">rgw_data_sync.h:49</a></div></div>
<div class="ttc" id="astructrgw__bucket__sync__pipe_html"><div class="ttname"><a href="structrgw__bucket__sync__pipe.html">rgw_bucket_sync_pipe</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__data__sync_8h_source.html#l00065">rgw_data_sync.h:65</a></div></div>
<div class="ttc" id="astructrgw__bucket__sync__pipe_html_a24becd8d2b536e5483ac8bbe0853f811"><div class="ttname"><a href="structrgw__bucket__sync__pipe.html#a24becd8d2b536e5483ac8bbe0853f811">rgw_bucket_sync_pipe::info</a></div><div class="ttdeci">rgw_bucket_sync_pair_info info</div><div class="ttdef"><b>Definition</b> <a href="rgw__data__sync_8h_source.html#l00066">rgw_data_sync.h:66</a></div></div>
<div class="ttc" id="astructrgw__bucket__sync__pipe_html_a365bed8fa6911b1e2ce2a0c92017ec7c"><div class="ttname"><a href="structrgw__bucket__sync__pipe.html#a365bed8fa6911b1e2ce2a0c92017ec7c">rgw_bucket_sync_pipe::source_bucket_info</a></div><div class="ttdeci">RGWBucketInfo source_bucket_info</div><div class="ttdef"><b>Definition</b> <a href="rgw__data__sync_8h_source.html#l00067">rgw_data_sync.h:67</a></div></div>
<div class="ttc" id="astructrgw__bucket__sync__pipe_html_ae426d285bde7b00520046d98e56f3a04"><div class="ttname"><a href="structrgw__bucket__sync__pipe.html#ae426d285bde7b00520046d98e56f3a04">rgw_bucket_sync_pipe::dest_bucket_info</a></div><div class="ttdeci">RGWBucketInfo dest_bucket_info</div><div class="ttdef"><b>Definition</b> <a href="rgw__data__sync_8h_source.html#l00069">rgw_data_sync.h:69</a></div></div>
<div class="ttc" id="astructrgw__bucket_html"><div class="ttname"><a href="structrgw__bucket.html">rgw_bucket</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__basic__types_8h_source.html#l00289">rgw_basic_types.h:289</a></div></div>
<div class="ttc" id="astructrgw__bucket_html_a32d3529f5b0c53051c856a7abe867a6b"><div class="ttname"><a href="structrgw__bucket.html#a32d3529f5b0c53051c856a7abe867a6b">rgw_bucket::name</a></div><div class="ttdeci">std::string name</div><div class="ttdef"><b>Definition</b> <a href="rgw__basic__types_8h_source.html#l00291">rgw_basic_types.h:291</a></div></div>
<div class="ttc" id="astructrgw__bucket_html_ac2d65e02c9242ad2ea2ad31da15d8836"><div class="ttname"><a href="structrgw__bucket.html#ac2d65e02c9242ad2ea2ad31da15d8836">rgw_bucket::tenant</a></div><div class="ttdeci">std::string tenant</div><div class="ttdef"><b>Definition</b> <a href="rgw__basic__types_8h_source.html#l00290">rgw_basic_types.h:290</a></div></div>
<div class="ttc" id="astructrgw__bucket_html_adaba18504e183a1e80d861533a81c2a1"><div class="ttname"><a href="structrgw__bucket.html#adaba18504e183a1e80d861533a81c2a1">rgw_bucket::bucket_id</a></div><div class="ttdeci">std::string bucket_id</div><div class="ttdef"><b>Definition</b> <a href="rgw__basic__types_8h_source.html#l00293">rgw_basic_types.h:293</a></div></div>
<div class="ttc" id="astructrgw__get__bucket__info__params_html"><div class="ttname"><a href="structrgw__get__bucket__info__params.html">rgw_get_bucket_info_params</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__cr__tools_8h_source.html#l00038">rgw_cr_tools.h:38</a></div></div>
<div class="ttc" id="astructrgw__get__bucket__info__params_html_a72ff9cd0ec86635fd8c6021095661a86"><div class="ttname"><a href="structrgw__get__bucket__info__params.html#a72ff9cd0ec86635fd8c6021095661a86">rgw_get_bucket_info_params::bucket_name</a></div><div class="ttdeci">std::string bucket_name</div><div class="ttdef"><b>Definition</b> <a href="rgw__cr__tools_8h_source.html#l00040">rgw_cr_tools.h:40</a></div></div>
<div class="ttc" id="astructrgw__get__bucket__info__params_html_a7f015bafc42bdd6a6f49b5cc27e06f2b"><div class="ttname"><a href="structrgw__get__bucket__info__params.html#a7f015bafc42bdd6a6f49b5cc27e06f2b">rgw_get_bucket_info_params::tenant</a></div><div class="ttdeci">std::string tenant</div><div class="ttdef"><b>Definition</b> <a href="rgw__cr__tools_8h_source.html#l00039">rgw_cr_tools.h:39</a></div></div>
<div class="ttc" id="astructrgw__get__user__info__params_html"><div class="ttname"><a href="structrgw__get__user__info__params.html">rgw_get_user_info_params</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__cr__tools_8h_source.html#l00032">rgw_cr_tools.h:32</a></div></div>
<div class="ttc" id="astructrgw__get__user__info__params_html_ab2a2f83240eecb2269d32359e5ca61d3"><div class="ttname"><a href="structrgw__get__user__info__params.html#ab2a2f83240eecb2269d32359e5ca61d3">rgw_get_user_info_params::user</a></div><div class="ttdeci">rgw_user user</div><div class="ttdef"><b>Definition</b> <a href="rgw__cr__tools_8h_source.html#l00033">rgw_cr_tools.h:33</a></div></div>
<div class="ttc" id="astructrgw__obj__key_html"><div class="ttname"><a href="structrgw__obj__key.html">rgw_obj_key</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l01248">rgw_common.h:1248</a></div></div>
<div class="ttc" id="astructrgw__obj__key_html_a009cbe657bf6a001d40af0a80e533186"><div class="ttname"><a href="structrgw__obj__key.html#a009cbe657bf6a001d40af0a80e533186">rgw_obj_key::name</a></div><div class="ttdeci">std::string name</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l01249">rgw_common.h:1249</a></div></div>
<div class="ttc" id="astructrgw__obj__key_html_aa73e7ab93fad1f34c58dc9e87917213c"><div class="ttname"><a href="structrgw__obj__key.html#aa73e7ab93fad1f34c58dc9e87917213c">rgw_obj_key::instance</a></div><div class="ttdeci">std::string instance</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l01250">rgw_common.h:1250</a></div></div>
<div class="ttc" id="astructrgw__object__simple__put__params_html"><div class="ttname"><a href="structrgw__object__simple__put__params.html">rgw_object_simple_put_params</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__cr__tools_8h_source.html#l00057">rgw_cr_tools.h:57</a></div></div>
<div class="ttc" id="astructrgw__object__simple__put__params_html_a1365b4827b01099307ae857bd42aecbb"><div class="ttname"><a href="structrgw__object__simple__put__params.html#a1365b4827b01099307ae857bd42aecbb">rgw_object_simple_put_params::user_data</a></div><div class="ttdeci">std::optional&lt; std::string &gt; user_data</div><div class="ttdef"><b>Definition</b> <a href="rgw__cr__tools_8h_source.html#l00062">rgw_cr_tools.h:62</a></div></div>
<div class="ttc" id="astructrgw__object__simple__put__params_html_a6b50628ccd86f6d890fd1c1881cf8952"><div class="ttname"><a href="structrgw__object__simple__put__params.html#a6b50628ccd86f6d890fd1c1881cf8952">rgw_object_simple_put_params::bucket</a></div><div class="ttdeci">RGWDataAccess::BucketRef bucket</div><div class="ttdef"><b>Definition</b> <a href="rgw__cr__tools_8h_source.html#l00058">rgw_cr_tools.h:58</a></div></div>
<div class="ttc" id="astructrgw__object__simple__put__params_html_a7d93d93ec10761ea3b8cbd5608326e9f"><div class="ttname"><a href="structrgw__object__simple__put__params.html#a7d93d93ec10761ea3b8cbd5608326e9f">rgw_object_simple_put_params::key</a></div><div class="ttdeci">rgw_obj_key key</div><div class="ttdef"><b>Definition</b> <a href="rgw__cr__tools_8h_source.html#l00059">rgw_cr_tools.h:59</a></div></div>
<div class="ttc" id="astructrgw__object__simple__put__params_html_a938de9f134a1dc186cf8d8eccf2709a9"><div class="ttname"><a href="structrgw__object__simple__put__params.html#a938de9f134a1dc186cf8d8eccf2709a9">rgw_object_simple_put_params::data</a></div><div class="ttdeci">bufferlist data</div><div class="ttdef"><b>Definition</b> <a href="rgw__cr__tools_8h_source.html#l00060">rgw_cr_tools.h:60</a></div></div>
<div class="ttc" id="astructrgw__pubsub__bucket__topics_html"><div class="ttname"><a href="structrgw__pubsub__bucket__topics.html">rgw_pubsub_bucket_topics</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__pubsub_8h_source.html#l00557">rgw_pubsub.h:557</a></div></div>
<div class="ttc" id="astructrgw__pubsub__bucket__topics_html_ae70a9ae1dafaa04f4937295595a6a1bf"><div class="ttname"><a href="structrgw__pubsub__bucket__topics.html#ae70a9ae1dafaa04f4937295595a6a1bf">rgw_pubsub_bucket_topics::topics</a></div><div class="ttdeci">std::map&lt; std::string, rgw_pubsub_topic_filter &gt; topics</div><div class="ttdef"><b>Definition</b> <a href="rgw__pubsub_8h_source.html#l00558">rgw_pubsub.h:558</a></div></div>
<div class="ttc" id="astructrgw__pubsub__sub__config_html"><div class="ttname"><a href="structrgw__pubsub__sub__config.html">rgw_pubsub_sub_config</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__pubsub_8h_source.html#l00417">rgw_pubsub.h:417</a></div></div>
<div class="ttc" id="astructrgw__pubsub__sub__config_html_a2c6a74a3bb67eb35eb743301bdd37d8d"><div class="ttname"><a href="structrgw__pubsub__sub__config.html#a2c6a74a3bb67eb35eb743301bdd37d8d">rgw_pubsub_sub_config::s3_id</a></div><div class="ttdeci">std::string s3_id</div><div class="ttdef"><b>Definition</b> <a href="rgw__pubsub_8h_source.html#l00422">rgw_pubsub.h:422</a></div></div>
<div class="ttc" id="astructrgw__pubsub__sub__config_html_a79ce2e4dd5509860d73df83b9f0a9e90"><div class="ttname"><a href="structrgw__pubsub__sub__config.html#a79ce2e4dd5509860d73df83b9f0a9e90">rgw_pubsub_sub_config::topic</a></div><div class="ttdeci">std::string topic</div><div class="ttdef"><b>Definition</b> <a href="rgw__pubsub_8h_source.html#l00420">rgw_pubsub.h:420</a></div></div>
<div class="ttc" id="astructrgw__pubsub__sub__config_html_a92a3c47d697bc5b194927aa44c0e6015"><div class="ttname"><a href="structrgw__pubsub__sub__config.html#a92a3c47d697bc5b194927aa44c0e6015">rgw_pubsub_sub_config::name</a></div><div class="ttdeci">std::string name</div><div class="ttdef"><b>Definition</b> <a href="rgw__pubsub_8h_source.html#l00419">rgw_pubsub.h:419</a></div></div>
<div class="ttc" id="astructrgw__pubsub__sub__config_html_ae7c74458c25652c1198b1c3a55e98f65"><div class="ttname"><a href="structrgw__pubsub__sub__config.html#ae7c74458c25652c1198b1c3a55e98f65">rgw_pubsub_sub_config::dest</a></div><div class="ttdeci">rgw_pubsub_sub_dest dest</div><div class="ttdef"><b>Definition</b> <a href="rgw__pubsub_8h_source.html#l00421">rgw_pubsub.h:421</a></div></div>
<div class="ttc" id="astructrgw__pubsub__sub__dest_html_a110a1005dce12971695a00e702ef754e"><div class="ttname"><a href="structrgw__pubsub__sub__dest.html#a110a1005dce12971695a00e702ef754e">rgw_pubsub_sub_dest::push_endpoint_args</a></div><div class="ttdeci">std::string push_endpoint_args</div><div class="ttdef"><b>Definition</b> <a href="rgw__pubsub_8h_source.html#l00374">rgw_pubsub.h:374</a></div></div>
<div class="ttc" id="astructrgw__pubsub__sub__dest_html_a1e5e9a00f5a86a940303451ffc0823a2"><div class="ttname"><a href="structrgw__pubsub__sub__dest.html#a1e5e9a00f5a86a940303451ffc0823a2">rgw_pubsub_sub_dest::bucket_name</a></div><div class="ttdeci">std::string bucket_name</div><div class="ttdef"><b>Definition</b> <a href="rgw__pubsub_8h_source.html#l00371">rgw_pubsub.h:371</a></div></div>
<div class="ttc" id="astructrgw__pubsub__sub__dest_html_a6c258a5d09b6e9ff74ddf5f36e673a12"><div class="ttname"><a href="structrgw__pubsub__sub__dest.html#a6c258a5d09b6e9ff74ddf5f36e673a12">rgw_pubsub_sub_dest::oid_prefix</a></div><div class="ttdeci">std::string oid_prefix</div><div class="ttdef"><b>Definition</b> <a href="rgw__pubsub_8h_source.html#l00372">rgw_pubsub.h:372</a></div></div>
<div class="ttc" id="astructrgw__pubsub__sub__dest_html_aaf8ab3b6b22e08943d0fbfa2b43403d7"><div class="ttname"><a href="structrgw__pubsub__sub__dest.html#aaf8ab3b6b22e08943d0fbfa2b43403d7">rgw_pubsub_sub_dest::push_endpoint</a></div><div class="ttdeci">std::string push_endpoint</div><div class="ttdef"><b>Definition</b> <a href="rgw__pubsub_8h_source.html#l00373">rgw_pubsub.h:373</a></div></div>
<div class="ttc" id="astructrgw__pubsub__sub__dest_html_ab97eac8437ab564a809cdaa0889ada50"><div class="ttname"><a href="structrgw__pubsub__sub__dest.html#ab97eac8437ab564a809cdaa0889ada50">rgw_pubsub_sub_dest::arn_topic</a></div><div class="ttdeci">std::string arn_topic</div><div class="ttdef"><b>Definition</b> <a href="rgw__pubsub_8h_source.html#l00375">rgw_pubsub.h:375</a></div></div>
<div class="ttc" id="astructrgw__pubsub__topic__filter_html"><div class="ttname"><a href="structrgw__pubsub__topic__filter.html">rgw_pubsub_topic_filter</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__pubsub_8h_source.html#l00517">rgw_pubsub.h:517</a></div></div>
<div class="ttc" id="astructrgw__pubsub__topic__filter_html_ae52f145d30a6ca6338fbb32e07df532c"><div class="ttname"><a href="structrgw__pubsub__topic__filter.html#ae52f145d30a6ca6338fbb32e07df532c">rgw_pubsub_topic_filter::events</a></div><div class="ttdeci">rgw::notify::EventTypeList events</div><div class="ttdef"><b>Definition</b> <a href="rgw__pubsub_8h_source.html#l00519">rgw_pubsub.h:519</a></div></div>
<div class="ttc" id="astructrgw__pubsub__topic__filter_html_aedbefc04debf9258f76149ed50cfefb8"><div class="ttname"><a href="structrgw__pubsub__topic__filter.html#aedbefc04debf9258f76149ed50cfefb8">rgw_pubsub_topic_filter::s3_filter</a></div><div class="ttdeci">rgw_s3_filter s3_filter</div><div class="ttdef"><b>Definition</b> <a href="rgw__pubsub_8h_source.html#l00521">rgw_pubsub.h:521</a></div></div>
<div class="ttc" id="astructrgw__pubsub__topics_html"><div class="ttname"><a href="structrgw__pubsub__topics.html">rgw_pubsub_topics</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__pubsub_8h_source.html#l00576">rgw_pubsub.h:576</a></div></div>
<div class="ttc" id="astructrgw__pubsub__topics_html_a95545bbeb3a48899a1be51b2fa62a43c"><div class="ttname"><a href="structrgw__pubsub__topics.html#a95545bbeb3a48899a1be51b2fa62a43c">rgw_pubsub_topics::topics</a></div><div class="ttdeci">std::map&lt; std::string, rgw_pubsub_topic_subs &gt; topics</div><div class="ttdef"><b>Definition</b> <a href="rgw__pubsub_8h_source.html#l00577">rgw_pubsub.h:577</a></div></div>
<div class="ttc" id="astructrgw__raw__obj_html"><div class="ttname"><a href="structrgw__raw__obj.html">rgw_raw_obj</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l00922">rgw_common.h:922</a></div></div>
<div class="ttc" id="astructrgw__s3__filter_html_a8c693d29716c600c15f8080ffbf1d776"><div class="ttname"><a href="structrgw__s3__filter.html#a8c693d29716c600c15f8080ffbf1d776">rgw_s3_filter::key_filter</a></div><div class="ttdeci">rgw_s3_key_filter key_filter</div><div class="ttdef"><b>Definition</b> <a href="rgw__pubsub_8h_source.html#l00070">rgw_pubsub.h:70</a></div></div>
<div class="ttc" id="astructrgw__user__create__params_html"><div class="ttname"><a href="structrgw__user__create__params.html">rgw_user_create_params</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__cr__tools_8h_source.html#l00013">rgw_cr_tools.h:13</a></div></div>
<div class="ttc" id="astructrgw__user__create__params_html_a245a940036f4d4cd02a9ea31e4f76bcd"><div class="ttname"><a href="structrgw__user__create__params.html#a245a940036f4d4cd02a9ea31e4f76bcd">rgw_user_create_params::max_buckets</a></div><div class="ttdeci">std::optional&lt; int32_t &gt; max_buckets</div><div class="ttdef"><b>Definition</b> <a href="rgw__cr__tools_8h_source.html#l00024">rgw_cr_tools.h:24</a></div></div>
<div class="ttc" id="astructrgw__user__create__params_html_a402e0e953064cc0d57dd87460c3d1d37"><div class="ttname"><a href="structrgw__user__create__params.html#a402e0e953064cc0d57dd87460c3d1d37">rgw_user_create_params::user</a></div><div class="ttdeci">rgw_user user</div><div class="ttdef"><b>Definition</b> <a href="rgw__cr__tools_8h_source.html#l00014">rgw_cr_tools.h:14</a></div></div>
<div class="ttc" id="astructrgw__user__create__params_html_a6090daa6a3eea7805709061ff9c00c81"><div class="ttname"><a href="structrgw__user__create__params.html#a6090daa6a3eea7805709061ff9c00c81">rgw_user_create_params::generate_key</a></div><div class="ttdeci">bool generate_key</div><div class="ttdef"><b>Definition</b> <a href="rgw__cr__tools_8h_source.html#l00022">rgw_cr_tools.h:22</a></div></div>
<div class="ttc" id="astructrgw__user__create__params_html_a940417f1b31319cb6a53e5361fb897f8"><div class="ttname"><a href="structrgw__user__create__params.html#a940417f1b31319cb6a53e5361fb897f8">rgw_user_create_params::display_name</a></div><div class="ttdeci">std::string display_name</div><div class="ttdef"><b>Definition</b> <a href="rgw__cr__tools_8h_source.html#l00015">rgw_cr_tools.h:15</a></div></div>
<div class="ttc" id="astructrgw__user_html"><div class="ttname"><a href="structrgw__user.html">rgw_user</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__basic__types_8h_source.html#l00014">rgw_basic_types.h:14</a></div></div>
<div class="ttc" id="astructrgw__user_html_a2bf13ba0bf6b95ba5a0832e2ba1370e0"><div class="ttname"><a href="structrgw__user.html#a2bf13ba0bf6b95ba5a0832e2ba1370e0">rgw_user::tenant</a></div><div class="ttdeci">std::string tenant</div><div class="ttdef"><b>Definition</b> <a href="rgw__basic__types_8h_source.html#l00015">rgw_basic_types.h:15</a></div></div>
<div class="ttc" id="astructrgw__user_html_af00f510d6a9ff0580d87ee46b274d96e"><div class="ttname"><a href="structrgw__user.html#af00f510d6a9ff0580d87ee46b274d96e">rgw_user::to_str</a></div><div class="ttdeci">void to_str(std::string &amp;str) const</div><div class="ttdef"><b>Definition</b> <a href="rgw__basic__types_8h_source.html#l00051">rgw_basic_types.h:51</a></div></div>
<div class="ttc" id="astructrgw__user_html_afd8a9e36c5a9f7773c13d903c3124e99"><div class="ttname"><a href="structrgw__user.html#afd8a9e36c5a9f7773c13d903c3124e99">rgw_user::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdef"><b>Definition</b> <a href="rgw__basic__types_8h_source.html#l00071">rgw_basic_types.h:71</a></div></div>
<div class="ttc" id="asvc__zone_8h_html"><div class="ttname"><a href="svc__zone_8h.html">svc_zone.h</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_275089585c7fc1b5fd5d7d42c69cb1da.html">D:</a></li><li class="navelem"><a class="el" href="dir_e050007e69745d5ed950ce16eed8ed32.html">git</a></li><li class="navelem"><a class="el" href="dir_6892619f22dbda2b625e50c3cfe72b21.html">ceph</a></li><li class="navelem"><a class="el" href="dir_07a1996344d62ceb57ddf5fb87d6faf4.html">src</a></li><li class="navelem"><a class="el" href="dir_ddd8fa4b54862d6407f5aaf9a827e64e.html">rgw</a></li><li class="navelem"><a class="el" href="rgw__sync__module__pubsub_8cc.html">rgw_sync_module_pubsub.cc</a></li>
    <li class="footer">다음에 의해 생성됨 :  <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="ko">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: D:/git/ceph/src/rgw/rgw_sal_rados.cc 소스 파일</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 다음에 의해 생성됨 :  Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','검색');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function() { init_codefold(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('rgw__sal__rados_8cc_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">로딩중...</div>
<div class="SRStatus" id="Searching">검색중...</div>
<div class="SRStatus" id="NoMatches">일치하는것 없음</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">rgw_sal_rados.cc</div></div>
</div><!--header-->
<div class="contents">
<a href="rgw__sal__rados_8cc.html">이 파일의 문서화 페이지로 가기</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="comment">// -*- mode:C++; tab-width:8; c-basic-offset:2; indent-tabs-mode:t -*-</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="comment">// vim: ts=8 sw=2 smarttab ft=cpp</span></div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span> </div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="comment">/*</span></div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="comment"> * Ceph - scalable distributed file system</span></div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span><span class="comment"> *</span></div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="comment"> * Copyright (C) 2020 Red Hat, Inc.</span></div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="comment"> *</span></div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="comment"> * This is free software; you can redistribute it and/or</span></div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span><span class="comment"> * modify it under the terms of the GNU Lesser General Public</span></div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span><span class="comment"> * License version 2.1, as published by the Free Software</span></div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span><span class="comment"> * Foundation. See file COPYING.</span></div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span><span class="comment"> *</span></div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="comment"> */</span></div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span> </div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span><span class="preprocessor">#include &lt;errno.h&gt;</span></div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span><span class="preprocessor">#include &lt;stdlib.h&gt;</span></div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span><span class="preprocessor">#include &lt;system_error&gt;</span></div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span><span class="preprocessor">#include &lt;unistd.h&gt;</span></div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span><span class="preprocessor">#include &lt;sstream&gt;</span></div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span><span class="preprocessor">#include &lt;boost/algorithm/string.hpp&gt;</span></div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span> </div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span><span class="preprocessor">#include &quot;common/Clock.h&quot;</span></div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span><span class="preprocessor">#include &quot;common/errno.h&quot;</span></div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span> </div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span><span class="preprocessor">#include &quot;<a class="code" href="rgw__sal_8h.html">rgw_sal.h</a>&quot;</span></div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span><span class="preprocessor">#include &quot;<a class="code" href="rgw__sal__rados_8h.html">rgw_sal_rados.h</a>&quot;</span></div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span><span class="preprocessor">#include &quot;<a class="code" href="rgw__bucket_8h.html">rgw_bucket.h</a>&quot;</span></div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span><span class="preprocessor">#include &quot;<a class="code" href="rgw__multi_8h.html">rgw_multi.h</a>&quot;</span></div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span><span class="preprocessor">#include &quot;<a class="code" href="rgw__acl_8h.html">rgw_acl.h</a>&quot;</span></div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span><span class="preprocessor">#include &quot;<a class="code" href="rgw__acl__s3_8h.html">rgw_acl_s3.h</a>&quot;</span></div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span><span class="preprocessor">#include &quot;<a class="code" href="rgw__aio_8h.html">rgw_aio.h</a>&quot;</span></div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span><span class="preprocessor">#include &quot;<a class="code" href="rgw__aio__throttle_8h.html">rgw_aio_throttle.h</a>&quot;</span></div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span><span class="preprocessor">#include &quot;<a class="code" href="rgw__tracer_8h.html">rgw_tracer.h</a>&quot;</span></div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span> </div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span><span class="preprocessor">#include &quot;<a class="code" href="rgw__zone_8h.html">rgw_zone.h</a>&quot;</span></div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span><span class="preprocessor">#include &quot;<a class="code" href="rgw__rest__conn_8h.html">rgw_rest_conn.h</a>&quot;</span></div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span><span class="preprocessor">#include &quot;<a class="code" href="rgw__service_8h.html">rgw_service.h</a>&quot;</span></div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span><span class="preprocessor">#include &quot;<a class="code" href="rgw__lc_8h.html">rgw_lc.h</a>&quot;</span></div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span><span class="preprocessor">#include &quot;<a class="code" href="svc__sys__obj_8h.html">services/svc_sys_obj.h</a>&quot;</span></div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span><span class="preprocessor">#include &quot;<a class="code" href="svc__meta_8h.html">services/svc_meta.h</a>&quot;</span></div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span><span class="preprocessor">#include &quot;<a class="code" href="svc__meta__be__sobj_8h.html">services/svc_meta_be_sobj.h</a>&quot;</span></div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span><span class="preprocessor">#include &quot;<a class="code" href="svc__zone_8h.html">services/svc_zone.h</a>&quot;</span></div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span><span class="preprocessor">#include &quot;<a class="code" href="svc__tier__rados_8h.html">services/svc_tier_rados.h</a>&quot;</span></div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span><span class="preprocessor">#include &quot;<a class="code" href="svc__quota_8h.html">services/svc_quota.h</a>&quot;</span></div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span><span class="preprocessor">#include &quot;<a class="code" href="svc__config__key_8h.html">services/svc_config_key.h</a>&quot;</span></div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span><span class="preprocessor">#include &quot;<a class="code" href="svc__zone__utils_8h.html">services/svc_zone_utils.h</a>&quot;</span></div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span><span class="preprocessor">#include &quot;<a class="code" href="svc__role__rados_8h.html">services/svc_role_rados.h</a>&quot;</span></div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span><span class="preprocessor">#include &quot;cls/rgw/cls_rgw_client.h&quot;</span></div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span> </div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span><span class="preprocessor">#include &quot;<a class="code" href="rgw__pubsub_8h.html">rgw_pubsub.h</a>&quot;</span></div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span> </div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno"><a class="line" href="rgw__sal__rados_8cc.html#a5580a2b7c4743669bb9ca22b07e84324">   53</a></span><span class="preprocessor">#define dout_subsys ceph_subsys_rgw</span></div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span> </div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span><span class="keyword">using namespace </span><a class="code hl_namespace" href="namespacestd.html">std</a>;</div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span> </div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno"><a class="line" href="rgw__sal__rados_8cc.html#a5d8d69cf39f5c67f615f808c7751bfa6">   57</a></span><span class="keyword">static</span> <span class="keywordtype">string</span> <a class="code hl_variable" href="rgw__sal__rados_8cc.html#a5d8d69cf39f5c67f615f808c7751bfa6">mp_ns</a> = <a class="code hl_define" href="rgw__rados_8h.html#ae0aa963272f470d3884b7a4160593740">RGW_OBJ_NS_MULTIPART</a>;</div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span> </div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span><span class="keyword">namespace </span><a class="code hl_namespace" href="namespacergw_1_1sal.html">rgw::sal</a> {</div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span> </div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span><span class="comment">// default number of entries to list with each bucket listing call</span></div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span><span class="comment">// (use marker to bridge between calls)</span></div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno"><a class="line" href="namespacergw_1_1sal.html#afa6be74dee4567d008d67ee76681e757">   63</a></span><span class="keyword">static</span> <span class="keyword">constexpr</span> <span class="keywordtype">size_t</span> <a class="code hl_variable" href="namespacergw_1_1sal.html#afa6be74dee4567d008d67ee76681e757">listing_max_entries</a> = 1000;</div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span> </div>
<div class="foldopen" id="foldopen00065" data-start="{" data-end="}">
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno"><a class="line" href="namespacergw_1_1sal.html#a63199cef8a014d479a6fb4d0e5fdf3ef">   65</a></span><span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code hl_function" href="namespacergw_1_1sal.html#a63199cef8a014d479a6fb4d0e5fdf3ef">decode_policy</a>(CephContext* <a class="code hl_variable" href="cls__fifo__legacy_8cc.html#aa76801f7597f40e158b5f38b2e6466c5">cct</a>,</div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span>                         bufferlist&amp; bl,</div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span>                         <a class="code hl_class" href="class_r_g_w_access_control_policy.html">RGWAccessControlPolicy</a>* policy)</div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span>{</div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span>  <span class="keyword">auto</span> iter = bl.cbegin();</div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span>  <span class="keywordflow">try</span> {</div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span>    policy-&gt;<a class="code hl_function" href="class_r_g_w_access_control_policy.html#a0fa9952c93c911480e7428afd77bce88">decode</a>(iter);</div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span>  } <span class="keywordflow">catch</span> (buffer::error&amp; err) {</div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span>    ldout(<a class="code hl_variable" href="cls__fifo__legacy_8cc.html#aa76801f7597f40e158b5f38b2e6466c5">cct</a>, 0) &lt;&lt; <span class="stringliteral">&quot;ERROR: could not decode policy, caught buffer::error&quot;</span> &lt;&lt; dendl;</div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span>    <span class="keywordflow">return</span> -EIO;</div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span>  }</div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="cls__fifo__legacy_8cc.html#aa76801f7597f40e158b5f38b2e6466c5">cct</a>-&gt;_conf-&gt;subsys.should_gather&lt;ceph_subsys_rgw, 15&gt;()) {</div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span>    ldout(<a class="code hl_variable" href="cls__fifo__legacy_8cc.html#aa76801f7597f40e158b5f38b2e6466c5">cct</a>, 15) &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot; Read AccessControlPolicy&quot;</span>;</div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span>    <a class="code hl_class" href="class_r_g_w_access_control_policy___s3.html">RGWAccessControlPolicy_S3</a>* s3policy = <span class="keyword">static_cast&lt;</span><a class="code hl_class" href="class_r_g_w_access_control_policy___s3.html">RGWAccessControlPolicy_S3</a> *<span class="keyword">&gt;</span>(policy);</div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span>    s3policy-&gt;<a class="code hl_function" href="class_r_g_w_access_control_policy___s3.html#aede14d0dedb12d7809049f2095b0071a">to_xml</a>(*_dout);</div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span>    *_dout &lt;&lt; dendl;</div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span>  }</div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span>}</div>
</div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span> </div>
<div class="foldopen" id="foldopen00085" data-start="{" data-end="}">
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno"><a class="line" href="namespacergw_1_1sal.html#aea4de2b93954880b9b73334b9664b1f7">   85</a></span><span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code hl_function" href="namespacergw_1_1sal.html#aea4de2b93954880b9b73334b9664b1f7">rgw_op_get_bucket_policy_from_attr</a>(<span class="keyword">const</span> DoutPrefixProvider* <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>,</div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span>                          <a class="code hl_class" href="classrgw_1_1sal_1_1_rados_store.html">RadosStore</a>* store,</div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span>                          <a class="code hl_class" href="classrgw_1_1sal_1_1_user.html">User</a>* user,</div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span>                          <a class="code hl_typedef" href="group___r_g_w_s_a_l.html#gab1b58d5f8747844fae5ddfb48fadf7bc">Attrs</a>&amp; bucket_attrs,</div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span>                          <a class="code hl_class" href="class_r_g_w_access_control_policy.html">RGWAccessControlPolicy</a>* policy,</div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span>                          optional_yield y)</div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span>{</div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span>  <span class="keyword">auto</span> aiter = bucket_attrs.find(<a class="code hl_define" href="rgw__common_8h.html#ac9a37f7a4f4ad09bae48d3c752920758">RGW_ATTR_ACL</a>);</div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span> </div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span>  <span class="keywordflow">if</span> (aiter != bucket_attrs.end()) {</div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span>    <span class="keywordtype">int</span> ret = <a class="code hl_function" href="namespacergw_1_1sal.html#a63199cef8a014d479a6fb4d0e5fdf3ef">decode_policy</a>(store-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aabf846e99f9f01172f86ce5e7fb1ed5b">ctx</a>(), aiter-&gt;second, policy);</div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span>    <span class="keywordflow">if</span> (ret &lt; 0)</div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span>      <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span>    ldout(store-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aabf846e99f9f01172f86ce5e7fb1ed5b">ctx</a>(), 0) &lt;&lt; <span class="stringliteral">&quot;WARNING: couldn&#39;t find acl header for bucket, generating default&quot;</span> &lt;&lt; dendl;</div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span>    <span class="comment">/* object exists, but policy is broken */</span></div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a> = user-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_user.html#ac5400c24c04946ada50a7bbb4155d20d">load_user</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, y);</div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a> &lt; 0)</div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span>      <span class="keywordflow">return</span> <a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a>;</div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span> </div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span>    policy-&gt;<a class="code hl_function" href="class_r_g_w_access_control_policy.html#ad2b0f6e6ea63af2aafac4659b3d3d45b">create_default</a>(user-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_user.html#a4f6322efe2b6c9c2780eb31cb3a5ca51">get_id</a>(), user-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_user.html#a931e289c0a1e1744201c67b9806d0b0d">get_display_name</a>());</div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span>  }</div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span>}</div>
</div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span> </div>
<div class="foldopen" id="foldopen00110" data-start="{" data-end="}">
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_completions.html#a9e03e59875be55180d739046ed2093c1">  110</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_completions.html#a9e03e59875be55180d739046ed2093c1">RadosCompletions::drain</a>()</div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>{</div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span>  <span class="keywordtype">int</span> ret = 0;</div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span>  <span class="keywordflow">while</span> (!<a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_completions.html#a722d517ee1b1d84a00f299e2c197245a">handles</a>.empty()) {</div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>    librados::AioCompletion* handle = <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_completions.html#a722d517ee1b1d84a00f299e2c197245a">handles</a>.front();</div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>    <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_completions.html#a722d517ee1b1d84a00f299e2c197245a">handles</a>.pop_front();</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span>    handle-&gt;wait_for_complete();</div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a> = handle-&gt;get_return_value();</div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span>    handle-&gt;release();</div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a> &lt; 0) {</div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span>      ret = <a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a>;</div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span>    }</div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span>  }</div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span>  <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span>}</div>
</div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span> </div>
<div class="foldopen" id="foldopen00126" data-start="{" data-end="}">
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_user.html#a86d61263fee864e100dfc3ac05a21346">  126</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_user.html#a86d61263fee864e100dfc3ac05a21346">RadosUser::list_buckets</a>(<span class="keyword">const</span> DoutPrefixProvider* <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <span class="keyword">const</span> std::string&amp; marker,</div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span>                   <span class="keyword">const</span> std::string&amp; end_marker, uint64_t max, <span class="keywordtype">bool</span> need_stats,</div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span>                   <a class="code hl_class" href="classrgw_1_1sal_1_1_bucket_list.html">BucketList</a> &amp;buckets, optional_yield y)</div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span>{</div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span>  <a class="code hl_class" href="class_r_g_w_user_buckets.html">RGWUserBuckets</a> ulist;</div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span>  <span class="keywordtype">bool</span> is_truncated = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>  <span class="keywordtype">int</span> ret;</div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span> </div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span>  buckets.<a class="code hl_function" href="classrgw_1_1sal_1_1_bucket_list.html#aed613bcf7e9f1aac4b9123cb91f5f8fa">clear</a>();</div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>  ret = <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_user.html#afc68f752f7d061b047f83d10ad95358a">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#ab6a306bab7ce6cc5da2f287d4d9f11e0">ctl</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_ctl.html#a4e70524a487f44b8db6e5a8826160ac3">user</a>-&gt;<a class="code hl_function" href="class_r_g_w_user_ctl.html#a03b1c7f88f9f25ffd8eaedf044dbaf86">list_buckets</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_variable" href="classrgw_1_1sal_1_1_user.html#a922d7b0bedd79d056d2adc0b276ad992">info</a>.<a class="code hl_variable" href="struct_r_g_w_user_info.html#a8bf5afa289f85baa264c25a90ddc0f0d">user_id</a>, marker, end_marker, max,</div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>                     need_stats, &amp;ulist, &amp;is_truncated, y);</div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span>  <span class="keywordflow">if</span> (ret &lt; 0)</div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span>    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span> </div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span>  buckets.<a class="code hl_function" href="classrgw_1_1sal_1_1_bucket_list.html#acb59bff5714d3447f0021e570257233f">set_truncated</a>(is_truncated);</div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span>  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; ent : ulist.<a class="code hl_function" href="class_r_g_w_user_buckets.html#aa23acb0b90b4aec70f758a5452302267">get_buckets</a>()) {</div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span>    buckets.<a class="code hl_function" href="classrgw_1_1sal_1_1_bucket_list.html#a5ba0d82a7e022e8d40e0d9510be1d7db">add</a>(std::unique_ptr&lt;Bucket&gt;(<span class="keyword">new</span> <a class="code hl_friend" href="classrgw_1_1sal_1_1_rados_user.html#a784802946b8f6a832d254e22cc864fc3">RadosBucket</a>(this-&gt;<a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_user.html#afc68f752f7d061b047f83d10ad95358a">store</a>, ent.second, <span class="keyword">this</span>)));</div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span>  }</div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span> </div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span>}</div>
</div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span> </div>
<div class="foldopen" id="foldopen00148" data-start="{" data-end="}">
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_user.html#a5740484af9c8b22a6ec16ebf4c01db68">  148</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_user.html#a5740484af9c8b22a6ec16ebf4c01db68">RadosUser::create_bucket</a>(<span class="keyword">const</span> DoutPrefixProvider* <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>,</div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span>                 <span class="keyword">const</span> <a class="code hl_struct" href="structrgw__bucket.html">rgw_bucket</a>&amp; b,</div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span>                 <span class="keyword">const</span> std::string&amp; zonegroup_id,</div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span>                 <a class="code hl_struct" href="structrgw__placement__rule.html">rgw_placement_rule</a>&amp; placement_rule,</div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span>                 std::string&amp; swift_ver_location,</div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span>                 <span class="keyword">const</span> <a class="code hl_struct" href="struct_r_g_w_quota_info.html">RGWQuotaInfo</a> * pquota_info,</div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span>                 <span class="keyword">const</span> <a class="code hl_class" href="class_r_g_w_access_control_policy.html">RGWAccessControlPolicy</a>&amp; policy,</div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span>                 <a class="code hl_typedef" href="group___r_g_w_s_a_l.html#gab1b58d5f8747844fae5ddfb48fadf7bc">Attrs</a>&amp; attrs,</div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span>                 <a class="code hl_struct" href="struct_r_g_w_bucket_info.html">RGWBucketInfo</a>&amp; info,</div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>                 obj_version&amp; ep_objv,</div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span>                 <span class="keywordtype">bool</span> exclusive,</div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span>                 <span class="keywordtype">bool</span> obj_lock_enabled,</div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span>                 <span class="keywordtype">bool</span>* existed,</div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span>                 <a class="code hl_struct" href="structreq__info.html">req_info</a>&amp; <a class="code hl_struct" href="structreq__info.html">req_info</a>,</div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span>                 std::unique_ptr&lt;Bucket&gt;* bucket_out,</div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span>                 optional_yield y)</div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span>{</div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span>  <span class="keywordtype">int</span> ret;</div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span>  bufferlist in_data;</div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span>  <a class="code hl_struct" href="struct_r_g_w_bucket_info.html">RGWBucketInfo</a> master_info;</div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span>  <a class="code hl_struct" href="structrgw__bucket.html">rgw_bucket</a>* pmaster_bucket;</div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span>  uint32_t* pmaster_num_shards;</div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span>  real_time creation_time;</div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span>  std::unique_ptr&lt;Bucket&gt; bucket;</div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span>  obj_version objv,* pobjv = NULL;</div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span> </div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span>  <span class="comment">/* If it exists, look it up; otherwise create it */</span></div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>  ret = <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_user.html#afc68f752f7d061b047f83d10ad95358a">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#a2a24af2ca7428fcbfba9408ff1cb010d">get_bucket</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <span class="keyword">this</span>, b, &amp;bucket, y);</div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span>  <span class="keywordflow">if</span> (ret &lt; 0 &amp;&amp; ret != -ENOENT)</div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span>    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span> </div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span>  <span class="keywordflow">if</span> (ret != -ENOENT) {</div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span>    <a class="code hl_class" href="class_r_g_w_access_control_policy.html">RGWAccessControlPolicy</a> old_policy(<a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_user.html#afc68f752f7d061b047f83d10ad95358a">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aabf846e99f9f01172f86ce5e7fb1ed5b">ctx</a>());</div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span>    *existed = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span>    <span class="keywordflow">if</span> (swift_ver_location.empty()) {</div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span>      swift_ver_location = bucket-&gt;get_info().swift_ver_location;</div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span>    }</div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>    placement_rule.<a class="code hl_function" href="structrgw__placement__rule.html#ac4f9d1b094edc44fd7d9b3e32c1cf9d0">inherit_from</a>(bucket-&gt;get_info().placement_rule);</div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span> </div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span>    <span class="comment">// don&#39;t allow changes to the acl policy</span></div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a> = <a class="code hl_function" href="namespacergw_1_1sal.html#aea4de2b93954880b9b73334b9664b1f7">rgw_op_get_bucket_policy_from_attr</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_user.html#afc68f752f7d061b047f83d10ad95358a">store</a>, <span class="keyword">this</span>, bucket-&gt;get_attrs(),</div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span>                           &amp;old_policy, y);</div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a> &gt;= 0 &amp;&amp; old_policy != policy) {</div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span>      bucket_out-&gt;swap(bucket);</div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span>      <span class="keywordflow">return</span> -EEXIST;</div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span>    }</div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span>    bucket = std::unique_ptr&lt;Bucket&gt;(<span class="keyword">new</span> <a class="code hl_friend" href="classrgw_1_1sal_1_1_rados_user.html#a784802946b8f6a832d254e22cc864fc3">RadosBucket</a>(<a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_user.html#afc68f752f7d061b047f83d10ad95358a">store</a>, b, <span class="keyword">this</span>));</div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span>    *existed = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span>    bucket-&gt;set_attrs(<a class="code hl_variable" href="classrgw_1_1sal_1_1_user.html#ab1ff4fde76dc54489e69353c952eed5d">attrs</a>);</div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span>  }</div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span> </div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span>  <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_user.html#afc68f752f7d061b047f83d10ad95358a">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#abe4f0602b771d5549a02c0a326d6a832">svc</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_services.html#a6a82305adde4d9b9667690ed2059a394">zone</a>-&gt;<a class="code hl_function" href="class_r_g_w_s_i___zone.html#a7f1e75d0c6d2ae5d2916e0ecbbc5e1ea">is_meta_master</a>()) {</div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span>    JSONParser jp;</div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span>    ret = <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_user.html#afc68f752f7d061b047f83d10ad95358a">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#a62bb26ebcdeb355f92e8cc5a37c227dd">forward_request_to_master</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <span class="keyword">this</span>, NULL, in_data, &amp;jp, <a class="code hl_struct" href="structreq__info.html">req_info</a>, y);</div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span>    <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span>      <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span>    }</div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span> </div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span>    JSONDecoder::decode_json(<span class="stringliteral">&quot;entry_point_object_ver&quot;</span>, ep_objv, &amp;jp);</div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span>    JSONDecoder::decode_json(<span class="stringliteral">&quot;object_ver&quot;</span>, objv, &amp;jp);</div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span>    JSONDecoder::decode_json(<span class="stringliteral">&quot;bucket_info&quot;</span>, master_info, &amp;jp);</div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span>    ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 20) &lt;&lt; <span class="stringliteral">&quot;parsed: objv.tag=&quot;</span> &lt;&lt; objv.tag &lt;&lt; <span class="stringliteral">&quot; objv.ver=&quot;</span> &lt;&lt; objv.ver &lt;&lt; dendl;</div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span>    std::time_t ctime = ceph::real_clock::to_time_t(master_info.<a class="code hl_variable" href="struct_r_g_w_bucket_info.html#a2e51e9d0006ff4d49a565582513b6af6">creation_time</a>);</div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span>    ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 20) &lt;&lt; <span class="stringliteral">&quot;got creation time: &lt;&lt; &quot;</span> &lt;&lt; std::put_time(std::localtime(&amp;ctime), <span class="stringliteral">&quot;%F %T&quot;</span>) &lt;&lt; dendl;</div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span>    pmaster_bucket= &amp;master_info.<a class="code hl_variable" href="struct_r_g_w_bucket_info.html#afbd8422e16061abdf72d710794ac74d4">bucket</a>;</div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span>    creation_time = master_info.<a class="code hl_variable" href="struct_r_g_w_bucket_info.html#a2e51e9d0006ff4d49a565582513b6af6">creation_time</a>;</div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span>    pmaster_num_shards = &amp;master_info.<a class="code hl_variable" href="struct_r_g_w_bucket_info.html#a2f1c3c04708aff00336329d2b5a6b2c0">layout</a>.<a class="code hl_variable" href="structrgw_1_1_bucket_layout.html#a21b2e627c7cfc06dfc9437d2923c1eb6">current_index</a>.<a class="code hl_variable" href="structrgw_1_1bucket__index__layout__generation.html#a79b14696bcebca917981ef684691c2a6">layout</a>.<a class="code hl_variable" href="structrgw_1_1bucket__index__layout.html#a077a0ad9c56601354155d3c860bef951">normal</a>.<a class="code hl_variable" href="structrgw_1_1bucket__index__normal__layout.html#abe639d74cb05a11985d3dd74eadc5d10">num_shards</a>;</div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span>    pobjv = &amp;objv;</div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span>    <span class="keywordflow">if</span> (master_info.<a class="code hl_function" href="struct_r_g_w_bucket_info.html#ac594305d959e62e34512698b110f77ad">obj_lock_enabled</a>()) {</div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span>      <a class="code hl_variable" href="classrgw_1_1sal_1_1_user.html#a922d7b0bedd79d056d2adc0b276ad992">info</a>.flags = <a class="code hl_enumvalue" href="rgw__common_8h.html#ab8ddf05d41f83efb6bbbc02e1c30dfcfac8b8d956b2aed3e2fab65a42cab59cd4">BUCKET_VERSIONED</a> | <a class="code hl_enumvalue" href="rgw__common_8h.html#ab8ddf05d41f83efb6bbbc02e1c30dfcfa5e2a5ef06b97d78ec663b2045de86bae">BUCKET_OBJ_LOCK_ENABLED</a>;</div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span>    }</div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span>    pmaster_bucket = NULL;</div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span>    pmaster_num_shards = NULL;</div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span>    <span class="keywordflow">if</span> (obj_lock_enabled)</div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span>      <a class="code hl_variable" href="classrgw_1_1sal_1_1_user.html#a922d7b0bedd79d056d2adc0b276ad992">info</a>.flags = <a class="code hl_enumvalue" href="rgw__common_8h.html#ab8ddf05d41f83efb6bbbc02e1c30dfcfac8b8d956b2aed3e2fab65a42cab59cd4">BUCKET_VERSIONED</a> | <a class="code hl_enumvalue" href="rgw__common_8h.html#ab8ddf05d41f83efb6bbbc02e1c30dfcfa5e2a5ef06b97d78ec663b2045de86bae">BUCKET_OBJ_LOCK_ENABLED</a>;</div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span>  }</div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span> </div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span>  std::string zid = zonegroup_id;</div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span>  <span class="keywordflow">if</span> (zid.empty()) {</div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span>    zid = <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_user.html#afc68f752f7d061b047f83d10ad95358a">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#abe4f0602b771d5549a02c0a326d6a832">svc</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_services.html#a6a82305adde4d9b9667690ed2059a394">zone</a>-&gt;<a class="code hl_function" href="class_r_g_w_s_i___zone.html#af86fd910c1fcd3e007560d1390e6be15">get_zonegroup</a>().<a class="code hl_function" href="class_r_g_w_system_meta_obj.html#ab885e5d275a5396cc473703ab55f50b1">get_id</a>();</div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span>  }</div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span> </div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span>  <span class="keywordflow">if</span> (*existed) {</div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span>    <a class="code hl_struct" href="structrgw__placement__rule.html">rgw_placement_rule</a> selected_placement_rule;</div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span>    ret = <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_user.html#afc68f752f7d061b047f83d10ad95358a">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#abe4f0602b771d5549a02c0a326d6a832">svc</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_services.html#a6a82305adde4d9b9667690ed2059a394">zone</a>-&gt;<a class="code hl_function" href="class_r_g_w_s_i___zone.html#ab3e68b277b791c51d59cbeeb05f15a75">select_bucket_placement</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, this-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_user.html#a42feea796cc4910bfd37426b5a75fb9f">get_info</a>(),</div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span>                           zid, placement_rule,</div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span>                           &amp;selected_placement_rule, <span class="keyword">nullptr</span>, y);</div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span>    <span class="keywordflow">if</span> (selected_placement_rule != <a class="code hl_variable" href="classrgw_1_1sal_1_1_user.html#a922d7b0bedd79d056d2adc0b276ad992">info</a>.placement_rule) {</div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span>      ret = -EEXIST;</div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span>      bucket_out-&gt;swap(bucket);</div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span>      <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span>    }</div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span> </div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span>    ret = <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_user.html#afc68f752f7d061b047f83d10ad95358a">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aca5c28bc0f22f3f963d0475b594350e1">getRados</a>()-&gt;<a class="code hl_function" href="class_r_g_w_rados.html#a0daf72258a2053351f8cdd14d1e732c8">create_bucket</a>(this-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_user.html#a42feea796cc4910bfd37426b5a75fb9f">get_info</a>(), bucket-&gt;<a class="code hl_function" href="struct_r_g_w_user_info.html#a9282462baa8be64d7afafa4b11969ca3">get_key</a>(),</div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span>                    zid, placement_rule, swift_ver_location, pquota_info,</div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span>                    <a class="code hl_variable" href="classrgw_1_1sal_1_1_user.html#ab1ff4fde76dc54489e69353c952eed5d">attrs</a>, <a class="code hl_variable" href="classrgw_1_1sal_1_1_user.html#a922d7b0bedd79d056d2adc0b276ad992">info</a>, pobjv, &amp;ep_objv, creation_time,</div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span>                    pmaster_bucket, pmaster_num_shards, y, <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>,</div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span>                    exclusive);</div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span>    <span class="keywordflow">if</span> (ret == -EEXIST) {</div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span>      *existed = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span>      <span class="comment">/* bucket already existed, might have raced with another bucket creation,</span></div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span><span class="comment">       * or might be partial bucket creation that never completed. Read existing</span></div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span><span class="comment">       * bucket info, verify that the reported bucket owner is the current user.</span></div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span><span class="comment">       * If all is ok then update the user&#39;s list of buckets.  Otherwise inform</span></div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span><span class="comment">       * client about a name conflict.</span></div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span><span class="comment">       */</span></div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span>      <span class="keywordflow">if</span> (<a class="code hl_variable" href="classrgw_1_1sal_1_1_user.html#a922d7b0bedd79d056d2adc0b276ad992">info</a>.owner.compare(this-&gt;get_id()) != 0) {</div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span>    <span class="keywordflow">return</span> -EEXIST;</div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span>      }</div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span>      ret = 0;</div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ret != 0) {</div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span>      <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span>    }</div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span>  }</div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span> </div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span>  bucket-&gt;set_version(ep_objv);</div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span>  bucket-&gt;get_info() = <a class="code hl_variable" href="classrgw_1_1sal_1_1_user.html#a922d7b0bedd79d056d2adc0b276ad992">info</a>;</div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span> </div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span>  <a class="code hl_class" href="classrgw_1_1sal_1_1_rados_bucket.html">RadosBucket</a>* rbucket = <span class="keyword">static_cast&lt;</span><a class="code hl_class" href="classrgw_1_1sal_1_1_rados_bucket.html">RadosBucket</a>*<span class="keyword">&gt;</span>(bucket.get());</div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span>  ret = rbucket-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_bucket.html#ab6e92c5e7713aaf3774c24c38234f2a0">link</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <span class="keyword">this</span>, y, <span class="keyword">false</span>);</div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span>  <span class="keywordflow">if</span> (ret &amp;&amp; !*existed &amp;&amp; ret != -EEXIST) {</div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span>    <span class="comment">/* if it exists (or previously existed), don&#39;t remove it! */</span></div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span>    ret = rbucket-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_bucket.html#a5ac35440822a9d497a5fe7a12efb63aa">unlink</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <span class="keyword">this</span>, y);</div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span>    <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span>      ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 0) &lt;&lt; <span class="stringliteral">&quot;WARNING: failed to unlink bucket: ret=&quot;</span> &lt;&lt; ret</div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span>               &lt;&lt; dendl;</div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span>    }</div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ret == -EEXIST || (ret == 0 &amp;&amp; *existed)) {</div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span>    ret = -<a class="code hl_define" href="rgw__common_8h.html#a42c392bddb783ae7f2e707f001505dce">ERR_BUCKET_EXISTS</a>;</div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span>  }</div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span> </div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span>  bucket_out-&gt;swap(bucket);</div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span> </div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span>  <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span>}</div>
</div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span> </div>
<div class="foldopen" id="foldopen00287" data-start="{" data-end="}">
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_user.html#a8c38f5ca0fd0fa5f5d2e313c889961f5">  287</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_user.html#a8c38f5ca0fd0fa5f5d2e313c889961f5">RadosUser::read_attrs</a>(<span class="keyword">const</span> DoutPrefixProvider* <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, optional_yield y)</div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span>{</div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_user.html#afc68f752f7d061b047f83d10ad95358a">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#ab6a306bab7ce6cc5da2f287d4d9f11e0">ctl</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_ctl.html#a4e70524a487f44b8db6e5a8826160ac3">user</a>-&gt;<a class="code hl_function" href="class_r_g_w_user_ctl.html#a1090fbc312d89bac76c05691cc1f1c73">get_attrs_by_uid</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_function" href="classrgw_1_1sal_1_1_user.html#a4f6322efe2b6c9c2780eb31cb3a5ca51">get_id</a>(), &amp;<a class="code hl_variable" href="classrgw_1_1sal_1_1_user.html#ab1ff4fde76dc54489e69353c952eed5d">attrs</a>, y, &amp;<a class="code hl_variable" href="classrgw_1_1sal_1_1_user.html#aa4a8644f9bd9472537d88565a3562552">objv_tracker</a>);</div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span>}</div>
</div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span> </div>
<div class="foldopen" id="foldopen00292" data-start="{" data-end="}">
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_user.html#a0e7fa190552dd7b2e3c77862484bdbb7">  292</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_user.html#a0e7fa190552dd7b2e3c77862484bdbb7">RadosUser::merge_and_store_attrs</a>(<span class="keyword">const</span> DoutPrefixProvider* <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_typedef" href="group___r_g_w_s_a_l.html#gab1b58d5f8747844fae5ddfb48fadf7bc">Attrs</a>&amp; new_attrs, optional_yield y)</div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span>{</div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span>  <span class="keywordflow">for</span>(<span class="keyword">auto</span>&amp; it : new_attrs) {</div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span>      <a class="code hl_variable" href="classrgw_1_1sal_1_1_user.html#ab1ff4fde76dc54489e69353c952eed5d">attrs</a>[it.first] = it.second;</div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span>  }</div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_user.html#a2dbc3d91fab341255e2da3faaaeb6a24">store_user</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, y, <span class="keyword">false</span>);</div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span>}</div>
</div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span> </div>
<div class="foldopen" id="foldopen00300" data-start="{" data-end="}">
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_user.html#aaf0b783cf1d35c6ab5de3ea64576c622">  300</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_user.html#aaf0b783cf1d35c6ab5de3ea64576c622">RadosUser::read_stats</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>,</div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span>                             optional_yield y, <a class="code hl_struct" href="struct_r_g_w_storage_stats.html">RGWStorageStats</a>* stats,</div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span>                 ceph::real_time* last_stats_sync,</div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span>                 ceph::real_time* last_stats_update)</div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span>{</div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno">  305</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_user.html#afc68f752f7d061b047f83d10ad95358a">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#ab6a306bab7ce6cc5da2f287d4d9f11e0">ctl</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_ctl.html#a4e70524a487f44b8db6e5a8826160ac3">user</a>-&gt;<a class="code hl_function" href="class_r_g_w_user_ctl.html#a3760e473a86e7c4042feae0d07be99d4">read_stats</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_function" href="classrgw_1_1sal_1_1_user.html#a4f6322efe2b6c9c2780eb31cb3a5ca51">get_id</a>(), stats, y, last_stats_sync, last_stats_update);</div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span>}</div>
</div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span> </div>
<div class="foldopen" id="foldopen00308" data-start="{" data-end="}">
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_user.html#a94d45d2e50f506c492c8254a7b2aac97">  308</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_user.html#a94d45d2e50f506c492c8254a7b2aac97">RadosUser::read_stats_async</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_class" href="class_r_g_w_get_user_stats___c_b.html">RGWGetUserStats_CB</a>* cb)</div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span>{</div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_user.html#afc68f752f7d061b047f83d10ad95358a">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#ab6a306bab7ce6cc5da2f287d4d9f11e0">ctl</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_ctl.html#a4e70524a487f44b8db6e5a8826160ac3">user</a>-&gt;<a class="code hl_function" href="class_r_g_w_user_ctl.html#a16c6a7cb3f286ac7b4d71bfb66d0bd19">read_stats_async</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_function" href="classrgw_1_1sal_1_1_user.html#a4f6322efe2b6c9c2780eb31cb3a5ca51">get_id</a>(), cb);</div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span>}</div>
</div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span> </div>
<div class="foldopen" id="foldopen00313" data-start="{" data-end="}">
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_user.html#a12695203c1613b7bd650cbdb00590447">  313</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_user.html#a12695203c1613b7bd650cbdb00590447">RadosUser::complete_flush_stats</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, optional_yield y)</div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span>{</div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_user.html#afc68f752f7d061b047f83d10ad95358a">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#ab6a306bab7ce6cc5da2f287d4d9f11e0">ctl</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_ctl.html#a4e70524a487f44b8db6e5a8826160ac3">user</a>-&gt;<a class="code hl_function" href="class_r_g_w_user_ctl.html#adae4e2a411b11371a2facbf71fff52fb">complete_flush_stats</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_function" href="classrgw_1_1sal_1_1_user.html#a4f6322efe2b6c9c2780eb31cb3a5ca51">get_id</a>(), y);</div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span>}</div>
</div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span> </div>
<div class="foldopen" id="foldopen00318" data-start="{" data-end="}">
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_user.html#a87c159e3d195d1afc7e7120ce2dc2347">  318</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_user.html#a87c159e3d195d1afc7e7120ce2dc2347">RadosUser::read_usage</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, uint64_t start_epoch, uint64_t end_epoch,</div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span>                   uint32_t max_entries, <span class="keywordtype">bool</span>* is_truncated,</div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno">  320</span>                   <a class="code hl_struct" href="struct_r_g_w_usage_iter.html">RGWUsageIter</a>&amp; usage_iter,</div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span>                   map&lt;rgw_user_bucket, rgw_usage_log_entry&gt;&amp; <a class="code hl_function" href="rgw__admin_8cc.html#a2ef30c42cbc289d899a8be5d2d8f77d0">usage</a>)</div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span>{</div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span>  std::string bucket_name;</div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_user.html#afc68f752f7d061b047f83d10ad95358a">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aca5c28bc0f22f3f963d0475b594350e1">getRados</a>()-&gt;<a class="code hl_function" href="class_r_g_w_rados.html#a0784e49542fdeae286b67d4d6808dcc5">read_usage</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_function" href="classrgw_1_1sal_1_1_user.html#a4f6322efe2b6c9c2780eb31cb3a5ca51">get_id</a>(), bucket_name, start_epoch,</div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span>                       end_epoch, max_entries, is_truncated,</div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno">  326</span>                       usage_iter, <a class="code hl_function" href="rgw__admin_8cc.html#a2ef30c42cbc289d899a8be5d2d8f77d0">usage</a>);</div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span>}</div>
</div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span> </div>
<div class="foldopen" id="foldopen00329" data-start="{" data-end="}">
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_user.html#ae569d736f10b51693a23357ed5966695">  329</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_user.html#ae569d736f10b51693a23357ed5966695">RadosUser::trim_usage</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, uint64_t start_epoch, uint64_t end_epoch)</div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span>{</div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span>  std::string bucket_name;</div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span> </div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_user.html#afc68f752f7d061b047f83d10ad95358a">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aca5c28bc0f22f3f963d0475b594350e1">getRados</a>()-&gt;<a class="code hl_function" href="class_r_g_w_rados.html#a18292448539dcec32dbf15d808818160">trim_usage</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_function" href="classrgw_1_1sal_1_1_user.html#a4f6322efe2b6c9c2780eb31cb3a5ca51">get_id</a>(), bucket_name, start_epoch, end_epoch);</div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span>}</div>
</div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno">  335</span> </div>
<div class="foldopen" id="foldopen00336" data-start="{" data-end="}">
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_user.html#a2802f2c070b4fb01fb22e6343e94e9e8">  336</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_user.html#a2802f2c070b4fb01fb22e6343e94e9e8">RadosUser::load_user</a>(<span class="keyword">const</span> DoutPrefixProvider* <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, optional_yield y)</div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span>{</div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_user.html#afc68f752f7d061b047f83d10ad95358a">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#ab6a306bab7ce6cc5da2f287d4d9f11e0">ctl</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_ctl.html#a4e70524a487f44b8db6e5a8826160ac3">user</a>-&gt;<a class="code hl_function" href="class_r_g_w_user_ctl.html#a6d3aab9f7d72b2217073d1e640a962fd">get_info_by_uid</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_variable" href="classrgw_1_1sal_1_1_user.html#a922d7b0bedd79d056d2adc0b276ad992">info</a>.<a class="code hl_variable" href="struct_r_g_w_user_info.html#a8bf5afa289f85baa264c25a90ddc0f0d">user_id</a>, &amp;<a class="code hl_variable" href="classrgw_1_1sal_1_1_user.html#a922d7b0bedd79d056d2adc0b276ad992">info</a>, y, <a class="code hl_struct" href="struct_r_g_w_user_ctl_1_1_get_params.html">RGWUserCtl::GetParams</a>().<a class="code hl_function" href="struct_r_g_w_user_ctl_1_1_get_params.html#aceb8db643cbdb938a88dca70e1baa87e">set_objv_tracker</a>(&amp;<a class="code hl_variable" href="classrgw_1_1sal_1_1_user.html#aa4a8644f9bd9472537d88565a3562552">objv_tracker</a>).<a class="code hl_function" href="struct_r_g_w_user_ctl_1_1_get_params.html#aa4c6a5d2312ff3e55ec1e0b823240306">set_attrs</a>(&amp;<a class="code hl_variable" href="classrgw_1_1sal_1_1_user.html#ab1ff4fde76dc54489e69353c952eed5d">attrs</a>));</div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span>}</div>
</div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span> </div>
<div class="foldopen" id="foldopen00341" data-start="{" data-end="}">
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_user.html#a2dbc3d91fab341255e2da3faaaeb6a24">  341</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_user.html#a2dbc3d91fab341255e2da3faaaeb6a24">RadosUser::store_user</a>(<span class="keyword">const</span> DoutPrefixProvider* <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, optional_yield y, <span class="keywordtype">bool</span> exclusive, <a class="code hl_struct" href="struct_r_g_w_user_info.html">RGWUserInfo</a>* old_info)</div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span>{</div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_user.html#afc68f752f7d061b047f83d10ad95358a">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#ab6a306bab7ce6cc5da2f287d4d9f11e0">ctl</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_ctl.html#a4e70524a487f44b8db6e5a8826160ac3">user</a>-&gt;<a class="code hl_function" href="class_r_g_w_user_ctl.html#abf43e97d7688c25ebe361ff77e651fbd">store_info</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_variable" href="classrgw_1_1sal_1_1_user.html#a922d7b0bedd79d056d2adc0b276ad992">info</a>, y,</div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span>                      <a class="code hl_struct" href="struct_r_g_w_user_ctl_1_1_put_params.html">RGWUserCtl::PutParams</a>().set_objv_tracker(&amp;<a class="code hl_variable" href="classrgw_1_1sal_1_1_user.html#aa4a8644f9bd9472537d88565a3562552">objv_tracker</a>)</div>
<div class="line"><a id="l00345" name="l00345"></a><span class="lineno">  345</span>                      .set_exclusive(exclusive)</div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno">  346</span>                      .<a class="code hl_function" href="classrgw_1_1sal_1_1_user.html#adb49139a11a243f7318b99466c52cc67">set_attrs</a>(&amp;<a class="code hl_variable" href="classrgw_1_1sal_1_1_user.html#ab1ff4fde76dc54489e69353c952eed5d">attrs</a>)</div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span>                      .set_old_info(old_info));</div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span>}</div>
</div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span> </div>
<div class="foldopen" id="foldopen00350" data-start="{" data-end="}">
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_user.html#ac6e582a04386589a4f842e62aa884582">  350</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_user.html#ac6e582a04386589a4f842e62aa884582">RadosUser::remove_user</a>(<span class="keyword">const</span> DoutPrefixProvider* <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, optional_yield y)</div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno">  351</span>{</div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno">  352</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_user.html#afc68f752f7d061b047f83d10ad95358a">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#ab6a306bab7ce6cc5da2f287d4d9f11e0">ctl</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_ctl.html#a4e70524a487f44b8db6e5a8826160ac3">user</a>-&gt;<a class="code hl_function" href="class_r_g_w_user_ctl.html#a10a5d80dff730b84e09b538ec28f6408">remove_info</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_variable" href="classrgw_1_1sal_1_1_user.html#a922d7b0bedd79d056d2adc0b276ad992">info</a>, y,</div>
<div class="line"><a id="l00353" name="l00353"></a><span class="lineno">  353</span>                      <a class="code hl_struct" href="struct_r_g_w_user_ctl_1_1_remove_params.html">RGWUserCtl::RemoveParams</a>().set_objv_tracker(&amp;<a class="code hl_variable" href="classrgw_1_1sal_1_1_user.html#aa4a8644f9bd9472537d88565a3562552">objv_tracker</a>));</div>
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span>}</div>
</div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span> </div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_bucket.html#a6a55e288b37a987bb8767a595df685eb">  356</a></span><a class="code hl_function" href="classrgw_1_1sal_1_1_rados_bucket.html#a6a55e288b37a987bb8767a595df685eb">RadosBucket::~RadosBucket</a>() {}</div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span> </div>
<div class="foldopen" id="foldopen00358" data-start="{" data-end="}">
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_bucket.html#a85ae3c70b1a7f88541c372207647b9b8">  358</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_bucket.html#a85ae3c70b1a7f88541c372207647b9b8">RadosBucket::remove_bucket</a>(<span class="keyword">const</span> DoutPrefixProvider* <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>,</div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span>                   <span class="keywordtype">bool</span> delete_children,</div>
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno">  360</span>                   <span class="keywordtype">bool</span> forward_to_master,</div>
<div class="line"><a id="l00361" name="l00361"></a><span class="lineno">  361</span>                   <a class="code hl_struct" href="structreq__info.html">req_info</a>* <a class="code hl_struct" href="structreq__info.html">req_info</a>,</div>
<div class="line"><a id="l00362" name="l00362"></a><span class="lineno">  362</span>                   optional_yield y)</div>
<div class="line"><a id="l00363" name="l00363"></a><span class="lineno">  363</span>{</div>
<div class="line"><a id="l00364" name="l00364"></a><span class="lineno">  364</span>  <span class="keywordtype">int</span> ret;</div>
<div class="line"><a id="l00365" name="l00365"></a><span class="lineno">  365</span> </div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span>  <span class="comment">// Refresh info</span></div>
<div class="line"><a id="l00367" name="l00367"></a><span class="lineno">  367</span>  ret = <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_bucket.html#a3e5ce63086104232631656900b62a3c6">load_bucket</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, y);</div>
<div class="line"><a id="l00368" name="l00368"></a><span class="lineno">  368</span>  <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line"><a id="l00369" name="l00369"></a><span class="lineno">  369</span>    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span>  }</div>
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno">  371</span> </div>
<div class="line"><a id="l00372" name="l00372"></a><span class="lineno">  372</span>  <a class="code hl_struct" href="structrgw_1_1sal_1_1_bucket_1_1_list_params.html">ListParams</a> params;</div>
<div class="line"><a id="l00373" name="l00373"></a><span class="lineno">  373</span>  params.<a class="code hl_variable" href="structrgw_1_1sal_1_1_bucket_1_1_list_params.html#a3e5357a4fcc9044dc97ee55896d886ac">list_versions</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00374" name="l00374"></a><span class="lineno">  374</span>  params.<a class="code hl_variable" href="structrgw_1_1sal_1_1_bucket_1_1_list_params.html#a78317932ae255789bd3114d546bf7d78">allow_unordered</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00375" name="l00375"></a><span class="lineno">  375</span> </div>
<div class="line"><a id="l00376" name="l00376"></a><span class="lineno">  376</span>  <a class="code hl_struct" href="structrgw_1_1sal_1_1_bucket_1_1_list_results.html">ListResults</a> results;</div>
<div class="line"><a id="l00377" name="l00377"></a><span class="lineno">  377</span> </div>
<div class="line"><a id="l00378" name="l00378"></a><span class="lineno">  378</span>  <span class="keywordflow">do</span> {</div>
<div class="line"><a id="l00379" name="l00379"></a><span class="lineno">  379</span>    results.<a class="code hl_variable" href="structrgw_1_1sal_1_1_bucket_1_1_list_results.html#ad2d05625f45090ae48961cca1ac235c1">objs</a>.clear();</div>
<div class="line"><a id="l00380" name="l00380"></a><span class="lineno">  380</span> </div>
<div class="line"><a id="l00381" name="l00381"></a><span class="lineno">  381</span>    ret = <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_bucket.html#a31db25ba09d16dee01fa8889bc4fe9cd">list</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, params, 1000, results, y);</div>
<div class="line"><a id="l00382" name="l00382"></a><span class="lineno">  382</span>    <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line"><a id="l00383" name="l00383"></a><span class="lineno">  383</span>      <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l00384" name="l00384"></a><span class="lineno">  384</span>    }</div>
<div class="line"><a id="l00385" name="l00385"></a><span class="lineno">  385</span> </div>
<div class="line"><a id="l00386" name="l00386"></a><span class="lineno">  386</span>    <span class="keywordflow">if</span> (!results.<a class="code hl_variable" href="structrgw_1_1sal_1_1_bucket_1_1_list_results.html#ad2d05625f45090ae48961cca1ac235c1">objs</a>.empty() &amp;&amp; !delete_children) {</div>
<div class="line"><a id="l00387" name="l00387"></a><span class="lineno">  387</span>      ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, -1) &lt;&lt; <span class="stringliteral">&quot;ERROR: could not remove non-empty bucket &quot;</span> &lt;&lt; <a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#aa70480c22292c75f5e62829aeee2ed21">info</a>.<a class="code hl_variable" href="struct_r_g_w_bucket_info.html#afbd8422e16061abdf72d710794ac74d4">bucket</a>.<a class="code hl_variable" href="structrgw__bucket.html#a32d3529f5b0c53051c856a7abe867a6b">name</a> &lt;&lt;</div>
<div class="line"><a id="l00388" name="l00388"></a><span class="lineno">  388</span>    dendl;</div>
<div class="line"><a id="l00389" name="l00389"></a><span class="lineno">  389</span>      <span class="keywordflow">return</span> -ENOTEMPTY;</div>
<div class="line"><a id="l00390" name="l00390"></a><span class="lineno">  390</span>    }</div>
<div class="line"><a id="l00391" name="l00391"></a><span class="lineno">  391</span> </div>
<div class="line"><a id="l00392" name="l00392"></a><span class="lineno">  392</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; obj : results.<a class="code hl_variable" href="structrgw_1_1sal_1_1_bucket_1_1_list_results.html#ad2d05625f45090ae48961cca1ac235c1">objs</a>) {</div>
<div class="line"><a id="l00393" name="l00393"></a><span class="lineno">  393</span>      <a class="code hl_struct" href="structrgw__obj__key.html">rgw_obj_key</a> key(obj.key);</div>
<div class="line"><a id="l00394" name="l00394"></a><span class="lineno">  394</span>      <span class="comment">/* xxx dang */</span></div>
<div class="line"><a id="l00395" name="l00395"></a><span class="lineno">  395</span>      ret = <a class="code hl_function" href="rgw__bucket_8cc.html#a8735d4afd71679718d85762ef4d135b0">rgw_remove_object</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_bucket.html#a66ca8b0d7bf8f5a6670e5b7956220c0b">store</a>, <span class="keyword">this</span>, key);</div>
<div class="line"><a id="l00396" name="l00396"></a><span class="lineno">  396</span>      <span class="keywordflow">if</span> (ret &lt; 0 &amp;&amp; ret != -ENOENT) {</div>
<div class="line"><a id="l00397" name="l00397"></a><span class="lineno">  397</span>    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l00398" name="l00398"></a><span class="lineno">  398</span>      }</div>
<div class="line"><a id="l00399" name="l00399"></a><span class="lineno">  399</span>    }</div>
<div class="line"><a id="l00400" name="l00400"></a><span class="lineno">  400</span>  } <span class="keywordflow">while</span>(results.<a class="code hl_variable" href="structrgw_1_1sal_1_1_bucket_1_1_list_results.html#a5b9a541d2f6fe22f99cbaa279c8d12e4">is_truncated</a>);</div>
<div class="line"><a id="l00401" name="l00401"></a><span class="lineno">  401</span> </div>
<div class="line"><a id="l00402" name="l00402"></a><span class="lineno">  402</span>  ret = <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_bucket.html#a04041791ae7b579c54a57e501ab5ae63">abort_multiparts</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_bucket.html#a66ca8b0d7bf8f5a6670e5b7956220c0b">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aabf846e99f9f01172f86ce5e7fb1ed5b">ctx</a>());</div>
<div class="line"><a id="l00403" name="l00403"></a><span class="lineno">  403</span>  <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line"><a id="l00404" name="l00404"></a><span class="lineno">  404</span>    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l00405" name="l00405"></a><span class="lineno">  405</span>  }</div>
<div class="line"><a id="l00406" name="l00406"></a><span class="lineno">  406</span> </div>
<div class="line"><a id="l00407" name="l00407"></a><span class="lineno">  407</span>  <span class="comment">// remove lifecycle config, if any (XXX note could be made generic)</span></div>
<div class="line"><a id="l00408" name="l00408"></a><span class="lineno">  408</span>  (void) <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_bucket.html#a66ca8b0d7bf8f5a6670e5b7956220c0b">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aca5c28bc0f22f3f963d0475b594350e1">getRados</a>()-&gt;<a class="code hl_function" href="class_r_g_w_rados.html#a9366df390b61d5ddf0370962c05ef067">get_lc</a>()-&gt;<a class="code hl_function" href="class_r_g_w_l_c.html#ae217a0af681e59a9e935bd90d9c15c14">remove_bucket_config</a>(</div>
<div class="line"><a id="l00409" name="l00409"></a><span class="lineno">  409</span>    <span class="keyword">this</span>, <a class="code hl_function" href="classrgw_1_1sal_1_1_bucket.html#a8b49a035b8b328338492032f312fc3ca">get_attrs</a>());</div>
<div class="line"><a id="l00410" name="l00410"></a><span class="lineno">  410</span> </div>
<div class="line"><a id="l00411" name="l00411"></a><span class="lineno">  411</span>  ret = <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_bucket.html#a66ca8b0d7bf8f5a6670e5b7956220c0b">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#ab6a306bab7ce6cc5da2f287d4d9f11e0">ctl</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_ctl.html#aad9554920ed5b4cc9b75de55bb1af061">bucket</a>-&gt;<a class="code hl_function" href="class_r_g_w_bucket_ctl.html#aa4b7d70b20d0507e2d4dea78f003dfa7">sync_user_stats</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#aa70480c22292c75f5e62829aeee2ed21">info</a>.<a class="code hl_variable" href="struct_r_g_w_bucket_info.html#a18215d487317142f30bd2675ccec2293">owner</a>, <a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#aa70480c22292c75f5e62829aeee2ed21">info</a>, y, <span class="keyword">nullptr</span>);</div>
<div class="line"><a id="l00412" name="l00412"></a><span class="lineno">  412</span>  <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line"><a id="l00413" name="l00413"></a><span class="lineno">  413</span>     ldout(<a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_bucket.html#a66ca8b0d7bf8f5a6670e5b7956220c0b">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aabf846e99f9f01172f86ce5e7fb1ed5b">ctx</a>(), 1) &lt;&lt; <span class="stringliteral">&quot;WARNING: failed sync user stats before bucket delete. ret=&quot;</span> &lt;&lt;  ret &lt;&lt; dendl;</div>
<div class="line"><a id="l00414" name="l00414"></a><span class="lineno">  414</span>  }</div>
<div class="line"><a id="l00415" name="l00415"></a><span class="lineno">  415</span> </div>
<div class="line"><a id="l00416" name="l00416"></a><span class="lineno">  416</span>  <a class="code hl_struct" href="struct_r_g_w_obj_version_tracker.html">RGWObjVersionTracker</a> ot;</div>
<div class="line"><a id="l00417" name="l00417"></a><span class="lineno">  417</span> </div>
<div class="line"><a id="l00418" name="l00418"></a><span class="lineno">  418</span>  <span class="comment">// if we deleted children above we will force delete, as any that</span></div>
<div class="line"><a id="l00419" name="l00419"></a><span class="lineno">  419</span>  <span class="comment">// remain is detrius from a prior bug</span></div>
<div class="line"><a id="l00420" name="l00420"></a><span class="lineno">  420</span>  ret = <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_bucket.html#a66ca8b0d7bf8f5a6670e5b7956220c0b">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aca5c28bc0f22f3f963d0475b594350e1">getRados</a>()-&gt;<a class="code hl_function" href="class_r_g_w_rados.html#ab47feb5daf10bf8479b08a8a70a829f1">delete_bucket</a>(<a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#aa70480c22292c75f5e62829aeee2ed21">info</a>, ot, y, <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, !delete_children);</div>
<div class="line"><a id="l00421" name="l00421"></a><span class="lineno">  421</span>  <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line"><a id="l00422" name="l00422"></a><span class="lineno">  422</span>    ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, -1) &lt;&lt; <span class="stringliteral">&quot;ERROR: could not remove bucket &quot;</span> &lt;&lt;</div>
<div class="line"><a id="l00423" name="l00423"></a><span class="lineno">  423</span>      <a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#aa70480c22292c75f5e62829aeee2ed21">info</a>.<a class="code hl_variable" href="struct_r_g_w_bucket_info.html#afbd8422e16061abdf72d710794ac74d4">bucket</a>.<a class="code hl_variable" href="structrgw__bucket.html#a32d3529f5b0c53051c856a7abe867a6b">name</a> &lt;&lt; dendl;</div>
<div class="line"><a id="l00424" name="l00424"></a><span class="lineno">  424</span>    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l00425" name="l00425"></a><span class="lineno">  425</span>  }</div>
<div class="line"><a id="l00426" name="l00426"></a><span class="lineno">  426</span> </div>
<div class="line"><a id="l00427" name="l00427"></a><span class="lineno">  427</span>  <span class="comment">// if bucket has notification definitions associated with it</span></div>
<div class="line"><a id="l00428" name="l00428"></a><span class="lineno">  428</span>  <span class="comment">// they should be removed (note that any pending notifications on the bucket are still going to be sent)</span></div>
<div class="line"><a id="l00429" name="l00429"></a><span class="lineno">  429</span>  <a class="code hl_class" href="class_r_g_w_pub_sub.html">RGWPubSub</a> ps(<a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_bucket.html#a66ca8b0d7bf8f5a6670e5b7956220c0b">store</a>, <a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#aa70480c22292c75f5e62829aeee2ed21">info</a>.<a class="code hl_variable" href="struct_r_g_w_bucket_info.html#a18215d487317142f30bd2675ccec2293">owner</a>.<a class="code hl_variable" href="structrgw__user.html#a2bf13ba0bf6b95ba5a0832e2ba1370e0">tenant</a>);</div>
<div class="line"><a id="l00430" name="l00430"></a><span class="lineno">  430</span>  <a class="code hl_class" href="class_r_g_w_pub_sub_1_1_bucket.html">RGWPubSub::Bucket</a> ps_bucket(&amp;ps, <a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#aa70480c22292c75f5e62829aeee2ed21">info</a>.<a class="code hl_variable" href="struct_r_g_w_bucket_info.html#afbd8422e16061abdf72d710794ac74d4">bucket</a>);</div>
<div class="line"><a id="l00431" name="l00431"></a><span class="lineno">  431</span>  <span class="keyword">const</span> <span class="keyword">auto</span> ps_ret = ps_bucket.<a class="code hl_function" href="class_r_g_w_pub_sub_1_1_bucket.html#a363ba029ca4b82ab556db48123ae7ef0">remove_notifications</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, y);</div>
<div class="line"><a id="l00432" name="l00432"></a><span class="lineno">  432</span>  <span class="keywordflow">if</span> (ps_ret &lt; 0 &amp;&amp; ps_ret != -ENOENT) {</div>
<div class="line"><a id="l00433" name="l00433"></a><span class="lineno">  433</span>    ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, -1) &lt;&lt; <span class="stringliteral">&quot;ERROR: unable to remove notifications from bucket. ret=&quot;</span> &lt;&lt; ps_ret &lt;&lt; dendl;</div>
<div class="line"><a id="l00434" name="l00434"></a><span class="lineno">  434</span>  }</div>
<div class="line"><a id="l00435" name="l00435"></a><span class="lineno">  435</span> </div>
<div class="line"><a id="l00436" name="l00436"></a><span class="lineno">  436</span>  ret = <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_bucket.html#a66ca8b0d7bf8f5a6670e5b7956220c0b">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#ab6a306bab7ce6cc5da2f287d4d9f11e0">ctl</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_ctl.html#aad9554920ed5b4cc9b75de55bb1af061">bucket</a>-&gt;<a class="code hl_function" href="class_r_g_w_bucket_ctl.html#a677f6ece17728acf4dcaaee20b86942c">unlink_bucket</a>(<a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#aa70480c22292c75f5e62829aeee2ed21">info</a>.<a class="code hl_variable" href="struct_r_g_w_bucket_info.html#a18215d487317142f30bd2675ccec2293">owner</a>, <a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#aa70480c22292c75f5e62829aeee2ed21">info</a>.<a class="code hl_variable" href="struct_r_g_w_bucket_info.html#afbd8422e16061abdf72d710794ac74d4">bucket</a>, y, <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <span class="keyword">false</span>);</div>
<div class="line"><a id="l00437" name="l00437"></a><span class="lineno">  437</span>  <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line"><a id="l00438" name="l00438"></a><span class="lineno">  438</span>    ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, -1) &lt;&lt; <span class="stringliteral">&quot;ERROR: unable to remove user bucket information&quot;</span> &lt;&lt; dendl;</div>
<div class="line"><a id="l00439" name="l00439"></a><span class="lineno">  439</span>  }</div>
<div class="line"><a id="l00440" name="l00440"></a><span class="lineno">  440</span> </div>
<div class="line"><a id="l00441" name="l00441"></a><span class="lineno">  441</span>  <span class="keywordflow">if</span> (forward_to_master) {</div>
<div class="line"><a id="l00442" name="l00442"></a><span class="lineno">  442</span>    bufferlist in_data;</div>
<div class="line"><a id="l00443" name="l00443"></a><span class="lineno">  443</span>    ret = <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_bucket.html#a66ca8b0d7bf8f5a6670e5b7956220c0b">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#a62bb26ebcdeb355f92e8cc5a37c227dd">forward_request_to_master</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#a62d427fa47e904aaf18be892b9b502f9">owner</a>, &amp;ot.<a class="code hl_variable" href="struct_r_g_w_obj_version_tracker.html#a431b0a1cb0d7ebd40d1529aa7d6415eb">read_version</a>, in_data, <span class="keyword">nullptr</span>, *<a class="code hl_struct" href="structreq__info.html">req_info</a>, y);</div>
<div class="line"><a id="l00444" name="l00444"></a><span class="lineno">  444</span>    <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line"><a id="l00445" name="l00445"></a><span class="lineno">  445</span>      <span class="keywordflow">if</span> (ret == -ENOENT) {</div>
<div class="line"><a id="l00446" name="l00446"></a><span class="lineno">  446</span>    <span class="comment">/* adjust error, we want to return with NoSuchBucket and not</span></div>
<div class="line"><a id="l00447" name="l00447"></a><span class="lineno">  447</span><span class="comment">     * NoSuchKey */</span></div>
<div class="line"><a id="l00448" name="l00448"></a><span class="lineno">  448</span>    ret = -<a class="code hl_define" href="rgw__common_8h.html#aba1a4d306847a4961003f8703daea614">ERR_NO_SUCH_BUCKET</a>;</div>
<div class="line"><a id="l00449" name="l00449"></a><span class="lineno">  449</span>      }</div>
<div class="line"><a id="l00450" name="l00450"></a><span class="lineno">  450</span>      <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l00451" name="l00451"></a><span class="lineno">  451</span>    }</div>
<div class="line"><a id="l00452" name="l00452"></a><span class="lineno">  452</span>  }</div>
<div class="line"><a id="l00453" name="l00453"></a><span class="lineno">  453</span> </div>
<div class="line"><a id="l00454" name="l00454"></a><span class="lineno">  454</span>  <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l00455" name="l00455"></a><span class="lineno">  455</span>}</div>
</div>
<div class="line"><a id="l00456" name="l00456"></a><span class="lineno">  456</span> </div>
<div class="foldopen" id="foldopen00457" data-start="{" data-end="}">
<div class="line"><a id="l00457" name="l00457"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_bucket.html#a53c98d8b35949e4e46bfcdae4446927b">  457</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_bucket.html#a53c98d8b35949e4e46bfcdae4446927b">RadosBucket::remove_bucket_bypass_gc</a>(<span class="keywordtype">int</span> concurrent_max, <span class="keywordtype">bool</span></div>
<div class="line"><a id="l00458" name="l00458"></a><span class="lineno">  458</span>                     keep_index_consistent,</div>
<div class="line"><a id="l00459" name="l00459"></a><span class="lineno">  459</span>                     optional_yield y, <span class="keyword">const</span></div>
<div class="line"><a id="l00460" name="l00460"></a><span class="lineno">  460</span>                     DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>)</div>
<div class="line"><a id="l00461" name="l00461"></a><span class="lineno">  461</span>{</div>
<div class="line"><a id="l00462" name="l00462"></a><span class="lineno">  462</span>  <span class="keywordtype">int</span> ret;</div>
<div class="line"><a id="l00463" name="l00463"></a><span class="lineno">  463</span>  map&lt;RGWObjCategory, RGWStorageStats&gt; stats;</div>
<div class="line"><a id="l00464" name="l00464"></a><span class="lineno">  464</span>  map&lt;string, bool&gt; common_prefixes;</div>
<div class="line"><a id="l00465" name="l00465"></a><span class="lineno">  465</span>  <a class="code hl_class" href="class_r_g_w_object_ctx.html">RGWObjectCtx</a> obj_ctx(<a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_bucket.html#a66ca8b0d7bf8f5a6670e5b7956220c0b">store</a>);</div>
<div class="line"><a id="l00466" name="l00466"></a><span class="lineno">  466</span>  CephContext *<a class="code hl_variable" href="cls__fifo__legacy_8cc.html#aa76801f7597f40e158b5f38b2e6466c5">cct</a> = <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_bucket.html#a66ca8b0d7bf8f5a6670e5b7956220c0b">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aabf846e99f9f01172f86ce5e7fb1ed5b">ctx</a>();</div>
<div class="line"><a id="l00467" name="l00467"></a><span class="lineno">  467</span> </div>
<div class="line"><a id="l00468" name="l00468"></a><span class="lineno">  468</span>  <span class="keywordtype">string</span> bucket_ver, master_ver;</div>
<div class="line"><a id="l00469" name="l00469"></a><span class="lineno">  469</span> </div>
<div class="line"><a id="l00470" name="l00470"></a><span class="lineno">  470</span>  ret = <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_bucket.html#a3e5ce63086104232631656900b62a3c6">load_bucket</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, null_yield);</div>
<div class="line"><a id="l00471" name="l00471"></a><span class="lineno">  471</span>  <span class="keywordflow">if</span> (ret &lt; 0)</div>
<div class="line"><a id="l00472" name="l00472"></a><span class="lineno">  472</span>    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l00473" name="l00473"></a><span class="lineno">  473</span> </div>
<div class="line"><a id="l00474" name="l00474"></a><span class="lineno">  474</span>  ret = <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_bucket.html#acdf13f1a532feb7aaddfcc7791b9cf26">read_stats</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_define" href="rgw__tools_8h.html#a120c104c1c60ab76c39ca67df4da233f">RGW_NO_SHARD</a>, &amp;bucket_ver, &amp;master_ver, stats, NULL);</div>
<div class="line"><a id="l00475" name="l00475"></a><span class="lineno">  475</span>  <span class="keywordflow">if</span> (ret &lt; 0)</div>
<div class="line"><a id="l00476" name="l00476"></a><span class="lineno">  476</span>    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l00477" name="l00477"></a><span class="lineno">  477</span> </div>
<div class="line"><a id="l00478" name="l00478"></a><span class="lineno">  478</span>  ret = <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_bucket.html#a04041791ae7b579c54a57e501ab5ae63">abort_multiparts</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_variable" href="cls__fifo__legacy_8cc.html#aa76801f7597f40e158b5f38b2e6466c5">cct</a>);</div>
<div class="line"><a id="l00479" name="l00479"></a><span class="lineno">  479</span>  <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line"><a id="l00480" name="l00480"></a><span class="lineno">  480</span>    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l00481" name="l00481"></a><span class="lineno">  481</span>  }</div>
<div class="line"><a id="l00482" name="l00482"></a><span class="lineno">  482</span> </div>
<div class="line"><a id="l00483" name="l00483"></a><span class="lineno">  483</span>  <a class="code hl_struct" href="structrgw_1_1sal_1_1_bucket_1_1_list_params.html">rgw::sal::Bucket::ListParams</a> params;</div>
<div class="line"><a id="l00484" name="l00484"></a><span class="lineno">  484</span>  <a class="code hl_struct" href="structrgw_1_1sal_1_1_bucket_1_1_list_results.html">rgw::sal::Bucket::ListResults</a> results;</div>
<div class="line"><a id="l00485" name="l00485"></a><span class="lineno">  485</span> </div>
<div class="line"><a id="l00486" name="l00486"></a><span class="lineno">  486</span>  params.<a class="code hl_variable" href="structrgw_1_1sal_1_1_bucket_1_1_list_params.html#a3e5357a4fcc9044dc97ee55896d886ac">list_versions</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00487" name="l00487"></a><span class="lineno">  487</span>  params.<a class="code hl_variable" href="structrgw_1_1sal_1_1_bucket_1_1_list_params.html#a78317932ae255789bd3114d546bf7d78">allow_unordered</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00488" name="l00488"></a><span class="lineno">  488</span> </div>
<div class="line"><a id="l00489" name="l00489"></a><span class="lineno">  489</span>  std::unique_ptr&lt;rgw::sal::Completions&gt; <a class="code hl_variable" href="rgw__http__client_8cc.html#aba463bb153e727781020a037c44a6134">handles</a> = <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_bucket.html#a66ca8b0d7bf8f5a6670e5b7956220c0b">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#afb039b5009df54d8f2d69d4dadce3689">get_completions</a>();</div>
<div class="line"><a id="l00490" name="l00490"></a><span class="lineno">  490</span> </div>
<div class="line"><a id="l00491" name="l00491"></a><span class="lineno">  491</span>  <span class="keywordtype">int</span> max_aio = concurrent_max;</div>
<div class="line"><a id="l00492" name="l00492"></a><span class="lineno">  492</span>  results.<a class="code hl_variable" href="structrgw_1_1sal_1_1_bucket_1_1_list_results.html#a5b9a541d2f6fe22f99cbaa279c8d12e4">is_truncated</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00493" name="l00493"></a><span class="lineno">  493</span> </div>
<div class="line"><a id="l00494" name="l00494"></a><span class="lineno">  494</span>  <span class="keywordflow">while</span> (results.<a class="code hl_variable" href="structrgw_1_1sal_1_1_bucket_1_1_list_results.html#a5b9a541d2f6fe22f99cbaa279c8d12e4">is_truncated</a>) {</div>
<div class="line"><a id="l00495" name="l00495"></a><span class="lineno">  495</span>    ret = <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_bucket.html#a31db25ba09d16dee01fa8889bc4fe9cd">list</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, params, <a class="code hl_variable" href="namespacergw_1_1sal.html#afa6be74dee4567d008d67ee76681e757">listing_max_entries</a>, results, null_yield);</div>
<div class="line"><a id="l00496" name="l00496"></a><span class="lineno">  496</span>    <span class="keywordflow">if</span> (ret &lt; 0)</div>
<div class="line"><a id="l00497" name="l00497"></a><span class="lineno">  497</span>      <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l00498" name="l00498"></a><span class="lineno">  498</span> </div>
<div class="line"><a id="l00499" name="l00499"></a><span class="lineno">  499</span>    std::vector&lt;rgw_bucket_dir_entry&gt;::iterator it = results.<a class="code hl_variable" href="structrgw_1_1sal_1_1_bucket_1_1_list_results.html#ad2d05625f45090ae48961cca1ac235c1">objs</a>.begin();</div>
<div class="line"><a id="l00500" name="l00500"></a><span class="lineno">  500</span>    <span class="keywordflow">for</span> (; it != results.<a class="code hl_variable" href="structrgw_1_1sal_1_1_bucket_1_1_list_results.html#ad2d05625f45090ae48961cca1ac235c1">objs</a>.end(); ++it) {</div>
<div class="line"><a id="l00501" name="l00501"></a><span class="lineno">  501</span>      <a class="code hl_struct" href="struct_r_g_w_obj_state.html">RGWObjState</a> *astate = NULL;</div>
<div class="line"><a id="l00502" name="l00502"></a><span class="lineno">  502</span>      std::unique_ptr&lt;rgw::sal::Object&gt; obj = <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_bucket.html#ab2883227497e827c9caea46680f506d9">get_object</a>((*it).key);</div>
<div class="line"><a id="l00503" name="l00503"></a><span class="lineno">  503</span> </div>
<div class="line"><a id="l00504" name="l00504"></a><span class="lineno">  504</span>      ret = obj-&gt;get_obj_state(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, &amp;obj_ctx, &amp;astate, y, <span class="keyword">false</span>);</div>
<div class="line"><a id="l00505" name="l00505"></a><span class="lineno">  505</span>      <span class="keywordflow">if</span> (ret == -ENOENT) {</div>
<div class="line"><a id="l00506" name="l00506"></a><span class="lineno">  506</span>        ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 1) &lt;&lt; <span class="stringliteral">&quot;WARNING: cannot find obj state for obj &quot;</span> &lt;&lt; obj &lt;&lt; dendl;</div>
<div class="line"><a id="l00507" name="l00507"></a><span class="lineno">  507</span>        <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00508" name="l00508"></a><span class="lineno">  508</span>      }</div>
<div class="line"><a id="l00509" name="l00509"></a><span class="lineno">  509</span>      <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line"><a id="l00510" name="l00510"></a><span class="lineno">  510</span>        ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, -1) &lt;&lt; <span class="stringliteral">&quot;ERROR: get obj state returned with error &quot;</span> &lt;&lt; ret &lt;&lt; dendl;</div>
<div class="line"><a id="l00511" name="l00511"></a><span class="lineno">  511</span>        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l00512" name="l00512"></a><span class="lineno">  512</span>      }</div>
<div class="line"><a id="l00513" name="l00513"></a><span class="lineno">  513</span> </div>
<div class="line"><a id="l00514" name="l00514"></a><span class="lineno">  514</span>      <span class="keywordflow">if</span> (astate-&gt;<a class="code hl_variable" href="struct_r_g_w_obj_state.html#afe406574ac61dad317fd3333aacd3d37">manifest</a>) {</div>
<div class="line"><a id="l00515" name="l00515"></a><span class="lineno">  515</span>        <a class="code hl_class" href="class_r_g_w_obj_manifest.html">RGWObjManifest</a>&amp; manifest = *astate-&gt;<a class="code hl_variable" href="struct_r_g_w_obj_state.html#afe406574ac61dad317fd3333aacd3d37">manifest</a>;</div>
<div class="line"><a id="l00516" name="l00516"></a><span class="lineno">  516</span>        <a class="code hl_class" href="class_r_g_w_obj_manifest_1_1obj__iterator.html">RGWObjManifest::obj_iterator</a> miter = manifest.<a class="code hl_function" href="class_r_g_w_obj_manifest.html#ae2f4e68b09b46a0df516c63b2edbcffb">obj_begin</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>);</div>
<div class="line"><a id="l00517" name="l00517"></a><span class="lineno">  517</span>    std::unique_ptr&lt;rgw::sal::Object&gt; head_obj = <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_bucket.html#ab2883227497e827c9caea46680f506d9">get_object</a>(manifest.<a class="code hl_function" href="class_r_g_w_obj_manifest.html#a7942c439ac6dbf41c055e0d7431cc4ed">get_obj</a>().<a class="code hl_variable" href="structrgw__obj.html#a72f701ee22f8eb3f3868d0aefb581249">key</a>);</div>
<div class="line"><a id="l00518" name="l00518"></a><span class="lineno">  518</span>        <a class="code hl_struct" href="structrgw__raw__obj.html">rgw_raw_obj</a> raw_head_obj;</div>
<div class="line"><a id="l00519" name="l00519"></a><span class="lineno">  519</span>    <span class="keyword">dynamic_cast&lt;</span><a class="code hl_class" href="classrgw_1_1sal_1_1_rados_object.html">RadosObject</a>*<span class="keyword">&gt;</span>(head_obj.get())-&gt;get_raw_obj(&amp;raw_head_obj);</div>
<div class="line"><a id="l00520" name="l00520"></a><span class="lineno">  520</span> </div>
<div class="line"><a id="l00521" name="l00521"></a><span class="lineno">  521</span>        <span class="keywordflow">for</span> (; miter != manifest.<a class="code hl_function" href="class_r_g_w_obj_manifest.html#acd322607ce983203f80ab1518a531f4c">obj_end</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>) &amp;&amp; max_aio--; ++miter) {</div>
<div class="line"><a id="l00522" name="l00522"></a><span class="lineno">  522</span>          <span class="keywordflow">if</span> (!max_aio) {</div>
<div class="line"><a id="l00523" name="l00523"></a><span class="lineno">  523</span>            ret = <a class="code hl_variable" href="rgw__http__client_8cc.html#aba463bb153e727781020a037c44a6134">handles</a>-&gt;drain();</div>
<div class="line"><a id="l00524" name="l00524"></a><span class="lineno">  524</span>            <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line"><a id="l00525" name="l00525"></a><span class="lineno">  525</span>              ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, -1) &lt;&lt; <span class="stringliteral">&quot;ERROR: could not drain handles as aio completion returned with &quot;</span> &lt;&lt; ret &lt;&lt; dendl;</div>
<div class="line"><a id="l00526" name="l00526"></a><span class="lineno">  526</span>              <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l00527" name="l00527"></a><span class="lineno">  527</span>            }</div>
<div class="line"><a id="l00528" name="l00528"></a><span class="lineno">  528</span>            max_aio = concurrent_max;</div>
<div class="line"><a id="l00529" name="l00529"></a><span class="lineno">  529</span>          }</div>
<div class="line"><a id="l00530" name="l00530"></a><span class="lineno">  530</span> </div>
<div class="line"><a id="l00531" name="l00531"></a><span class="lineno">  531</span>          <a class="code hl_struct" href="structrgw__raw__obj.html">rgw_raw_obj</a> last_obj = miter.<a class="code hl_function" href="class_r_g_w_obj_manifest_1_1obj__iterator.html#a064ea33fce18e542ed71731d1cad9c30">get_location</a>().<a class="code hl_function" href="classrgw__obj__select.html#a51963d514b5a6273b3c5a395aa3346af">get_raw_obj</a>(<a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_bucket.html#a66ca8b0d7bf8f5a6670e5b7956220c0b">store</a>);</div>
<div class="line"><a id="l00532" name="l00532"></a><span class="lineno">  532</span>          <span class="keywordflow">if</span> (last_obj == raw_head_obj) {</div>
<div class="line"><a id="l00533" name="l00533"></a><span class="lineno">  533</span>            <span class="comment">// have the head obj deleted at the end</span></div>
<div class="line"><a id="l00534" name="l00534"></a><span class="lineno">  534</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00535" name="l00535"></a><span class="lineno">  535</span>          }</div>
<div class="line"><a id="l00536" name="l00536"></a><span class="lineno">  536</span> </div>
<div class="line"><a id="l00537" name="l00537"></a><span class="lineno">  537</span>          ret = <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_bucket.html#a66ca8b0d7bf8f5a6670e5b7956220c0b">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#ac5222771afd591b4005a93373859d1ec">delete_raw_obj_aio</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, last_obj, <a class="code hl_variable" href="rgw__http__client_8cc.html#aba463bb153e727781020a037c44a6134">handles</a>.get());</div>
<div class="line"><a id="l00538" name="l00538"></a><span class="lineno">  538</span>          <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line"><a id="l00539" name="l00539"></a><span class="lineno">  539</span>            ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, -1) &lt;&lt; <span class="stringliteral">&quot;ERROR: delete obj aio failed with &quot;</span> &lt;&lt; ret &lt;&lt; dendl;</div>
<div class="line"><a id="l00540" name="l00540"></a><span class="lineno">  540</span>            <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l00541" name="l00541"></a><span class="lineno">  541</span>          }</div>
<div class="line"><a id="l00542" name="l00542"></a><span class="lineno">  542</span>        } <span class="comment">// for all shadow objs</span></div>
<div class="line"><a id="l00543" name="l00543"></a><span class="lineno">  543</span> </div>
<div class="line"><a id="l00544" name="l00544"></a><span class="lineno">  544</span>    ret = head_obj-&gt;delete_obj_aio(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, astate, <a class="code hl_variable" href="rgw__http__client_8cc.html#aba463bb153e727781020a037c44a6134">handles</a>.get(), keep_index_consistent, null_yield);</div>
<div class="line"><a id="l00545" name="l00545"></a><span class="lineno">  545</span>        <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line"><a id="l00546" name="l00546"></a><span class="lineno">  546</span>          ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, -1) &lt;&lt; <span class="stringliteral">&quot;ERROR: delete obj aio failed with &quot;</span> &lt;&lt; ret &lt;&lt; dendl;</div>
<div class="line"><a id="l00547" name="l00547"></a><span class="lineno">  547</span>          <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l00548" name="l00548"></a><span class="lineno">  548</span>        }</div>
<div class="line"><a id="l00549" name="l00549"></a><span class="lineno">  549</span>      }</div>
<div class="line"><a id="l00550" name="l00550"></a><span class="lineno">  550</span> </div>
<div class="line"><a id="l00551" name="l00551"></a><span class="lineno">  551</span>      <span class="keywordflow">if</span> (!max_aio) {</div>
<div class="line"><a id="l00552" name="l00552"></a><span class="lineno">  552</span>        ret = <a class="code hl_variable" href="rgw__http__client_8cc.html#aba463bb153e727781020a037c44a6134">handles</a>-&gt;drain();</div>
<div class="line"><a id="l00553" name="l00553"></a><span class="lineno">  553</span>        <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line"><a id="l00554" name="l00554"></a><span class="lineno">  554</span>          ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, -1) &lt;&lt; <span class="stringliteral">&quot;ERROR: could not drain handles as aio completion returned with &quot;</span> &lt;&lt; ret &lt;&lt; dendl;</div>
<div class="line"><a id="l00555" name="l00555"></a><span class="lineno">  555</span>          <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l00556" name="l00556"></a><span class="lineno">  556</span>        }</div>
<div class="line"><a id="l00557" name="l00557"></a><span class="lineno">  557</span>        max_aio = concurrent_max;</div>
<div class="line"><a id="l00558" name="l00558"></a><span class="lineno">  558</span>      }</div>
<div class="line"><a id="l00559" name="l00559"></a><span class="lineno">  559</span>      obj_ctx.<a class="code hl_function" href="class_r_g_w_object_ctx.html#a6a46ca55fb85bb5e6c13d530dbba1aa7">invalidate</a>(obj-&gt;get_obj());</div>
<div class="line"><a id="l00560" name="l00560"></a><span class="lineno">  560</span>    } <span class="comment">// for all RGW objects in results</span></div>
<div class="line"><a id="l00561" name="l00561"></a><span class="lineno">  561</span>  } <span class="comment">// while is_truncated</span></div>
<div class="line"><a id="l00562" name="l00562"></a><span class="lineno">  562</span> </div>
<div class="line"><a id="l00563" name="l00563"></a><span class="lineno">  563</span>  ret = <a class="code hl_variable" href="rgw__http__client_8cc.html#aba463bb153e727781020a037c44a6134">handles</a>-&gt;drain();</div>
<div class="line"><a id="l00564" name="l00564"></a><span class="lineno">  564</span>  <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line"><a id="l00565" name="l00565"></a><span class="lineno">  565</span>    ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, -1) &lt;&lt; <span class="stringliteral">&quot;ERROR: could not drain handles as aio completion returned with &quot;</span> &lt;&lt; ret &lt;&lt; dendl;</div>
<div class="line"><a id="l00566" name="l00566"></a><span class="lineno">  566</span>    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l00567" name="l00567"></a><span class="lineno">  567</span>  }</div>
<div class="line"><a id="l00568" name="l00568"></a><span class="lineno">  568</span> </div>
<div class="line"><a id="l00569" name="l00569"></a><span class="lineno">  569</span>  <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_bucket.html#a84b4fa8c2471c285a84c2c9435d22152">sync_user_stats</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, y);</div>
<div class="line"><a id="l00570" name="l00570"></a><span class="lineno">  570</span>  <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line"><a id="l00571" name="l00571"></a><span class="lineno">  571</span>     ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 1) &lt;&lt; <span class="stringliteral">&quot;WARNING: failed sync user stats before bucket delete. ret=&quot;</span> &lt;&lt;  ret &lt;&lt; dendl;</div>
<div class="line"><a id="l00572" name="l00572"></a><span class="lineno">  572</span>  }</div>
<div class="line"><a id="l00573" name="l00573"></a><span class="lineno">  573</span> </div>
<div class="line"><a id="l00574" name="l00574"></a><span class="lineno">  574</span>  <a class="code hl_struct" href="struct_r_g_w_obj_version_tracker.html">RGWObjVersionTracker</a> objv_tracker;</div>
<div class="line"><a id="l00575" name="l00575"></a><span class="lineno">  575</span> </div>
<div class="line"><a id="l00576" name="l00576"></a><span class="lineno">  576</span>  <span class="comment">// this function can only be run if caller wanted children to be</span></div>
<div class="line"><a id="l00577" name="l00577"></a><span class="lineno">  577</span>  <span class="comment">// deleted, so we can ignore the check for children as any that</span></div>
<div class="line"><a id="l00578" name="l00578"></a><span class="lineno">  578</span>  <span class="comment">// remain are detritus from a prior bug</span></div>
<div class="line"><a id="l00579" name="l00579"></a><span class="lineno">  579</span>  ret = <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_bucket.html#a85ae3c70b1a7f88541c372207647b9b8">remove_bucket</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <span class="keyword">true</span>, <span class="keyword">false</span>, <span class="keyword">nullptr</span>, y);</div>
<div class="line"><a id="l00580" name="l00580"></a><span class="lineno">  580</span>  <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line"><a id="l00581" name="l00581"></a><span class="lineno">  581</span>    ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, -1) &lt;&lt; <span class="stringliteral">&quot;ERROR: could not remove bucket &quot;</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; dendl;</div>
<div class="line"><a id="l00582" name="l00582"></a><span class="lineno">  582</span>    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l00583" name="l00583"></a><span class="lineno">  583</span>  }</div>
<div class="line"><a id="l00584" name="l00584"></a><span class="lineno">  584</span> </div>
<div class="line"><a id="l00585" name="l00585"></a><span class="lineno">  585</span>  <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l00586" name="l00586"></a><span class="lineno">  586</span>}</div>
</div>
<div class="line"><a id="l00587" name="l00587"></a><span class="lineno">  587</span> </div>
<div class="foldopen" id="foldopen00588" data-start="{" data-end="}">
<div class="line"><a id="l00588" name="l00588"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_bucket.html#a3e5ce63086104232631656900b62a3c6">  588</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_bucket.html#a3e5ce63086104232631656900b62a3c6">RadosBucket::load_bucket</a>(<span class="keyword">const</span> DoutPrefixProvider* <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, optional_yield y, <span class="keywordtype">bool</span> get_stats)</div>
<div class="line"><a id="l00589" name="l00589"></a><span class="lineno">  589</span>{</div>
<div class="line"><a id="l00590" name="l00590"></a><span class="lineno">  590</span>  <span class="keyword">auto</span> obj_ctx = <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_bucket.html#a66ca8b0d7bf8f5a6670e5b7956220c0b">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#abe4f0602b771d5549a02c0a326d6a832">svc</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_services.html#a742bbed66b1688310eeb8c0b692bf6b9">sysobj</a>-&gt;<a class="code hl_function" href="class_r_g_w_s_i___sys_obj.html#a42dbd3046b9d94873446090556f05e63">init_obj_ctx</a>();</div>
<div class="line"><a id="l00591" name="l00591"></a><span class="lineno">  591</span>  <span class="keywordtype">int</span> ret;</div>
<div class="line"><a id="l00592" name="l00592"></a><span class="lineno">  592</span> </div>
<div class="line"><a id="l00593" name="l00593"></a><span class="lineno">  593</span>  <a class="code hl_typedef" href="svc__meta__be__params_8h.html#abc98af04ff01fda972f9a82bcb22e535">RGWSI_MetaBackend_CtxParams</a> bectx_params = <a class="code hl_struct" href="struct_r_g_w_s_i___meta_backend___ctx_params___s_obj.html">RGWSI_MetaBackend_CtxParams_SObj</a>(&amp;obj_ctx);</div>
<div class="line"><a id="l00594" name="l00594"></a><span class="lineno">  594</span>  <a class="code hl_struct" href="struct_r_g_w_obj_version_tracker.html">RGWObjVersionTracker</a> ep_ot;</div>
<div class="line"><a id="l00595" name="l00595"></a><span class="lineno">  595</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#aa70480c22292c75f5e62829aeee2ed21">info</a>.<a class="code hl_variable" href="struct_r_g_w_bucket_info.html#afbd8422e16061abdf72d710794ac74d4">bucket</a>.<a class="code hl_variable" href="structrgw__bucket.html#adaba18504e183a1e80d861533a81c2a1">bucket_id</a>.empty()) {</div>
<div class="line"><a id="l00596" name="l00596"></a><span class="lineno">  596</span>    ret = <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_bucket.html#a66ca8b0d7bf8f5a6670e5b7956220c0b">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#ab6a306bab7ce6cc5da2f287d4d9f11e0">ctl</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_ctl.html#aad9554920ed5b4cc9b75de55bb1af061">bucket</a>-&gt;<a class="code hl_function" href="class_r_g_w_bucket_ctl.html#ad871c6de412d64c430a75a57115859a9">read_bucket_info</a>(<a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#aa70480c22292c75f5e62829aeee2ed21">info</a>.<a class="code hl_variable" href="struct_r_g_w_bucket_info.html#afbd8422e16061abdf72d710794ac74d4">bucket</a>, &amp;<a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#aa70480c22292c75f5e62829aeee2ed21">info</a>, y, <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>,</div>
<div class="line"><a id="l00597" name="l00597"></a><span class="lineno">  597</span>                      <a class="code hl_struct" href="struct_r_g_w_bucket_ctl_1_1_bucket_instance_1_1_get_params.html">RGWBucketCtl::BucketInstance::GetParams</a>()</div>
<div class="line"><a id="l00598" name="l00598"></a><span class="lineno">  598</span>                      .<a class="code hl_function" href="struct_r_g_w_bucket_ctl_1_1_bucket_instance_1_1_get_params.html#a8a5f15df849e513df0bff8313f0d33bd">set_mtime</a>(&amp;<a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#a4fd945a21faf16e2c455e0a96a485da4">mtime</a>)</div>
<div class="line"><a id="l00599" name="l00599"></a><span class="lineno">  599</span>                      .<a class="code hl_function" href="struct_r_g_w_bucket_ctl_1_1_bucket_instance_1_1_get_params.html#a750d62c6b963fa69942fae07e95aa83a">set_attrs</a>(&amp;<a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#a1888e0309010076e292c2d7c1da663c1">attrs</a>)</div>
<div class="line"><a id="l00600" name="l00600"></a><span class="lineno">  600</span>                                      .<a class="code hl_function" href="struct_r_g_w_bucket_ctl_1_1_bucket_instance_1_1_get_params.html#a42689240cb78a06ee2ecce24e4499f16">set_bectx_params</a>(bectx_params),</div>
<div class="line"><a id="l00601" name="l00601"></a><span class="lineno">  601</span>                      &amp;ep_ot);</div>
<div class="line"><a id="l00602" name="l00602"></a><span class="lineno">  602</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00603" name="l00603"></a><span class="lineno">  603</span>    ret  = <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_bucket.html#a66ca8b0d7bf8f5a6670e5b7956220c0b">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#ab6a306bab7ce6cc5da2f287d4d9f11e0">ctl</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_ctl.html#aad9554920ed5b4cc9b75de55bb1af061">bucket</a>-&gt;<a class="code hl_function" href="class_r_g_w_bucket_ctl.html#a2b44e9b6f60e3f4f2488383c37fa0e66">read_bucket_instance_info</a>(<a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#aa70480c22292c75f5e62829aeee2ed21">info</a>.<a class="code hl_variable" href="struct_r_g_w_bucket_info.html#afbd8422e16061abdf72d710794ac74d4">bucket</a>, &amp;<a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#aa70480c22292c75f5e62829aeee2ed21">info</a>, y, <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>,</div>
<div class="line"><a id="l00604" name="l00604"></a><span class="lineno">  604</span>                      <a class="code hl_struct" href="struct_r_g_w_bucket_ctl_1_1_bucket_instance_1_1_get_params.html">RGWBucketCtl::BucketInstance::GetParams</a>()</div>
<div class="line"><a id="l00605" name="l00605"></a><span class="lineno">  605</span>                      .<a class="code hl_function" href="struct_r_g_w_bucket_ctl_1_1_bucket_instance_1_1_get_params.html#a8a5f15df849e513df0bff8313f0d33bd">set_mtime</a>(&amp;<a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#a4fd945a21faf16e2c455e0a96a485da4">mtime</a>)</div>
<div class="line"><a id="l00606" name="l00606"></a><span class="lineno">  606</span>                      .<a class="code hl_function" href="struct_r_g_w_bucket_ctl_1_1_bucket_instance_1_1_get_params.html#a750d62c6b963fa69942fae07e95aa83a">set_attrs</a>(&amp;<a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#a1888e0309010076e292c2d7c1da663c1">attrs</a>)</div>
<div class="line"><a id="l00607" name="l00607"></a><span class="lineno">  607</span>                      .<a class="code hl_function" href="struct_r_g_w_bucket_ctl_1_1_bucket_instance_1_1_get_params.html#a42689240cb78a06ee2ecce24e4499f16">set_bectx_params</a>(bectx_params));</div>
<div class="line"><a id="l00608" name="l00608"></a><span class="lineno">  608</span>  }</div>
<div class="line"><a id="l00609" name="l00609"></a><span class="lineno">  609</span>  <span class="keywordflow">if</span> (ret != 0) {</div>
<div class="line"><a id="l00610" name="l00610"></a><span class="lineno">  610</span>    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l00611" name="l00611"></a><span class="lineno">  611</span>  }</div>
<div class="line"><a id="l00612" name="l00612"></a><span class="lineno">  612</span> </div>
<div class="line"><a id="l00613" name="l00613"></a><span class="lineno">  613</span>  <a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#a20ffc5efdc0959998e88a2b93cceba85">bucket_version</a> = ep_ot.<a class="code hl_variable" href="struct_r_g_w_obj_version_tracker.html#a431b0a1cb0d7ebd40d1529aa7d6415eb">read_version</a>;</div>
<div class="line"><a id="l00614" name="l00614"></a><span class="lineno">  614</span> </div>
<div class="line"><a id="l00615" name="l00615"></a><span class="lineno">  615</span>  <span class="keywordflow">if</span> (get_stats) {</div>
<div class="line"><a id="l00616" name="l00616"></a><span class="lineno">  616</span>    ret = <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_bucket.html#a66ca8b0d7bf8f5a6670e5b7956220c0b">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#ab6a306bab7ce6cc5da2f287d4d9f11e0">ctl</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_ctl.html#aad9554920ed5b4cc9b75de55bb1af061">bucket</a>-&gt;<a class="code hl_function" href="class_r_g_w_bucket_ctl.html#ac8b9b1f665367d714b9c28a39ec3303e">read_bucket_stats</a>(<a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#aa70480c22292c75f5e62829aeee2ed21">info</a>.<a class="code hl_variable" href="struct_r_g_w_bucket_info.html#afbd8422e16061abdf72d710794ac74d4">bucket</a>, &amp;<a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#a5ce525a3d602e7032c4b9ec4b9f789de">ent</a>, y, <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>);</div>
<div class="line"><a id="l00617" name="l00617"></a><span class="lineno">  617</span>  }</div>
<div class="line"><a id="l00618" name="l00618"></a><span class="lineno">  618</span> </div>
<div class="line"><a id="l00619" name="l00619"></a><span class="lineno">  619</span>  <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l00620" name="l00620"></a><span class="lineno">  620</span>}</div>
</div>
<div class="line"><a id="l00621" name="l00621"></a><span class="lineno">  621</span> </div>
<div class="foldopen" id="foldopen00622" data-start="{" data-end="}">
<div class="line"><a id="l00622" name="l00622"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_bucket.html#acdf13f1a532feb7aaddfcc7791b9cf26">  622</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_bucket.html#acdf13f1a532feb7aaddfcc7791b9cf26">RadosBucket::read_stats</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <span class="keywordtype">int</span> shard_id,</div>
<div class="line"><a id="l00623" name="l00623"></a><span class="lineno">  623</span>                     std::string* bucket_ver, std::string* master_ver,</div>
<div class="line"><a id="l00624" name="l00624"></a><span class="lineno">  624</span>                     std::map&lt;RGWObjCategory, RGWStorageStats&gt;&amp; stats,</div>
<div class="line"><a id="l00625" name="l00625"></a><span class="lineno">  625</span>                     std::string* max_marker, <span class="keywordtype">bool</span>* syncstopped)</div>
<div class="line"><a id="l00626" name="l00626"></a><span class="lineno">  626</span>{</div>
<div class="line"><a id="l00627" name="l00627"></a><span class="lineno">  627</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_bucket.html#a66ca8b0d7bf8f5a6670e5b7956220c0b">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aca5c28bc0f22f3f963d0475b594350e1">getRados</a>()-&gt;<a class="code hl_function" href="class_r_g_w_rados.html#aab93da5e1ac5cbad6a7e30c7847dab90">get_bucket_stats</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#aa70480c22292c75f5e62829aeee2ed21">info</a>, shard_id, bucket_ver, master_ver, stats, max_marker, syncstopped);</div>
<div class="line"><a id="l00628" name="l00628"></a><span class="lineno">  628</span>}</div>
</div>
<div class="line"><a id="l00629" name="l00629"></a><span class="lineno">  629</span> </div>
<div class="foldopen" id="foldopen00630" data-start="{" data-end="}">
<div class="line"><a id="l00630" name="l00630"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_bucket.html#a6f9cfb8ad940c4f3a51533f1176a7bed">  630</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_bucket.html#a6f9cfb8ad940c4f3a51533f1176a7bed">RadosBucket::read_stats_async</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <span class="keywordtype">int</span> shard_id, <a class="code hl_class" href="class_r_g_w_get_bucket_stats___c_b.html">RGWGetBucketStats_CB</a>* ctx)</div>
<div class="line"><a id="l00631" name="l00631"></a><span class="lineno">  631</span>{</div>
<div class="line"><a id="l00632" name="l00632"></a><span class="lineno">  632</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_bucket.html#a66ca8b0d7bf8f5a6670e5b7956220c0b">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aca5c28bc0f22f3f963d0475b594350e1">getRados</a>()-&gt;<a class="code hl_function" href="class_r_g_w_rados.html#a49e81be41625202a57bb2cfc49139a4d">get_bucket_stats_async</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_function" href="classrgw_1_1sal_1_1_bucket.html#a1e64259203d2710c33c5a979721c19ee">get_info</a>(), shard_id, ctx);</div>
<div class="line"><a id="l00633" name="l00633"></a><span class="lineno">  633</span>}</div>
</div>
<div class="line"><a id="l00634" name="l00634"></a><span class="lineno">  634</span> </div>
<div class="foldopen" id="foldopen00635" data-start="{" data-end="}">
<div class="line"><a id="l00635" name="l00635"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_bucket.html#a84b4fa8c2471c285a84c2c9435d22152">  635</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_bucket.html#a84b4fa8c2471c285a84c2c9435d22152">RadosBucket::sync_user_stats</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, optional_yield y)</div>
<div class="line"><a id="l00636" name="l00636"></a><span class="lineno">  636</span>{</div>
<div class="line"><a id="l00637" name="l00637"></a><span class="lineno">  637</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_bucket.html#a66ca8b0d7bf8f5a6670e5b7956220c0b">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#ab6a306bab7ce6cc5da2f287d4d9f11e0">ctl</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_ctl.html#aad9554920ed5b4cc9b75de55bb1af061">bucket</a>-&gt;<a class="code hl_function" href="class_r_g_w_bucket_ctl.html#aa4b7d70b20d0507e2d4dea78f003dfa7">sync_user_stats</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#a62d427fa47e904aaf18be892b9b502f9">owner</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_user.html#a4f6322efe2b6c9c2780eb31cb3a5ca51">get_id</a>(), <a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#aa70480c22292c75f5e62829aeee2ed21">info</a>, y, &amp;<a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#a5ce525a3d602e7032c4b9ec4b9f789de">ent</a>);</div>
<div class="line"><a id="l00638" name="l00638"></a><span class="lineno">  638</span>}</div>
</div>
<div class="line"><a id="l00639" name="l00639"></a><span class="lineno">  639</span> </div>
<div class="foldopen" id="foldopen00640" data-start="{" data-end="}">
<div class="line"><a id="l00640" name="l00640"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_bucket.html#ac1b918e6cd473a13b9bd9723467b4840">  640</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_bucket.html#ac1b918e6cd473a13b9bd9723467b4840">RadosBucket::update_container_stats</a>(<span class="keyword">const</span> DoutPrefixProvider* <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>)</div>
<div class="line"><a id="l00641" name="l00641"></a><span class="lineno">  641</span>{</div>
<div class="line"><a id="l00642" name="l00642"></a><span class="lineno">  642</span>  <span class="keywordtype">int</span> ret;</div>
<div class="line"><a id="l00643" name="l00643"></a><span class="lineno">  643</span>  map&lt;std::string, RGWBucketEnt&gt; m;</div>
<div class="line"><a id="l00644" name="l00644"></a><span class="lineno">  644</span> </div>
<div class="line"><a id="l00645" name="l00645"></a><span class="lineno">  645</span>  m[<a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#aa70480c22292c75f5e62829aeee2ed21">info</a>.<a class="code hl_variable" href="struct_r_g_w_bucket_info.html#afbd8422e16061abdf72d710794ac74d4">bucket</a>.<a class="code hl_variable" href="structrgw__bucket.html#a32d3529f5b0c53051c856a7abe867a6b">name</a>] = <a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#a5ce525a3d602e7032c4b9ec4b9f789de">ent</a>;</div>
<div class="line"><a id="l00646" name="l00646"></a><span class="lineno">  646</span>  ret = <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_bucket.html#a66ca8b0d7bf8f5a6670e5b7956220c0b">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aca5c28bc0f22f3f963d0475b594350e1">getRados</a>()-&gt;<a class="code hl_function" href="class_r_g_w_rados.html#a99297dd3fbdd494630d73fdf1a9b7055">update_containers_stats</a>(m, <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>);</div>
<div class="line"><a id="l00647" name="l00647"></a><span class="lineno">  647</span>  <span class="keywordflow">if</span> (!ret)</div>
<div class="line"><a id="l00648" name="l00648"></a><span class="lineno">  648</span>    <span class="keywordflow">return</span> -EEXIST;</div>
<div class="line"><a id="l00649" name="l00649"></a><span class="lineno">  649</span>  <span class="keywordflow">if</span> (ret &lt; 0)</div>
<div class="line"><a id="l00650" name="l00650"></a><span class="lineno">  650</span>    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l00651" name="l00651"></a><span class="lineno">  651</span> </div>
<div class="line"><a id="l00652" name="l00652"></a><span class="lineno">  652</span>  map&lt;std::string, RGWBucketEnt&gt;::iterator iter = m.find(<a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#aa70480c22292c75f5e62829aeee2ed21">info</a>.<a class="code hl_variable" href="struct_r_g_w_bucket_info.html#afbd8422e16061abdf72d710794ac74d4">bucket</a>.<a class="code hl_variable" href="structrgw__bucket.html#a32d3529f5b0c53051c856a7abe867a6b">name</a>);</div>
<div class="line"><a id="l00653" name="l00653"></a><span class="lineno">  653</span>  <span class="keywordflow">if</span> (iter == m.end())</div>
<div class="line"><a id="l00654" name="l00654"></a><span class="lineno">  654</span>    <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><a id="l00655" name="l00655"></a><span class="lineno">  655</span> </div>
<div class="line"><a id="l00656" name="l00656"></a><span class="lineno">  656</span>  <a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#a5ce525a3d602e7032c4b9ec4b9f789de">ent</a>.<a class="code hl_variable" href="struct_r_g_w_bucket_ent.html#a4a2cf28bf71c2572e51986e10935a901">count</a> = iter-&gt;second.count;</div>
<div class="line"><a id="l00657" name="l00657"></a><span class="lineno">  657</span>  <a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#a5ce525a3d602e7032c4b9ec4b9f789de">ent</a>.<a class="code hl_variable" href="struct_r_g_w_bucket_ent.html#a33cfe5a0bc2030baefece598b4dac1bc">size</a> = iter-&gt;second.size;</div>
<div class="line"><a id="l00658" name="l00658"></a><span class="lineno">  658</span>  <a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#a5ce525a3d602e7032c4b9ec4b9f789de">ent</a>.<a class="code hl_variable" href="struct_r_g_w_bucket_ent.html#ac719704fc00807a24af41476d13dff38">size_rounded</a> = iter-&gt;second.size_rounded;</div>
<div class="line"><a id="l00659" name="l00659"></a><span class="lineno">  659</span>  <a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#a5ce525a3d602e7032c4b9ec4b9f789de">ent</a>.<a class="code hl_variable" href="struct_r_g_w_bucket_ent.html#a377fcf19a29ad712adc0b0f7ee709b70">creation_time</a> = iter-&gt;second.creation_time;</div>
<div class="line"><a id="l00660" name="l00660"></a><span class="lineno">  660</span>  <a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#a5ce525a3d602e7032c4b9ec4b9f789de">ent</a>.<a class="code hl_variable" href="struct_r_g_w_bucket_ent.html#abf300fe85eea5c82d015a429e4c6cac0">placement_rule</a> = std::move(iter-&gt;second.placement_rule);</div>
<div class="line"><a id="l00661" name="l00661"></a><span class="lineno">  661</span> </div>
<div class="line"><a id="l00662" name="l00662"></a><span class="lineno">  662</span>  <a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#aa70480c22292c75f5e62829aeee2ed21">info</a>.<a class="code hl_variable" href="struct_r_g_w_bucket_info.html#a2e51e9d0006ff4d49a565582513b6af6">creation_time</a> = <a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#a5ce525a3d602e7032c4b9ec4b9f789de">ent</a>.<a class="code hl_variable" href="struct_r_g_w_bucket_ent.html#a377fcf19a29ad712adc0b0f7ee709b70">creation_time</a>;</div>
<div class="line"><a id="l00663" name="l00663"></a><span class="lineno">  663</span>  <a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#aa70480c22292c75f5e62829aeee2ed21">info</a>.<a class="code hl_variable" href="struct_r_g_w_bucket_info.html#ae98f47e00bc973f8961081f37affb373">placement_rule</a> = <a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#a5ce525a3d602e7032c4b9ec4b9f789de">ent</a>.<a class="code hl_variable" href="struct_r_g_w_bucket_ent.html#abf300fe85eea5c82d015a429e4c6cac0">placement_rule</a>;</div>
<div class="line"><a id="l00664" name="l00664"></a><span class="lineno">  664</span> </div>
<div class="line"><a id="l00665" name="l00665"></a><span class="lineno">  665</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00666" name="l00666"></a><span class="lineno">  666</span>}</div>
</div>
<div class="line"><a id="l00667" name="l00667"></a><span class="lineno">  667</span> </div>
<div class="foldopen" id="foldopen00668" data-start="{" data-end="}">
<div class="line"><a id="l00668" name="l00668"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_bucket.html#a6af0efad6d182eb3baa88fca2e767569">  668</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_bucket.html#a6af0efad6d182eb3baa88fca2e767569">RadosBucket::check_bucket_shards</a>(<span class="keyword">const</span> DoutPrefixProvider* <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>)</div>
<div class="line"><a id="l00669" name="l00669"></a><span class="lineno">  669</span>{</div>
<div class="line"><a id="l00670" name="l00670"></a><span class="lineno">  670</span>      <span class="keywordflow">return</span> <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_bucket.html#a66ca8b0d7bf8f5a6670e5b7956220c0b">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aca5c28bc0f22f3f963d0475b594350e1">getRados</a>()-&gt;<a class="code hl_function" href="class_r_g_w_rados.html#a6c4a3d20b19410f7088c7c034938a9c8">check_bucket_shards</a>(<a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#aa70480c22292c75f5e62829aeee2ed21">info</a>, <a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#aa70480c22292c75f5e62829aeee2ed21">info</a>.<a class="code hl_variable" href="struct_r_g_w_bucket_info.html#afbd8422e16061abdf72d710794ac74d4">bucket</a>, <a class="code hl_function" href="classrgw_1_1sal_1_1_bucket.html#abe66383df64c0055a0216d1b576ff35e">get_count</a>(), <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>);</div>
<div class="line"><a id="l00671" name="l00671"></a><span class="lineno">  671</span>}</div>
</div>
<div class="line"><a id="l00672" name="l00672"></a><span class="lineno">  672</span> </div>
<div class="foldopen" id="foldopen00673" data-start="{" data-end="}">
<div class="line"><a id="l00673" name="l00673"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_bucket.html#ab6e92c5e7713aaf3774c24c38234f2a0">  673</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_bucket.html#ab6e92c5e7713aaf3774c24c38234f2a0">RadosBucket::link</a>(<span class="keyword">const</span> DoutPrefixProvider* <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_class" href="classrgw_1_1sal_1_1_user.html">User</a>* new_user, optional_yield y, <span class="keywordtype">bool</span> update_entrypoint, <a class="code hl_struct" href="struct_r_g_w_obj_version_tracker.html">RGWObjVersionTracker</a>* objv)</div>
<div class="line"><a id="l00674" name="l00674"></a><span class="lineno">  674</span>{</div>
<div class="line"><a id="l00675" name="l00675"></a><span class="lineno">  675</span>  <a class="code hl_struct" href="struct_r_g_w_bucket_entry_point.html">RGWBucketEntryPoint</a> ep;</div>
<div class="line"><a id="l00676" name="l00676"></a><span class="lineno">  676</span>  ep.<a class="code hl_variable" href="struct_r_g_w_bucket_entry_point.html#a2ce61b953958ccb1987175e53bff02a3">bucket</a> = <a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#aa70480c22292c75f5e62829aeee2ed21">info</a>.<a class="code hl_variable" href="struct_r_g_w_bucket_info.html#afbd8422e16061abdf72d710794ac74d4">bucket</a>;</div>
<div class="line"><a id="l00677" name="l00677"></a><span class="lineno">  677</span>  ep.<a class="code hl_variable" href="struct_r_g_w_bucket_entry_point.html#a4805da40a95da25459ac79c3cf4e9274">owner</a> = new_user-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_user.html#a4f6322efe2b6c9c2780eb31cb3a5ca51">get_id</a>();</div>
<div class="line"><a id="l00678" name="l00678"></a><span class="lineno">  678</span>  ep.<a class="code hl_variable" href="struct_r_g_w_bucket_entry_point.html#a90955960e6ef0d68b1192925905db4d2">creation_time</a> = <a class="code hl_function" href="classrgw_1_1sal_1_1_bucket.html#ae6e483a0f5b9662970d9ac95b1280fb5">get_creation_time</a>();</div>
<div class="line"><a id="l00679" name="l00679"></a><span class="lineno">  679</span>  ep.<a class="code hl_variable" href="struct_r_g_w_bucket_entry_point.html#aa492198091b91eecb9bbe431f6e84a54">linked</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00680" name="l00680"></a><span class="lineno">  680</span>  <a class="code hl_typedef" href="group___r_g_w_s_a_l.html#gab1b58d5f8747844fae5ddfb48fadf7bc">Attrs</a> ep_attrs;</div>
<div class="line"><a id="l00681" name="l00681"></a><span class="lineno">  681</span>  <a class="code hl_struct" href="structrgw__ep__info.html">rgw_ep_info</a> ep_data{ep, ep_attrs};</div>
<div class="line"><a id="l00682" name="l00682"></a><span class="lineno">  682</span> </div>
<div class="line"><a id="l00683" name="l00683"></a><span class="lineno">  683</span>  <span class="keywordtype">int</span> <a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a> = <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_bucket.html#a66ca8b0d7bf8f5a6670e5b7956220c0b">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#ab6a306bab7ce6cc5da2f287d4d9f11e0">ctl</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_ctl.html#aad9554920ed5b4cc9b75de55bb1af061">bucket</a>-&gt;<a class="code hl_function" href="class_r_g_w_bucket_ctl.html#a6ef69b8b0df300e115546f579f036ab2">link_bucket</a>(new_user-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_user.html#a4f6322efe2b6c9c2780eb31cb3a5ca51">get_id</a>(), <a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#aa70480c22292c75f5e62829aeee2ed21">info</a>.<a class="code hl_variable" href="struct_r_g_w_bucket_info.html#afbd8422e16061abdf72d710794ac74d4">bucket</a>,</div>
<div class="line"><a id="l00684" name="l00684"></a><span class="lineno">  684</span>                        <a class="code hl_function" href="classrgw_1_1sal_1_1_bucket.html#ae6e483a0f5b9662970d9ac95b1280fb5">get_creation_time</a>(), y, <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, update_entrypoint,</div>
<div class="line"><a id="l00685" name="l00685"></a><span class="lineno">  685</span>                        &amp;ep_data);</div>
<div class="line"><a id="l00686" name="l00686"></a><span class="lineno">  686</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a> &lt; 0)</div>
<div class="line"><a id="l00687" name="l00687"></a><span class="lineno">  687</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a>;</div>
<div class="line"><a id="l00688" name="l00688"></a><span class="lineno">  688</span> </div>
<div class="line"><a id="l00689" name="l00689"></a><span class="lineno">  689</span>  <span class="keywordflow">if</span> (objv)</div>
<div class="line"><a id="l00690" name="l00690"></a><span class="lineno">  690</span>    *objv = ep_data.ep_objv;</div>
<div class="line"><a id="l00691" name="l00691"></a><span class="lineno">  691</span> </div>
<div class="line"><a id="l00692" name="l00692"></a><span class="lineno">  692</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a>;</div>
<div class="line"><a id="l00693" name="l00693"></a><span class="lineno">  693</span>}</div>
</div>
<div class="line"><a id="l00694" name="l00694"></a><span class="lineno">  694</span> </div>
<div class="foldopen" id="foldopen00695" data-start="{" data-end="}">
<div class="line"><a id="l00695" name="l00695"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_bucket.html#a5ac35440822a9d497a5fe7a12efb63aa">  695</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_bucket.html#a5ac35440822a9d497a5fe7a12efb63aa">RadosBucket::unlink</a>(<span class="keyword">const</span> DoutPrefixProvider* <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_class" href="classrgw_1_1sal_1_1_user.html">User</a>* new_user, optional_yield y, <span class="keywordtype">bool</span> update_entrypoint)</div>
<div class="line"><a id="l00696" name="l00696"></a><span class="lineno">  696</span>{</div>
<div class="line"><a id="l00697" name="l00697"></a><span class="lineno">  697</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_bucket.html#a66ca8b0d7bf8f5a6670e5b7956220c0b">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#ab6a306bab7ce6cc5da2f287d4d9f11e0">ctl</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_ctl.html#aad9554920ed5b4cc9b75de55bb1af061">bucket</a>-&gt;<a class="code hl_function" href="class_r_g_w_bucket_ctl.html#a677f6ece17728acf4dcaaee20b86942c">unlink_bucket</a>(new_user-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_user.html#a4f6322efe2b6c9c2780eb31cb3a5ca51">get_id</a>(), <a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#aa70480c22292c75f5e62829aeee2ed21">info</a>.<a class="code hl_variable" href="struct_r_g_w_bucket_info.html#afbd8422e16061abdf72d710794ac74d4">bucket</a>, y, <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, update_entrypoint);</div>
<div class="line"><a id="l00698" name="l00698"></a><span class="lineno">  698</span>}</div>
</div>
<div class="line"><a id="l00699" name="l00699"></a><span class="lineno">  699</span> </div>
<div class="foldopen" id="foldopen00700" data-start="{" data-end="}">
<div class="line"><a id="l00700" name="l00700"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_bucket.html#ae0b10b245eda3382a4f5d946ec5331b1">  700</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_bucket.html#ae0b10b245eda3382a4f5d946ec5331b1">RadosBucket::chown</a>(<span class="keyword">const</span> DoutPrefixProvider* <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_class" href="classrgw_1_1sal_1_1_user.html">User</a>&amp; new_user, optional_yield y)</div>
<div class="line"><a id="l00701" name="l00701"></a><span class="lineno">  701</span>{</div>
<div class="line"><a id="l00702" name="l00702"></a><span class="lineno">  702</span>  std::string obj_marker;</div>
<div class="line"><a id="l00703" name="l00703"></a><span class="lineno">  703</span>  <span class="keywordtype">int</span> <a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a>;</div>
<div class="line"><a id="l00704" name="l00704"></a><span class="lineno">  704</span> </div>
<div class="line"><a id="l00705" name="l00705"></a><span class="lineno">  705</span>  <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#a62d427fa47e904aaf18be892b9b502f9">owner</a>) {</div>
<div class="line"><a id="l00706" name="l00706"></a><span class="lineno">  706</span>      ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 0) &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot; Cannot chown without an owner &quot;</span> &lt;&lt; dendl;</div>
<div class="line"><a id="l00707" name="l00707"></a><span class="lineno">  707</span>      <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><a id="l00708" name="l00708"></a><span class="lineno">  708</span>  }</div>
<div class="line"><a id="l00709" name="l00709"></a><span class="lineno">  709</span> </div>
<div class="line"><a id="l00710" name="l00710"></a><span class="lineno">  710</span>  <a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a> = this-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_bucket.html#a5ac35440822a9d497a5fe7a12efb63aa">unlink</a>(dpp, <a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#a62d427fa47e904aaf18be892b9b502f9">owner</a>, y);</div>
<div class="line"><a id="l00711" name="l00711"></a><span class="lineno">  711</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a> &lt; 0) {</div>
<div class="line"><a id="l00712" name="l00712"></a><span class="lineno">  712</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a>;</div>
<div class="line"><a id="l00713" name="l00713"></a><span class="lineno">  713</span>  }</div>
<div class="line"><a id="l00714" name="l00714"></a><span class="lineno">  714</span> </div>
<div class="line"><a id="l00715" name="l00715"></a><span class="lineno">  715</span>  <span class="keywordflow">return</span> this-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_bucket.html#ab6e92c5e7713aaf3774c24c38234f2a0">link</a>(dpp, &amp;new_user, y);</div>
<div class="line"><a id="l00716" name="l00716"></a><span class="lineno">  716</span>}</div>
</div>
<div class="line"><a id="l00717" name="l00717"></a><span class="lineno">  717</span> </div>
<div class="foldopen" id="foldopen00718" data-start="{" data-end="}">
<div class="line"><a id="l00718" name="l00718"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_bucket.html#ab38e5778e8c6e5e1a2e0fd078d32beb0">  718</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_bucket.html#ab38e5778e8c6e5e1a2e0fd078d32beb0">RadosBucket::put_info</a>(<span class="keyword">const</span> DoutPrefixProvider* <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <span class="keywordtype">bool</span> exclusive, ceph::real_time _mtime)</div>
<div class="line"><a id="l00719" name="l00719"></a><span class="lineno">  719</span>{</div>
<div class="line"><a id="l00720" name="l00720"></a><span class="lineno">  720</span>  <a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#a4fd945a21faf16e2c455e0a96a485da4">mtime</a> = _mtime;</div>
<div class="line"><a id="l00721" name="l00721"></a><span class="lineno">  721</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_bucket.html#a66ca8b0d7bf8f5a6670e5b7956220c0b">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aca5c28bc0f22f3f963d0475b594350e1">getRados</a>()-&gt;<a class="code hl_function" href="class_r_g_w_rados.html#a87f0abb09153b85fddc998de116b22c1">put_bucket_instance_info</a>(<a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#aa70480c22292c75f5e62829aeee2ed21">info</a>, exclusive, <a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#a4fd945a21faf16e2c455e0a96a485da4">mtime</a>, &amp;<a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#a1888e0309010076e292c2d7c1da663c1">attrs</a>, <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>);</div>
<div class="line"><a id="l00722" name="l00722"></a><span class="lineno">  722</span>}</div>
</div>
<div class="line"><a id="l00723" name="l00723"></a><span class="lineno">  723</span> </div>
<div class="line"><a id="l00724" name="l00724"></a><span class="lineno">  724</span><span class="comment">/* Make sure to call get_bucket_info() if you need it first */</span></div>
<div class="foldopen" id="foldopen00725" data-start="{" data-end="}">
<div class="line"><a id="l00725" name="l00725"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_bucket.html#a7dbb75f3408caced5fa477915c4397a9">  725</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_bucket.html#a7dbb75f3408caced5fa477915c4397a9">RadosBucket::is_owner</a>(<a class="code hl_class" href="classrgw_1_1sal_1_1_user.html">User</a>* user)</div>
<div class="line"><a id="l00726" name="l00726"></a><span class="lineno">  726</span>{</div>
<div class="line"><a id="l00727" name="l00727"></a><span class="lineno">  727</span>  <span class="keywordflow">return</span> (<a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#aa70480c22292c75f5e62829aeee2ed21">info</a>.<a class="code hl_variable" href="struct_r_g_w_bucket_info.html#a18215d487317142f30bd2675ccec2293">owner</a>.<a class="code hl_function" href="structrgw__user.html#adbd66e1d8720fb60fb3db16c9dd571a5">compare</a>(user-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_user.html#a4f6322efe2b6c9c2780eb31cb3a5ca51">get_id</a>()) == 0);</div>
<div class="line"><a id="l00728" name="l00728"></a><span class="lineno">  728</span>}</div>
</div>
<div class="line"><a id="l00729" name="l00729"></a><span class="lineno">  729</span> </div>
<div class="foldopen" id="foldopen00730" data-start="{" data-end="}">
<div class="line"><a id="l00730" name="l00730"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_bucket.html#a8ebc8cb772197f8cb50e0b7b82664e7c">  730</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_bucket.html#a8ebc8cb772197f8cb50e0b7b82664e7c">RadosBucket::check_empty</a>(<span class="keyword">const</span> DoutPrefixProvider* <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, optional_yield y)</div>
<div class="line"><a id="l00731" name="l00731"></a><span class="lineno">  731</span>{</div>
<div class="line"><a id="l00732" name="l00732"></a><span class="lineno">  732</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_bucket.html#a66ca8b0d7bf8f5a6670e5b7956220c0b">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aca5c28bc0f22f3f963d0475b594350e1">getRados</a>()-&gt;<a class="code hl_function" href="class_r_g_w_rados.html#aa5f7720d778b74a2f8567f9a55ed5824">check_bucket_empty</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#aa70480c22292c75f5e62829aeee2ed21">info</a>, y);</div>
<div class="line"><a id="l00733" name="l00733"></a><span class="lineno">  733</span>}</div>
</div>
<div class="line"><a id="l00734" name="l00734"></a><span class="lineno">  734</span> </div>
<div class="foldopen" id="foldopen00735" data-start="{" data-end="}">
<div class="line"><a id="l00735" name="l00735"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_bucket.html#ae96ae5c780cf5e8e252d2b6c3fa70a60">  735</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_bucket.html#ae96ae5c780cf5e8e252d2b6c3fa70a60">RadosBucket::check_quota</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_struct" href="struct_r_g_w_quota_info.html">RGWQuotaInfo</a>&amp; user_quota, <a class="code hl_struct" href="struct_r_g_w_quota_info.html">RGWQuotaInfo</a>&amp; bucket_quota, uint64_t obj_size,</div>
<div class="line"><a id="l00736" name="l00736"></a><span class="lineno">  736</span>                optional_yield y, <span class="keywordtype">bool</span> check_size_only)</div>
<div class="line"><a id="l00737" name="l00737"></a><span class="lineno">  737</span>{</div>
<div class="line"><a id="l00738" name="l00738"></a><span class="lineno">  738</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_bucket.html#a66ca8b0d7bf8f5a6670e5b7956220c0b">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aca5c28bc0f22f3f963d0475b594350e1">getRados</a>()-&gt;<a class="code hl_function" href="class_r_g_w_rados.html#a789279e801470007df47c2df748449cd">check_quota</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#a62d427fa47e904aaf18be892b9b502f9">owner</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_user.html#a4f6322efe2b6c9c2780eb31cb3a5ca51">get_id</a>(), <a class="code hl_function" href="classrgw_1_1sal_1_1_bucket.html#a0fbf4f16a181a9f8d58d1d75fb8dff2d">get_key</a>(),</div>
<div class="line"><a id="l00739" name="l00739"></a><span class="lineno">  739</span>                      user_quota, bucket_quota, obj_size, y, check_size_only);</div>
<div class="line"><a id="l00740" name="l00740"></a><span class="lineno">  740</span>}</div>
</div>
<div class="line"><a id="l00741" name="l00741"></a><span class="lineno">  741</span> </div>
<div class="foldopen" id="foldopen00742" data-start="{" data-end="}">
<div class="line"><a id="l00742" name="l00742"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_bucket.html#ac00d3e72f36a8c67c308c43317eaa777">  742</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_bucket.html#ac00d3e72f36a8c67c308c43317eaa777">RadosBucket::merge_and_store_attrs</a>(<span class="keyword">const</span> DoutPrefixProvider* <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_typedef" href="group___r_g_w_s_a_l.html#gab1b58d5f8747844fae5ddfb48fadf7bc">Attrs</a>&amp; new_attrs, optional_yield y)</div>
<div class="line"><a id="l00743" name="l00743"></a><span class="lineno">  743</span>{</div>
<div class="line"><a id="l00744" name="l00744"></a><span class="lineno">  744</span>  <span class="keywordflow">for</span>(<span class="keyword">auto</span>&amp; it : new_attrs) {</div>
<div class="line"><a id="l00745" name="l00745"></a><span class="lineno">  745</span>      <a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#a1888e0309010076e292c2d7c1da663c1">attrs</a>[it.first] = it.second;</div>
<div class="line"><a id="l00746" name="l00746"></a><span class="lineno">  746</span>  }</div>
<div class="line"><a id="l00747" name="l00747"></a><span class="lineno">  747</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_bucket.html#a66ca8b0d7bf8f5a6670e5b7956220c0b">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#ab6a306bab7ce6cc5da2f287d4d9f11e0">ctl</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_ctl.html#aad9554920ed5b4cc9b75de55bb1af061">bucket</a>-&gt;<a class="code hl_function" href="class_r_g_w_bucket_ctl.html#aa0e69b900dea83d2a4c79964d81bd9c5">set_bucket_instance_attrs</a>(<a class="code hl_function" href="classrgw_1_1sal_1_1_bucket.html#a1e64259203d2710c33c5a979721c19ee">get_info</a>(),</div>
<div class="line"><a id="l00748" name="l00748"></a><span class="lineno">  748</span>                new_attrs, &amp;<a class="code hl_function" href="classrgw_1_1sal_1_1_bucket.html#a1e64259203d2710c33c5a979721c19ee">get_info</a>().<a class="code hl_variable" href="struct_r_g_w_bucket_info.html#a129219ad4163e6f09823c4e7c310d367">objv_tracker</a>, y, <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>);</div>
<div class="line"><a id="l00749" name="l00749"></a><span class="lineno">  749</span>}</div>
</div>
<div class="line"><a id="l00750" name="l00750"></a><span class="lineno">  750</span> </div>
<div class="foldopen" id="foldopen00751" data-start="{" data-end="}">
<div class="line"><a id="l00751" name="l00751"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_bucket.html#a5de5229ce25b7bb2e498038869bdc47e">  751</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_bucket.html#a5de5229ce25b7bb2e498038869bdc47e">RadosBucket::try_refresh_info</a>(<span class="keyword">const</span> DoutPrefixProvider* <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, ceph::real_time* pmtime)</div>
<div class="line"><a id="l00752" name="l00752"></a><span class="lineno">  752</span>{</div>
<div class="line"><a id="l00753" name="l00753"></a><span class="lineno">  753</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_bucket.html#a66ca8b0d7bf8f5a6670e5b7956220c0b">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aca5c28bc0f22f3f963d0475b594350e1">getRados</a>()-&gt;<a class="code hl_function" href="class_r_g_w_rados.html#ae9add832ace02bccc7179707fa4041a9">try_refresh_bucket_info</a>(<a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#aa70480c22292c75f5e62829aeee2ed21">info</a>, pmtime, <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, &amp;<a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#a1888e0309010076e292c2d7c1da663c1">attrs</a>);</div>
<div class="line"><a id="l00754" name="l00754"></a><span class="lineno">  754</span>}</div>
</div>
<div class="line"><a id="l00755" name="l00755"></a><span class="lineno">  755</span> </div>
<div class="foldopen" id="foldopen00756" data-start="{" data-end="}">
<div class="line"><a id="l00756" name="l00756"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_bucket.html#af94a43ceef150d8f1772cce54f2906cb">  756</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_bucket.html#af94a43ceef150d8f1772cce54f2906cb">RadosBucket::read_usage</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, uint64_t start_epoch, uint64_t end_epoch,</div>
<div class="line"><a id="l00757" name="l00757"></a><span class="lineno">  757</span>                   uint32_t max_entries, <span class="keywordtype">bool</span>* is_truncated,</div>
<div class="line"><a id="l00758" name="l00758"></a><span class="lineno">  758</span>                   <a class="code hl_struct" href="struct_r_g_w_usage_iter.html">RGWUsageIter</a>&amp; usage_iter,</div>
<div class="line"><a id="l00759" name="l00759"></a><span class="lineno">  759</span>                   map&lt;rgw_user_bucket, rgw_usage_log_entry&gt;&amp; <a class="code hl_function" href="rgw__admin_8cc.html#a2ef30c42cbc289d899a8be5d2d8f77d0">usage</a>)</div>
<div class="line"><a id="l00760" name="l00760"></a><span class="lineno">  760</span>{</div>
<div class="line"><a id="l00761" name="l00761"></a><span class="lineno">  761</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_bucket.html#a66ca8b0d7bf8f5a6670e5b7956220c0b">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aca5c28bc0f22f3f963d0475b594350e1">getRados</a>()-&gt;<a class="code hl_function" href="class_r_g_w_rados.html#a0784e49542fdeae286b67d4d6808dcc5">read_usage</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#a62d427fa47e904aaf18be892b9b502f9">owner</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_user.html#a4f6322efe2b6c9c2780eb31cb3a5ca51">get_id</a>(), <a class="code hl_function" href="classrgw_1_1sal_1_1_bucket.html#ab9ec2756b101c59e885d487256b3d7df">get_name</a>(), start_epoch,</div>
<div class="line"><a id="l00762" name="l00762"></a><span class="lineno">  762</span>                       end_epoch, max_entries, is_truncated,</div>
<div class="line"><a id="l00763" name="l00763"></a><span class="lineno">  763</span>                       usage_iter, <a class="code hl_function" href="rgw__admin_8cc.html#a2ef30c42cbc289d899a8be5d2d8f77d0">usage</a>);</div>
<div class="line"><a id="l00764" name="l00764"></a><span class="lineno">  764</span>}</div>
</div>
<div class="line"><a id="l00765" name="l00765"></a><span class="lineno">  765</span> </div>
<div class="foldopen" id="foldopen00766" data-start="{" data-end="}">
<div class="line"><a id="l00766" name="l00766"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_bucket.html#a09560ffe4ce774b77d9001dfc810f604">  766</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_bucket.html#a09560ffe4ce774b77d9001dfc810f604">RadosBucket::trim_usage</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, uint64_t start_epoch, uint64_t end_epoch)</div>
<div class="line"><a id="l00767" name="l00767"></a><span class="lineno">  767</span>{</div>
<div class="line"><a id="l00768" name="l00768"></a><span class="lineno">  768</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_bucket.html#a66ca8b0d7bf8f5a6670e5b7956220c0b">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aca5c28bc0f22f3f963d0475b594350e1">getRados</a>()-&gt;<a class="code hl_function" href="class_r_g_w_rados.html#a18292448539dcec32dbf15d808818160">trim_usage</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#a62d427fa47e904aaf18be892b9b502f9">owner</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_user.html#a4f6322efe2b6c9c2780eb31cb3a5ca51">get_id</a>(), <a class="code hl_function" href="classrgw_1_1sal_1_1_bucket.html#ab9ec2756b101c59e885d487256b3d7df">get_name</a>(), start_epoch, end_epoch);</div>
<div class="line"><a id="l00769" name="l00769"></a><span class="lineno">  769</span>}</div>
</div>
<div class="line"><a id="l00770" name="l00770"></a><span class="lineno">  770</span> </div>
<div class="foldopen" id="foldopen00771" data-start="{" data-end="}">
<div class="line"><a id="l00771" name="l00771"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_bucket.html#a93588d4063746d804d3fbb15c08e6002">  771</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_bucket.html#a93588d4063746d804d3fbb15c08e6002">RadosBucket::remove_objs_from_index</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, std::list&lt;rgw_obj_index_key&gt;&amp; objs_to_unlink)</div>
<div class="line"><a id="l00772" name="l00772"></a><span class="lineno">  772</span>{</div>
<div class="line"><a id="l00773" name="l00773"></a><span class="lineno">  773</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_bucket.html#a66ca8b0d7bf8f5a6670e5b7956220c0b">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aca5c28bc0f22f3f963d0475b594350e1">getRados</a>()-&gt;<a class="code hl_function" href="class_r_g_w_rados.html#a9e1bfad2bb7eb7a76f99185d3e0b3b5f">remove_objs_from_index</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#aa70480c22292c75f5e62829aeee2ed21">info</a>, objs_to_unlink);</div>
<div class="line"><a id="l00774" name="l00774"></a><span class="lineno">  774</span>}</div>
</div>
<div class="line"><a id="l00775" name="l00775"></a><span class="lineno">  775</span> </div>
<div class="foldopen" id="foldopen00776" data-start="{" data-end="}">
<div class="line"><a id="l00776" name="l00776"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_bucket.html#ac92b9b4ce76468bc047dda9156537fa6">  776</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_bucket.html#ac92b9b4ce76468bc047dda9156537fa6">RadosBucket::check_index</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, std::map&lt;RGWObjCategory, RGWStorageStats&gt;&amp; existing_stats, std::map&lt;RGWObjCategory, RGWStorageStats&gt;&amp; calculated_stats)</div>
<div class="line"><a id="l00777" name="l00777"></a><span class="lineno">  777</span>{</div>
<div class="line"><a id="l00778" name="l00778"></a><span class="lineno">  778</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_bucket.html#a66ca8b0d7bf8f5a6670e5b7956220c0b">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aca5c28bc0f22f3f963d0475b594350e1">getRados</a>()-&gt;<a class="code hl_function" href="class_r_g_w_rados.html#a5a9225b554b40c193e3a6f61d04f4472">bucket_check_index</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#aa70480c22292c75f5e62829aeee2ed21">info</a>, &amp;existing_stats, &amp;calculated_stats);</div>
<div class="line"><a id="l00779" name="l00779"></a><span class="lineno">  779</span>}</div>
</div>
<div class="line"><a id="l00780" name="l00780"></a><span class="lineno">  780</span> </div>
<div class="foldopen" id="foldopen00781" data-start="{" data-end="}">
<div class="line"><a id="l00781" name="l00781"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_bucket.html#a26e056686b52036e01e8092d1468b275">  781</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_bucket.html#a26e056686b52036e01e8092d1468b275">RadosBucket::rebuild_index</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>)</div>
<div class="line"><a id="l00782" name="l00782"></a><span class="lineno">  782</span>{</div>
<div class="line"><a id="l00783" name="l00783"></a><span class="lineno">  783</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_bucket.html#a66ca8b0d7bf8f5a6670e5b7956220c0b">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aca5c28bc0f22f3f963d0475b594350e1">getRados</a>()-&gt;<a class="code hl_function" href="class_r_g_w_rados.html#a4316d75a76710b4037aad84259c4aa3b">bucket_rebuild_index</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#aa70480c22292c75f5e62829aeee2ed21">info</a>);</div>
<div class="line"><a id="l00784" name="l00784"></a><span class="lineno">  784</span>}</div>
</div>
<div class="line"><a id="l00785" name="l00785"></a><span class="lineno">  785</span> </div>
<div class="foldopen" id="foldopen00786" data-start="{" data-end="}">
<div class="line"><a id="l00786" name="l00786"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_bucket.html#a3078a8abd66a41a71db710fe6f004030">  786</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_bucket.html#a3078a8abd66a41a71db710fe6f004030">RadosBucket::set_tag_timeout</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, uint64_t timeout)</div>
<div class="line"><a id="l00787" name="l00787"></a><span class="lineno">  787</span>{</div>
<div class="line"><a id="l00788" name="l00788"></a><span class="lineno">  788</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_bucket.html#a66ca8b0d7bf8f5a6670e5b7956220c0b">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aca5c28bc0f22f3f963d0475b594350e1">getRados</a>()-&gt;<a class="code hl_function" href="class_r_g_w_rados.html#af59f605755c6edf54fb0370ec6420db8">cls_obj_set_bucket_tag_timeout</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#aa70480c22292c75f5e62829aeee2ed21">info</a>, timeout);</div>
<div class="line"><a id="l00789" name="l00789"></a><span class="lineno">  789</span>}</div>
</div>
<div class="line"><a id="l00790" name="l00790"></a><span class="lineno">  790</span> </div>
<div class="foldopen" id="foldopen00791" data-start="{" data-end="}">
<div class="line"><a id="l00791" name="l00791"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_bucket.html#ae77a56e304b23abc6cc2c81beec78ef9">  791</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_bucket.html#ae77a56e304b23abc6cc2c81beec78ef9">RadosBucket::purge_instance</a>(<span class="keyword">const</span> DoutPrefixProvider* <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>)</div>
<div class="line"><a id="l00792" name="l00792"></a><span class="lineno">  792</span>{</div>
<div class="line"><a id="l00793" name="l00793"></a><span class="lineno">  793</span>  <span class="keywordtype">int</span> max_shards = (<a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#aa70480c22292c75f5e62829aeee2ed21">info</a>.<a class="code hl_variable" href="struct_r_g_w_bucket_info.html#a2f1c3c04708aff00336329d2b5a6b2c0">layout</a>.<a class="code hl_variable" href="structrgw_1_1_bucket_layout.html#a21b2e627c7cfc06dfc9437d2923c1eb6">current_index</a>.<a class="code hl_variable" href="structrgw_1_1bucket__index__layout__generation.html#a79b14696bcebca917981ef684691c2a6">layout</a>.<a class="code hl_variable" href="structrgw_1_1bucket__index__layout.html#a077a0ad9c56601354155d3c860bef951">normal</a>.<a class="code hl_variable" href="structrgw_1_1bucket__index__normal__layout.html#abe639d74cb05a11985d3dd74eadc5d10">num_shards</a> &gt; 0 ? <a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#aa70480c22292c75f5e62829aeee2ed21">info</a>.<a class="code hl_variable" href="struct_r_g_w_bucket_info.html#a2f1c3c04708aff00336329d2b5a6b2c0">layout</a>.<a class="code hl_variable" href="structrgw_1_1_bucket_layout.html#a21b2e627c7cfc06dfc9437d2923c1eb6">current_index</a>.<a class="code hl_variable" href="structrgw_1_1bucket__index__layout__generation.html#a79b14696bcebca917981ef684691c2a6">layout</a>.<a class="code hl_variable" href="structrgw_1_1bucket__index__layout.html#a077a0ad9c56601354155d3c860bef951">normal</a>.<a class="code hl_variable" href="structrgw_1_1bucket__index__normal__layout.html#abe639d74cb05a11985d3dd74eadc5d10">num_shards</a> : 1);</div>
<div class="line"><a id="l00794" name="l00794"></a><span class="lineno">  794</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; max_shards; i++) {</div>
<div class="line"><a id="l00795" name="l00795"></a><span class="lineno">  795</span>    <a class="code hl_struct" href="struct_r_g_w_rados_1_1_bucket_shard.html">RGWRados::BucketShard</a> bs(<a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_bucket.html#a66ca8b0d7bf8f5a6670e5b7956220c0b">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aca5c28bc0f22f3f963d0475b594350e1">getRados</a>());</div>
<div class="line"><a id="l00796" name="l00796"></a><span class="lineno">  796</span>    <span class="keywordtype">int</span> shard_id = (<a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#aa70480c22292c75f5e62829aeee2ed21">info</a>.<a class="code hl_variable" href="struct_r_g_w_bucket_info.html#a2f1c3c04708aff00336329d2b5a6b2c0">layout</a>.<a class="code hl_variable" href="structrgw_1_1_bucket_layout.html#a21b2e627c7cfc06dfc9437d2923c1eb6">current_index</a>.<a class="code hl_variable" href="structrgw_1_1bucket__index__layout__generation.html#a79b14696bcebca917981ef684691c2a6">layout</a>.<a class="code hl_variable" href="structrgw_1_1bucket__index__layout.html#a077a0ad9c56601354155d3c860bef951">normal</a>.<a class="code hl_variable" href="structrgw_1_1bucket__index__normal__layout.html#abe639d74cb05a11985d3dd74eadc5d10">num_shards</a> &gt; 0  ? i : -1);</div>
<div class="line"><a id="l00797" name="l00797"></a><span class="lineno">  797</span>    <span class="keywordtype">int</span> ret = bs.<a class="code hl_function" href="struct_r_g_w_rados_1_1_bucket_shard.html#a6a44a123c5f8989892eb6e1ed75b56f5">init</a>(<a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#aa70480c22292c75f5e62829aeee2ed21">info</a>.<a class="code hl_variable" href="struct_r_g_w_bucket_info.html#afbd8422e16061abdf72d710794ac74d4">bucket</a>, shard_id, <a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#aa70480c22292c75f5e62829aeee2ed21">info</a>.<a class="code hl_variable" href="struct_r_g_w_bucket_info.html#a2f1c3c04708aff00336329d2b5a6b2c0">layout</a>.<a class="code hl_variable" href="structrgw_1_1_bucket_layout.html#a21b2e627c7cfc06dfc9437d2923c1eb6">current_index</a>, <span class="keyword">nullptr</span>, <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>);</div>
<div class="line"><a id="l00798" name="l00798"></a><span class="lineno">  798</span>    <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line"><a id="l00799" name="l00799"></a><span class="lineno">  799</span>      cerr &lt;&lt; <span class="stringliteral">&quot;ERROR: bs.init(bucket=&quot;</span> &lt;&lt; <a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#aa70480c22292c75f5e62829aeee2ed21">info</a>.<a class="code hl_variable" href="struct_r_g_w_bucket_info.html#afbd8422e16061abdf72d710794ac74d4">bucket</a> &lt;&lt; <span class="stringliteral">&quot;, shard=&quot;</span> &lt;&lt; shard_id</div>
<div class="line"><a id="l00800" name="l00800"></a><span class="lineno">  800</span>           &lt;&lt; <span class="stringliteral">&quot;): &quot;</span> &lt;&lt; cpp_strerror(-ret) &lt;&lt; std::endl;</div>
<div class="line"><a id="l00801" name="l00801"></a><span class="lineno">  801</span>      <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l00802" name="l00802"></a><span class="lineno">  802</span>    }</div>
<div class="line"><a id="l00803" name="l00803"></a><span class="lineno">  803</span>    ret = <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_bucket.html#a66ca8b0d7bf8f5a6670e5b7956220c0b">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aca5c28bc0f22f3f963d0475b594350e1">getRados</a>()-&gt;<a class="code hl_function" href="class_r_g_w_rados.html#a7b3003e35dc6a17e0f933649df724c7c">bi_remove</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, bs);</div>
<div class="line"><a id="l00804" name="l00804"></a><span class="lineno">  804</span>    <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line"><a id="l00805" name="l00805"></a><span class="lineno">  805</span>      cerr &lt;&lt; <span class="stringliteral">&quot;ERROR: failed to remove bucket index object: &quot;</span></div>
<div class="line"><a id="l00806" name="l00806"></a><span class="lineno">  806</span>           &lt;&lt; cpp_strerror(-ret) &lt;&lt; std::endl;</div>
<div class="line"><a id="l00807" name="l00807"></a><span class="lineno">  807</span>      <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l00808" name="l00808"></a><span class="lineno">  808</span>    }</div>
<div class="line"><a id="l00809" name="l00809"></a><span class="lineno">  809</span>  }</div>
<div class="line"><a id="l00810" name="l00810"></a><span class="lineno">  810</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00811" name="l00811"></a><span class="lineno">  811</span>}</div>
</div>
<div class="line"><a id="l00812" name="l00812"></a><span class="lineno">  812</span> </div>
<div class="foldopen" id="foldopen00813" data-start="{" data-end="}">
<div class="line"><a id="l00813" name="l00813"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_bucket.html#a88a76b6f27e3db4482f0ea7cdc0987f1">  813</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_bucket.html#a88a76b6f27e3db4482f0ea7cdc0987f1">RadosBucket::set_acl</a>(<span class="keyword">const</span> DoutPrefixProvider* <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_class" href="class_r_g_w_access_control_policy.html">RGWAccessControlPolicy</a> &amp;acl, optional_yield y)</div>
<div class="line"><a id="l00814" name="l00814"></a><span class="lineno">  814</span>{</div>
<div class="line"><a id="l00815" name="l00815"></a><span class="lineno">  815</span>  bufferlist aclbl;</div>
<div class="line"><a id="l00816" name="l00816"></a><span class="lineno">  816</span> </div>
<div class="line"><a id="l00817" name="l00817"></a><span class="lineno">  817</span>  <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_bucket.html#a938ccf2aac0aa4f1643c576ade70942e">acls</a> = acl;</div>
<div class="line"><a id="l00818" name="l00818"></a><span class="lineno">  818</span>  acl.<a class="code hl_function" href="class_r_g_w_access_control_policy.html#a1ccee3bcdaea76f2e1d1d52fe488bb70">encode</a>(aclbl);</div>
<div class="line"><a id="l00819" name="l00819"></a><span class="lineno">  819</span>  map&lt;string, bufferlist&gt;&amp; <a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#a1888e0309010076e292c2d7c1da663c1">attrs</a> = <a class="code hl_function" href="classrgw_1_1sal_1_1_bucket.html#a8b49a035b8b328338492032f312fc3ca">get_attrs</a>();</div>
<div class="line"><a id="l00820" name="l00820"></a><span class="lineno">  820</span> </div>
<div class="line"><a id="l00821" name="l00821"></a><span class="lineno">  821</span>  <a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#a1888e0309010076e292c2d7c1da663c1">attrs</a>[<a class="code hl_define" href="rgw__common_8h.html#ac9a37f7a4f4ad09bae48d3c752920758">RGW_ATTR_ACL</a>] = aclbl;</div>
<div class="line"><a id="l00822" name="l00822"></a><span class="lineno">  822</span>  <a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#aa70480c22292c75f5e62829aeee2ed21">info</a>.<a class="code hl_variable" href="struct_r_g_w_bucket_info.html#a18215d487317142f30bd2675ccec2293">owner</a> = acl.<a class="code hl_function" href="class_r_g_w_access_control_policy.html#ac7be38fb3fa69a2ab41eed67a5ee4401">get_owner</a>().<a class="code hl_function" href="class_a_c_l_owner.html#ad784a6fdd9366a68b859f664486283fb">get_id</a>();</div>
<div class="line"><a id="l00823" name="l00823"></a><span class="lineno">  823</span> </div>
<div class="line"><a id="l00824" name="l00824"></a><span class="lineno">  824</span>  <span class="keywordtype">int</span> <a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a> = <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_bucket.html#a66ca8b0d7bf8f5a6670e5b7956220c0b">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#ab6a306bab7ce6cc5da2f287d4d9f11e0">ctl</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_ctl.html#aad9554920ed5b4cc9b75de55bb1af061">bucket</a>-&gt;<a class="code hl_function" href="class_r_g_w_bucket_ctl.html#af6941145d8c57eb328ef7a7ddc93d82b">store_bucket_instance_info</a>(<a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#aa70480c22292c75f5e62829aeee2ed21">info</a>.<a class="code hl_variable" href="struct_r_g_w_bucket_info.html#afbd8422e16061abdf72d710794ac74d4">bucket</a>,</div>
<div class="line"><a id="l00825" name="l00825"></a><span class="lineno">  825</span>                 <a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#aa70480c22292c75f5e62829aeee2ed21">info</a>, y, <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>,</div>
<div class="line"><a id="l00826" name="l00826"></a><span class="lineno">  826</span>                 <a class="code hl_struct" href="struct_r_g_w_bucket_ctl_1_1_bucket_instance_1_1_put_params.html">RGWBucketCtl::BucketInstance::PutParams</a>().<a class="code hl_function" href="struct_r_g_w_bucket_ctl_1_1_bucket_instance_1_1_put_params.html#ae75395f075f4506195757f9b01457c25">set_attrs</a>(&amp;<a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#a1888e0309010076e292c2d7c1da663c1">attrs</a>));</div>
<div class="line"><a id="l00827" name="l00827"></a><span class="lineno">  827</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a> &lt; 0) {</div>
<div class="line"><a id="l00828" name="l00828"></a><span class="lineno">  828</span>    cerr &lt;&lt; <span class="stringliteral">&quot;ERROR: failed to set bucket owner: &quot;</span> &lt;&lt; cpp_strerror(-<a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a>) &lt;&lt; std::endl;</div>
<div class="line"><a id="l00829" name="l00829"></a><span class="lineno">  829</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a>;</div>
<div class="line"><a id="l00830" name="l00830"></a><span class="lineno">  830</span>  }</div>
<div class="line"><a id="l00831" name="l00831"></a><span class="lineno">  831</span>  </div>
<div class="line"><a id="l00832" name="l00832"></a><span class="lineno">  832</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00833" name="l00833"></a><span class="lineno">  833</span>}</div>
</div>
<div class="line"><a id="l00834" name="l00834"></a><span class="lineno">  834</span> </div>
<div class="foldopen" id="foldopen00835" data-start="{" data-end="}">
<div class="line"><a id="l00835" name="l00835"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_bucket.html#ab2883227497e827c9caea46680f506d9">  835</a></span>std::unique_ptr&lt;Object&gt; <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_bucket.html#ab2883227497e827c9caea46680f506d9">RadosBucket::get_object</a>(<span class="keyword">const</span> <a class="code hl_struct" href="structrgw__obj__key.html">rgw_obj_key</a>&amp; k)</div>
<div class="line"><a id="l00836" name="l00836"></a><span class="lineno">  836</span>{</div>
<div class="line"><a id="l00837" name="l00837"></a><span class="lineno">  837</span>  <span class="keywordflow">return</span> std::make_unique&lt;RadosObject&gt;(this-&gt;<a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_bucket.html#a66ca8b0d7bf8f5a6670e5b7956220c0b">store</a>, k, <span class="keyword">this</span>);</div>
<div class="line"><a id="l00838" name="l00838"></a><span class="lineno">  838</span>}</div>
</div>
<div class="line"><a id="l00839" name="l00839"></a><span class="lineno">  839</span> </div>
<div class="foldopen" id="foldopen00840" data-start="{" data-end="}">
<div class="line"><a id="l00840" name="l00840"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_bucket.html#a31db25ba09d16dee01fa8889bc4fe9cd">  840</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_bucket.html#a31db25ba09d16dee01fa8889bc4fe9cd">RadosBucket::list</a>(<span class="keyword">const</span> DoutPrefixProvider* <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_struct" href="structrgw_1_1sal_1_1_bucket_1_1_list_params.html">ListParams</a>&amp; params, <span class="keywordtype">int</span> max, <a class="code hl_struct" href="structrgw_1_1sal_1_1_bucket_1_1_list_results.html">ListResults</a>&amp; results, optional_yield y)</div>
<div class="line"><a id="l00841" name="l00841"></a><span class="lineno">  841</span>{</div>
<div class="line"><a id="l00842" name="l00842"></a><span class="lineno">  842</span>  <a class="code hl_class" href="class_r_g_w_rados_1_1_bucket.html">RGWRados::Bucket</a> target(<a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_bucket.html#a66ca8b0d7bf8f5a6670e5b7956220c0b">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aca5c28bc0f22f3f963d0475b594350e1">getRados</a>(), <a class="code hl_function" href="classrgw_1_1sal_1_1_bucket.html#a1e64259203d2710c33c5a979721c19ee">get_info</a>());</div>
<div class="line"><a id="l00843" name="l00843"></a><span class="lineno">  843</span>  <span class="keywordflow">if</span> (params.<a class="code hl_variable" href="structrgw_1_1sal_1_1_bucket_1_1_list_params.html#a2872f62ae82d3087a2090b38a78c08a5">shard_id</a> &gt;= 0) {</div>
<div class="line"><a id="l00844" name="l00844"></a><span class="lineno">  844</span>    target.<a class="code hl_function" href="class_r_g_w_rados_1_1_bucket.html#ac23dd48c9cec3a7b0f3975dce571753b">set_shard_id</a>(params.<a class="code hl_variable" href="structrgw_1_1sal_1_1_bucket_1_1_list_params.html#a2872f62ae82d3087a2090b38a78c08a5">shard_id</a>);</div>
<div class="line"><a id="l00845" name="l00845"></a><span class="lineno">  845</span>  }</div>
<div class="line"><a id="l00846" name="l00846"></a><span class="lineno">  846</span>  <a class="code hl_class" href="class_r_g_w_rados_1_1_bucket_1_1_list.html">RGWRados::Bucket::List</a> list_op(&amp;target);</div>
<div class="line"><a id="l00847" name="l00847"></a><span class="lineno">  847</span> </div>
<div class="line"><a id="l00848" name="l00848"></a><span class="lineno">  848</span>  list_op.<a class="code hl_variable" href="class_r_g_w_rados_1_1_bucket_1_1_list.html#a6428a047e7ddf42156a3182234c7deeb">params</a>.<a class="code hl_variable" href="struct_r_g_w_rados_1_1_bucket_1_1_list_1_1_params.html#a6d8831586f2666250332f4ed65e19556">prefix</a> = params.<a class="code hl_variable" href="structrgw_1_1sal_1_1_bucket_1_1_list_params.html#adb0883ba21530e4181ef90c7bfea71d4">prefix</a>;</div>
<div class="line"><a id="l00849" name="l00849"></a><span class="lineno">  849</span>  list_op.<a class="code hl_variable" href="class_r_g_w_rados_1_1_bucket_1_1_list.html#a6428a047e7ddf42156a3182234c7deeb">params</a>.<a class="code hl_variable" href="struct_r_g_w_rados_1_1_bucket_1_1_list_1_1_params.html#aab5ff31e7e25f77177191be4dd864912">delim</a> = params.<a class="code hl_variable" href="structrgw_1_1sal_1_1_bucket_1_1_list_params.html#a6f6d8cc1c26ac1403bfcf8e2227caf75">delim</a>;</div>
<div class="line"><a id="l00850" name="l00850"></a><span class="lineno">  850</span>  list_op.<a class="code hl_variable" href="class_r_g_w_rados_1_1_bucket_1_1_list.html#a6428a047e7ddf42156a3182234c7deeb">params</a>.<a class="code hl_variable" href="struct_r_g_w_rados_1_1_bucket_1_1_list_1_1_params.html#a8799864f693cab862bcb299373e17d49">marker</a> = params.<a class="code hl_variable" href="structrgw_1_1sal_1_1_bucket_1_1_list_params.html#a2e087cec40a890b114cbc7c58c2507b0">marker</a>;</div>
<div class="line"><a id="l00851" name="l00851"></a><span class="lineno">  851</span>  list_op.<a class="code hl_variable" href="class_r_g_w_rados_1_1_bucket_1_1_list.html#a6428a047e7ddf42156a3182234c7deeb">params</a>.<a class="code hl_variable" href="struct_r_g_w_rados_1_1_bucket_1_1_list_1_1_params.html#ab5d768f4620540905f538ec85709ffad">ns</a> = params.<a class="code hl_variable" href="structrgw_1_1sal_1_1_bucket_1_1_list_params.html#a000855edc6e4474b7f9a1ea943512779">ns</a>;</div>
<div class="line"><a id="l00852" name="l00852"></a><span class="lineno">  852</span>  list_op.<a class="code hl_variable" href="class_r_g_w_rados_1_1_bucket_1_1_list.html#a6428a047e7ddf42156a3182234c7deeb">params</a>.<a class="code hl_variable" href="struct_r_g_w_rados_1_1_bucket_1_1_list_1_1_params.html#a0fc58e07053acd843e54e56617e5213d">end_marker</a> = params.<a class="code hl_variable" href="structrgw_1_1sal_1_1_bucket_1_1_list_params.html#a2be1c75a1b6c45d966b295ba32cb5c50">end_marker</a>;</div>
<div class="line"><a id="l00853" name="l00853"></a><span class="lineno">  853</span>  list_op.<a class="code hl_variable" href="class_r_g_w_rados_1_1_bucket_1_1_list.html#a6428a047e7ddf42156a3182234c7deeb">params</a>.<a class="code hl_variable" href="struct_r_g_w_rados_1_1_bucket_1_1_list_1_1_params.html#ab5d768f4620540905f538ec85709ffad">ns</a> = params.<a class="code hl_variable" href="structrgw_1_1sal_1_1_bucket_1_1_list_params.html#a000855edc6e4474b7f9a1ea943512779">ns</a>;</div>
<div class="line"><a id="l00854" name="l00854"></a><span class="lineno">  854</span>  list_op.<a class="code hl_variable" href="class_r_g_w_rados_1_1_bucket_1_1_list.html#a6428a047e7ddf42156a3182234c7deeb">params</a>.<a class="code hl_variable" href="struct_r_g_w_rados_1_1_bucket_1_1_list_1_1_params.html#a9abddd281f16eaa08a2d24cb5eff5b4e">enforce_ns</a> = params.<a class="code hl_variable" href="structrgw_1_1sal_1_1_bucket_1_1_list_params.html#aeff439ae8aa6d07d0057122ceca00a10">enforce_ns</a>;</div>
<div class="line"><a id="l00855" name="l00855"></a><span class="lineno">  855</span>  list_op.<a class="code hl_variable" href="class_r_g_w_rados_1_1_bucket_1_1_list.html#a6428a047e7ddf42156a3182234c7deeb">params</a>.<a class="code hl_variable" href="struct_r_g_w_rados_1_1_bucket_1_1_list_1_1_params.html#a983398d910ec274a63c537bf2a037419">access_list_filter</a> = params.<a class="code hl_variable" href="structrgw_1_1sal_1_1_bucket_1_1_list_params.html#ad987df8d3f2222af58e9694fbf59228f">access_list_filter</a>;</div>
<div class="line"><a id="l00856" name="l00856"></a><span class="lineno">  856</span>  list_op.<a class="code hl_variable" href="class_r_g_w_rados_1_1_bucket_1_1_list.html#a6428a047e7ddf42156a3182234c7deeb">params</a>.<a class="code hl_variable" href="struct_r_g_w_rados_1_1_bucket_1_1_list_1_1_params.html#a1281bef0d11d71b915ac062e7a37a83d">force_check_filter</a> = params.<a class="code hl_variable" href="structrgw_1_1sal_1_1_bucket_1_1_list_params.html#a08be44ff4eb35ea5f14f6e6d92b32dc0">force_check_filter</a>;</div>
<div class="line"><a id="l00857" name="l00857"></a><span class="lineno">  857</span>  list_op.<a class="code hl_variable" href="class_r_g_w_rados_1_1_bucket_1_1_list.html#a6428a047e7ddf42156a3182234c7deeb">params</a>.<a class="code hl_variable" href="struct_r_g_w_rados_1_1_bucket_1_1_list_1_1_params.html#a616d60b85fe0493e782da89fad2472bc">list_versions</a> = params.<a class="code hl_variable" href="structrgw_1_1sal_1_1_bucket_1_1_list_params.html#a3e5357a4fcc9044dc97ee55896d886ac">list_versions</a>;</div>
<div class="line"><a id="l00858" name="l00858"></a><span class="lineno">  858</span>  list_op.<a class="code hl_variable" href="class_r_g_w_rados_1_1_bucket_1_1_list.html#a6428a047e7ddf42156a3182234c7deeb">params</a>.<a class="code hl_variable" href="struct_r_g_w_rados_1_1_bucket_1_1_list_1_1_params.html#afdd8bc578fc34d59d66e54688775dd41">allow_unordered</a> = params.<a class="code hl_variable" href="structrgw_1_1sal_1_1_bucket_1_1_list_params.html#a78317932ae255789bd3114d546bf7d78">allow_unordered</a>;</div>
<div class="line"><a id="l00859" name="l00859"></a><span class="lineno">  859</span> </div>
<div class="line"><a id="l00860" name="l00860"></a><span class="lineno">  860</span>  <span class="keywordtype">int</span> ret = list_op.<a class="code hl_function" href="class_r_g_w_rados_1_1_bucket_1_1_list.html#a1520a9c73d0f32dcc0a875c1e6d34e5f">list_objects</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, max, &amp;results.<a class="code hl_variable" href="structrgw_1_1sal_1_1_bucket_1_1_list_results.html#ad2d05625f45090ae48961cca1ac235c1">objs</a>, &amp;results.<a class="code hl_variable" href="structrgw_1_1sal_1_1_bucket_1_1_list_results.html#a5854f248119c759099381208956708f6">common_prefixes</a>, &amp;results.<a class="code hl_variable" href="structrgw_1_1sal_1_1_bucket_1_1_list_results.html#a5b9a541d2f6fe22f99cbaa279c8d12e4">is_truncated</a>, y);</div>
<div class="line"><a id="l00861" name="l00861"></a><span class="lineno">  861</span>  <span class="keywordflow">if</span> (ret &gt;= 0) {</div>
<div class="line"><a id="l00862" name="l00862"></a><span class="lineno">  862</span>    results.<a class="code hl_variable" href="structrgw_1_1sal_1_1_bucket_1_1_list_results.html#a28361e7dbca0d163d77a697b96aa90ba">next_marker</a> = list_op.<a class="code hl_function" href="class_r_g_w_rados_1_1_bucket_1_1_list.html#a39723a564ffcaec30e6648791bb9506f">get_next_marker</a>();</div>
<div class="line"><a id="l00863" name="l00863"></a><span class="lineno">  863</span>    params.<a class="code hl_variable" href="structrgw_1_1sal_1_1_bucket_1_1_list_params.html#a2e087cec40a890b114cbc7c58c2507b0">marker</a> = results.<a class="code hl_variable" href="structrgw_1_1sal_1_1_bucket_1_1_list_results.html#a28361e7dbca0d163d77a697b96aa90ba">next_marker</a>;</div>
<div class="line"><a id="l00864" name="l00864"></a><span class="lineno">  864</span>  }</div>
<div class="line"><a id="l00865" name="l00865"></a><span class="lineno">  865</span> </div>
<div class="line"><a id="l00866" name="l00866"></a><span class="lineno">  866</span>  <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l00867" name="l00867"></a><span class="lineno">  867</span>}</div>
</div>
<div class="line"><a id="l00868" name="l00868"></a><span class="lineno">  868</span> </div>
<div class="foldopen" id="foldopen00869" data-start="{" data-end="}">
<div class="line"><a id="l00869" name="l00869"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_bucket.html#a163dceb7c33a9fdac9b73a6f57ef7c85">  869</a></span>std::unique_ptr&lt;MultipartUpload&gt; <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_bucket.html#a163dceb7c33a9fdac9b73a6f57ef7c85">RadosBucket::get_multipart_upload</a>(</div>
<div class="line"><a id="l00870" name="l00870"></a><span class="lineno">  870</span>                  <span class="keyword">const</span> std::string&amp; oid,</div>
<div class="line"><a id="l00871" name="l00871"></a><span class="lineno">  871</span>                  std::optional&lt;std::string&gt; upload_id,</div>
<div class="line"><a id="l00872" name="l00872"></a><span class="lineno">  872</span>                  <a class="code hl_class" href="class_a_c_l_owner.html">ACLOwner</a> owner, ceph::real_time mtime)</div>
<div class="line"><a id="l00873" name="l00873"></a><span class="lineno">  873</span>{</div>
<div class="line"><a id="l00874" name="l00874"></a><span class="lineno">  874</span>  <span class="keywordflow">return</span> std::make_unique&lt;RadosMultipartUpload&gt;(this-&gt;<a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_bucket.html#a66ca8b0d7bf8f5a6670e5b7956220c0b">store</a>, <span class="keyword">this</span>, oid, upload_id,</div>
<div class="line"><a id="l00875" name="l00875"></a><span class="lineno">  875</span>                        std::move(<a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#a62d427fa47e904aaf18be892b9b502f9">owner</a>), <a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#a4fd945a21faf16e2c455e0a96a485da4">mtime</a>);</div>
<div class="line"><a id="l00876" name="l00876"></a><span class="lineno">  876</span>}</div>
</div>
<div class="line"><a id="l00877" name="l00877"></a><span class="lineno">  877</span> </div>
<div class="foldopen" id="foldopen00878" data-start="{" data-end="}">
<div class="line"><a id="l00878" name="l00878"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_bucket.html#a99c6251cdcd53927ccbaedb49ec75cf2">  878</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_bucket.html#a99c6251cdcd53927ccbaedb49ec75cf2">RadosBucket::list_multiparts</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>,</div>
<div class="line"><a id="l00879" name="l00879"></a><span class="lineno">  879</span>                 <span class="keyword">const</span> <span class="keywordtype">string</span>&amp; prefix,</div>
<div class="line"><a id="l00880" name="l00880"></a><span class="lineno">  880</span>                 <span class="keywordtype">string</span>&amp; marker,</div>
<div class="line"><a id="l00881" name="l00881"></a><span class="lineno">  881</span>                 <span class="keyword">const</span> <span class="keywordtype">string</span>&amp; delim,</div>
<div class="line"><a id="l00882" name="l00882"></a><span class="lineno">  882</span>                 <span class="keyword">const</span> <span class="keywordtype">int</span>&amp; max_uploads,</div>
<div class="line"><a id="l00883" name="l00883"></a><span class="lineno">  883</span>                 vector&lt;std::unique_ptr&lt;MultipartUpload&gt;&gt;&amp; uploads,</div>
<div class="line"><a id="l00884" name="l00884"></a><span class="lineno">  884</span>                 map&lt;string, bool&gt; *common_prefixes,</div>
<div class="line"><a id="l00885" name="l00885"></a><span class="lineno">  885</span>                 <span class="keywordtype">bool</span> *is_truncated)</div>
<div class="line"><a id="l00886" name="l00886"></a><span class="lineno">  886</span>{</div>
<div class="line"><a id="l00887" name="l00887"></a><span class="lineno">  887</span>  <a class="code hl_struct" href="structrgw_1_1sal_1_1_bucket_1_1_list_params.html">rgw::sal::Bucket::ListParams</a> params;</div>
<div class="line"><a id="l00888" name="l00888"></a><span class="lineno">  888</span>  <a class="code hl_struct" href="structrgw_1_1sal_1_1_bucket_1_1_list_results.html">rgw::sal::Bucket::ListResults</a> results;</div>
<div class="line"><a id="l00889" name="l00889"></a><span class="lineno">  889</span>  <a class="code hl_class" href="class_multipart_meta_filter.html">MultipartMetaFilter</a> <a class="code hl_variable" href="rgw__op_8cc.html#af8e19e5f0f622fd1691f37c955943560">mp_filter</a>;</div>
<div class="line"><a id="l00890" name="l00890"></a><span class="lineno">  890</span> </div>
<div class="line"><a id="l00891" name="l00891"></a><span class="lineno">  891</span>  params.<a class="code hl_variable" href="structrgw_1_1sal_1_1_bucket_1_1_list_params.html#adb0883ba21530e4181ef90c7bfea71d4">prefix</a> = prefix;</div>
<div class="line"><a id="l00892" name="l00892"></a><span class="lineno">  892</span>  params.<a class="code hl_variable" href="structrgw_1_1sal_1_1_bucket_1_1_list_params.html#a6f6d8cc1c26ac1403bfcf8e2227caf75">delim</a> = delim;</div>
<div class="line"><a id="l00893" name="l00893"></a><span class="lineno">  893</span>  params.<a class="code hl_variable" href="structrgw_1_1sal_1_1_bucket_1_1_list_params.html#a2e087cec40a890b114cbc7c58c2507b0">marker</a> = marker;</div>
<div class="line"><a id="l00894" name="l00894"></a><span class="lineno">  894</span>  params.<a class="code hl_variable" href="structrgw_1_1sal_1_1_bucket_1_1_list_params.html#a000855edc6e4474b7f9a1ea943512779">ns</a> = <a class="code hl_define" href="rgw__rados_8h.html#ae0aa963272f470d3884b7a4160593740">RGW_OBJ_NS_MULTIPART</a>;</div>
<div class="line"><a id="l00895" name="l00895"></a><span class="lineno">  895</span>  params.<a class="code hl_variable" href="structrgw_1_1sal_1_1_bucket_1_1_list_params.html#ad987df8d3f2222af58e9694fbf59228f">access_list_filter</a> = &amp;<a class="code hl_variable" href="rgw__op_8cc.html#af8e19e5f0f622fd1691f37c955943560">mp_filter</a>;</div>
<div class="line"><a id="l00896" name="l00896"></a><span class="lineno">  896</span> </div>
<div class="line"><a id="l00897" name="l00897"></a><span class="lineno">  897</span>  <span class="keywordtype">int</span> ret = <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_bucket.html#a31db25ba09d16dee01fa8889bc4fe9cd">list</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, params, max_uploads, results, null_yield);</div>
<div class="line"><a id="l00898" name="l00898"></a><span class="lineno">  898</span> </div>
<div class="line"><a id="l00899" name="l00899"></a><span class="lineno">  899</span>  <span class="keywordflow">if</span> (ret &lt; 0)</div>
<div class="line"><a id="l00900" name="l00900"></a><span class="lineno">  900</span>    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l00901" name="l00901"></a><span class="lineno">  901</span> </div>
<div class="line"><a id="l00902" name="l00902"></a><span class="lineno">  902</span>  <span class="keywordflow">if</span> (!results.<a class="code hl_variable" href="structrgw_1_1sal_1_1_bucket_1_1_list_results.html#ad2d05625f45090ae48961cca1ac235c1">objs</a>.empty()) {</div>
<div class="line"><a id="l00903" name="l00903"></a><span class="lineno">  903</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> rgw_bucket_dir_entry&amp; dentry : results.<a class="code hl_variable" href="structrgw_1_1sal_1_1_bucket_1_1_list_results.html#ad2d05625f45090ae48961cca1ac235c1">objs</a>) {</div>
<div class="line"><a id="l00904" name="l00904"></a><span class="lineno">  904</span>      <a class="code hl_struct" href="structrgw__obj__key.html">rgw_obj_key</a> key(dentry.key);</div>
<div class="line"><a id="l00905" name="l00905"></a><span class="lineno">  905</span>      <a class="code hl_class" href="class_a_c_l_owner.html">ACLOwner</a> <a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#a62d427fa47e904aaf18be892b9b502f9">owner</a>(<a class="code hl_struct" href="structrgw__user.html">rgw_user</a>(dentry.meta.owner));</div>
<div class="line"><a id="l00906" name="l00906"></a><span class="lineno">  906</span>      <a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#a62d427fa47e904aaf18be892b9b502f9">owner</a>.set_name(dentry.meta.owner_display_name);</div>
<div class="line"><a id="l00907" name="l00907"></a><span class="lineno">  907</span>      uploads.push_back(this-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_bucket.html#a163dceb7c33a9fdac9b73a6f57ef7c85">get_multipart_upload</a>(key.<a class="code hl_variable" href="structrgw__obj__key.html#a009cbe657bf6a001d40af0a80e533186">name</a>,</div>
<div class="line"><a id="l00908" name="l00908"></a><span class="lineno">  908</span>            std::nullopt, std::move(<a class="code hl_variable" href="classrgw_1_1sal_1_1_bucket.html#a62d427fa47e904aaf18be892b9b502f9">owner</a>)));</div>
<div class="line"><a id="l00909" name="l00909"></a><span class="lineno">  909</span>    }</div>
<div class="line"><a id="l00910" name="l00910"></a><span class="lineno">  910</span>  }</div>
<div class="line"><a id="l00911" name="l00911"></a><span class="lineno">  911</span>  <span class="keywordflow">if</span> (common_prefixes) {</div>
<div class="line"><a id="l00912" name="l00912"></a><span class="lineno">  912</span>    *common_prefixes = std::move(results.<a class="code hl_variable" href="structrgw_1_1sal_1_1_bucket_1_1_list_results.html#a5854f248119c759099381208956708f6">common_prefixes</a>);</div>
<div class="line"><a id="l00913" name="l00913"></a><span class="lineno">  913</span>  }</div>
<div class="line"><a id="l00914" name="l00914"></a><span class="lineno">  914</span>  *is_truncated = results.<a class="code hl_variable" href="structrgw_1_1sal_1_1_bucket_1_1_list_results.html#a5b9a541d2f6fe22f99cbaa279c8d12e4">is_truncated</a>;</div>
<div class="line"><a id="l00915" name="l00915"></a><span class="lineno">  915</span>  marker = params.<a class="code hl_variable" href="structrgw_1_1sal_1_1_bucket_1_1_list_params.html#a2e087cec40a890b114cbc7c58c2507b0">marker</a>.<a class="code hl_variable" href="structrgw__obj__key.html#a009cbe657bf6a001d40af0a80e533186">name</a>;</div>
<div class="line"><a id="l00916" name="l00916"></a><span class="lineno">  916</span> </div>
<div class="line"><a id="l00917" name="l00917"></a><span class="lineno">  917</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00918" name="l00918"></a><span class="lineno">  918</span>}</div>
</div>
<div class="line"><a id="l00919" name="l00919"></a><span class="lineno">  919</span> </div>
<div class="foldopen" id="foldopen00920" data-start="{" data-end="}">
<div class="line"><a id="l00920" name="l00920"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_bucket.html#a04041791ae7b579c54a57e501ab5ae63">  920</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_bucket.html#a04041791ae7b579c54a57e501ab5ae63">RadosBucket::abort_multiparts</a>(<span class="keyword">const</span> DoutPrefixProvider* <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>,</div>
<div class="line"><a id="l00921" name="l00921"></a><span class="lineno">  921</span>                  CephContext* <a class="code hl_variable" href="cls__fifo__legacy_8cc.html#aa76801f7597f40e158b5f38b2e6466c5">cct</a>)</div>
<div class="line"><a id="l00922" name="l00922"></a><span class="lineno">  922</span>{</div>
<div class="line"><a id="l00923" name="l00923"></a><span class="lineno">  923</span>  <span class="keyword">constexpr</span> <span class="keywordtype">int</span> max = 1000;</div>
<div class="line"><a id="l00924" name="l00924"></a><span class="lineno">  924</span>  <span class="keywordtype">int</span> ret, num_deleted = 0;</div>
<div class="line"><a id="l00925" name="l00925"></a><span class="lineno">  925</span>  vector&lt;std::unique_ptr&lt;MultipartUpload&gt;&gt; uploads;</div>
<div class="line"><a id="l00926" name="l00926"></a><span class="lineno">  926</span>  <a class="code hl_class" href="class_r_g_w_object_ctx.html">RGWObjectCtx</a> obj_ctx(<a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_bucket.html#a66ca8b0d7bf8f5a6670e5b7956220c0b">store</a>);</div>
<div class="line"><a id="l00927" name="l00927"></a><span class="lineno">  927</span>  <span class="keywordtype">string</span> marker;</div>
<div class="line"><a id="l00928" name="l00928"></a><span class="lineno">  928</span>  <span class="keywordtype">bool</span> is_truncated;</div>
<div class="line"><a id="l00929" name="l00929"></a><span class="lineno">  929</span> </div>
<div class="line"><a id="l00930" name="l00930"></a><span class="lineno">  930</span>  <span class="keyword">const</span> std::string empty_delim;</div>
<div class="line"><a id="l00931" name="l00931"></a><span class="lineno">  931</span>  <span class="keyword">const</span> std::string empty_prefix;</div>
<div class="line"><a id="l00932" name="l00932"></a><span class="lineno">  932</span> </div>
<div class="line"><a id="l00933" name="l00933"></a><span class="lineno">  933</span>  <span class="keywordflow">do</span> {</div>
<div class="line"><a id="l00934" name="l00934"></a><span class="lineno">  934</span>    ret = <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_bucket.html#a99c6251cdcd53927ccbaedb49ec75cf2">list_multiparts</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, empty_prefix, marker, empty_delim,</div>
<div class="line"><a id="l00935" name="l00935"></a><span class="lineno">  935</span>              max, uploads, <span class="keyword">nullptr</span>, &amp;is_truncated);</div>
<div class="line"><a id="l00936" name="l00936"></a><span class="lineno">  936</span>    <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line"><a id="l00937" name="l00937"></a><span class="lineno">  937</span>      ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 0) &lt;&lt; __func__ &lt;&lt;</div>
<div class="line"><a id="l00938" name="l00938"></a><span class="lineno">  938</span>    <span class="stringliteral">&quot; ERROR : calling list_bucket_multiparts; ret=&quot;</span> &lt;&lt; ret &lt;&lt;</div>
<div class="line"><a id="l00939" name="l00939"></a><span class="lineno">  939</span>    <span class="stringliteral">&quot;; bucket=\&quot;&quot;</span> &lt;&lt; <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;\&quot;&quot;</span> &lt;&lt; dendl;</div>
<div class="line"><a id="l00940" name="l00940"></a><span class="lineno">  940</span>      <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l00941" name="l00941"></a><span class="lineno">  941</span>    }</div>
<div class="line"><a id="l00942" name="l00942"></a><span class="lineno">  942</span>    ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 20) &lt;&lt; __func__ &lt;&lt;</div>
<div class="line"><a id="l00943" name="l00943"></a><span class="lineno">  943</span>      <span class="stringliteral">&quot; INFO: aborting and cleaning up multipart upload(s); bucket=\&quot;&quot;</span> &lt;&lt;</div>
<div class="line"><a id="l00944" name="l00944"></a><span class="lineno">  944</span>      <span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;\&quot;; uploads.size()=&quot;</span> &lt;&lt; uploads.size() &lt;&lt;</div>
<div class="line"><a id="l00945" name="l00945"></a><span class="lineno">  945</span>      <span class="stringliteral">&quot;; is_truncated=&quot;</span> &lt;&lt; is_truncated &lt;&lt; dendl;</div>
<div class="line"><a id="l00946" name="l00946"></a><span class="lineno">  946</span> </div>
<div class="line"><a id="l00947" name="l00947"></a><span class="lineno">  947</span>    <span class="keywordflow">if</span> (!uploads.empty()) {</div>
<div class="line"><a id="l00948" name="l00948"></a><span class="lineno">  948</span>      <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; upload : uploads) {</div>
<div class="line"><a id="l00949" name="l00949"></a><span class="lineno">  949</span>    ret = upload-&gt;abort(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_variable" href="cls__fifo__legacy_8cc.html#aa76801f7597f40e158b5f38b2e6466c5">cct</a>, &amp;obj_ctx);</div>
<div class="line"><a id="l00950" name="l00950"></a><span class="lineno">  950</span>        <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line"><a id="l00951" name="l00951"></a><span class="lineno">  951</span>      <span class="comment">// we&#39;re doing a best-effort; if something cannot be found,</span></div>
<div class="line"><a id="l00952" name="l00952"></a><span class="lineno">  952</span>      <span class="comment">// log it and keep moving forward</span></div>
<div class="line"><a id="l00953" name="l00953"></a><span class="lineno">  953</span>      <span class="keywordflow">if</span> (ret != -ENOENT &amp;&amp; ret != -<a class="code hl_define" href="rgw__common_8h.html#a5670bf112bcf5bd63ff0c8bcafd09b87">ERR_NO_SUCH_UPLOAD</a>) {</div>
<div class="line"><a id="l00954" name="l00954"></a><span class="lineno">  954</span>        ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 0) &lt;&lt; __func__ &lt;&lt;</div>
<div class="line"><a id="l00955" name="l00955"></a><span class="lineno">  955</span>          <span class="stringliteral">&quot; ERROR : failed to abort and clean-up multipart upload \&quot;&quot;</span> &lt;&lt;</div>
<div class="line"><a id="l00956" name="l00956"></a><span class="lineno">  956</span>          upload-&gt;get_meta() &lt;&lt; <span class="stringliteral">&quot;\&quot;&quot;</span> &lt;&lt; dendl;</div>
<div class="line"><a id="l00957" name="l00957"></a><span class="lineno">  957</span>        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l00958" name="l00958"></a><span class="lineno">  958</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00959" name="l00959"></a><span class="lineno">  959</span>        ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 10) &lt;&lt; __func__ &lt;&lt;</div>
<div class="line"><a id="l00960" name="l00960"></a><span class="lineno">  960</span>          <span class="stringliteral">&quot; NOTE : unable to find part(s) of &quot;</span></div>
<div class="line"><a id="l00961" name="l00961"></a><span class="lineno">  961</span>          <span class="stringliteral">&quot;aborted multipart upload of \&quot;&quot;</span> &lt;&lt; upload-&gt;get_meta() &lt;&lt;</div>
<div class="line"><a id="l00962" name="l00962"></a><span class="lineno">  962</span>          <span class="stringliteral">&quot;\&quot; for cleaning up&quot;</span> &lt;&lt; dendl;</div>
<div class="line"><a id="l00963" name="l00963"></a><span class="lineno">  963</span>      }</div>
<div class="line"><a id="l00964" name="l00964"></a><span class="lineno">  964</span>        }</div>
<div class="line"><a id="l00965" name="l00965"></a><span class="lineno">  965</span>        num_deleted++;</div>
<div class="line"><a id="l00966" name="l00966"></a><span class="lineno">  966</span>      }</div>
<div class="line"><a id="l00967" name="l00967"></a><span class="lineno">  967</span>      <span class="keywordflow">if</span> (num_deleted) {</div>
<div class="line"><a id="l00968" name="l00968"></a><span class="lineno">  968</span>        ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 0) &lt;&lt; __func__ &lt;&lt;</div>
<div class="line"><a id="l00969" name="l00969"></a><span class="lineno">  969</span>      <span class="stringliteral">&quot; WARNING : aborted &quot;</span> &lt;&lt; num_deleted &lt;&lt;</div>
<div class="line"><a id="l00970" name="l00970"></a><span class="lineno">  970</span>      <span class="stringliteral">&quot; incomplete multipart uploads&quot;</span> &lt;&lt; dendl;</div>
<div class="line"><a id="l00971" name="l00971"></a><span class="lineno">  971</span>      }</div>
<div class="line"><a id="l00972" name="l00972"></a><span class="lineno">  972</span>    }</div>
<div class="line"><a id="l00973" name="l00973"></a><span class="lineno">  973</span>  } <span class="keywordflow">while</span> (is_truncated);</div>
<div class="line"><a id="l00974" name="l00974"></a><span class="lineno">  974</span> </div>
<div class="line"><a id="l00975" name="l00975"></a><span class="lineno">  975</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00976" name="l00976"></a><span class="lineno">  976</span>}</div>
</div>
<div class="line"><a id="l00977" name="l00977"></a><span class="lineno">  977</span> </div>
<div class="foldopen" id="foldopen00978" data-start="{" data-end="}">
<div class="line"><a id="l00978" name="l00978"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_store.html#a0ffe1d1f459e76909e4658cd33eed7ea">  978</a></span>std::unique_ptr&lt;User&gt; <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#a0ffe1d1f459e76909e4658cd33eed7ea">RadosStore::get_user</a>(<span class="keyword">const</span> <a class="code hl_struct" href="structrgw__user.html">rgw_user</a> &amp;u)</div>
<div class="line"><a id="l00979" name="l00979"></a><span class="lineno">  979</span>{</div>
<div class="line"><a id="l00980" name="l00980"></a><span class="lineno">  980</span>  <span class="keywordflow">return</span> std::make_unique&lt;RadosUser&gt;(<span class="keyword">this</span>, u);</div>
<div class="line"><a id="l00981" name="l00981"></a><span class="lineno">  981</span>}</div>
</div>
<div class="line"><a id="l00982" name="l00982"></a><span class="lineno">  982</span> </div>
<div class="foldopen" id="foldopen00983" data-start="{" data-end="}">
<div class="line"><a id="l00983" name="l00983"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_store.html#a6ea771900f5ed54d105cb3f791d93521">  983</a></span>std::string <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#a6ea771900f5ed54d105cb3f791d93521">RadosStore::get_cluster_id</a>(<span class="keyword">const</span> DoutPrefixProvider* <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>,  optional_yield y)</div>
<div class="line"><a id="l00984" name="l00984"></a><span class="lineno">  984</span>{</div>
<div class="line"><a id="l00985" name="l00985"></a><span class="lineno">  985</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aca5c28bc0f22f3f963d0475b594350e1">getRados</a>()-&gt;<a class="code hl_function" href="class_r_g_w_rados.html#ac99076046de99b39713faee8152fa438">get_cluster_fsid</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, y);</div>
<div class="line"><a id="l00986" name="l00986"></a><span class="lineno">  986</span>}</div>
</div>
<div class="line"><a id="l00987" name="l00987"></a><span class="lineno">  987</span> </div>
<div class="foldopen" id="foldopen00988" data-start="{" data-end="}">
<div class="line"><a id="l00988" name="l00988"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_store.html#a930105eace1be942960a8ed7be607202">  988</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#a930105eace1be942960a8ed7be607202">RadosStore::get_user_by_access_key</a>(<span class="keyword">const</span> DoutPrefixProvider* <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <span class="keyword">const</span> std::string&amp; key, optional_yield y, std::unique_ptr&lt;User&gt;* user)</div>
<div class="line"><a id="l00989" name="l00989"></a><span class="lineno">  989</span>{</div>
<div class="line"><a id="l00990" name="l00990"></a><span class="lineno">  990</span>  <a class="code hl_struct" href="struct_r_g_w_user_info.html">RGWUserInfo</a> uinfo;</div>
<div class="line"><a id="l00991" name="l00991"></a><span class="lineno">  991</span>  <a class="code hl_class" href="classrgw_1_1sal_1_1_user.html">User</a>* u;</div>
<div class="line"><a id="l00992" name="l00992"></a><span class="lineno">  992</span>  <a class="code hl_struct" href="struct_r_g_w_obj_version_tracker.html">RGWObjVersionTracker</a> objv_tracker;</div>
<div class="line"><a id="l00993" name="l00993"></a><span class="lineno">  993</span> </div>
<div class="line"><a id="l00994" name="l00994"></a><span class="lineno">  994</span>  <span class="keywordtype">int</span> <a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a> = <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#ab6a306bab7ce6cc5da2f287d4d9f11e0">ctl</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_ctl.html#a4e70524a487f44b8db6e5a8826160ac3">user</a>-&gt;<a class="code hl_function" href="class_r_g_w_user_ctl.html#af0acfea3f6a8a72b750b562cf875e01a">get_info_by_access_key</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, key, &amp;uinfo, y, <a class="code hl_struct" href="struct_r_g_w_user_ctl_1_1_get_params.html">RGWUserCtl::GetParams</a>().set_objv_tracker(&amp;objv_tracker));</div>
<div class="line"><a id="l00995" name="l00995"></a><span class="lineno">  995</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a> &lt; 0)</div>
<div class="line"><a id="l00996" name="l00996"></a><span class="lineno">  996</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a>;</div>
<div class="line"><a id="l00997" name="l00997"></a><span class="lineno">  997</span> </div>
<div class="line"><a id="l00998" name="l00998"></a><span class="lineno">  998</span>  u = <span class="keyword">new</span> <a class="code hl_class" href="classrgw_1_1sal_1_1_rados_user.html">RadosUser</a>(<span class="keyword">this</span>, uinfo);</div>
<div class="line"><a id="l00999" name="l00999"></a><span class="lineno">  999</span>  <span class="keywordflow">if</span> (!u)</div>
<div class="line"><a id="l01000" name="l01000"></a><span class="lineno"> 1000</span>    <span class="keywordflow">return</span> -ENOMEM;</div>
<div class="line"><a id="l01001" name="l01001"></a><span class="lineno"> 1001</span> </div>
<div class="line"><a id="l01002" name="l01002"></a><span class="lineno"> 1002</span>  u-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_user.html#a4754e4207c6e7bb946a0fe5c32435661">get_version_tracker</a>() = objv_tracker;</div>
<div class="line"><a id="l01003" name="l01003"></a><span class="lineno"> 1003</span> </div>
<div class="line"><a id="l01004" name="l01004"></a><span class="lineno"> 1004</span>  user-&gt;reset(u);</div>
<div class="line"><a id="l01005" name="l01005"></a><span class="lineno"> 1005</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l01006" name="l01006"></a><span class="lineno"> 1006</span>}</div>
</div>
<div class="line"><a id="l01007" name="l01007"></a><span class="lineno"> 1007</span> </div>
<div class="foldopen" id="foldopen01008" data-start="{" data-end="}">
<div class="line"><a id="l01008" name="l01008"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_store.html#a415d2a7e4da33505297b6d7640f3ca80"> 1008</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#a415d2a7e4da33505297b6d7640f3ca80">RadosStore::get_user_by_email</a>(<span class="keyword">const</span> DoutPrefixProvider* <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <span class="keyword">const</span> std::string&amp; email, optional_yield y, std::unique_ptr&lt;User&gt;* user)</div>
<div class="line"><a id="l01009" name="l01009"></a><span class="lineno"> 1009</span>{</div>
<div class="line"><a id="l01010" name="l01010"></a><span class="lineno"> 1010</span>  <a class="code hl_struct" href="struct_r_g_w_user_info.html">RGWUserInfo</a> uinfo;</div>
<div class="line"><a id="l01011" name="l01011"></a><span class="lineno"> 1011</span>  <a class="code hl_class" href="classrgw_1_1sal_1_1_user.html">User</a>* u;</div>
<div class="line"><a id="l01012" name="l01012"></a><span class="lineno"> 1012</span>  <a class="code hl_struct" href="struct_r_g_w_obj_version_tracker.html">RGWObjVersionTracker</a> objv_tracker;</div>
<div class="line"><a id="l01013" name="l01013"></a><span class="lineno"> 1013</span> </div>
<div class="line"><a id="l01014" name="l01014"></a><span class="lineno"> 1014</span>  <span class="keywordtype">int</span> <a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a> = <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#ab6a306bab7ce6cc5da2f287d4d9f11e0">ctl</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_ctl.html#a4e70524a487f44b8db6e5a8826160ac3">user</a>-&gt;<a class="code hl_function" href="class_r_g_w_user_ctl.html#ad85dde42fabd69f691a59a4c686a6c54">get_info_by_email</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, email, &amp;uinfo, y, <a class="code hl_struct" href="struct_r_g_w_user_ctl_1_1_get_params.html">RGWUserCtl::GetParams</a>().set_objv_tracker(&amp;objv_tracker));</div>
<div class="line"><a id="l01015" name="l01015"></a><span class="lineno"> 1015</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a> &lt; 0)</div>
<div class="line"><a id="l01016" name="l01016"></a><span class="lineno"> 1016</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a>;</div>
<div class="line"><a id="l01017" name="l01017"></a><span class="lineno"> 1017</span> </div>
<div class="line"><a id="l01018" name="l01018"></a><span class="lineno"> 1018</span>  u = <span class="keyword">new</span> <a class="code hl_class" href="classrgw_1_1sal_1_1_rados_user.html">RadosUser</a>(<span class="keyword">this</span>, uinfo);</div>
<div class="line"><a id="l01019" name="l01019"></a><span class="lineno"> 1019</span>  <span class="keywordflow">if</span> (!u)</div>
<div class="line"><a id="l01020" name="l01020"></a><span class="lineno"> 1020</span>    <span class="keywordflow">return</span> -ENOMEM;</div>
<div class="line"><a id="l01021" name="l01021"></a><span class="lineno"> 1021</span> </div>
<div class="line"><a id="l01022" name="l01022"></a><span class="lineno"> 1022</span>  u-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_user.html#a4754e4207c6e7bb946a0fe5c32435661">get_version_tracker</a>() = objv_tracker;</div>
<div class="line"><a id="l01023" name="l01023"></a><span class="lineno"> 1023</span> </div>
<div class="line"><a id="l01024" name="l01024"></a><span class="lineno"> 1024</span>  user-&gt;reset(u);</div>
<div class="line"><a id="l01025" name="l01025"></a><span class="lineno"> 1025</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l01026" name="l01026"></a><span class="lineno"> 1026</span>}</div>
</div>
<div class="line"><a id="l01027" name="l01027"></a><span class="lineno"> 1027</span> </div>
<div class="foldopen" id="foldopen01028" data-start="{" data-end="}">
<div class="line"><a id="l01028" name="l01028"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_store.html#a33deb35a3bd1e08b9626bc469550733e"> 1028</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#a33deb35a3bd1e08b9626bc469550733e">RadosStore::get_user_by_swift</a>(<span class="keyword">const</span> DoutPrefixProvider* <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <span class="keyword">const</span> std::string&amp; user_str, optional_yield y, std::unique_ptr&lt;User&gt;* user)</div>
<div class="line"><a id="l01029" name="l01029"></a><span class="lineno"> 1029</span>{</div>
<div class="line"><a id="l01030" name="l01030"></a><span class="lineno"> 1030</span>  <a class="code hl_struct" href="struct_r_g_w_user_info.html">RGWUserInfo</a> uinfo;</div>
<div class="line"><a id="l01031" name="l01031"></a><span class="lineno"> 1031</span>  <a class="code hl_class" href="classrgw_1_1sal_1_1_user.html">User</a>* u;</div>
<div class="line"><a id="l01032" name="l01032"></a><span class="lineno"> 1032</span>  <a class="code hl_struct" href="struct_r_g_w_obj_version_tracker.html">RGWObjVersionTracker</a> objv_tracker;</div>
<div class="line"><a id="l01033" name="l01033"></a><span class="lineno"> 1033</span> </div>
<div class="line"><a id="l01034" name="l01034"></a><span class="lineno"> 1034</span>  <span class="keywordtype">int</span> <a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a> = <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#ab6a306bab7ce6cc5da2f287d4d9f11e0">ctl</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_ctl.html#a4e70524a487f44b8db6e5a8826160ac3">user</a>-&gt;<a class="code hl_function" href="class_r_g_w_user_ctl.html#a58a40ea11a09bc8a5f9aa0914a654d56">get_info_by_swift</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, user_str, &amp;uinfo, y, <a class="code hl_struct" href="struct_r_g_w_user_ctl_1_1_get_params.html">RGWUserCtl::GetParams</a>().set_objv_tracker(&amp;objv_tracker));</div>
<div class="line"><a id="l01035" name="l01035"></a><span class="lineno"> 1035</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a> &lt; 0)</div>
<div class="line"><a id="l01036" name="l01036"></a><span class="lineno"> 1036</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a>;</div>
<div class="line"><a id="l01037" name="l01037"></a><span class="lineno"> 1037</span> </div>
<div class="line"><a id="l01038" name="l01038"></a><span class="lineno"> 1038</span>  u = <span class="keyword">new</span> <a class="code hl_class" href="classrgw_1_1sal_1_1_rados_user.html">RadosUser</a>(<span class="keyword">this</span>, uinfo);</div>
<div class="line"><a id="l01039" name="l01039"></a><span class="lineno"> 1039</span>  <span class="keywordflow">if</span> (!u)</div>
<div class="line"><a id="l01040" name="l01040"></a><span class="lineno"> 1040</span>    <span class="keywordflow">return</span> -ENOMEM;</div>
<div class="line"><a id="l01041" name="l01041"></a><span class="lineno"> 1041</span> </div>
<div class="line"><a id="l01042" name="l01042"></a><span class="lineno"> 1042</span>  u-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_user.html#a4754e4207c6e7bb946a0fe5c32435661">get_version_tracker</a>() = objv_tracker;</div>
<div class="line"><a id="l01043" name="l01043"></a><span class="lineno"> 1043</span> </div>
<div class="line"><a id="l01044" name="l01044"></a><span class="lineno"> 1044</span>  user-&gt;reset(u);</div>
<div class="line"><a id="l01045" name="l01045"></a><span class="lineno"> 1045</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l01046" name="l01046"></a><span class="lineno"> 1046</span>}</div>
</div>
<div class="line"><a id="l01047" name="l01047"></a><span class="lineno"> 1047</span> </div>
<div class="foldopen" id="foldopen01048" data-start="{" data-end="}">
<div class="line"><a id="l01048" name="l01048"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_store.html#a028aa3718776b62e70296ad20a161419"> 1048</a></span>std::unique_ptr&lt;Object&gt; <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#a028aa3718776b62e70296ad20a161419">RadosStore::get_object</a>(<span class="keyword">const</span> <a class="code hl_struct" href="structrgw__obj__key.html">rgw_obj_key</a>&amp; k)</div>
<div class="line"><a id="l01049" name="l01049"></a><span class="lineno"> 1049</span>{</div>
<div class="line"><a id="l01050" name="l01050"></a><span class="lineno"> 1050</span>  <span class="keywordflow">return</span> std::make_unique&lt;RadosObject&gt;(<span class="keyword">this</span>, k);</div>
<div class="line"><a id="l01051" name="l01051"></a><span class="lineno"> 1051</span>}</div>
</div>
<div class="line"><a id="l01052" name="l01052"></a><span class="lineno"> 1052</span> </div>
<div class="foldopen" id="foldopen01053" data-start="{" data-end="}">
<div class="line"><a id="l01053" name="l01053"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_store.html#a2a24af2ca7428fcbfba9408ff1cb010d"> 1053</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#a2a24af2ca7428fcbfba9408ff1cb010d">RadosStore::get_bucket</a>(<span class="keyword">const</span> DoutPrefixProvider* <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_class" href="classrgw_1_1sal_1_1_user.html">User</a>* u, <span class="keyword">const</span> <a class="code hl_struct" href="structrgw__bucket.html">rgw_bucket</a>&amp; b, std::unique_ptr&lt;Bucket&gt;* bucket, optional_yield y)</div>
<div class="line"><a id="l01054" name="l01054"></a><span class="lineno"> 1054</span>{</div>
<div class="line"><a id="l01055" name="l01055"></a><span class="lineno"> 1055</span>  <span class="keywordtype">int</span> ret;</div>
<div class="line"><a id="l01056" name="l01056"></a><span class="lineno"> 1056</span>  <a class="code hl_class" href="classrgw_1_1sal_1_1_bucket.html">Bucket</a>* bp;</div>
<div class="line"><a id="l01057" name="l01057"></a><span class="lineno"> 1057</span> </div>
<div class="line"><a id="l01058" name="l01058"></a><span class="lineno"> 1058</span>  bp = <span class="keyword">new</span> <a class="code hl_class" href="classrgw_1_1sal_1_1_rados_bucket.html">RadosBucket</a>(<span class="keyword">this</span>, b, u);</div>
<div class="line"><a id="l01059" name="l01059"></a><span class="lineno"> 1059</span>  ret = bp-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_bucket.html#a3902fc3bdd6c0f58baef76e0a08c4bb4">load_bucket</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, y);</div>
<div class="line"><a id="l01060" name="l01060"></a><span class="lineno"> 1060</span>  <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line"><a id="l01061" name="l01061"></a><span class="lineno"> 1061</span>    <span class="keyword">delete</span> bp;</div>
<div class="line"><a id="l01062" name="l01062"></a><span class="lineno"> 1062</span>    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l01063" name="l01063"></a><span class="lineno"> 1063</span>  }</div>
<div class="line"><a id="l01064" name="l01064"></a><span class="lineno"> 1064</span> </div>
<div class="line"><a id="l01065" name="l01065"></a><span class="lineno"> 1065</span>  bucket-&gt;reset(bp);</div>
<div class="line"><a id="l01066" name="l01066"></a><span class="lineno"> 1066</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l01067" name="l01067"></a><span class="lineno"> 1067</span>}</div>
</div>
<div class="line"><a id="l01068" name="l01068"></a><span class="lineno"> 1068</span> </div>
<div class="foldopen" id="foldopen01069" data-start="{" data-end="}">
<div class="line"><a id="l01069" name="l01069"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_store.html#aab76235bd533ef0c54b772891df0c760"> 1069</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#a2a24af2ca7428fcbfba9408ff1cb010d">RadosStore::get_bucket</a>(<a class="code hl_class" href="classrgw_1_1sal_1_1_user.html">User</a>* u, <span class="keyword">const</span> <a class="code hl_struct" href="struct_r_g_w_bucket_info.html">RGWBucketInfo</a>&amp; i, std::unique_ptr&lt;Bucket&gt;* bucket)</div>
<div class="line"><a id="l01070" name="l01070"></a><span class="lineno"> 1070</span>{</div>
<div class="line"><a id="l01071" name="l01071"></a><span class="lineno"> 1071</span>  <a class="code hl_class" href="classrgw_1_1sal_1_1_bucket.html">Bucket</a>* bp;</div>
<div class="line"><a id="l01072" name="l01072"></a><span class="lineno"> 1072</span> </div>
<div class="line"><a id="l01073" name="l01073"></a><span class="lineno"> 1073</span>  bp = <span class="keyword">new</span> <a class="code hl_class" href="classrgw_1_1sal_1_1_rados_bucket.html">RadosBucket</a>(<span class="keyword">this</span>, i, u);</div>
<div class="line"><a id="l01074" name="l01074"></a><span class="lineno"> 1074</span>  <span class="comment">/* Don&#39;t need to fetch the bucket info, use the provided one */</span></div>
<div class="line"><a id="l01075" name="l01075"></a><span class="lineno"> 1075</span> </div>
<div class="line"><a id="l01076" name="l01076"></a><span class="lineno"> 1076</span>  bucket-&gt;reset(bp);</div>
<div class="line"><a id="l01077" name="l01077"></a><span class="lineno"> 1077</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l01078" name="l01078"></a><span class="lineno"> 1078</span>}</div>
</div>
<div class="line"><a id="l01079" name="l01079"></a><span class="lineno"> 1079</span> </div>
<div class="foldopen" id="foldopen01080" data-start="{" data-end="}">
<div class="line"><a id="l01080" name="l01080"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_store.html#a8f51b6240067cb056fce62b0b1c8749c"> 1080</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#a2a24af2ca7428fcbfba9408ff1cb010d">RadosStore::get_bucket</a>(<span class="keyword">const</span> DoutPrefixProvider* <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_class" href="classrgw_1_1sal_1_1_user.html">User</a>* u, <span class="keyword">const</span> std::string&amp; tenant, <span class="keyword">const</span> std::string&amp; name, std::unique_ptr&lt;Bucket&gt;* bucket, optional_yield y)</div>
<div class="line"><a id="l01081" name="l01081"></a><span class="lineno"> 1081</span>{</div>
<div class="line"><a id="l01082" name="l01082"></a><span class="lineno"> 1082</span>  <a class="code hl_struct" href="structrgw__bucket.html">rgw_bucket</a> b;</div>
<div class="line"><a id="l01083" name="l01083"></a><span class="lineno"> 1083</span> </div>
<div class="line"><a id="l01084" name="l01084"></a><span class="lineno"> 1084</span>  b.<a class="code hl_variable" href="structrgw__bucket.html#ac2d65e02c9242ad2ea2ad31da15d8836">tenant</a> = tenant;</div>
<div class="line"><a id="l01085" name="l01085"></a><span class="lineno"> 1085</span>  b.<a class="code hl_variable" href="structrgw__bucket.html#a32d3529f5b0c53051c856a7abe867a6b">name</a> = name;</div>
<div class="line"><a id="l01086" name="l01086"></a><span class="lineno"> 1086</span> </div>
<div class="line"><a id="l01087" name="l01087"></a><span class="lineno"> 1087</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#a2a24af2ca7428fcbfba9408ff1cb010d">get_bucket</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, u, b, bucket, y);</div>
<div class="line"><a id="l01088" name="l01088"></a><span class="lineno"> 1088</span>}</div>
</div>
<div class="line"><a id="l01089" name="l01089"></a><span class="lineno"> 1089</span> </div>
<div class="foldopen" id="foldopen01090" data-start="{" data-end="}">
<div class="line"><a id="l01090" name="l01090"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_store.html#ad59bcd8ba0006275181aca9600b94514"> 1090</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#ad59bcd8ba0006275181aca9600b94514">RadosStore::is_meta_master</a>()</div>
<div class="line"><a id="l01091" name="l01091"></a><span class="lineno"> 1091</span>{</div>
<div class="line"><a id="l01092" name="l01092"></a><span class="lineno"> 1092</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#abe4f0602b771d5549a02c0a326d6a832">svc</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_services.html#a6a82305adde4d9b9667690ed2059a394">zone</a>-&gt;<a class="code hl_function" href="class_r_g_w_s_i___zone.html#a7f1e75d0c6d2ae5d2916e0ecbbc5e1ea">is_meta_master</a>();</div>
<div class="line"><a id="l01093" name="l01093"></a><span class="lineno"> 1093</span>}</div>
</div>
<div class="line"><a id="l01094" name="l01094"></a><span class="lineno"> 1094</span> </div>
<div class="foldopen" id="foldopen01095" data-start="{" data-end="}">
<div class="line"><a id="l01095" name="l01095"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_store.html#a62bb26ebcdeb355f92e8cc5a37c227dd"> 1095</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#a62bb26ebcdeb355f92e8cc5a37c227dd">RadosStore::forward_request_to_master</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_class" href="classrgw_1_1sal_1_1_user.html">User</a>* user, obj_version* objv,</div>
<div class="line"><a id="l01096" name="l01096"></a><span class="lineno"> 1096</span>                         bufferlist&amp; in_data,</div>
<div class="line"><a id="l01097" name="l01097"></a><span class="lineno"> 1097</span>                         JSONParser* jp, <a class="code hl_struct" href="structreq__info.html">req_info</a>&amp; info,</div>
<div class="line"><a id="l01098" name="l01098"></a><span class="lineno"> 1098</span>                         optional_yield y)</div>
<div class="line"><a id="l01099" name="l01099"></a><span class="lineno"> 1099</span>{</div>
<div class="line"><a id="l01100" name="l01100"></a><span class="lineno"> 1100</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#ad59bcd8ba0006275181aca9600b94514">is_meta_master</a>()) {</div>
<div class="line"><a id="l01101" name="l01101"></a><span class="lineno"> 1101</span>    <span class="comment">/* We&#39;re master, don&#39;t forward */</span></div>
<div class="line"><a id="l01102" name="l01102"></a><span class="lineno"> 1102</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l01103" name="l01103"></a><span class="lineno"> 1103</span>  }</div>
<div class="line"><a id="l01104" name="l01104"></a><span class="lineno"> 1104</span> </div>
<div class="line"><a id="l01105" name="l01105"></a><span class="lineno"> 1105</span>  <span class="keywordflow">if</span> (!<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#abe4f0602b771d5549a02c0a326d6a832">svc</a>()-&gt;<a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_store.html#a0a94e58a4595ab519b4c3f89d33419fe">zone</a>-&gt;get_master_conn()) {</div>
<div class="line"><a id="l01106" name="l01106"></a><span class="lineno"> 1106</span>    ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 0) &lt;&lt; <span class="stringliteral">&quot;rest connection is invalid&quot;</span> &lt;&lt; dendl;</div>
<div class="line"><a id="l01107" name="l01107"></a><span class="lineno"> 1107</span>    <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><a id="l01108" name="l01108"></a><span class="lineno"> 1108</span>  }</div>
<div class="line"><a id="l01109" name="l01109"></a><span class="lineno"> 1109</span>  ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 0) &lt;&lt; <span class="stringliteral">&quot;sending request to master zonegroup&quot;</span> &lt;&lt; dendl;</div>
<div class="line"><a id="l01110" name="l01110"></a><span class="lineno"> 1110</span>  bufferlist response;</div>
<div class="line"><a id="l01111" name="l01111"></a><span class="lineno"> 1111</span>  std::string uid_str = user-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_user.html#a4f6322efe2b6c9c2780eb31cb3a5ca51">get_id</a>().<a class="code hl_function" href="structrgw__user.html#af00f510d6a9ff0580d87ee46b274d96e">to_str</a>();</div>
<div class="line"><a id="l01112" name="l01112"></a><span class="lineno"> 1112</span><span class="preprocessor">#define MAX_REST_RESPONSE (128 * 1024) </span><span class="comment">// we expect a very small response</span></div>
<div class="line"><a id="l01113" name="l01113"></a><span class="lineno"> 1113</span>  <span class="keywordtype">int</span> ret = <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#abe4f0602b771d5549a02c0a326d6a832">svc</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_services.html#a6a82305adde4d9b9667690ed2059a394">zone</a>-&gt;<a class="code hl_function" href="class_r_g_w_s_i___zone.html#afe763829ce716720925bc195a9cec1c3">get_master_conn</a>()-&gt;<a class="code hl_function" href="class_r_g_w_r_e_s_t_conn.html#a019e97bf205f671fdb89bd47035e316e">forward</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_struct" href="structrgw__user.html">rgw_user</a>(uid_str), info,</div>
<div class="line"><a id="l01114" name="l01114"></a><span class="lineno"> 1114</span>                                                    objv, <a class="code hl_define" href="rgw__period__puller_8cc.html#a2f797364c3b14adcbd8b1a5067c09d32">MAX_REST_RESPONSE</a>,</div>
<div class="line"><a id="l01115" name="l01115"></a><span class="lineno"> 1115</span>                            &amp;in_data, &amp;response, y);</div>
<div class="line"><a id="l01116" name="l01116"></a><span class="lineno"> 1116</span>  <span class="keywordflow">if</span> (ret &lt; 0)</div>
<div class="line"><a id="l01117" name="l01117"></a><span class="lineno"> 1117</span>    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l01118" name="l01118"></a><span class="lineno"> 1118</span> </div>
<div class="line"><a id="l01119" name="l01119"></a><span class="lineno"> 1119</span>  ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 20) &lt;&lt; <span class="stringliteral">&quot;response: &quot;</span> &lt;&lt; response.c_str() &lt;&lt; dendl;</div>
<div class="line"><a id="l01120" name="l01120"></a><span class="lineno"> 1120</span>  <span class="keywordflow">if</span> (jp &amp;&amp; !jp-&gt;parse(response.c_str(), response.length())) {</div>
<div class="line"><a id="l01121" name="l01121"></a><span class="lineno"> 1121</span>    ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 0) &lt;&lt; <span class="stringliteral">&quot;failed parsing response from master zonegroup&quot;</span> &lt;&lt; dendl;</div>
<div class="line"><a id="l01122" name="l01122"></a><span class="lineno"> 1122</span>    <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><a id="l01123" name="l01123"></a><span class="lineno"> 1123</span>  }</div>
<div class="line"><a id="l01124" name="l01124"></a><span class="lineno"> 1124</span> </div>
<div class="line"><a id="l01125" name="l01125"></a><span class="lineno"> 1125</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l01126" name="l01126"></a><span class="lineno"> 1126</span>}</div>
</div>
<div class="line"><a id="l01127" name="l01127"></a><span class="lineno"> 1127</span> </div>
<div class="foldopen" id="foldopen01128" data-start="{" data-end="}">
<div class="line"><a id="l01128" name="l01128"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_store.html#abd2263eda4d5b464d2c14739de887fe3"> 1128</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#abd2263eda4d5b464d2c14739de887fe3">RadosStore::forward_iam_request_to_master</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <span class="keyword">const</span> <a class="code hl_struct" href="struct_r_g_w_access_key.html">RGWAccessKey</a>&amp; key, obj_version* objv,</div>
<div class="line"><a id="l01129" name="l01129"></a><span class="lineno"> 1129</span>                         bufferlist&amp; in_data,</div>
<div class="line"><a id="l01130" name="l01130"></a><span class="lineno"> 1130</span>                         <a class="code hl_class" href="class_r_g_w_x_m_l_parser.html">RGWXMLDecoder::XMLParser</a>* parser, <a class="code hl_struct" href="structreq__info.html">req_info</a>&amp; info,</div>
<div class="line"><a id="l01131" name="l01131"></a><span class="lineno"> 1131</span>                         optional_yield y)</div>
<div class="line"><a id="l01132" name="l01132"></a><span class="lineno"> 1132</span>{</div>
<div class="line"><a id="l01133" name="l01133"></a><span class="lineno"> 1133</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#ad59bcd8ba0006275181aca9600b94514">is_meta_master</a>()) {</div>
<div class="line"><a id="l01134" name="l01134"></a><span class="lineno"> 1134</span>    <span class="comment">/* We&#39;re master, don&#39;t forward */</span></div>
<div class="line"><a id="l01135" name="l01135"></a><span class="lineno"> 1135</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l01136" name="l01136"></a><span class="lineno"> 1136</span>  }</div>
<div class="line"><a id="l01137" name="l01137"></a><span class="lineno"> 1137</span> </div>
<div class="line"><a id="l01138" name="l01138"></a><span class="lineno"> 1138</span>  <span class="keywordflow">if</span> (!<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#abe4f0602b771d5549a02c0a326d6a832">svc</a>()-&gt;<a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_store.html#a0a94e58a4595ab519b4c3f89d33419fe">zone</a>-&gt;get_master_conn()) {</div>
<div class="line"><a id="l01139" name="l01139"></a><span class="lineno"> 1139</span>    ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 0) &lt;&lt; <span class="stringliteral">&quot;rest connection is invalid&quot;</span> &lt;&lt; dendl;</div>
<div class="line"><a id="l01140" name="l01140"></a><span class="lineno"> 1140</span>    <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><a id="l01141" name="l01141"></a><span class="lineno"> 1141</span>  }</div>
<div class="line"><a id="l01142" name="l01142"></a><span class="lineno"> 1142</span>  ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 0) &lt;&lt; <span class="stringliteral">&quot;sending request to master zonegroup&quot;</span> &lt;&lt; dendl;</div>
<div class="line"><a id="l01143" name="l01143"></a><span class="lineno"> 1143</span>  bufferlist response;</div>
<div class="line"><a id="l01144" name="l01144"></a><span class="lineno"> 1144</span><span class="preprocessor">#define MAX_REST_RESPONSE (128 * 1024) </span><span class="comment">// we expect a very small response</span></div>
<div class="line"><a id="l01145" name="l01145"></a><span class="lineno"> 1145</span>  <span class="keywordtype">int</span> ret = <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#abe4f0602b771d5549a02c0a326d6a832">svc</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_services.html#a6a82305adde4d9b9667690ed2059a394">zone</a>-&gt;<a class="code hl_function" href="class_r_g_w_s_i___zone.html#afe763829ce716720925bc195a9cec1c3">get_master_conn</a>()-&gt;<a class="code hl_function" href="class_r_g_w_r_e_s_t_conn.html#ac2784b100e6b688a789640a105ce1f37">forward_iam_request</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, key, info,</div>
<div class="line"><a id="l01146" name="l01146"></a><span class="lineno"> 1146</span>                                                    objv, <a class="code hl_define" href="rgw__period__puller_8cc.html#a2f797364c3b14adcbd8b1a5067c09d32">MAX_REST_RESPONSE</a>,</div>
<div class="line"><a id="l01147" name="l01147"></a><span class="lineno"> 1147</span>                                                                &amp;in_data, &amp;response, y);</div>
<div class="line"><a id="l01148" name="l01148"></a><span class="lineno"> 1148</span>  <span class="keywordflow">if</span> (ret &lt; 0)</div>
<div class="line"><a id="l01149" name="l01149"></a><span class="lineno"> 1149</span>    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l01150" name="l01150"></a><span class="lineno"> 1150</span> </div>
<div class="line"><a id="l01151" name="l01151"></a><span class="lineno"> 1151</span>  ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 20) &lt;&lt; <span class="stringliteral">&quot;response: &quot;</span> &lt;&lt; response.c_str() &lt;&lt; dendl;</div>
<div class="line"><a id="l01152" name="l01152"></a><span class="lineno"> 1152</span> </div>
<div class="line"><a id="l01153" name="l01153"></a><span class="lineno"> 1153</span>  std::string <a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a> = response.c_str();</div>
<div class="line"><a id="l01154" name="l01154"></a><span class="lineno"> 1154</span>  std::string str_to_search = <span class="stringliteral">&quot;&amp;quot;&quot;</span>;</div>
<div class="line"><a id="l01155" name="l01155"></a><span class="lineno"> 1155</span>  std::string str_to_replace = <span class="stringliteral">&quot;\&quot;&quot;</span>;</div>
<div class="line"><a id="l01156" name="l01156"></a><span class="lineno"> 1156</span>  boost::replace_all(<a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a>, str_to_search, str_to_replace);</div>
<div class="line"><a id="l01157" name="l01157"></a><span class="lineno"> 1157</span>  ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 20) &lt;&lt; <span class="stringliteral">&quot;r: &quot;</span> &lt;&lt; <a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a>.c_str() &lt;&lt; dendl;</div>
<div class="line"><a id="l01158" name="l01158"></a><span class="lineno"> 1158</span> </div>
<div class="line"><a id="l01159" name="l01159"></a><span class="lineno"> 1159</span>  <span class="keywordflow">if</span> (parser &amp;&amp; !parser-&gt;<a class="code hl_function" href="class_r_g_w_x_m_l_parser.html#a4e20926588ef848ab1b68a29e79e91e8">parse</a>(<a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a>.c_str(), <a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a>.length(), 1)) {</div>
<div class="line"><a id="l01160" name="l01160"></a><span class="lineno"> 1160</span>    ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 0) &lt;&lt; <span class="stringliteral">&quot;ERROR: failed to parse response from master zonegroup&quot;</span> &lt;&lt; dendl;</div>
<div class="line"><a id="l01161" name="l01161"></a><span class="lineno"> 1161</span>    <span class="keywordflow">return</span> -EIO;</div>
<div class="line"><a id="l01162" name="l01162"></a><span class="lineno"> 1162</span>  }</div>
<div class="line"><a id="l01163" name="l01163"></a><span class="lineno"> 1163</span> </div>
<div class="line"><a id="l01164" name="l01164"></a><span class="lineno"> 1164</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l01165" name="l01165"></a><span class="lineno"> 1165</span>}</div>
</div>
<div class="line"><a id="l01166" name="l01166"></a><span class="lineno"> 1166</span> </div>
<div class="foldopen" id="foldopen01167" data-start="{" data-end="}">
<div class="line"><a id="l01167" name="l01167"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_store.html#a354b58c1e7d62c617254e9a758ae138e"> 1167</a></span>std::string <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#a354b58c1e7d62c617254e9a758ae138e">RadosStore::zone_unique_id</a>(uint64_t unique_num)</div>
<div class="line"><a id="l01168" name="l01168"></a><span class="lineno"> 1168</span>{</div>
<div class="line"><a id="l01169" name="l01169"></a><span class="lineno"> 1169</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#abe4f0602b771d5549a02c0a326d6a832">svc</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_services.html#a88f28272bc28b734fdd7d7f0d265ca37">zone_utils</a>-&gt;<a class="code hl_function" href="class_r_g_w_s_i___zone_utils.html#aa3e1a11cb1b86e996b7e72c5cfe64487">unique_id</a>(unique_num);</div>
<div class="line"><a id="l01170" name="l01170"></a><span class="lineno"> 1170</span>}</div>
</div>
<div class="line"><a id="l01171" name="l01171"></a><span class="lineno"> 1171</span> </div>
<div class="foldopen" id="foldopen01172" data-start="{" data-end="}">
<div class="line"><a id="l01172" name="l01172"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_store.html#a7fb106503a015a6a1e243ec9612daa89"> 1172</a></span>std::string <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#a7fb106503a015a6a1e243ec9612daa89">RadosStore::zone_unique_trans_id</a>(<span class="keyword">const</span> uint64_t unique_num)</div>
<div class="line"><a id="l01173" name="l01173"></a><span class="lineno"> 1173</span>{</div>
<div class="line"><a id="l01174" name="l01174"></a><span class="lineno"> 1174</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#abe4f0602b771d5549a02c0a326d6a832">svc</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_services.html#a88f28272bc28b734fdd7d7f0d265ca37">zone_utils</a>-&gt;<a class="code hl_function" href="class_r_g_w_s_i___zone_utils.html#a31062a6c79ee2b46349283609ee3e233">unique_trans_id</a>(unique_num);</div>
<div class="line"><a id="l01175" name="l01175"></a><span class="lineno"> 1175</span>}</div>
</div>
<div class="line"><a id="l01176" name="l01176"></a><span class="lineno"> 1176</span> </div>
<div class="foldopen" id="foldopen01177" data-start="{" data-end="}">
<div class="line"><a id="l01177" name="l01177"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_store.html#a7dac599323efccd26486146b401f070d"> 1177</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#a7dac599323efccd26486146b401f070d">RadosStore::cluster_stat</a>(<a class="code hl_struct" href="struct_r_g_w_cluster_stat.html">RGWClusterStat</a>&amp; stats)</div>
<div class="line"><a id="l01178" name="l01178"></a><span class="lineno"> 1178</span>{</div>
<div class="line"><a id="l01179" name="l01179"></a><span class="lineno"> 1179</span>  rados_cluster_stat_t rados_stats;</div>
<div class="line"><a id="l01180" name="l01180"></a><span class="lineno"> 1180</span>  <span class="keywordtype">int</span> ret;</div>
<div class="line"><a id="l01181" name="l01181"></a><span class="lineno"> 1181</span> </div>
<div class="line"><a id="l01182" name="l01182"></a><span class="lineno"> 1182</span>  ret = <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_store.html#a0e18c11acccd1aecb7c3ac0c87083196">rados</a>-&gt;<a class="code hl_function" href="class_r_g_w_rados.html#a37788b697bc88b3d2f6ef16257ca69b1">get_rados_handle</a>()-&gt;cluster_stat(rados_stats);</div>
<div class="line"><a id="l01183" name="l01183"></a><span class="lineno"> 1183</span>  <span class="keywordflow">if</span> (ret &lt; 0)</div>
<div class="line"><a id="l01184" name="l01184"></a><span class="lineno"> 1184</span>    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l01185" name="l01185"></a><span class="lineno"> 1185</span> </div>
<div class="line"><a id="l01186" name="l01186"></a><span class="lineno"> 1186</span>  stats.<a class="code hl_variable" href="struct_r_g_w_cluster_stat.html#ace01fc57a01b3052a6e7fe795f47b159">kb</a> = rados_stats.kb;</div>
<div class="line"><a id="l01187" name="l01187"></a><span class="lineno"> 1187</span>  stats.<a class="code hl_variable" href="struct_r_g_w_cluster_stat.html#a5842e2c033ceee935bfa0313e071682d">kb_used</a> = rados_stats.kb_used;</div>
<div class="line"><a id="l01188" name="l01188"></a><span class="lineno"> 1188</span>  stats.<a class="code hl_variable" href="struct_r_g_w_cluster_stat.html#a173737232f1a131c74492bed07f8bcf5">kb_avail</a> = rados_stats.kb_avail;</div>
<div class="line"><a id="l01189" name="l01189"></a><span class="lineno"> 1189</span>  stats.<a class="code hl_variable" href="struct_r_g_w_cluster_stat.html#a2d6a9916857dabce3143e28403dc8080">num_objects</a> = rados_stats.num_objects;</div>
<div class="line"><a id="l01190" name="l01190"></a><span class="lineno"> 1190</span> </div>
<div class="line"><a id="l01191" name="l01191"></a><span class="lineno"> 1191</span>  <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l01192" name="l01192"></a><span class="lineno"> 1192</span>}</div>
</div>
<div class="line"><a id="l01193" name="l01193"></a><span class="lineno"> 1193</span> </div>
<div class="foldopen" id="foldopen01194" data-start="{" data-end="}">
<div class="line"><a id="l01194" name="l01194"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_store.html#a67548606ee08f5b2a837b3f4879a9e4d"> 1194</a></span>std::unique_ptr&lt;Lifecycle&gt; <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#a67548606ee08f5b2a837b3f4879a9e4d">RadosStore::get_lifecycle</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l01195" name="l01195"></a><span class="lineno"> 1195</span>{</div>
<div class="line"><a id="l01196" name="l01196"></a><span class="lineno"> 1196</span>  <span class="keywordflow">return</span> std::make_unique&lt;RadosLifecycle&gt;(<span class="keyword">this</span>);</div>
<div class="line"><a id="l01197" name="l01197"></a><span class="lineno"> 1197</span>}</div>
</div>
<div class="line"><a id="l01198" name="l01198"></a><span class="lineno"> 1198</span> </div>
<div class="foldopen" id="foldopen01199" data-start="{" data-end="}">
<div class="line"><a id="l01199" name="l01199"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_store.html#afb039b5009df54d8f2d69d4dadce3689"> 1199</a></span>std::unique_ptr&lt;Completions&gt; <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#afb039b5009df54d8f2d69d4dadce3689">RadosStore::get_completions</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l01200" name="l01200"></a><span class="lineno"> 1200</span>{</div>
<div class="line"><a id="l01201" name="l01201"></a><span class="lineno"> 1201</span>  <span class="keywordflow">return</span> std::make_unique&lt;RadosCompletions&gt;();</div>
<div class="line"><a id="l01202" name="l01202"></a><span class="lineno"> 1202</span>}</div>
</div>
<div class="line"><a id="l01203" name="l01203"></a><span class="lineno"> 1203</span> </div>
<div class="foldopen" id="foldopen01204" data-start="{" data-end="}">
<div class="line"><a id="l01204" name="l01204"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_store.html#ae3fb73f8318ade9a5b7cf36b515cf646"> 1204</a></span>std::unique_ptr&lt;Notification&gt; <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#ae3fb73f8318ade9a5b7cf36b515cf646">RadosStore::get_notification</a>(</div>
<div class="line"><a id="l01205" name="l01205"></a><span class="lineno"> 1205</span>  <a class="code hl_class" href="classrgw_1_1sal_1_1_object.html">rgw::sal::Object</a>* obj, <a class="code hl_class" href="classrgw_1_1sal_1_1_object.html">rgw::sal::Object</a>* src_obj, <span class="keyword">struct</span> <a class="code hl_struct" href="structreq__state.html">req_state</a>* s, <a class="code hl_enumeration" href="namespacergw_1_1notify.html#a11587407d1aff95c9cb4a10979ba813b">rgw::notify::EventType</a> event_type, <span class="keyword">const</span> std::string* object_name)</div>
<div class="line"><a id="l01206" name="l01206"></a><span class="lineno"> 1206</span>{</div>
<div class="line"><a id="l01207" name="l01207"></a><span class="lineno"> 1207</span>  <span class="keywordflow">return</span> std::make_unique&lt;RadosNotification&gt;(s, <span class="keyword">this</span>, obj, src_obj, s, event_type, object_name);</div>
<div class="line"><a id="l01208" name="l01208"></a><span class="lineno"> 1208</span>}</div>
</div>
<div class="line"><a id="l01209" name="l01209"></a><span class="lineno"> 1209</span> </div>
<div class="foldopen" id="foldopen01210" data-start="{" data-end="}">
<div class="line"><a id="l01210" name="l01210"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_store.html#a856067525adc0b42867a4b5a33c81c75"> 1210</a></span>std::unique_ptr&lt;Notification&gt; <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#ae3fb73f8318ade9a5b7cf36b515cf646">RadosStore::get_notification</a>(<span class="keyword">const</span> DoutPrefixProvider* <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_class" href="classrgw_1_1sal_1_1_object.html">rgw::sal::Object</a>* obj, <a class="code hl_class" href="classrgw_1_1sal_1_1_object.html">rgw::sal::Object</a>* src_obj, <a class="code hl_class" href="class_r_g_w_object_ctx.html">RGWObjectCtx</a>* rctx, <a class="code hl_enumeration" href="namespacergw_1_1notify.html#a11587407d1aff95c9cb4a10979ba813b">rgw::notify::EventType</a> event_type, <a class="code hl_class" href="classrgw_1_1sal_1_1_bucket.html">rgw::sal::Bucket</a>* _bucket, std::string&amp; _user_id, std::string&amp; _user_tenant, std::string&amp; _req_id, optional_yield y)</div>
<div class="line"><a id="l01211" name="l01211"></a><span class="lineno"> 1211</span>{</div>
<div class="line"><a id="l01212" name="l01212"></a><span class="lineno"> 1212</span>  <span class="keywordflow">return</span> std::make_unique&lt;RadosNotification&gt;(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <span class="keyword">this</span>, obj, src_obj, rctx, event_type, _bucket, _user_id, _user_tenant, _req_id, y);</div>
<div class="line"><a id="l01213" name="l01213"></a><span class="lineno"> 1213</span>}</div>
</div>
<div class="line"><a id="l01214" name="l01214"></a><span class="lineno"> 1214</span> </div>
<div class="foldopen" id="foldopen01215" data-start="{" data-end="}">
<div class="line"><a id="l01215" name="l01215"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_store.html#a4e8dbe26315884f8ccafedc6f883340f"> 1215</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#a4e8dbe26315884f8ccafedc6f883340f">RadosStore::delete_raw_obj</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <span class="keyword">const</span> <a class="code hl_struct" href="structrgw__raw__obj.html">rgw_raw_obj</a>&amp; obj)</div>
<div class="line"><a id="l01216" name="l01216"></a><span class="lineno"> 1216</span>{</div>
<div class="line"><a id="l01217" name="l01217"></a><span class="lineno"> 1217</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_store.html#a0e18c11acccd1aecb7c3ac0c87083196">rados</a>-&gt;<a class="code hl_function" href="class_r_g_w_rados.html#a4ebd38995ad1e354c7a8c16ae4735d1f">delete_raw_obj</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, obj);</div>
<div class="line"><a id="l01218" name="l01218"></a><span class="lineno"> 1218</span>}</div>
</div>
<div class="line"><a id="l01219" name="l01219"></a><span class="lineno"> 1219</span> </div>
<div class="foldopen" id="foldopen01220" data-start="{" data-end="}">
<div class="line"><a id="l01220" name="l01220"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_store.html#ac5222771afd591b4005a93373859d1ec"> 1220</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#ac5222771afd591b4005a93373859d1ec">RadosStore::delete_raw_obj_aio</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <span class="keyword">const</span> <a class="code hl_struct" href="structrgw__raw__obj.html">rgw_raw_obj</a>&amp; obj, <a class="code hl_class" href="classrgw_1_1sal_1_1_completions.html">Completions</a>* <a class="code hl_variable" href="rgw__aio_8cc.html#ad8d5da794a93e87014771f5742ca6c71">aio</a>)</div>
<div class="line"><a id="l01221" name="l01221"></a><span class="lineno"> 1221</span>{</div>
<div class="line"><a id="l01222" name="l01222"></a><span class="lineno"> 1222</span>  <a class="code hl_class" href="classrgw_1_1sal_1_1_rados_completions.html">RadosCompletions</a>* raio = <span class="keyword">static_cast&lt;</span><a class="code hl_class" href="classrgw_1_1sal_1_1_rados_completions.html">RadosCompletions</a>*<span class="keyword">&gt;</span>(<a class="code hl_variable" href="rgw__aio_8cc.html#ad8d5da794a93e87014771f5742ca6c71">aio</a>);</div>
<div class="line"><a id="l01223" name="l01223"></a><span class="lineno"> 1223</span> </div>
<div class="line"><a id="l01224" name="l01224"></a><span class="lineno"> 1224</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_store.html#a0e18c11acccd1aecb7c3ac0c87083196">rados</a>-&gt;<a class="code hl_function" href="class_r_g_w_rados.html#ac37e4a05a4e60fd6bfc45d6b8ca28680">delete_raw_obj_aio</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, obj, raio-&gt;<a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_completions.html#a722d517ee1b1d84a00f299e2c197245a">handles</a>);</div>
<div class="line"><a id="l01225" name="l01225"></a><span class="lineno"> 1225</span>}</div>
</div>
<div class="line"><a id="l01226" name="l01226"></a><span class="lineno"> 1226</span> </div>
<div class="foldopen" id="foldopen01227" data-start="{" data-end="}">
<div class="line"><a id="l01227" name="l01227"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_store.html#a1aedb6405024534fa89345909869d50c"> 1227</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#a1aedb6405024534fa89345909869d50c">RadosStore::get_raw_obj</a>(<span class="keyword">const</span> <a class="code hl_struct" href="structrgw__placement__rule.html">rgw_placement_rule</a>&amp; placement_rule, <span class="keyword">const</span> <a class="code hl_struct" href="structrgw__obj.html">rgw_obj</a>&amp; obj, <a class="code hl_struct" href="structrgw__raw__obj.html">rgw_raw_obj</a>* raw_obj)</div>
<div class="line"><a id="l01228" name="l01228"></a><span class="lineno"> 1228</span>{</div>
<div class="line"><a id="l01229" name="l01229"></a><span class="lineno"> 1229</span>    <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_store.html#a0e18c11acccd1aecb7c3ac0c87083196">rados</a>-&gt;<a class="code hl_function" href="class_r_g_w_rados.html#a0fab65f42ddb3061896a730a01881d43">obj_to_raw</a>(placement_rule, obj, raw_obj);</div>
<div class="line"><a id="l01230" name="l01230"></a><span class="lineno"> 1230</span>}</div>
</div>
<div class="line"><a id="l01231" name="l01231"></a><span class="lineno"> 1231</span> </div>
<div class="foldopen" id="foldopen01232" data-start="{" data-end="}">
<div class="line"><a id="l01232" name="l01232"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_store.html#aa277bbc6fcaf6ab83e7681a991c1b57c"> 1232</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aa277bbc6fcaf6ab83e7681a991c1b57c">RadosStore::get_raw_chunk_size</a>(<span class="keyword">const</span> DoutPrefixProvider* <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <span class="keyword">const</span> <a class="code hl_struct" href="structrgw__raw__obj.html">rgw_raw_obj</a>&amp; obj, uint64_t* chunk_size)</div>
<div class="line"><a id="l01233" name="l01233"></a><span class="lineno"> 1233</span>{</div>
<div class="line"><a id="l01234" name="l01234"></a><span class="lineno"> 1234</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_store.html#a0e18c11acccd1aecb7c3ac0c87083196">rados</a>-&gt;<a class="code hl_function" href="class_r_g_w_rados.html#a8c1e1eac63219baa722a928e2e98b9fd">get_max_chunk_size</a>(obj.<a class="code hl_variable" href="structrgw__raw__obj.html#a12e975f08450bf428fedb357f4ac8445">pool</a>, chunk_size, <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>);</div>
<div class="line"><a id="l01235" name="l01235"></a><span class="lineno"> 1235</span>}</div>
</div>
<div class="line"><a id="l01236" name="l01236"></a><span class="lineno"> 1236</span> </div>
<div class="foldopen" id="foldopen01237" data-start="{" data-end="}">
<div class="line"><a id="l01237" name="l01237"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_store.html#a8062e3c09097a5fa16e3efae1ff7d843"> 1237</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#a8062e3c09097a5fa16e3efae1ff7d843">RadosStore::log_usage</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, map&lt;rgw_user_bucket, RGWUsageBatch&gt;&amp; usage_info)</div>
<div class="line"><a id="l01238" name="l01238"></a><span class="lineno"> 1238</span>{</div>
<div class="line"><a id="l01239" name="l01239"></a><span class="lineno"> 1239</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_store.html#a0e18c11acccd1aecb7c3ac0c87083196">rados</a>-&gt;<a class="code hl_function" href="class_r_g_w_rados.html#abe87a9d8e37865ef56eacaf5b3a5db3f">log_usage</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, usage_info);</div>
<div class="line"><a id="l01240" name="l01240"></a><span class="lineno"> 1240</span>}</div>
</div>
<div class="line"><a id="l01241" name="l01241"></a><span class="lineno"> 1241</span> </div>
<div class="foldopen" id="foldopen01242" data-start="{" data-end="}">
<div class="line"><a id="l01242" name="l01242"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_store.html#ab79b1634fc6913447f6c5e6f6c0ef3fd"> 1242</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#ab79b1634fc6913447f6c5e6f6c0ef3fd">RadosStore::log_op</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, std::string&amp; oid, bufferlist&amp; bl)</div>
<div class="line"><a id="l01243" name="l01243"></a><span class="lineno"> 1243</span>{</div>
<div class="line"><a id="l01244" name="l01244"></a><span class="lineno"> 1244</span>  <a class="code hl_struct" href="structrgw__raw__obj.html">rgw_raw_obj</a> obj(<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#abe4f0602b771d5549a02c0a326d6a832">svc</a>()-&gt;<a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_store.html#a0a94e58a4595ab519b4c3f89d33419fe">zone</a>-&gt;get_zone_params().log_pool, oid);</div>
<div class="line"><a id="l01245" name="l01245"></a><span class="lineno"> 1245</span> </div>
<div class="line"><a id="l01246" name="l01246"></a><span class="lineno"> 1246</span>  <span class="keywordtype">int</span> ret = <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_store.html#a0e18c11acccd1aecb7c3ac0c87083196">rados</a>-&gt;<a class="code hl_function" href="class_r_g_w_rados.html#a4abbdfd958f02e94adafc481564119b8">append_async</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, obj, bl.length(), bl);</div>
<div class="line"><a id="l01247" name="l01247"></a><span class="lineno"> 1247</span>  <span class="keywordflow">if</span> (ret == -ENOENT) {</div>
<div class="line"><a id="l01248" name="l01248"></a><span class="lineno"> 1248</span>    ret = <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_store.html#a0e18c11acccd1aecb7c3ac0c87083196">rados</a>-&gt;<a class="code hl_function" href="class_r_g_w_rados.html#a4765edbfe58a5f132640b6106bcb94af">create_pool</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#abe4f0602b771d5549a02c0a326d6a832">svc</a>()-&gt;<a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_store.html#a0a94e58a4595ab519b4c3f89d33419fe">zone</a>-&gt;get_zone_params().log_pool);</div>
<div class="line"><a id="l01249" name="l01249"></a><span class="lineno"> 1249</span>    <span class="keywordflow">if</span> (ret &lt; 0)</div>
<div class="line"><a id="l01250" name="l01250"></a><span class="lineno"> 1250</span>      <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l01251" name="l01251"></a><span class="lineno"> 1251</span>    <span class="comment">// retry</span></div>
<div class="line"><a id="l01252" name="l01252"></a><span class="lineno"> 1252</span>    ret = <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_store.html#a0e18c11acccd1aecb7c3ac0c87083196">rados</a>-&gt;<a class="code hl_function" href="class_r_g_w_rados.html#a4abbdfd958f02e94adafc481564119b8">append_async</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, obj, bl.length(), bl);</div>
<div class="line"><a id="l01253" name="l01253"></a><span class="lineno"> 1253</span>  }</div>
<div class="line"><a id="l01254" name="l01254"></a><span class="lineno"> 1254</span> </div>
<div class="line"><a id="l01255" name="l01255"></a><span class="lineno"> 1255</span>  <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l01256" name="l01256"></a><span class="lineno"> 1256</span>}</div>
</div>
<div class="line"><a id="l01257" name="l01257"></a><span class="lineno"> 1257</span> </div>
<div class="foldopen" id="foldopen01258" data-start="{" data-end="}">
<div class="line"><a id="l01258" name="l01258"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_store.html#ad0ef21b328aec586b348aebca716241e"> 1258</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#ad0ef21b328aec586b348aebca716241e">RadosStore::register_to_service_map</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <span class="keyword">const</span> std::string&amp; daemon_type,</div>
<div class="line"><a id="l01259" name="l01259"></a><span class="lineno"> 1259</span>                       <span class="keyword">const</span> map&lt;std::string, std::string&gt;&amp; meta)</div>
<div class="line"><a id="l01260" name="l01260"></a><span class="lineno"> 1260</span>{</div>
<div class="line"><a id="l01261" name="l01261"></a><span class="lineno"> 1261</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_store.html#a0e18c11acccd1aecb7c3ac0c87083196">rados</a>-&gt;<a class="code hl_function" href="class_r_g_w_rados.html#a1bb9dabb53a12a4b86323db810409296">register_to_service_map</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, daemon_type, meta);</div>
<div class="line"><a id="l01262" name="l01262"></a><span class="lineno"> 1262</span>}</div>
</div>
<div class="line"><a id="l01263" name="l01263"></a><span class="lineno"> 1263</span> </div>
<div class="foldopen" id="foldopen01264" data-start="{" data-end="}">
<div class="line"><a id="l01264" name="l01264"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_store.html#aa30185d20bf77ed7537ca77a5970d743"> 1264</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aa30185d20bf77ed7537ca77a5970d743">RadosStore::get_quota</a>(<a class="code hl_struct" href="struct_r_g_w_quota_info.html">RGWQuotaInfo</a>&amp; bucket_quota, <a class="code hl_struct" href="struct_r_g_w_quota_info.html">RGWQuotaInfo</a>&amp; user_quota)</div>
<div class="line"><a id="l01265" name="l01265"></a><span class="lineno"> 1265</span>{</div>
<div class="line"><a id="l01266" name="l01266"></a><span class="lineno"> 1266</span>    bucket_quota = <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#abe4f0602b771d5549a02c0a326d6a832">svc</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_services.html#ab9e7426047e0672e9d3f16cbe2f059a1">quota</a>-&gt;<a class="code hl_function" href="class_r_g_w_s_i___quota.html#afb0cfe91c734250baaa5aa6f207e5f66">get_bucket_quota</a>();</div>
<div class="line"><a id="l01267" name="l01267"></a><span class="lineno"> 1267</span>    user_quota = <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#abe4f0602b771d5549a02c0a326d6a832">svc</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_services.html#ab9e7426047e0672e9d3f16cbe2f059a1">quota</a>-&gt;<a class="code hl_function" href="class_r_g_w_s_i___quota.html#a814081473864c87188f2154725df58f1">get_user_quota</a>();</div>
<div class="line"><a id="l01268" name="l01268"></a><span class="lineno"> 1268</span>}</div>
</div>
<div class="line"><a id="l01269" name="l01269"></a><span class="lineno"> 1269</span> </div>
<div class="foldopen" id="foldopen01270" data-start="{" data-end="}">
<div class="line"><a id="l01270" name="l01270"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_store.html#a2dc975e5914a06fe4aa17dc2f047105a"> 1270</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#a2dc975e5914a06fe4aa17dc2f047105a">RadosStore::get_ratelimit</a>(<a class="code hl_struct" href="struct_r_g_w_rate_limit_info.html">RGWRateLimitInfo</a>&amp; bucket_ratelimit, <a class="code hl_struct" href="struct_r_g_w_rate_limit_info.html">RGWRateLimitInfo</a>&amp; user_ratelimit, <a class="code hl_struct" href="struct_r_g_w_rate_limit_info.html">RGWRateLimitInfo</a>&amp; anon_ratelimit)</div>
<div class="line"><a id="l01271" name="l01271"></a><span class="lineno"> 1271</span>{</div>
<div class="line"><a id="l01272" name="l01272"></a><span class="lineno"> 1272</span>  bucket_ratelimit = <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#abe4f0602b771d5549a02c0a326d6a832">svc</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_services.html#a6a82305adde4d9b9667690ed2059a394">zone</a>-&gt;<a class="code hl_function" href="class_r_g_w_s_i___zone.html#a8c6009ccc34b8ab0b0632232e30bc8dd">get_current_period</a>().<a class="code hl_function" href="class_r_g_w_period.html#a879883842711f1053e06f46610e23b94">get_config</a>().<a class="code hl_variable" href="struct_r_g_w_period_config.html#a128354bfe22b568e806308aeb4c97318">bucket_ratelimit</a>;</div>
<div class="line"><a id="l01273" name="l01273"></a><span class="lineno"> 1273</span>  user_ratelimit = <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#abe4f0602b771d5549a02c0a326d6a832">svc</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_services.html#a6a82305adde4d9b9667690ed2059a394">zone</a>-&gt;<a class="code hl_function" href="class_r_g_w_s_i___zone.html#a8c6009ccc34b8ab0b0632232e30bc8dd">get_current_period</a>().<a class="code hl_function" href="class_r_g_w_period.html#a879883842711f1053e06f46610e23b94">get_config</a>().<a class="code hl_variable" href="struct_r_g_w_period_config.html#a0a88bf0485fd37baf40f6dc7d7e3ec40">user_ratelimit</a>;</div>
<div class="line"><a id="l01274" name="l01274"></a><span class="lineno"> 1274</span>  anon_ratelimit = <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#abe4f0602b771d5549a02c0a326d6a832">svc</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_services.html#a6a82305adde4d9b9667690ed2059a394">zone</a>-&gt;<a class="code hl_function" href="class_r_g_w_s_i___zone.html#a8c6009ccc34b8ab0b0632232e30bc8dd">get_current_period</a>().<a class="code hl_function" href="class_r_g_w_period.html#a879883842711f1053e06f46610e23b94">get_config</a>().<a class="code hl_variable" href="struct_r_g_w_period_config.html#a1f8dfa16ce942937ff864ca28243f511">anon_ratelimit</a>;</div>
<div class="line"><a id="l01275" name="l01275"></a><span class="lineno"> 1275</span>}</div>
</div>
<div class="line"><a id="l01276" name="l01276"></a><span class="lineno"> 1276</span> </div>
<div class="foldopen" id="foldopen01277" data-start="{" data-end="}">
<div class="line"><a id="l01277" name="l01277"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_store.html#adfd33e0d00335a0b7bdd95ca844f2c16"> 1277</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#adfd33e0d00335a0b7bdd95ca844f2c16">RadosStore::set_buckets_enabled</a>(<span class="keyword">const</span> DoutPrefixProvider* <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, vector&lt;rgw_bucket&gt;&amp; buckets, <span class="keywordtype">bool</span> enabled)</div>
<div class="line"><a id="l01278" name="l01278"></a><span class="lineno"> 1278</span>{</div>
<div class="line"><a id="l01279" name="l01279"></a><span class="lineno"> 1279</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_store.html#a0e18c11acccd1aecb7c3ac0c87083196">rados</a>-&gt;<a class="code hl_function" href="class_r_g_w_rados.html#aa5274d07a594767da50a8136c565fe36">set_buckets_enabled</a>(buckets, enabled, <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>);</div>
<div class="line"><a id="l01280" name="l01280"></a><span class="lineno"> 1280</span>}</div>
</div>
<div class="line"><a id="l01281" name="l01281"></a><span class="lineno"> 1281</span> </div>
<div class="foldopen" id="foldopen01282" data-start="{" data-end="}">
<div class="line"><a id="l01282" name="l01282"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_store.html#a2baab075558b74ebeb4ebba1892dbbc0"> 1282</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#a2baab075558b74ebeb4ebba1892dbbc0">RadosStore::get_sync_policy_handler</a>(<span class="keyword">const</span> DoutPrefixProvider* <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>,</div>
<div class="line"><a id="l01283" name="l01283"></a><span class="lineno"> 1283</span>                       std::optional&lt;rgw_zone_id&gt; zone,</div>
<div class="line"><a id="l01284" name="l01284"></a><span class="lineno"> 1284</span>                       std::optional&lt;rgw_bucket&gt; bucket,</div>
<div class="line"><a id="l01285" name="l01285"></a><span class="lineno"> 1285</span>                       <a class="code hl_typedef" href="rgw__sal_8h.html#a34a498a236dfdf1358ada02a62afc853">RGWBucketSyncPolicyHandlerRef</a>* phandler,</div>
<div class="line"><a id="l01286" name="l01286"></a><span class="lineno"> 1286</span>                       optional_yield y)</div>
<div class="line"><a id="l01287" name="l01287"></a><span class="lineno"> 1287</span>{</div>
<div class="line"><a id="l01288" name="l01288"></a><span class="lineno"> 1288</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#ab6a306bab7ce6cc5da2f287d4d9f11e0">ctl</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_ctl.html#aad9554920ed5b4cc9b75de55bb1af061">bucket</a>-&gt;<a class="code hl_function" href="class_r_g_w_bucket_ctl.html#afc598f8b541c77ea48f2f389a0369cd9">get_sync_policy_handler</a>(<a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_store.html#a0a94e58a4595ab519b4c3f89d33419fe">zone</a>, bucket, phandler, y, <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>);</div>
<div class="line"><a id="l01289" name="l01289"></a><span class="lineno"> 1289</span>}</div>
</div>
<div class="line"><a id="l01290" name="l01290"></a><span class="lineno"> 1290</span> </div>
<div class="foldopen" id="foldopen01291" data-start="{" data-end="}">
<div class="line"><a id="l01291" name="l01291"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_store.html#ade4d26c308a858dd3b239718759b67ca"> 1291</a></span><a class="code hl_class" href="class_r_g_w_data_sync_status_manager.html">RGWDataSyncStatusManager</a>* <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#ade4d26c308a858dd3b239718759b67ca">RadosStore::get_data_sync_manager</a>(<span class="keyword">const</span> <a class="code hl_struct" href="structrgw__zone__id.html">rgw_zone_id</a>&amp; source_zone)</div>
<div class="line"><a id="l01292" name="l01292"></a><span class="lineno"> 1292</span>{</div>
<div class="line"><a id="l01293" name="l01293"></a><span class="lineno"> 1293</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_store.html#a0e18c11acccd1aecb7c3ac0c87083196">rados</a>-&gt;<a class="code hl_function" href="class_r_g_w_rados.html#a914979dccfecb62a2625194129913fff">get_data_sync_manager</a>(source_zone);</div>
<div class="line"><a id="l01294" name="l01294"></a><span class="lineno"> 1294</span>}</div>
</div>
<div class="line"><a id="l01295" name="l01295"></a><span class="lineno"> 1295</span> </div>
<div class="foldopen" id="foldopen01296" data-start="{" data-end="}">
<div class="line"><a id="l01296" name="l01296"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_store.html#a0ae68a4b35683c3590a4ff60b5e5ca62"> 1296</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#a0ae68a4b35683c3590a4ff60b5e5ca62">RadosStore::read_all_usage</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, uint64_t start_epoch, uint64_t end_epoch,</div>
<div class="line"><a id="l01297" name="l01297"></a><span class="lineno"> 1297</span>                  uint32_t max_entries, <span class="keywordtype">bool</span>* is_truncated,</div>
<div class="line"><a id="l01298" name="l01298"></a><span class="lineno"> 1298</span>                  <a class="code hl_struct" href="struct_r_g_w_usage_iter.html">RGWUsageIter</a>&amp; usage_iter,</div>
<div class="line"><a id="l01299" name="l01299"></a><span class="lineno"> 1299</span>                  map&lt;rgw_user_bucket, rgw_usage_log_entry&gt;&amp; <a class="code hl_function" href="rgw__admin_8cc.html#a2ef30c42cbc289d899a8be5d2d8f77d0">usage</a>)</div>
<div class="line"><a id="l01300" name="l01300"></a><span class="lineno"> 1300</span>{</div>
<div class="line"><a id="l01301" name="l01301"></a><span class="lineno"> 1301</span>  <a class="code hl_struct" href="structrgw__user.html">rgw_user</a> uid;</div>
<div class="line"><a id="l01302" name="l01302"></a><span class="lineno"> 1302</span>  std::string bucket_name;</div>
<div class="line"><a id="l01303" name="l01303"></a><span class="lineno"> 1303</span> </div>
<div class="line"><a id="l01304" name="l01304"></a><span class="lineno"> 1304</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_store.html#a0e18c11acccd1aecb7c3ac0c87083196">rados</a>-&gt;<a class="code hl_function" href="class_r_g_w_rados.html#a0784e49542fdeae286b67d4d6808dcc5">read_usage</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, uid, bucket_name, start_epoch, end_epoch, max_entries,</div>
<div class="line"><a id="l01305" name="l01305"></a><span class="lineno"> 1305</span>               is_truncated, usage_iter, <a class="code hl_function" href="rgw__admin_8cc.html#a2ef30c42cbc289d899a8be5d2d8f77d0">usage</a>);</div>
<div class="line"><a id="l01306" name="l01306"></a><span class="lineno"> 1306</span>}</div>
</div>
<div class="line"><a id="l01307" name="l01307"></a><span class="lineno"> 1307</span> </div>
<div class="foldopen" id="foldopen01308" data-start="{" data-end="}">
<div class="line"><a id="l01308" name="l01308"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_store.html#a70885a92c7e047b1979d72d2eb023c29"> 1308</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#a70885a92c7e047b1979d72d2eb023c29">RadosStore::trim_all_usage</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, uint64_t start_epoch, uint64_t end_epoch)</div>
<div class="line"><a id="l01309" name="l01309"></a><span class="lineno"> 1309</span>{</div>
<div class="line"><a id="l01310" name="l01310"></a><span class="lineno"> 1310</span>  <a class="code hl_struct" href="structrgw__user.html">rgw_user</a> uid;</div>
<div class="line"><a id="l01311" name="l01311"></a><span class="lineno"> 1311</span>  std::string bucket_name;</div>
<div class="line"><a id="l01312" name="l01312"></a><span class="lineno"> 1312</span> </div>
<div class="line"><a id="l01313" name="l01313"></a><span class="lineno"> 1313</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_store.html#a0e18c11acccd1aecb7c3ac0c87083196">rados</a>-&gt;<a class="code hl_function" href="class_r_g_w_rados.html#a18292448539dcec32dbf15d808818160">trim_usage</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, uid, bucket_name, start_epoch, end_epoch);</div>
<div class="line"><a id="l01314" name="l01314"></a><span class="lineno"> 1314</span>}</div>
</div>
<div class="line"><a id="l01315" name="l01315"></a><span class="lineno"> 1315</span> </div>
<div class="foldopen" id="foldopen01316" data-start="{" data-end="}">
<div class="line"><a id="l01316" name="l01316"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_store.html#aebb428ac0cd2597be4e9f418dfbd6af7"> 1316</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aebb428ac0cd2597be4e9f418dfbd6af7">RadosStore::get_config_key_val</a>(std::string name, bufferlist* bl)</div>
<div class="line"><a id="l01317" name="l01317"></a><span class="lineno"> 1317</span>{</div>
<div class="line"><a id="l01318" name="l01318"></a><span class="lineno"> 1318</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#abe4f0602b771d5549a02c0a326d6a832">svc</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_services.html#a4880d50a5a1372f33141215169595af1">config_key</a>-&gt;<a class="code hl_function" href="class_r_g_w_s_i___config_key.html#ab4e9e8ad2a9747b02507b26064d5179b">get</a>(name, <span class="keyword">true</span>, bl);</div>
<div class="line"><a id="l01319" name="l01319"></a><span class="lineno"> 1319</span>}</div>
</div>
<div class="line"><a id="l01320" name="l01320"></a><span class="lineno"> 1320</span> </div>
<div class="foldopen" id="foldopen01321" data-start="{" data-end="}">
<div class="line"><a id="l01321" name="l01321"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_store.html#adaba2e4f175ecbedae06942d454902e3"> 1321</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#adaba2e4f175ecbedae06942d454902e3">RadosStore::meta_list_keys_init</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <span class="keyword">const</span> std::string&amp; section, <span class="keyword">const</span> std::string&amp; marker, <span class="keywordtype">void</span>** phandle)</div>
<div class="line"><a id="l01322" name="l01322"></a><span class="lineno"> 1322</span>{</div>
<div class="line"><a id="l01323" name="l01323"></a><span class="lineno"> 1323</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#ab6a306bab7ce6cc5da2f287d4d9f11e0">ctl</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_ctl.html#a3a85ab7df88989bf4aacfed141fa0caa">meta</a>.<a class="code hl_variable" href="struct_r_g_w_ctl_1_1__meta.html#a5d6c7b64d613d277a0960a99f98fc24c">mgr</a>-&gt;<a class="code hl_function" href="class_r_g_w_metadata_manager.html#a94f8cf34ad7d7bfb6e99a20eee381cb5">list_keys_init</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, section, marker, phandle);</div>
<div class="line"><a id="l01324" name="l01324"></a><span class="lineno"> 1324</span>}</div>
</div>
<div class="line"><a id="l01325" name="l01325"></a><span class="lineno"> 1325</span> </div>
<div class="foldopen" id="foldopen01326" data-start="{" data-end="}">
<div class="line"><a id="l01326" name="l01326"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_store.html#ae38caba515a3cd4e832d38abc483c39b"> 1326</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#ae38caba515a3cd4e832d38abc483c39b">RadosStore::meta_list_keys_next</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <span class="keywordtype">void</span>* handle, <span class="keywordtype">int</span> max, list&lt;std::string&gt;&amp; keys, <span class="keywordtype">bool</span>* truncated)</div>
<div class="line"><a id="l01327" name="l01327"></a><span class="lineno"> 1327</span>{</div>
<div class="line"><a id="l01328" name="l01328"></a><span class="lineno"> 1328</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#ab6a306bab7ce6cc5da2f287d4d9f11e0">ctl</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_ctl.html#a3a85ab7df88989bf4aacfed141fa0caa">meta</a>.<a class="code hl_variable" href="struct_r_g_w_ctl_1_1__meta.html#a5d6c7b64d613d277a0960a99f98fc24c">mgr</a>-&gt;<a class="code hl_function" href="class_r_g_w_metadata_manager.html#acc29dd4e5961fe0d523310ea4c1eea4a">list_keys_next</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, handle, max, keys, truncated);</div>
<div class="line"><a id="l01329" name="l01329"></a><span class="lineno"> 1329</span>}</div>
</div>
<div class="line"><a id="l01330" name="l01330"></a><span class="lineno"> 1330</span> </div>
<div class="foldopen" id="foldopen01331" data-start="{" data-end="}">
<div class="line"><a id="l01331" name="l01331"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_store.html#a454921a5423feb7113efae24cb9bc0ee"> 1331</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#a454921a5423feb7113efae24cb9bc0ee">RadosStore::meta_list_keys_complete</a>(<span class="keywordtype">void</span>* handle)</div>
<div class="line"><a id="l01332" name="l01332"></a><span class="lineno"> 1332</span>{</div>
<div class="line"><a id="l01333" name="l01333"></a><span class="lineno"> 1333</span>  <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#ab6a306bab7ce6cc5da2f287d4d9f11e0">ctl</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_ctl.html#a3a85ab7df88989bf4aacfed141fa0caa">meta</a>.<a class="code hl_variable" href="struct_r_g_w_ctl_1_1__meta.html#a5d6c7b64d613d277a0960a99f98fc24c">mgr</a>-&gt;<a class="code hl_function" href="class_r_g_w_metadata_manager.html#a757181d77c553ec4f79e4ec3c128f7f5">list_keys_complete</a>(handle);</div>
<div class="line"><a id="l01334" name="l01334"></a><span class="lineno"> 1334</span>}</div>
</div>
<div class="line"><a id="l01335" name="l01335"></a><span class="lineno"> 1335</span> </div>
<div class="foldopen" id="foldopen01336" data-start="{" data-end="}">
<div class="line"><a id="l01336" name="l01336"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_store.html#a7edc6b0819463ad7a21f6699cb95f786"> 1336</a></span>std::string <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#a7edc6b0819463ad7a21f6699cb95f786">RadosStore::meta_get_marker</a>(<span class="keywordtype">void</span>* handle)</div>
<div class="line"><a id="l01337" name="l01337"></a><span class="lineno"> 1337</span>{</div>
<div class="line"><a id="l01338" name="l01338"></a><span class="lineno"> 1338</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#ab6a306bab7ce6cc5da2f287d4d9f11e0">ctl</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_ctl.html#a3a85ab7df88989bf4aacfed141fa0caa">meta</a>.<a class="code hl_variable" href="struct_r_g_w_ctl_1_1__meta.html#a5d6c7b64d613d277a0960a99f98fc24c">mgr</a>-&gt;<a class="code hl_function" href="class_r_g_w_metadata_manager.html#a9274bb0330b4c57b5a40136ea529db33">get_marker</a>(handle);</div>
<div class="line"><a id="l01339" name="l01339"></a><span class="lineno"> 1339</span>}</div>
</div>
<div class="line"><a id="l01340" name="l01340"></a><span class="lineno"> 1340</span> </div>
<div class="foldopen" id="foldopen01341" data-start="{" data-end="}">
<div class="line"><a id="l01341" name="l01341"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_store.html#a6cad2c87e66ac3005269083c2ee6c98f"> 1341</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#a6cad2c87e66ac3005269083c2ee6c98f">RadosStore::meta_remove</a>(<span class="keyword">const</span> DoutPrefixProvider* <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, std::string&amp; metadata_key, optional_yield y)</div>
<div class="line"><a id="l01342" name="l01342"></a><span class="lineno"> 1342</span>{</div>
<div class="line"><a id="l01343" name="l01343"></a><span class="lineno"> 1343</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#ab6a306bab7ce6cc5da2f287d4d9f11e0">ctl</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_ctl.html#a3a85ab7df88989bf4aacfed141fa0caa">meta</a>.<a class="code hl_variable" href="struct_r_g_w_ctl_1_1__meta.html#a5d6c7b64d613d277a0960a99f98fc24c">mgr</a>-&gt;<a class="code hl_function" href="class_r_g_w_metadata_manager.html#a2696ed0a42286f559e89fd6f1e611812">remove</a>(metadata_key, y, <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>);</div>
<div class="line"><a id="l01344" name="l01344"></a><span class="lineno"> 1344</span>}</div>
</div>
<div class="line"><a id="l01345" name="l01345"></a><span class="lineno"> 1345</span> </div>
<div class="foldopen" id="foldopen01346" data-start="{" data-end="}">
<div class="line"><a id="l01346" name="l01346"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_store.html#a7ba4fba1ca24a05f3399396caa624242"> 1346</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#a7ba4fba1ca24a05f3399396caa624242">RadosStore::finalize</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l01347" name="l01347"></a><span class="lineno"> 1347</span>{</div>
<div class="line"><a id="l01348" name="l01348"></a><span class="lineno"> 1348</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_store.html#a0e18c11acccd1aecb7c3ac0c87083196">rados</a>)</div>
<div class="line"><a id="l01349" name="l01349"></a><span class="lineno"> 1349</span>    <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_store.html#a0e18c11acccd1aecb7c3ac0c87083196">rados</a>-&gt;<a class="code hl_function" href="class_r_g_w_rados.html#a8c60192c924847afb9965e429e48f9a9">finalize</a>();</div>
<div class="line"><a id="l01350" name="l01350"></a><span class="lineno"> 1350</span>}</div>
</div>
<div class="line"><a id="l01351" name="l01351"></a><span class="lineno"> 1351</span> </div>
<div class="foldopen" id="foldopen01352" data-start="{" data-end="}">
<div class="line"><a id="l01352" name="l01352"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_store.html#a63347cae5bf3bd0044c8ddc0b9edc87f"> 1352</a></span>std::unique_ptr&lt;LuaScriptManager&gt; <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#a63347cae5bf3bd0044c8ddc0b9edc87f">RadosStore::get_lua_script_manager</a>()</div>
<div class="line"><a id="l01353" name="l01353"></a><span class="lineno"> 1353</span>{</div>
<div class="line"><a id="l01354" name="l01354"></a><span class="lineno"> 1354</span>  <span class="keywordflow">return</span> std::make_unique&lt;RadosLuaScriptManager&gt;(<span class="keyword">this</span>);</div>
<div class="line"><a id="l01355" name="l01355"></a><span class="lineno"> 1355</span>}</div>
</div>
<div class="line"><a id="l01356" name="l01356"></a><span class="lineno"> 1356</span> </div>
<div class="foldopen" id="foldopen01357" data-start="{" data-end="}">
<div class="line"><a id="l01357" name="l01357"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_store.html#a4d411fd91c8582ec76b83d66a81edfe5"> 1357</a></span>std::unique_ptr&lt;RGWRole&gt; <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#a4d411fd91c8582ec76b83d66a81edfe5">RadosStore::get_role</a>(std::string name,</div>
<div class="line"><a id="l01358" name="l01358"></a><span class="lineno"> 1358</span>                          std::string tenant,</div>
<div class="line"><a id="l01359" name="l01359"></a><span class="lineno"> 1359</span>                          std::string path,</div>
<div class="line"><a id="l01360" name="l01360"></a><span class="lineno"> 1360</span>                          std::string trust_policy,</div>
<div class="line"><a id="l01361" name="l01361"></a><span class="lineno"> 1361</span>                          std::string max_session_duration_str,</div>
<div class="line"><a id="l01362" name="l01362"></a><span class="lineno"> 1362</span>                std::multimap&lt;std::string,std::string&gt; tags)</div>
<div class="line"><a id="l01363" name="l01363"></a><span class="lineno"> 1363</span>{</div>
<div class="line"><a id="l01364" name="l01364"></a><span class="lineno"> 1364</span>  <span class="keywordflow">return</span> std::make_unique&lt;RadosRole&gt;(<span class="keyword">this</span>, name, tenant, path, trust_policy, max_session_duration_str, tags);</div>
<div class="line"><a id="l01365" name="l01365"></a><span class="lineno"> 1365</span>}</div>
</div>
<div class="line"><a id="l01366" name="l01366"></a><span class="lineno"> 1366</span> </div>
<div class="foldopen" id="foldopen01367" data-start="{" data-end="}">
<div class="line"><a id="l01367" name="l01367"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_store.html#a44ca7890cf304efd1497933abaf45025"> 1367</a></span>std::unique_ptr&lt;RGWRole&gt; <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#a4d411fd91c8582ec76b83d66a81edfe5">RadosStore::get_role</a>(std::string <span class="keywordtype">id</span>)</div>
<div class="line"><a id="l01368" name="l01368"></a><span class="lineno"> 1368</span>{</div>
<div class="line"><a id="l01369" name="l01369"></a><span class="lineno"> 1369</span>  <span class="keywordflow">return</span> std::make_unique&lt;RadosRole&gt;(<span class="keyword">this</span>, <span class="keywordtype">id</span>);</div>
<div class="line"><a id="l01370" name="l01370"></a><span class="lineno"> 1370</span>}</div>
</div>
<div class="line"><a id="l01371" name="l01371"></a><span class="lineno"> 1371</span> </div>
<div class="foldopen" id="foldopen01372" data-start="{" data-end="}">
<div class="line"><a id="l01372" name="l01372"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_store.html#a27841dcaa44e14b6b9f8a10390a4dc52"> 1372</a></span>std::unique_ptr&lt;RGWRole&gt; <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#a4d411fd91c8582ec76b83d66a81edfe5">RadosStore::get_role</a>(<span class="keyword">const</span> <a class="code hl_struct" href="structrgw_1_1sal_1_1_r_g_w_role_info.html">RGWRoleInfo</a>&amp; info)</div>
<div class="line"><a id="l01373" name="l01373"></a><span class="lineno"> 1373</span>{</div>
<div class="line"><a id="l01374" name="l01374"></a><span class="lineno"> 1374</span>  <span class="keywordflow">return</span> std::make_unique&lt;RadosRole&gt;(<span class="keyword">this</span>, info);</div>
<div class="line"><a id="l01375" name="l01375"></a><span class="lineno"> 1375</span>}</div>
</div>
<div class="line"><a id="l01376" name="l01376"></a><span class="lineno"> 1376</span> </div>
<div class="foldopen" id="foldopen01377" data-start="{" data-end="}">
<div class="line"><a id="l01377" name="l01377"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_store.html#a9b3146e69638c07899f1848683da1566"> 1377</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#a9b3146e69638c07899f1848683da1566">RadosStore::get_roles</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>,</div>
<div class="line"><a id="l01378" name="l01378"></a><span class="lineno"> 1378</span>              optional_yield y,</div>
<div class="line"><a id="l01379" name="l01379"></a><span class="lineno"> 1379</span>              <span class="keyword">const</span> std::string&amp; path_prefix,</div>
<div class="line"><a id="l01380" name="l01380"></a><span class="lineno"> 1380</span>              <span class="keyword">const</span> std::string&amp; tenant,</div>
<div class="line"><a id="l01381" name="l01381"></a><span class="lineno"> 1381</span>              vector&lt;std::unique_ptr&lt;RGWRole&gt;&gt;&amp; roles)</div>
<div class="line"><a id="l01382" name="l01382"></a><span class="lineno"> 1382</span>{</div>
<div class="line"><a id="l01383" name="l01383"></a><span class="lineno"> 1383</span>  <span class="keyword">auto</span> pool = <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aaecd01256c4639f8b8c31231022baef0">get_zone</a>()-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_zone.html#aad5682df06309df9be7bc8fdab823b50">get_params</a>().<a class="code hl_variable" href="struct_r_g_w_zone_params.html#af144c01afe26899f178544900b1835be">roles_pool</a>;</div>
<div class="line"><a id="l01384" name="l01384"></a><span class="lineno"> 1384</span>  std::string prefix;</div>
<div class="line"><a id="l01385" name="l01385"></a><span class="lineno"> 1385</span> </div>
<div class="line"><a id="l01386" name="l01386"></a><span class="lineno"> 1386</span>  <span class="comment">// List all roles if path prefix is empty</span></div>
<div class="line"><a id="l01387" name="l01387"></a><span class="lineno"> 1387</span>  <span class="keywordflow">if</span> (! path_prefix.empty()) {</div>
<div class="line"><a id="l01388" name="l01388"></a><span class="lineno"> 1388</span>    prefix = tenant + <a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_role.html#a9378c47a66a57dfa50a64851c42f8e66">RGWRole::role_path_oid_prefix</a> + path_prefix;</div>
<div class="line"><a id="l01389" name="l01389"></a><span class="lineno"> 1389</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01390" name="l01390"></a><span class="lineno"> 1390</span>    prefix = tenant + <a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_role.html#a9378c47a66a57dfa50a64851c42f8e66">RGWRole::role_path_oid_prefix</a>;</div>
<div class="line"><a id="l01391" name="l01391"></a><span class="lineno"> 1391</span>  }</div>
<div class="line"><a id="l01392" name="l01392"></a><span class="lineno"> 1392</span> </div>
<div class="line"><a id="l01393" name="l01393"></a><span class="lineno"> 1393</span>  <span class="comment">//Get the filtered objects</span></div>
<div class="line"><a id="l01394" name="l01394"></a><span class="lineno"> 1394</span>  list&lt;std::string&gt; result;</div>
<div class="line"><a id="l01395" name="l01395"></a><span class="lineno"> 1395</span>  <span class="keywordtype">bool</span> is_truncated;</div>
<div class="line"><a id="l01396" name="l01396"></a><span class="lineno"> 1396</span>  <a class="code hl_struct" href="struct_r_g_w_list_raw_objs_ctx.html">RGWListRawObjsCtx</a> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aabf846e99f9f01172f86ce5e7fb1ed5b">ctx</a>;</div>
<div class="line"><a id="l01397" name="l01397"></a><span class="lineno"> 1397</span>  <span class="keywordflow">do</span> {</div>
<div class="line"><a id="l01398" name="l01398"></a><span class="lineno"> 1398</span>    list&lt;std::string&gt; oids;</div>
<div class="line"><a id="l01399" name="l01399"></a><span class="lineno"> 1399</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a> = <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_store.html#a0e18c11acccd1aecb7c3ac0c87083196">rados</a>-&gt;<a class="code hl_function" href="class_r_g_w_rados.html#a3d2edb6fddca06f7bdf0ab61f1b8f49d">list_raw_objects</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, pool, prefix, 1000, <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aabf846e99f9f01172f86ce5e7fb1ed5b">ctx</a>, oids, &amp;is_truncated);</div>
<div class="line"><a id="l01400" name="l01400"></a><span class="lineno"> 1400</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a> &lt; 0) {</div>
<div class="line"><a id="l01401" name="l01401"></a><span class="lineno"> 1401</span>      ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 0) &lt;&lt; <span class="stringliteral">&quot;ERROR: listing filtered objects failed: &quot;</span></div>
<div class="line"><a id="l01402" name="l01402"></a><span class="lineno"> 1402</span>                  &lt;&lt; prefix &lt;&lt; <span class="stringliteral">&quot;: &quot;</span> &lt;&lt; cpp_strerror(-<a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a>) &lt;&lt; dendl;</div>
<div class="line"><a id="l01403" name="l01403"></a><span class="lineno"> 1403</span>      <span class="keywordflow">return</span> <a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a>;</div>
<div class="line"><a id="l01404" name="l01404"></a><span class="lineno"> 1404</span>    }</div>
<div class="line"><a id="l01405" name="l01405"></a><span class="lineno"> 1405</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; iter : oids) {</div>
<div class="line"><a id="l01406" name="l01406"></a><span class="lineno"> 1406</span>      result.push_back(iter.substr(<a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_role.html#a9378c47a66a57dfa50a64851c42f8e66">RGWRole::role_path_oid_prefix</a>.size()));</div>
<div class="line"><a id="l01407" name="l01407"></a><span class="lineno"> 1407</span>    }</div>
<div class="line"><a id="l01408" name="l01408"></a><span class="lineno"> 1408</span>  } <span class="keywordflow">while</span> (is_truncated);</div>
<div class="line"><a id="l01409" name="l01409"></a><span class="lineno"> 1409</span> </div>
<div class="line"><a id="l01410" name="l01410"></a><span class="lineno"> 1410</span>  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; it : result) {</div>
<div class="line"><a id="l01411" name="l01411"></a><span class="lineno"> 1411</span>    <span class="comment">//Find the role oid prefix from the end</span></div>
<div class="line"><a id="l01412" name="l01412"></a><span class="lineno"> 1412</span>    <span class="keywordtype">size_t</span> pos = it.rfind(<a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_role.html#a24224cecd76964a45b4cad9a7de87fe4">RGWRole::role_oid_prefix</a>);</div>
<div class="line"><a id="l01413" name="l01413"></a><span class="lineno"> 1413</span>    <span class="keywordflow">if</span> (pos == std::string::npos) {</div>
<div class="line"><a id="l01414" name="l01414"></a><span class="lineno"> 1414</span>        <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01415" name="l01415"></a><span class="lineno"> 1415</span>    }</div>
<div class="line"><a id="l01416" name="l01416"></a><span class="lineno"> 1416</span>    <span class="comment">// Split the result into path and info_oid + id</span></div>
<div class="line"><a id="l01417" name="l01417"></a><span class="lineno"> 1417</span>    std::string path = it.substr(0, pos);</div>
<div class="line"><a id="l01418" name="l01418"></a><span class="lineno"> 1418</span> </div>
<div class="line"><a id="l01419" name="l01419"></a><span class="lineno"> 1419</span>    <span class="comment">/*Make sure that prefix is part of path (False results could&#39;ve been returned)</span></div>
<div class="line"><a id="l01420" name="l01420"></a><span class="lineno"> 1420</span><span class="comment">      because of the role info oid + id appended to the path)*/</span></div>
<div class="line"><a id="l01421" name="l01421"></a><span class="lineno"> 1421</span>    <span class="keywordflow">if</span>(path_prefix.empty() || path.find(path_prefix) != std::string::npos) {</div>
<div class="line"><a id="l01422" name="l01422"></a><span class="lineno"> 1422</span>      <span class="comment">//Get id from info oid prefix + id</span></div>
<div class="line"><a id="l01423" name="l01423"></a><span class="lineno"> 1423</span>      std::string <span class="keywordtype">id</span> = it.substr(pos + <a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_role.html#a24224cecd76964a45b4cad9a7de87fe4">RGWRole::role_oid_prefix</a>.length());</div>
<div class="line"><a id="l01424" name="l01424"></a><span class="lineno"> 1424</span> </div>
<div class="line"><a id="l01425" name="l01425"></a><span class="lineno"> 1425</span>      std::unique_ptr&lt;rgw::sal::RGWRole&gt; role = <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#a4d411fd91c8582ec76b83d66a81edfe5">get_role</a>(<span class="keywordtype">id</span>);</div>
<div class="line"><a id="l01426" name="l01426"></a><span class="lineno"> 1426</span>      <span class="keywordtype">int</span> ret = role-&gt;read_info(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, y);</div>
<div class="line"><a id="l01427" name="l01427"></a><span class="lineno"> 1427</span>      <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line"><a id="l01428" name="l01428"></a><span class="lineno"> 1428</span>        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l01429" name="l01429"></a><span class="lineno"> 1429</span>      }</div>
<div class="line"><a id="l01430" name="l01430"></a><span class="lineno"> 1430</span>      roles.push_back(std::move(role));</div>
<div class="line"><a id="l01431" name="l01431"></a><span class="lineno"> 1431</span>    }</div>
<div class="line"><a id="l01432" name="l01432"></a><span class="lineno"> 1432</span>  }</div>
<div class="line"><a id="l01433" name="l01433"></a><span class="lineno"> 1433</span> </div>
<div class="line"><a id="l01434" name="l01434"></a><span class="lineno"> 1434</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l01435" name="l01435"></a><span class="lineno"> 1435</span>}</div>
</div>
<div class="line"><a id="l01436" name="l01436"></a><span class="lineno"> 1436</span> </div>
<div class="foldopen" id="foldopen01437" data-start="{" data-end="}">
<div class="line"><a id="l01437" name="l01437"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_store.html#abba3b20934b96a3f7c568e6b9cd76812"> 1437</a></span>std::unique_ptr&lt;RGWOIDCProvider&gt; <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#abba3b20934b96a3f7c568e6b9cd76812">RadosStore::get_oidc_provider</a>()</div>
<div class="line"><a id="l01438" name="l01438"></a><span class="lineno"> 1438</span>{</div>
<div class="line"><a id="l01439" name="l01439"></a><span class="lineno"> 1439</span>  <span class="keywordflow">return</span> std::make_unique&lt;RadosOIDCProvider&gt;(<span class="keyword">this</span>);</div>
<div class="line"><a id="l01440" name="l01440"></a><span class="lineno"> 1440</span>}</div>
</div>
<div class="line"><a id="l01441" name="l01441"></a><span class="lineno"> 1441</span> </div>
<div class="foldopen" id="foldopen01442" data-start="{" data-end="}">
<div class="line"><a id="l01442" name="l01442"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_store.html#a508eb022ccef2c7f5ac74e8857e59611"> 1442</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#a508eb022ccef2c7f5ac74e8857e59611">RadosStore::get_oidc_providers</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>,</div>
<div class="line"><a id="l01443" name="l01443"></a><span class="lineno"> 1443</span>                   <span class="keyword">const</span> std::string&amp; tenant,</div>
<div class="line"><a id="l01444" name="l01444"></a><span class="lineno"> 1444</span>                   vector&lt;std::unique_ptr&lt;RGWOIDCProvider&gt;&gt;&amp; providers)</div>
<div class="line"><a id="l01445" name="l01445"></a><span class="lineno"> 1445</span>{</div>
<div class="line"><a id="l01446" name="l01446"></a><span class="lineno"> 1446</span>  std::string prefix = tenant + <a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_o_i_d_c_provider.html#a19b8a0dafdaca5f190afe53d7d25d9d1">RGWOIDCProvider::oidc_url_oid_prefix</a>;</div>
<div class="line"><a id="l01447" name="l01447"></a><span class="lineno"> 1447</span>  <span class="keyword">auto</span> pool = <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_store.html#a0a94e58a4595ab519b4c3f89d33419fe">zone</a>.<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_zone.html#ab9e8f505a92222feb546dad06e728289">get_params</a>().<a class="code hl_variable" href="struct_r_g_w_zone_params.html#a8fdd09f89ee348eabcca31eb520024ee">oidc_pool</a>;</div>
<div class="line"><a id="l01448" name="l01448"></a><span class="lineno"> 1448</span>  <span class="keyword">auto</span> obj_ctx = <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#abe4f0602b771d5549a02c0a326d6a832">svc</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_services.html#a742bbed66b1688310eeb8c0b692bf6b9">sysobj</a>-&gt;<a class="code hl_function" href="class_r_g_w_s_i___sys_obj.html#a42dbd3046b9d94873446090556f05e63">init_obj_ctx</a>();</div>
<div class="line"><a id="l01449" name="l01449"></a><span class="lineno"> 1449</span> </div>
<div class="line"><a id="l01450" name="l01450"></a><span class="lineno"> 1450</span>  <span class="comment">//Get the filtered objects</span></div>
<div class="line"><a id="l01451" name="l01451"></a><span class="lineno"> 1451</span>  list&lt;std::string&gt; result;</div>
<div class="line"><a id="l01452" name="l01452"></a><span class="lineno"> 1452</span>  <span class="keywordtype">bool</span> is_truncated;</div>
<div class="line"><a id="l01453" name="l01453"></a><span class="lineno"> 1453</span>  <a class="code hl_struct" href="struct_r_g_w_list_raw_objs_ctx.html">RGWListRawObjsCtx</a> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aabf846e99f9f01172f86ce5e7fb1ed5b">ctx</a>;</div>
<div class="line"><a id="l01454" name="l01454"></a><span class="lineno"> 1454</span>  <span class="keywordflow">do</span> {</div>
<div class="line"><a id="l01455" name="l01455"></a><span class="lineno"> 1455</span>    list&lt;std::string&gt; oids;</div>
<div class="line"><a id="l01456" name="l01456"></a><span class="lineno"> 1456</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a> = <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_store.html#a0e18c11acccd1aecb7c3ac0c87083196">rados</a>-&gt;<a class="code hl_function" href="class_r_g_w_rados.html#a3d2edb6fddca06f7bdf0ab61f1b8f49d">list_raw_objects</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, pool, prefix, 1000, <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aabf846e99f9f01172f86ce5e7fb1ed5b">ctx</a>, oids, &amp;is_truncated);</div>
<div class="line"><a id="l01457" name="l01457"></a><span class="lineno"> 1457</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a> &lt; 0) {</div>
<div class="line"><a id="l01458" name="l01458"></a><span class="lineno"> 1458</span>      ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 0) &lt;&lt; <span class="stringliteral">&quot;ERROR: listing filtered objects failed: OIDC pool: &quot;</span></div>
<div class="line"><a id="l01459" name="l01459"></a><span class="lineno"> 1459</span>                  &lt;&lt; pool.name &lt;&lt; <span class="stringliteral">&quot;: &quot;</span> &lt;&lt; prefix &lt;&lt; <span class="stringliteral">&quot;: &quot;</span> &lt;&lt; cpp_strerror(-<a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a>) &lt;&lt; dendl;</div>
<div class="line"><a id="l01460" name="l01460"></a><span class="lineno"> 1460</span>      <span class="keywordflow">return</span> <a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a>;</div>
<div class="line"><a id="l01461" name="l01461"></a><span class="lineno"> 1461</span>    }</div>
<div class="line"><a id="l01462" name="l01462"></a><span class="lineno"> 1462</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; iter : oids) {</div>
<div class="line"><a id="l01463" name="l01463"></a><span class="lineno"> 1463</span>      std::unique_ptr&lt;rgw::sal::RGWOIDCProvider&gt; provider = <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#abba3b20934b96a3f7c568e6b9cd76812">get_oidc_provider</a>();</div>
<div class="line"><a id="l01464" name="l01464"></a><span class="lineno"> 1464</span>      bufferlist bl;</div>
<div class="line"><a id="l01465" name="l01465"></a><span class="lineno"> 1465</span> </div>
<div class="line"><a id="l01466" name="l01466"></a><span class="lineno"> 1466</span>      <a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a> = <a class="code hl_function" href="rgw__tools_8cc.html#a3e647ae97c113ee3ad07bad363e640b6">rgw_get_system_obj</a>(obj_ctx, pool, iter, bl, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, null_yield, <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>);</div>
<div class="line"><a id="l01467" name="l01467"></a><span class="lineno"> 1467</span>      <span class="keywordflow">if</span> (<a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a> &lt; 0) {</div>
<div class="line"><a id="l01468" name="l01468"></a><span class="lineno"> 1468</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a>;</div>
<div class="line"><a id="l01469" name="l01469"></a><span class="lineno"> 1469</span>      }</div>
<div class="line"><a id="l01470" name="l01470"></a><span class="lineno"> 1470</span> </div>
<div class="line"><a id="l01471" name="l01471"></a><span class="lineno"> 1471</span>      <span class="keywordflow">try</span> {</div>
<div class="line"><a id="l01472" name="l01472"></a><span class="lineno"> 1472</span>        <span class="keyword">using </span>ceph::decode;</div>
<div class="line"><a id="l01473" name="l01473"></a><span class="lineno"> 1473</span>        <span class="keyword">auto</span> iter = bl.cbegin();</div>
<div class="line"><a id="l01474" name="l01474"></a><span class="lineno"> 1474</span>        <a class="code hl_function" href="namespacergw.html#a49e77e75ed539fdbde0dcc092bb76467">decode</a>(*provider, iter);</div>
<div class="line"><a id="l01475" name="l01475"></a><span class="lineno"> 1475</span>      } <span class="keywordflow">catch</span> (buffer::error&amp; err) {</div>
<div class="line"><a id="l01476" name="l01476"></a><span class="lineno"> 1476</span>        ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 0) &lt;&lt; <span class="stringliteral">&quot;ERROR: failed to decode oidc provider info from pool: &quot;</span></div>
<div class="line"><a id="l01477" name="l01477"></a><span class="lineno"> 1477</span>      &lt;&lt; pool.name &lt;&lt; <span class="stringliteral">&quot;: &quot;</span> &lt;&lt; iter &lt;&lt; dendl;</div>
<div class="line"><a id="l01478" name="l01478"></a><span class="lineno"> 1478</span>        <span class="keywordflow">return</span> -EIO;</div>
<div class="line"><a id="l01479" name="l01479"></a><span class="lineno"> 1479</span>      }</div>
<div class="line"><a id="l01480" name="l01480"></a><span class="lineno"> 1480</span> </div>
<div class="line"><a id="l01481" name="l01481"></a><span class="lineno"> 1481</span>      providers.push_back(std::move(provider));</div>
<div class="line"><a id="l01482" name="l01482"></a><span class="lineno"> 1482</span>    }</div>
<div class="line"><a id="l01483" name="l01483"></a><span class="lineno"> 1483</span>  } <span class="keywordflow">while</span> (is_truncated);</div>
<div class="line"><a id="l01484" name="l01484"></a><span class="lineno"> 1484</span> </div>
<div class="line"><a id="l01485" name="l01485"></a><span class="lineno"> 1485</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l01486" name="l01486"></a><span class="lineno"> 1486</span>}</div>
</div>
<div class="line"><a id="l01487" name="l01487"></a><span class="lineno"> 1487</span> </div>
<div class="foldopen" id="foldopen01488" data-start="{" data-end="}">
<div class="line"><a id="l01488" name="l01488"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_store.html#a931c7759b4a6be98b4173d56e32e4937"> 1488</a></span>std::unique_ptr&lt;Writer&gt; <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#a931c7759b4a6be98b4173d56e32e4937">RadosStore::get_append_writer</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>,</div>
<div class="line"><a id="l01489" name="l01489"></a><span class="lineno"> 1489</span>                  optional_yield y,</div>
<div class="line"><a id="l01490" name="l01490"></a><span class="lineno"> 1490</span>                  std::unique_ptr&lt;rgw::sal::Object&gt; _head_obj,</div>
<div class="line"><a id="l01491" name="l01491"></a><span class="lineno"> 1491</span>                  <span class="keyword">const</span> <a class="code hl_struct" href="structrgw__user.html">rgw_user</a>&amp; owner, <a class="code hl_class" href="class_r_g_w_object_ctx.html">RGWObjectCtx</a>&amp; obj_ctx,</div>
<div class="line"><a id="l01492" name="l01492"></a><span class="lineno"> 1492</span>                  <span class="keyword">const</span> <a class="code hl_struct" href="structrgw__placement__rule.html">rgw_placement_rule</a> *ptail_placement_rule,</div>
<div class="line"><a id="l01493" name="l01493"></a><span class="lineno"> 1493</span>                  <span class="keyword">const</span> std::string&amp; unique_tag,</div>
<div class="line"><a id="l01494" name="l01494"></a><span class="lineno"> 1494</span>                  uint64_t position,</div>
<div class="line"><a id="l01495" name="l01495"></a><span class="lineno"> 1495</span>                  uint64_t *cur_accounted_size)</div>
<div class="line"><a id="l01496" name="l01496"></a><span class="lineno"> 1496</span>{</div>
<div class="line"><a id="l01497" name="l01497"></a><span class="lineno"> 1497</span>  <span class="keyword">auto</span> <a class="code hl_variable" href="rgw__aio_8cc.html#ad8d5da794a93e87014771f5742ca6c71">aio</a> = <a class="code hl_function" href="namespacergw.html#aa241d4c3eac6710432bb13c80ab112e3">rgw::make_throttle</a>(<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aabf846e99f9f01172f86ce5e7fb1ed5b">ctx</a>()-&gt;_conf-&gt;rgw_put_obj_min_window_size, y);</div>
<div class="line"><a id="l01498" name="l01498"></a><span class="lineno"> 1498</span>  <span class="keywordflow">return</span> std::make_unique&lt;RadosAppendWriter&gt;(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, y,</div>
<div class="line"><a id="l01499" name="l01499"></a><span class="lineno"> 1499</span>                 std::move(_head_obj),</div>
<div class="line"><a id="l01500" name="l01500"></a><span class="lineno"> 1500</span>                 <span class="keyword">this</span>, std::move(<a class="code hl_variable" href="rgw__aio_8cc.html#ad8d5da794a93e87014771f5742ca6c71">aio</a>), owner, obj_ctx,</div>
<div class="line"><a id="l01501" name="l01501"></a><span class="lineno"> 1501</span>                 ptail_placement_rule,</div>
<div class="line"><a id="l01502" name="l01502"></a><span class="lineno"> 1502</span>                 unique_tag, position,</div>
<div class="line"><a id="l01503" name="l01503"></a><span class="lineno"> 1503</span>                 cur_accounted_size);</div>
<div class="line"><a id="l01504" name="l01504"></a><span class="lineno"> 1504</span>}</div>
</div>
<div class="line"><a id="l01505" name="l01505"></a><span class="lineno"> 1505</span> </div>
<div class="foldopen" id="foldopen01506" data-start="{" data-end="}">
<div class="line"><a id="l01506" name="l01506"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_store.html#a22821494bff388cd1c454246c224547a"> 1506</a></span>std::unique_ptr&lt;Writer&gt; <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#a22821494bff388cd1c454246c224547a">RadosStore::get_atomic_writer</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>,</div>
<div class="line"><a id="l01507" name="l01507"></a><span class="lineno"> 1507</span>                  optional_yield y,</div>
<div class="line"><a id="l01508" name="l01508"></a><span class="lineno"> 1508</span>                  std::unique_ptr&lt;rgw::sal::Object&gt; _head_obj,</div>
<div class="line"><a id="l01509" name="l01509"></a><span class="lineno"> 1509</span>                  <span class="keyword">const</span> <a class="code hl_struct" href="structrgw__user.html">rgw_user</a>&amp; owner, <a class="code hl_class" href="class_r_g_w_object_ctx.html">RGWObjectCtx</a>&amp; obj_ctx,</div>
<div class="line"><a id="l01510" name="l01510"></a><span class="lineno"> 1510</span>                  <span class="keyword">const</span> <a class="code hl_struct" href="structrgw__placement__rule.html">rgw_placement_rule</a> *ptail_placement_rule,</div>
<div class="line"><a id="l01511" name="l01511"></a><span class="lineno"> 1511</span>                  uint64_t olh_epoch,</div>
<div class="line"><a id="l01512" name="l01512"></a><span class="lineno"> 1512</span>                  <span class="keyword">const</span> std::string&amp; unique_tag)</div>
<div class="line"><a id="l01513" name="l01513"></a><span class="lineno"> 1513</span>{</div>
<div class="line"><a id="l01514" name="l01514"></a><span class="lineno"> 1514</span>  <span class="keyword">auto</span> <a class="code hl_variable" href="rgw__aio_8cc.html#ad8d5da794a93e87014771f5742ca6c71">aio</a> = <a class="code hl_function" href="namespacergw.html#aa241d4c3eac6710432bb13c80ab112e3">rgw::make_throttle</a>(<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aabf846e99f9f01172f86ce5e7fb1ed5b">ctx</a>()-&gt;_conf-&gt;rgw_put_obj_min_window_size, y);</div>
<div class="line"><a id="l01515" name="l01515"></a><span class="lineno"> 1515</span>  <span class="keywordflow">return</span> std::make_unique&lt;RadosAtomicWriter&gt;(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, y,</div>
<div class="line"><a id="l01516" name="l01516"></a><span class="lineno"> 1516</span>                 std::move(_head_obj),</div>
<div class="line"><a id="l01517" name="l01517"></a><span class="lineno"> 1517</span>                 <span class="keyword">this</span>, std::move(<a class="code hl_variable" href="rgw__aio_8cc.html#ad8d5da794a93e87014771f5742ca6c71">aio</a>), owner, obj_ctx,</div>
<div class="line"><a id="l01518" name="l01518"></a><span class="lineno"> 1518</span>                 ptail_placement_rule,</div>
<div class="line"><a id="l01519" name="l01519"></a><span class="lineno"> 1519</span>                 olh_epoch, unique_tag);</div>
<div class="line"><a id="l01520" name="l01520"></a><span class="lineno"> 1520</span>}</div>
</div>
<div class="line"><a id="l01521" name="l01521"></a><span class="lineno"> 1521</span> </div>
<div class="foldopen" id="foldopen01522" data-start="{" data-end="}">
<div class="line"><a id="l01522" name="l01522"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_store.html#a0c7516e851fd0fd9c15db0af8ea2635c"> 1522</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#a0c7516e851fd0fd9c15db0af8ea2635c">RadosStore::get_obj_head_ioctx</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <span class="keyword">const</span> <a class="code hl_struct" href="struct_r_g_w_bucket_info.html">RGWBucketInfo</a>&amp; bucket_info, <span class="keyword">const</span> <a class="code hl_struct" href="structrgw__obj.html">rgw_obj</a>&amp; obj, librados::IoCtx* ioctx)</div>
<div class="line"><a id="l01523" name="l01523"></a><span class="lineno"> 1523</span>{</div>
<div class="line"><a id="l01524" name="l01524"></a><span class="lineno"> 1524</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_store.html#a0e18c11acccd1aecb7c3ac0c87083196">rados</a>-&gt;<a class="code hl_function" href="class_r_g_w_rados.html#a270242938692a80a723599cd4c39e1c3">get_obj_head_ioctx</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, bucket_info, obj, ioctx);</div>
<div class="line"><a id="l01525" name="l01525"></a><span class="lineno"> 1525</span>}</div>
</div>
<div class="line"><a id="l01526" name="l01526"></a><span class="lineno"> 1526</span> </div>
<div class="line"><a id="l01527" name="l01527"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_object.html#accaee46dbf8be74393bd87f9fb3c7ee5"> 1527</a></span><a class="code hl_function" href="classrgw_1_1sal_1_1_rados_object.html#accaee46dbf8be74393bd87f9fb3c7ee5">RadosObject::~RadosObject</a>() {}</div>
<div class="line"><a id="l01528" name="l01528"></a><span class="lineno"> 1528</span> </div>
<div class="foldopen" id="foldopen01529" data-start="{" data-end="}">
<div class="line"><a id="l01529" name="l01529"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_object.html#a586566eb809c7249b5b8ebfff7d40132"> 1529</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_object.html#a586566eb809c7249b5b8ebfff7d40132">RadosObject::get_obj_state</a>(<span class="keyword">const</span> DoutPrefixProvider* <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_class" href="class_r_g_w_object_ctx.html">RGWObjectCtx</a>* rctx, <a class="code hl_struct" href="struct_r_g_w_obj_state.html">RGWObjState</a> **state, optional_yield y, <span class="keywordtype">bool</span> follow_olh)</div>
<div class="line"><a id="l01530" name="l01530"></a><span class="lineno"> 1530</span>{</div>
<div class="line"><a id="l01531" name="l01531"></a><span class="lineno"> 1531</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_object.html#abf23dd6aa5878ba92af569a0a7c5c5c0">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aca5c28bc0f22f3f963d0475b594350e1">getRados</a>()-&gt;<a class="code hl_function" href="class_r_g_w_rados.html#af9d762ec48a77cd4658eb103533ef720">get_obj_state</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, rctx, <a class="code hl_variable" href="classrgw_1_1sal_1_1_object.html#a52293de292e4be4ee0d7d33e92212409">bucket</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_bucket.html#a1e64259203d2710c33c5a979721c19ee">get_info</a>(), <a class="code hl_function" href="classrgw_1_1sal_1_1_object.html#a770aa088f13a4a4063055cc423de4478">get_obj</a>(), state, follow_olh, y);</div>
<div class="line"><a id="l01532" name="l01532"></a><span class="lineno"> 1532</span>}</div>
</div>
<div class="line"><a id="l01533" name="l01533"></a><span class="lineno"> 1533</span> </div>
<div class="foldopen" id="foldopen01534" data-start="{" data-end="}">
<div class="line"><a id="l01534" name="l01534"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_object.html#a29091f3946d5615e3434955ff1e5a005"> 1534</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_object.html#a29091f3946d5615e3434955ff1e5a005">RadosObject::read_attrs</a>(<span class="keyword">const</span> DoutPrefixProvider* <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_struct" href="struct_r_g_w_rados_1_1_object_1_1_read.html">RGWRados::Object::Read</a> &amp;read_op, optional_yield y, <a class="code hl_struct" href="structrgw__obj.html">rgw_obj</a>* target_obj)</div>
<div class="line"><a id="l01535" name="l01535"></a><span class="lineno"> 1535</span>{</div>
<div class="line"><a id="l01536" name="l01536"></a><span class="lineno"> 1536</span>  read_op.<a class="code hl_variable" href="struct_r_g_w_rados_1_1_object_1_1_read.html#aa0759ce61ea515754e1000756ebbee52">params</a>.<a class="code hl_variable" href="struct_r_g_w_rados_1_1_object_1_1_read_1_1_params.html#afa1ad90e23ecfabfaf7b2d6757669d57">attrs</a> = &amp;<a class="code hl_variable" href="classrgw_1_1sal_1_1_object.html#a89d6b720b87f91663d142ba7a6dce9ca">attrs</a>;</div>
<div class="line"><a id="l01537" name="l01537"></a><span class="lineno"> 1537</span>  read_op.<a class="code hl_variable" href="struct_r_g_w_rados_1_1_object_1_1_read.html#aa0759ce61ea515754e1000756ebbee52">params</a>.<a class="code hl_variable" href="struct_r_g_w_rados_1_1_object_1_1_read_1_1_params.html#ab94baf85f81c969f9b8e7fcf1b2a32ba">target_obj</a> = target_obj;</div>
<div class="line"><a id="l01538" name="l01538"></a><span class="lineno"> 1538</span>  read_op.<a class="code hl_variable" href="struct_r_g_w_rados_1_1_object_1_1_read.html#aa0759ce61ea515754e1000756ebbee52">params</a>.<a class="code hl_variable" href="struct_r_g_w_rados_1_1_object_1_1_read_1_1_params.html#a1bd216c75efbabda3f356e3d84b7c347">obj_size</a> = &amp;<a class="code hl_variable" href="classrgw_1_1sal_1_1_object.html#a593cfbcc3ce7ccf3e46f43fd94f1c1ee">obj_size</a>;</div>
<div class="line"><a id="l01539" name="l01539"></a><span class="lineno"> 1539</span>  read_op.<a class="code hl_variable" href="struct_r_g_w_rados_1_1_object_1_1_read.html#aa0759ce61ea515754e1000756ebbee52">params</a>.<a class="code hl_variable" href="struct_r_g_w_rados_1_1_object_1_1_read_1_1_params.html#a634175d942b803125bb64fc09abe2b4c">lastmod</a> = &amp;<a class="code hl_variable" href="classrgw_1_1sal_1_1_object.html#aa3e4aa8f5ea263bfd0913ff8e2e47551">mtime</a>;</div>
<div class="line"><a id="l01540" name="l01540"></a><span class="lineno"> 1540</span> </div>
<div class="line"><a id="l01541" name="l01541"></a><span class="lineno"> 1541</span>  <span class="keywordflow">return</span> read_op.<a class="code hl_function" href="struct_r_g_w_rados_1_1_object_1_1_read.html#acd75ba0d39fc7185e71f208aec5065f0">prepare</a>(y, <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>);</div>
<div class="line"><a id="l01542" name="l01542"></a><span class="lineno"> 1542</span>}</div>
</div>
<div class="line"><a id="l01543" name="l01543"></a><span class="lineno"> 1543</span> </div>
<div class="foldopen" id="foldopen01544" data-start="{" data-end="}">
<div class="line"><a id="l01544" name="l01544"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_object.html#aee26f8979cdc2417960dc016ea645307"> 1544</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_object.html#aee26f8979cdc2417960dc016ea645307">RadosObject::set_obj_attrs</a>(<span class="keyword">const</span> DoutPrefixProvider* <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_class" href="class_r_g_w_object_ctx.html">RGWObjectCtx</a>* rctx, <a class="code hl_typedef" href="group___r_g_w_s_a_l.html#gab1b58d5f8747844fae5ddfb48fadf7bc">Attrs</a>* setattrs, <a class="code hl_typedef" href="group___r_g_w_s_a_l.html#gab1b58d5f8747844fae5ddfb48fadf7bc">Attrs</a>* delattrs, optional_yield y, <a class="code hl_struct" href="structrgw__obj.html">rgw_obj</a>* target_obj)</div>
<div class="line"><a id="l01545" name="l01545"></a><span class="lineno"> 1545</span>{</div>
<div class="line"><a id="l01546" name="l01546"></a><span class="lineno"> 1546</span>  <a class="code hl_typedef" href="group___r_g_w_s_a_l.html#gab1b58d5f8747844fae5ddfb48fadf7bc">Attrs</a> <a class="code hl_function" href="classrgw_1_1sal_1_1_object.html#a1de58611e673ff81baa4bcf7493d1c02">empty</a>;</div>
<div class="line"><a id="l01547" name="l01547"></a><span class="lineno"> 1547</span>  <a class="code hl_struct" href="structrgw__obj.html">rgw_obj</a> target = <a class="code hl_function" href="classrgw_1_1sal_1_1_object.html#a770aa088f13a4a4063055cc423de4478">get_obj</a>();</div>
<div class="line"><a id="l01548" name="l01548"></a><span class="lineno"> 1548</span> </div>
<div class="line"><a id="l01549" name="l01549"></a><span class="lineno"> 1549</span>  <span class="keywordflow">if</span> (!target_obj)</div>
<div class="line"><a id="l01550" name="l01550"></a><span class="lineno"> 1550</span>    target_obj = &amp;target;</div>
<div class="line"><a id="l01551" name="l01551"></a><span class="lineno"> 1551</span> </div>
<div class="line"><a id="l01552" name="l01552"></a><span class="lineno"> 1552</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_object.html#abf23dd6aa5878ba92af569a0a7c5c5c0">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aca5c28bc0f22f3f963d0475b594350e1">getRados</a>()-&gt;<a class="code hl_function" href="class_r_g_w_rados.html#a3b51d79d4a900f4326fd06af5b8cc4e5">set_attrs</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, rctx,</div>
<div class="line"><a id="l01553" name="l01553"></a><span class="lineno"> 1553</span>            <a class="code hl_variable" href="classrgw_1_1sal_1_1_object.html#a52293de292e4be4ee0d7d33e92212409">bucket</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_bucket.html#a1e64259203d2710c33c5a979721c19ee">get_info</a>(),</div>
<div class="line"><a id="l01554" name="l01554"></a><span class="lineno"> 1554</span>            *target_obj,</div>
<div class="line"><a id="l01555" name="l01555"></a><span class="lineno"> 1555</span>            setattrs ? *setattrs : <a class="code hl_function" href="classrgw_1_1sal_1_1_object.html#a1de58611e673ff81baa4bcf7493d1c02">empty</a>,</div>
<div class="line"><a id="l01556" name="l01556"></a><span class="lineno"> 1556</span>            delattrs ? delattrs : <span class="keyword">nullptr</span>,</div>
<div class="line"><a id="l01557" name="l01557"></a><span class="lineno"> 1557</span>            y);</div>
<div class="line"><a id="l01558" name="l01558"></a><span class="lineno"> 1558</span>}</div>
</div>
<div class="line"><a id="l01559" name="l01559"></a><span class="lineno"> 1559</span> </div>
<div class="foldopen" id="foldopen01560" data-start="{" data-end="}">
<div class="line"><a id="l01560" name="l01560"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_object.html#a0fd59a0f2445863b8773b0a8efb47ffe"> 1560</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_object.html#a0fd59a0f2445863b8773b0a8efb47ffe">RadosObject::get_obj_attrs</a>(<a class="code hl_class" href="class_r_g_w_object_ctx.html">RGWObjectCtx</a>* rctx, optional_yield y, <span class="keyword">const</span> DoutPrefixProvider* <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_struct" href="structrgw__obj.html">rgw_obj</a>* target_obj)</div>
<div class="line"><a id="l01561" name="l01561"></a><span class="lineno"> 1561</span>{</div>
<div class="line"><a id="l01562" name="l01562"></a><span class="lineno"> 1562</span>  <a class="code hl_class" href="class_r_g_w_rados_1_1_object.html">RGWRados::Object</a> op_target(<a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_object.html#abf23dd6aa5878ba92af569a0a7c5c5c0">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aca5c28bc0f22f3f963d0475b594350e1">getRados</a>(), <a class="code hl_variable" href="classrgw_1_1sal_1_1_object.html#a52293de292e4be4ee0d7d33e92212409">bucket</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_bucket.html#a1e64259203d2710c33c5a979721c19ee">get_info</a>(), *rctx, <a class="code hl_function" href="classrgw_1_1sal_1_1_object.html#a770aa088f13a4a4063055cc423de4478">get_obj</a>());</div>
<div class="line"><a id="l01563" name="l01563"></a><span class="lineno"> 1563</span>  <a class="code hl_struct" href="struct_r_g_w_rados_1_1_object_1_1_read.html">RGWRados::Object::Read</a> read_op(&amp;op_target);</div>
<div class="line"><a id="l01564" name="l01564"></a><span class="lineno"> 1564</span> </div>
<div class="line"><a id="l01565" name="l01565"></a><span class="lineno"> 1565</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_object.html#a29091f3946d5615e3434955ff1e5a005">read_attrs</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, read_op, y, target_obj);</div>
<div class="line"><a id="l01566" name="l01566"></a><span class="lineno"> 1566</span>}</div>
</div>
<div class="line"><a id="l01567" name="l01567"></a><span class="lineno"> 1567</span> </div>
<div class="foldopen" id="foldopen01568" data-start="{" data-end="}">
<div class="line"><a id="l01568" name="l01568"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_object.html#a3d43d9111d2bb62a6cd056d91c3d65f4"> 1568</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_object.html#a3d43d9111d2bb62a6cd056d91c3d65f4">RadosObject::modify_obj_attrs</a>(<a class="code hl_class" href="class_r_g_w_object_ctx.html">RGWObjectCtx</a>* rctx, <span class="keyword">const</span> <span class="keywordtype">char</span>* attr_name, bufferlist&amp; attr_val, optional_yield y, <span class="keyword">const</span> DoutPrefixProvider* <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>)</div>
<div class="line"><a id="l01569" name="l01569"></a><span class="lineno"> 1569</span>{</div>
<div class="line"><a id="l01570" name="l01570"></a><span class="lineno"> 1570</span>  <a class="code hl_struct" href="structrgw__obj.html">rgw_obj</a> target = <a class="code hl_function" href="classrgw_1_1sal_1_1_object.html#a770aa088f13a4a4063055cc423de4478">get_obj</a>();</div>
<div class="line"><a id="l01571" name="l01571"></a><span class="lineno"> 1571</span>  <span class="keywordtype">int</span> <a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a> = <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_object.html#a0fd59a0f2445863b8773b0a8efb47ffe">get_obj_attrs</a>(rctx, y, <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, &amp;target);</div>
<div class="line"><a id="l01572" name="l01572"></a><span class="lineno"> 1572</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a> &lt; 0) {</div>
<div class="line"><a id="l01573" name="l01573"></a><span class="lineno"> 1573</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a>;</div>
<div class="line"><a id="l01574" name="l01574"></a><span class="lineno"> 1574</span>  }</div>
<div class="line"><a id="l01575" name="l01575"></a><span class="lineno"> 1575</span>  <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_object.html#afa39f991c176dd32de5018d2d07e258f">set_atomic</a>(rctx);</div>
<div class="line"><a id="l01576" name="l01576"></a><span class="lineno"> 1576</span>  <a class="code hl_variable" href="classrgw_1_1sal_1_1_object.html#a89d6b720b87f91663d142ba7a6dce9ca">attrs</a>[attr_name] = attr_val;</div>
<div class="line"><a id="l01577" name="l01577"></a><span class="lineno"> 1577</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_object.html#aee26f8979cdc2417960dc016ea645307">set_obj_attrs</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, rctx, &amp;<a class="code hl_variable" href="classrgw_1_1sal_1_1_object.html#a89d6b720b87f91663d142ba7a6dce9ca">attrs</a>, <span class="keyword">nullptr</span>, y, &amp;target);</div>
<div class="line"><a id="l01578" name="l01578"></a><span class="lineno"> 1578</span>}</div>
</div>
<div class="line"><a id="l01579" name="l01579"></a><span class="lineno"> 1579</span> </div>
<div class="foldopen" id="foldopen01580" data-start="{" data-end="}">
<div class="line"><a id="l01580" name="l01580"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_object.html#ae8437f6b12fd3ae2cfdd54b19edd504b"> 1580</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_object.html#ae8437f6b12fd3ae2cfdd54b19edd504b">RadosObject::delete_obj_attrs</a>(<span class="keyword">const</span> DoutPrefixProvider* <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_class" href="class_r_g_w_object_ctx.html">RGWObjectCtx</a>* rctx, <span class="keyword">const</span> <span class="keywordtype">char</span>* attr_name, optional_yield y)</div>
<div class="line"><a id="l01581" name="l01581"></a><span class="lineno"> 1581</span>{</div>
<div class="line"><a id="l01582" name="l01582"></a><span class="lineno"> 1582</span>  <a class="code hl_typedef" href="group___r_g_w_s_a_l.html#gab1b58d5f8747844fae5ddfb48fadf7bc">Attrs</a> rmattr;</div>
<div class="line"><a id="l01583" name="l01583"></a><span class="lineno"> 1583</span>  bufferlist bl;</div>
<div class="line"><a id="l01584" name="l01584"></a><span class="lineno"> 1584</span> </div>
<div class="line"><a id="l01585" name="l01585"></a><span class="lineno"> 1585</span>  <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_object.html#afa39f991c176dd32de5018d2d07e258f">set_atomic</a>(rctx);</div>
<div class="line"><a id="l01586" name="l01586"></a><span class="lineno"> 1586</span>  rmattr[attr_name] = bl;</div>
<div class="line"><a id="l01587" name="l01587"></a><span class="lineno"> 1587</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_object.html#aee26f8979cdc2417960dc016ea645307">set_obj_attrs</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, rctx, <span class="keyword">nullptr</span>, &amp;rmattr, y);</div>
<div class="line"><a id="l01588" name="l01588"></a><span class="lineno"> 1588</span>}</div>
</div>
<div class="line"><a id="l01589" name="l01589"></a><span class="lineno"> 1589</span> </div>
<div class="foldopen" id="foldopen01590" data-start="{" data-end="}">
<div class="line"><a id="l01590" name="l01590"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_object.html#ac9bdce3a677d9ca9a50672cf69d96410"> 1590</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_object.html#ac9bdce3a677d9ca9a50672cf69d96410">RadosObject::set_compressed</a>(<a class="code hl_class" href="class_r_g_w_object_ctx.html">RGWObjectCtx</a>* rctx) {</div>
<div class="line"><a id="l01591" name="l01591"></a><span class="lineno"> 1591</span>  <a class="code hl_struct" href="structrgw__obj.html">rgw_obj</a> obj = <a class="code hl_function" href="classrgw_1_1sal_1_1_object.html#a770aa088f13a4a4063055cc423de4478">get_obj</a>();</div>
<div class="line"><a id="l01592" name="l01592"></a><span class="lineno"> 1592</span>  <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_object.html#abf23dd6aa5878ba92af569a0a7c5c5c0">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aca5c28bc0f22f3f963d0475b594350e1">getRados</a>()-&gt;<a class="code hl_function" href="class_r_g_w_rados.html#af14b3c8e2acf744a5a95f22a1535070a">set_compressed</a>(rctx, obj);</div>
<div class="line"><a id="l01593" name="l01593"></a><span class="lineno"> 1593</span>}</div>
</div>
<div class="line"><a id="l01594" name="l01594"></a><span class="lineno"> 1594</span> </div>
<div class="foldopen" id="foldopen01595" data-start="{" data-end="}">
<div class="line"><a id="l01595" name="l01595"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_object.html#afa39f991c176dd32de5018d2d07e258f"> 1595</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_object.html#afa39f991c176dd32de5018d2d07e258f">RadosObject::set_atomic</a>(<a class="code hl_class" href="class_r_g_w_object_ctx.html">RGWObjectCtx</a>* rctx)<span class="keyword"> const</span></div>
<div class="line"><a id="l01596" name="l01596"></a><span class="lineno"> 1596</span><span class="keyword"></span>{</div>
<div class="line"><a id="l01597" name="l01597"></a><span class="lineno"> 1597</span>  <a class="code hl_struct" href="structrgw__obj.html">rgw_obj</a> obj = <a class="code hl_function" href="classrgw_1_1sal_1_1_object.html#a770aa088f13a4a4063055cc423de4478">get_obj</a>();</div>
<div class="line"><a id="l01598" name="l01598"></a><span class="lineno"> 1598</span>  <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_object.html#abf23dd6aa5878ba92af569a0a7c5c5c0">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aca5c28bc0f22f3f963d0475b594350e1">getRados</a>()-&gt;<a class="code hl_function" href="class_r_g_w_rados.html#a251034ea68698a2f3166b8a4471e2a73">set_atomic</a>(rctx, obj);</div>
<div class="line"><a id="l01599" name="l01599"></a><span class="lineno"> 1599</span>}</div>
</div>
<div class="line"><a id="l01600" name="l01600"></a><span class="lineno"> 1600</span> </div>
<div class="foldopen" id="foldopen01601" data-start="{" data-end="}">
<div class="line"><a id="l01601" name="l01601"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_object.html#afd31cf97f82943c0b42f345fbb9f9f9d"> 1601</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_object.html#afd31cf97f82943c0b42f345fbb9f9f9d">RadosObject::set_prefetch_data</a>(<a class="code hl_class" href="class_r_g_w_object_ctx.html">RGWObjectCtx</a>* rctx)</div>
<div class="line"><a id="l01602" name="l01602"></a><span class="lineno"> 1602</span>{</div>
<div class="line"><a id="l01603" name="l01603"></a><span class="lineno"> 1603</span>  <a class="code hl_struct" href="structrgw__obj.html">rgw_obj</a> obj = <a class="code hl_function" href="classrgw_1_1sal_1_1_object.html#a770aa088f13a4a4063055cc423de4478">get_obj</a>();</div>
<div class="line"><a id="l01604" name="l01604"></a><span class="lineno"> 1604</span>  <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_object.html#abf23dd6aa5878ba92af569a0a7c5c5c0">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aca5c28bc0f22f3f963d0475b594350e1">getRados</a>()-&gt;<a class="code hl_function" href="class_r_g_w_rados.html#a1c8c4c9b1621ba7b0eeb70eb93a9e3ba">set_prefetch_data</a>(rctx, obj);</div>
<div class="line"><a id="l01605" name="l01605"></a><span class="lineno"> 1605</span>}</div>
</div>
<div class="line"><a id="l01606" name="l01606"></a><span class="lineno"> 1606</span> </div>
<div class="foldopen" id="foldopen01607" data-start="{" data-end="}">
<div class="line"><a id="l01607" name="l01607"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_object.html#a8f6bd447317806dd0cab1d3f4bb8b289"> 1607</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_object.html#a8f6bd447317806dd0cab1d3f4bb8b289">RadosObject::is_expired</a>() {</div>
<div class="line"><a id="l01608" name="l01608"></a><span class="lineno"> 1608</span>  <span class="keyword">auto</span> iter = <a class="code hl_variable" href="classrgw_1_1sal_1_1_object.html#a89d6b720b87f91663d142ba7a6dce9ca">attrs</a>.find(<a class="code hl_define" href="rgw__common_8h.html#a5b5625986263eef4cf79a0efdcfae436">RGW_ATTR_DELETE_AT</a>);</div>
<div class="line"><a id="l01609" name="l01609"></a><span class="lineno"> 1609</span>  <span class="keywordflow">if</span> (iter != <a class="code hl_variable" href="classrgw_1_1sal_1_1_object.html#a89d6b720b87f91663d142ba7a6dce9ca">attrs</a>.end()) {</div>
<div class="line"><a id="l01610" name="l01610"></a><span class="lineno"> 1610</span>    utime_t delete_at;</div>
<div class="line"><a id="l01611" name="l01611"></a><span class="lineno"> 1611</span>    <span class="keywordflow">try</span> {</div>
<div class="line"><a id="l01612" name="l01612"></a><span class="lineno"> 1612</span>      <span class="keyword">auto</span> bufit = iter-&gt;second.cbegin();</div>
<div class="line"><a id="l01613" name="l01613"></a><span class="lineno"> 1613</span>      <a class="code hl_function" href="namespacergw.html#a49e77e75ed539fdbde0dcc092bb76467">decode</a>(delete_at, bufit);</div>
<div class="line"><a id="l01614" name="l01614"></a><span class="lineno"> 1614</span>    } <span class="keywordflow">catch</span> (buffer::error&amp; err) {</div>
<div class="line"><a id="l01615" name="l01615"></a><span class="lineno"> 1615</span>      ldout(<a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_object.html#abf23dd6aa5878ba92af569a0a7c5c5c0">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aabf846e99f9f01172f86ce5e7fb1ed5b">ctx</a>(), 0) &lt;&lt; <span class="stringliteral">&quot;ERROR: &quot;</span> &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;: failed to decode &quot;</span> <a class="code hl_define" href="rgw__common_8h.html#a5b5625986263eef4cf79a0efdcfae436">RGW_ATTR_DELETE_AT</a> <span class="stringliteral">&quot; attr&quot;</span> &lt;&lt; dendl;</div>
<div class="line"><a id="l01616" name="l01616"></a><span class="lineno"> 1616</span>      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01617" name="l01617"></a><span class="lineno"> 1617</span>    }</div>
<div class="line"><a id="l01618" name="l01618"></a><span class="lineno"> 1618</span> </div>
<div class="line"><a id="l01619" name="l01619"></a><span class="lineno"> 1619</span>    <span class="keywordflow">if</span> (delete_at &lt;= ceph_clock_now() &amp;&amp; !delete_at.is_zero()) {</div>
<div class="line"><a id="l01620" name="l01620"></a><span class="lineno"> 1620</span>      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01621" name="l01621"></a><span class="lineno"> 1621</span>    }</div>
<div class="line"><a id="l01622" name="l01622"></a><span class="lineno"> 1622</span>  }</div>
<div class="line"><a id="l01623" name="l01623"></a><span class="lineno"> 1623</span> </div>
<div class="line"><a id="l01624" name="l01624"></a><span class="lineno"> 1624</span>  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01625" name="l01625"></a><span class="lineno"> 1625</span>}</div>
</div>
<div class="line"><a id="l01626" name="l01626"></a><span class="lineno"> 1626</span> </div>
<div class="foldopen" id="foldopen01627" data-start="{" data-end="}">
<div class="line"><a id="l01627" name="l01627"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_object.html#acd4fede65a86f89d0170c22841075488"> 1627</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_object.html#acd4fede65a86f89d0170c22841075488">RadosObject::gen_rand_obj_instance_name</a>()</div>
<div class="line"><a id="l01628" name="l01628"></a><span class="lineno"> 1628</span>{</div>
<div class="line"><a id="l01629" name="l01629"></a><span class="lineno"> 1629</span>  <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_object.html#abf23dd6aa5878ba92af569a0a7c5c5c0">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aca5c28bc0f22f3f963d0475b594350e1">getRados</a>()-&gt;<a class="code hl_function" href="class_r_g_w_rados.html#a89bbb3c067fafd08c870e54665f620a0">gen_rand_obj_instance_name</a>(&amp;<a class="code hl_variable" href="classrgw_1_1sal_1_1_object.html#aed5de5f3bc91fd3fcc43be62e05dbed9">key</a>);</div>
<div class="line"><a id="l01630" name="l01630"></a><span class="lineno"> 1630</span>}</div>
</div>
<div class="line"><a id="l01631" name="l01631"></a><span class="lineno"> 1631</span> </div>
<div class="foldopen" id="foldopen01632" data-start="{" data-end="}">
<div class="line"><a id="l01632" name="l01632"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_object.html#aef2c725896367b2e9779f57cffd491fd"> 1632</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_object.html#aef2c725896367b2e9779f57cffd491fd">RadosObject::raw_obj_to_obj</a>(<span class="keyword">const</span> <a class="code hl_struct" href="structrgw__raw__obj.html">rgw_raw_obj</a>&amp; raw_obj)</div>
<div class="line"><a id="l01633" name="l01633"></a><span class="lineno"> 1633</span>{</div>
<div class="line"><a id="l01634" name="l01634"></a><span class="lineno"> 1634</span>  <a class="code hl_struct" href="structrgw__obj.html">rgw_obj</a> tobj = <a class="code hl_function" href="classrgw_1_1sal_1_1_object.html#a770aa088f13a4a4063055cc423de4478">get_obj</a>();</div>
<div class="line"><a id="l01635" name="l01635"></a><span class="lineno"> 1635</span>  <a class="code hl_function" href="class_r_g_w_s_i___tier___r_a_d_o_s.html#ae33206c29065e1071eed5378297296c6">RGWSI_Tier_RADOS::raw_obj_to_obj</a>(<a class="code hl_function" href="classrgw_1_1sal_1_1_object.html#a0cdac8c36c06ebf81fb580038205487f">get_bucket</a>()-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_object.html#af492ef7b108fe3b0045349261ba80c3c">get_key</a>(), raw_obj, &amp;tobj);</div>
<div class="line"><a id="l01636" name="l01636"></a><span class="lineno"> 1636</span>  <a class="code hl_function" href="classrgw_1_1sal_1_1_object.html#a24c2392bb4633eb38d09efd00b7f2a33">set_key</a>(tobj.<a class="code hl_variable" href="structrgw__obj.html#a72f701ee22f8eb3f3868d0aefb581249">key</a>);</div>
<div class="line"><a id="l01637" name="l01637"></a><span class="lineno"> 1637</span>}</div>
</div>
<div class="line"><a id="l01638" name="l01638"></a><span class="lineno"> 1638</span> </div>
<div class="foldopen" id="foldopen01639" data-start="{" data-end="}">
<div class="line"><a id="l01639" name="l01639"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_object.html#abecff7f76a642d4267d0241601f40950"> 1639</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_object.html#abecff7f76a642d4267d0241601f40950">RadosObject::get_raw_obj</a>(<a class="code hl_struct" href="structrgw__raw__obj.html">rgw_raw_obj</a>* raw_obj)</div>
<div class="line"><a id="l01640" name="l01640"></a><span class="lineno"> 1640</span>{</div>
<div class="line"><a id="l01641" name="l01641"></a><span class="lineno"> 1641</span>  <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_object.html#abf23dd6aa5878ba92af569a0a7c5c5c0">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aca5c28bc0f22f3f963d0475b594350e1">getRados</a>()-&gt;<a class="code hl_function" href="class_r_g_w_rados.html#a0fab65f42ddb3061896a730a01881d43">obj_to_raw</a>((<a class="code hl_variable" href="classrgw_1_1sal_1_1_object.html#a52293de292e4be4ee0d7d33e92212409">bucket</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_bucket.html#a1e64259203d2710c33c5a979721c19ee">get_info</a>()).placement_rule, <a class="code hl_function" href="classrgw_1_1sal_1_1_object.html#a770aa088f13a4a4063055cc423de4478">get_obj</a>(), raw_obj);</div>
<div class="line"><a id="l01642" name="l01642"></a><span class="lineno"> 1642</span>}</div>
</div>
<div class="line"><a id="l01643" name="l01643"></a><span class="lineno"> 1643</span> </div>
<div class="foldopen" id="foldopen01644" data-start="{" data-end="}">
<div class="line"><a id="l01644" name="l01644"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_object.html#acea67db971e06dc099d58c6a3e53cdc3"> 1644</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_object.html#acea67db971e06dc099d58c6a3e53cdc3">RadosObject::omap_get_vals</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <span class="keyword">const</span> std::string&amp; marker, uint64_t count,</div>
<div class="line"><a id="l01645" name="l01645"></a><span class="lineno"> 1645</span>                  std::map&lt;std::string, bufferlist&gt; *m,</div>
<div class="line"><a id="l01646" name="l01646"></a><span class="lineno"> 1646</span>                  <span class="keywordtype">bool</span>* pmore, optional_yield y)</div>
<div class="line"><a id="l01647" name="l01647"></a><span class="lineno"> 1647</span>{</div>
<div class="line"><a id="l01648" name="l01648"></a><span class="lineno"> 1648</span>  <span class="keyword">auto</span> obj_ctx = <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_object.html#abf23dd6aa5878ba92af569a0a7c5c5c0">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#abe4f0602b771d5549a02c0a326d6a832">svc</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_services.html#a742bbed66b1688310eeb8c0b692bf6b9">sysobj</a>-&gt;<a class="code hl_function" href="class_r_g_w_s_i___sys_obj.html#a42dbd3046b9d94873446090556f05e63">init_obj_ctx</a>();</div>
<div class="line"><a id="l01649" name="l01649"></a><span class="lineno"> 1649</span>  <a class="code hl_struct" href="structrgw__raw__obj.html">rgw_raw_obj</a> raw_obj;</div>
<div class="line"><a id="l01650" name="l01650"></a><span class="lineno"> 1650</span>  <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_object.html#abecff7f76a642d4267d0241601f40950">get_raw_obj</a>(&amp;raw_obj);</div>
<div class="line"><a id="l01651" name="l01651"></a><span class="lineno"> 1651</span>  <span class="keyword">auto</span> sysobj = obj_ctx.get_obj(raw_obj);</div>
<div class="line"><a id="l01652" name="l01652"></a><span class="lineno"> 1652</span> </div>
<div class="line"><a id="l01653" name="l01653"></a><span class="lineno"> 1653</span>  <span class="keywordflow">return</span> sysobj.omap().get_vals(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, marker, count, m, pmore, y);</div>
<div class="line"><a id="l01654" name="l01654"></a><span class="lineno"> 1654</span>}</div>
</div>
<div class="line"><a id="l01655" name="l01655"></a><span class="lineno"> 1655</span> </div>
<div class="foldopen" id="foldopen01656" data-start="{" data-end="}">
<div class="line"><a id="l01656" name="l01656"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_object.html#a8f2d296ee77950b96f51c572f174597f"> 1656</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_object.html#a8f2d296ee77950b96f51c572f174597f">RadosObject::omap_get_all</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, std::map&lt;std::string, bufferlist&gt; *m,</div>
<div class="line"><a id="l01657" name="l01657"></a><span class="lineno"> 1657</span>                 optional_yield y)</div>
<div class="line"><a id="l01658" name="l01658"></a><span class="lineno"> 1658</span>{</div>
<div class="line"><a id="l01659" name="l01659"></a><span class="lineno"> 1659</span>  <span class="keyword">auto</span> obj_ctx = <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_object.html#abf23dd6aa5878ba92af569a0a7c5c5c0">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#abe4f0602b771d5549a02c0a326d6a832">svc</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_services.html#a742bbed66b1688310eeb8c0b692bf6b9">sysobj</a>-&gt;<a class="code hl_function" href="class_r_g_w_s_i___sys_obj.html#a42dbd3046b9d94873446090556f05e63">init_obj_ctx</a>();</div>
<div class="line"><a id="l01660" name="l01660"></a><span class="lineno"> 1660</span>  <a class="code hl_struct" href="structrgw__raw__obj.html">rgw_raw_obj</a> raw_obj;</div>
<div class="line"><a id="l01661" name="l01661"></a><span class="lineno"> 1661</span>  <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_object.html#abecff7f76a642d4267d0241601f40950">get_raw_obj</a>(&amp;raw_obj);</div>
<div class="line"><a id="l01662" name="l01662"></a><span class="lineno"> 1662</span>  <span class="keyword">auto</span> sysobj = obj_ctx.get_obj(raw_obj);</div>
<div class="line"><a id="l01663" name="l01663"></a><span class="lineno"> 1663</span> </div>
<div class="line"><a id="l01664" name="l01664"></a><span class="lineno"> 1664</span>  <span class="keywordflow">return</span> sysobj.omap().get_all(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, m, y);</div>
<div class="line"><a id="l01665" name="l01665"></a><span class="lineno"> 1665</span>}</div>
</div>
<div class="line"><a id="l01666" name="l01666"></a><span class="lineno"> 1666</span> </div>
<div class="foldopen" id="foldopen01667" data-start="{" data-end="}">
<div class="line"><a id="l01667" name="l01667"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_object.html#aed46c22fb2d5fb44469093a7294a54e7"> 1667</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_object.html#aed46c22fb2d5fb44469093a7294a54e7">RadosObject::omap_get_vals_by_keys</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <span class="keyword">const</span> std::string&amp; oid,</div>
<div class="line"><a id="l01668" name="l01668"></a><span class="lineno"> 1668</span>                      <span class="keyword">const</span> std::set&lt;std::string&gt;&amp; keys,</div>
<div class="line"><a id="l01669" name="l01669"></a><span class="lineno"> 1669</span>                      <a class="code hl_typedef" href="group___r_g_w_s_a_l.html#gab1b58d5f8747844fae5ddfb48fadf7bc">Attrs</a>* vals)</div>
<div class="line"><a id="l01670" name="l01670"></a><span class="lineno"> 1670</span>{</div>
<div class="line"><a id="l01671" name="l01671"></a><span class="lineno"> 1671</span>  <span class="keywordtype">int</span> ret;</div>
<div class="line"><a id="l01672" name="l01672"></a><span class="lineno"> 1672</span>  <a class="code hl_struct" href="structrgw__raw__obj.html">rgw_raw_obj</a> head_obj;</div>
<div class="line"><a id="l01673" name="l01673"></a><span class="lineno"> 1673</span>  librados::IoCtx cur_ioctx;</div>
<div class="line"><a id="l01674" name="l01674"></a><span class="lineno"> 1674</span>  <a class="code hl_struct" href="structrgw__obj.html">rgw_obj</a> obj = <a class="code hl_function" href="classrgw_1_1sal_1_1_object.html#a770aa088f13a4a4063055cc423de4478">get_obj</a>();</div>
<div class="line"><a id="l01675" name="l01675"></a><span class="lineno"> 1675</span> </div>
<div class="line"><a id="l01676" name="l01676"></a><span class="lineno"> 1676</span>  <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_object.html#abf23dd6aa5878ba92af569a0a7c5c5c0">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aca5c28bc0f22f3f963d0475b594350e1">getRados</a>()-&gt;<a class="code hl_function" href="class_r_g_w_rados.html#a0fab65f42ddb3061896a730a01881d43">obj_to_raw</a>(<a class="code hl_variable" href="classrgw_1_1sal_1_1_object.html#a52293de292e4be4ee0d7d33e92212409">bucket</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_bucket.html#afce8c7c05e49c14921760bcf7fd00dc8">get_placement_rule</a>(), obj, &amp;head_obj);</div>
<div class="line"><a id="l01677" name="l01677"></a><span class="lineno"> 1677</span>  ret = <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_object.html#abf23dd6aa5878ba92af569a0a7c5c5c0">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#a0c7516e851fd0fd9c15db0af8ea2635c">get_obj_head_ioctx</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_variable" href="classrgw_1_1sal_1_1_object.html#a52293de292e4be4ee0d7d33e92212409">bucket</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_bucket.html#a1e64259203d2710c33c5a979721c19ee">get_info</a>(), obj, &amp;cur_ioctx);</div>
<div class="line"><a id="l01678" name="l01678"></a><span class="lineno"> 1678</span>  <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line"><a id="l01679" name="l01679"></a><span class="lineno"> 1679</span>    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l01680" name="l01680"></a><span class="lineno"> 1680</span>  }</div>
<div class="line"><a id="l01681" name="l01681"></a><span class="lineno"> 1681</span> </div>
<div class="line"><a id="l01682" name="l01682"></a><span class="lineno"> 1682</span>  <span class="keywordflow">return</span> cur_ioctx.omap_get_vals_by_keys(oid, keys, vals);</div>
<div class="line"><a id="l01683" name="l01683"></a><span class="lineno"> 1683</span>}</div>
</div>
<div class="line"><a id="l01684" name="l01684"></a><span class="lineno"> 1684</span> </div>
<div class="foldopen" id="foldopen01685" data-start="{" data-end="}">
<div class="line"><a id="l01685" name="l01685"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_object.html#a98509cb1a6c8638d9342142b85dab7ef"> 1685</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_object.html#a98509cb1a6c8638d9342142b85dab7ef">RadosObject::omap_set_val_by_key</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <span class="keyword">const</span> std::string&amp; key, bufferlist&amp; val,</div>
<div class="line"><a id="l01686" name="l01686"></a><span class="lineno"> 1686</span>                    <span class="keywordtype">bool</span> must_exist, optional_yield y)</div>
<div class="line"><a id="l01687" name="l01687"></a><span class="lineno"> 1687</span>{</div>
<div class="line"><a id="l01688" name="l01688"></a><span class="lineno"> 1688</span>  <a class="code hl_struct" href="structrgw__raw__obj.html">rgw_raw_obj</a> raw_meta_obj;</div>
<div class="line"><a id="l01689" name="l01689"></a><span class="lineno"> 1689</span>  <a class="code hl_struct" href="structrgw__obj.html">rgw_obj</a> obj = <a class="code hl_function" href="classrgw_1_1sal_1_1_object.html#a770aa088f13a4a4063055cc423de4478">get_obj</a>();</div>
<div class="line"><a id="l01690" name="l01690"></a><span class="lineno"> 1690</span> </div>
<div class="line"><a id="l01691" name="l01691"></a><span class="lineno"> 1691</span>  <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_object.html#abf23dd6aa5878ba92af569a0a7c5c5c0">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aca5c28bc0f22f3f963d0475b594350e1">getRados</a>()-&gt;<a class="code hl_function" href="class_r_g_w_rados.html#a0fab65f42ddb3061896a730a01881d43">obj_to_raw</a>(<a class="code hl_variable" href="classrgw_1_1sal_1_1_object.html#a52293de292e4be4ee0d7d33e92212409">bucket</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_bucket.html#afce8c7c05e49c14921760bcf7fd00dc8">get_placement_rule</a>(), obj, &amp;raw_meta_obj);</div>
<div class="line"><a id="l01692" name="l01692"></a><span class="lineno"> 1692</span> </div>
<div class="line"><a id="l01693" name="l01693"></a><span class="lineno"> 1693</span>  <span class="keyword">auto</span> obj_ctx = <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_object.html#abf23dd6aa5878ba92af569a0a7c5c5c0">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#abe4f0602b771d5549a02c0a326d6a832">svc</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_services.html#a742bbed66b1688310eeb8c0b692bf6b9">sysobj</a>-&gt;<a class="code hl_function" href="class_r_g_w_s_i___sys_obj.html#a42dbd3046b9d94873446090556f05e63">init_obj_ctx</a>();</div>
<div class="line"><a id="l01694" name="l01694"></a><span class="lineno"> 1694</span>  <span class="keyword">auto</span> sysobj = obj_ctx.<a class="code hl_function" href="class_r_g_w_sys_object_ctx.html#af7d781dbb202cbc5b5d510034a18e83a">get_obj</a>(raw_meta_obj);</div>
<div class="line"><a id="l01695" name="l01695"></a><span class="lineno"> 1695</span> </div>
<div class="line"><a id="l01696" name="l01696"></a><span class="lineno"> 1696</span>  <span class="keywordflow">return</span> sysobj.<a class="code hl_function" href="class_r_g_w_s_i___sys_obj_1_1_obj.html#a62a0d2cc8cce850e6be33b2e53390199">omap</a>().<a class="code hl_function" href="struct_r_g_w_s_i___sys_obj_1_1_obj_1_1_omap_op.html#a520353a2f168c59e239e1c4802247eb3">set_must_exist</a>(must_exist).<a class="code hl_function" href="struct_r_g_w_s_i___sys_obj_1_1_obj_1_1_omap_op.html#a466da94073ecd8cb17a7e5787f8a1328">set</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_variable" href="classrgw_1_1sal_1_1_object.html#aed5de5f3bc91fd3fcc43be62e05dbed9">key</a>, val, y);</div>
<div class="line"><a id="l01697" name="l01697"></a><span class="lineno"> 1697</span>}</div>
</div>
<div class="line"><a id="l01698" name="l01698"></a><span class="lineno"> 1698</span> </div>
<div class="foldopen" id="foldopen01699" data-start="{" data-end="}">
<div class="line"><a id="l01699" name="l01699"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_object.html#a6346b1f7936bfe5fbcee10a20096c35a"> 1699</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_object.html#a6346b1f7936bfe5fbcee10a20096c35a">RadosObject::chown</a>(<a class="code hl_class" href="classrgw_1_1sal_1_1_user.html">User</a>&amp; new_user, <span class="keyword">const</span> DoutPrefixProvider* <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, optional_yield y)</div>
<div class="line"><a id="l01700" name="l01700"></a><span class="lineno"> 1700</span>{</div>
<div class="line"><a id="l01701" name="l01701"></a><span class="lineno"> 1701</span>  <a class="code hl_class" href="class_r_g_w_object_ctx.html">RGWObjectCtx</a> obj_ctx(<a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_object.html#abf23dd6aa5878ba92af569a0a7c5c5c0">store</a>);</div>
<div class="line"><a id="l01702" name="l01702"></a><span class="lineno"> 1702</span>  <span class="keywordtype">int</span> <a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a> = <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_object.html#a0fd59a0f2445863b8773b0a8efb47ffe">get_obj_attrs</a>(&amp;obj_ctx, y, <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>);</div>
<div class="line"><a id="l01703" name="l01703"></a><span class="lineno"> 1703</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a> &lt; 0) {</div>
<div class="line"><a id="l01704" name="l01704"></a><span class="lineno"> 1704</span>    ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 0) &lt;&lt; <span class="stringliteral">&quot;ERROR: failed to read object attrs &quot;</span> &lt;&lt; <a class="code hl_function" href="classrgw_1_1sal_1_1_object.html#aa4a801a7e7dfbb29ccf622603dee6ae3">get_name</a>() &lt;&lt; cpp_strerror(-<a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a>) &lt;&lt; dendl;</div>
<div class="line"><a id="l01705" name="l01705"></a><span class="lineno"> 1705</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a>;</div>
<div class="line"><a id="l01706" name="l01706"></a><span class="lineno"> 1706</span>  }</div>
<div class="line"><a id="l01707" name="l01707"></a><span class="lineno"> 1707</span> </div>
<div class="line"><a id="l01708" name="l01708"></a><span class="lineno"> 1708</span>  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; aiter = <a class="code hl_function" href="classrgw_1_1sal_1_1_object.html#aa8e83e47dd8615028e1eec9d9d7f8ec4">get_attrs</a>().find(<a class="code hl_define" href="rgw__common_8h.html#ac9a37f7a4f4ad09bae48d3c752920758">RGW_ATTR_ACL</a>);</div>
<div class="line"><a id="l01709" name="l01709"></a><span class="lineno"> 1709</span>  <span class="keywordflow">if</span> (aiter == <a class="code hl_function" href="classrgw_1_1sal_1_1_object.html#aa8e83e47dd8615028e1eec9d9d7f8ec4">get_attrs</a>().end()) {</div>
<div class="line"><a id="l01710" name="l01710"></a><span class="lineno"> 1710</span>    ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 0) &lt;&lt; <span class="stringliteral">&quot;ERROR: no acls found for object &quot;</span> &lt;&lt; <a class="code hl_function" href="classrgw_1_1sal_1_1_object.html#aa4a801a7e7dfbb29ccf622603dee6ae3">get_name</a>() &lt;&lt; dendl;</div>
<div class="line"><a id="l01711" name="l01711"></a><span class="lineno"> 1711</span>    <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><a id="l01712" name="l01712"></a><span class="lineno"> 1712</span>  }</div>
<div class="line"><a id="l01713" name="l01713"></a><span class="lineno"> 1713</span> </div>
<div class="line"><a id="l01714" name="l01714"></a><span class="lineno"> 1714</span>  bufferlist&amp; bl = aiter-&gt;second;</div>
<div class="line"><a id="l01715" name="l01715"></a><span class="lineno"> 1715</span>  <a class="code hl_class" href="class_r_g_w_access_control_policy.html">RGWAccessControlPolicy</a> policy(<a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_object.html#abf23dd6aa5878ba92af569a0a7c5c5c0">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aabf846e99f9f01172f86ce5e7fb1ed5b">ctx</a>());</div>
<div class="line"><a id="l01716" name="l01716"></a><span class="lineno"> 1716</span>  <a class="code hl_class" href="class_a_c_l_owner.html">ACLOwner</a> owner;</div>
<div class="line"><a id="l01717" name="l01717"></a><span class="lineno"> 1717</span>  <span class="keyword">auto</span> bliter = bl.cbegin();</div>
<div class="line"><a id="l01718" name="l01718"></a><span class="lineno"> 1718</span>  <span class="keywordflow">try</span> {</div>
<div class="line"><a id="l01719" name="l01719"></a><span class="lineno"> 1719</span>    policy.<a class="code hl_function" href="class_r_g_w_access_control_policy.html#a0fa9952c93c911480e7428afd77bce88">decode</a>(bliter);</div>
<div class="line"><a id="l01720" name="l01720"></a><span class="lineno"> 1720</span>    owner = policy.<a class="code hl_function" href="class_r_g_w_access_control_policy.html#ac7be38fb3fa69a2ab41eed67a5ee4401">get_owner</a>();</div>
<div class="line"><a id="l01721" name="l01721"></a><span class="lineno"> 1721</span>  } <span class="keywordflow">catch</span> (buffer::error&amp; err) {</div>
<div class="line"><a id="l01722" name="l01722"></a><span class="lineno"> 1722</span>    ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 0) &lt;&lt; <span class="stringliteral">&quot;ERROR: decode policy failed&quot;</span> &lt;&lt; err.what()</div>
<div class="line"><a id="l01723" name="l01723"></a><span class="lineno"> 1723</span>      &lt;&lt; dendl;</div>
<div class="line"><a id="l01724" name="l01724"></a><span class="lineno"> 1724</span>    <span class="keywordflow">return</span> -EIO;</div>
<div class="line"><a id="l01725" name="l01725"></a><span class="lineno"> 1725</span>  }</div>
<div class="line"><a id="l01726" name="l01726"></a><span class="lineno"> 1726</span> </div>
<div class="line"><a id="l01727" name="l01727"></a><span class="lineno"> 1727</span>  <span class="comment">//Get the ACL from the policy</span></div>
<div class="line"><a id="l01728" name="l01728"></a><span class="lineno"> 1728</span>  <a class="code hl_class" href="class_r_g_w_access_control_list.html">RGWAccessControlList</a>&amp; acl = policy.<a class="code hl_function" href="class_r_g_w_access_control_policy.html#a9fa6936da8a5fcccadb72dad7c478eab">get_acl</a>();</div>
<div class="line"><a id="l01729" name="l01729"></a><span class="lineno"> 1729</span> </div>
<div class="line"><a id="l01730" name="l01730"></a><span class="lineno"> 1730</span>  <span class="comment">//Remove grant that is set to old owner</span></div>
<div class="line"><a id="l01731" name="l01731"></a><span class="lineno"> 1731</span>  acl.<a class="code hl_function" href="class_r_g_w_access_control_list.html#a5f8b38ad713643377bf8854f6cb80c05">remove_canon_user_grant</a>(owner.<a class="code hl_function" href="class_a_c_l_owner.html#ad784a6fdd9366a68b859f664486283fb">get_id</a>());</div>
<div class="line"><a id="l01732" name="l01732"></a><span class="lineno"> 1732</span> </div>
<div class="line"><a id="l01733" name="l01733"></a><span class="lineno"> 1733</span>  <span class="comment">//Create a grant and add grant</span></div>
<div class="line"><a id="l01734" name="l01734"></a><span class="lineno"> 1734</span>  <a class="code hl_class" href="class_a_c_l_grant.html">ACLGrant</a> grant;</div>
<div class="line"><a id="l01735" name="l01735"></a><span class="lineno"> 1735</span>  grant.<a class="code hl_function" href="class_a_c_l_grant.html#a2ae51a75b88fe129b8b8aaed810b240d">set_canon</a>(new_user.<a class="code hl_function" href="classrgw_1_1sal_1_1_user.html#a4f6322efe2b6c9c2780eb31cb3a5ca51">get_id</a>(), new_user.<a class="code hl_function" href="classrgw_1_1sal_1_1_user.html#a931e289c0a1e1744201c67b9806d0b0d">get_display_name</a>(), <a class="code hl_define" href="rgw__acl_8h.html#a2f73f019a3c8883ebb2732fdaf8f9811">RGW_PERM_FULL_CONTROL</a>);</div>
<div class="line"><a id="l01736" name="l01736"></a><span class="lineno"> 1736</span>  acl.<a class="code hl_function" href="class_r_g_w_access_control_list.html#a50e63ef1029c2cb0624bd109101268e4">add_grant</a>(&amp;grant);</div>
<div class="line"><a id="l01737" name="l01737"></a><span class="lineno"> 1737</span> </div>
<div class="line"><a id="l01738" name="l01738"></a><span class="lineno"> 1738</span>  <span class="comment">//Update the ACL owner to the new user</span></div>
<div class="line"><a id="l01739" name="l01739"></a><span class="lineno"> 1739</span>  owner.<a class="code hl_function" href="class_a_c_l_owner.html#af1bf8eb8a289cdf16e1a4f21636cfa7b">set_id</a>(new_user.<a class="code hl_function" href="classrgw_1_1sal_1_1_user.html#a4f6322efe2b6c9c2780eb31cb3a5ca51">get_id</a>());</div>
<div class="line"><a id="l01740" name="l01740"></a><span class="lineno"> 1740</span>  owner.<a class="code hl_function" href="class_a_c_l_owner.html#a97e7c93e1ffef805959cff4096f4e948">set_name</a>(new_user.<a class="code hl_function" href="classrgw_1_1sal_1_1_user.html#a931e289c0a1e1744201c67b9806d0b0d">get_display_name</a>());</div>
<div class="line"><a id="l01741" name="l01741"></a><span class="lineno"> 1741</span>  policy.<a class="code hl_function" href="class_r_g_w_access_control_policy.html#afee8b7f6ac3c554565c2c72f88158691">set_owner</a>(owner);</div>
<div class="line"><a id="l01742" name="l01742"></a><span class="lineno"> 1742</span> </div>
<div class="line"><a id="l01743" name="l01743"></a><span class="lineno"> 1743</span>  bl.clear();</div>
<div class="line"><a id="l01744" name="l01744"></a><span class="lineno"> 1744</span>  <a class="code hl_function" href="namespacergw.html#a34a5757756e9618325f611b073ccd448">encode</a>(policy, bl);</div>
<div class="line"><a id="l01745" name="l01745"></a><span class="lineno"> 1745</span> </div>
<div class="line"><a id="l01746" name="l01746"></a><span class="lineno"> 1746</span>  <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_object.html#afa39f991c176dd32de5018d2d07e258f">set_atomic</a>(&amp;obj_ctx);</div>
<div class="line"><a id="l01747" name="l01747"></a><span class="lineno"> 1747</span>  map&lt;string, bufferlist&gt; <a class="code hl_variable" href="classrgw_1_1sal_1_1_object.html#a89d6b720b87f91663d142ba7a6dce9ca">attrs</a>;</div>
<div class="line"><a id="l01748" name="l01748"></a><span class="lineno"> 1748</span>  <a class="code hl_variable" href="classrgw_1_1sal_1_1_object.html#a89d6b720b87f91663d142ba7a6dce9ca">attrs</a>[<a class="code hl_define" href="rgw__common_8h.html#ac9a37f7a4f4ad09bae48d3c752920758">RGW_ATTR_ACL</a>] = bl;</div>
<div class="line"><a id="l01749" name="l01749"></a><span class="lineno"> 1749</span>  <a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a> = <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_object.html#aee26f8979cdc2417960dc016ea645307">set_obj_attrs</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, &amp;obj_ctx, &amp;<a class="code hl_variable" href="classrgw_1_1sal_1_1_object.html#a89d6b720b87f91663d142ba7a6dce9ca">attrs</a>, <span class="keyword">nullptr</span>, y);</div>
<div class="line"><a id="l01750" name="l01750"></a><span class="lineno"> 1750</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a> &lt; 0) {</div>
<div class="line"><a id="l01751" name="l01751"></a><span class="lineno"> 1751</span>    ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 0) &lt;&lt; <span class="stringliteral">&quot;ERROR: modify attr failed &quot;</span> &lt;&lt; cpp_strerror(-<a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a>) &lt;&lt; dendl;</div>
<div class="line"><a id="l01752" name="l01752"></a><span class="lineno"> 1752</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a>;</div>
<div class="line"><a id="l01753" name="l01753"></a><span class="lineno"> 1753</span>  }</div>
<div class="line"><a id="l01754" name="l01754"></a><span class="lineno"> 1754</span> </div>
<div class="line"><a id="l01755" name="l01755"></a><span class="lineno"> 1755</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l01756" name="l01756"></a><span class="lineno"> 1756</span>}</div>
</div>
<div class="line"><a id="l01757" name="l01757"></a><span class="lineno"> 1757</span> </div>
<div class="foldopen" id="foldopen01758" data-start="{" data-end="}">
<div class="line"><a id="l01758" name="l01758"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_object.html#adcde0d3f9649697f0e85f814038a621a"> 1758</a></span><a class="code hl_struct" href="structrgw_1_1sal_1_1_m_p_serializer.html">MPSerializer</a>* <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_object.html#adcde0d3f9649697f0e85f814038a621a">RadosObject::get_serializer</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <span class="keyword">const</span> std::string&amp; lock_name)</div>
<div class="line"><a id="l01759" name="l01759"></a><span class="lineno"> 1759</span>{</div>
<div class="line"><a id="l01760" name="l01760"></a><span class="lineno"> 1760</span>  <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code hl_class" href="classrgw_1_1sal_1_1_m_p_rados_serializer.html">MPRadosSerializer</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_object.html#abf23dd6aa5878ba92af569a0a7c5c5c0">store</a>, <span class="keyword">this</span>, lock_name);</div>
<div class="line"><a id="l01761" name="l01761"></a><span class="lineno"> 1761</span>}</div>
</div>
<div class="line"><a id="l01762" name="l01762"></a><span class="lineno"> 1762</span> </div>
<div class="foldopen" id="foldopen01763" data-start="{" data-end="}">
<div class="line"><a id="l01763" name="l01763"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_object.html#ab69fb82f05332f101cecf9522d1aa2a4"> 1763</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_object.html#ab69fb82f05332f101cecf9522d1aa2a4">RadosObject::transition</a>(<a class="code hl_class" href="class_r_g_w_object_ctx.html">RGWObjectCtx</a>&amp; rctx,</div>
<div class="line"><a id="l01764" name="l01764"></a><span class="lineno"> 1764</span>                   <a class="code hl_class" href="classrgw_1_1sal_1_1_bucket.html">Bucket</a>* bucket,</div>
<div class="line"><a id="l01765" name="l01765"></a><span class="lineno"> 1765</span>                   <span class="keyword">const</span> <a class="code hl_struct" href="structrgw__placement__rule.html">rgw_placement_rule</a>&amp; placement_rule,</div>
<div class="line"><a id="l01766" name="l01766"></a><span class="lineno"> 1766</span>                   <span class="keyword">const</span> real_time&amp; mtime,</div>
<div class="line"><a id="l01767" name="l01767"></a><span class="lineno"> 1767</span>                   uint64_t olh_epoch,</div>
<div class="line"><a id="l01768" name="l01768"></a><span class="lineno"> 1768</span>                   <span class="keyword">const</span> DoutPrefixProvider* <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>,</div>
<div class="line"><a id="l01769" name="l01769"></a><span class="lineno"> 1769</span>                   optional_yield y)</div>
<div class="line"><a id="l01770" name="l01770"></a><span class="lineno"> 1770</span>{</div>
<div class="line"><a id="l01771" name="l01771"></a><span class="lineno"> 1771</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_object.html#abf23dd6aa5878ba92af569a0a7c5c5c0">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aca5c28bc0f22f3f963d0475b594350e1">getRados</a>()-&gt;<a class="code hl_function" href="class_r_g_w_rados.html#aed942c76c427df4e51676c28511f4b66">transition_obj</a>(rctx, <a class="code hl_variable" href="classrgw_1_1sal_1_1_object.html#a52293de292e4be4ee0d7d33e92212409">bucket</a>, *<span class="keyword">this</span>, placement_rule, <a class="code hl_variable" href="classrgw_1_1sal_1_1_object.html#aa3e4aa8f5ea263bfd0913ff8e2e47551">mtime</a>, olh_epoch, <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, y);</div>
<div class="line"><a id="l01772" name="l01772"></a><span class="lineno"> 1772</span>}</div>
</div>
<div class="line"><a id="l01773" name="l01773"></a><span class="lineno"> 1773</span> </div>
<div class="foldopen" id="foldopen01774" data-start="{" data-end="}">
<div class="line"><a id="l01774" name="l01774"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_object.html#a577b5565b4f06b0f390b74aa2dbe0c84"> 1774</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_object.html#a577b5565b4f06b0f390b74aa2dbe0c84">RadosObject::get_max_chunk_size</a>(<span class="keyword">const</span> DoutPrefixProvider* <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_struct" href="structrgw__placement__rule.html">rgw_placement_rule</a> placement_rule, uint64_t* max_chunk_size, uint64_t* alignment)</div>
<div class="line"><a id="l01775" name="l01775"></a><span class="lineno"> 1775</span>{</div>
<div class="line"><a id="l01776" name="l01776"></a><span class="lineno"> 1776</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_object.html#abf23dd6aa5878ba92af569a0a7c5c5c0">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aca5c28bc0f22f3f963d0475b594350e1">getRados</a>()-&gt;<a class="code hl_function" href="class_r_g_w_rados.html#a8c1e1eac63219baa722a928e2e98b9fd">get_max_chunk_size</a>(placement_rule, <a class="code hl_function" href="classrgw_1_1sal_1_1_object.html#a770aa088f13a4a4063055cc423de4478">get_obj</a>(), max_chunk_size, <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, alignment);</div>
<div class="line"><a id="l01777" name="l01777"></a><span class="lineno"> 1777</span>}</div>
</div>
<div class="line"><a id="l01778" name="l01778"></a><span class="lineno"> 1778</span> </div>
<div class="foldopen" id="foldopen01779" data-start="{" data-end="}">
<div class="line"><a id="l01779" name="l01779"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_object.html#aa5978843e4602fd0a345eab1ecb5b701"> 1779</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_object.html#aa5978843e4602fd0a345eab1ecb5b701">RadosObject::get_max_aligned_size</a>(uint64_t size, uint64_t alignment,</div>
<div class="line"><a id="l01780" name="l01780"></a><span class="lineno"> 1780</span>                     uint64_t* max_size)</div>
<div class="line"><a id="l01781" name="l01781"></a><span class="lineno"> 1781</span>{</div>
<div class="line"><a id="l01782" name="l01782"></a><span class="lineno"> 1782</span>  <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_object.html#abf23dd6aa5878ba92af569a0a7c5c5c0">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aca5c28bc0f22f3f963d0475b594350e1">getRados</a>()-&gt;<a class="code hl_function" href="class_r_g_w_rados.html#a49113fae07221008dff4418deeafafd1">get_max_aligned_size</a>(size, alignment, max_size);</div>
<div class="line"><a id="l01783" name="l01783"></a><span class="lineno"> 1783</span>}</div>
</div>
<div class="line"><a id="l01784" name="l01784"></a><span class="lineno"> 1784</span> </div>
<div class="foldopen" id="foldopen01785" data-start="{" data-end="}">
<div class="line"><a id="l01785" name="l01785"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_object.html#a7f8e5e3d5c6822a23613a20ab9f1c50d"> 1785</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_object.html#a7f8e5e3d5c6822a23613a20ab9f1c50d">RadosObject::placement_rules_match</a>(<a class="code hl_struct" href="structrgw__placement__rule.html">rgw_placement_rule</a>&amp; r1, <a class="code hl_struct" href="structrgw__placement__rule.html">rgw_placement_rule</a>&amp; r2)</div>
<div class="line"><a id="l01786" name="l01786"></a><span class="lineno"> 1786</span>{</div>
<div class="line"><a id="l01787" name="l01787"></a><span class="lineno"> 1787</span>  <a class="code hl_struct" href="structrgw__obj.html">rgw_obj</a> obj;</div>
<div class="line"><a id="l01788" name="l01788"></a><span class="lineno"> 1788</span>  <a class="code hl_struct" href="structrgw__pool.html">rgw_pool</a> p1, p2;</div>
<div class="line"><a id="l01789" name="l01789"></a><span class="lineno"> 1789</span> </div>
<div class="line"><a id="l01790" name="l01790"></a><span class="lineno"> 1790</span>  obj = <a class="code hl_function" href="classrgw_1_1sal_1_1_object.html#a770aa088f13a4a4063055cc423de4478">get_obj</a>();</div>
<div class="line"><a id="l01791" name="l01791"></a><span class="lineno"> 1791</span> </div>
<div class="line"><a id="l01792" name="l01792"></a><span class="lineno"> 1792</span>  <span class="keywordflow">if</span> (r1 == r2)</div>
<div class="line"><a id="l01793" name="l01793"></a><span class="lineno"> 1793</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01794" name="l01794"></a><span class="lineno"> 1794</span> </div>
<div class="line"><a id="l01795" name="l01795"></a><span class="lineno"> 1795</span>  <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_object.html#abf23dd6aa5878ba92af569a0a7c5c5c0">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aca5c28bc0f22f3f963d0475b594350e1">getRados</a>()-&gt;<a class="code hl_function" href="class_r_g_w_rados.html#a8cf1e4fcaea4a0f05e55815f5254abcf">get_obj_data_pool</a>(r1, obj, &amp;p1)) {</div>
<div class="line"><a id="l01796" name="l01796"></a><span class="lineno"> 1796</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01797" name="l01797"></a><span class="lineno"> 1797</span>  }</div>
<div class="line"><a id="l01798" name="l01798"></a><span class="lineno"> 1798</span>  <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_object.html#abf23dd6aa5878ba92af569a0a7c5c5c0">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aca5c28bc0f22f3f963d0475b594350e1">getRados</a>()-&gt;<a class="code hl_function" href="class_r_g_w_rados.html#a8cf1e4fcaea4a0f05e55815f5254abcf">get_obj_data_pool</a>(r2, obj, &amp;p2)) {</div>
<div class="line"><a id="l01799" name="l01799"></a><span class="lineno"> 1799</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01800" name="l01800"></a><span class="lineno"> 1800</span>  }</div>
<div class="line"><a id="l01801" name="l01801"></a><span class="lineno"> 1801</span> </div>
<div class="line"><a id="l01802" name="l01802"></a><span class="lineno"> 1802</span>  <span class="keywordflow">return</span> p1 == p2;</div>
<div class="line"><a id="l01803" name="l01803"></a><span class="lineno"> 1803</span>}</div>
</div>
<div class="line"><a id="l01804" name="l01804"></a><span class="lineno"> 1804</span> </div>
<div class="foldopen" id="foldopen01805" data-start="{" data-end="}">
<div class="line"><a id="l01805" name="l01805"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_object.html#a9c8f680e6d99d8a965ae78eaf6c7cd87"> 1805</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_object.html#a9c8f680e6d99d8a965ae78eaf6c7cd87">RadosObject::dump_obj_layout</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, optional_yield y, Formatter* f, <a class="code hl_class" href="class_r_g_w_object_ctx.html">RGWObjectCtx</a>* obj_ctx)</div>
<div class="line"><a id="l01806" name="l01806"></a><span class="lineno"> 1806</span>{</div>
<div class="line"><a id="l01807" name="l01807"></a><span class="lineno"> 1807</span>  <span class="keywordtype">int</span> ret;</div>
<div class="line"><a id="l01808" name="l01808"></a><span class="lineno"> 1808</span>  <a class="code hl_class" href="class_r_g_w_obj_manifest.html">RGWObjManifest</a> *manifest{<span class="keyword">nullptr</span>};</div>
<div class="line"><a id="l01809" name="l01809"></a><span class="lineno"> 1809</span>  <a class="code hl_struct" href="structrgw__raw__obj.html">rgw_raw_obj</a> head_obj;</div>
<div class="line"><a id="l01810" name="l01810"></a><span class="lineno"> 1810</span> </div>
<div class="line"><a id="l01811" name="l01811"></a><span class="lineno"> 1811</span>  <a class="code hl_class" href="class_r_g_w_rados_1_1_object.html">RGWRados::Object</a> op_target(<a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_object.html#abf23dd6aa5878ba92af569a0a7c5c5c0">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aca5c28bc0f22f3f963d0475b594350e1">getRados</a>(), <a class="code hl_function" href="classrgw_1_1sal_1_1_object.html#a0cdac8c36c06ebf81fb580038205487f">get_bucket</a>()-&gt;get_info(),</div>
<div class="line"><a id="l01812" name="l01812"></a><span class="lineno"> 1812</span>                 *obj_ctx, <a class="code hl_function" href="classrgw_1_1sal_1_1_object.html#a770aa088f13a4a4063055cc423de4478">get_obj</a>());</div>
<div class="line"><a id="l01813" name="l01813"></a><span class="lineno"> 1813</span>  <a class="code hl_struct" href="struct_r_g_w_rados_1_1_object_1_1_read.html">RGWRados::Object::Read</a> parent_op(&amp;op_target);</div>
<div class="line"><a id="l01814" name="l01814"></a><span class="lineno"> 1814</span>  uint64_t <a class="code hl_variable" href="classrgw_1_1sal_1_1_object.html#a593cfbcc3ce7ccf3e46f43fd94f1c1ee">obj_size</a>;</div>
<div class="line"><a id="l01815" name="l01815"></a><span class="lineno"> 1815</span> </div>
<div class="line"><a id="l01816" name="l01816"></a><span class="lineno"> 1816</span>  parent_op.<a class="code hl_variable" href="struct_r_g_w_rados_1_1_object_1_1_read.html#aa0759ce61ea515754e1000756ebbee52">params</a>.<a class="code hl_variable" href="struct_r_g_w_rados_1_1_object_1_1_read_1_1_params.html#a1bd216c75efbabda3f356e3d84b7c347">obj_size</a> = &amp;<a class="code hl_variable" href="classrgw_1_1sal_1_1_object.html#a593cfbcc3ce7ccf3e46f43fd94f1c1ee">obj_size</a>;</div>
<div class="line"><a id="l01817" name="l01817"></a><span class="lineno"> 1817</span>  parent_op.<a class="code hl_variable" href="struct_r_g_w_rados_1_1_object_1_1_read.html#aa0759ce61ea515754e1000756ebbee52">params</a>.<a class="code hl_variable" href="struct_r_g_w_rados_1_1_object_1_1_read_1_1_params.html#afa1ad90e23ecfabfaf7b2d6757669d57">attrs</a> = &amp;<a class="code hl_function" href="classrgw_1_1sal_1_1_object.html#aa8e83e47dd8615028e1eec9d9d7f8ec4">get_attrs</a>();</div>
<div class="line"><a id="l01818" name="l01818"></a><span class="lineno"> 1818</span> </div>
<div class="line"><a id="l01819" name="l01819"></a><span class="lineno"> 1819</span>  ret = parent_op.<a class="code hl_function" href="struct_r_g_w_rados_1_1_object_1_1_read.html#acd75ba0d39fc7185e71f208aec5065f0">prepare</a>(y, <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>);</div>
<div class="line"><a id="l01820" name="l01820"></a><span class="lineno"> 1820</span>  <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line"><a id="l01821" name="l01821"></a><span class="lineno"> 1821</span>    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l01822" name="l01822"></a><span class="lineno"> 1822</span>  }</div>
<div class="line"><a id="l01823" name="l01823"></a><span class="lineno"> 1823</span> </div>
<div class="line"><a id="l01824" name="l01824"></a><span class="lineno"> 1824</span>  head_obj = parent_op.<a class="code hl_variable" href="struct_r_g_w_rados_1_1_object_1_1_read.html#ae0bd2b54e82faed462f78f3c895022ce">state</a>.<a class="code hl_variable" href="struct_r_g_w_rados_1_1_object_1_1_read_1_1_get_obj_state.html#af535c72c3c5a871ce8a2e6bfe69ac62d">head_obj</a>;</div>
<div class="line"><a id="l01825" name="l01825"></a><span class="lineno"> 1825</span> </div>
<div class="line"><a id="l01826" name="l01826"></a><span class="lineno"> 1826</span>  ret = op_target.<a class="code hl_function" href="class_r_g_w_rados_1_1_object.html#a26e5ea31f261ed6ce4bca428264ea70a">get_manifest</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, &amp;manifest, y);</div>
<div class="line"><a id="l01827" name="l01827"></a><span class="lineno"> 1827</span>  <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line"><a id="l01828" name="l01828"></a><span class="lineno"> 1828</span>    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l01829" name="l01829"></a><span class="lineno"> 1829</span>  }</div>
<div class="line"><a id="l01830" name="l01830"></a><span class="lineno"> 1830</span> </div>
<div class="line"><a id="l01831" name="l01831"></a><span class="lineno"> 1831</span>  <a class="code hl_function" href="rgw__admin_8cc.html#ab596b9e1a1fc78e98a4d13a66578b658">::encode_json</a>(<span class="stringliteral">&quot;head&quot;</span>, head_obj, f);</div>
<div class="line"><a id="l01832" name="l01832"></a><span class="lineno"> 1832</span>  <a class="code hl_function" href="rgw__admin_8cc.html#ab596b9e1a1fc78e98a4d13a66578b658">::encode_json</a>(<span class="stringliteral">&quot;manifest&quot;</span>, *manifest, f);</div>
<div class="line"><a id="l01833" name="l01833"></a><span class="lineno"> 1833</span>  f-&gt;open_array_section(<span class="stringliteral">&quot;data_location&quot;</span>);</div>
<div class="line"><a id="l01834" name="l01834"></a><span class="lineno"> 1834</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span> miter = manifest-&gt;obj_begin(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>); miter != manifest-&gt;obj_end(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>); ++miter) {</div>
<div class="line"><a id="l01835" name="l01835"></a><span class="lineno"> 1835</span>    f-&gt;open_object_section(<span class="stringliteral">&quot;obj&quot;</span>);</div>
<div class="line"><a id="l01836" name="l01836"></a><span class="lineno"> 1836</span>    <a class="code hl_struct" href="structrgw__raw__obj.html">rgw_raw_obj</a> raw_loc = miter.get_location().get_raw_obj(<a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_object.html#abf23dd6aa5878ba92af569a0a7c5c5c0">store</a>);</div>
<div class="line"><a id="l01837" name="l01837"></a><span class="lineno"> 1837</span>    uint64_t ofs = miter.get_ofs();</div>
<div class="line"><a id="l01838" name="l01838"></a><span class="lineno"> 1838</span>    uint64_t left = manifest-&gt;get_obj_size() - ofs;</div>
<div class="line"><a id="l01839" name="l01839"></a><span class="lineno"> 1839</span>    <a class="code hl_function" href="rgw__admin_8cc.html#ab596b9e1a1fc78e98a4d13a66578b658">::encode_json</a>(<span class="stringliteral">&quot;ofs&quot;</span>, miter.get_ofs(), f);</div>
<div class="line"><a id="l01840" name="l01840"></a><span class="lineno"> 1840</span>    <a class="code hl_function" href="rgw__admin_8cc.html#ab596b9e1a1fc78e98a4d13a66578b658">::encode_json</a>(<span class="stringliteral">&quot;loc&quot;</span>, raw_loc, f);</div>
<div class="line"><a id="l01841" name="l01841"></a><span class="lineno"> 1841</span>    <a class="code hl_function" href="rgw__admin_8cc.html#ab596b9e1a1fc78e98a4d13a66578b658">::encode_json</a>(<span class="stringliteral">&quot;loc_ofs&quot;</span>, miter.location_ofs(), f);</div>
<div class="line"><a id="l01842" name="l01842"></a><span class="lineno"> 1842</span>    uint64_t loc_size = miter.get_stripe_size();</div>
<div class="line"><a id="l01843" name="l01843"></a><span class="lineno"> 1843</span>    <span class="keywordflow">if</span> (loc_size &gt; left) {</div>
<div class="line"><a id="l01844" name="l01844"></a><span class="lineno"> 1844</span>      loc_size = left;</div>
<div class="line"><a id="l01845" name="l01845"></a><span class="lineno"> 1845</span>    }</div>
<div class="line"><a id="l01846" name="l01846"></a><span class="lineno"> 1846</span>    <a class="code hl_function" href="rgw__admin_8cc.html#ab596b9e1a1fc78e98a4d13a66578b658">::encode_json</a>(<span class="stringliteral">&quot;loc_size&quot;</span>, loc_size, f);</div>
<div class="line"><a id="l01847" name="l01847"></a><span class="lineno"> 1847</span>    f-&gt;close_section();</div>
<div class="line"><a id="l01848" name="l01848"></a><span class="lineno"> 1848</span>  }</div>
<div class="line"><a id="l01849" name="l01849"></a><span class="lineno"> 1849</span>  f-&gt;close_section();</div>
<div class="line"><a id="l01850" name="l01850"></a><span class="lineno"> 1850</span> </div>
<div class="line"><a id="l01851" name="l01851"></a><span class="lineno"> 1851</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l01852" name="l01852"></a><span class="lineno"> 1852</span>}</div>
</div>
<div class="line"><a id="l01853" name="l01853"></a><span class="lineno"> 1853</span> </div>
<div class="foldopen" id="foldopen01854" data-start="{" data-end="}">
<div class="line"><a id="l01854" name="l01854"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_object.html#a2c0fa7cd7ec2f85f432bc1f055c35a68"> 1854</a></span>std::unique_ptr&lt;Object::ReadOp&gt; <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_object.html#a2c0fa7cd7ec2f85f432bc1f055c35a68">RadosObject::get_read_op</a>(<a class="code hl_class" href="class_r_g_w_object_ctx.html">RGWObjectCtx</a>* ctx)</div>
<div class="line"><a id="l01855" name="l01855"></a><span class="lineno"> 1855</span>{</div>
<div class="line"><a id="l01856" name="l01856"></a><span class="lineno"> 1856</span>  <span class="keywordflow">return</span> std::make_unique&lt;RadosObject::RadosReadOp&gt;(<span class="keyword">this</span>, ctx);</div>
<div class="line"><a id="l01857" name="l01857"></a><span class="lineno"> 1857</span>}</div>
</div>
<div class="line"><a id="l01858" name="l01858"></a><span class="lineno"> 1858</span> </div>
<div class="foldopen" id="foldopen01859" data-start="{" data-end="}">
<div class="line"><a id="l01859" name="l01859"></a><span class="lineno"><a class="line" href="structrgw_1_1sal_1_1_rados_object_1_1_rados_read_op.html#a17c735dde1c89eb1d6b3f5ae5c6eb860"> 1859</a></span><a class="code hl_function" href="structrgw_1_1sal_1_1_rados_object_1_1_rados_read_op.html#a17c735dde1c89eb1d6b3f5ae5c6eb860">RadosObject::RadosReadOp::RadosReadOp</a>(<a class="code hl_class" href="classrgw_1_1sal_1_1_rados_object.html">RadosObject</a> *_source, <a class="code hl_class" href="class_r_g_w_object_ctx.html">RGWObjectCtx</a> *_rctx) :</div>
<div class="line"><a id="l01860" name="l01860"></a><span class="lineno"> 1860</span>    source(_source),</div>
<div class="line"><a id="l01861" name="l01861"></a><span class="lineno"> 1861</span>    rctx(_rctx),</div>
<div class="line"><a id="l01862" name="l01862"></a><span class="lineno"> 1862</span>    op_target(_source-&gt;store-&gt;getRados(),</div>
<div class="line"><a id="l01863" name="l01863"></a><span class="lineno"> 1863</span>          _source-&gt;get_bucket()-&gt;get_info(),</div>
<div class="line"><a id="l01864" name="l01864"></a><span class="lineno"> 1864</span>          *static_cast&lt;<a class="code hl_class" href="class_r_g_w_object_ctx.html">RGWObjectCtx</a> *&gt;(rctx),</div>
<div class="line"><a id="l01865" name="l01865"></a><span class="lineno"> 1865</span>          _source-&gt;get_obj()),</div>
<div class="line"><a id="l01866" name="l01866"></a><span class="lineno"> 1866</span>    parent_op(&amp;op_target)</div>
<div class="line"><a id="l01867" name="l01867"></a><span class="lineno"> 1867</span>{ }</div>
</div>
<div class="line"><a id="l01868" name="l01868"></a><span class="lineno"> 1868</span> </div>
<div class="foldopen" id="foldopen01869" data-start="{" data-end="}">
<div class="line"><a id="l01869" name="l01869"></a><span class="lineno"><a class="line" href="structrgw_1_1sal_1_1_rados_object_1_1_rados_read_op.html#a662f822335997cf48fc3ba2a16248705"> 1869</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="structrgw_1_1sal_1_1_rados_object_1_1_rados_read_op.html#a662f822335997cf48fc3ba2a16248705">RadosObject::RadosReadOp::prepare</a>(optional_yield y, <span class="keyword">const</span> DoutPrefixProvider* <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>)</div>
<div class="line"><a id="l01870" name="l01870"></a><span class="lineno"> 1870</span>{</div>
<div class="line"><a id="l01871" name="l01871"></a><span class="lineno"> 1871</span>  uint64_t <a class="code hl_variable" href="classrgw_1_1sal_1_1_object.html#a593cfbcc3ce7ccf3e46f43fd94f1c1ee">obj_size</a>;</div>
<div class="line"><a id="l01872" name="l01872"></a><span class="lineno"> 1872</span> </div>
<div class="line"><a id="l01873" name="l01873"></a><span class="lineno"> 1873</span>  parent_op.conds.mod_ptr = params.mod_ptr;</div>
<div class="line"><a id="l01874" name="l01874"></a><span class="lineno"> 1874</span>  parent_op.conds.unmod_ptr = params.unmod_ptr;</div>
<div class="line"><a id="l01875" name="l01875"></a><span class="lineno"> 1875</span>  parent_op.conds.high_precision_time = params.high_precision_time;</div>
<div class="line"><a id="l01876" name="l01876"></a><span class="lineno"> 1876</span>  parent_op.conds.mod_zone_id = params.mod_zone_id;</div>
<div class="line"><a id="l01877" name="l01877"></a><span class="lineno"> 1877</span>  parent_op.conds.mod_pg_ver = params.mod_pg_ver;</div>
<div class="line"><a id="l01878" name="l01878"></a><span class="lineno"> 1878</span>  parent_op.conds.if_match = params.if_match;</div>
<div class="line"><a id="l01879" name="l01879"></a><span class="lineno"> 1879</span>  parent_op.conds.if_nomatch = params.if_nomatch;</div>
<div class="line"><a id="l01880" name="l01880"></a><span class="lineno"> 1880</span>  parent_op.params.lastmod = params.lastmod;</div>
<div class="line"><a id="l01881" name="l01881"></a><span class="lineno"> 1881</span>  parent_op.params.target_obj = params.target_obj;</div>
<div class="line"><a id="l01882" name="l01882"></a><span class="lineno"> 1882</span>  parent_op.params.obj_size = &amp;<a class="code hl_variable" href="classrgw_1_1sal_1_1_object.html#a593cfbcc3ce7ccf3e46f43fd94f1c1ee">obj_size</a>;</div>
<div class="line"><a id="l01883" name="l01883"></a><span class="lineno"> 1883</span>  parent_op.params.attrs = &amp;source-&gt;get_attrs();</div>
<div class="line"><a id="l01884" name="l01884"></a><span class="lineno"> 1884</span> </div>
<div class="line"><a id="l01885" name="l01885"></a><span class="lineno"> 1885</span>  <span class="keywordtype">int</span> ret = parent_op.prepare(y, <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>);</div>
<div class="line"><a id="l01886" name="l01886"></a><span class="lineno"> 1886</span>  <span class="keywordflow">if</span> (ret &lt; 0)</div>
<div class="line"><a id="l01887" name="l01887"></a><span class="lineno"> 1887</span>    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l01888" name="l01888"></a><span class="lineno"> 1888</span> </div>
<div class="line"><a id="l01889" name="l01889"></a><span class="lineno"> 1889</span>  source-&gt;set_key(parent_op.state.obj.key);</div>
<div class="line"><a id="l01890" name="l01890"></a><span class="lineno"> 1890</span>  source-&gt;set_obj_size(<a class="code hl_variable" href="classrgw_1_1sal_1_1_object.html#a593cfbcc3ce7ccf3e46f43fd94f1c1ee">obj_size</a>);</div>
<div class="line"><a id="l01891" name="l01891"></a><span class="lineno"> 1891</span> </div>
<div class="line"><a id="l01892" name="l01892"></a><span class="lineno"> 1892</span>  <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l01893" name="l01893"></a><span class="lineno"> 1893</span>}</div>
</div>
<div class="line"><a id="l01894" name="l01894"></a><span class="lineno"> 1894</span> </div>
<div class="foldopen" id="foldopen01895" data-start="{" data-end="}">
<div class="line"><a id="l01895" name="l01895"></a><span class="lineno"><a class="line" href="structrgw_1_1sal_1_1_rados_object_1_1_rados_read_op.html#ab3869c9e52d8474eda4d641c8268f594"> 1895</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="structrgw_1_1sal_1_1_rados_object_1_1_rados_read_op.html#ab3869c9e52d8474eda4d641c8268f594">RadosObject::RadosReadOp::read</a>(int64_t ofs, int64_t end, bufferlist&amp; bl, optional_yield y, <span class="keyword">const</span> DoutPrefixProvider* <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>)</div>
<div class="line"><a id="l01896" name="l01896"></a><span class="lineno"> 1896</span>{</div>
<div class="line"><a id="l01897" name="l01897"></a><span class="lineno"> 1897</span>  <span class="keywordflow">return</span> parent_op.read(ofs, end, bl, y, <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>);</div>
<div class="line"><a id="l01898" name="l01898"></a><span class="lineno"> 1898</span>}</div>
</div>
<div class="line"><a id="l01899" name="l01899"></a><span class="lineno"> 1899</span> </div>
<div class="foldopen" id="foldopen01900" data-start="{" data-end="}">
<div class="line"><a id="l01900" name="l01900"></a><span class="lineno"><a class="line" href="structrgw_1_1sal_1_1_rados_object_1_1_rados_read_op.html#a474cf439bedb33da6f4a721782992257"> 1900</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="structrgw_1_1sal_1_1_rados_object_1_1_rados_read_op.html#a474cf439bedb33da6f4a721782992257">RadosObject::RadosReadOp::get_attr</a>(<span class="keyword">const</span> DoutPrefixProvider* <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <span class="keyword">const</span> <span class="keywordtype">char</span>* name, bufferlist&amp; dest, optional_yield y)</div>
<div class="line"><a id="l01901" name="l01901"></a><span class="lineno"> 1901</span>{</div>
<div class="line"><a id="l01902" name="l01902"></a><span class="lineno"> 1902</span>  <span class="keywordflow">return</span> parent_op.get_attr(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, name, dest, y);</div>
<div class="line"><a id="l01903" name="l01903"></a><span class="lineno"> 1903</span>}</div>
</div>
<div class="line"><a id="l01904" name="l01904"></a><span class="lineno"> 1904</span> </div>
<div class="foldopen" id="foldopen01905" data-start="{" data-end="}">
<div class="line"><a id="l01905" name="l01905"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_object.html#ae52f58a6f44744d4201f0dbafbe4fd23"> 1905</a></span>std::unique_ptr&lt;Object::DeleteOp&gt; <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_object.html#ae52f58a6f44744d4201f0dbafbe4fd23">RadosObject::get_delete_op</a>(<a class="code hl_class" href="class_r_g_w_object_ctx.html">RGWObjectCtx</a>* ctx)</div>
<div class="line"><a id="l01906" name="l01906"></a><span class="lineno"> 1906</span>{</div>
<div class="line"><a id="l01907" name="l01907"></a><span class="lineno"> 1907</span>  <span class="keywordflow">return</span> std::make_unique&lt;RadosObject::RadosDeleteOp&gt;(<span class="keyword">this</span>, ctx);</div>
<div class="line"><a id="l01908" name="l01908"></a><span class="lineno"> 1908</span>}</div>
</div>
<div class="line"><a id="l01909" name="l01909"></a><span class="lineno"> 1909</span> </div>
<div class="foldopen" id="foldopen01910" data-start="{" data-end="}">
<div class="line"><a id="l01910" name="l01910"></a><span class="lineno"><a class="line" href="structrgw_1_1sal_1_1_rados_object_1_1_rados_delete_op.html#ae18997c8a63a13e239e123ad8e2a95e3"> 1910</a></span><a class="code hl_function" href="structrgw_1_1sal_1_1_rados_object_1_1_rados_delete_op.html#ae18997c8a63a13e239e123ad8e2a95e3">RadosObject::RadosDeleteOp::RadosDeleteOp</a>(<a class="code hl_class" href="classrgw_1_1sal_1_1_rados_object.html">RadosObject</a> *_source, <a class="code hl_class" href="class_r_g_w_object_ctx.html">RGWObjectCtx</a> *_rctx) :</div>
<div class="line"><a id="l01911" name="l01911"></a><span class="lineno"> 1911</span>    source(_source),</div>
<div class="line"><a id="l01912" name="l01912"></a><span class="lineno"> 1912</span>    rctx(_rctx),</div>
<div class="line"><a id="l01913" name="l01913"></a><span class="lineno"> 1913</span>    op_target(_source-&gt;<a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_object.html#abf23dd6aa5878ba92af569a0a7c5c5c0">store</a>-&gt;getRados(),</div>
<div class="line"><a id="l01914" name="l01914"></a><span class="lineno"> 1914</span>          _source-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_object.html#a0cdac8c36c06ebf81fb580038205487f">get_bucket</a>()-&gt;get_info(),</div>
<div class="line"><a id="l01915" name="l01915"></a><span class="lineno"> 1915</span>          *static_cast&lt;<a class="code hl_class" href="class_r_g_w_object_ctx.html">RGWObjectCtx</a> *&gt;(rctx),</div>
<div class="line"><a id="l01916" name="l01916"></a><span class="lineno"> 1916</span>          _source-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_object.html#a770aa088f13a4a4063055cc423de4478">get_obj</a>()),</div>
<div class="line"><a id="l01917" name="l01917"></a><span class="lineno"> 1917</span>    parent_op(&amp;op_target)</div>
<div class="line"><a id="l01918" name="l01918"></a><span class="lineno"> 1918</span>{ }</div>
</div>
<div class="line"><a id="l01919" name="l01919"></a><span class="lineno"> 1919</span> </div>
<div class="foldopen" id="foldopen01920" data-start="{" data-end="}">
<div class="line"><a id="l01920" name="l01920"></a><span class="lineno"><a class="line" href="structrgw_1_1sal_1_1_rados_object_1_1_rados_delete_op.html#afb44172fe0a5e9b6eb22f9e491ddcadc"> 1920</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="structrgw_1_1sal_1_1_rados_object_1_1_rados_delete_op.html#afb44172fe0a5e9b6eb22f9e491ddcadc">RadosObject::RadosDeleteOp::delete_obj</a>(<span class="keyword">const</span> DoutPrefixProvider* <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, optional_yield y)</div>
<div class="line"><a id="l01921" name="l01921"></a><span class="lineno"> 1921</span>{</div>
<div class="line"><a id="l01922" name="l01922"></a><span class="lineno"> 1922</span>  parent_op.params.bucket_owner = params.bucket_owner.get_id();</div>
<div class="line"><a id="l01923" name="l01923"></a><span class="lineno"> 1923</span>  parent_op.params.versioning_status = params.versioning_status;</div>
<div class="line"><a id="l01924" name="l01924"></a><span class="lineno"> 1924</span>  parent_op.params.obj_owner = params.obj_owner;</div>
<div class="line"><a id="l01925" name="l01925"></a><span class="lineno"> 1925</span>  parent_op.params.olh_epoch = params.olh_epoch;</div>
<div class="line"><a id="l01926" name="l01926"></a><span class="lineno"> 1926</span>  parent_op.params.marker_version_id = params.marker_version_id;</div>
<div class="line"><a id="l01927" name="l01927"></a><span class="lineno"> 1927</span>  parent_op.params.bilog_flags = params.bilog_flags;</div>
<div class="line"><a id="l01928" name="l01928"></a><span class="lineno"> 1928</span>  parent_op.params.remove_objs = params.remove_objs;</div>
<div class="line"><a id="l01929" name="l01929"></a><span class="lineno"> 1929</span>  parent_op.params.expiration_time = params.expiration_time;</div>
<div class="line"><a id="l01930" name="l01930"></a><span class="lineno"> 1930</span>  parent_op.params.unmod_since = params.unmod_since;</div>
<div class="line"><a id="l01931" name="l01931"></a><span class="lineno"> 1931</span>  parent_op.params.mtime = params.mtime;</div>
<div class="line"><a id="l01932" name="l01932"></a><span class="lineno"> 1932</span>  parent_op.params.high_precision_time = params.high_precision_time;</div>
<div class="line"><a id="l01933" name="l01933"></a><span class="lineno"> 1933</span>  parent_op.params.zones_trace = params.zones_trace;</div>
<div class="line"><a id="l01934" name="l01934"></a><span class="lineno"> 1934</span>  parent_op.params.abortmp = params.abortmp;</div>
<div class="line"><a id="l01935" name="l01935"></a><span class="lineno"> 1935</span>  parent_op.params.parts_accounted_size = params.parts_accounted_size;</div>
<div class="line"><a id="l01936" name="l01936"></a><span class="lineno"> 1936</span> </div>
<div class="line"><a id="l01937" name="l01937"></a><span class="lineno"> 1937</span>  <span class="keywordtype">int</span> ret = parent_op.delete_obj(y, <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>);</div>
<div class="line"><a id="l01938" name="l01938"></a><span class="lineno"> 1938</span>  <span class="keywordflow">if</span> (ret &lt; 0)</div>
<div class="line"><a id="l01939" name="l01939"></a><span class="lineno"> 1939</span>    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l01940" name="l01940"></a><span class="lineno"> 1940</span> </div>
<div class="line"><a id="l01941" name="l01941"></a><span class="lineno"> 1941</span>  result.delete_marker = parent_op.result.delete_marker;</div>
<div class="line"><a id="l01942" name="l01942"></a><span class="lineno"> 1942</span>  result.version_id = parent_op.result.version_id;</div>
<div class="line"><a id="l01943" name="l01943"></a><span class="lineno"> 1943</span> </div>
<div class="line"><a id="l01944" name="l01944"></a><span class="lineno"> 1944</span>  <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l01945" name="l01945"></a><span class="lineno"> 1945</span>}</div>
</div>
<div class="line"><a id="l01946" name="l01946"></a><span class="lineno"> 1946</span> </div>
<div class="foldopen" id="foldopen01947" data-start="{" data-end="}">
<div class="line"><a id="l01947" name="l01947"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_object.html#a0ac066b99684f4f14127604ec387244f"> 1947</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_object.html#a0ac066b99684f4f14127604ec387244f">RadosObject::delete_object</a>(<span class="keyword">const</span> DoutPrefixProvider* <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>,</div>
<div class="line"><a id="l01948" name="l01948"></a><span class="lineno"> 1948</span>                   <a class="code hl_class" href="class_r_g_w_object_ctx.html">RGWObjectCtx</a>* obj_ctx,</div>
<div class="line"><a id="l01949" name="l01949"></a><span class="lineno"> 1949</span>                   optional_yield y,</div>
<div class="line"><a id="l01950" name="l01950"></a><span class="lineno"> 1950</span>                   <span class="keywordtype">bool</span> prevent_versioning)</div>
<div class="line"><a id="l01951" name="l01951"></a><span class="lineno"> 1951</span>{</div>
<div class="line"><a id="l01952" name="l01952"></a><span class="lineno"> 1952</span>  <a class="code hl_class" href="class_r_g_w_rados_1_1_object.html">RGWRados::Object</a> del_target(<a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_object.html#abf23dd6aa5878ba92af569a0a7c5c5c0">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aca5c28bc0f22f3f963d0475b594350e1">getRados</a>(), <a class="code hl_variable" href="classrgw_1_1sal_1_1_object.html#a52293de292e4be4ee0d7d33e92212409">bucket</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_bucket.html#a1e64259203d2710c33c5a979721c19ee">get_info</a>(), *obj_ctx, <a class="code hl_function" href="classrgw_1_1sal_1_1_object.html#a770aa088f13a4a4063055cc423de4478">get_obj</a>());</div>
<div class="line"><a id="l01953" name="l01953"></a><span class="lineno"> 1953</span>  <a class="code hl_struct" href="struct_r_g_w_rados_1_1_object_1_1_delete.html">RGWRados::Object::Delete</a> del_op(&amp;del_target);</div>
<div class="line"><a id="l01954" name="l01954"></a><span class="lineno"> 1954</span> </div>
<div class="line"><a id="l01955" name="l01955"></a><span class="lineno"> 1955</span>  del_op.<a class="code hl_variable" href="struct_r_g_w_rados_1_1_object_1_1_delete.html#a4e62ba5d4b2e281069314dce5a5e15a5">params</a>.<a class="code hl_variable" href="struct_r_g_w_rados_1_1_object_1_1_delete_1_1_delete_params.html#a44bd7b3a2353bc22d7a1092793931914">bucket_owner</a> = <a class="code hl_variable" href="classrgw_1_1sal_1_1_object.html#a52293de292e4be4ee0d7d33e92212409">bucket</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_bucket.html#a1e64259203d2710c33c5a979721c19ee">get_info</a>().<a class="code hl_variable" href="struct_r_g_w_bucket_info.html#a18215d487317142f30bd2675ccec2293">owner</a>;</div>
<div class="line"><a id="l01956" name="l01956"></a><span class="lineno"> 1956</span>  del_op.<a class="code hl_variable" href="struct_r_g_w_rados_1_1_object_1_1_delete.html#a4e62ba5d4b2e281069314dce5a5e15a5">params</a>.<a class="code hl_variable" href="struct_r_g_w_rados_1_1_object_1_1_delete_1_1_delete_params.html#a31d0466d7c6e5199de669bb18d32f06d">versioning_status</a> = prevent_versioning ? 0 : <a class="code hl_variable" href="classrgw_1_1sal_1_1_object.html#a52293de292e4be4ee0d7d33e92212409">bucket</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_bucket.html#a1e64259203d2710c33c5a979721c19ee">get_info</a>().<a class="code hl_function" href="struct_r_g_w_bucket_info.html#ae6674c41b0446ccebd83d46693e90ca4">versioning_status</a>();</div>
<div class="line"><a id="l01957" name="l01957"></a><span class="lineno"> 1957</span> </div>
<div class="line"><a id="l01958" name="l01958"></a><span class="lineno"> 1958</span>  <span class="keywordflow">return</span> del_op.<a class="code hl_function" href="struct_r_g_w_rados_1_1_object_1_1_delete.html#a7d9eb79062106ce1af7373f1a593ec7e">delete_obj</a>(y, <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>);</div>
<div class="line"><a id="l01959" name="l01959"></a><span class="lineno"> 1959</span>}</div>
</div>
<div class="line"><a id="l01960" name="l01960"></a><span class="lineno"> 1960</span> </div>
<div class="foldopen" id="foldopen01961" data-start="{" data-end="}">
<div class="line"><a id="l01961" name="l01961"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_object.html#a2e86c74784581918b9891beeaa0584c2"> 1961</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_object.html#a2e86c74784581918b9891beeaa0584c2">RadosObject::delete_obj_aio</a>(<span class="keyword">const</span> DoutPrefixProvider* <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_struct" href="struct_r_g_w_obj_state.html">RGWObjState</a>* astate,</div>
<div class="line"><a id="l01962" name="l01962"></a><span class="lineno"> 1962</span>                   <a class="code hl_class" href="classrgw_1_1sal_1_1_completions.html">Completions</a>* <a class="code hl_variable" href="rgw__aio_8cc.html#ad8d5da794a93e87014771f5742ca6c71">aio</a>, <span class="keywordtype">bool</span> keep_index_consistent,</div>
<div class="line"><a id="l01963" name="l01963"></a><span class="lineno"> 1963</span>                   optional_yield y)</div>
<div class="line"><a id="l01964" name="l01964"></a><span class="lineno"> 1964</span>{</div>
<div class="line"><a id="l01965" name="l01965"></a><span class="lineno"> 1965</span>  <a class="code hl_class" href="classrgw_1_1sal_1_1_rados_completions.html">RadosCompletions</a>* raio = <span class="keyword">static_cast&lt;</span><a class="code hl_class" href="classrgw_1_1sal_1_1_rados_completions.html">RadosCompletions</a>*<span class="keyword">&gt;</span>(<a class="code hl_variable" href="rgw__aio_8cc.html#ad8d5da794a93e87014771f5742ca6c71">aio</a>);</div>
<div class="line"><a id="l01966" name="l01966"></a><span class="lineno"> 1966</span> </div>
<div class="line"><a id="l01967" name="l01967"></a><span class="lineno"> 1967</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_object.html#abf23dd6aa5878ba92af569a0a7c5c5c0">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aca5c28bc0f22f3f963d0475b594350e1">getRados</a>()-&gt;<a class="code hl_function" href="class_r_g_w_rados.html#a7f60c3201714fedff936bd4ce7958860">delete_obj_aio</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_function" href="classrgw_1_1sal_1_1_object.html#a770aa088f13a4a4063055cc423de4478">get_obj</a>(), <a class="code hl_variable" href="classrgw_1_1sal_1_1_object.html#a52293de292e4be4ee0d7d33e92212409">bucket</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_bucket.html#a1e64259203d2710c33c5a979721c19ee">get_info</a>(), astate,</div>
<div class="line"><a id="l01968" name="l01968"></a><span class="lineno"> 1968</span>                       raio-&gt;<a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_completions.html#a722d517ee1b1d84a00f299e2c197245a">handles</a>, keep_index_consistent, y);</div>
<div class="line"><a id="l01969" name="l01969"></a><span class="lineno"> 1969</span>}</div>
</div>
<div class="line"><a id="l01970" name="l01970"></a><span class="lineno"> 1970</span> </div>
<div class="foldopen" id="foldopen01971" data-start="{" data-end="}">
<div class="line"><a id="l01971" name="l01971"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_object.html#a97aafcff22608ecf4d912018ae9da833"> 1971</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_object.html#a97aafcff22608ecf4d912018ae9da833">RadosObject::copy_object</a>(<a class="code hl_class" href="class_r_g_w_object_ctx.html">RGWObjectCtx</a>&amp; obj_ctx,</div>
<div class="line"><a id="l01972" name="l01972"></a><span class="lineno"> 1972</span>                <a class="code hl_class" href="classrgw_1_1sal_1_1_user.html">User</a>* user,</div>
<div class="line"><a id="l01973" name="l01973"></a><span class="lineno"> 1973</span>                <a class="code hl_struct" href="structreq__info.html">req_info</a>* info,</div>
<div class="line"><a id="l01974" name="l01974"></a><span class="lineno"> 1974</span>                <span class="keyword">const</span> <a class="code hl_struct" href="structrgw__zone__id.html">rgw_zone_id</a>&amp; source_zone,</div>
<div class="line"><a id="l01975" name="l01975"></a><span class="lineno"> 1975</span>                <a class="code hl_class" href="classrgw_1_1sal_1_1_object.html">rgw::sal::Object</a>* dest_object,</div>
<div class="line"><a id="l01976" name="l01976"></a><span class="lineno"> 1976</span>                <a class="code hl_class" href="classrgw_1_1sal_1_1_bucket.html">rgw::sal::Bucket</a>* dest_bucket,</div>
<div class="line"><a id="l01977" name="l01977"></a><span class="lineno"> 1977</span>                <a class="code hl_class" href="classrgw_1_1sal_1_1_bucket.html">rgw::sal::Bucket</a>* src_bucket,</div>
<div class="line"><a id="l01978" name="l01978"></a><span class="lineno"> 1978</span>                <span class="keyword">const</span> <a class="code hl_struct" href="structrgw__placement__rule.html">rgw_placement_rule</a>&amp; dest_placement,</div>
<div class="line"><a id="l01979" name="l01979"></a><span class="lineno"> 1979</span>                ceph::real_time* src_mtime,</div>
<div class="line"><a id="l01980" name="l01980"></a><span class="lineno"> 1980</span>                ceph::real_time* <a class="code hl_variable" href="classrgw_1_1sal_1_1_object.html#aa3e4aa8f5ea263bfd0913ff8e2e47551">mtime</a>,</div>
<div class="line"><a id="l01981" name="l01981"></a><span class="lineno"> 1981</span>                <span class="keyword">const</span> ceph::real_time* mod_ptr,</div>
<div class="line"><a id="l01982" name="l01982"></a><span class="lineno"> 1982</span>                <span class="keyword">const</span> ceph::real_time* unmod_ptr,</div>
<div class="line"><a id="l01983" name="l01983"></a><span class="lineno"> 1983</span>                <span class="keywordtype">bool</span> high_precision_time,</div>
<div class="line"><a id="l01984" name="l01984"></a><span class="lineno"> 1984</span>                <span class="keyword">const</span> <span class="keywordtype">char</span>* if_match,</div>
<div class="line"><a id="l01985" name="l01985"></a><span class="lineno"> 1985</span>                <span class="keyword">const</span> <span class="keywordtype">char</span>* if_nomatch,</div>
<div class="line"><a id="l01986" name="l01986"></a><span class="lineno"> 1986</span>                <a class="code hl_enumeration" href="group___r_g_w_s_a_l.html#gae9698675e942bd611260f03685e7a7be">AttrsMod</a> attrs_mod,</div>
<div class="line"><a id="l01987" name="l01987"></a><span class="lineno"> 1987</span>                <span class="keywordtype">bool</span> copy_if_newer,</div>
<div class="line"><a id="l01988" name="l01988"></a><span class="lineno"> 1988</span>                <a class="code hl_typedef" href="group___r_g_w_s_a_l.html#gab1b58d5f8747844fae5ddfb48fadf7bc">Attrs</a>&amp; <a class="code hl_variable" href="classrgw_1_1sal_1_1_object.html#a89d6b720b87f91663d142ba7a6dce9ca">attrs</a>,</div>
<div class="line"><a id="l01989" name="l01989"></a><span class="lineno"> 1989</span>                RGWObjCategory category,</div>
<div class="line"><a id="l01990" name="l01990"></a><span class="lineno"> 1990</span>                uint64_t olh_epoch,</div>
<div class="line"><a id="l01991" name="l01991"></a><span class="lineno"> 1991</span>                boost::optional&lt;ceph::real_time&gt; delete_at,</div>
<div class="line"><a id="l01992" name="l01992"></a><span class="lineno"> 1992</span>                std::string* version_id,</div>
<div class="line"><a id="l01993" name="l01993"></a><span class="lineno"> 1993</span>                std::string* tag,</div>
<div class="line"><a id="l01994" name="l01994"></a><span class="lineno"> 1994</span>                std::string* etag,</div>
<div class="line"><a id="l01995" name="l01995"></a><span class="lineno"> 1995</span>                <span class="keywordtype">void</span> (*progress_cb)(off_t, <span class="keywordtype">void</span> *),</div>
<div class="line"><a id="l01996" name="l01996"></a><span class="lineno"> 1996</span>                <span class="keywordtype">void</span>* progress_data,</div>
<div class="line"><a id="l01997" name="l01997"></a><span class="lineno"> 1997</span>                <span class="keyword">const</span> DoutPrefixProvider* <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>,</div>
<div class="line"><a id="l01998" name="l01998"></a><span class="lineno"> 1998</span>                optional_yield y)</div>
<div class="line"><a id="l01999" name="l01999"></a><span class="lineno"> 1999</span>{</div>
<div class="line"><a id="l02000" name="l02000"></a><span class="lineno"> 2000</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_object.html#abf23dd6aa5878ba92af569a0a7c5c5c0">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aca5c28bc0f22f3f963d0475b594350e1">getRados</a>()-&gt;<a class="code hl_function" href="class_r_g_w_rados.html#abdb3c2c76b2abe59e5e0dce9dae67245">copy_obj</a>(obj_ctx,</div>
<div class="line"><a id="l02001" name="l02001"></a><span class="lineno"> 2001</span>                     user-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_user.html#a4f6322efe2b6c9c2780eb31cb3a5ca51">get_id</a>(),</div>
<div class="line"><a id="l02002" name="l02002"></a><span class="lineno"> 2002</span>                     info,</div>
<div class="line"><a id="l02003" name="l02003"></a><span class="lineno"> 2003</span>                     source_zone,</div>
<div class="line"><a id="l02004" name="l02004"></a><span class="lineno"> 2004</span>                     dest_object,</div>
<div class="line"><a id="l02005" name="l02005"></a><span class="lineno"> 2005</span>                     <span class="keyword">this</span>,</div>
<div class="line"><a id="l02006" name="l02006"></a><span class="lineno"> 2006</span>                     dest_bucket,</div>
<div class="line"><a id="l02007" name="l02007"></a><span class="lineno"> 2007</span>                     src_bucket,</div>
<div class="line"><a id="l02008" name="l02008"></a><span class="lineno"> 2008</span>                     dest_placement,</div>
<div class="line"><a id="l02009" name="l02009"></a><span class="lineno"> 2009</span>                     src_mtime,</div>
<div class="line"><a id="l02010" name="l02010"></a><span class="lineno"> 2010</span>                     <a class="code hl_variable" href="classrgw_1_1sal_1_1_object.html#aa3e4aa8f5ea263bfd0913ff8e2e47551">mtime</a>,</div>
<div class="line"><a id="l02011" name="l02011"></a><span class="lineno"> 2011</span>                     mod_ptr,</div>
<div class="line"><a id="l02012" name="l02012"></a><span class="lineno"> 2012</span>                     unmod_ptr,</div>
<div class="line"><a id="l02013" name="l02013"></a><span class="lineno"> 2013</span>                     high_precision_time,</div>
<div class="line"><a id="l02014" name="l02014"></a><span class="lineno"> 2014</span>                     if_match,</div>
<div class="line"><a id="l02015" name="l02015"></a><span class="lineno"> 2015</span>                     if_nomatch,</div>
<div class="line"><a id="l02016" name="l02016"></a><span class="lineno"> 2016</span>                     <span class="keyword">static_cast&lt;</span><a class="code hl_enumeration" href="class_r_g_w_rados.html#acf6063a74d8174f965ace73d8c72d237">RGWRados::AttrsMod</a><span class="keyword">&gt;</span>(attrs_mod),</div>
<div class="line"><a id="l02017" name="l02017"></a><span class="lineno"> 2017</span>                     copy_if_newer,</div>
<div class="line"><a id="l02018" name="l02018"></a><span class="lineno"> 2018</span>                     <a class="code hl_variable" href="classrgw_1_1sal_1_1_object.html#a89d6b720b87f91663d142ba7a6dce9ca">attrs</a>,</div>
<div class="line"><a id="l02019" name="l02019"></a><span class="lineno"> 2019</span>                     category,</div>
<div class="line"><a id="l02020" name="l02020"></a><span class="lineno"> 2020</span>                     olh_epoch,</div>
<div class="line"><a id="l02021" name="l02021"></a><span class="lineno"> 2021</span>                     (delete_at ? *delete_at : real_time()),</div>
<div class="line"><a id="l02022" name="l02022"></a><span class="lineno"> 2022</span>                     version_id,</div>
<div class="line"><a id="l02023" name="l02023"></a><span class="lineno"> 2023</span>                     tag,</div>
<div class="line"><a id="l02024" name="l02024"></a><span class="lineno"> 2024</span>                     etag,</div>
<div class="line"><a id="l02025" name="l02025"></a><span class="lineno"> 2025</span>                     progress_cb,</div>
<div class="line"><a id="l02026" name="l02026"></a><span class="lineno"> 2026</span>                     progress_data,</div>
<div class="line"><a id="l02027" name="l02027"></a><span class="lineno"> 2027</span>                     <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>,</div>
<div class="line"><a id="l02028" name="l02028"></a><span class="lineno"> 2028</span>                     y);</div>
<div class="line"><a id="l02029" name="l02029"></a><span class="lineno"> 2029</span>}</div>
</div>
<div class="line"><a id="l02030" name="l02030"></a><span class="lineno"> 2030</span> </div>
<div class="foldopen" id="foldopen02031" data-start="{" data-end="}">
<div class="line"><a id="l02031" name="l02031"></a><span class="lineno"><a class="line" href="structrgw_1_1sal_1_1_rados_object_1_1_rados_read_op.html#a5f94ffe68a375a85749965c1ec86abe9"> 2031</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="structrgw_1_1sal_1_1_rados_object_1_1_rados_read_op.html#a5f94ffe68a375a85749965c1ec86abe9">RadosObject::RadosReadOp::iterate</a>(<span class="keyword">const</span> DoutPrefixProvider* <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, int64_t ofs, int64_t end, <a class="code hl_class" href="class_r_g_w_get_data_c_b.html">RGWGetDataCB</a>* cb, optional_yield y)</div>
<div class="line"><a id="l02032" name="l02032"></a><span class="lineno"> 2032</span>{</div>
<div class="line"><a id="l02033" name="l02033"></a><span class="lineno"> 2033</span>  <span class="keywordflow">return</span> parent_op.iterate(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, ofs, end, cb, y);</div>
<div class="line"><a id="l02034" name="l02034"></a><span class="lineno"> 2034</span>}</div>
</div>
<div class="line"><a id="l02035" name="l02035"></a><span class="lineno"> 2035</span> </div>
<div class="foldopen" id="foldopen02036" data-start="{" data-end="}">
<div class="line"><a id="l02036" name="l02036"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_object.html#aa32ef033498062359c622531cd490d17"> 2036</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_object.html#aa32ef033498062359c622531cd490d17">RadosObject::swift_versioning_restore</a>(<a class="code hl_class" href="class_r_g_w_object_ctx.html">RGWObjectCtx</a>* obj_ctx,</div>
<div class="line"><a id="l02037" name="l02037"></a><span class="lineno"> 2037</span>                         <span class="keywordtype">bool</span>&amp; restored,</div>
<div class="line"><a id="l02038" name="l02038"></a><span class="lineno"> 2038</span>                         <span class="keyword">const</span> DoutPrefixProvider* <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>)</div>
<div class="line"><a id="l02039" name="l02039"></a><span class="lineno"> 2039</span>{</div>
<div class="line"><a id="l02040" name="l02040"></a><span class="lineno"> 2040</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_object.html#abf23dd6aa5878ba92af569a0a7c5c5c0">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aca5c28bc0f22f3f963d0475b594350e1">getRados</a>()-&gt;<a class="code hl_function" href="class_r_g_w_rados.html#ab73d207257cb8829de00314dd201661c">swift_versioning_restore</a>(*obj_ctx,</div>
<div class="line"><a id="l02041" name="l02041"></a><span class="lineno"> 2041</span>                             <a class="code hl_variable" href="classrgw_1_1sal_1_1_object.html#a52293de292e4be4ee0d7d33e92212409">bucket</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_bucket.html#ad0bdac1b17f37e566a42867442449537">get_owner</a>()-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_user.html#a4f6322efe2b6c9c2780eb31cb3a5ca51">get_id</a>(),</div>
<div class="line"><a id="l02042" name="l02042"></a><span class="lineno"> 2042</span>                             <a class="code hl_variable" href="classrgw_1_1sal_1_1_object.html#a52293de292e4be4ee0d7d33e92212409">bucket</a>,</div>
<div class="line"><a id="l02043" name="l02043"></a><span class="lineno"> 2043</span>                             <span class="keyword">this</span>,</div>
<div class="line"><a id="l02044" name="l02044"></a><span class="lineno"> 2044</span>                             restored,</div>
<div class="line"><a id="l02045" name="l02045"></a><span class="lineno"> 2045</span>                             <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>);</div>
<div class="line"><a id="l02046" name="l02046"></a><span class="lineno"> 2046</span>}</div>
</div>
<div class="line"><a id="l02047" name="l02047"></a><span class="lineno"> 2047</span> </div>
<div class="foldopen" id="foldopen02048" data-start="{" data-end="}">
<div class="line"><a id="l02048" name="l02048"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_object.html#abe04e07d0aeee8ca25c956ba75fe57ed"> 2048</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_object.html#abe04e07d0aeee8ca25c956ba75fe57ed">RadosObject::swift_versioning_copy</a>(<a class="code hl_class" href="class_r_g_w_object_ctx.html">RGWObjectCtx</a>* obj_ctx,</div>
<div class="line"><a id="l02049" name="l02049"></a><span class="lineno"> 2049</span>                      <span class="keyword">const</span> DoutPrefixProvider* <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>,</div>
<div class="line"><a id="l02050" name="l02050"></a><span class="lineno"> 2050</span>                      optional_yield y)</div>
<div class="line"><a id="l02051" name="l02051"></a><span class="lineno"> 2051</span>{</div>
<div class="line"><a id="l02052" name="l02052"></a><span class="lineno"> 2052</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_object.html#abf23dd6aa5878ba92af569a0a7c5c5c0">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aca5c28bc0f22f3f963d0475b594350e1">getRados</a>()-&gt;<a class="code hl_function" href="class_r_g_w_rados.html#ae88ce99d40a9a99d49c334f3e733cb97">swift_versioning_copy</a>(*obj_ctx,</div>
<div class="line"><a id="l02053" name="l02053"></a><span class="lineno"> 2053</span>                                        <a class="code hl_variable" href="classrgw_1_1sal_1_1_object.html#a52293de292e4be4ee0d7d33e92212409">bucket</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_bucket.html#a1e64259203d2710c33c5a979721c19ee">get_info</a>().<a class="code hl_variable" href="struct_r_g_w_bucket_info.html#a18215d487317142f30bd2675ccec2293">owner</a>,</div>
<div class="line"><a id="l02054" name="l02054"></a><span class="lineno"> 2054</span>                                        <a class="code hl_variable" href="classrgw_1_1sal_1_1_object.html#a52293de292e4be4ee0d7d33e92212409">bucket</a>,</div>
<div class="line"><a id="l02055" name="l02055"></a><span class="lineno"> 2055</span>                                        <span class="keyword">this</span>,</div>
<div class="line"><a id="l02056" name="l02056"></a><span class="lineno"> 2056</span>                                        <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>,</div>
<div class="line"><a id="l02057" name="l02057"></a><span class="lineno"> 2057</span>                                        y);</div>
<div class="line"><a id="l02058" name="l02058"></a><span class="lineno"> 2058</span>}</div>
</div>
<div class="line"><a id="l02059" name="l02059"></a><span class="lineno"> 2059</span> </div>
<div class="foldopen" id="foldopen02060" data-start="{" data-end="}">
<div class="line"><a id="l02060" name="l02060"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_multipart_upload.html#a33448fa62cbd84edccd40d300de25ddf"> 2060</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_multipart_upload.html#a33448fa62cbd84edccd40d300de25ddf">RadosMultipartUpload::abort</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, CephContext *<a class="code hl_variable" href="cls__fifo__legacy_8cc.html#aa76801f7597f40e158b5f38b2e6466c5">cct</a>,</div>
<div class="line"><a id="l02061" name="l02061"></a><span class="lineno"> 2061</span>                <a class="code hl_class" href="class_r_g_w_object_ctx.html">RGWObjectCtx</a> *obj_ctx)</div>
<div class="line"><a id="l02062" name="l02062"></a><span class="lineno"> 2062</span>{</div>
<div class="line"><a id="l02063" name="l02063"></a><span class="lineno"> 2063</span>  std::unique_ptr&lt;rgw::sal::Object&gt; meta_obj = get_meta_obj();</div>
<div class="line"><a id="l02064" name="l02064"></a><span class="lineno"> 2064</span>  meta_obj-&gt;set_in_extra_data(<span class="keyword">true</span>);</div>
<div class="line"><a id="l02065" name="l02065"></a><span class="lineno"> 2065</span>  meta_obj-&gt;set_hash_source(mp_obj.get_key());</div>
<div class="line"><a id="l02066" name="l02066"></a><span class="lineno"> 2066</span>  cls_rgw_obj_chain chain;</div>
<div class="line"><a id="l02067" name="l02067"></a><span class="lineno"> 2067</span>  list&lt;rgw_obj_index_key&gt; remove_objs;</div>
<div class="line"><a id="l02068" name="l02068"></a><span class="lineno"> 2068</span>  <span class="keywordtype">bool</span> truncated;</div>
<div class="line"><a id="l02069" name="l02069"></a><span class="lineno"> 2069</span>  <span class="keywordtype">int</span> marker = 0;</div>
<div class="line"><a id="l02070" name="l02070"></a><span class="lineno"> 2070</span>  <span class="keywordtype">int</span> ret;</div>
<div class="line"><a id="l02071" name="l02071"></a><span class="lineno"> 2071</span>  uint64_t parts_accounted_size = 0;</div>
<div class="line"><a id="l02072" name="l02072"></a><span class="lineno"> 2072</span> </div>
<div class="line"><a id="l02073" name="l02073"></a><span class="lineno"> 2073</span>  <span class="keywordflow">do</span> {</div>
<div class="line"><a id="l02074" name="l02074"></a><span class="lineno"> 2074</span>    ret = list_parts(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_variable" href="cls__fifo__legacy_8cc.html#aa76801f7597f40e158b5f38b2e6466c5">cct</a>, 1000, marker, &amp;marker, &amp;truncated);</div>
<div class="line"><a id="l02075" name="l02075"></a><span class="lineno"> 2075</span>    <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line"><a id="l02076" name="l02076"></a><span class="lineno"> 2076</span>      ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 20) &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;: RadosMultipartUpload::list_parts returned &quot;</span> &lt;&lt;</div>
<div class="line"><a id="l02077" name="l02077"></a><span class="lineno"> 2077</span>    ret &lt;&lt; dendl;</div>
<div class="line"><a id="l02078" name="l02078"></a><span class="lineno"> 2078</span>      <span class="keywordflow">return</span> (ret == -ENOENT) ? -<a class="code hl_define" href="rgw__common_8h.html#a5670bf112bcf5bd63ff0c8bcafd09b87">ERR_NO_SUCH_UPLOAD</a> : ret;</div>
<div class="line"><a id="l02079" name="l02079"></a><span class="lineno"> 2079</span>    }</div>
<div class="line"><a id="l02080" name="l02080"></a><span class="lineno"> 2080</span> </div>
<div class="line"><a id="l02081" name="l02081"></a><span class="lineno"> 2081</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> part_it = parts.begin();</div>
<div class="line"><a id="l02082" name="l02082"></a><span class="lineno"> 2082</span>     part_it != parts.end();</div>
<div class="line"><a id="l02083" name="l02083"></a><span class="lineno"> 2083</span>     ++part_it) {</div>
<div class="line"><a id="l02084" name="l02084"></a><span class="lineno"> 2084</span>      <a class="code hl_class" href="classrgw_1_1sal_1_1_rados_multipart_part.html">RadosMultipartPart</a>* obj_part = <span class="keyword">dynamic_cast&lt;</span><a class="code hl_class" href="classrgw_1_1sal_1_1_rados_multipart_part.html">RadosMultipartPart</a>*<span class="keyword">&gt;</span>(part_it-&gt;second.get());</div>
<div class="line"><a id="l02085" name="l02085"></a><span class="lineno"> 2085</span>      <span class="keywordflow">if</span> (obj_part-&gt;<a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_multipart_part.html#a4fec3bcff3b70e9199e6af186669542a">info</a>.<a class="code hl_variable" href="struct_r_g_w_upload_part_info.html#a1bcc15674b18ccafc2c4e62564d866de">manifest</a>.<a class="code hl_function" href="class_r_g_w_obj_manifest.html#a1ffd4d0344f4951313d763bd0421daac">empty</a>()) {</div>
<div class="line"><a id="l02086" name="l02086"></a><span class="lineno"> 2086</span>    std::unique_ptr&lt;rgw::sal::Object&gt; obj = <a class="code hl_variable" href="classrgw_1_1sal_1_1_object.html#a52293de292e4be4ee0d7d33e92212409">bucket</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_bucket.html#ad2d2f55d5bc0e8da377f2d9342c0ec13">get_object</a>(</div>
<div class="line"><a id="l02087" name="l02087"></a><span class="lineno"> 2087</span>                    <a class="code hl_struct" href="structrgw__obj__key.html">rgw_obj_key</a>(obj_part-&gt;<a class="code hl_variable" href="classrgw_1_1sal_1_1_multipart_part.html#a338ce30edd3929e4f451c8f370320d5e">oid</a>, std::string(), <a class="code hl_define" href="rgw__rados_8h.html#ae0aa963272f470d3884b7a4160593740">RGW_OBJ_NS_MULTIPART</a>));</div>
<div class="line"><a id="l02088" name="l02088"></a><span class="lineno"> 2088</span>    obj-&gt;set_hash_source(mp_obj.get_key());</div>
<div class="line"><a id="l02089" name="l02089"></a><span class="lineno"> 2089</span>    ret = obj-&gt;delete_object(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, obj_ctx, null_yield);</div>
<div class="line"><a id="l02090" name="l02090"></a><span class="lineno"> 2090</span>        <span class="keywordflow">if</span> (ret &lt; 0 &amp;&amp; ret != -ENOENT)</div>
<div class="line"><a id="l02091" name="l02091"></a><span class="lineno"> 2091</span>          <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l02092" name="l02092"></a><span class="lineno"> 2092</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02093" name="l02093"></a><span class="lineno"> 2093</span>    <span class="keyword">auto</span> target = meta_obj-&gt;get_obj();</div>
<div class="line"><a id="l02094" name="l02094"></a><span class="lineno"> 2094</span>    <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_object.html#abf23dd6aa5878ba92af569a0a7c5c5c0">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aca5c28bc0f22f3f963d0475b594350e1">getRados</a>()-&gt;<a class="code hl_function" href="class_r_g_w_rados.html#a0a82b9b01e1cc01505d8c1ed0062dfd1">update_gc_chain</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, target, obj_part-&gt;<a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_multipart_part.html#a4fec3bcff3b70e9199e6af186669542a">info</a>.<a class="code hl_variable" href="struct_r_g_w_upload_part_info.html#a1bcc15674b18ccafc2c4e62564d866de">manifest</a>, &amp;chain);</div>
<div class="line"><a id="l02095" name="l02095"></a><span class="lineno"> 2095</span>        <a class="code hl_class" href="class_r_g_w_obj_manifest_1_1obj__iterator.html">RGWObjManifest::obj_iterator</a> oiter = obj_part-&gt;<a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_multipart_part.html#a4fec3bcff3b70e9199e6af186669542a">info</a>.<a class="code hl_variable" href="struct_r_g_w_upload_part_info.html#a1bcc15674b18ccafc2c4e62564d866de">manifest</a>.<a class="code hl_function" href="class_r_g_w_obj_manifest.html#ae2f4e68b09b46a0df516c63b2edbcffb">obj_begin</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>);</div>
<div class="line"><a id="l02096" name="l02096"></a><span class="lineno"> 2096</span>        <span class="keywordflow">if</span> (oiter != obj_part-&gt;<a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_multipart_part.html#a4fec3bcff3b70e9199e6af186669542a">info</a>.<a class="code hl_variable" href="struct_r_g_w_upload_part_info.html#a1bcc15674b18ccafc2c4e62564d866de">manifest</a>.<a class="code hl_function" href="class_r_g_w_obj_manifest.html#acd322607ce983203f80ab1518a531f4c">obj_end</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>)) {</div>
<div class="line"><a id="l02097" name="l02097"></a><span class="lineno"> 2097</span>      std::unique_ptr&lt;rgw::sal::Object&gt; head = <a class="code hl_variable" href="classrgw_1_1sal_1_1_object.html#a52293de292e4be4ee0d7d33e92212409">bucket</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_bucket.html#ad2d2f55d5bc0e8da377f2d9342c0ec13">get_object</a>(<a class="code hl_struct" href="structrgw__obj__key.html">rgw_obj_key</a>());</div>
<div class="line"><a id="l02098" name="l02098"></a><span class="lineno"> 2098</span>          <a class="code hl_struct" href="structrgw__raw__obj.html">rgw_raw_obj</a> raw_head = oiter.<a class="code hl_function" href="class_r_g_w_obj_manifest_1_1obj__iterator.html#a064ea33fce18e542ed71731d1cad9c30">get_location</a>().<a class="code hl_function" href="classrgw__obj__select.html#a51963d514b5a6273b3c5a395aa3346af">get_raw_obj</a>(<a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_object.html#abf23dd6aa5878ba92af569a0a7c5c5c0">store</a>);</div>
<div class="line"><a id="l02099" name="l02099"></a><span class="lineno"> 2099</span>      <span class="keyword">dynamic_cast&lt;</span><a class="code hl_class" href="classrgw_1_1sal_1_1_rados_object.html">rgw::sal::RadosObject</a>*<span class="keyword">&gt;</span>(head.get())-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_object.html#aef2c725896367b2e9779f57cffd491fd">raw_obj_to_obj</a>(raw_head);</div>
<div class="line"><a id="l02100" name="l02100"></a><span class="lineno"> 2100</span> </div>
<div class="line"><a id="l02101" name="l02101"></a><span class="lineno"> 2101</span>          <a class="code hl_typedef" href="rgw__common_8h.html#a7020478e92d985c3f78e2ae9e5481f0a">rgw_obj_index_key</a> <a class="code hl_variable" href="classrgw_1_1sal_1_1_object.html#aed5de5f3bc91fd3fcc43be62e05dbed9">key</a>;</div>
<div class="line"><a id="l02102" name="l02102"></a><span class="lineno"> 2102</span>          head-&gt;get_key().<a class="code hl_function" href="structrgw__obj__key.html#a25f11d321b80d9c0fa03d2358d261dd4">get_index_key</a>(&amp;<a class="code hl_variable" href="classrgw_1_1sal_1_1_object.html#aed5de5f3bc91fd3fcc43be62e05dbed9">key</a>);</div>
<div class="line"><a id="l02103" name="l02103"></a><span class="lineno"> 2103</span>          remove_objs.push_back(<a class="code hl_variable" href="classrgw_1_1sal_1_1_object.html#aed5de5f3bc91fd3fcc43be62e05dbed9">key</a>);</div>
<div class="line"><a id="l02104" name="l02104"></a><span class="lineno"> 2104</span>        }</div>
<div class="line"><a id="l02105" name="l02105"></a><span class="lineno"> 2105</span>      }</div>
<div class="line"><a id="l02106" name="l02106"></a><span class="lineno"> 2106</span>      parts_accounted_size += obj_part-&gt;<a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_multipart_part.html#a4fec3bcff3b70e9199e6af186669542a">info</a>.<a class="code hl_variable" href="struct_r_g_w_upload_part_info.html#a56a2f73e2eac9900001fe21692ce9ac0">accounted_size</a>;</div>
<div class="line"><a id="l02107" name="l02107"></a><span class="lineno"> 2107</span>    }</div>
<div class="line"><a id="l02108" name="l02108"></a><span class="lineno"> 2108</span>  } <span class="keywordflow">while</span> (truncated);</div>
<div class="line"><a id="l02109" name="l02109"></a><span class="lineno"> 2109</span> </div>
<div class="line"><a id="l02110" name="l02110"></a><span class="lineno"> 2110</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_object.html#abf23dd6aa5878ba92af569a0a7c5c5c0">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aca5c28bc0f22f3f963d0475b594350e1">getRados</a>()-&gt;<a class="code hl_function" href="class_r_g_w_rados.html#aeebc6a92f1fdaecdb6419cb4864b260d">get_gc</a>() == <span class="keyword">nullptr</span>) {</div>
<div class="line"><a id="l02111" name="l02111"></a><span class="lineno"> 2111</span>    <span class="comment">//Delete objects inline if gc hasn&#39;t been initialised (in case when bypass gc is specified)</span></div>
<div class="line"><a id="l02112" name="l02112"></a><span class="lineno"> 2112</span>    <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_object.html#abf23dd6aa5878ba92af569a0a7c5c5c0">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aca5c28bc0f22f3f963d0475b594350e1">getRados</a>()-&gt;<a class="code hl_function" href="class_r_g_w_rados.html#af3a6c5bc6a7f3d5a324dbe549c29e5b1">delete_objs_inline</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, chain, mp_obj.get_upload_id());</div>
<div class="line"><a id="l02113" name="l02113"></a><span class="lineno"> 2113</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02114" name="l02114"></a><span class="lineno"> 2114</span>    <span class="comment">/* use upload id as tag and do it synchronously */</span></div>
<div class="line"><a id="l02115" name="l02115"></a><span class="lineno"> 2115</span>    <span class="keyword">auto</span> [ret, leftover_chain] = <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_object.html#abf23dd6aa5878ba92af569a0a7c5c5c0">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aca5c28bc0f22f3f963d0475b594350e1">getRados</a>()-&gt;<a class="code hl_function" href="class_r_g_w_rados.html#a0d955e0ddbcd8eb18e6e926a04570a21">send_chain_to_gc</a>(chain, mp_obj.get_upload_id());</div>
<div class="line"><a id="l02116" name="l02116"></a><span class="lineno"> 2116</span>    <span class="keywordflow">if</span> (ret &lt; 0 &amp;&amp; leftover_chain) {</div>
<div class="line"><a id="l02117" name="l02117"></a><span class="lineno"> 2117</span>      ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 5) &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;: gc-&gt;send_chain() returned &quot;</span> &lt;&lt; ret &lt;&lt; dendl;</div>
<div class="line"><a id="l02118" name="l02118"></a><span class="lineno"> 2118</span>      <span class="keywordflow">if</span> (ret == -ENOENT) {</div>
<div class="line"><a id="l02119" name="l02119"></a><span class="lineno"> 2119</span>        <span class="keywordflow">return</span> -<a class="code hl_define" href="rgw__common_8h.html#a5670bf112bcf5bd63ff0c8bcafd09b87">ERR_NO_SUCH_UPLOAD</a>;</div>
<div class="line"><a id="l02120" name="l02120"></a><span class="lineno"> 2120</span>      }</div>
<div class="line"><a id="l02121" name="l02121"></a><span class="lineno"> 2121</span>      <span class="comment">//Delete objects inline if send chain to gc fails</span></div>
<div class="line"><a id="l02122" name="l02122"></a><span class="lineno"> 2122</span>      <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_object.html#abf23dd6aa5878ba92af569a0a7c5c5c0">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aca5c28bc0f22f3f963d0475b594350e1">getRados</a>()-&gt;<a class="code hl_function" href="class_r_g_w_rados.html#af3a6c5bc6a7f3d5a324dbe549c29e5b1">delete_objs_inline</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, *leftover_chain, mp_obj.get_upload_id());</div>
<div class="line"><a id="l02123" name="l02123"></a><span class="lineno"> 2123</span>    }</div>
<div class="line"><a id="l02124" name="l02124"></a><span class="lineno"> 2124</span>  }</div>
<div class="line"><a id="l02125" name="l02125"></a><span class="lineno"> 2125</span> </div>
<div class="line"><a id="l02126" name="l02126"></a><span class="lineno"> 2126</span>  std::unique_ptr&lt;rgw::sal::Object::DeleteOp&gt; del_op = meta_obj-&gt;get_delete_op(obj_ctx);</div>
<div class="line"><a id="l02127" name="l02127"></a><span class="lineno"> 2127</span>  del_op-&gt;params.bucket_owner = <a class="code hl_variable" href="classrgw_1_1sal_1_1_object.html#a52293de292e4be4ee0d7d33e92212409">bucket</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_bucket.html#a58a5e1ed6d60713fc00fa891c8aaec0e">get_acl_owner</a>();</div>
<div class="line"><a id="l02128" name="l02128"></a><span class="lineno"> 2128</span>  del_op-&gt;params.versioning_status = 0;</div>
<div class="line"><a id="l02129" name="l02129"></a><span class="lineno"> 2129</span>  <span class="keywordflow">if</span> (!remove_objs.empty()) {</div>
<div class="line"><a id="l02130" name="l02130"></a><span class="lineno"> 2130</span>    del_op-&gt;params.remove_objs = &amp;remove_objs;</div>
<div class="line"><a id="l02131" name="l02131"></a><span class="lineno"> 2131</span>  }</div>
<div class="line"><a id="l02132" name="l02132"></a><span class="lineno"> 2132</span>  </div>
<div class="line"><a id="l02133" name="l02133"></a><span class="lineno"> 2133</span>  del_op-&gt;params.abortmp = <span class="keyword">true</span>;</div>
<div class="line"><a id="l02134" name="l02134"></a><span class="lineno"> 2134</span>  del_op-&gt;params.parts_accounted_size = parts_accounted_size;</div>
<div class="line"><a id="l02135" name="l02135"></a><span class="lineno"> 2135</span> </div>
<div class="line"><a id="l02136" name="l02136"></a><span class="lineno"> 2136</span>  <span class="comment">// and also remove the metadata obj</span></div>
<div class="line"><a id="l02137" name="l02137"></a><span class="lineno"> 2137</span>  ret = del_op-&gt;delete_obj(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, null_yield);</div>
<div class="line"><a id="l02138" name="l02138"></a><span class="lineno"> 2138</span>  <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line"><a id="l02139" name="l02139"></a><span class="lineno"> 2139</span>    ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 20) &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;: del_op.delete_obj returned &quot;</span> &lt;&lt;</div>
<div class="line"><a id="l02140" name="l02140"></a><span class="lineno"> 2140</span>      ret &lt;&lt; dendl;</div>
<div class="line"><a id="l02141" name="l02141"></a><span class="lineno"> 2141</span>  }</div>
<div class="line"><a id="l02142" name="l02142"></a><span class="lineno"> 2142</span>  <span class="keywordflow">return</span> (ret == -ENOENT) ? -<a class="code hl_define" href="rgw__common_8h.html#a5670bf112bcf5bd63ff0c8bcafd09b87">ERR_NO_SUCH_UPLOAD</a> : ret;</div>
<div class="line"><a id="l02143" name="l02143"></a><span class="lineno"> 2143</span>}</div>
</div>
<div class="line"><a id="l02144" name="l02144"></a><span class="lineno"> 2144</span> </div>
<div class="foldopen" id="foldopen02145" data-start="{" data-end="}">
<div class="line"><a id="l02145" name="l02145"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_multipart_upload.html#a4eaa14a01fa5ba2ac3ec604dca1fb9b3"> 2145</a></span>std::unique_ptr&lt;rgw::sal::Object&gt; <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_multipart_upload.html#a4eaa14a01fa5ba2ac3ec604dca1fb9b3">RadosMultipartUpload::get_meta_obj</a>()</div>
<div class="line"><a id="l02146" name="l02146"></a><span class="lineno"> 2146</span>{</div>
<div class="line"><a id="l02147" name="l02147"></a><span class="lineno"> 2147</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="classrgw_1_1sal_1_1_object.html#a52293de292e4be4ee0d7d33e92212409">bucket</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_bucket.html#ad2d2f55d5bc0e8da377f2d9342c0ec13">get_object</a>(<a class="code hl_struct" href="structrgw__obj__key.html">rgw_obj_key</a>(get_meta(), <span class="keywordtype">string</span>(), <a class="code hl_variable" href="namespacergw_1_1sal.html#a104d6b556f1eca2030a571aa28226b8f">mp_ns</a>));</div>
<div class="line"><a id="l02148" name="l02148"></a><span class="lineno"> 2148</span>}</div>
</div>
<div class="line"><a id="l02149" name="l02149"></a><span class="lineno"> 2149</span> </div>
<div class="foldopen" id="foldopen02150" data-start="{" data-end="}">
<div class="line"><a id="l02150" name="l02150"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_multipart_upload.html#aab4154d46e790e0e9fa0a991f9fc6931"> 2150</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_multipart_upload.html#aab4154d46e790e0e9fa0a991f9fc6931">RadosMultipartUpload::init</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, optional_yield y, <a class="code hl_class" href="class_r_g_w_object_ctx.html">RGWObjectCtx</a>* obj_ctx, <a class="code hl_class" href="class_a_c_l_owner.html">ACLOwner</a>&amp; owner, <a class="code hl_struct" href="structrgw__placement__rule.html">rgw_placement_rule</a>&amp; dest_placement, <a class="code hl_typedef" href="group___r_g_w_s_a_l.html#gab1b58d5f8747844fae5ddfb48fadf7bc">rgw::sal::Attrs</a>&amp; <a class="code hl_variable" href="classrgw_1_1sal_1_1_object.html#a89d6b720b87f91663d142ba7a6dce9ca">attrs</a>)</div>
<div class="line"><a id="l02151" name="l02151"></a><span class="lineno"> 2151</span>{</div>
<div class="line"><a id="l02152" name="l02152"></a><span class="lineno"> 2152</span>  <span class="keywordtype">int</span> ret;</div>
<div class="line"><a id="l02153" name="l02153"></a><span class="lineno"> 2153</span>  std::string oid = mp_obj.get_key();</div>
<div class="line"><a id="l02154" name="l02154"></a><span class="lineno"> 2154</span> </div>
<div class="line"><a id="l02155" name="l02155"></a><span class="lineno"> 2155</span>  <span class="keywordflow">do</span> {</div>
<div class="line"><a id="l02156" name="l02156"></a><span class="lineno"> 2156</span>    <span class="keywordtype">char</span> buf[33];</div>
<div class="line"><a id="l02157" name="l02157"></a><span class="lineno"> 2157</span>    <span class="keywordtype">string</span> tmp_obj_name;</div>
<div class="line"><a id="l02158" name="l02158"></a><span class="lineno"> 2158</span>    std::unique_ptr&lt;rgw::sal::Object&gt; obj;</div>
<div class="line"><a id="l02159" name="l02159"></a><span class="lineno"> 2159</span>    gen_rand_alphanumeric(<a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_object.html#abf23dd6aa5878ba92af569a0a7c5c5c0">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aabf846e99f9f01172f86ce5e7fb1ed5b">ctx</a>(), buf, <span class="keyword">sizeof</span>(buf) - 1);</div>
<div class="line"><a id="l02160" name="l02160"></a><span class="lineno"> 2160</span>    std::string upload_id = <a class="code hl_define" href="rgw__multi_8h.html#a3829d97c2842f97de70dab72b6c35e05">MULTIPART_UPLOAD_ID_PREFIX</a>; <span class="comment">/* v2 upload id */</span></div>
<div class="line"><a id="l02161" name="l02161"></a><span class="lineno"> 2161</span>    upload_id.append(buf);</div>
<div class="line"><a id="l02162" name="l02162"></a><span class="lineno"> 2162</span> </div>
<div class="line"><a id="l02163" name="l02163"></a><span class="lineno"> 2163</span>    mp_obj.init(oid, upload_id);</div>
<div class="line"><a id="l02164" name="l02164"></a><span class="lineno"> 2164</span>    tmp_obj_name = mp_obj.get_meta();</div>
<div class="line"><a id="l02165" name="l02165"></a><span class="lineno"> 2165</span> </div>
<div class="line"><a id="l02166" name="l02166"></a><span class="lineno"> 2166</span>    obj = <a class="code hl_variable" href="classrgw_1_1sal_1_1_object.html#a52293de292e4be4ee0d7d33e92212409">bucket</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_bucket.html#ad2d2f55d5bc0e8da377f2d9342c0ec13">get_object</a>(<a class="code hl_struct" href="structrgw__obj__key.html">rgw_obj_key</a>(tmp_obj_name, <span class="keywordtype">string</span>(), <a class="code hl_variable" href="namespacergw_1_1sal.html#a104d6b556f1eca2030a571aa28226b8f">mp_ns</a>));</div>
<div class="line"><a id="l02167" name="l02167"></a><span class="lineno"> 2167</span>    <span class="comment">// the meta object will be indexed with 0 size, we c</span></div>
<div class="line"><a id="l02168" name="l02168"></a><span class="lineno"> 2168</span>    obj-&gt;set_in_extra_data(<span class="keyword">true</span>);</div>
<div class="line"><a id="l02169" name="l02169"></a><span class="lineno"> 2169</span>    obj-&gt;set_hash_source(oid);</div>
<div class="line"><a id="l02170" name="l02170"></a><span class="lineno"> 2170</span> </div>
<div class="line"><a id="l02171" name="l02171"></a><span class="lineno"> 2171</span>    <a class="code hl_class" href="class_r_g_w_rados_1_1_object.html">RGWRados::Object</a> op_target(<a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_object.html#abf23dd6aa5878ba92af569a0a7c5c5c0">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aca5c28bc0f22f3f963d0475b594350e1">getRados</a>(),</div>
<div class="line"><a id="l02172" name="l02172"></a><span class="lineno"> 2172</span>                   obj-&gt;get_bucket()-&gt;get_info(),</div>
<div class="line"><a id="l02173" name="l02173"></a><span class="lineno"> 2173</span>                   *obj_ctx, obj-&gt;get_obj());</div>
<div class="line"><a id="l02174" name="l02174"></a><span class="lineno"> 2174</span>    <a class="code hl_struct" href="struct_r_g_w_rados_1_1_object_1_1_write.html">RGWRados::Object::Write</a> obj_op(&amp;op_target);</div>
<div class="line"><a id="l02175" name="l02175"></a><span class="lineno"> 2175</span> </div>
<div class="line"><a id="l02176" name="l02176"></a><span class="lineno"> 2176</span>    op_target.<a class="code hl_function" href="class_r_g_w_rados_1_1_object.html#aa2aa41fbde8ffd7db162585fc530cef9">set_versioning_disabled</a>(<span class="keyword">true</span>); <span class="comment">/* no versioning for multipart meta */</span></div>
<div class="line"><a id="l02177" name="l02177"></a><span class="lineno"> 2177</span>    obj_op.<a class="code hl_variable" href="struct_r_g_w_rados_1_1_object_1_1_write.html#a983690caebbfc23b4a56dfd687a61dfa">meta</a>.<a class="code hl_variable" href="struct_r_g_w_rados_1_1_object_1_1_write_1_1_meta_params.html#a1f80aaf767e6693f9c7fb468ffb7e6b1">owner</a> = owner.<a class="code hl_function" href="class_a_c_l_owner.html#ad784a6fdd9366a68b859f664486283fb">get_id</a>();</div>
<div class="line"><a id="l02178" name="l02178"></a><span class="lineno"> 2178</span>    obj_op.<a class="code hl_variable" href="struct_r_g_w_rados_1_1_object_1_1_write.html#a983690caebbfc23b4a56dfd687a61dfa">meta</a>.<a class="code hl_variable" href="struct_r_g_w_rados_1_1_object_1_1_write_1_1_meta_params.html#a740d899ec869013a8e836b85a1754d43">category</a> = RGWObjCategory::MultiMeta;</div>
<div class="line"><a id="l02179" name="l02179"></a><span class="lineno"> 2179</span>    obj_op.<a class="code hl_variable" href="struct_r_g_w_rados_1_1_object_1_1_write.html#a983690caebbfc23b4a56dfd687a61dfa">meta</a>.<a class="code hl_variable" href="struct_r_g_w_rados_1_1_object_1_1_write_1_1_meta_params.html#a3ddf31b01f7cf44e6b150e23a560cccc">flags</a> = <a class="code hl_define" href="rgw__rados_8h.html#ac2b5faa6fadfd68d3b93456958a0b86d">PUT_OBJ_CREATE_EXCL</a>;</div>
<div class="line"><a id="l02180" name="l02180"></a><span class="lineno"> 2180</span>    obj_op.<a class="code hl_variable" href="struct_r_g_w_rados_1_1_object_1_1_write.html#a983690caebbfc23b4a56dfd687a61dfa">meta</a>.<a class="code hl_variable" href="struct_r_g_w_rados_1_1_object_1_1_write_1_1_meta_params.html#a3a016e380e639202a03a8f9a060917e4">mtime</a> = &amp;<a class="code hl_variable" href="classrgw_1_1sal_1_1_object.html#aa3e4aa8f5ea263bfd0913ff8e2e47551">mtime</a>;</div>
<div class="line"><a id="l02181" name="l02181"></a><span class="lineno"> 2181</span> </div>
<div class="line"><a id="l02182" name="l02182"></a><span class="lineno"> 2182</span>    <a class="code hl_struct" href="structmultipart__upload__info.html">multipart_upload_info</a> upload_info;</div>
<div class="line"><a id="l02183" name="l02183"></a><span class="lineno"> 2183</span>    upload_info.<a class="code hl_variable" href="structmultipart__upload__info.html#a654450c2f0a5c1267acbddf21fc6992d">dest_placement</a> = dest_placement;</div>
<div class="line"><a id="l02184" name="l02184"></a><span class="lineno"> 2184</span> </div>
<div class="line"><a id="l02185" name="l02185"></a><span class="lineno"> 2185</span>    bufferlist bl;</div>
<div class="line"><a id="l02186" name="l02186"></a><span class="lineno"> 2186</span>    <a class="code hl_function" href="namespacergw.html#a34a5757756e9618325f611b073ccd448">encode</a>(upload_info, bl);</div>
<div class="line"><a id="l02187" name="l02187"></a><span class="lineno"> 2187</span>    obj_op.<a class="code hl_variable" href="struct_r_g_w_rados_1_1_object_1_1_write.html#a983690caebbfc23b4a56dfd687a61dfa">meta</a>.<a class="code hl_variable" href="struct_r_g_w_rados_1_1_object_1_1_write_1_1_meta_params.html#ab1da147fb25a10be683fcf04ee468b9a">data</a> = &amp;bl;</div>
<div class="line"><a id="l02188" name="l02188"></a><span class="lineno"> 2188</span> </div>
<div class="line"><a id="l02189" name="l02189"></a><span class="lineno"> 2189</span>    ret = obj_op.<a class="code hl_function" href="struct_r_g_w_rados_1_1_object_1_1_write.html#abe774f2d8819c203804a0a7a7ab1426d">write_meta</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, bl.length(), 0, <a class="code hl_variable" href="classrgw_1_1sal_1_1_object.html#a89d6b720b87f91663d142ba7a6dce9ca">attrs</a>, y);</div>
<div class="line"><a id="l02190" name="l02190"></a><span class="lineno"> 2190</span>  } <span class="keywordflow">while</span> (ret == -EEXIST);</div>
<div class="line"><a id="l02191" name="l02191"></a><span class="lineno"> 2191</span> </div>
<div class="line"><a id="l02192" name="l02192"></a><span class="lineno"> 2192</span>  <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l02193" name="l02193"></a><span class="lineno"> 2193</span>}</div>
</div>
<div class="line"><a id="l02194" name="l02194"></a><span class="lineno"> 2194</span> </div>
<div class="foldopen" id="foldopen02195" data-start="{" data-end="}">
<div class="line"><a id="l02195" name="l02195"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_multipart_upload.html#a33912e38bf3f41d98329b8057763e01b"> 2195</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_multipart_upload.html#a33912e38bf3f41d98329b8057763e01b">RadosMultipartUpload::list_parts</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, CephContext *<a class="code hl_variable" href="cls__fifo__legacy_8cc.html#aa76801f7597f40e158b5f38b2e6466c5">cct</a>,</div>
<div class="line"><a id="l02196" name="l02196"></a><span class="lineno"> 2196</span>                     <span class="keywordtype">int</span> num_parts, <span class="keywordtype">int</span> marker,</div>
<div class="line"><a id="l02197" name="l02197"></a><span class="lineno"> 2197</span>                     <span class="keywordtype">int</span> *next_marker, <span class="keywordtype">bool</span> *truncated,</div>
<div class="line"><a id="l02198" name="l02198"></a><span class="lineno"> 2198</span>                     <span class="keywordtype">bool</span> assume_unsorted)</div>
<div class="line"><a id="l02199" name="l02199"></a><span class="lineno"> 2199</span>{</div>
<div class="line"><a id="l02200" name="l02200"></a><span class="lineno"> 2200</span>  map&lt;string, bufferlist&gt; parts_map;</div>
<div class="line"><a id="l02201" name="l02201"></a><span class="lineno"> 2201</span>  map&lt;string, bufferlist&gt;::iterator iter;</div>
<div class="line"><a id="l02202" name="l02202"></a><span class="lineno"> 2202</span> </div>
<div class="line"><a id="l02203" name="l02203"></a><span class="lineno"> 2203</span>  std::unique_ptr&lt;rgw::sal::Object&gt; obj = <a class="code hl_variable" href="classrgw_1_1sal_1_1_object.html#a52293de292e4be4ee0d7d33e92212409">bucket</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_bucket.html#ad2d2f55d5bc0e8da377f2d9342c0ec13">get_object</a>(</div>
<div class="line"><a id="l02204" name="l02204"></a><span class="lineno"> 2204</span>              <a class="code hl_struct" href="structrgw__obj__key.html">rgw_obj_key</a>(get_meta(), std::string(), <a class="code hl_define" href="rgw__rados_8h.html#ae0aa963272f470d3884b7a4160593740">RGW_OBJ_NS_MULTIPART</a>));</div>
<div class="line"><a id="l02205" name="l02205"></a><span class="lineno"> 2205</span>  obj-&gt;set_in_extra_data(<span class="keyword">true</span>);</div>
<div class="line"><a id="l02206" name="l02206"></a><span class="lineno"> 2206</span> </div>
<div class="line"><a id="l02207" name="l02207"></a><span class="lineno"> 2207</span>  <span class="keywordtype">bool</span> sorted_omap = <a class="code hl_function" href="rgw__multi_8cc.html#a037d1c2f95c646153e9fc9307940b1e4">is_v2_upload_id</a>(get_upload_id()) &amp;&amp; !assume_unsorted;</div>
<div class="line"><a id="l02208" name="l02208"></a><span class="lineno"> 2208</span> </div>
<div class="line"><a id="l02209" name="l02209"></a><span class="lineno"> 2209</span>  parts.clear();</div>
<div class="line"><a id="l02210" name="l02210"></a><span class="lineno"> 2210</span> </div>
<div class="line"><a id="l02211" name="l02211"></a><span class="lineno"> 2211</span>  <span class="keywordtype">int</span> ret;</div>
<div class="line"><a id="l02212" name="l02212"></a><span class="lineno"> 2212</span>  <span class="keywordflow">if</span> (sorted_omap) {</div>
<div class="line"><a id="l02213" name="l02213"></a><span class="lineno"> 2213</span>    <span class="keywordtype">string</span> p;</div>
<div class="line"><a id="l02214" name="l02214"></a><span class="lineno"> 2214</span>    p = <span class="stringliteral">&quot;part.&quot;</span>;</div>
<div class="line"><a id="l02215" name="l02215"></a><span class="lineno"> 2215</span>    <span class="keywordtype">char</span> buf[32];</div>
<div class="line"><a id="l02216" name="l02216"></a><span class="lineno"> 2216</span> </div>
<div class="line"><a id="l02217" name="l02217"></a><span class="lineno"> 2217</span>    snprintf(buf, <span class="keyword">sizeof</span>(buf), <span class="stringliteral">&quot;%08d&quot;</span>, marker);</div>
<div class="line"><a id="l02218" name="l02218"></a><span class="lineno"> 2218</span>    p.append(buf);</div>
<div class="line"><a id="l02219" name="l02219"></a><span class="lineno"> 2219</span> </div>
<div class="line"><a id="l02220" name="l02220"></a><span class="lineno"> 2220</span>    ret = obj-&gt;omap_get_vals(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, p, num_parts + 1, &amp;parts_map,</div>
<div class="line"><a id="l02221" name="l02221"></a><span class="lineno"> 2221</span>                                 <span class="keyword">nullptr</span>, null_yield);</div>
<div class="line"><a id="l02222" name="l02222"></a><span class="lineno"> 2222</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02223" name="l02223"></a><span class="lineno"> 2223</span>    ret = obj-&gt;omap_get_all(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, &amp;parts_map, null_yield);</div>
<div class="line"><a id="l02224" name="l02224"></a><span class="lineno"> 2224</span>  }</div>
<div class="line"><a id="l02225" name="l02225"></a><span class="lineno"> 2225</span>  <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line"><a id="l02226" name="l02226"></a><span class="lineno"> 2226</span>    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l02227" name="l02227"></a><span class="lineno"> 2227</span>  }</div>
<div class="line"><a id="l02228" name="l02228"></a><span class="lineno"> 2228</span> </div>
<div class="line"><a id="l02229" name="l02229"></a><span class="lineno"> 2229</span>  <span class="keywordtype">int</span> i;</div>
<div class="line"><a id="l02230" name="l02230"></a><span class="lineno"> 2230</span>  <span class="keywordtype">int</span> last_num = 0;</div>
<div class="line"><a id="l02231" name="l02231"></a><span class="lineno"> 2231</span> </div>
<div class="line"><a id="l02232" name="l02232"></a><span class="lineno"> 2232</span>  uint32_t expected_next = marker + 1;</div>
<div class="line"><a id="l02233" name="l02233"></a><span class="lineno"> 2233</span> </div>
<div class="line"><a id="l02234" name="l02234"></a><span class="lineno"> 2234</span>  <span class="keywordflow">for</span> (i = 0, iter = parts_map.begin();</div>
<div class="line"><a id="l02235" name="l02235"></a><span class="lineno"> 2235</span>       (i &lt; num_parts || !sorted_omap) &amp;&amp; iter != parts_map.end();</div>
<div class="line"><a id="l02236" name="l02236"></a><span class="lineno"> 2236</span>       ++iter, ++i) {</div>
<div class="line"><a id="l02237" name="l02237"></a><span class="lineno"> 2237</span>    bufferlist&amp; bl = iter-&gt;second;</div>
<div class="line"><a id="l02238" name="l02238"></a><span class="lineno"> 2238</span>    <span class="keyword">auto</span> bli = bl.cbegin();</div>
<div class="line"><a id="l02239" name="l02239"></a><span class="lineno"> 2239</span>    std::unique_ptr&lt;RadosMultipartPart&gt; part = std::make_unique&lt;RadosMultipartPart&gt;();</div>
<div class="line"><a id="l02240" name="l02240"></a><span class="lineno"> 2240</span>    <span class="keywordflow">try</span> {</div>
<div class="line"><a id="l02241" name="l02241"></a><span class="lineno"> 2241</span>      <a class="code hl_function" href="namespacergw.html#a49e77e75ed539fdbde0dcc092bb76467">decode</a>(part-&gt;info, bli);</div>
<div class="line"><a id="l02242" name="l02242"></a><span class="lineno"> 2242</span>    } <span class="keywordflow">catch</span> (buffer::error&amp; err) {</div>
<div class="line"><a id="l02243" name="l02243"></a><span class="lineno"> 2243</span>      ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 0) &lt;&lt; <span class="stringliteral">&quot;ERROR: could not part info, caught buffer::error&quot;</span> &lt;&lt;</div>
<div class="line"><a id="l02244" name="l02244"></a><span class="lineno"> 2244</span>    dendl;</div>
<div class="line"><a id="l02245" name="l02245"></a><span class="lineno"> 2245</span>      <span class="keywordflow">return</span> -EIO;</div>
<div class="line"><a id="l02246" name="l02246"></a><span class="lineno"> 2246</span>    }</div>
<div class="line"><a id="l02247" name="l02247"></a><span class="lineno"> 2247</span>    <span class="keywordflow">if</span> (sorted_omap) {</div>
<div class="line"><a id="l02248" name="l02248"></a><span class="lineno"> 2248</span>      <span class="keywordflow">if</span> (part-&gt;info.num != expected_next) {</div>
<div class="line"><a id="l02249" name="l02249"></a><span class="lineno"> 2249</span>        <span class="comment">/* ouch, we expected a specific part num here, but we got a</span></div>
<div class="line"><a id="l02250" name="l02250"></a><span class="lineno"> 2250</span><span class="comment">         * different one. Either a part is missing, or it could be a</span></div>
<div class="line"><a id="l02251" name="l02251"></a><span class="lineno"> 2251</span><span class="comment">         * case of mixed rgw versions working on the same upload,</span></div>
<div class="line"><a id="l02252" name="l02252"></a><span class="lineno"> 2252</span><span class="comment">         * where one gateway doesn&#39;t support correctly sorted omap</span></div>
<div class="line"><a id="l02253" name="l02253"></a><span class="lineno"> 2253</span><span class="comment">         * keys for multipart upload just assume data is unsorted.</span></div>
<div class="line"><a id="l02254" name="l02254"></a><span class="lineno"> 2254</span><span class="comment">         */</span></div>
<div class="line"><a id="l02255" name="l02255"></a><span class="lineno"> 2255</span>        <span class="keywordflow">return</span> list_parts(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_variable" href="cls__fifo__legacy_8cc.html#aa76801f7597f40e158b5f38b2e6466c5">cct</a>, num_parts, marker, next_marker, truncated, <span class="keyword">true</span>);</div>
<div class="line"><a id="l02256" name="l02256"></a><span class="lineno"> 2256</span>      }</div>
<div class="line"><a id="l02257" name="l02257"></a><span class="lineno"> 2257</span>      expected_next++;</div>
<div class="line"><a id="l02258" name="l02258"></a><span class="lineno"> 2258</span>    }</div>
<div class="line"><a id="l02259" name="l02259"></a><span class="lineno"> 2259</span>    <span class="keywordflow">if</span> (sorted_omap ||</div>
<div class="line"><a id="l02260" name="l02260"></a><span class="lineno"> 2260</span>      (<span class="keywordtype">int</span>)part-&gt;info.num &gt; marker) {</div>
<div class="line"><a id="l02261" name="l02261"></a><span class="lineno"> 2261</span>      last_num = part-&gt;info.num;</div>
<div class="line"><a id="l02262" name="l02262"></a><span class="lineno"> 2262</span>      parts[part-&gt;info.num] = std::move(part);</div>
<div class="line"><a id="l02263" name="l02263"></a><span class="lineno"> 2263</span>    }</div>
<div class="line"><a id="l02264" name="l02264"></a><span class="lineno"> 2264</span>  }</div>
<div class="line"><a id="l02265" name="l02265"></a><span class="lineno"> 2265</span> </div>
<div class="line"><a id="l02266" name="l02266"></a><span class="lineno"> 2266</span>  <span class="keywordflow">if</span> (sorted_omap) {</div>
<div class="line"><a id="l02267" name="l02267"></a><span class="lineno"> 2267</span>    <span class="keywordflow">if</span> (truncated) {</div>
<div class="line"><a id="l02268" name="l02268"></a><span class="lineno"> 2268</span>      *truncated = (iter != parts_map.end());</div>
<div class="line"><a id="l02269" name="l02269"></a><span class="lineno"> 2269</span>    }</div>
<div class="line"><a id="l02270" name="l02270"></a><span class="lineno"> 2270</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02271" name="l02271"></a><span class="lineno"> 2271</span>    <span class="comment">/* rebuild a map with only num_parts entries */</span></div>
<div class="line"><a id="l02272" name="l02272"></a><span class="lineno"> 2272</span>    std::map&lt;uint32_t, std::unique_ptr&lt;MultipartPart&gt;&gt; new_parts;</div>
<div class="line"><a id="l02273" name="l02273"></a><span class="lineno"> 2273</span>    std::map&lt;uint32_t, std::unique_ptr&lt;MultipartPart&gt;&gt;::iterator piter;</div>
<div class="line"><a id="l02274" name="l02274"></a><span class="lineno"> 2274</span>    <span class="keywordflow">for</span> (i = 0, piter = parts.begin();</div>
<div class="line"><a id="l02275" name="l02275"></a><span class="lineno"> 2275</span>     i &lt; num_parts &amp;&amp; piter != parts.end();</div>
<div class="line"><a id="l02276" name="l02276"></a><span class="lineno"> 2276</span>     ++i, ++piter) {</div>
<div class="line"><a id="l02277" name="l02277"></a><span class="lineno"> 2277</span>      last_num = piter-&gt;first;</div>
<div class="line"><a id="l02278" name="l02278"></a><span class="lineno"> 2278</span>      new_parts[piter-&gt;first] = std::move(piter-&gt;second);</div>
<div class="line"><a id="l02279" name="l02279"></a><span class="lineno"> 2279</span>    }</div>
<div class="line"><a id="l02280" name="l02280"></a><span class="lineno"> 2280</span> </div>
<div class="line"><a id="l02281" name="l02281"></a><span class="lineno"> 2281</span>    <span class="keywordflow">if</span> (truncated) {</div>
<div class="line"><a id="l02282" name="l02282"></a><span class="lineno"> 2282</span>      *truncated = (piter != parts.end());</div>
<div class="line"><a id="l02283" name="l02283"></a><span class="lineno"> 2283</span>    }</div>
<div class="line"><a id="l02284" name="l02284"></a><span class="lineno"> 2284</span> </div>
<div class="line"><a id="l02285" name="l02285"></a><span class="lineno"> 2285</span>    parts.swap(new_parts);</div>
<div class="line"><a id="l02286" name="l02286"></a><span class="lineno"> 2286</span>  }</div>
<div class="line"><a id="l02287" name="l02287"></a><span class="lineno"> 2287</span> </div>
<div class="line"><a id="l02288" name="l02288"></a><span class="lineno"> 2288</span>  <span class="keywordflow">if</span> (next_marker) {</div>
<div class="line"><a id="l02289" name="l02289"></a><span class="lineno"> 2289</span>    *next_marker = last_num;</div>
<div class="line"><a id="l02290" name="l02290"></a><span class="lineno"> 2290</span>  }</div>
<div class="line"><a id="l02291" name="l02291"></a><span class="lineno"> 2291</span> </div>
<div class="line"><a id="l02292" name="l02292"></a><span class="lineno"> 2292</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l02293" name="l02293"></a><span class="lineno"> 2293</span>}</div>
</div>
<div class="line"><a id="l02294" name="l02294"></a><span class="lineno"> 2294</span> </div>
<div class="foldopen" id="foldopen02295" data-start="{" data-end="}">
<div class="line"><a id="l02295" name="l02295"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_multipart_upload.html#a1d0f8b14ed2fd88333f64885cd8a8fbf"> 2295</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_multipart_upload.html#a1d0f8b14ed2fd88333f64885cd8a8fbf">RadosMultipartUpload::complete</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>,</div>
<div class="line"><a id="l02296" name="l02296"></a><span class="lineno"> 2296</span>                   optional_yield y, CephContext* <a class="code hl_variable" href="cls__fifo__legacy_8cc.html#aa76801f7597f40e158b5f38b2e6466c5">cct</a>,</div>
<div class="line"><a id="l02297" name="l02297"></a><span class="lineno"> 2297</span>                   map&lt;int, string&gt;&amp; part_etags,</div>
<div class="line"><a id="l02298" name="l02298"></a><span class="lineno"> 2298</span>                   list&lt;rgw_obj_index_key&gt;&amp; remove_objs,</div>
<div class="line"><a id="l02299" name="l02299"></a><span class="lineno"> 2299</span>                   uint64_t&amp; accounted_size, <span class="keywordtype">bool</span>&amp; compressed,</div>
<div class="line"><a id="l02300" name="l02300"></a><span class="lineno"> 2300</span>                   <a class="code hl_struct" href="struct_r_g_w_compression_info.html">RGWCompressionInfo</a>&amp; cs_info, off_t&amp; ofs,</div>
<div class="line"><a id="l02301" name="l02301"></a><span class="lineno"> 2301</span>                   std::string&amp; tag, <a class="code hl_class" href="class_a_c_l_owner.html">ACLOwner</a>&amp; owner,</div>
<div class="line"><a id="l02302" name="l02302"></a><span class="lineno"> 2302</span>                   uint64_t olh_epoch,</div>
<div class="line"><a id="l02303" name="l02303"></a><span class="lineno"> 2303</span>                   <a class="code hl_class" href="classrgw_1_1sal_1_1_object.html">rgw::sal::Object</a>* target_obj,</div>
<div class="line"><a id="l02304" name="l02304"></a><span class="lineno"> 2304</span>                   <a class="code hl_class" href="class_r_g_w_object_ctx.html">RGWObjectCtx</a>* obj_ctx)</div>
<div class="line"><a id="l02305" name="l02305"></a><span class="lineno"> 2305</span>{</div>
<div class="line"><a id="l02306" name="l02306"></a><span class="lineno"> 2306</span>  <span class="keywordtype">char</span> final_etag[CEPH_CRYPTO_MD5_DIGESTSIZE];</div>
<div class="line"><a id="l02307" name="l02307"></a><span class="lineno"> 2307</span>  <span class="keywordtype">char</span> final_etag_str[CEPH_CRYPTO_MD5_DIGESTSIZE * 2 + 16];</div>
<div class="line"><a id="l02308" name="l02308"></a><span class="lineno"> 2308</span>  std::string etag;</div>
<div class="line"><a id="l02309" name="l02309"></a><span class="lineno"> 2309</span>  bufferlist etag_bl;</div>
<div class="line"><a id="l02310" name="l02310"></a><span class="lineno"> 2310</span>  MD5 hash;</div>
<div class="line"><a id="l02311" name="l02311"></a><span class="lineno"> 2311</span>  <span class="comment">// Allow use of MD5 digest in FIPS mode for non-cryptographic purposes</span></div>
<div class="line"><a id="l02312" name="l02312"></a><span class="lineno"> 2312</span>  hash.SetFlags(EVP_MD_CTX_FLAG_NON_FIPS_ALLOW);</div>
<div class="line"><a id="l02313" name="l02313"></a><span class="lineno"> 2313</span>  <span class="keywordtype">bool</span> truncated;</div>
<div class="line"><a id="l02314" name="l02314"></a><span class="lineno"> 2314</span>  <span class="keywordtype">int</span> ret;</div>
<div class="line"><a id="l02315" name="l02315"></a><span class="lineno"> 2315</span> </div>
<div class="line"><a id="l02316" name="l02316"></a><span class="lineno"> 2316</span>  <span class="keywordtype">int</span> total_parts = 0;</div>
<div class="line"><a id="l02317" name="l02317"></a><span class="lineno"> 2317</span>  <span class="keywordtype">int</span> handled_parts = 0;</div>
<div class="line"><a id="l02318" name="l02318"></a><span class="lineno"> 2318</span>  <span class="keywordtype">int</span> max_parts = 1000;</div>
<div class="line"><a id="l02319" name="l02319"></a><span class="lineno"> 2319</span>  <span class="keywordtype">int</span> marker = 0;</div>
<div class="line"><a id="l02320" name="l02320"></a><span class="lineno"> 2320</span>  uint64_t min_part_size = <a class="code hl_variable" href="cls__fifo__legacy_8cc.html#aa76801f7597f40e158b5f38b2e6466c5">cct</a>-&gt;_conf-&gt;rgw_multipart_min_part_size;</div>
<div class="line"><a id="l02321" name="l02321"></a><span class="lineno"> 2321</span>  <span class="keyword">auto</span> etags_iter = part_etags.begin();</div>
<div class="line"><a id="l02322" name="l02322"></a><span class="lineno"> 2322</span>  <a class="code hl_typedef" href="group___r_g_w_s_a_l.html#gab1b58d5f8747844fae5ddfb48fadf7bc">rgw::sal::Attrs</a> <a class="code hl_variable" href="classrgw_1_1sal_1_1_object.html#a89d6b720b87f91663d142ba7a6dce9ca">attrs</a> = target_obj-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_object.html#aa8e83e47dd8615028e1eec9d9d7f8ec4">get_attrs</a>();</div>
<div class="line"><a id="l02323" name="l02323"></a><span class="lineno"> 2323</span> </div>
<div class="line"><a id="l02324" name="l02324"></a><span class="lineno"> 2324</span>  <span class="keywordflow">do</span> {</div>
<div class="line"><a id="l02325" name="l02325"></a><span class="lineno"> 2325</span>    ret = list_parts(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_variable" href="cls__fifo__legacy_8cc.html#aa76801f7597f40e158b5f38b2e6466c5">cct</a>, max_parts, marker, &amp;marker, &amp;truncated);</div>
<div class="line"><a id="l02326" name="l02326"></a><span class="lineno"> 2326</span>    <span class="keywordflow">if</span> (ret == -ENOENT) {</div>
<div class="line"><a id="l02327" name="l02327"></a><span class="lineno"> 2327</span>      ret = -<a class="code hl_define" href="rgw__common_8h.html#a5670bf112bcf5bd63ff0c8bcafd09b87">ERR_NO_SUCH_UPLOAD</a>;</div>
<div class="line"><a id="l02328" name="l02328"></a><span class="lineno"> 2328</span>    }</div>
<div class="line"><a id="l02329" name="l02329"></a><span class="lineno"> 2329</span>    <span class="keywordflow">if</span> (ret &lt; 0)</div>
<div class="line"><a id="l02330" name="l02330"></a><span class="lineno"> 2330</span>      <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l02331" name="l02331"></a><span class="lineno"> 2331</span> </div>
<div class="line"><a id="l02332" name="l02332"></a><span class="lineno"> 2332</span>    total_parts += parts.size();</div>
<div class="line"><a id="l02333" name="l02333"></a><span class="lineno"> 2333</span>    <span class="keywordflow">if</span> (!truncated &amp;&amp; total_parts != (<span class="keywordtype">int</span>)part_etags.size()) {</div>
<div class="line"><a id="l02334" name="l02334"></a><span class="lineno"> 2334</span>      ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 0) &lt;&lt; <span class="stringliteral">&quot;NOTICE: total parts mismatch: have: &quot;</span> &lt;&lt; total_parts</div>
<div class="line"><a id="l02335" name="l02335"></a><span class="lineno"> 2335</span>               &lt;&lt; <span class="stringliteral">&quot; expected: &quot;</span> &lt;&lt; part_etags.size() &lt;&lt; dendl;</div>
<div class="line"><a id="l02336" name="l02336"></a><span class="lineno"> 2336</span>      ret = -<a class="code hl_define" href="rgw__common_8h.html#ad649463d89c29411a117577fd7eb9ebd">ERR_INVALID_PART</a>;</div>
<div class="line"><a id="l02337" name="l02337"></a><span class="lineno"> 2337</span>      <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l02338" name="l02338"></a><span class="lineno"> 2338</span>    }</div>
<div class="line"><a id="l02339" name="l02339"></a><span class="lineno"> 2339</span> </div>
<div class="line"><a id="l02340" name="l02340"></a><span class="lineno"> 2340</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> obj_iter = parts.begin(); etags_iter != part_etags.end() &amp;&amp; obj_iter != parts.end(); ++etags_iter, ++obj_iter, ++handled_parts) {</div>
<div class="line"><a id="l02341" name="l02341"></a><span class="lineno"> 2341</span>      <a class="code hl_class" href="classrgw_1_1sal_1_1_rados_multipart_part.html">RadosMultipartPart</a>* part = <span class="keyword">dynamic_cast&lt;</span><a class="code hl_class" href="classrgw_1_1sal_1_1_rados_multipart_part.html">rgw::sal::RadosMultipartPart</a>*<span class="keyword">&gt;</span>(obj_iter-&gt;second.get());</div>
<div class="line"><a id="l02342" name="l02342"></a><span class="lineno"> 2342</span>      uint64_t part_size = part-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_multipart_part.html#a8aadda0afb479f7b9d81e9bd4dcbf646">get_size</a>();</div>
<div class="line"><a id="l02343" name="l02343"></a><span class="lineno"> 2343</span>      <span class="keywordflow">if</span> (handled_parts &lt; (<span class="keywordtype">int</span>)part_etags.size() - 1 &amp;&amp;</div>
<div class="line"><a id="l02344" name="l02344"></a><span class="lineno"> 2344</span>          part_size &lt; min_part_size) {</div>
<div class="line"><a id="l02345" name="l02345"></a><span class="lineno"> 2345</span>        ret = -<a class="code hl_define" href="rgw__common_8h.html#a09ae9bc8466fcf06b5904c7a737e0552">ERR_TOO_SMALL</a>;</div>
<div class="line"><a id="l02346" name="l02346"></a><span class="lineno"> 2346</span>        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l02347" name="l02347"></a><span class="lineno"> 2347</span>      }</div>
<div class="line"><a id="l02348" name="l02348"></a><span class="lineno"> 2348</span> </div>
<div class="line"><a id="l02349" name="l02349"></a><span class="lineno"> 2349</span>      <span class="keywordtype">char</span> petag[CEPH_CRYPTO_MD5_DIGESTSIZE];</div>
<div class="line"><a id="l02350" name="l02350"></a><span class="lineno"> 2350</span>      <span class="keywordflow">if</span> (etags_iter-&gt;first != (<span class="keywordtype">int</span>)obj_iter-&gt;first) {</div>
<div class="line"><a id="l02351" name="l02351"></a><span class="lineno"> 2351</span>        ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 0) &lt;&lt; <span class="stringliteral">&quot;NOTICE: parts num mismatch: next requested: &quot;</span></div>
<div class="line"><a id="l02352" name="l02352"></a><span class="lineno"> 2352</span>             &lt;&lt; etags_iter-&gt;first &lt;&lt; <span class="stringliteral">&quot; next uploaded: &quot;</span></div>
<div class="line"><a id="l02353" name="l02353"></a><span class="lineno"> 2353</span>             &lt;&lt; obj_iter-&gt;first &lt;&lt; dendl;</div>
<div class="line"><a id="l02354" name="l02354"></a><span class="lineno"> 2354</span>        ret = -<a class="code hl_define" href="rgw__common_8h.html#ad649463d89c29411a117577fd7eb9ebd">ERR_INVALID_PART</a>;</div>
<div class="line"><a id="l02355" name="l02355"></a><span class="lineno"> 2355</span>        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l02356" name="l02356"></a><span class="lineno"> 2356</span>      }</div>
<div class="line"><a id="l02357" name="l02357"></a><span class="lineno"> 2357</span>      <span class="keywordtype">string</span> part_etag = <a class="code hl_function" href="rgw__common_8cc.html#aed9fc4dbe90c2768fde11f826bc8926a">rgw_string_unquote</a>(etags_iter-&gt;second);</div>
<div class="line"><a id="l02358" name="l02358"></a><span class="lineno"> 2358</span>      <span class="keywordflow">if</span> (part_etag.compare(part-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_multipart_part.html#a6c9d887b2ed521c7433e7c79380fd8da">get_etag</a>()) != 0) {</div>
<div class="line"><a id="l02359" name="l02359"></a><span class="lineno"> 2359</span>        ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 0) &lt;&lt; <span class="stringliteral">&quot;NOTICE: etag mismatch: part: &quot;</span> &lt;&lt; etags_iter-&gt;first</div>
<div class="line"><a id="l02360" name="l02360"></a><span class="lineno"> 2360</span>             &lt;&lt; <span class="stringliteral">&quot; etag: &quot;</span> &lt;&lt; etags_iter-&gt;second &lt;&lt; dendl;</div>
<div class="line"><a id="l02361" name="l02361"></a><span class="lineno"> 2361</span>        ret = -<a class="code hl_define" href="rgw__common_8h.html#ad649463d89c29411a117577fd7eb9ebd">ERR_INVALID_PART</a>;</div>
<div class="line"><a id="l02362" name="l02362"></a><span class="lineno"> 2362</span>        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l02363" name="l02363"></a><span class="lineno"> 2363</span>      }</div>
<div class="line"><a id="l02364" name="l02364"></a><span class="lineno"> 2364</span> </div>
<div class="line"><a id="l02365" name="l02365"></a><span class="lineno"> 2365</span>      <a class="code hl_function" href="rgw__common_8h.html#a4bc9629a22d328ea8a54466e35e86c89">hex_to_buf</a>(part-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_multipart_part.html#a6c9d887b2ed521c7433e7c79380fd8da">get_etag</a>().c_str(), petag,</div>
<div class="line"><a id="l02366" name="l02366"></a><span class="lineno"> 2366</span>        CEPH_CRYPTO_MD5_DIGESTSIZE);</div>
<div class="line"><a id="l02367" name="l02367"></a><span class="lineno"> 2367</span>      hash.Update((<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)petag, <span class="keyword">sizeof</span>(petag));</div>
<div class="line"><a id="l02368" name="l02368"></a><span class="lineno"> 2368</span> </div>
<div class="line"><a id="l02369" name="l02369"></a><span class="lineno"> 2369</span>      <a class="code hl_struct" href="struct_r_g_w_upload_part_info.html">RGWUploadPartInfo</a>&amp; obj_part = part-&gt;<a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_multipart_part.html#a4fec3bcff3b70e9199e6af186669542a">info</a>;</div>
<div class="line"><a id="l02370" name="l02370"></a><span class="lineno"> 2370</span> </div>
<div class="line"><a id="l02371" name="l02371"></a><span class="lineno"> 2371</span>      <span class="comment">/* update manifest for part */</span></div>
<div class="line"><a id="l02372" name="l02372"></a><span class="lineno"> 2372</span>      <span class="keywordtype">string</span> oid = mp_obj.get_part(part-&gt;<a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_multipart_part.html#a4fec3bcff3b70e9199e6af186669542a">info</a>.<a class="code hl_variable" href="struct_r_g_w_upload_part_info.html#a0db2926c77334cbba5cd09959fba3287">num</a>);</div>
<div class="line"><a id="l02373" name="l02373"></a><span class="lineno"> 2373</span>      <a class="code hl_struct" href="structrgw__obj.html">rgw_obj</a> src_obj;</div>
<div class="line"><a id="l02374" name="l02374"></a><span class="lineno"> 2374</span>      src_obj.<a class="code hl_function" href="structrgw__obj.html#ace6f013fe28b634ee9e4257c728ffb12">init_ns</a>(<a class="code hl_variable" href="classrgw_1_1sal_1_1_object.html#a52293de292e4be4ee0d7d33e92212409">bucket</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_bucket.html#a0fbf4f16a181a9f8d58d1d75fb8dff2d">get_key</a>(), oid, <a class="code hl_variable" href="namespacergw_1_1sal.html#a104d6b556f1eca2030a571aa28226b8f">mp_ns</a>);</div>
<div class="line"><a id="l02375" name="l02375"></a><span class="lineno"> 2375</span> </div>
<div class="line"><a id="l02376" name="l02376"></a><span class="lineno"> 2376</span>      <span class="keywordflow">if</span> (obj_part.<a class="code hl_variable" href="struct_r_g_w_upload_part_info.html#a1bcc15674b18ccafc2c4e62564d866de">manifest</a>.<a class="code hl_function" href="class_r_g_w_obj_manifest.html#a1ffd4d0344f4951313d763bd0421daac">empty</a>()) {</div>
<div class="line"><a id="l02377" name="l02377"></a><span class="lineno"> 2377</span>        ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 0) &lt;&lt; <span class="stringliteral">&quot;ERROR: empty manifest for object part: obj=&quot;</span></div>
<div class="line"><a id="l02378" name="l02378"></a><span class="lineno"> 2378</span>             &lt;&lt; src_obj &lt;&lt; dendl;</div>
<div class="line"><a id="l02379" name="l02379"></a><span class="lineno"> 2379</span>        ret = -<a class="code hl_define" href="rgw__common_8h.html#ad649463d89c29411a117577fd7eb9ebd">ERR_INVALID_PART</a>;</div>
<div class="line"><a id="l02380" name="l02380"></a><span class="lineno"> 2380</span>        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l02381" name="l02381"></a><span class="lineno"> 2381</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02382" name="l02382"></a><span class="lineno"> 2382</span>        manifest.append(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, obj_part.<a class="code hl_variable" href="struct_r_g_w_upload_part_info.html#a1bcc15674b18ccafc2c4e62564d866de">manifest</a>, <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_object.html#abf23dd6aa5878ba92af569a0a7c5c5c0">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aaecd01256c4639f8b8c31231022baef0">get_zone</a>());</div>
<div class="line"><a id="l02383" name="l02383"></a><span class="lineno"> 2383</span>      }</div>
<div class="line"><a id="l02384" name="l02384"></a><span class="lineno"> 2384</span> </div>
<div class="line"><a id="l02385" name="l02385"></a><span class="lineno"> 2385</span>      <span class="keywordtype">bool</span> part_compressed = (obj_part.<a class="code hl_variable" href="struct_r_g_w_upload_part_info.html#aaf26cc07f9ae4c220e72fe438fdbb678">cs_info</a>.<a class="code hl_variable" href="struct_r_g_w_compression_info.html#a6d3afe42b85629af14af100146896a85">compression_type</a> != <span class="stringliteral">&quot;none&quot;</span>);</div>
<div class="line"><a id="l02386" name="l02386"></a><span class="lineno"> 2386</span>      <span class="keywordflow">if</span> ((handled_parts &gt; 0) &amp;&amp;</div>
<div class="line"><a id="l02387" name="l02387"></a><span class="lineno"> 2387</span>          ((part_compressed != compressed) ||</div>
<div class="line"><a id="l02388" name="l02388"></a><span class="lineno"> 2388</span>            (cs_info.<a class="code hl_variable" href="struct_r_g_w_compression_info.html#a6d3afe42b85629af14af100146896a85">compression_type</a> != obj_part.<a class="code hl_variable" href="struct_r_g_w_upload_part_info.html#aaf26cc07f9ae4c220e72fe438fdbb678">cs_info</a>.<a class="code hl_variable" href="struct_r_g_w_compression_info.html#a6d3afe42b85629af14af100146896a85">compression_type</a>))) {</div>
<div class="line"><a id="l02389" name="l02389"></a><span class="lineno"> 2389</span>          ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 0) &lt;&lt; <span class="stringliteral">&quot;ERROR: compression type was changed during multipart upload (&quot;</span></div>
<div class="line"><a id="l02390" name="l02390"></a><span class="lineno"> 2390</span>                           &lt;&lt; cs_info.<a class="code hl_variable" href="struct_r_g_w_compression_info.html#a6d3afe42b85629af14af100146896a85">compression_type</a> &lt;&lt; <span class="stringliteral">&quot;&gt;&gt;&quot;</span> &lt;&lt; obj_part.<a class="code hl_variable" href="struct_r_g_w_upload_part_info.html#aaf26cc07f9ae4c220e72fe438fdbb678">cs_info</a>.<a class="code hl_variable" href="struct_r_g_w_compression_info.html#a6d3afe42b85629af14af100146896a85">compression_type</a> &lt;&lt; <span class="stringliteral">&quot;)&quot;</span> &lt;&lt; dendl;</div>
<div class="line"><a id="l02391" name="l02391"></a><span class="lineno"> 2391</span>          ret = -<a class="code hl_define" href="rgw__common_8h.html#ad649463d89c29411a117577fd7eb9ebd">ERR_INVALID_PART</a>;</div>
<div class="line"><a id="l02392" name="l02392"></a><span class="lineno"> 2392</span>          <span class="keywordflow">return</span> ret; </div>
<div class="line"><a id="l02393" name="l02393"></a><span class="lineno"> 2393</span>      }</div>
<div class="line"><a id="l02394" name="l02394"></a><span class="lineno"> 2394</span>      </div>
<div class="line"><a id="l02395" name="l02395"></a><span class="lineno"> 2395</span>      <span class="keywordflow">if</span> (part_compressed) {</div>
<div class="line"><a id="l02396" name="l02396"></a><span class="lineno"> 2396</span>        int64_t new_ofs; <span class="comment">// offset in compression data for new part</span></div>
<div class="line"><a id="l02397" name="l02397"></a><span class="lineno"> 2397</span>        <span class="keywordflow">if</span> (cs_info.<a class="code hl_variable" href="struct_r_g_w_compression_info.html#a2752af611a9e29a814e204980d2b650c">blocks</a>.size() &gt; 0)</div>
<div class="line"><a id="l02398" name="l02398"></a><span class="lineno"> 2398</span>          new_ofs = cs_info.<a class="code hl_variable" href="struct_r_g_w_compression_info.html#a2752af611a9e29a814e204980d2b650c">blocks</a>.back().new_ofs + cs_info.<a class="code hl_variable" href="struct_r_g_w_compression_info.html#a2752af611a9e29a814e204980d2b650c">blocks</a>.back().len;</div>
<div class="line"><a id="l02399" name="l02399"></a><span class="lineno"> 2399</span>        <span class="keywordflow">else</span></div>
<div class="line"><a id="l02400" name="l02400"></a><span class="lineno"> 2400</span>          new_ofs = 0;</div>
<div class="line"><a id="l02401" name="l02401"></a><span class="lineno"> 2401</span>        <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; block : obj_part.<a class="code hl_variable" href="struct_r_g_w_upload_part_info.html#aaf26cc07f9ae4c220e72fe438fdbb678">cs_info</a>.<a class="code hl_variable" href="struct_r_g_w_compression_info.html#a2752af611a9e29a814e204980d2b650c">blocks</a>) {</div>
<div class="line"><a id="l02402" name="l02402"></a><span class="lineno"> 2402</span>          <a class="code hl_struct" href="structcompression__block.html">compression_block</a> cb;</div>
<div class="line"><a id="l02403" name="l02403"></a><span class="lineno"> 2403</span>          cb.<a class="code hl_variable" href="structcompression__block.html#a69e5d20533a7f6b924a44906a5b079e6">old_ofs</a> = block.old_ofs + cs_info.<a class="code hl_variable" href="struct_r_g_w_compression_info.html#af6dd0684c8b02536770c7c2a5e5901fa">orig_size</a>;</div>
<div class="line"><a id="l02404" name="l02404"></a><span class="lineno"> 2404</span>          cb.<a class="code hl_variable" href="structcompression__block.html#a502543516bd3809ef014bc1d3c088440">new_ofs</a> = new_ofs;</div>
<div class="line"><a id="l02405" name="l02405"></a><span class="lineno"> 2405</span>          cb.<a class="code hl_variable" href="structcompression__block.html#a90eed5cc6cdb15811e815f1e393aa7c0">len</a> = block.len;</div>
<div class="line"><a id="l02406" name="l02406"></a><span class="lineno"> 2406</span>          cs_info.<a class="code hl_variable" href="struct_r_g_w_compression_info.html#a2752af611a9e29a814e204980d2b650c">blocks</a>.push_back(cb);</div>
<div class="line"><a id="l02407" name="l02407"></a><span class="lineno"> 2407</span>          new_ofs = cb.<a class="code hl_variable" href="structcompression__block.html#a502543516bd3809ef014bc1d3c088440">new_ofs</a> + cb.<a class="code hl_variable" href="structcompression__block.html#a90eed5cc6cdb15811e815f1e393aa7c0">len</a>;</div>
<div class="line"><a id="l02408" name="l02408"></a><span class="lineno"> 2408</span>        } </div>
<div class="line"><a id="l02409" name="l02409"></a><span class="lineno"> 2409</span>        <span class="keywordflow">if</span> (!compressed)</div>
<div class="line"><a id="l02410" name="l02410"></a><span class="lineno"> 2410</span>          cs_info.<a class="code hl_variable" href="struct_r_g_w_compression_info.html#a6d3afe42b85629af14af100146896a85">compression_type</a> = obj_part.<a class="code hl_variable" href="struct_r_g_w_upload_part_info.html#aaf26cc07f9ae4c220e72fe438fdbb678">cs_info</a>.<a class="code hl_variable" href="struct_r_g_w_compression_info.html#a6d3afe42b85629af14af100146896a85">compression_type</a>;</div>
<div class="line"><a id="l02411" name="l02411"></a><span class="lineno"> 2411</span>        cs_info.<a class="code hl_variable" href="struct_r_g_w_compression_info.html#af6dd0684c8b02536770c7c2a5e5901fa">orig_size</a> += obj_part.<a class="code hl_variable" href="struct_r_g_w_upload_part_info.html#aaf26cc07f9ae4c220e72fe438fdbb678">cs_info</a>.<a class="code hl_variable" href="struct_r_g_w_compression_info.html#af6dd0684c8b02536770c7c2a5e5901fa">orig_size</a>;</div>
<div class="line"><a id="l02412" name="l02412"></a><span class="lineno"> 2412</span>        compressed = <span class="keyword">true</span>;</div>
<div class="line"><a id="l02413" name="l02413"></a><span class="lineno"> 2413</span>      }</div>
<div class="line"><a id="l02414" name="l02414"></a><span class="lineno"> 2414</span> </div>
<div class="line"><a id="l02415" name="l02415"></a><span class="lineno"> 2415</span>      <a class="code hl_typedef" href="rgw__common_8h.html#a7020478e92d985c3f78e2ae9e5481f0a">rgw_obj_index_key</a> remove_key;</div>
<div class="line"><a id="l02416" name="l02416"></a><span class="lineno"> 2416</span>      src_obj.<a class="code hl_variable" href="structrgw__obj.html#a72f701ee22f8eb3f3868d0aefb581249">key</a>.<a class="code hl_function" href="structrgw__obj__key.html#a25f11d321b80d9c0fa03d2358d261dd4">get_index_key</a>(&amp;remove_key);</div>
<div class="line"><a id="l02417" name="l02417"></a><span class="lineno"> 2417</span> </div>
<div class="line"><a id="l02418" name="l02418"></a><span class="lineno"> 2418</span>      remove_objs.push_back(remove_key);</div>
<div class="line"><a id="l02419" name="l02419"></a><span class="lineno"> 2419</span> </div>
<div class="line"><a id="l02420" name="l02420"></a><span class="lineno"> 2420</span>      ofs += obj_part.<a class="code hl_variable" href="struct_r_g_w_upload_part_info.html#aacb6fa4f5eba4d3c3a8ea2d45002bb5f">size</a>;</div>
<div class="line"><a id="l02421" name="l02421"></a><span class="lineno"> 2421</span>      accounted_size += obj_part.<a class="code hl_variable" href="struct_r_g_w_upload_part_info.html#a56a2f73e2eac9900001fe21692ce9ac0">accounted_size</a>;</div>
<div class="line"><a id="l02422" name="l02422"></a><span class="lineno"> 2422</span>    }</div>
<div class="line"><a id="l02423" name="l02423"></a><span class="lineno"> 2423</span>  } <span class="keywordflow">while</span> (truncated);</div>
<div class="line"><a id="l02424" name="l02424"></a><span class="lineno"> 2424</span>  hash.Final((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)final_etag);</div>
<div class="line"><a id="l02425" name="l02425"></a><span class="lineno"> 2425</span> </div>
<div class="line"><a id="l02426" name="l02426"></a><span class="lineno"> 2426</span>  <a class="code hl_function" href="rgw__common_8h.html#a558d2aac04be1b2ad9db62daa9b8cc7f">buf_to_hex</a>((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)final_etag, <span class="keyword">sizeof</span>(final_etag), final_etag_str);</div>
<div class="line"><a id="l02427" name="l02427"></a><span class="lineno"> 2427</span>  snprintf(&amp;final_etag_str[CEPH_CRYPTO_MD5_DIGESTSIZE * 2],</div>
<div class="line"><a id="l02428" name="l02428"></a><span class="lineno"> 2428</span>       <span class="keyword">sizeof</span>(final_etag_str) - CEPH_CRYPTO_MD5_DIGESTSIZE * 2,</div>
<div class="line"><a id="l02429" name="l02429"></a><span class="lineno"> 2429</span>           <span class="stringliteral">&quot;-%lld&quot;</span>, (<span class="keywordtype">long</span> <span class="keywordtype">long</span>)part_etags.size());</div>
<div class="line"><a id="l02430" name="l02430"></a><span class="lineno"> 2430</span>  etag = final_etag_str;</div>
<div class="line"><a id="l02431" name="l02431"></a><span class="lineno"> 2431</span>  ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 10) &lt;&lt; <span class="stringliteral">&quot;calculated etag: &quot;</span> &lt;&lt; etag &lt;&lt; dendl;</div>
<div class="line"><a id="l02432" name="l02432"></a><span class="lineno"> 2432</span> </div>
<div class="line"><a id="l02433" name="l02433"></a><span class="lineno"> 2433</span>  etag_bl.append(etag);</div>
<div class="line"><a id="l02434" name="l02434"></a><span class="lineno"> 2434</span> </div>
<div class="line"><a id="l02435" name="l02435"></a><span class="lineno"> 2435</span>  <a class="code hl_variable" href="classrgw_1_1sal_1_1_object.html#a89d6b720b87f91663d142ba7a6dce9ca">attrs</a>[<a class="code hl_define" href="rgw__common_8h.html#af7c58a0981432866d722813e5f64066a">RGW_ATTR_ETAG</a>] = etag_bl;</div>
<div class="line"><a id="l02436" name="l02436"></a><span class="lineno"> 2436</span> </div>
<div class="line"><a id="l02437" name="l02437"></a><span class="lineno"> 2437</span>  <span class="keywordflow">if</span> (compressed) {</div>
<div class="line"><a id="l02438" name="l02438"></a><span class="lineno"> 2438</span>    <span class="comment">// write compression attribute to full object</span></div>
<div class="line"><a id="l02439" name="l02439"></a><span class="lineno"> 2439</span>    bufferlist tmp;</div>
<div class="line"><a id="l02440" name="l02440"></a><span class="lineno"> 2440</span>    <a class="code hl_function" href="namespacergw.html#a34a5757756e9618325f611b073ccd448">encode</a>(cs_info, tmp);</div>
<div class="line"><a id="l02441" name="l02441"></a><span class="lineno"> 2441</span>    <a class="code hl_variable" href="classrgw_1_1sal_1_1_object.html#a89d6b720b87f91663d142ba7a6dce9ca">attrs</a>[<a class="code hl_define" href="rgw__common_8h.html#a2698dd0774e4e70329180f5e1de7f7da">RGW_ATTR_COMPRESSION</a>] = tmp;</div>
<div class="line"><a id="l02442" name="l02442"></a><span class="lineno"> 2442</span>  }</div>
<div class="line"><a id="l02443" name="l02443"></a><span class="lineno"> 2443</span> </div>
<div class="line"><a id="l02444" name="l02444"></a><span class="lineno"> 2444</span>  target_obj-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_object.html#aebb3bdb3cf25ba091ff6034a877fe976">set_atomic</a>(obj_ctx);</div>
<div class="line"><a id="l02445" name="l02445"></a><span class="lineno"> 2445</span> </div>
<div class="line"><a id="l02446" name="l02446"></a><span class="lineno"> 2446</span>  <a class="code hl_class" href="class_r_g_w_rados_1_1_object.html">RGWRados::Object</a> op_target(<a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_object.html#abf23dd6aa5878ba92af569a0a7c5c5c0">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aca5c28bc0f22f3f963d0475b594350e1">getRados</a>(),</div>
<div class="line"><a id="l02447" name="l02447"></a><span class="lineno"> 2447</span>                 target_obj-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_object.html#a0cdac8c36c06ebf81fb580038205487f">get_bucket</a>()-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_bucket.html#a1e64259203d2710c33c5a979721c19ee">get_info</a>(),</div>
<div class="line"><a id="l02448" name="l02448"></a><span class="lineno"> 2448</span>                 *obj_ctx, target_obj-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_object.html#a770aa088f13a4a4063055cc423de4478">get_obj</a>());</div>
<div class="line"><a id="l02449" name="l02449"></a><span class="lineno"> 2449</span>  <a class="code hl_struct" href="struct_r_g_w_rados_1_1_object_1_1_write.html">RGWRados::Object::Write</a> obj_op(&amp;op_target);</div>
<div class="line"><a id="l02450" name="l02450"></a><span class="lineno"> 2450</span> </div>
<div class="line"><a id="l02451" name="l02451"></a><span class="lineno"> 2451</span>  obj_op.<a class="code hl_variable" href="struct_r_g_w_rados_1_1_object_1_1_write.html#a983690caebbfc23b4a56dfd687a61dfa">meta</a>.<a class="code hl_variable" href="struct_r_g_w_rados_1_1_object_1_1_write_1_1_meta_params.html#a39178ded91fad11caf852a474fb1f4ba">manifest</a> = &amp;manifest;</div>
<div class="line"><a id="l02452" name="l02452"></a><span class="lineno"> 2452</span>  obj_op.<a class="code hl_variable" href="struct_r_g_w_rados_1_1_object_1_1_write.html#a983690caebbfc23b4a56dfd687a61dfa">meta</a>.<a class="code hl_variable" href="struct_r_g_w_rados_1_1_object_1_1_write_1_1_meta_params.html#a2812193444cff0a42ae862b5ed2e5144">remove_objs</a> = &amp;remove_objs;</div>
<div class="line"><a id="l02453" name="l02453"></a><span class="lineno"> 2453</span> </div>
<div class="line"><a id="l02454" name="l02454"></a><span class="lineno"> 2454</span>  obj_op.<a class="code hl_variable" href="struct_r_g_w_rados_1_1_object_1_1_write.html#a983690caebbfc23b4a56dfd687a61dfa">meta</a>.<a class="code hl_variable" href="struct_r_g_w_rados_1_1_object_1_1_write_1_1_meta_params.html#a44969319d1a3a21925a73b534e81782b">ptag</a> = &amp;tag; <span class="comment">/* use req_id as operation tag */</span></div>
<div class="line"><a id="l02455" name="l02455"></a><span class="lineno"> 2455</span>  obj_op.<a class="code hl_variable" href="struct_r_g_w_rados_1_1_object_1_1_write.html#a983690caebbfc23b4a56dfd687a61dfa">meta</a>.<a class="code hl_variable" href="struct_r_g_w_rados_1_1_object_1_1_write_1_1_meta_params.html#a1f80aaf767e6693f9c7fb468ffb7e6b1">owner</a> = owner.<a class="code hl_function" href="class_a_c_l_owner.html#ad784a6fdd9366a68b859f664486283fb">get_id</a>();</div>
<div class="line"><a id="l02456" name="l02456"></a><span class="lineno"> 2456</span>  obj_op.<a class="code hl_variable" href="struct_r_g_w_rados_1_1_object_1_1_write.html#a983690caebbfc23b4a56dfd687a61dfa">meta</a>.<a class="code hl_variable" href="struct_r_g_w_rados_1_1_object_1_1_write_1_1_meta_params.html#a3ddf31b01f7cf44e6b150e23a560cccc">flags</a> = <a class="code hl_define" href="rgw__rados_8h.html#a9c06e27db5e4156f498f900bc7f81720">PUT_OBJ_CREATE</a>;</div>
<div class="line"><a id="l02457" name="l02457"></a><span class="lineno"> 2457</span>  obj_op.<a class="code hl_variable" href="struct_r_g_w_rados_1_1_object_1_1_write.html#a983690caebbfc23b4a56dfd687a61dfa">meta</a>.<a class="code hl_variable" href="struct_r_g_w_rados_1_1_object_1_1_write_1_1_meta_params.html#a313ac49a26ee53f1a0770202c8729197">modify_tail</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l02458" name="l02458"></a><span class="lineno"> 2458</span>  obj_op.<a class="code hl_variable" href="struct_r_g_w_rados_1_1_object_1_1_write.html#a983690caebbfc23b4a56dfd687a61dfa">meta</a>.<a class="code hl_variable" href="struct_r_g_w_rados_1_1_object_1_1_write_1_1_meta_params.html#a218aeccbf44283fa22748fc4d158d30c">completeMultipart</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l02459" name="l02459"></a><span class="lineno"> 2459</span>  obj_op.<a class="code hl_variable" href="struct_r_g_w_rados_1_1_object_1_1_write.html#a983690caebbfc23b4a56dfd687a61dfa">meta</a>.<a class="code hl_variable" href="struct_r_g_w_rados_1_1_object_1_1_write_1_1_meta_params.html#ab26754950a15174d90867b663d9e4a14">olh_epoch</a> = olh_epoch;</div>
<div class="line"><a id="l02460" name="l02460"></a><span class="lineno"> 2460</span> </div>
<div class="line"><a id="l02461" name="l02461"></a><span class="lineno"> 2461</span>  ret = obj_op.<a class="code hl_function" href="struct_r_g_w_rados_1_1_object_1_1_write.html#abe774f2d8819c203804a0a7a7ab1426d">write_meta</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, ofs, accounted_size, <a class="code hl_variable" href="classrgw_1_1sal_1_1_object.html#a89d6b720b87f91663d142ba7a6dce9ca">attrs</a>, y);</div>
<div class="line"><a id="l02462" name="l02462"></a><span class="lineno"> 2462</span>  <span class="keywordflow">if</span> (ret &lt; 0)</div>
<div class="line"><a id="l02463" name="l02463"></a><span class="lineno"> 2463</span>    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l02464" name="l02464"></a><span class="lineno"> 2464</span> </div>
<div class="line"><a id="l02465" name="l02465"></a><span class="lineno"> 2465</span>  <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l02466" name="l02466"></a><span class="lineno"> 2466</span>}</div>
</div>
<div class="line"><a id="l02467" name="l02467"></a><span class="lineno"> 2467</span> </div>
<div class="foldopen" id="foldopen02468" data-start="{" data-end="}">
<div class="line"><a id="l02468" name="l02468"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_multipart_upload.html#a254c4c6efb863ede473fd13a4fcfddd5"> 2468</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_multipart_upload.html#a254c4c6efb863ede473fd13a4fcfddd5">RadosMultipartUpload::get_info</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, optional_yield y, <a class="code hl_class" href="class_r_g_w_object_ctx.html">RGWObjectCtx</a>* obj_ctx, <a class="code hl_struct" href="structrgw__placement__rule.html">rgw_placement_rule</a>** rule, <a class="code hl_typedef" href="group___r_g_w_s_a_l.html#gab1b58d5f8747844fae5ddfb48fadf7bc">rgw::sal::Attrs</a>* <a class="code hl_variable" href="classrgw_1_1sal_1_1_object.html#a89d6b720b87f91663d142ba7a6dce9ca">attrs</a>)</div>
<div class="line"><a id="l02469" name="l02469"></a><span class="lineno"> 2469</span>{</div>
<div class="line"><a id="l02470" name="l02470"></a><span class="lineno"> 2470</span>  <span class="keywordflow">if</span> (!rule &amp;&amp; !<a class="code hl_variable" href="classrgw_1_1sal_1_1_object.html#a89d6b720b87f91663d142ba7a6dce9ca">attrs</a>) {</div>
<div class="line"><a id="l02471" name="l02471"></a><span class="lineno"> 2471</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l02472" name="l02472"></a><span class="lineno"> 2472</span>  }</div>
<div class="line"><a id="l02473" name="l02473"></a><span class="lineno"> 2473</span> </div>
<div class="line"><a id="l02474" name="l02474"></a><span class="lineno"> 2474</span>  <span class="keywordflow">if</span> (rule) {</div>
<div class="line"><a id="l02475" name="l02475"></a><span class="lineno"> 2475</span>    <span class="keywordflow">if</span> (!placement.empty()) {</div>
<div class="line"><a id="l02476" name="l02476"></a><span class="lineno"> 2476</span>      *rule = &amp;placement;</div>
<div class="line"><a id="l02477" name="l02477"></a><span class="lineno"> 2477</span>      <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classrgw_1_1sal_1_1_object.html#a89d6b720b87f91663d142ba7a6dce9ca">attrs</a>) {</div>
<div class="line"><a id="l02478" name="l02478"></a><span class="lineno"> 2478</span>    <span class="comment">/* Don&#39;t need attrs, done */</span></div>
<div class="line"><a id="l02479" name="l02479"></a><span class="lineno"> 2479</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l02480" name="l02480"></a><span class="lineno"> 2480</span>      }</div>
<div class="line"><a id="l02481" name="l02481"></a><span class="lineno"> 2481</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02482" name="l02482"></a><span class="lineno"> 2482</span>      *rule = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l02483" name="l02483"></a><span class="lineno"> 2483</span>    }</div>
<div class="line"><a id="l02484" name="l02484"></a><span class="lineno"> 2484</span>  }</div>
<div class="line"><a id="l02485" name="l02485"></a><span class="lineno"> 2485</span> </div>
<div class="line"><a id="l02486" name="l02486"></a><span class="lineno"> 2486</span>  <span class="comment">/* We need either attributes or placement, so we need a read */</span></div>
<div class="line"><a id="l02487" name="l02487"></a><span class="lineno"> 2487</span>  std::unique_ptr&lt;rgw::sal::Object&gt; meta_obj;</div>
<div class="line"><a id="l02488" name="l02488"></a><span class="lineno"> 2488</span>  meta_obj = get_meta_obj();</div>
<div class="line"><a id="l02489" name="l02489"></a><span class="lineno"> 2489</span>  meta_obj-&gt;set_in_extra_data(<span class="keyword">true</span>);</div>
<div class="line"><a id="l02490" name="l02490"></a><span class="lineno"> 2490</span> </div>
<div class="line"><a id="l02491" name="l02491"></a><span class="lineno"> 2491</span>  <a class="code hl_struct" href="structmultipart__upload__info.html">multipart_upload_info</a> upload_info;</div>
<div class="line"><a id="l02492" name="l02492"></a><span class="lineno"> 2492</span>  bufferlist headbl;</div>
<div class="line"><a id="l02493" name="l02493"></a><span class="lineno"> 2493</span> </div>
<div class="line"><a id="l02494" name="l02494"></a><span class="lineno"> 2494</span>  <span class="comment">/* Read the obj head which contains the multipart_upload_info */</span></div>
<div class="line"><a id="l02495" name="l02495"></a><span class="lineno"> 2495</span>  std::unique_ptr&lt;rgw::sal::Object::ReadOp&gt; read_op = meta_obj-&gt;get_read_op(obj_ctx);</div>
<div class="line"><a id="l02496" name="l02496"></a><span class="lineno"> 2496</span>  meta_obj-&gt;set_prefetch_data(obj_ctx);</div>
<div class="line"><a id="l02497" name="l02497"></a><span class="lineno"> 2497</span> </div>
<div class="line"><a id="l02498" name="l02498"></a><span class="lineno"> 2498</span>  <span class="keywordtype">int</span> ret = read_op-&gt;prepare(y, <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>);</div>
<div class="line"><a id="l02499" name="l02499"></a><span class="lineno"> 2499</span>  <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line"><a id="l02500" name="l02500"></a><span class="lineno"> 2500</span>    <span class="keywordflow">if</span> (ret == -ENOENT) {</div>
<div class="line"><a id="l02501" name="l02501"></a><span class="lineno"> 2501</span>      <span class="keywordflow">return</span> -<a class="code hl_define" href="rgw__common_8h.html#a5670bf112bcf5bd63ff0c8bcafd09b87">ERR_NO_SUCH_UPLOAD</a>;</div>
<div class="line"><a id="l02502" name="l02502"></a><span class="lineno"> 2502</span>    }</div>
<div class="line"><a id="l02503" name="l02503"></a><span class="lineno"> 2503</span>    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l02504" name="l02504"></a><span class="lineno"> 2504</span>  }</div>
<div class="line"><a id="l02505" name="l02505"></a><span class="lineno"> 2505</span> </div>
<div class="line"><a id="l02506" name="l02506"></a><span class="lineno"> 2506</span>  <a class="code hl_function" href="rgw__tracer_8h.html#a1816c89a8b47049d37496606eabdaca9">extract_span_context</a>(meta_obj-&gt;get_attrs(), trace_ctx);</div>
<div class="line"><a id="l02507" name="l02507"></a><span class="lineno"> 2507</span> </div>
<div class="line"><a id="l02508" name="l02508"></a><span class="lineno"> 2508</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="classrgw_1_1sal_1_1_object.html#a89d6b720b87f91663d142ba7a6dce9ca">attrs</a>) {</div>
<div class="line"><a id="l02509" name="l02509"></a><span class="lineno"> 2509</span>    <span class="comment">/* Attrs are filled in by prepare */</span></div>
<div class="line"><a id="l02510" name="l02510"></a><span class="lineno"> 2510</span>    *<a class="code hl_variable" href="classrgw_1_1sal_1_1_object.html#a89d6b720b87f91663d142ba7a6dce9ca">attrs</a> = meta_obj-&gt;get_attrs();</div>
<div class="line"><a id="l02511" name="l02511"></a><span class="lineno"> 2511</span>    <span class="keywordflow">if</span> (!rule || *rule != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a id="l02512" name="l02512"></a><span class="lineno"> 2512</span>      <span class="comment">/* placement was cached; don&#39;t actually read */</span></div>
<div class="line"><a id="l02513" name="l02513"></a><span class="lineno"> 2513</span>      <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l02514" name="l02514"></a><span class="lineno"> 2514</span>    }</div>
<div class="line"><a id="l02515" name="l02515"></a><span class="lineno"> 2515</span>  }</div>
<div class="line"><a id="l02516" name="l02516"></a><span class="lineno"> 2516</span> </div>
<div class="line"><a id="l02517" name="l02517"></a><span class="lineno"> 2517</span>  <span class="comment">/* Now read the placement from the head */</span></div>
<div class="line"><a id="l02518" name="l02518"></a><span class="lineno"> 2518</span>  ret = read_op-&gt;read(0, <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_object.html#abf23dd6aa5878ba92af569a0a7c5c5c0">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aabf846e99f9f01172f86ce5e7fb1ed5b">ctx</a>()-&gt;_conf-&gt;rgw_max_chunk_size, headbl, y, <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>);</div>
<div class="line"><a id="l02519" name="l02519"></a><span class="lineno"> 2519</span>  <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line"><a id="l02520" name="l02520"></a><span class="lineno"> 2520</span>    <span class="keywordflow">if</span> (ret == -ENOENT) {</div>
<div class="line"><a id="l02521" name="l02521"></a><span class="lineno"> 2521</span>      <span class="keywordflow">return</span> -<a class="code hl_define" href="rgw__common_8h.html#a5670bf112bcf5bd63ff0c8bcafd09b87">ERR_NO_SUCH_UPLOAD</a>;</div>
<div class="line"><a id="l02522" name="l02522"></a><span class="lineno"> 2522</span>    }</div>
<div class="line"><a id="l02523" name="l02523"></a><span class="lineno"> 2523</span>    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l02524" name="l02524"></a><span class="lineno"> 2524</span>  }</div>
<div class="line"><a id="l02525" name="l02525"></a><span class="lineno"> 2525</span> </div>
<div class="line"><a id="l02526" name="l02526"></a><span class="lineno"> 2526</span>  <span class="keywordflow">if</span> (headbl.length() &lt;= 0) {</div>
<div class="line"><a id="l02527" name="l02527"></a><span class="lineno"> 2527</span>    <span class="keywordflow">return</span> -<a class="code hl_define" href="rgw__common_8h.html#a5670bf112bcf5bd63ff0c8bcafd09b87">ERR_NO_SUCH_UPLOAD</a>;</div>
<div class="line"><a id="l02528" name="l02528"></a><span class="lineno"> 2528</span>  }</div>
<div class="line"><a id="l02529" name="l02529"></a><span class="lineno"> 2529</span> </div>
<div class="line"><a id="l02530" name="l02530"></a><span class="lineno"> 2530</span>  <span class="comment">/* Decode multipart_upload_info */</span></div>
<div class="line"><a id="l02531" name="l02531"></a><span class="lineno"> 2531</span>  <span class="keyword">auto</span> hiter = headbl.cbegin();</div>
<div class="line"><a id="l02532" name="l02532"></a><span class="lineno"> 2532</span>  <span class="keywordflow">try</span> {</div>
<div class="line"><a id="l02533" name="l02533"></a><span class="lineno"> 2533</span>    <a class="code hl_function" href="namespacergw.html#a49e77e75ed539fdbde0dcc092bb76467">decode</a>(upload_info, hiter);</div>
<div class="line"><a id="l02534" name="l02534"></a><span class="lineno"> 2534</span>  } <span class="keywordflow">catch</span> (buffer::error&amp; err) {</div>
<div class="line"><a id="l02535" name="l02535"></a><span class="lineno"> 2535</span>    ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 0) &lt;&lt; <span class="stringliteral">&quot;ERROR: failed to decode multipart upload info&quot;</span> &lt;&lt; dendl;</div>
<div class="line"><a id="l02536" name="l02536"></a><span class="lineno"> 2536</span>    <span class="keywordflow">return</span> -EIO;</div>
<div class="line"><a id="l02537" name="l02537"></a><span class="lineno"> 2537</span>  }</div>
<div class="line"><a id="l02538" name="l02538"></a><span class="lineno"> 2538</span>  placement = upload_info.<a class="code hl_variable" href="structmultipart__upload__info.html#a654450c2f0a5c1267acbddf21fc6992d">dest_placement</a>;</div>
<div class="line"><a id="l02539" name="l02539"></a><span class="lineno"> 2539</span>  *rule = &amp;placement;</div>
<div class="line"><a id="l02540" name="l02540"></a><span class="lineno"> 2540</span> </div>
<div class="line"><a id="l02541" name="l02541"></a><span class="lineno"> 2541</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l02542" name="l02542"></a><span class="lineno"> 2542</span>}</div>
</div>
<div class="line"><a id="l02543" name="l02543"></a><span class="lineno"> 2543</span> </div>
<div class="foldopen" id="foldopen02544" data-start="{" data-end="}">
<div class="line"><a id="l02544" name="l02544"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_multipart_upload.html#a1e4e95e73bc9043d7f5eaa0606223ddc"> 2544</a></span>std::unique_ptr&lt;Writer&gt; <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_multipart_upload.html#a1e4e95e73bc9043d7f5eaa0606223ddc">RadosMultipartUpload::get_writer</a>(</div>
<div class="line"><a id="l02545" name="l02545"></a><span class="lineno"> 2545</span>                  <span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>,</div>
<div class="line"><a id="l02546" name="l02546"></a><span class="lineno"> 2546</span>                  optional_yield y,</div>
<div class="line"><a id="l02547" name="l02547"></a><span class="lineno"> 2547</span>                  std::unique_ptr&lt;rgw::sal::Object&gt; _head_obj,</div>
<div class="line"><a id="l02548" name="l02548"></a><span class="lineno"> 2548</span>                  <span class="keyword">const</span> <a class="code hl_struct" href="structrgw__user.html">rgw_user</a>&amp; owner, <a class="code hl_class" href="class_r_g_w_object_ctx.html">RGWObjectCtx</a>&amp; obj_ctx,</div>
<div class="line"><a id="l02549" name="l02549"></a><span class="lineno"> 2549</span>                  <span class="keyword">const</span> <a class="code hl_struct" href="structrgw__placement__rule.html">rgw_placement_rule</a> *ptail_placement_rule,</div>
<div class="line"><a id="l02550" name="l02550"></a><span class="lineno"> 2550</span>                  uint64_t part_num,</div>
<div class="line"><a id="l02551" name="l02551"></a><span class="lineno"> 2551</span>                  <span class="keyword">const</span> std::string&amp; part_num_str)</div>
<div class="line"><a id="l02552" name="l02552"></a><span class="lineno"> 2552</span>{</div>
<div class="line"><a id="l02553" name="l02553"></a><span class="lineno"> 2553</span>  <span class="keyword">auto</span> <a class="code hl_variable" href="rgw__aio_8cc.html#ad8d5da794a93e87014771f5742ca6c71">aio</a> = <a class="code hl_function" href="namespacergw.html#aa241d4c3eac6710432bb13c80ab112e3">rgw::make_throttle</a>(<a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_object.html#abf23dd6aa5878ba92af569a0a7c5c5c0">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aabf846e99f9f01172f86ce5e7fb1ed5b">ctx</a>()-&gt;_conf-&gt;rgw_put_obj_min_window_size, y);</div>
<div class="line"><a id="l02554" name="l02554"></a><span class="lineno"> 2554</span>  <span class="keywordflow">return</span> std::make_unique&lt;RadosMultipartWriter&gt;(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, y, <span class="keyword">this</span>,</div>
<div class="line"><a id="l02555" name="l02555"></a><span class="lineno"> 2555</span>                 std::move(_head_obj), <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_object.html#abf23dd6aa5878ba92af569a0a7c5c5c0">store</a>, std::move(<a class="code hl_variable" href="rgw__aio_8cc.html#ad8d5da794a93e87014771f5742ca6c71">aio</a>), owner,</div>
<div class="line"><a id="l02556" name="l02556"></a><span class="lineno"> 2556</span>                 obj_ctx, ptail_placement_rule, part_num, part_num_str);</div>
<div class="line"><a id="l02557" name="l02557"></a><span class="lineno"> 2557</span>}</div>
</div>
<div class="line"><a id="l02558" name="l02558"></a><span class="lineno"> 2558</span> </div>
<div class="foldopen" id="foldopen02559" data-start="{" data-end="}">
<div class="line"><a id="l02559" name="l02559"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_m_p_rados_serializer.html#a079423c6fe4860dfc09d57b8f3c2b641"> 2559</a></span><a class="code hl_function" href="classrgw_1_1sal_1_1_m_p_rados_serializer.html#a079423c6fe4860dfc09d57b8f3c2b641">MPRadosSerializer::MPRadosSerializer</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_class" href="classrgw_1_1sal_1_1_rados_store.html">RadosStore</a>* <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_object.html#abf23dd6aa5878ba92af569a0a7c5c5c0">store</a>, <a class="code hl_class" href="classrgw_1_1sal_1_1_rados_object.html">RadosObject</a>* obj, <span class="keyword">const</span> std::string&amp; lock_name) :</div>
<div class="line"><a id="l02560" name="l02560"></a><span class="lineno"> 2560</span>  lock(lock_name)</div>
<div class="line"><a id="l02561" name="l02561"></a><span class="lineno"> 2561</span>{</div>
<div class="line"><a id="l02562" name="l02562"></a><span class="lineno"> 2562</span>  <a class="code hl_struct" href="structrgw__pool.html">rgw_pool</a> meta_pool;</div>
<div class="line"><a id="l02563" name="l02563"></a><span class="lineno"> 2563</span>  <a class="code hl_struct" href="structrgw__raw__obj.html">rgw_raw_obj</a> raw_obj;</div>
<div class="line"><a id="l02564" name="l02564"></a><span class="lineno"> 2564</span> </div>
<div class="line"><a id="l02565" name="l02565"></a><span class="lineno"> 2565</span>  obj-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_object.html#abecff7f76a642d4267d0241601f40950">get_raw_obj</a>(&amp;raw_obj);</div>
<div class="line"><a id="l02566" name="l02566"></a><span class="lineno"> 2566</span>  <a class="code hl_variable" href="structrgw_1_1sal_1_1_m_p_serializer.html#adfe8ce35adef02e1a82c5baba8221a22">oid</a> = raw_obj.<a class="code hl_variable" href="structrgw__raw__obj.html#a9c0fa84426035c85585d240c56a65d82">oid</a>;</div>
<div class="line"><a id="l02567" name="l02567"></a><span class="lineno"> 2567</span>  store-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aca5c28bc0f22f3f963d0475b594350e1">getRados</a>()-&gt;<a class="code hl_function" href="class_r_g_w_rados.html#a8cf1e4fcaea4a0f05e55815f5254abcf">get_obj_data_pool</a>(obj-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_object.html#a0cdac8c36c06ebf81fb580038205487f">get_bucket</a>()-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_bucket.html#afce8c7c05e49c14921760bcf7fd00dc8">get_placement_rule</a>(),</div>
<div class="line"><a id="l02568" name="l02568"></a><span class="lineno"> 2568</span>                       obj-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_object.html#a770aa088f13a4a4063055cc423de4478">get_obj</a>(), &amp;meta_pool);</div>
<div class="line"><a id="l02569" name="l02569"></a><span class="lineno"> 2569</span>  store-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aca5c28bc0f22f3f963d0475b594350e1">getRados</a>()-&gt;<a class="code hl_function" href="class_r_g_w_rados.html#a79419ae43c04ef8f3e1c44a712f5b113">open_pool_ctx</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, meta_pool, <a class="code hl_variable" href="classrgw_1_1sal_1_1_m_p_rados_serializer.html#a82a2721e138bd47f4d2bdd4912eef631">ioctx</a>, <span class="keyword">true</span>);</div>
<div class="line"><a id="l02570" name="l02570"></a><span class="lineno"> 2570</span>}</div>
</div>
<div class="line"><a id="l02571" name="l02571"></a><span class="lineno"> 2571</span> </div>
<div class="foldopen" id="foldopen02572" data-start="{" data-end="}">
<div class="line"><a id="l02572" name="l02572"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_m_p_rados_serializer.html#addd59417fb4b0087048ffdcbc7348e01"> 2572</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_m_p_rados_serializer.html#addd59417fb4b0087048ffdcbc7348e01">MPRadosSerializer::try_lock</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, utime_t dur, optional_yield y)</div>
<div class="line"><a id="l02573" name="l02573"></a><span class="lineno"> 2573</span>{</div>
<div class="line"><a id="l02574" name="l02574"></a><span class="lineno"> 2574</span>  <a class="code hl_variable" href="classrgw_1_1sal_1_1_m_p_rados_serializer.html#af06c358f7fb59f7832d8c8ff7e3793c7">op</a>.assert_exists();</div>
<div class="line"><a id="l02575" name="l02575"></a><span class="lineno"> 2575</span>  <a class="code hl_variable" href="classrgw_1_1sal_1_1_m_p_rados_serializer.html#aede6748cac003f1e891a8143c4a18b61">lock</a>.set_duration(dur);</div>
<div class="line"><a id="l02576" name="l02576"></a><span class="lineno"> 2576</span>  <a class="code hl_variable" href="classrgw_1_1sal_1_1_m_p_rados_serializer.html#aede6748cac003f1e891a8143c4a18b61">lock</a>.lock_exclusive(&amp;<a class="code hl_variable" href="classrgw_1_1sal_1_1_m_p_rados_serializer.html#af06c358f7fb59f7832d8c8ff7e3793c7">op</a>);</div>
<div class="line"><a id="l02577" name="l02577"></a><span class="lineno"> 2577</span>  <span class="keywordtype">int</span> ret = <a class="code hl_function" href="rgw__tools_8cc.html#ac8fd9a95626d93661d7280c9455eba5c">rgw_rados_operate</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_variable" href="classrgw_1_1sal_1_1_m_p_rados_serializer.html#a82a2721e138bd47f4d2bdd4912eef631">ioctx</a>, <a class="code hl_variable" href="structrgw_1_1sal_1_1_m_p_serializer.html#adfe8ce35adef02e1a82c5baba8221a22">oid</a>, &amp;<a class="code hl_variable" href="classrgw_1_1sal_1_1_m_p_rados_serializer.html#af06c358f7fb59f7832d8c8ff7e3793c7">op</a>, y);</div>
<div class="line"><a id="l02578" name="l02578"></a><span class="lineno"> 2578</span>  <span class="keywordflow">if</span> (! ret) {</div>
<div class="line"><a id="l02579" name="l02579"></a><span class="lineno"> 2579</span>    <a class="code hl_variable" href="structrgw_1_1sal_1_1_m_p_serializer.html#a54d801d5a1ba65072f1f36ebecbdce9d">locked</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l02580" name="l02580"></a><span class="lineno"> 2580</span>  }</div>
<div class="line"><a id="l02581" name="l02581"></a><span class="lineno"> 2581</span>  <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l02582" name="l02582"></a><span class="lineno"> 2582</span>}</div>
</div>
<div class="line"><a id="l02583" name="l02583"></a><span class="lineno"> 2583</span> </div>
<div class="foldopen" id="foldopen02584" data-start="{" data-end="}">
<div class="line"><a id="l02584" name="l02584"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_l_c_rados_serializer.html#a4cebe4fe84f05cd15225adfd5da4ca93"> 2584</a></span><a class="code hl_function" href="classrgw_1_1sal_1_1_l_c_rados_serializer.html#a4cebe4fe84f05cd15225adfd5da4ca93">LCRadosSerializer::LCRadosSerializer</a>(<a class="code hl_class" href="classrgw_1_1sal_1_1_rados_store.html">RadosStore</a>* store, <span class="keyword">const</span> std::string&amp; _oid, <span class="keyword">const</span> std::string&amp; lock_name, <span class="keyword">const</span> std::string&amp; cookie) :</div>
<div class="line"><a id="l02585" name="l02585"></a><span class="lineno"> 2585</span>  lock(lock_name), oid(_oid)</div>
<div class="line"><a id="l02586" name="l02586"></a><span class="lineno"> 2586</span>{</div>
<div class="line"><a id="l02587" name="l02587"></a><span class="lineno"> 2587</span>  <a class="code hl_variable" href="classrgw_1_1sal_1_1_l_c_rados_serializer.html#a288484e275611aa78e7a5ff306493918">ioctx</a> = &amp;store-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aca5c28bc0f22f3f963d0475b594350e1">getRados</a>()-&gt;<a class="code hl_variable" href="class_r_g_w_rados.html#aa200401edcbfd9360704769e0defa575">lc_pool_ctx</a>;</div>
<div class="line"><a id="l02588" name="l02588"></a><span class="lineno"> 2588</span>  <a class="code hl_variable" href="classrgw_1_1sal_1_1_l_c_rados_serializer.html#a765a0494bf46fdfde3f1d4b53c93897e">lock</a>.set_cookie(cookie);</div>
<div class="line"><a id="l02589" name="l02589"></a><span class="lineno"> 2589</span>}</div>
</div>
<div class="line"><a id="l02590" name="l02590"></a><span class="lineno"> 2590</span> </div>
<div class="foldopen" id="foldopen02591" data-start="{" data-end="}">
<div class="line"><a id="l02591" name="l02591"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_l_c_rados_serializer.html#a3f99bae3d092b131a75fdd07bb5b1a4c"> 2591</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_l_c_rados_serializer.html#a3f99bae3d092b131a75fdd07bb5b1a4c">LCRadosSerializer::try_lock</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, utime_t dur, optional_yield y)</div>
<div class="line"><a id="l02592" name="l02592"></a><span class="lineno"> 2592</span>{</div>
<div class="line"><a id="l02593" name="l02593"></a><span class="lineno"> 2593</span>  <a class="code hl_variable" href="classrgw_1_1sal_1_1_l_c_rados_serializer.html#a765a0494bf46fdfde3f1d4b53c93897e">lock</a>.set_duration(dur);</div>
<div class="line"><a id="l02594" name="l02594"></a><span class="lineno"> 2594</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="classrgw_1_1sal_1_1_l_c_rados_serializer.html#a765a0494bf46fdfde3f1d4b53c93897e">lock</a>.lock_exclusive(<a class="code hl_variable" href="classrgw_1_1sal_1_1_l_c_rados_serializer.html#a288484e275611aa78e7a5ff306493918">ioctx</a>, <a class="code hl_variable" href="classrgw_1_1sal_1_1_l_c_rados_serializer.html#a779ed8a10b4f584d3bbf88f5f41effb5">oid</a>);</div>
<div class="line"><a id="l02595" name="l02595"></a><span class="lineno"> 2595</span>}</div>
</div>
<div class="line"><a id="l02596" name="l02596"></a><span class="lineno"> 2596</span> </div>
<div class="foldopen" id="foldopen02597" data-start="{" data-end="}">
<div class="line"><a id="l02597" name="l02597"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_lifecycle.html#ab9f99a54c54bdd2c5c7b3239061cbd20"> 2597</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_lifecycle.html#ab9f99a54c54bdd2c5c7b3239061cbd20">RadosLifecycle::get_entry</a>(<span class="keyword">const</span> std::string&amp; oid, <span class="keyword">const</span> std::string&amp; marker,</div>
<div class="line"><a id="l02598" name="l02598"></a><span class="lineno"> 2598</span>                  <a class="code hl_struct" href="structrgw_1_1sal_1_1_lifecycle_1_1_l_c_entry.html">LCEntry</a>&amp; entry)</div>
<div class="line"><a id="l02599" name="l02599"></a><span class="lineno"> 2599</span>{</div>
<div class="line"><a id="l02600" name="l02600"></a><span class="lineno"> 2600</span>  cls_rgw_lc_entry cls_entry;</div>
<div class="line"><a id="l02601" name="l02601"></a><span class="lineno"> 2601</span>  <span class="keywordtype">int</span> ret = cls_rgw_lc_get_entry(*<a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_lifecycle.html#a9a66f8741cfcb941fac068d8714c0411">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aca5c28bc0f22f3f963d0475b594350e1">getRados</a>()-&gt;<a class="code hl_function" href="class_r_g_w_rados.html#ac5219da67ddba673b3c37a79e6960d4a">get_lc_pool_ctx</a>(), oid, marker, cls_entry);</div>
<div class="line"><a id="l02602" name="l02602"></a><span class="lineno"> 2602</span> </div>
<div class="line"><a id="l02603" name="l02603"></a><span class="lineno"> 2603</span>  entry.<a class="code hl_variable" href="structrgw_1_1sal_1_1_lifecycle_1_1_l_c_entry.html#adf5aeebb89cb0317b441af21eee8cc33">bucket</a> = cls_entry.bucket;</div>
<div class="line"><a id="l02604" name="l02604"></a><span class="lineno"> 2604</span>  entry.<a class="code hl_variable" href="structrgw_1_1sal_1_1_lifecycle_1_1_l_c_entry.html#a3a7774d065b925783b71e2e2829a8606">start_time</a> = cls_entry.start_time;</div>
<div class="line"><a id="l02605" name="l02605"></a><span class="lineno"> 2605</span>  entry.<a class="code hl_variable" href="structrgw_1_1sal_1_1_lifecycle_1_1_l_c_entry.html#ab967abd35523acb2a08ffdc772a27858">status</a> = cls_entry.status;</div>
<div class="line"><a id="l02606" name="l02606"></a><span class="lineno"> 2606</span> </div>
<div class="line"><a id="l02607" name="l02607"></a><span class="lineno"> 2607</span>  <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l02608" name="l02608"></a><span class="lineno"> 2608</span>}</div>
</div>
<div class="line"><a id="l02609" name="l02609"></a><span class="lineno"> 2609</span> </div>
<div class="foldopen" id="foldopen02610" data-start="{" data-end="}">
<div class="line"><a id="l02610" name="l02610"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_lifecycle.html#a47ba2a18e5151f888bafc5c2b77a484c"> 2610</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_lifecycle.html#a47ba2a18e5151f888bafc5c2b77a484c">RadosLifecycle::get_next_entry</a>(<span class="keyword">const</span> std::string&amp; oid, std::string&amp; marker,</div>
<div class="line"><a id="l02611" name="l02611"></a><span class="lineno"> 2611</span>                   <a class="code hl_struct" href="structrgw_1_1sal_1_1_lifecycle_1_1_l_c_entry.html">LCEntry</a>&amp; entry)</div>
<div class="line"><a id="l02612" name="l02612"></a><span class="lineno"> 2612</span>{</div>
<div class="line"><a id="l02613" name="l02613"></a><span class="lineno"> 2613</span>  cls_rgw_lc_entry cls_entry;</div>
<div class="line"><a id="l02614" name="l02614"></a><span class="lineno"> 2614</span>  <span class="keywordtype">int</span> ret = cls_rgw_lc_get_next_entry(*<a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_lifecycle.html#a9a66f8741cfcb941fac068d8714c0411">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aca5c28bc0f22f3f963d0475b594350e1">getRados</a>()-&gt;<a class="code hl_function" href="class_r_g_w_rados.html#ac5219da67ddba673b3c37a79e6960d4a">get_lc_pool_ctx</a>(), oid, marker,</div>
<div class="line"><a id="l02615" name="l02615"></a><span class="lineno"> 2615</span>                      cls_entry);</div>
<div class="line"><a id="l02616" name="l02616"></a><span class="lineno"> 2616</span> </div>
<div class="line"><a id="l02617" name="l02617"></a><span class="lineno"> 2617</span>  entry.<a class="code hl_variable" href="structrgw_1_1sal_1_1_lifecycle_1_1_l_c_entry.html#adf5aeebb89cb0317b441af21eee8cc33">bucket</a> = cls_entry.bucket;</div>
<div class="line"><a id="l02618" name="l02618"></a><span class="lineno"> 2618</span>  entry.<a class="code hl_variable" href="structrgw_1_1sal_1_1_lifecycle_1_1_l_c_entry.html#a3a7774d065b925783b71e2e2829a8606">start_time</a> = cls_entry.start_time;</div>
<div class="line"><a id="l02619" name="l02619"></a><span class="lineno"> 2619</span>  entry.<a class="code hl_variable" href="structrgw_1_1sal_1_1_lifecycle_1_1_l_c_entry.html#ab967abd35523acb2a08ffdc772a27858">status</a> = cls_entry.status;</div>
<div class="line"><a id="l02620" name="l02620"></a><span class="lineno"> 2620</span> </div>
<div class="line"><a id="l02621" name="l02621"></a><span class="lineno"> 2621</span>  <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l02622" name="l02622"></a><span class="lineno"> 2622</span>}</div>
</div>
<div class="line"><a id="l02623" name="l02623"></a><span class="lineno"> 2623</span> </div>
<div class="foldopen" id="foldopen02624" data-start="{" data-end="}">
<div class="line"><a id="l02624" name="l02624"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_lifecycle.html#a4f49d66e79995ac000f4879cc256c7a7"> 2624</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_lifecycle.html#a4f49d66e79995ac000f4879cc256c7a7">RadosLifecycle::set_entry</a>(<span class="keyword">const</span> std::string&amp; oid, <span class="keyword">const</span> <a class="code hl_struct" href="structrgw_1_1sal_1_1_lifecycle_1_1_l_c_entry.html">LCEntry</a>&amp; entry)</div>
<div class="line"><a id="l02625" name="l02625"></a><span class="lineno"> 2625</span>{</div>
<div class="line"><a id="l02626" name="l02626"></a><span class="lineno"> 2626</span>  cls_rgw_lc_entry cls_entry;</div>
<div class="line"><a id="l02627" name="l02627"></a><span class="lineno"> 2627</span> </div>
<div class="line"><a id="l02628" name="l02628"></a><span class="lineno"> 2628</span>  cls_entry.bucket = entry.<a class="code hl_variable" href="structrgw_1_1sal_1_1_lifecycle_1_1_l_c_entry.html#adf5aeebb89cb0317b441af21eee8cc33">bucket</a>;</div>
<div class="line"><a id="l02629" name="l02629"></a><span class="lineno"> 2629</span>  cls_entry.start_time = entry.<a class="code hl_variable" href="structrgw_1_1sal_1_1_lifecycle_1_1_l_c_entry.html#a3a7774d065b925783b71e2e2829a8606">start_time</a>;</div>
<div class="line"><a id="l02630" name="l02630"></a><span class="lineno"> 2630</span>  cls_entry.status = entry.<a class="code hl_variable" href="structrgw_1_1sal_1_1_lifecycle_1_1_l_c_entry.html#ab967abd35523acb2a08ffdc772a27858">status</a>;</div>
<div class="line"><a id="l02631" name="l02631"></a><span class="lineno"> 2631</span> </div>
<div class="line"><a id="l02632" name="l02632"></a><span class="lineno"> 2632</span>  <span class="keywordflow">return</span> cls_rgw_lc_set_entry(*<a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_lifecycle.html#a9a66f8741cfcb941fac068d8714c0411">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aca5c28bc0f22f3f963d0475b594350e1">getRados</a>()-&gt;<a class="code hl_function" href="class_r_g_w_rados.html#ac5219da67ddba673b3c37a79e6960d4a">get_lc_pool_ctx</a>(), oid, cls_entry);</div>
<div class="line"><a id="l02633" name="l02633"></a><span class="lineno"> 2633</span>}</div>
</div>
<div class="line"><a id="l02634" name="l02634"></a><span class="lineno"> 2634</span> </div>
<div class="foldopen" id="foldopen02635" data-start="{" data-end="}">
<div class="line"><a id="l02635" name="l02635"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_lifecycle.html#adda521c8df1dcd04415140b00d267cda"> 2635</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_lifecycle.html#adda521c8df1dcd04415140b00d267cda">RadosLifecycle::list_entries</a>(<span class="keyword">const</span> std::string&amp; oid, <span class="keyword">const</span> std::string&amp; marker,</div>
<div class="line"><a id="l02636" name="l02636"></a><span class="lineno"> 2636</span>                 uint32_t max_entries, vector&lt;LCEntry&gt;&amp; <a class="code hl_variable" href="cls__fifo__legacy_8cc.html#a0341b0ec09e77f9d6274d5b1517f7711">entries</a>)</div>
<div class="line"><a id="l02637" name="l02637"></a><span class="lineno"> 2637</span>{</div>
<div class="line"><a id="l02638" name="l02638"></a><span class="lineno"> 2638</span>  <a class="code hl_variable" href="cls__fifo__legacy_8cc.html#a0341b0ec09e77f9d6274d5b1517f7711">entries</a>.clear();</div>
<div class="line"><a id="l02639" name="l02639"></a><span class="lineno"> 2639</span> </div>
<div class="line"><a id="l02640" name="l02640"></a><span class="lineno"> 2640</span>  vector&lt;cls_rgw_lc_entry&gt; cls_entries;</div>
<div class="line"><a id="l02641" name="l02641"></a><span class="lineno"> 2641</span>  <span class="keywordtype">int</span> ret = cls_rgw_lc_list(*<a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_lifecycle.html#a9a66f8741cfcb941fac068d8714c0411">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aca5c28bc0f22f3f963d0475b594350e1">getRados</a>()-&gt;<a class="code hl_function" href="class_r_g_w_rados.html#ac5219da67ddba673b3c37a79e6960d4a">get_lc_pool_ctx</a>(), oid, marker, max_entries, cls_entries);</div>
<div class="line"><a id="l02642" name="l02642"></a><span class="lineno"> 2642</span> </div>
<div class="line"><a id="l02643" name="l02643"></a><span class="lineno"> 2643</span>  <span class="keywordflow">if</span> (ret &lt; 0)</div>
<div class="line"><a id="l02644" name="l02644"></a><span class="lineno"> 2644</span>    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l02645" name="l02645"></a><span class="lineno"> 2645</span> </div>
<div class="line"><a id="l02646" name="l02646"></a><span class="lineno"> 2646</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; entry : cls_entries) {</div>
<div class="line"><a id="l02647" name="l02647"></a><span class="lineno"> 2647</span>    <a class="code hl_variable" href="cls__fifo__legacy_8cc.html#a0341b0ec09e77f9d6274d5b1517f7711">entries</a>.push_back(<a class="code hl_struct" href="structrgw_1_1sal_1_1_lifecycle_1_1_l_c_entry.html">LCEntry</a>(entry.bucket, entry.start_time, entry.status));</div>
<div class="line"><a id="l02648" name="l02648"></a><span class="lineno"> 2648</span>  }</div>
<div class="line"><a id="l02649" name="l02649"></a><span class="lineno"> 2649</span> </div>
<div class="line"><a id="l02650" name="l02650"></a><span class="lineno"> 2650</span>  <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l02651" name="l02651"></a><span class="lineno"> 2651</span>}</div>
</div>
<div class="line"><a id="l02652" name="l02652"></a><span class="lineno"> 2652</span> </div>
<div class="foldopen" id="foldopen02653" data-start="{" data-end="}">
<div class="line"><a id="l02653" name="l02653"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_lifecycle.html#a9269bd730b160aff6ead03cf7103fc30"> 2653</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_lifecycle.html#a9269bd730b160aff6ead03cf7103fc30">RadosLifecycle::rm_entry</a>(<span class="keyword">const</span> std::string&amp; oid, <span class="keyword">const</span> <a class="code hl_struct" href="structrgw_1_1sal_1_1_lifecycle_1_1_l_c_entry.html">LCEntry</a>&amp; entry)</div>
<div class="line"><a id="l02654" name="l02654"></a><span class="lineno"> 2654</span>{</div>
<div class="line"><a id="l02655" name="l02655"></a><span class="lineno"> 2655</span>  cls_rgw_lc_entry cls_entry;</div>
<div class="line"><a id="l02656" name="l02656"></a><span class="lineno"> 2656</span> </div>
<div class="line"><a id="l02657" name="l02657"></a><span class="lineno"> 2657</span>  cls_entry.bucket = entry.<a class="code hl_variable" href="structrgw_1_1sal_1_1_lifecycle_1_1_l_c_entry.html#adf5aeebb89cb0317b441af21eee8cc33">bucket</a>;</div>
<div class="line"><a id="l02658" name="l02658"></a><span class="lineno"> 2658</span>  cls_entry.start_time = entry.<a class="code hl_variable" href="structrgw_1_1sal_1_1_lifecycle_1_1_l_c_entry.html#a3a7774d065b925783b71e2e2829a8606">start_time</a>;</div>
<div class="line"><a id="l02659" name="l02659"></a><span class="lineno"> 2659</span>  cls_entry.status = entry.<a class="code hl_variable" href="structrgw_1_1sal_1_1_lifecycle_1_1_l_c_entry.html#ab967abd35523acb2a08ffdc772a27858">status</a>;</div>
<div class="line"><a id="l02660" name="l02660"></a><span class="lineno"> 2660</span> </div>
<div class="line"><a id="l02661" name="l02661"></a><span class="lineno"> 2661</span>  <span class="keywordflow">return</span> cls_rgw_lc_rm_entry(*<a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_lifecycle.html#a9a66f8741cfcb941fac068d8714c0411">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aca5c28bc0f22f3f963d0475b594350e1">getRados</a>()-&gt;<a class="code hl_function" href="class_r_g_w_rados.html#ac5219da67ddba673b3c37a79e6960d4a">get_lc_pool_ctx</a>(), oid, cls_entry);</div>
<div class="line"><a id="l02662" name="l02662"></a><span class="lineno"> 2662</span>}</div>
</div>
<div class="line"><a id="l02663" name="l02663"></a><span class="lineno"> 2663</span> </div>
<div class="foldopen" id="foldopen02664" data-start="{" data-end="}">
<div class="line"><a id="l02664" name="l02664"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_lifecycle.html#a3d1e427f4dbbd5c22224e0313e9ebff2"> 2664</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_lifecycle.html#a3d1e427f4dbbd5c22224e0313e9ebff2">RadosLifecycle::get_head</a>(<span class="keyword">const</span> std::string&amp; oid, <a class="code hl_struct" href="structrgw_1_1sal_1_1_lifecycle_1_1_l_c_head.html">LCHead</a>&amp; head)</div>
<div class="line"><a id="l02665" name="l02665"></a><span class="lineno"> 2665</span>{</div>
<div class="line"><a id="l02666" name="l02666"></a><span class="lineno"> 2666</span>  cls_rgw_lc_obj_head cls_head;</div>
<div class="line"><a id="l02667" name="l02667"></a><span class="lineno"> 2667</span>  <span class="keywordtype">int</span> ret = cls_rgw_lc_get_head(*<a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_lifecycle.html#a9a66f8741cfcb941fac068d8714c0411">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aca5c28bc0f22f3f963d0475b594350e1">getRados</a>()-&gt;<a class="code hl_function" href="class_r_g_w_rados.html#ac5219da67ddba673b3c37a79e6960d4a">get_lc_pool_ctx</a>(), oid, cls_head);</div>
<div class="line"><a id="l02668" name="l02668"></a><span class="lineno"> 2668</span> </div>
<div class="line"><a id="l02669" name="l02669"></a><span class="lineno"> 2669</span>  head.<a class="code hl_variable" href="structrgw_1_1sal_1_1_lifecycle_1_1_l_c_head.html#a1ae4eda32aa11fd3a2c0728a50db8893">marker</a> = cls_head.marker;</div>
<div class="line"><a id="l02670" name="l02670"></a><span class="lineno"> 2670</span>  head.<a class="code hl_variable" href="structrgw_1_1sal_1_1_lifecycle_1_1_l_c_head.html#ad3ea7587a8a038d83ea0a7ca0d78b05f">start_date</a> = cls_head.start_date;</div>
<div class="line"><a id="l02671" name="l02671"></a><span class="lineno"> 2671</span> </div>
<div class="line"><a id="l02672" name="l02672"></a><span class="lineno"> 2672</span>  <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l02673" name="l02673"></a><span class="lineno"> 2673</span>}</div>
</div>
<div class="line"><a id="l02674" name="l02674"></a><span class="lineno"> 2674</span> </div>
<div class="foldopen" id="foldopen02675" data-start="{" data-end="}">
<div class="line"><a id="l02675" name="l02675"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_lifecycle.html#ad2b5146d6ba9c219024270de8023e8a0"> 2675</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_lifecycle.html#ad2b5146d6ba9c219024270de8023e8a0">RadosLifecycle::put_head</a>(<span class="keyword">const</span> std::string&amp; oid, <span class="keyword">const</span> <a class="code hl_struct" href="structrgw_1_1sal_1_1_lifecycle_1_1_l_c_head.html">LCHead</a>&amp; head)</div>
<div class="line"><a id="l02676" name="l02676"></a><span class="lineno"> 2676</span>{</div>
<div class="line"><a id="l02677" name="l02677"></a><span class="lineno"> 2677</span>  cls_rgw_lc_obj_head cls_head;</div>
<div class="line"><a id="l02678" name="l02678"></a><span class="lineno"> 2678</span> </div>
<div class="line"><a id="l02679" name="l02679"></a><span class="lineno"> 2679</span>  cls_head.marker = head.<a class="code hl_variable" href="structrgw_1_1sal_1_1_lifecycle_1_1_l_c_head.html#a1ae4eda32aa11fd3a2c0728a50db8893">marker</a>;</div>
<div class="line"><a id="l02680" name="l02680"></a><span class="lineno"> 2680</span>  cls_head.start_date = head.<a class="code hl_variable" href="structrgw_1_1sal_1_1_lifecycle_1_1_l_c_head.html#ad3ea7587a8a038d83ea0a7ca0d78b05f">start_date</a>;</div>
<div class="line"><a id="l02681" name="l02681"></a><span class="lineno"> 2681</span> </div>
<div class="line"><a id="l02682" name="l02682"></a><span class="lineno"> 2682</span>  <span class="keywordflow">return</span> cls_rgw_lc_put_head(*<a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_lifecycle.html#a9a66f8741cfcb941fac068d8714c0411">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aca5c28bc0f22f3f963d0475b594350e1">getRados</a>()-&gt;<a class="code hl_function" href="class_r_g_w_rados.html#ac5219da67ddba673b3c37a79e6960d4a">get_lc_pool_ctx</a>(), oid, cls_head);</div>
<div class="line"><a id="l02683" name="l02683"></a><span class="lineno"> 2683</span>}</div>
</div>
<div class="line"><a id="l02684" name="l02684"></a><span class="lineno"> 2684</span> </div>
<div class="foldopen" id="foldopen02685" data-start="{" data-end="}">
<div class="line"><a id="l02685" name="l02685"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_lifecycle.html#a23a944d4a1f1368f014d24d98295190a"> 2685</a></span><a class="code hl_struct" href="structrgw_1_1sal_1_1_l_c_serializer.html">LCSerializer</a>* <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_lifecycle.html#a23a944d4a1f1368f014d24d98295190a">RadosLifecycle::get_serializer</a>(<span class="keyword">const</span> std::string&amp; lock_name, <span class="keyword">const</span> std::string&amp; oid, <span class="keyword">const</span> std::string&amp; cookie)</div>
<div class="line"><a id="l02686" name="l02686"></a><span class="lineno"> 2686</span>{</div>
<div class="line"><a id="l02687" name="l02687"></a><span class="lineno"> 2687</span>  <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code hl_class" href="classrgw_1_1sal_1_1_l_c_rados_serializer.html">LCRadosSerializer</a>(<a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_lifecycle.html#a9a66f8741cfcb941fac068d8714c0411">store</a>, oid, lock_name, cookie);</div>
<div class="line"><a id="l02688" name="l02688"></a><span class="lineno"> 2688</span>}</div>
</div>
<div class="line"><a id="l02689" name="l02689"></a><span class="lineno"> 2689</span> </div>
<div class="foldopen" id="foldopen02690" data-start="{" data-end="}">
<div class="line"><a id="l02690" name="l02690"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_notification.html#a29f517fabe959de644ad1a7e62255a11"> 2690</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_notification.html#a29f517fabe959de644ad1a7e62255a11">RadosNotification::publish_reserve</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_class" href="class_r_g_w_obj_tags.html">RGWObjTags</a>* obj_tags)</div>
<div class="line"><a id="l02691" name="l02691"></a><span class="lineno"> 2691</span>{</div>
<div class="line"><a id="l02692" name="l02692"></a><span class="lineno"> 2692</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="namespacergw_1_1notify.html#a09ee70fa21b29e699d562017d4fb191d">rgw::notify::publish_reserve</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_variable" href="classrgw_1_1sal_1_1_notification.html#a10b7413096e84c434fafe7453d6108c9">event_type</a>, <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_notification.html#a666ca23f4a1d3bd11911e8e7dd12690c">res</a>, obj_tags);</div>
<div class="line"><a id="l02693" name="l02693"></a><span class="lineno"> 2693</span>}</div>
</div>
<div class="line"><a id="l02694" name="l02694"></a><span class="lineno"> 2694</span> </div>
<div class="foldopen" id="foldopen02695" data-start="{" data-end="}">
<div class="line"><a id="l02695" name="l02695"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_notification.html#ac2130e17f5599a54d1b9ef6bebc82256"> 2695</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_notification.html#ac2130e17f5599a54d1b9ef6bebc82256">RadosNotification::publish_commit</a>(<span class="keyword">const</span> DoutPrefixProvider* <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, uint64_t size,</div>
<div class="line"><a id="l02696" name="l02696"></a><span class="lineno"> 2696</span>                     <span class="keyword">const</span> ceph::real_time&amp; mtime, <span class="keyword">const</span> std::string&amp; etag, <span class="keyword">const</span> std::string&amp; version)</div>
<div class="line"><a id="l02697" name="l02697"></a><span class="lineno"> 2697</span>{</div>
<div class="line"><a id="l02698" name="l02698"></a><span class="lineno"> 2698</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="namespacergw_1_1notify.html#aaf327e62903969ad08625620bc30d8a2">rgw::notify::publish_commit</a>(<a class="code hl_variable" href="classrgw_1_1sal_1_1_notification.html#ae95b2dc0dffe521ce033b36f59572acd">obj</a>, size, mtime, etag, version, <a class="code hl_variable" href="classrgw_1_1sal_1_1_notification.html#a10b7413096e84c434fafe7453d6108c9">event_type</a>, <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_notification.html#a666ca23f4a1d3bd11911e8e7dd12690c">res</a>, <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>);</div>
<div class="line"><a id="l02699" name="l02699"></a><span class="lineno"> 2699</span>}</div>
</div>
<div class="line"><a id="l02700" name="l02700"></a><span class="lineno"> 2700</span> </div>
<div class="foldopen" id="foldopen02701" data-start="{" data-end="}">
<div class="line"><a id="l02701" name="l02701"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_atomic_writer.html#aeecf1e4f6d5dcbd8fb72d97479bb4e53"> 2701</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_atomic_writer.html#aeecf1e4f6d5dcbd8fb72d97479bb4e53">RadosAtomicWriter::prepare</a>(optional_yield y)</div>
<div class="line"><a id="l02702" name="l02702"></a><span class="lineno"> 2702</span>{</div>
<div class="line"><a id="l02703" name="l02703"></a><span class="lineno"> 2703</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_atomic_writer.html#a22e010d5f79e049a6e6ee403ccf8e9d6">processor</a>.<a class="code hl_function" href="classrgw_1_1putobj_1_1_atomic_object_processor.html#a940d824173f346cacf64df9d6e3354a0">prepare</a>(y);</div>
<div class="line"><a id="l02704" name="l02704"></a><span class="lineno"> 2704</span>}</div>
</div>
<div class="line"><a id="l02705" name="l02705"></a><span class="lineno"> 2705</span> </div>
<div class="foldopen" id="foldopen02706" data-start="{" data-end="}">
<div class="line"><a id="l02706" name="l02706"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_atomic_writer.html#ae615ce3a5a3cf6101ac09a7e7e4cf711"> 2706</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_atomic_writer.html#ae615ce3a5a3cf6101ac09a7e7e4cf711">RadosAtomicWriter::process</a>(bufferlist&amp;&amp; data, uint64_t offset)</div>
<div class="line"><a id="l02707" name="l02707"></a><span class="lineno"> 2707</span>{</div>
<div class="line"><a id="l02708" name="l02708"></a><span class="lineno"> 2708</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_atomic_writer.html#a22e010d5f79e049a6e6ee403ccf8e9d6">processor</a>.<a class="code hl_function" href="classrgw_1_1putobj_1_1_head_object_processor.html#a3da70c0ba679b2be00e9ee7d5967e581">process</a>(std::move(data), offset);</div>
<div class="line"><a id="l02709" name="l02709"></a><span class="lineno"> 2709</span>}</div>
</div>
<div class="line"><a id="l02710" name="l02710"></a><span class="lineno"> 2710</span> </div>
<div class="foldopen" id="foldopen02711" data-start="{" data-end="}">
<div class="line"><a id="l02711" name="l02711"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_atomic_writer.html#a2a72f4c193e1643bd82188a605c6ae36"> 2711</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_atomic_writer.html#a2a72f4c193e1643bd82188a605c6ae36">RadosAtomicWriter::complete</a>(<span class="keywordtype">size_t</span> accounted_size, <span class="keyword">const</span> std::string&amp; etag,</div>
<div class="line"><a id="l02712" name="l02712"></a><span class="lineno"> 2712</span>                       ceph::real_time *mtime, ceph::real_time set_mtime,</div>
<div class="line"><a id="l02713" name="l02713"></a><span class="lineno"> 2713</span>                       std::map&lt;std::string, bufferlist&gt;&amp; attrs,</div>
<div class="line"><a id="l02714" name="l02714"></a><span class="lineno"> 2714</span>                       ceph::real_time delete_at,</div>
<div class="line"><a id="l02715" name="l02715"></a><span class="lineno"> 2715</span>                       <span class="keyword">const</span> <span class="keywordtype">char</span> *if_match, <span class="keyword">const</span> <span class="keywordtype">char</span> *if_nomatch,</div>
<div class="line"><a id="l02716" name="l02716"></a><span class="lineno"> 2716</span>                       <span class="keyword">const</span> std::string *user_data,</div>
<div class="line"><a id="l02717" name="l02717"></a><span class="lineno"> 2717</span>                       rgw_zone_set *zones_trace, <span class="keywordtype">bool</span> *canceled,</div>
<div class="line"><a id="l02718" name="l02718"></a><span class="lineno"> 2718</span>                       optional_yield y)</div>
<div class="line"><a id="l02719" name="l02719"></a><span class="lineno"> 2719</span>{</div>
<div class="line"><a id="l02720" name="l02720"></a><span class="lineno"> 2720</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_atomic_writer.html#a22e010d5f79e049a6e6ee403ccf8e9d6">processor</a>.<a class="code hl_function" href="classrgw_1_1putobj_1_1_atomic_object_processor.html#ab1ff7cd55c65dd56716a55866532f1c0">complete</a>(accounted_size, etag, mtime, set_mtime, attrs, delete_at,</div>
<div class="line"><a id="l02721" name="l02721"></a><span class="lineno"> 2721</span>                if_match, if_nomatch, user_data, zones_trace, canceled, y);</div>
<div class="line"><a id="l02722" name="l02722"></a><span class="lineno"> 2722</span>}</div>
</div>
<div class="line"><a id="l02723" name="l02723"></a><span class="lineno"> 2723</span> </div>
<div class="foldopen" id="foldopen02724" data-start="{" data-end="}">
<div class="line"><a id="l02724" name="l02724"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_append_writer.html#acb02ae93674b2d74bbeea0ee036602f1"> 2724</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_append_writer.html#acb02ae93674b2d74bbeea0ee036602f1">RadosAppendWriter::prepare</a>(optional_yield y)</div>
<div class="line"><a id="l02725" name="l02725"></a><span class="lineno"> 2725</span>{</div>
<div class="line"><a id="l02726" name="l02726"></a><span class="lineno"> 2726</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_append_writer.html#ab32e362d802b6bb1d3cc00778d883f4f">processor</a>.<a class="code hl_function" href="classrgw_1_1putobj_1_1_append_object_processor.html#a2e9120ccc465592e0fe41ecd0ca56e52">prepare</a>(y);</div>
<div class="line"><a id="l02727" name="l02727"></a><span class="lineno"> 2727</span>}</div>
</div>
<div class="line"><a id="l02728" name="l02728"></a><span class="lineno"> 2728</span> </div>
<div class="foldopen" id="foldopen02729" data-start="{" data-end="}">
<div class="line"><a id="l02729" name="l02729"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_append_writer.html#ad97b826a8ef25c74edd718873263102c"> 2729</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_append_writer.html#ad97b826a8ef25c74edd718873263102c">RadosAppendWriter::process</a>(bufferlist&amp;&amp; data, uint64_t offset)</div>
<div class="line"><a id="l02730" name="l02730"></a><span class="lineno"> 2730</span>{</div>
<div class="line"><a id="l02731" name="l02731"></a><span class="lineno"> 2731</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_append_writer.html#ab32e362d802b6bb1d3cc00778d883f4f">processor</a>.<a class="code hl_function" href="classrgw_1_1putobj_1_1_head_object_processor.html#a3da70c0ba679b2be00e9ee7d5967e581">process</a>(std::move(data), offset);</div>
<div class="line"><a id="l02732" name="l02732"></a><span class="lineno"> 2732</span>}</div>
</div>
<div class="line"><a id="l02733" name="l02733"></a><span class="lineno"> 2733</span> </div>
<div class="foldopen" id="foldopen02734" data-start="{" data-end="}">
<div class="line"><a id="l02734" name="l02734"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_append_writer.html#a854f9e38f22c9922d5e4cdfda24508b3"> 2734</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_append_writer.html#a854f9e38f22c9922d5e4cdfda24508b3">RadosAppendWriter::complete</a>(<span class="keywordtype">size_t</span> accounted_size, <span class="keyword">const</span> std::string&amp; etag,</div>
<div class="line"><a id="l02735" name="l02735"></a><span class="lineno"> 2735</span>                       ceph::real_time *mtime, ceph::real_time set_mtime,</div>
<div class="line"><a id="l02736" name="l02736"></a><span class="lineno"> 2736</span>                       std::map&lt;std::string, bufferlist&gt;&amp; attrs,</div>
<div class="line"><a id="l02737" name="l02737"></a><span class="lineno"> 2737</span>                       ceph::real_time delete_at,</div>
<div class="line"><a id="l02738" name="l02738"></a><span class="lineno"> 2738</span>                       <span class="keyword">const</span> <span class="keywordtype">char</span> *if_match, <span class="keyword">const</span> <span class="keywordtype">char</span> *if_nomatch,</div>
<div class="line"><a id="l02739" name="l02739"></a><span class="lineno"> 2739</span>                       <span class="keyword">const</span> std::string *user_data,</div>
<div class="line"><a id="l02740" name="l02740"></a><span class="lineno"> 2740</span>                       rgw_zone_set *zones_trace, <span class="keywordtype">bool</span> *canceled,</div>
<div class="line"><a id="l02741" name="l02741"></a><span class="lineno"> 2741</span>                       optional_yield y)</div>
<div class="line"><a id="l02742" name="l02742"></a><span class="lineno"> 2742</span>{</div>
<div class="line"><a id="l02743" name="l02743"></a><span class="lineno"> 2743</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_append_writer.html#ab32e362d802b6bb1d3cc00778d883f4f">processor</a>.<a class="code hl_function" href="classrgw_1_1putobj_1_1_append_object_processor.html#a01e8f8477c9565ab79392e3315c432e3">complete</a>(accounted_size, etag, mtime, set_mtime, attrs, delete_at,</div>
<div class="line"><a id="l02744" name="l02744"></a><span class="lineno"> 2744</span>                if_match, if_nomatch, user_data, zones_trace, canceled, y);</div>
<div class="line"><a id="l02745" name="l02745"></a><span class="lineno"> 2745</span>}</div>
</div>
<div class="line"><a id="l02746" name="l02746"></a><span class="lineno"> 2746</span> </div>
<div class="foldopen" id="foldopen02747" data-start="{" data-end="}">
<div class="line"><a id="l02747" name="l02747"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_multipart_writer.html#a709a8850e3696ceda76ac3a0a12fe9cf"> 2747</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_multipart_writer.html#a709a8850e3696ceda76ac3a0a12fe9cf">RadosMultipartWriter::prepare</a>(optional_yield y)</div>
<div class="line"><a id="l02748" name="l02748"></a><span class="lineno"> 2748</span>{</div>
<div class="line"><a id="l02749" name="l02749"></a><span class="lineno"> 2749</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_multipart_writer.html#aa04fc0de771315e54d0f46bfce8a5ad6">processor</a>.<a class="code hl_function" href="classrgw_1_1putobj_1_1_multipart_object_processor.html#ac39a3c3aba863c24cf73fff241df60d9">prepare</a>(y);</div>
<div class="line"><a id="l02750" name="l02750"></a><span class="lineno"> 2750</span>}</div>
</div>
<div class="line"><a id="l02751" name="l02751"></a><span class="lineno"> 2751</span> </div>
<div class="foldopen" id="foldopen02752" data-start="{" data-end="}">
<div class="line"><a id="l02752" name="l02752"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_multipart_writer.html#add6537adadf8742330c4832ce1cc4880"> 2752</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_multipart_writer.html#add6537adadf8742330c4832ce1cc4880">RadosMultipartWriter::process</a>(bufferlist&amp;&amp; data, uint64_t offset)</div>
<div class="line"><a id="l02753" name="l02753"></a><span class="lineno"> 2753</span>{</div>
<div class="line"><a id="l02754" name="l02754"></a><span class="lineno"> 2754</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_multipart_writer.html#aa04fc0de771315e54d0f46bfce8a5ad6">processor</a>.<a class="code hl_function" href="classrgw_1_1putobj_1_1_head_object_processor.html#a3da70c0ba679b2be00e9ee7d5967e581">process</a>(std::move(data), offset);</div>
<div class="line"><a id="l02755" name="l02755"></a><span class="lineno"> 2755</span>}</div>
</div>
<div class="line"><a id="l02756" name="l02756"></a><span class="lineno"> 2756</span> </div>
<div class="foldopen" id="foldopen02757" data-start="{" data-end="}">
<div class="line"><a id="l02757" name="l02757"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_multipart_writer.html#a36c868aa5002652dab0e2f57cfd7a43a"> 2757</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_multipart_writer.html#a36c868aa5002652dab0e2f57cfd7a43a">RadosMultipartWriter::complete</a>(<span class="keywordtype">size_t</span> accounted_size, <span class="keyword">const</span> std::string&amp; etag,</div>
<div class="line"><a id="l02758" name="l02758"></a><span class="lineno"> 2758</span>                       ceph::real_time *mtime, ceph::real_time set_mtime,</div>
<div class="line"><a id="l02759" name="l02759"></a><span class="lineno"> 2759</span>                       std::map&lt;std::string, bufferlist&gt;&amp; attrs,</div>
<div class="line"><a id="l02760" name="l02760"></a><span class="lineno"> 2760</span>                       ceph::real_time delete_at,</div>
<div class="line"><a id="l02761" name="l02761"></a><span class="lineno"> 2761</span>                       <span class="keyword">const</span> <span class="keywordtype">char</span> *if_match, <span class="keyword">const</span> <span class="keywordtype">char</span> *if_nomatch,</div>
<div class="line"><a id="l02762" name="l02762"></a><span class="lineno"> 2762</span>                       <span class="keyword">const</span> std::string *user_data,</div>
<div class="line"><a id="l02763" name="l02763"></a><span class="lineno"> 2763</span>                       rgw_zone_set *zones_trace, <span class="keywordtype">bool</span> *canceled,</div>
<div class="line"><a id="l02764" name="l02764"></a><span class="lineno"> 2764</span>                       optional_yield y)</div>
<div class="line"><a id="l02765" name="l02765"></a><span class="lineno"> 2765</span>{</div>
<div class="line"><a id="l02766" name="l02766"></a><span class="lineno"> 2766</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_multipart_writer.html#aa04fc0de771315e54d0f46bfce8a5ad6">processor</a>.<a class="code hl_function" href="classrgw_1_1putobj_1_1_multipart_object_processor.html#ad9680d453595af9390aa660ae28dcc05">complete</a>(accounted_size, etag, mtime, set_mtime, attrs, delete_at,</div>
<div class="line"><a id="l02767" name="l02767"></a><span class="lineno"> 2767</span>                if_match, if_nomatch, user_data, zones_trace, canceled, y);</div>
<div class="line"><a id="l02768" name="l02768"></a><span class="lineno"> 2768</span>}</div>
</div>
<div class="line"><a id="l02769" name="l02769"></a><span class="lineno"> 2769</span> </div>
<div class="foldopen" id="foldopen02770" data-start="{" data-end="}">
<div class="line"><a id="l02770" name="l02770"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_zone.html#a45f4565c9268cc753badf9f9f0c25681"> 2770</a></span><span class="keyword">const</span> <a class="code hl_struct" href="struct_r_g_w_zone_group.html">RGWZoneGroup</a>&amp; <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_zone.html#a45f4565c9268cc753badf9f9f0c25681">RadosZone::get_zonegroup</a>()</div>
<div class="line"><a id="l02771" name="l02771"></a><span class="lineno"> 2771</span>{</div>
<div class="line"><a id="l02772" name="l02772"></a><span class="lineno"> 2772</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_zone.html#abc6d90b75821ba3b9fbafab9b186cc1f">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#abe4f0602b771d5549a02c0a326d6a832">svc</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_services.html#a6a82305adde4d9b9667690ed2059a394">zone</a>-&gt;<a class="code hl_function" href="class_r_g_w_s_i___zone.html#af86fd910c1fcd3e007560d1390e6be15">get_zonegroup</a>();</div>
<div class="line"><a id="l02773" name="l02773"></a><span class="lineno"> 2773</span>}</div>
</div>
<div class="line"><a id="l02774" name="l02774"></a><span class="lineno"> 2774</span> </div>
<div class="foldopen" id="foldopen02775" data-start="{" data-end="}">
<div class="line"><a id="l02775" name="l02775"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_zone.html#ac5cc67335d47fb4f22a3f70d4e2b5a21"> 2775</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_zone.html#a45f4565c9268cc753badf9f9f0c25681">RadosZone::get_zonegroup</a>(<span class="keyword">const</span> std::string&amp; <span class="keywordtype">id</span>, <a class="code hl_struct" href="struct_r_g_w_zone_group.html">RGWZoneGroup</a>&amp; zonegroup)</div>
<div class="line"><a id="l02776" name="l02776"></a><span class="lineno"> 2776</span>{</div>
<div class="line"><a id="l02777" name="l02777"></a><span class="lineno"> 2777</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_zone.html#abc6d90b75821ba3b9fbafab9b186cc1f">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#abe4f0602b771d5549a02c0a326d6a832">svc</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_services.html#a6a82305adde4d9b9667690ed2059a394">zone</a>-&gt;<a class="code hl_function" href="class_r_g_w_s_i___zone.html#af86fd910c1fcd3e007560d1390e6be15">get_zonegroup</a>(<span class="keywordtype">id</span>, zonegroup);</div>
<div class="line"><a id="l02778" name="l02778"></a><span class="lineno"> 2778</span>}</div>
</div>
<div class="line"><a id="l02779" name="l02779"></a><span class="lineno"> 2779</span> </div>
<div class="foldopen" id="foldopen02780" data-start="{" data-end="}">
<div class="line"><a id="l02780" name="l02780"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_zone.html#ab9e8f505a92222feb546dad06e728289"> 2780</a></span><span class="keyword">const</span> <a class="code hl_struct" href="struct_r_g_w_zone_params.html">RGWZoneParams</a>&amp; <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_zone.html#ab9e8f505a92222feb546dad06e728289">RadosZone::get_params</a>()</div>
<div class="line"><a id="l02781" name="l02781"></a><span class="lineno"> 2781</span>{</div>
<div class="line"><a id="l02782" name="l02782"></a><span class="lineno"> 2782</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_zone.html#abc6d90b75821ba3b9fbafab9b186cc1f">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#abe4f0602b771d5549a02c0a326d6a832">svc</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_services.html#a6a82305adde4d9b9667690ed2059a394">zone</a>-&gt;<a class="code hl_function" href="class_r_g_w_s_i___zone.html#a0ade599544ff866a0e9292f49c1ad179">get_zone_params</a>();</div>
<div class="line"><a id="l02783" name="l02783"></a><span class="lineno"> 2783</span>}</div>
</div>
<div class="line"><a id="l02784" name="l02784"></a><span class="lineno"> 2784</span> </div>
<div class="foldopen" id="foldopen02785" data-start="{" data-end="}">
<div class="line"><a id="l02785" name="l02785"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_zone.html#ab7b15fec53ea786134634efcd8fcaa66"> 2785</a></span><span class="keyword">const</span> <a class="code hl_struct" href="structrgw__zone__id.html">rgw_zone_id</a>&amp; <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_zone.html#ab7b15fec53ea786134634efcd8fcaa66">RadosZone::get_id</a>()</div>
<div class="line"><a id="l02786" name="l02786"></a><span class="lineno"> 2786</span>{</div>
<div class="line"><a id="l02787" name="l02787"></a><span class="lineno"> 2787</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_zone.html#abc6d90b75821ba3b9fbafab9b186cc1f">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#abe4f0602b771d5549a02c0a326d6a832">svc</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_services.html#a6a82305adde4d9b9667690ed2059a394">zone</a>-&gt;<a class="code hl_function" href="class_r_g_w_s_i___zone.html#a1aa20a256f3e9051b163de4ca317ff77">zone_id</a>();</div>
<div class="line"><a id="l02788" name="l02788"></a><span class="lineno"> 2788</span>}</div>
</div>
<div class="line"><a id="l02789" name="l02789"></a><span class="lineno"> 2789</span> </div>
<div class="foldopen" id="foldopen02790" data-start="{" data-end="}">
<div class="line"><a id="l02790" name="l02790"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_zone.html#abc4d9b9ec057db044e8cf34e440e9eba"> 2790</a></span><span class="keyword">const</span> <a class="code hl_class" href="class_r_g_w_realm.html">RGWRealm</a>&amp; <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_zone.html#abc4d9b9ec057db044e8cf34e440e9eba">RadosZone::get_realm</a>()</div>
<div class="line"><a id="l02791" name="l02791"></a><span class="lineno"> 2791</span>{</div>
<div class="line"><a id="l02792" name="l02792"></a><span class="lineno"> 2792</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_zone.html#abc6d90b75821ba3b9fbafab9b186cc1f">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#abe4f0602b771d5549a02c0a326d6a832">svc</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_services.html#a6a82305adde4d9b9667690ed2059a394">zone</a>-&gt;<a class="code hl_function" href="class_r_g_w_s_i___zone.html#ac46fd33225ebe0c90db3cc2b17560ce0">get_realm</a>();</div>
<div class="line"><a id="l02793" name="l02793"></a><span class="lineno"> 2793</span>}</div>
</div>
<div class="line"><a id="l02794" name="l02794"></a><span class="lineno"> 2794</span> </div>
<div class="foldopen" id="foldopen02795" data-start="{" data-end="}">
<div class="line"><a id="l02795" name="l02795"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_zone.html#ae2121fd7fb96a0953160cae76f6d52f1"> 2795</a></span><span class="keyword">const</span> std::string&amp; <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_zone.html#ae2121fd7fb96a0953160cae76f6d52f1">RadosZone::get_name</a>()<span class="keyword"> const</span></div>
<div class="line"><a id="l02796" name="l02796"></a><span class="lineno"> 2796</span><span class="keyword"></span>{</div>
<div class="line"><a id="l02797" name="l02797"></a><span class="lineno"> 2797</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_zone.html#abc6d90b75821ba3b9fbafab9b186cc1f">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#abe4f0602b771d5549a02c0a326d6a832">svc</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_services.html#a6a82305adde4d9b9667690ed2059a394">zone</a>-&gt;<a class="code hl_function" href="class_r_g_w_s_i___zone.html#a13836f0becce33b5511b4edc553f89a5">zone_name</a>();</div>
<div class="line"><a id="l02798" name="l02798"></a><span class="lineno"> 2798</span>}</div>
</div>
<div class="line"><a id="l02799" name="l02799"></a><span class="lineno"> 2799</span> </div>
<div class="foldopen" id="foldopen02800" data-start="{" data-end="}">
<div class="line"><a id="l02800" name="l02800"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_zone.html#af34b89b020e827b4fd2b7106385e01a8"> 2800</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_zone.html#af34b89b020e827b4fd2b7106385e01a8">RadosZone::is_writeable</a>()</div>
<div class="line"><a id="l02801" name="l02801"></a><span class="lineno"> 2801</span>{</div>
<div class="line"><a id="l02802" name="l02802"></a><span class="lineno"> 2802</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_zone.html#abc6d90b75821ba3b9fbafab9b186cc1f">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#abe4f0602b771d5549a02c0a326d6a832">svc</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_services.html#a6a82305adde4d9b9667690ed2059a394">zone</a>-&gt;<a class="code hl_function" href="class_r_g_w_s_i___zone.html#a03c9897044b86abf8cebd44422ed1966">zone_is_writeable</a>();</div>
<div class="line"><a id="l02803" name="l02803"></a><span class="lineno"> 2803</span>}</div>
</div>
<div class="line"><a id="l02804" name="l02804"></a><span class="lineno"> 2804</span> </div>
<div class="foldopen" id="foldopen02805" data-start="{" data-end="}">
<div class="line"><a id="l02805" name="l02805"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_zone.html#a9f9d5d0a31ca382ea54d84256fac6a8b"> 2805</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_zone.html#a9f9d5d0a31ca382ea54d84256fac6a8b">RadosZone::get_redirect_endpoint</a>(std::string* endpoint)</div>
<div class="line"><a id="l02806" name="l02806"></a><span class="lineno"> 2806</span>{</div>
<div class="line"><a id="l02807" name="l02807"></a><span class="lineno"> 2807</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_zone.html#abc6d90b75821ba3b9fbafab9b186cc1f">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#abe4f0602b771d5549a02c0a326d6a832">svc</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_services.html#a6a82305adde4d9b9667690ed2059a394">zone</a>-&gt;<a class="code hl_function" href="class_r_g_w_s_i___zone.html#ab85f1573b13b362f290438aacaca1882">get_redirect_zone_endpoint</a>(endpoint);</div>
<div class="line"><a id="l02808" name="l02808"></a><span class="lineno"> 2808</span>}</div>
</div>
<div class="line"><a id="l02809" name="l02809"></a><span class="lineno"> 2809</span> </div>
<div class="foldopen" id="foldopen02810" data-start="{" data-end="}">
<div class="line"><a id="l02810" name="l02810"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_zone.html#aa01fabd71aba8266f2aca82f4b165538"> 2810</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_zone.html#aa01fabd71aba8266f2aca82f4b165538">RadosZone::has_zonegroup_api</a>(<span class="keyword">const</span> std::string&amp; api)<span class="keyword"> const</span></div>
<div class="line"><a id="l02811" name="l02811"></a><span class="lineno"> 2811</span><span class="keyword"></span>{</div>
<div class="line"><a id="l02812" name="l02812"></a><span class="lineno"> 2812</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_zone.html#abc6d90b75821ba3b9fbafab9b186cc1f">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#abe4f0602b771d5549a02c0a326d6a832">svc</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_services.html#a6a82305adde4d9b9667690ed2059a394">zone</a>-&gt;<a class="code hl_function" href="class_r_g_w_s_i___zone.html#a7055152851dfae99d84a0f1cc547902c">has_zonegroup_api</a>(api);</div>
<div class="line"><a id="l02813" name="l02813"></a><span class="lineno"> 2813</span>}</div>
</div>
<div class="line"><a id="l02814" name="l02814"></a><span class="lineno"> 2814</span> </div>
<div class="foldopen" id="foldopen02815" data-start="{" data-end="}">
<div class="line"><a id="l02815" name="l02815"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_zone.html#ad18d7553c6c28ae7215718f16e0ce679"> 2815</a></span><span class="keyword">const</span> std::string&amp; <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_zone.html#ad18d7553c6c28ae7215718f16e0ce679">RadosZone::get_current_period_id</a>()</div>
<div class="line"><a id="l02816" name="l02816"></a><span class="lineno"> 2816</span>{</div>
<div class="line"><a id="l02817" name="l02817"></a><span class="lineno"> 2817</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_zone.html#abc6d90b75821ba3b9fbafab9b186cc1f">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#abe4f0602b771d5549a02c0a326d6a832">svc</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_services.html#a6a82305adde4d9b9667690ed2059a394">zone</a>-&gt;<a class="code hl_function" href="class_r_g_w_s_i___zone.html#a0e9f0f7357c948c4d6af8df223740522">get_current_period_id</a>();</div>
<div class="line"><a id="l02818" name="l02818"></a><span class="lineno"> 2818</span>}</div>
</div>
<div class="line"><a id="l02819" name="l02819"></a><span class="lineno"> 2819</span> </div>
<div class="foldopen" id="foldopen02820" data-start="{" data-end="}">
<div class="line"><a id="l02820" name="l02820"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_lua_script_manager.html#ad031e042bf9cb2e1c59be004796fa7d1"> 2820</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_lua_script_manager.html#ad031e042bf9cb2e1c59be004796fa7d1">RadosLuaScriptManager::get</a>(<span class="keyword">const</span> DoutPrefixProvider* <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, optional_yield y, <span class="keyword">const</span> std::string&amp; key, std::string&amp; script)</div>
<div class="line"><a id="l02821" name="l02821"></a><span class="lineno"> 2821</span>{</div>
<div class="line"><a id="l02822" name="l02822"></a><span class="lineno"> 2822</span>  <span class="keyword">auto</span> obj_ctx = <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_lua_script_manager.html#a2972f0be07dd19ecdc2f1dca9caef03b">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#abe4f0602b771d5549a02c0a326d6a832">svc</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_services.html#a742bbed66b1688310eeb8c0b692bf6b9">sysobj</a>-&gt;<a class="code hl_function" href="class_r_g_w_s_i___sys_obj.html#a42dbd3046b9d94873446090556f05e63">init_obj_ctx</a>();</div>
<div class="line"><a id="l02823" name="l02823"></a><span class="lineno"> 2823</span>  bufferlist bl;</div>
<div class="line"><a id="l02824" name="l02824"></a><span class="lineno"> 2824</span> </div>
<div class="line"><a id="l02825" name="l02825"></a><span class="lineno"> 2825</span>  <span class="keywordtype">int</span> <a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a> = <a class="code hl_function" href="rgw__tools_8cc.html#a3e647ae97c113ee3ad07bad363e640b6">rgw_get_system_obj</a>(obj_ctx, <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_lua_script_manager.html#a34e69f58bbc5928fbe9a53e476689f30">pool</a>, key, bl, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, y, <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>);</div>
<div class="line"><a id="l02826" name="l02826"></a><span class="lineno"> 2826</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a> &lt; 0) {</div>
<div class="line"><a id="l02827" name="l02827"></a><span class="lineno"> 2827</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a>;</div>
<div class="line"><a id="l02828" name="l02828"></a><span class="lineno"> 2828</span>  }</div>
<div class="line"><a id="l02829" name="l02829"></a><span class="lineno"> 2829</span> </div>
<div class="line"><a id="l02830" name="l02830"></a><span class="lineno"> 2830</span>  <span class="keyword">auto</span> iter = bl.cbegin();</div>
<div class="line"><a id="l02831" name="l02831"></a><span class="lineno"> 2831</span>  <span class="keywordflow">try</span> {</div>
<div class="line"><a id="l02832" name="l02832"></a><span class="lineno"> 2832</span>    ceph::decode(script, iter);</div>
<div class="line"><a id="l02833" name="l02833"></a><span class="lineno"> 2833</span>  } <span class="keywordflow">catch</span> (buffer::error&amp; err) {</div>
<div class="line"><a id="l02834" name="l02834"></a><span class="lineno"> 2834</span>    <span class="keywordflow">return</span> -EIO;</div>
<div class="line"><a id="l02835" name="l02835"></a><span class="lineno"> 2835</span>  }</div>
<div class="line"><a id="l02836" name="l02836"></a><span class="lineno"> 2836</span> </div>
<div class="line"><a id="l02837" name="l02837"></a><span class="lineno"> 2837</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l02838" name="l02838"></a><span class="lineno"> 2838</span>}</div>
</div>
<div class="line"><a id="l02839" name="l02839"></a><span class="lineno"> 2839</span> </div>
<div class="foldopen" id="foldopen02840" data-start="{" data-end="}">
<div class="line"><a id="l02840" name="l02840"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_lua_script_manager.html#aba8c35ebcfe18f8ee16dd0bc67f82291"> 2840</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_lua_script_manager.html#aba8c35ebcfe18f8ee16dd0bc67f82291">RadosLuaScriptManager::put</a>(<span class="keyword">const</span> DoutPrefixProvider* <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, optional_yield y, <span class="keyword">const</span> std::string&amp; key, <span class="keyword">const</span> std::string&amp; script)</div>
<div class="line"><a id="l02841" name="l02841"></a><span class="lineno"> 2841</span>{</div>
<div class="line"><a id="l02842" name="l02842"></a><span class="lineno"> 2842</span>  <span class="keyword">auto</span> obj_ctx = <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_lua_script_manager.html#a2972f0be07dd19ecdc2f1dca9caef03b">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#abe4f0602b771d5549a02c0a326d6a832">svc</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_services.html#a742bbed66b1688310eeb8c0b692bf6b9">sysobj</a>-&gt;<a class="code hl_function" href="class_r_g_w_s_i___sys_obj.html#a42dbd3046b9d94873446090556f05e63">init_obj_ctx</a>();</div>
<div class="line"><a id="l02843" name="l02843"></a><span class="lineno"> 2843</span>  bufferlist bl;</div>
<div class="line"><a id="l02844" name="l02844"></a><span class="lineno"> 2844</span>  ceph::encode(script, bl);</div>
<div class="line"><a id="l02845" name="l02845"></a><span class="lineno"> 2845</span> </div>
<div class="line"><a id="l02846" name="l02846"></a><span class="lineno"> 2846</span>  <span class="keywordtype">int</span> <a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a> = <a class="code hl_function" href="rgw__tools_8cc.html#a5a37218cbf7acd34def1915314441451">rgw_put_system_obj</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, obj_ctx, <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_lua_script_manager.html#a34e69f58bbc5928fbe9a53e476689f30">pool</a>, key, bl, <span class="keyword">false</span>, <span class="keyword">nullptr</span>, real_time(), y);</div>
<div class="line"><a id="l02847" name="l02847"></a><span class="lineno"> 2847</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a> &lt; 0) {</div>
<div class="line"><a id="l02848" name="l02848"></a><span class="lineno"> 2848</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a>;</div>
<div class="line"><a id="l02849" name="l02849"></a><span class="lineno"> 2849</span>  }</div>
<div class="line"><a id="l02850" name="l02850"></a><span class="lineno"> 2850</span> </div>
<div class="line"><a id="l02851" name="l02851"></a><span class="lineno"> 2851</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l02852" name="l02852"></a><span class="lineno"> 2852</span>}</div>
</div>
<div class="line"><a id="l02853" name="l02853"></a><span class="lineno"> 2853</span> </div>
<div class="foldopen" id="foldopen02854" data-start="{" data-end="}">
<div class="line"><a id="l02854" name="l02854"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_lua_script_manager.html#a5102c6f0a39b9116d58fb88f442d2378"> 2854</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_lua_script_manager.html#a5102c6f0a39b9116d58fb88f442d2378">RadosLuaScriptManager::del</a>(<span class="keyword">const</span> DoutPrefixProvider* <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, optional_yield y, <span class="keyword">const</span> std::string&amp; key)</div>
<div class="line"><a id="l02855" name="l02855"></a><span class="lineno"> 2855</span>{</div>
<div class="line"><a id="l02856" name="l02856"></a><span class="lineno"> 2856</span>  <span class="keywordtype">int</span> <a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a> = <a class="code hl_function" href="rgw__tools_8cc.html#a046ce687b6bb951e6c13fcb3b373bbe5">rgw_delete_system_obj</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_lua_script_manager.html#a2972f0be07dd19ecdc2f1dca9caef03b">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#abe4f0602b771d5549a02c0a326d6a832">svc</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_services.html#a742bbed66b1688310eeb8c0b692bf6b9">sysobj</a>, <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_lua_script_manager.html#a34e69f58bbc5928fbe9a53e476689f30">pool</a>, key, <span class="keyword">nullptr</span>, y);</div>
<div class="line"><a id="l02857" name="l02857"></a><span class="lineno"> 2857</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a> &lt; 0 &amp;&amp; <a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a> != -ENOENT) {</div>
<div class="line"><a id="l02858" name="l02858"></a><span class="lineno"> 2858</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a>;</div>
<div class="line"><a id="l02859" name="l02859"></a><span class="lineno"> 2859</span>  }</div>
<div class="line"><a id="l02860" name="l02860"></a><span class="lineno"> 2860</span> </div>
<div class="line"><a id="l02861" name="l02861"></a><span class="lineno"> 2861</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l02862" name="l02862"></a><span class="lineno"> 2862</span>}</div>
</div>
<div class="line"><a id="l02863" name="l02863"></a><span class="lineno"> 2863</span> </div>
<div class="foldopen" id="foldopen02864" data-start="{" data-end="}">
<div class="line"><a id="l02864" name="l02864"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_o_i_d_c_provider.html#aa7e0f02f7454165b6538ea40f4de2ed4"> 2864</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_o_i_d_c_provider.html#aa7e0f02f7454165b6538ea40f4de2ed4">RadosOIDCProvider::store_url</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <span class="keyword">const</span> std::string&amp; url, <span class="keywordtype">bool</span> exclusive, optional_yield y)</div>
<div class="line"><a id="l02865" name="l02865"></a><span class="lineno"> 2865</span>{</div>
<div class="line"><a id="l02866" name="l02866"></a><span class="lineno"> 2866</span>  <span class="keyword">auto</span> obj_ctx = <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_o_i_d_c_provider.html#a5eb9f9ee3f10a8f8c950b4771d0da129">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#abe4f0602b771d5549a02c0a326d6a832">svc</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_services.html#a742bbed66b1688310eeb8c0b692bf6b9">sysobj</a>-&gt;<a class="code hl_function" href="class_r_g_w_s_i___sys_obj.html#a42dbd3046b9d94873446090556f05e63">init_obj_ctx</a>();</div>
<div class="line"><a id="l02867" name="l02867"></a><span class="lineno"> 2867</span>  std::string oid = <a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_o_i_d_c_provider.html#a061ecdf8cb584c0953f18b511da956d5">tenant</a> + <a class="code hl_function" href="classrgw_1_1sal_1_1_r_g_w_o_i_d_c_provider.html#a8fc76c20f33da2b0c253932e3c2b7ab5">get_url_oid_prefix</a>() + url;</div>
<div class="line"><a id="l02868" name="l02868"></a><span class="lineno"> 2868</span> </div>
<div class="line"><a id="l02869" name="l02869"></a><span class="lineno"> 2869</span>  bufferlist bl;</div>
<div class="line"><a id="l02870" name="l02870"></a><span class="lineno"> 2870</span>  <span class="keyword">using </span>ceph::encode;</div>
<div class="line"><a id="l02871" name="l02871"></a><span class="lineno"> 2871</span>  <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_o_i_d_c_provider.html#ae4490d9e1bb29323d26c1d998674d275">encode</a>(*<span class="keyword">this</span>, bl);</div>
<div class="line"><a id="l02872" name="l02872"></a><span class="lineno"> 2872</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="rgw__tools_8cc.html#a5a37218cbf7acd34def1915314441451">rgw_put_system_obj</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, obj_ctx, <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_o_i_d_c_provider.html#a5eb9f9ee3f10a8f8c950b4771d0da129">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aaecd01256c4639f8b8c31231022baef0">get_zone</a>()-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_zone.html#aad5682df06309df9be7bc8fdab823b50">get_params</a>().<a class="code hl_variable" href="struct_r_g_w_zone_params.html#a8fdd09f89ee348eabcca31eb520024ee">oidc_pool</a>, oid, bl, exclusive, <span class="keyword">nullptr</span>, real_time(), y);</div>
<div class="line"><a id="l02873" name="l02873"></a><span class="lineno"> 2873</span>}</div>
</div>
<div class="line"><a id="l02874" name="l02874"></a><span class="lineno"> 2874</span> </div>
<div class="foldopen" id="foldopen02875" data-start="{" data-end="}">
<div class="line"><a id="l02875" name="l02875"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_o_i_d_c_provider.html#ad0dee566c284e50783335be58ef10f67"> 2875</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_o_i_d_c_provider.html#ad0dee566c284e50783335be58ef10f67">RadosOIDCProvider::read_url</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <span class="keyword">const</span> std::string&amp; url, <span class="keyword">const</span> std::string&amp; tenant)</div>
<div class="line"><a id="l02876" name="l02876"></a><span class="lineno"> 2876</span>{</div>
<div class="line"><a id="l02877" name="l02877"></a><span class="lineno"> 2877</span>  <span class="keyword">auto</span> obj_ctx = <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_o_i_d_c_provider.html#a5eb9f9ee3f10a8f8c950b4771d0da129">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#abe4f0602b771d5549a02c0a326d6a832">svc</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_services.html#a742bbed66b1688310eeb8c0b692bf6b9">sysobj</a>-&gt;<a class="code hl_function" href="class_r_g_w_s_i___sys_obj.html#a42dbd3046b9d94873446090556f05e63">init_obj_ctx</a>();</div>
<div class="line"><a id="l02878" name="l02878"></a><span class="lineno"> 2878</span>  <span class="keyword">auto</span>&amp; pool = <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_o_i_d_c_provider.html#a5eb9f9ee3f10a8f8c950b4771d0da129">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aaecd01256c4639f8b8c31231022baef0">get_zone</a>()-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_zone.html#aad5682df06309df9be7bc8fdab823b50">get_params</a>().<a class="code hl_variable" href="struct_r_g_w_zone_params.html#a8fdd09f89ee348eabcca31eb520024ee">oidc_pool</a>;</div>
<div class="line"><a id="l02879" name="l02879"></a><span class="lineno"> 2879</span>  std::string oid = <a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_o_i_d_c_provider.html#a061ecdf8cb584c0953f18b511da956d5">tenant</a> + <a class="code hl_function" href="classrgw_1_1sal_1_1_r_g_w_o_i_d_c_provider.html#a8fc76c20f33da2b0c253932e3c2b7ab5">get_url_oid_prefix</a>() + url;</div>
<div class="line"><a id="l02880" name="l02880"></a><span class="lineno"> 2880</span>  bufferlist bl;</div>
<div class="line"><a id="l02881" name="l02881"></a><span class="lineno"> 2881</span> </div>
<div class="line"><a id="l02882" name="l02882"></a><span class="lineno"> 2882</span>  <span class="keywordtype">int</span> ret = <a class="code hl_function" href="rgw__tools_8cc.html#a3e647ae97c113ee3ad07bad363e640b6">rgw_get_system_obj</a>(obj_ctx, pool, oid, bl, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, null_yield, <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>);</div>
<div class="line"><a id="l02883" name="l02883"></a><span class="lineno"> 2883</span>  <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line"><a id="l02884" name="l02884"></a><span class="lineno"> 2884</span>    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l02885" name="l02885"></a><span class="lineno"> 2885</span>  }</div>
<div class="line"><a id="l02886" name="l02886"></a><span class="lineno"> 2886</span> </div>
<div class="line"><a id="l02887" name="l02887"></a><span class="lineno"> 2887</span>  <span class="keywordflow">try</span> {</div>
<div class="line"><a id="l02888" name="l02888"></a><span class="lineno"> 2888</span>    <span class="keyword">using </span>ceph::decode;</div>
<div class="line"><a id="l02889" name="l02889"></a><span class="lineno"> 2889</span>    <span class="keyword">auto</span> iter = bl.cbegin();</div>
<div class="line"><a id="l02890" name="l02890"></a><span class="lineno"> 2890</span>    <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_o_i_d_c_provider.html#ae4c2c0b2ce2b40601e18a00526b4a540">decode</a>(*<span class="keyword">this</span>, iter);</div>
<div class="line"><a id="l02891" name="l02891"></a><span class="lineno"> 2891</span>  } <span class="keywordflow">catch</span> (buffer::error&amp; err) {</div>
<div class="line"><a id="l02892" name="l02892"></a><span class="lineno"> 2892</span>    ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 0) &lt;&lt; <span class="stringliteral">&quot;ERROR: failed to decode oidc provider info from pool: &quot;</span> &lt;&lt; pool.name &lt;&lt;</div>
<div class="line"><a id="l02893" name="l02893"></a><span class="lineno"> 2893</span>                  <span class="stringliteral">&quot;: &quot;</span> &lt;&lt; url &lt;&lt; dendl;</div>
<div class="line"><a id="l02894" name="l02894"></a><span class="lineno"> 2894</span>    <span class="keywordflow">return</span> -EIO;</div>
<div class="line"><a id="l02895" name="l02895"></a><span class="lineno"> 2895</span>  }</div>
<div class="line"><a id="l02896" name="l02896"></a><span class="lineno"> 2896</span> </div>
<div class="line"><a id="l02897" name="l02897"></a><span class="lineno"> 2897</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l02898" name="l02898"></a><span class="lineno"> 2898</span>}</div>
</div>
<div class="line"><a id="l02899" name="l02899"></a><span class="lineno"> 2899</span> </div>
<div class="foldopen" id="foldopen02900" data-start="{" data-end="}">
<div class="line"><a id="l02900" name="l02900"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_o_i_d_c_provider.html#ae0c967a260153a65a58d91853cfe3a30"> 2900</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_o_i_d_c_provider.html#ae0c967a260153a65a58d91853cfe3a30">RadosOIDCProvider::delete_obj</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, optional_yield y)</div>
<div class="line"><a id="l02901" name="l02901"></a><span class="lineno"> 2901</span>{</div>
<div class="line"><a id="l02902" name="l02902"></a><span class="lineno"> 2902</span>  <span class="keyword">auto</span>&amp; pool = <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_o_i_d_c_provider.html#a5eb9f9ee3f10a8f8c950b4771d0da129">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aaecd01256c4639f8b8c31231022baef0">get_zone</a>()-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_zone.html#aad5682df06309df9be7bc8fdab823b50">get_params</a>().<a class="code hl_variable" href="struct_r_g_w_zone_params.html#a8fdd09f89ee348eabcca31eb520024ee">oidc_pool</a>;</div>
<div class="line"><a id="l02903" name="l02903"></a><span class="lineno"> 2903</span> </div>
<div class="line"><a id="l02904" name="l02904"></a><span class="lineno"> 2904</span>  std::string url, <a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_o_i_d_c_provider.html#a061ecdf8cb584c0953f18b511da956d5">tenant</a>;</div>
<div class="line"><a id="l02905" name="l02905"></a><span class="lineno"> 2905</span>  <span class="keyword">auto</span> ret = <a class="code hl_function" href="classrgw_1_1sal_1_1_r_g_w_o_i_d_c_provider.html#ae4fa828b9c8725a811a649fee8c0f6e1">get_tenant_url_from_arn</a>(<a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_o_i_d_c_provider.html#a061ecdf8cb584c0953f18b511da956d5">tenant</a>, url);</div>
<div class="line"><a id="l02906" name="l02906"></a><span class="lineno"> 2906</span>  <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line"><a id="l02907" name="l02907"></a><span class="lineno"> 2907</span>    ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 0) &lt;&lt; <span class="stringliteral">&quot;ERROR: failed to parse arn&quot;</span> &lt;&lt; dendl;</div>
<div class="line"><a id="l02908" name="l02908"></a><span class="lineno"> 2908</span>    <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><a id="l02909" name="l02909"></a><span class="lineno"> 2909</span>  }</div>
<div class="line"><a id="l02910" name="l02910"></a><span class="lineno"> 2910</span> </div>
<div class="line"><a id="l02911" name="l02911"></a><span class="lineno"> 2911</span>  <span class="keywordflow">if</span> (this-&gt;tenant != <a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_o_i_d_c_provider.html#a061ecdf8cb584c0953f18b511da956d5">tenant</a>) {</div>
<div class="line"><a id="l02912" name="l02912"></a><span class="lineno"> 2912</span>    ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 0) &lt;&lt; <span class="stringliteral">&quot;ERROR: tenant in arn doesn&#39;t match that of user &quot;</span> &lt;&lt; this-&gt;tenant &lt;&lt; <span class="stringliteral">&quot;, &quot;</span></div>
<div class="line"><a id="l02913" name="l02913"></a><span class="lineno"> 2913</span>                  &lt;&lt; <a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_o_i_d_c_provider.html#a061ecdf8cb584c0953f18b511da956d5">tenant</a> &lt;&lt; <span class="stringliteral">&quot;: &quot;</span> &lt;&lt; dendl;</div>
<div class="line"><a id="l02914" name="l02914"></a><span class="lineno"> 2914</span>    <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><a id="l02915" name="l02915"></a><span class="lineno"> 2915</span>  }</div>
<div class="line"><a id="l02916" name="l02916"></a><span class="lineno"> 2916</span> </div>
<div class="line"><a id="l02917" name="l02917"></a><span class="lineno"> 2917</span>  <span class="comment">// Delete url</span></div>
<div class="line"><a id="l02918" name="l02918"></a><span class="lineno"> 2918</span>  std::string oid = <a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_o_i_d_c_provider.html#a061ecdf8cb584c0953f18b511da956d5">tenant</a> + <a class="code hl_function" href="classrgw_1_1sal_1_1_r_g_w_o_i_d_c_provider.html#a8fc76c20f33da2b0c253932e3c2b7ab5">get_url_oid_prefix</a>() + url;</div>
<div class="line"><a id="l02919" name="l02919"></a><span class="lineno"> 2919</span>  ret = <a class="code hl_function" href="rgw__tools_8cc.html#a046ce687b6bb951e6c13fcb3b373bbe5">rgw_delete_system_obj</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_o_i_d_c_provider.html#a5eb9f9ee3f10a8f8c950b4771d0da129">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#abe4f0602b771d5549a02c0a326d6a832">svc</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_services.html#a742bbed66b1688310eeb8c0b692bf6b9">sysobj</a>, pool, oid, <span class="keyword">nullptr</span>, y);</div>
<div class="line"><a id="l02920" name="l02920"></a><span class="lineno"> 2920</span>  <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line"><a id="l02921" name="l02921"></a><span class="lineno"> 2921</span>    ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 0) &lt;&lt; <span class="stringliteral">&quot;ERROR: deleting oidc url from pool: &quot;</span> &lt;&lt; pool.name &lt;&lt; <span class="stringliteral">&quot;: &quot;</span></div>
<div class="line"><a id="l02922" name="l02922"></a><span class="lineno"> 2922</span>                  &lt;&lt; <a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_o_i_d_c_provider.html#a2dd1d59efdb9c2bb769cbc63646a3f1c">provider_url</a> &lt;&lt; <span class="stringliteral">&quot;: &quot;</span> &lt;&lt; cpp_strerror(-ret) &lt;&lt; dendl;</div>
<div class="line"><a id="l02923" name="l02923"></a><span class="lineno"> 2923</span>  }</div>
<div class="line"><a id="l02924" name="l02924"></a><span class="lineno"> 2924</span> </div>
<div class="line"><a id="l02925" name="l02925"></a><span class="lineno"> 2925</span>  <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l02926" name="l02926"></a><span class="lineno"> 2926</span>}</div>
</div>
<div class="line"><a id="l02927" name="l02927"></a><span class="lineno"> 2927</span> </div>
<div class="foldopen" id="foldopen02928" data-start="{" data-end="}">
<div class="line"><a id="l02928" name="l02928"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_role.html#a0513045765632d6db2607f1e799e0af2"> 2928</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_role.html#a0513045765632d6db2607f1e799e0af2">RadosRole::store_info</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <span class="keywordtype">bool</span> exclusive, optional_yield y)</div>
<div class="line"><a id="l02929" name="l02929"></a><span class="lineno"> 2929</span>{</div>
<div class="line"><a id="l02930" name="l02930"></a><span class="lineno"> 2930</span>  <span class="keyword">using </span>ceph::encode;</div>
<div class="line"><a id="l02931" name="l02931"></a><span class="lineno"> 2931</span>  std::string oid;</div>
<div class="line"><a id="l02932" name="l02932"></a><span class="lineno"> 2932</span> </div>
<div class="line"><a id="l02933" name="l02933"></a><span class="lineno"> 2933</span>  oid = <a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_role.html#ae06bf4224a6960abf89895324194a1c9">info</a>.<a class="code hl_variable" href="structrgw_1_1sal_1_1_r_g_w_role_info.html#ad8282aca283d5fa8b28744948dac32bf">id</a>;</div>
<div class="line"><a id="l02934" name="l02934"></a><span class="lineno"> 2934</span> </div>
<div class="line"><a id="l02935" name="l02935"></a><span class="lineno"> 2935</span>  bufferlist bl;</div>
<div class="line"><a id="l02936" name="l02936"></a><span class="lineno"> 2936</span>  <a class="code hl_function" href="namespacergw.html#a34a5757756e9618325f611b073ccd448">encode</a>(this-&gt;info, bl);</div>
<div class="line"><a id="l02937" name="l02937"></a><span class="lineno"> 2937</span> </div>
<div class="line"><a id="l02938" name="l02938"></a><span class="lineno"> 2938</span>  <span class="keywordflow">if</span> (!this-&gt;info.tags.empty()) {</div>
<div class="line"><a id="l02939" name="l02939"></a><span class="lineno"> 2939</span>    bufferlist bl_tags;</div>
<div class="line"><a id="l02940" name="l02940"></a><span class="lineno"> 2940</span>    <a class="code hl_function" href="namespacergw.html#a34a5757756e9618325f611b073ccd448">encode</a>(this-&gt;info.tags, bl_tags);</div>
<div class="line"><a id="l02941" name="l02941"></a><span class="lineno"> 2941</span>    map&lt;string, bufferlist&gt; attrs;</div>
<div class="line"><a id="l02942" name="l02942"></a><span class="lineno"> 2942</span>    attrs.emplace(<span class="stringliteral">&quot;tagging&quot;</span>, bl_tags);</div>
<div class="line"><a id="l02943" name="l02943"></a><span class="lineno"> 2943</span> </div>
<div class="line"><a id="l02944" name="l02944"></a><span class="lineno"> 2944</span>    <a class="code hl_struct" href="struct_r_g_w_s_i___m_b_s_obj___put_params.html">RGWSI_MBSObj_PutParams</a> params(bl, &amp;attrs, <a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_role.html#ae06bf4224a6960abf89895324194a1c9">info</a>.<a class="code hl_variable" href="structrgw_1_1sal_1_1_r_g_w_role_info.html#aca22a6cf458ec11543a7695d64ed36e5">mtime</a>, exclusive);</div>
<div class="line"><a id="l02945" name="l02945"></a><span class="lineno"> 2945</span>    std::unique_ptr&lt;RGWSI_MetaBackend::Context&gt; ctx(<a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_role.html#a66d792ed1b40134f0387f55650a03036">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#abe4f0602b771d5549a02c0a326d6a832">svc</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_services.html#a5dd49b8bdc5fc53908eebbb1f39561fe">role</a>-&gt;<a class="code hl_variable" href="class_r_g_w_s_i___role___r_a_d_o_s.html#a99769c826558561f454a3642ffc47a89">svc</a>.<a class="code hl_variable" href="struct_r_g_w_s_i___role___r_a_d_o_s_1_1_svc.html#af6e0d8c6b7224668059f211104464620">meta_be</a>-&gt;<a class="code hl_function" href="class_r_g_w_s_i___meta_backend.html#a4698ced0182afcc56eeedd5522109e34">alloc_ctx</a>());</div>
<div class="line"><a id="l02946" name="l02946"></a><span class="lineno"> 2946</span>    ctx-&gt;init(<a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_role.html#a66d792ed1b40134f0387f55650a03036">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#abe4f0602b771d5549a02c0a326d6a832">svc</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_services.html#a5dd49b8bdc5fc53908eebbb1f39561fe">role</a>-&gt;<a class="code hl_function" href="class_r_g_w_s_i___role___r_a_d_o_s.html#a7765bd8d76c87e607559ed3259b17f90">get_be_handler</a>());</div>
<div class="line"><a id="l02947" name="l02947"></a><span class="lineno"> 2947</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_role.html#a66d792ed1b40134f0387f55650a03036">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#abe4f0602b771d5549a02c0a326d6a832">svc</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_services.html#a5dd49b8bdc5fc53908eebbb1f39561fe">role</a>-&gt;<a class="code hl_variable" href="class_r_g_w_s_i___role___r_a_d_o_s.html#a99769c826558561f454a3642ffc47a89">svc</a>.<a class="code hl_variable" href="struct_r_g_w_s_i___role___r_a_d_o_s_1_1_svc.html#af6e0d8c6b7224668059f211104464620">meta_be</a>-&gt;<a class="code hl_function" href="class_r_g_w_s_i___meta_backend.html#ade8817c5693cdd8b60e22754405e6943">put</a>(ctx.get(), oid, params, &amp;<a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_role.html#ae06bf4224a6960abf89895324194a1c9">info</a>.<a class="code hl_variable" href="structrgw_1_1sal_1_1_r_g_w_role_info.html#a888c30d3016a0f9186d85e37e12f9c0b">objv_tracker</a>, y, <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>);</div>
<div class="line"><a id="l02948" name="l02948"></a><span class="lineno"> 2948</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02949" name="l02949"></a><span class="lineno"> 2949</span>    <a class="code hl_struct" href="struct_r_g_w_s_i___m_b_s_obj___put_params.html">RGWSI_MBSObj_PutParams</a> params(bl, <span class="keyword">nullptr</span>, <a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_role.html#ae06bf4224a6960abf89895324194a1c9">info</a>.<a class="code hl_variable" href="structrgw_1_1sal_1_1_r_g_w_role_info.html#aca22a6cf458ec11543a7695d64ed36e5">mtime</a>, exclusive);</div>
<div class="line"><a id="l02950" name="l02950"></a><span class="lineno"> 2950</span>    std::unique_ptr&lt;RGWSI_MetaBackend::Context&gt; ctx(<a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_role.html#a66d792ed1b40134f0387f55650a03036">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#abe4f0602b771d5549a02c0a326d6a832">svc</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_services.html#a5dd49b8bdc5fc53908eebbb1f39561fe">role</a>-&gt;<a class="code hl_variable" href="class_r_g_w_s_i___role___r_a_d_o_s.html#a99769c826558561f454a3642ffc47a89">svc</a>.<a class="code hl_variable" href="struct_r_g_w_s_i___role___r_a_d_o_s_1_1_svc.html#af6e0d8c6b7224668059f211104464620">meta_be</a>-&gt;<a class="code hl_function" href="class_r_g_w_s_i___meta_backend.html#a4698ced0182afcc56eeedd5522109e34">alloc_ctx</a>());</div>
<div class="line"><a id="l02951" name="l02951"></a><span class="lineno"> 2951</span>    ctx-&gt;init(<a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_role.html#a66d792ed1b40134f0387f55650a03036">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#abe4f0602b771d5549a02c0a326d6a832">svc</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_services.html#a5dd49b8bdc5fc53908eebbb1f39561fe">role</a>-&gt;<a class="code hl_function" href="class_r_g_w_s_i___role___r_a_d_o_s.html#a7765bd8d76c87e607559ed3259b17f90">get_be_handler</a>());</div>
<div class="line"><a id="l02952" name="l02952"></a><span class="lineno"> 2952</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_role.html#a66d792ed1b40134f0387f55650a03036">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#abe4f0602b771d5549a02c0a326d6a832">svc</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_services.html#a5dd49b8bdc5fc53908eebbb1f39561fe">role</a>-&gt;<a class="code hl_variable" href="class_r_g_w_s_i___role___r_a_d_o_s.html#a99769c826558561f454a3642ffc47a89">svc</a>.<a class="code hl_variable" href="struct_r_g_w_s_i___role___r_a_d_o_s_1_1_svc.html#af6e0d8c6b7224668059f211104464620">meta_be</a>-&gt;<a class="code hl_function" href="class_r_g_w_s_i___meta_backend.html#ade8817c5693cdd8b60e22754405e6943">put</a>(ctx.get(), oid, params, &amp;<a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_role.html#ae06bf4224a6960abf89895324194a1c9">info</a>.<a class="code hl_variable" href="structrgw_1_1sal_1_1_r_g_w_role_info.html#a888c30d3016a0f9186d85e37e12f9c0b">objv_tracker</a>, y, <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>);</div>
<div class="line"><a id="l02953" name="l02953"></a><span class="lineno"> 2953</span>  }</div>
<div class="line"><a id="l02954" name="l02954"></a><span class="lineno"> 2954</span>}</div>
</div>
<div class="line"><a id="l02955" name="l02955"></a><span class="lineno"> 2955</span> </div>
<div class="foldopen" id="foldopen02956" data-start="{" data-end="}">
<div class="line"><a id="l02956" name="l02956"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_role.html#ab87f1ca4f4a934dd13609ab2be4acae7"> 2956</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_role.html#ab87f1ca4f4a934dd13609ab2be4acae7">RadosRole::store_name</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <span class="keywordtype">bool</span> exclusive, optional_yield y)</div>
<div class="line"><a id="l02957" name="l02957"></a><span class="lineno"> 2957</span>{</div>
<div class="line"><a id="l02958" name="l02958"></a><span class="lineno"> 2958</span>  <span class="keyword">auto</span> obj_ctx = <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_role.html#a66d792ed1b40134f0387f55650a03036">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#abe4f0602b771d5549a02c0a326d6a832">svc</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_services.html#a742bbed66b1688310eeb8c0b692bf6b9">sysobj</a>-&gt;<a class="code hl_function" href="class_r_g_w_s_i___sys_obj.html#a42dbd3046b9d94873446090556f05e63">init_obj_ctx</a>();</div>
<div class="line"><a id="l02959" name="l02959"></a><span class="lineno"> 2959</span>  <a class="code hl_struct" href="struct_r_g_w_name_to_id.html">RGWNameToId</a> nameToId;</div>
<div class="line"><a id="l02960" name="l02960"></a><span class="lineno"> 2960</span>  nameToId.<a class="code hl_variable" href="struct_r_g_w_name_to_id.html#afbc0ce975217212c48d3fda8043f55da">obj_id</a> = <a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_role.html#ae06bf4224a6960abf89895324194a1c9">info</a>.<a class="code hl_variable" href="structrgw_1_1sal_1_1_r_g_w_role_info.html#ad8282aca283d5fa8b28744948dac32bf">id</a>;</div>
<div class="line"><a id="l02961" name="l02961"></a><span class="lineno"> 2961</span> </div>
<div class="line"><a id="l02962" name="l02962"></a><span class="lineno"> 2962</span>  std::string oid = <a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_role.html#ae06bf4224a6960abf89895324194a1c9">info</a>.<a class="code hl_variable" href="structrgw_1_1sal_1_1_r_g_w_role_info.html#a85618d6552f7c1ed9bddd6105c10e0f3">tenant</a> + <a class="code hl_function" href="classrgw_1_1sal_1_1_r_g_w_role.html#a422bc7253257f4dce12a7d800e2d3982">get_names_oid_prefix</a>() + <a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_role.html#ae06bf4224a6960abf89895324194a1c9">info</a>.<a class="code hl_variable" href="structrgw_1_1sal_1_1_r_g_w_role_info.html#a599dc24a677d2d9d254e57b29fb397b2">name</a>;</div>
<div class="line"><a id="l02963" name="l02963"></a><span class="lineno"> 2963</span> </div>
<div class="line"><a id="l02964" name="l02964"></a><span class="lineno"> 2964</span>  bufferlist bl;</div>
<div class="line"><a id="l02965" name="l02965"></a><span class="lineno"> 2965</span>  <span class="keyword">using </span>ceph::encode;</div>
<div class="line"><a id="l02966" name="l02966"></a><span class="lineno"> 2966</span>  <a class="code hl_function" href="namespacergw.html#a34a5757756e9618325f611b073ccd448">encode</a>(nameToId, bl);</div>
<div class="line"><a id="l02967" name="l02967"></a><span class="lineno"> 2967</span> </div>
<div class="line"><a id="l02968" name="l02968"></a><span class="lineno"> 2968</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="rgw__tools_8cc.html#a5a37218cbf7acd34def1915314441451">rgw_put_system_obj</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, obj_ctx, <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_role.html#a66d792ed1b40134f0387f55650a03036">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aaecd01256c4639f8b8c31231022baef0">get_zone</a>()-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_zone.html#aad5682df06309df9be7bc8fdab823b50">get_params</a>().<a class="code hl_variable" href="struct_r_g_w_zone_params.html#af144c01afe26899f178544900b1835be">roles_pool</a>, oid, bl, exclusive, &amp;<a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_role.html#ae06bf4224a6960abf89895324194a1c9">info</a>.<a class="code hl_variable" href="structrgw_1_1sal_1_1_r_g_w_role_info.html#a888c30d3016a0f9186d85e37e12f9c0b">objv_tracker</a>, real_time(), y);</div>
<div class="line"><a id="l02969" name="l02969"></a><span class="lineno"> 2969</span>}</div>
</div>
<div class="line"><a id="l02970" name="l02970"></a><span class="lineno"> 2970</span> </div>
<div class="foldopen" id="foldopen02971" data-start="{" data-end="}">
<div class="line"><a id="l02971" name="l02971"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_role.html#ac5c2f9db1c77fa378c3762f23e6469bc"> 2971</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_role.html#ac5c2f9db1c77fa378c3762f23e6469bc">RadosRole::store_path</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <span class="keywordtype">bool</span> exclusive, optional_yield y)</div>
<div class="line"><a id="l02972" name="l02972"></a><span class="lineno"> 2972</span>{</div>
<div class="line"><a id="l02973" name="l02973"></a><span class="lineno"> 2973</span>  <span class="keyword">auto</span> obj_ctx = <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_role.html#a66d792ed1b40134f0387f55650a03036">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#abe4f0602b771d5549a02c0a326d6a832">svc</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_services.html#a742bbed66b1688310eeb8c0b692bf6b9">sysobj</a>-&gt;<a class="code hl_function" href="class_r_g_w_s_i___sys_obj.html#a42dbd3046b9d94873446090556f05e63">init_obj_ctx</a>();</div>
<div class="line"><a id="l02974" name="l02974"></a><span class="lineno"> 2974</span>  std::string oid = <a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_role.html#ae06bf4224a6960abf89895324194a1c9">info</a>.<a class="code hl_variable" href="structrgw_1_1sal_1_1_r_g_w_role_info.html#a85618d6552f7c1ed9bddd6105c10e0f3">tenant</a> + <a class="code hl_function" href="classrgw_1_1sal_1_1_r_g_w_role.html#a438e1fc1f395668638868d4e63af6ea4">get_path_oid_prefix</a>() + <a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_role.html#ae06bf4224a6960abf89895324194a1c9">info</a>.<a class="code hl_variable" href="structrgw_1_1sal_1_1_r_g_w_role_info.html#ab164a36c4bb8d26f3110d43b8db6bdc5">path</a> + <a class="code hl_function" href="classrgw_1_1sal_1_1_r_g_w_role.html#aaaf69956c06e4c0556febabce5c9bd8d">get_info_oid_prefix</a>() + <a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_role.html#ae06bf4224a6960abf89895324194a1c9">info</a>.<a class="code hl_variable" href="structrgw_1_1sal_1_1_r_g_w_role_info.html#ad8282aca283d5fa8b28744948dac32bf">id</a>;</div>
<div class="line"><a id="l02975" name="l02975"></a><span class="lineno"> 2975</span> </div>
<div class="line"><a id="l02976" name="l02976"></a><span class="lineno"> 2976</span>  bufferlist bl;</div>
<div class="line"><a id="l02977" name="l02977"></a><span class="lineno"> 2977</span> </div>
<div class="line"><a id="l02978" name="l02978"></a><span class="lineno"> 2978</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="rgw__tools_8cc.html#a5a37218cbf7acd34def1915314441451">rgw_put_system_obj</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, obj_ctx, <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_role.html#a66d792ed1b40134f0387f55650a03036">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aaecd01256c4639f8b8c31231022baef0">get_zone</a>()-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_zone.html#aad5682df06309df9be7bc8fdab823b50">get_params</a>().<a class="code hl_variable" href="struct_r_g_w_zone_params.html#af144c01afe26899f178544900b1835be">roles_pool</a>, oid, bl, exclusive, &amp;<a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_role.html#ae06bf4224a6960abf89895324194a1c9">info</a>.<a class="code hl_variable" href="structrgw_1_1sal_1_1_r_g_w_role_info.html#a888c30d3016a0f9186d85e37e12f9c0b">objv_tracker</a>, real_time(), y);</div>
<div class="line"><a id="l02979" name="l02979"></a><span class="lineno"> 2979</span>}</div>
</div>
<div class="line"><a id="l02980" name="l02980"></a><span class="lineno"> 2980</span> </div>
<div class="foldopen" id="foldopen02981" data-start="{" data-end="}">
<div class="line"><a id="l02981" name="l02981"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_role.html#a9e564bf54ab7a0fb284a519a2bb230f9"> 2981</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_role.html#a9e564bf54ab7a0fb284a519a2bb230f9">RadosRole::read_id</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <span class="keyword">const</span> std::string&amp; role_name, <span class="keyword">const</span> std::string&amp; tenant, std::string&amp; role_id, optional_yield y)</div>
<div class="line"><a id="l02982" name="l02982"></a><span class="lineno"> 2982</span>{</div>
<div class="line"><a id="l02983" name="l02983"></a><span class="lineno"> 2983</span>  <span class="keyword">auto</span> obj_ctx = <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_role.html#a66d792ed1b40134f0387f55650a03036">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#abe4f0602b771d5549a02c0a326d6a832">svc</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_services.html#a742bbed66b1688310eeb8c0b692bf6b9">sysobj</a>-&gt;<a class="code hl_function" href="class_r_g_w_s_i___sys_obj.html#a42dbd3046b9d94873446090556f05e63">init_obj_ctx</a>();</div>
<div class="line"><a id="l02984" name="l02984"></a><span class="lineno"> 2984</span>  std::string oid = <a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_role.html#ae06bf4224a6960abf89895324194a1c9">info</a>.<a class="code hl_variable" href="structrgw_1_1sal_1_1_r_g_w_role_info.html#a85618d6552f7c1ed9bddd6105c10e0f3">tenant</a> + <a class="code hl_function" href="classrgw_1_1sal_1_1_r_g_w_role.html#a422bc7253257f4dce12a7d800e2d3982">get_names_oid_prefix</a>() + role_name;</div>
<div class="line"><a id="l02985" name="l02985"></a><span class="lineno"> 2985</span>  bufferlist bl;</div>
<div class="line"><a id="l02986" name="l02986"></a><span class="lineno"> 2986</span> </div>
<div class="line"><a id="l02987" name="l02987"></a><span class="lineno"> 2987</span>  <span class="keywordtype">int</span> ret = <a class="code hl_function" href="rgw__tools_8cc.html#a3e647ae97c113ee3ad07bad363e640b6">rgw_get_system_obj</a>(obj_ctx, <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_role.html#a66d792ed1b40134f0387f55650a03036">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aaecd01256c4639f8b8c31231022baef0">get_zone</a>()-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_zone.html#aad5682df06309df9be7bc8fdab823b50">get_params</a>().<a class="code hl_variable" href="struct_r_g_w_zone_params.html#af144c01afe26899f178544900b1835be">roles_pool</a>, oid, bl, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, null_yield, <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>);</div>
<div class="line"><a id="l02988" name="l02988"></a><span class="lineno"> 2988</span>  <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line"><a id="l02989" name="l02989"></a><span class="lineno"> 2989</span>    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l02990" name="l02990"></a><span class="lineno"> 2990</span>  }</div>
<div class="line"><a id="l02991" name="l02991"></a><span class="lineno"> 2991</span> </div>
<div class="line"><a id="l02992" name="l02992"></a><span class="lineno"> 2992</span>  <a class="code hl_struct" href="struct_r_g_w_name_to_id.html">RGWNameToId</a> nameToId;</div>
<div class="line"><a id="l02993" name="l02993"></a><span class="lineno"> 2993</span>  <span class="keywordflow">try</span> {</div>
<div class="line"><a id="l02994" name="l02994"></a><span class="lineno"> 2994</span>    <span class="keyword">auto</span> iter = bl.cbegin();</div>
<div class="line"><a id="l02995" name="l02995"></a><span class="lineno"> 2995</span>    <span class="keyword">using </span>ceph::decode;</div>
<div class="line"><a id="l02996" name="l02996"></a><span class="lineno"> 2996</span>    <a class="code hl_function" href="namespacergw.html#a49e77e75ed539fdbde0dcc092bb76467">decode</a>(nameToId, iter);</div>
<div class="line"><a id="l02997" name="l02997"></a><span class="lineno"> 2997</span>  } <span class="keywordflow">catch</span> (buffer::error&amp; err) {</div>
<div class="line"><a id="l02998" name="l02998"></a><span class="lineno"> 2998</span>    ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 0) &lt;&lt; <span class="stringliteral">&quot;ERROR: failed to decode role from Role pool: &quot;</span> &lt;&lt; role_name &lt;&lt; dendl;</div>
<div class="line"><a id="l02999" name="l02999"></a><span class="lineno"> 2999</span>    <span class="keywordflow">return</span> -EIO;</div>
<div class="line"><a id="l03000" name="l03000"></a><span class="lineno"> 3000</span>  }</div>
<div class="line"><a id="l03001" name="l03001"></a><span class="lineno"> 3001</span>  role_id = nameToId.<a class="code hl_variable" href="struct_r_g_w_name_to_id.html#afbc0ce975217212c48d3fda8043f55da">obj_id</a>;</div>
<div class="line"><a id="l03002" name="l03002"></a><span class="lineno"> 3002</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l03003" name="l03003"></a><span class="lineno"> 3003</span>}</div>
</div>
<div class="line"><a id="l03004" name="l03004"></a><span class="lineno"> 3004</span> </div>
<div class="foldopen" id="foldopen03005" data-start="{" data-end="}">
<div class="line"><a id="l03005" name="l03005"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_role.html#ae3812cec35ad2a02abb85b2b9403a02c"> 3005</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_role.html#ae3812cec35ad2a02abb85b2b9403a02c">RadosRole::read_name</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, optional_yield y)</div>
<div class="line"><a id="l03006" name="l03006"></a><span class="lineno"> 3006</span>{</div>
<div class="line"><a id="l03007" name="l03007"></a><span class="lineno"> 3007</span>  <span class="keyword">auto</span> obj_ctx = <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_role.html#a66d792ed1b40134f0387f55650a03036">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#abe4f0602b771d5549a02c0a326d6a832">svc</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_services.html#a742bbed66b1688310eeb8c0b692bf6b9">sysobj</a>-&gt;<a class="code hl_function" href="class_r_g_w_s_i___sys_obj.html#a42dbd3046b9d94873446090556f05e63">init_obj_ctx</a>();</div>
<div class="line"><a id="l03008" name="l03008"></a><span class="lineno"> 3008</span>  std::string oid = <a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_role.html#ae06bf4224a6960abf89895324194a1c9">info</a>.<a class="code hl_variable" href="structrgw_1_1sal_1_1_r_g_w_role_info.html#a85618d6552f7c1ed9bddd6105c10e0f3">tenant</a> + <a class="code hl_function" href="classrgw_1_1sal_1_1_r_g_w_role.html#a422bc7253257f4dce12a7d800e2d3982">get_names_oid_prefix</a>() + <a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_role.html#ae06bf4224a6960abf89895324194a1c9">info</a>.<a class="code hl_variable" href="structrgw_1_1sal_1_1_r_g_w_role_info.html#a599dc24a677d2d9d254e57b29fb397b2">name</a>;</div>
<div class="line"><a id="l03009" name="l03009"></a><span class="lineno"> 3009</span>  bufferlist bl;</div>
<div class="line"><a id="l03010" name="l03010"></a><span class="lineno"> 3010</span> </div>
<div class="line"><a id="l03011" name="l03011"></a><span class="lineno"> 3011</span>  <span class="keywordtype">int</span> ret = <a class="code hl_function" href="rgw__tools_8cc.html#a3e647ae97c113ee3ad07bad363e640b6">rgw_get_system_obj</a>(obj_ctx, <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_role.html#a66d792ed1b40134f0387f55650a03036">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aaecd01256c4639f8b8c31231022baef0">get_zone</a>()-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_zone.html#aad5682df06309df9be7bc8fdab823b50">get_params</a>().<a class="code hl_variable" href="struct_r_g_w_zone_params.html#af144c01afe26899f178544900b1835be">roles_pool</a>, oid, bl, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, null_yield, <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>);</div>
<div class="line"><a id="l03012" name="l03012"></a><span class="lineno"> 3012</span>  <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line"><a id="l03013" name="l03013"></a><span class="lineno"> 3013</span>    ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 0) &lt;&lt; <span class="stringliteral">&quot;ERROR: failed reading role name from Role pool: &quot;</span> &lt;&lt; <a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_role.html#ae06bf4224a6960abf89895324194a1c9">info</a>.<a class="code hl_variable" href="structrgw_1_1sal_1_1_r_g_w_role_info.html#a599dc24a677d2d9d254e57b29fb397b2">name</a> &lt;&lt;</div>
<div class="line"><a id="l03014" name="l03014"></a><span class="lineno"> 3014</span>      <span class="stringliteral">&quot;: &quot;</span> &lt;&lt; cpp_strerror(-ret) &lt;&lt; dendl;</div>
<div class="line"><a id="l03015" name="l03015"></a><span class="lineno"> 3015</span>    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l03016" name="l03016"></a><span class="lineno"> 3016</span>  }</div>
<div class="line"><a id="l03017" name="l03017"></a><span class="lineno"> 3017</span> </div>
<div class="line"><a id="l03018" name="l03018"></a><span class="lineno"> 3018</span>  <a class="code hl_struct" href="struct_r_g_w_name_to_id.html">RGWNameToId</a> nameToId;</div>
<div class="line"><a id="l03019" name="l03019"></a><span class="lineno"> 3019</span>  <span class="keywordflow">try</span> {</div>
<div class="line"><a id="l03020" name="l03020"></a><span class="lineno"> 3020</span>    <span class="keyword">using </span>ceph::decode;</div>
<div class="line"><a id="l03021" name="l03021"></a><span class="lineno"> 3021</span>    <span class="keyword">auto</span> iter = bl.cbegin();</div>
<div class="line"><a id="l03022" name="l03022"></a><span class="lineno"> 3022</span>    <a class="code hl_function" href="namespacergw.html#a49e77e75ed539fdbde0dcc092bb76467">decode</a>(nameToId, iter);</div>
<div class="line"><a id="l03023" name="l03023"></a><span class="lineno"> 3023</span>  } <span class="keywordflow">catch</span> (buffer::error&amp; err) {</div>
<div class="line"><a id="l03024" name="l03024"></a><span class="lineno"> 3024</span>    ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 0) &lt;&lt; <span class="stringliteral">&quot;ERROR: failed to decode role name from Role pool: &quot;</span> &lt;&lt; <a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_role.html#ae06bf4224a6960abf89895324194a1c9">info</a>.<a class="code hl_variable" href="structrgw_1_1sal_1_1_r_g_w_role_info.html#a599dc24a677d2d9d254e57b29fb397b2">name</a> &lt;&lt; dendl;</div>
<div class="line"><a id="l03025" name="l03025"></a><span class="lineno"> 3025</span>    <span class="keywordflow">return</span> -EIO;</div>
<div class="line"><a id="l03026" name="l03026"></a><span class="lineno"> 3026</span>  }</div>
<div class="line"><a id="l03027" name="l03027"></a><span class="lineno"> 3027</span>  <a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_role.html#ae06bf4224a6960abf89895324194a1c9">info</a>.<a class="code hl_variable" href="structrgw_1_1sal_1_1_r_g_w_role_info.html#ad8282aca283d5fa8b28744948dac32bf">id</a> = nameToId.<a class="code hl_variable" href="struct_r_g_w_name_to_id.html#afbc0ce975217212c48d3fda8043f55da">obj_id</a>;</div>
<div class="line"><a id="l03028" name="l03028"></a><span class="lineno"> 3028</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l03029" name="l03029"></a><span class="lineno"> 3029</span>}</div>
</div>
<div class="line"><a id="l03030" name="l03030"></a><span class="lineno"> 3030</span> </div>
<div class="foldopen" id="foldopen03031" data-start="{" data-end="}">
<div class="line"><a id="l03031" name="l03031"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_role.html#a720efbc858424227cb3783852cae05a2"> 3031</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_role.html#a720efbc858424227cb3783852cae05a2">RadosRole::read_info</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, optional_yield y)</div>
<div class="line"><a id="l03032" name="l03032"></a><span class="lineno"> 3032</span>{</div>
<div class="line"><a id="l03033" name="l03033"></a><span class="lineno"> 3033</span>  <span class="keyword">auto</span> obj_ctx = <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_role.html#a66d792ed1b40134f0387f55650a03036">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#abe4f0602b771d5549a02c0a326d6a832">svc</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_services.html#a742bbed66b1688310eeb8c0b692bf6b9">sysobj</a>-&gt;<a class="code hl_function" href="class_r_g_w_s_i___sys_obj.html#a42dbd3046b9d94873446090556f05e63">init_obj_ctx</a>();</div>
<div class="line"><a id="l03034" name="l03034"></a><span class="lineno"> 3034</span>  std::string oid;</div>
<div class="line"><a id="l03035" name="l03035"></a><span class="lineno"> 3035</span> </div>
<div class="line"><a id="l03036" name="l03036"></a><span class="lineno"> 3036</span>  oid = <a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_role.html#ae06bf4224a6960abf89895324194a1c9">info</a>.<a class="code hl_variable" href="structrgw_1_1sal_1_1_r_g_w_role_info.html#ad8282aca283d5fa8b28744948dac32bf">id</a>;</div>
<div class="line"><a id="l03037" name="l03037"></a><span class="lineno"> 3037</span>  ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 20) &lt;&lt; <span class="stringliteral">&quot;INFO: oid in read_info is: &quot;</span> &lt;&lt; oid &lt;&lt; dendl;</div>
<div class="line"><a id="l03038" name="l03038"></a><span class="lineno"> 3038</span> </div>
<div class="line"><a id="l03039" name="l03039"></a><span class="lineno"> 3039</span>  bufferlist bl;</div>
<div class="line"><a id="l03040" name="l03040"></a><span class="lineno"> 3040</span> </div>
<div class="line"><a id="l03041" name="l03041"></a><span class="lineno"> 3041</span>  <a class="code hl_struct" href="struct_r_g_w_s_i___m_b_s_obj___get_params.html">RGWSI_MBSObj_GetParams</a> params(&amp;bl, &amp;<a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_role.html#ae06bf4224a6960abf89895324194a1c9">info</a>.<a class="code hl_variable" href="structrgw_1_1sal_1_1_r_g_w_role_info.html#a7dce766079795c8ef5fcbc8f259b8233">attrs</a>, &amp;<a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_role.html#ae06bf4224a6960abf89895324194a1c9">info</a>.<a class="code hl_variable" href="structrgw_1_1sal_1_1_r_g_w_role_info.html#aca22a6cf458ec11543a7695d64ed36e5">mtime</a>);</div>
<div class="line"><a id="l03042" name="l03042"></a><span class="lineno"> 3042</span>  std::unique_ptr&lt;RGWSI_MetaBackend::Context&gt; ctx(<a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_role.html#a66d792ed1b40134f0387f55650a03036">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#abe4f0602b771d5549a02c0a326d6a832">svc</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_services.html#a5dd49b8bdc5fc53908eebbb1f39561fe">role</a>-&gt;<a class="code hl_variable" href="class_r_g_w_s_i___role___r_a_d_o_s.html#a99769c826558561f454a3642ffc47a89">svc</a>.<a class="code hl_variable" href="struct_r_g_w_s_i___role___r_a_d_o_s_1_1_svc.html#af6e0d8c6b7224668059f211104464620">meta_be</a>-&gt;<a class="code hl_function" href="class_r_g_w_s_i___meta_backend.html#a4698ced0182afcc56eeedd5522109e34">alloc_ctx</a>());</div>
<div class="line"><a id="l03043" name="l03043"></a><span class="lineno"> 3043</span>  ctx-&gt;init(<a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_role.html#a66d792ed1b40134f0387f55650a03036">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#abe4f0602b771d5549a02c0a326d6a832">svc</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_services.html#a5dd49b8bdc5fc53908eebbb1f39561fe">role</a>-&gt;<a class="code hl_function" href="class_r_g_w_s_i___role___r_a_d_o_s.html#a7765bd8d76c87e607559ed3259b17f90">get_be_handler</a>());</div>
<div class="line"><a id="l03044" name="l03044"></a><span class="lineno"> 3044</span>  <span class="keywordtype">int</span> ret = <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_role.html#a66d792ed1b40134f0387f55650a03036">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#abe4f0602b771d5549a02c0a326d6a832">svc</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_services.html#a5dd49b8bdc5fc53908eebbb1f39561fe">role</a>-&gt;<a class="code hl_variable" href="class_r_g_w_s_i___role___r_a_d_o_s.html#a99769c826558561f454a3642ffc47a89">svc</a>.<a class="code hl_variable" href="struct_r_g_w_s_i___role___r_a_d_o_s_1_1_svc.html#af6e0d8c6b7224668059f211104464620">meta_be</a>-&gt;<a class="code hl_function" href="class_r_g_w_s_i___meta_backend.html#a86a3eca04757e4f69704a6de92987ec0">get</a>(ctx.get(), oid, params, &amp;<a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_role.html#ae06bf4224a6960abf89895324194a1c9">info</a>.<a class="code hl_variable" href="structrgw_1_1sal_1_1_r_g_w_role_info.html#a888c30d3016a0f9186d85e37e12f9c0b">objv_tracker</a>, y, <a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <span class="keyword">true</span>);</div>
<div class="line"><a id="l03045" name="l03045"></a><span class="lineno"> 3045</span>  <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line"><a id="l03046" name="l03046"></a><span class="lineno"> 3046</span>    ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 0) &lt;&lt; <span class="stringliteral">&quot;ERROR: failed reading role info from Role pool: &quot;</span> &lt;&lt; <a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_role.html#ae06bf4224a6960abf89895324194a1c9">info</a>.<a class="code hl_variable" href="structrgw_1_1sal_1_1_r_g_w_role_info.html#ad8282aca283d5fa8b28744948dac32bf">id</a> &lt;&lt; <span class="stringliteral">&quot;: &quot;</span> &lt;&lt; cpp_strerror(-ret) &lt;&lt; dendl;</div>
<div class="line"><a id="l03047" name="l03047"></a><span class="lineno"> 3047</span>    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l03048" name="l03048"></a><span class="lineno"> 3048</span>  }</div>
<div class="line"><a id="l03049" name="l03049"></a><span class="lineno"> 3049</span> </div>
<div class="line"><a id="l03050" name="l03050"></a><span class="lineno"> 3050</span>  <span class="keywordflow">try</span> {</div>
<div class="line"><a id="l03051" name="l03051"></a><span class="lineno"> 3051</span>    <span class="keyword">using </span>ceph::decode;</div>
<div class="line"><a id="l03052" name="l03052"></a><span class="lineno"> 3052</span>    <span class="keyword">auto</span> iter = bl.cbegin();</div>
<div class="line"><a id="l03053" name="l03053"></a><span class="lineno"> 3053</span>    <a class="code hl_function" href="namespacergw.html#a49e77e75ed539fdbde0dcc092bb76467">decode</a>(this-&gt;info, iter);</div>
<div class="line"><a id="l03054" name="l03054"></a><span class="lineno"> 3054</span>  } <span class="keywordflow">catch</span> (buffer::error&amp; err) {</div>
<div class="line"><a id="l03055" name="l03055"></a><span class="lineno"> 3055</span>    ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 0) &lt;&lt; <span class="stringliteral">&quot;ERROR: failed to decode role info from Role pool: &quot;</span> &lt;&lt; <a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_role.html#ae06bf4224a6960abf89895324194a1c9">info</a>.<a class="code hl_variable" href="structrgw_1_1sal_1_1_r_g_w_role_info.html#ad8282aca283d5fa8b28744948dac32bf">id</a> &lt;&lt; dendl;</div>
<div class="line"><a id="l03056" name="l03056"></a><span class="lineno"> 3056</span>    <span class="keywordflow">return</span> -EIO;</div>
<div class="line"><a id="l03057" name="l03057"></a><span class="lineno"> 3057</span>  }</div>
<div class="line"><a id="l03058" name="l03058"></a><span class="lineno"> 3058</span> </div>
<div class="line"><a id="l03059" name="l03059"></a><span class="lineno"> 3059</span>  <span class="keyword">auto</span> it = <a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_role.html#ae06bf4224a6960abf89895324194a1c9">info</a>.<a class="code hl_variable" href="structrgw_1_1sal_1_1_r_g_w_role_info.html#a7dce766079795c8ef5fcbc8f259b8233">attrs</a>.find(<span class="stringliteral">&quot;tagging&quot;</span>);</div>
<div class="line"><a id="l03060" name="l03060"></a><span class="lineno"> 3060</span>  <span class="keywordflow">if</span> (it != <a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_role.html#ae06bf4224a6960abf89895324194a1c9">info</a>.<a class="code hl_variable" href="structrgw_1_1sal_1_1_r_g_w_role_info.html#a7dce766079795c8ef5fcbc8f259b8233">attrs</a>.end()) {</div>
<div class="line"><a id="l03061" name="l03061"></a><span class="lineno"> 3061</span>    bufferlist bl_tags = it-&gt;second;</div>
<div class="line"><a id="l03062" name="l03062"></a><span class="lineno"> 3062</span>    <span class="keywordflow">try</span> {</div>
<div class="line"><a id="l03063" name="l03063"></a><span class="lineno"> 3063</span>      <span class="keyword">using </span>ceph::decode;</div>
<div class="line"><a id="l03064" name="l03064"></a><span class="lineno"> 3064</span>      <span class="keyword">auto</span> iter = bl_tags.cbegin();</div>
<div class="line"><a id="l03065" name="l03065"></a><span class="lineno"> 3065</span>      <a class="code hl_function" href="namespacergw.html#a49e77e75ed539fdbde0dcc092bb76467">decode</a>(<a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_role.html#ae06bf4224a6960abf89895324194a1c9">info</a>.<a class="code hl_variable" href="structrgw_1_1sal_1_1_r_g_w_role_info.html#a41cae49f92809b7e2c39900b8d94b11f">tags</a>, iter);</div>
<div class="line"><a id="l03066" name="l03066"></a><span class="lineno"> 3066</span>    } <span class="keywordflow">catch</span> (buffer::error&amp; err) {</div>
<div class="line"><a id="l03067" name="l03067"></a><span class="lineno"> 3067</span>      ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 0) &lt;&lt; <span class="stringliteral">&quot;ERROR: failed to decode attrs&quot;</span> &lt;&lt; <a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_role.html#ae06bf4224a6960abf89895324194a1c9">info</a>.<a class="code hl_variable" href="structrgw_1_1sal_1_1_r_g_w_role_info.html#ad8282aca283d5fa8b28744948dac32bf">id</a> &lt;&lt; dendl;</div>
<div class="line"><a id="l03068" name="l03068"></a><span class="lineno"> 3068</span>      <span class="keywordflow">return</span> -EIO;</div>
<div class="line"><a id="l03069" name="l03069"></a><span class="lineno"> 3069</span>    }</div>
<div class="line"><a id="l03070" name="l03070"></a><span class="lineno"> 3070</span>  }</div>
<div class="line"><a id="l03071" name="l03071"></a><span class="lineno"> 3071</span> </div>
<div class="line"><a id="l03072" name="l03072"></a><span class="lineno"> 3072</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l03073" name="l03073"></a><span class="lineno"> 3073</span>}</div>
</div>
<div class="line"><a id="l03074" name="l03074"></a><span class="lineno"> 3074</span> </div>
<div class="foldopen" id="foldopen03075" data-start="{" data-end="}">
<div class="line"><a id="l03075" name="l03075"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_role.html#a0b5a5651be374acb7126cab876400e6f"> 3075</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_role.html#a0b5a5651be374acb7126cab876400e6f">RadosRole::create</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <span class="keywordtype">bool</span> exclusive, <span class="keyword">const</span> std::string&amp; role_id, optional_yield y)</div>
<div class="line"><a id="l03076" name="l03076"></a><span class="lineno"> 3076</span>{</div>
<div class="line"><a id="l03077" name="l03077"></a><span class="lineno"> 3077</span>  <span class="keywordtype">int</span> ret;</div>
<div class="line"><a id="l03078" name="l03078"></a><span class="lineno"> 3078</span> </div>
<div class="line"><a id="l03079" name="l03079"></a><span class="lineno"> 3079</span>  <span class="keywordflow">if</span> (! <a class="code hl_function" href="classrgw_1_1sal_1_1_r_g_w_role.html#aa71fa8742e94426dbf71ce9277d8e8a1">validate_input</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>)) {</div>
<div class="line"><a id="l03080" name="l03080"></a><span class="lineno"> 3080</span>    <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><a id="l03081" name="l03081"></a><span class="lineno"> 3081</span>  }</div>
<div class="line"><a id="l03082" name="l03082"></a><span class="lineno"> 3082</span> </div>
<div class="line"><a id="l03083" name="l03083"></a><span class="lineno"> 3083</span>  <span class="keywordflow">if</span> (!role_id.empty()) {</div>
<div class="line"><a id="l03084" name="l03084"></a><span class="lineno"> 3084</span>    <a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_role.html#ae06bf4224a6960abf89895324194a1c9">info</a>.<a class="code hl_variable" href="structrgw_1_1sal_1_1_r_g_w_role_info.html#ad8282aca283d5fa8b28744948dac32bf">id</a> = role_id;</div>
<div class="line"><a id="l03085" name="l03085"></a><span class="lineno"> 3085</span>  }</div>
<div class="line"><a id="l03086" name="l03086"></a><span class="lineno"> 3086</span> </div>
<div class="line"><a id="l03087" name="l03087"></a><span class="lineno"> 3087</span>  <span class="comment">/* check to see the name is not used */</span></div>
<div class="line"><a id="l03088" name="l03088"></a><span class="lineno"> 3088</span>  ret = <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_role.html#a9e564bf54ab7a0fb284a519a2bb230f9">read_id</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_role.html#ae06bf4224a6960abf89895324194a1c9">info</a>.<a class="code hl_variable" href="structrgw_1_1sal_1_1_r_g_w_role_info.html#a599dc24a677d2d9d254e57b29fb397b2">name</a>, <a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_role.html#ae06bf4224a6960abf89895324194a1c9">info</a>.<a class="code hl_variable" href="structrgw_1_1sal_1_1_r_g_w_role_info.html#a85618d6552f7c1ed9bddd6105c10e0f3">tenant</a>, <a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_role.html#ae06bf4224a6960abf89895324194a1c9">info</a>.<a class="code hl_variable" href="structrgw_1_1sal_1_1_r_g_w_role_info.html#ad8282aca283d5fa8b28744948dac32bf">id</a>, y);</div>
<div class="line"><a id="l03089" name="l03089"></a><span class="lineno"> 3089</span>  <span class="keywordflow">if</span> (exclusive &amp;&amp; ret == 0) {</div>
<div class="line"><a id="l03090" name="l03090"></a><span class="lineno"> 3090</span>    ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 0) &lt;&lt; <span class="stringliteral">&quot;ERROR: name &quot;</span> &lt;&lt; <a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_role.html#ae06bf4224a6960abf89895324194a1c9">info</a>.<a class="code hl_variable" href="structrgw_1_1sal_1_1_r_g_w_role_info.html#a599dc24a677d2d9d254e57b29fb397b2">name</a> &lt;&lt; <span class="stringliteral">&quot; already in use for role id &quot;</span></div>
<div class="line"><a id="l03091" name="l03091"></a><span class="lineno"> 3091</span>                    &lt;&lt; <a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_role.html#ae06bf4224a6960abf89895324194a1c9">info</a>.<a class="code hl_variable" href="structrgw_1_1sal_1_1_r_g_w_role_info.html#ad8282aca283d5fa8b28744948dac32bf">id</a> &lt;&lt; dendl;</div>
<div class="line"><a id="l03092" name="l03092"></a><span class="lineno"> 3092</span>    <span class="keywordflow">return</span> -EEXIST;</div>
<div class="line"><a id="l03093" name="l03093"></a><span class="lineno"> 3093</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( ret &lt; 0 &amp;&amp; ret != -ENOENT) {</div>
<div class="line"><a id="l03094" name="l03094"></a><span class="lineno"> 3094</span>    ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 0) &lt;&lt; <span class="stringliteral">&quot;failed reading role id  &quot;</span> &lt;&lt; <a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_role.html#ae06bf4224a6960abf89895324194a1c9">info</a>.<a class="code hl_variable" href="structrgw_1_1sal_1_1_r_g_w_role_info.html#ad8282aca283d5fa8b28744948dac32bf">id</a> &lt;&lt; <span class="stringliteral">&quot;: &quot;</span></div>
<div class="line"><a id="l03095" name="l03095"></a><span class="lineno"> 3095</span>                  &lt;&lt; cpp_strerror(-ret) &lt;&lt; dendl;</div>
<div class="line"><a id="l03096" name="l03096"></a><span class="lineno"> 3096</span>    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l03097" name="l03097"></a><span class="lineno"> 3097</span>  }</div>
<div class="line"><a id="l03098" name="l03098"></a><span class="lineno"> 3098</span> </div>
<div class="line"><a id="l03099" name="l03099"></a><span class="lineno"> 3099</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_role.html#ae06bf4224a6960abf89895324194a1c9">info</a>.<a class="code hl_variable" href="structrgw_1_1sal_1_1_r_g_w_role_info.html#ad8282aca283d5fa8b28744948dac32bf">id</a>.empty()) {</div>
<div class="line"><a id="l03100" name="l03100"></a><span class="lineno"> 3100</span>    <span class="comment">/* create unique id */</span></div>
<div class="line"><a id="l03101" name="l03101"></a><span class="lineno"> 3101</span>    uuid_d new_uuid;</div>
<div class="line"><a id="l03102" name="l03102"></a><span class="lineno"> 3102</span>    <span class="keywordtype">char</span> uuid_str[37];</div>
<div class="line"><a id="l03103" name="l03103"></a><span class="lineno"> 3103</span>    new_uuid.generate_random();</div>
<div class="line"><a id="l03104" name="l03104"></a><span class="lineno"> 3104</span>    new_uuid.print(uuid_str);</div>
<div class="line"><a id="l03105" name="l03105"></a><span class="lineno"> 3105</span>    <a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_role.html#ae06bf4224a6960abf89895324194a1c9">info</a>.<a class="code hl_variable" href="structrgw_1_1sal_1_1_r_g_w_role_info.html#ad8282aca283d5fa8b28744948dac32bf">id</a> = uuid_str;</div>
<div class="line"><a id="l03106" name="l03106"></a><span class="lineno"> 3106</span>  }</div>
<div class="line"><a id="l03107" name="l03107"></a><span class="lineno"> 3107</span> </div>
<div class="line"><a id="l03108" name="l03108"></a><span class="lineno"> 3108</span>  <span class="comment">//arn</span></div>
<div class="line"><a id="l03109" name="l03109"></a><span class="lineno"> 3109</span>  <a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_role.html#ae06bf4224a6960abf89895324194a1c9">info</a>.<a class="code hl_variable" href="structrgw_1_1sal_1_1_r_g_w_role_info.html#a0ea7af21113bf1f45814c53f426d7cd2">arn</a> = <a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_role.html#a2b3372c7095b80a93b41e55504cb6758">role_arn_prefix</a> + <a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_role.html#ae06bf4224a6960abf89895324194a1c9">info</a>.<a class="code hl_variable" href="structrgw_1_1sal_1_1_r_g_w_role_info.html#a85618d6552f7c1ed9bddd6105c10e0f3">tenant</a> + <span class="stringliteral">&quot;:role&quot;</span> + <a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_role.html#ae06bf4224a6960abf89895324194a1c9">info</a>.<a class="code hl_variable" href="structrgw_1_1sal_1_1_r_g_w_role_info.html#ab164a36c4bb8d26f3110d43b8db6bdc5">path</a> + <a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_role.html#ae06bf4224a6960abf89895324194a1c9">info</a>.<a class="code hl_variable" href="structrgw_1_1sal_1_1_r_g_w_role_info.html#a599dc24a677d2d9d254e57b29fb397b2">name</a>;</div>
<div class="line"><a id="l03110" name="l03110"></a><span class="lineno"> 3110</span> </div>
<div class="line"><a id="l03111" name="l03111"></a><span class="lineno"> 3111</span>  <span class="comment">// Creation time</span></div>
<div class="line"><a id="l03112" name="l03112"></a><span class="lineno"> 3112</span>  real_clock::time_point t = real_clock::now();</div>
<div class="line"><a id="l03113" name="l03113"></a><span class="lineno"> 3113</span> </div>
<div class="line"><a id="l03114" name="l03114"></a><span class="lineno"> 3114</span>  <span class="keyword">struct </span>timeval tv;</div>
<div class="line"><a id="l03115" name="l03115"></a><span class="lineno"> 3115</span>  real_clock::to_timeval(t, tv);</div>
<div class="line"><a id="l03116" name="l03116"></a><span class="lineno"> 3116</span> </div>
<div class="line"><a id="l03117" name="l03117"></a><span class="lineno"> 3117</span>  <span class="keywordtype">char</span> buf[30];</div>
<div class="line"><a id="l03118" name="l03118"></a><span class="lineno"> 3118</span>  <span class="keyword">struct </span>tm result;</div>
<div class="line"><a id="l03119" name="l03119"></a><span class="lineno"> 3119</span>  gmtime_r(&amp;tv.tv_sec, &amp;result);</div>
<div class="line"><a id="l03120" name="l03120"></a><span class="lineno"> 3120</span>  strftime(buf,30,<span class="stringliteral">&quot;%Y-%m-%dT%H:%M:%S&quot;</span>, &amp;result);</div>
<div class="line"><a id="l03121" name="l03121"></a><span class="lineno"> 3121</span>  sprintf(buf + strlen(buf),<span class="stringliteral">&quot;.%dZ&quot;</span>,(<span class="keywordtype">int</span>)tv.tv_usec/1000);</div>
<div class="line"><a id="l03122" name="l03122"></a><span class="lineno"> 3122</span>  <a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_role.html#ae06bf4224a6960abf89895324194a1c9">info</a>.<a class="code hl_variable" href="structrgw_1_1sal_1_1_r_g_w_role_info.html#a36c157c787d99d9d96d1c688f215c7ea">creation_date</a>.assign(buf, strlen(buf));</div>
<div class="line"><a id="l03123" name="l03123"></a><span class="lineno"> 3123</span> </div>
<div class="line"><a id="l03124" name="l03124"></a><span class="lineno"> 3124</span>  <span class="keyword">auto</span>&amp; pool = <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_role.html#a66d792ed1b40134f0387f55650a03036">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aaecd01256c4639f8b8c31231022baef0">get_zone</a>()-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_zone.html#aad5682df06309df9be7bc8fdab823b50">get_params</a>().<a class="code hl_variable" href="struct_r_g_w_zone_params.html#af144c01afe26899f178544900b1835be">roles_pool</a>;</div>
<div class="line"><a id="l03125" name="l03125"></a><span class="lineno"> 3125</span>  ret = <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_role.html#a0513045765632d6db2607f1e799e0af2">store_info</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, exclusive, y);</div>
<div class="line"><a id="l03126" name="l03126"></a><span class="lineno"> 3126</span>  <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line"><a id="l03127" name="l03127"></a><span class="lineno"> 3127</span>    ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 0) &lt;&lt; <span class="stringliteral">&quot;ERROR:  storing role info in Role pool: &quot;</span></div>
<div class="line"><a id="l03128" name="l03128"></a><span class="lineno"> 3128</span>                  &lt;&lt; <a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_role.html#ae06bf4224a6960abf89895324194a1c9">info</a>.<a class="code hl_variable" href="structrgw_1_1sal_1_1_r_g_w_role_info.html#ad8282aca283d5fa8b28744948dac32bf">id</a> &lt;&lt; <span class="stringliteral">&quot;: &quot;</span> &lt;&lt; cpp_strerror(-ret) &lt;&lt; dendl;</div>
<div class="line"><a id="l03129" name="l03129"></a><span class="lineno"> 3129</span>    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l03130" name="l03130"></a><span class="lineno"> 3130</span>  }</div>
<div class="line"><a id="l03131" name="l03131"></a><span class="lineno"> 3131</span> </div>
<div class="line"><a id="l03132" name="l03132"></a><span class="lineno"> 3132</span>  ret = <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_role.html#ab87f1ca4f4a934dd13609ab2be4acae7">store_name</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, exclusive, y);</div>
<div class="line"><a id="l03133" name="l03133"></a><span class="lineno"> 3133</span>  <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line"><a id="l03134" name="l03134"></a><span class="lineno"> 3134</span>    ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 0) &lt;&lt; <span class="stringliteral">&quot;ERROR: storing role name in Role pool: &quot;</span></div>
<div class="line"><a id="l03135" name="l03135"></a><span class="lineno"> 3135</span>                  &lt;&lt; <a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_role.html#ae06bf4224a6960abf89895324194a1c9">info</a>.<a class="code hl_variable" href="structrgw_1_1sal_1_1_r_g_w_role_info.html#a599dc24a677d2d9d254e57b29fb397b2">name</a> &lt;&lt; <span class="stringliteral">&quot;: &quot;</span> &lt;&lt; cpp_strerror(-ret) &lt;&lt; dendl;</div>
<div class="line"><a id="l03136" name="l03136"></a><span class="lineno"> 3136</span> </div>
<div class="line"><a id="l03137" name="l03137"></a><span class="lineno"> 3137</span>    <span class="comment">//Delete the role info that was stored in the previous call</span></div>
<div class="line"><a id="l03138" name="l03138"></a><span class="lineno"> 3138</span>    std::string oid = <a class="code hl_function" href="classrgw_1_1sal_1_1_r_g_w_role.html#aaaf69956c06e4c0556febabce5c9bd8d">get_info_oid_prefix</a>() + <a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_role.html#ae06bf4224a6960abf89895324194a1c9">info</a>.<a class="code hl_variable" href="structrgw_1_1sal_1_1_r_g_w_role_info.html#ad8282aca283d5fa8b28744948dac32bf">id</a>;</div>
<div class="line"><a id="l03139" name="l03139"></a><span class="lineno"> 3139</span>    <span class="keywordtype">int</span> info_ret = <a class="code hl_function" href="rgw__tools_8cc.html#a046ce687b6bb951e6c13fcb3b373bbe5">rgw_delete_system_obj</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_role.html#a66d792ed1b40134f0387f55650a03036">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#abe4f0602b771d5549a02c0a326d6a832">svc</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_services.html#a742bbed66b1688310eeb8c0b692bf6b9">sysobj</a>, pool, oid, <span class="keyword">nullptr</span>, y);</div>
<div class="line"><a id="l03140" name="l03140"></a><span class="lineno"> 3140</span>    <span class="keywordflow">if</span> (info_ret &lt; 0) {</div>
<div class="line"><a id="l03141" name="l03141"></a><span class="lineno"> 3141</span>      ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 0) &lt;&lt; <span class="stringliteral">&quot;ERROR: cleanup of role id from Role pool: &quot;</span></div>
<div class="line"><a id="l03142" name="l03142"></a><span class="lineno"> 3142</span>                  &lt;&lt; <a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_role.html#ae06bf4224a6960abf89895324194a1c9">info</a>.<a class="code hl_variable" href="structrgw_1_1sal_1_1_r_g_w_role_info.html#ad8282aca283d5fa8b28744948dac32bf">id</a> &lt;&lt; <span class="stringliteral">&quot;: &quot;</span> &lt;&lt; cpp_strerror(-info_ret) &lt;&lt; dendl;</div>
<div class="line"><a id="l03143" name="l03143"></a><span class="lineno"> 3143</span>    }</div>
<div class="line"><a id="l03144" name="l03144"></a><span class="lineno"> 3144</span>    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l03145" name="l03145"></a><span class="lineno"> 3145</span>  }</div>
<div class="line"><a id="l03146" name="l03146"></a><span class="lineno"> 3146</span> </div>
<div class="line"><a id="l03147" name="l03147"></a><span class="lineno"> 3147</span>  ret = <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_role.html#ac5c2f9db1c77fa378c3762f23e6469bc">store_path</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, exclusive, y);</div>
<div class="line"><a id="l03148" name="l03148"></a><span class="lineno"> 3148</span>  <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line"><a id="l03149" name="l03149"></a><span class="lineno"> 3149</span>    ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 0) &lt;&lt; <span class="stringliteral">&quot;ERROR: storing role path in Role pool: &quot;</span></div>
<div class="line"><a id="l03150" name="l03150"></a><span class="lineno"> 3150</span>                  &lt;&lt; <a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_role.html#ae06bf4224a6960abf89895324194a1c9">info</a>.<a class="code hl_variable" href="structrgw_1_1sal_1_1_r_g_w_role_info.html#ab164a36c4bb8d26f3110d43b8db6bdc5">path</a> &lt;&lt; <span class="stringliteral">&quot;: &quot;</span> &lt;&lt; cpp_strerror(-ret) &lt;&lt; dendl;</div>
<div class="line"><a id="l03151" name="l03151"></a><span class="lineno"> 3151</span>    <span class="comment">//Delete the role info that was stored in the previous call</span></div>
<div class="line"><a id="l03152" name="l03152"></a><span class="lineno"> 3152</span>    std::string oid = <a class="code hl_function" href="classrgw_1_1sal_1_1_r_g_w_role.html#aaaf69956c06e4c0556febabce5c9bd8d">get_info_oid_prefix</a>() + <a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_role.html#ae06bf4224a6960abf89895324194a1c9">info</a>.<a class="code hl_variable" href="structrgw_1_1sal_1_1_r_g_w_role_info.html#ad8282aca283d5fa8b28744948dac32bf">id</a>;</div>
<div class="line"><a id="l03153" name="l03153"></a><span class="lineno"> 3153</span>    <span class="keywordtype">int</span> info_ret = <a class="code hl_function" href="rgw__tools_8cc.html#a046ce687b6bb951e6c13fcb3b373bbe5">rgw_delete_system_obj</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_role.html#a66d792ed1b40134f0387f55650a03036">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#abe4f0602b771d5549a02c0a326d6a832">svc</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_services.html#a742bbed66b1688310eeb8c0b692bf6b9">sysobj</a>, pool, oid, <span class="keyword">nullptr</span>, y);</div>
<div class="line"><a id="l03154" name="l03154"></a><span class="lineno"> 3154</span>    <span class="keywordflow">if</span> (info_ret &lt; 0) {</div>
<div class="line"><a id="l03155" name="l03155"></a><span class="lineno"> 3155</span>      ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 0) &lt;&lt; <span class="stringliteral">&quot;ERROR: cleanup of role id from Role pool: &quot;</span></div>
<div class="line"><a id="l03156" name="l03156"></a><span class="lineno"> 3156</span>                  &lt;&lt; <a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_role.html#ae06bf4224a6960abf89895324194a1c9">info</a>.<a class="code hl_variable" href="structrgw_1_1sal_1_1_r_g_w_role_info.html#ad8282aca283d5fa8b28744948dac32bf">id</a> &lt;&lt; <span class="stringliteral">&quot;: &quot;</span> &lt;&lt; cpp_strerror(-info_ret) &lt;&lt; dendl;</div>
<div class="line"><a id="l03157" name="l03157"></a><span class="lineno"> 3157</span>    }</div>
<div class="line"><a id="l03158" name="l03158"></a><span class="lineno"> 3158</span>    <span class="comment">//Delete role name that was stored in previous call</span></div>
<div class="line"><a id="l03159" name="l03159"></a><span class="lineno"> 3159</span>    oid = <a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_role.html#ae06bf4224a6960abf89895324194a1c9">info</a>.<a class="code hl_variable" href="structrgw_1_1sal_1_1_r_g_w_role_info.html#a85618d6552f7c1ed9bddd6105c10e0f3">tenant</a> + <a class="code hl_function" href="classrgw_1_1sal_1_1_r_g_w_role.html#a422bc7253257f4dce12a7d800e2d3982">get_names_oid_prefix</a>() + <a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_role.html#ae06bf4224a6960abf89895324194a1c9">info</a>.<a class="code hl_variable" href="structrgw_1_1sal_1_1_r_g_w_role_info.html#a599dc24a677d2d9d254e57b29fb397b2">name</a>;</div>
<div class="line"><a id="l03160" name="l03160"></a><span class="lineno"> 3160</span>    <span class="keywordtype">int</span> name_ret = <a class="code hl_function" href="rgw__tools_8cc.html#a046ce687b6bb951e6c13fcb3b373bbe5">rgw_delete_system_obj</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_role.html#a66d792ed1b40134f0387f55650a03036">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#abe4f0602b771d5549a02c0a326d6a832">svc</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_services.html#a742bbed66b1688310eeb8c0b692bf6b9">sysobj</a>, pool, oid, <span class="keyword">nullptr</span>, y);</div>
<div class="line"><a id="l03161" name="l03161"></a><span class="lineno"> 3161</span>    <span class="keywordflow">if</span> (name_ret &lt; 0) {</div>
<div class="line"><a id="l03162" name="l03162"></a><span class="lineno"> 3162</span>      ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 0) &lt;&lt; <span class="stringliteral">&quot;ERROR: cleanup of role name from Role pool: &quot;</span></div>
<div class="line"><a id="l03163" name="l03163"></a><span class="lineno"> 3163</span>                  &lt;&lt; <a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_role.html#ae06bf4224a6960abf89895324194a1c9">info</a>.<a class="code hl_variable" href="structrgw_1_1sal_1_1_r_g_w_role_info.html#a599dc24a677d2d9d254e57b29fb397b2">name</a> &lt;&lt; <span class="stringliteral">&quot;: &quot;</span> &lt;&lt; cpp_strerror(-name_ret) &lt;&lt; dendl;</div>
<div class="line"><a id="l03164" name="l03164"></a><span class="lineno"> 3164</span>    }</div>
<div class="line"><a id="l03165" name="l03165"></a><span class="lineno"> 3165</span>    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l03166" name="l03166"></a><span class="lineno"> 3166</span>  }</div>
<div class="line"><a id="l03167" name="l03167"></a><span class="lineno"> 3167</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l03168" name="l03168"></a><span class="lineno"> 3168</span>}</div>
</div>
<div class="line"><a id="l03169" name="l03169"></a><span class="lineno"> 3169</span> </div>
<div class="foldopen" id="foldopen03170" data-start="{" data-end="}">
<div class="line"><a id="l03170" name="l03170"></a><span class="lineno"><a class="line" href="classrgw_1_1sal_1_1_rados_role.html#a385c9261a23b857a3168c325dc8f08e0"> 3170</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_role.html#a385c9261a23b857a3168c325dc8f08e0">RadosRole::delete_obj</a>(<span class="keyword">const</span> DoutPrefixProvider *<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, optional_yield y)</div>
<div class="line"><a id="l03171" name="l03171"></a><span class="lineno"> 3171</span>{</div>
<div class="line"><a id="l03172" name="l03172"></a><span class="lineno"> 3172</span>  <span class="keyword">auto</span>&amp; pool = <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_role.html#a66d792ed1b40134f0387f55650a03036">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#aaecd01256c4639f8b8c31231022baef0">get_zone</a>()-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_zone.html#aad5682df06309df9be7bc8fdab823b50">get_params</a>().<a class="code hl_variable" href="struct_r_g_w_zone_params.html#af144c01afe26899f178544900b1835be">roles_pool</a>;</div>
<div class="line"><a id="l03173" name="l03173"></a><span class="lineno"> 3173</span> </div>
<div class="line"><a id="l03174" name="l03174"></a><span class="lineno"> 3174</span>  <span class="keywordtype">int</span> ret = <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_role.html#ae3812cec35ad2a02abb85b2b9403a02c">read_name</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, y);</div>
<div class="line"><a id="l03175" name="l03175"></a><span class="lineno"> 3175</span>  <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line"><a id="l03176" name="l03176"></a><span class="lineno"> 3176</span>    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l03177" name="l03177"></a><span class="lineno"> 3177</span>  }</div>
<div class="line"><a id="l03178" name="l03178"></a><span class="lineno"> 3178</span> </div>
<div class="line"><a id="l03179" name="l03179"></a><span class="lineno"> 3179</span>  ret = <a class="code hl_function" href="classrgw_1_1sal_1_1_rados_role.html#a720efbc858424227cb3783852cae05a2">read_info</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, y);</div>
<div class="line"><a id="l03180" name="l03180"></a><span class="lineno"> 3180</span>  <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line"><a id="l03181" name="l03181"></a><span class="lineno"> 3181</span>    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l03182" name="l03182"></a><span class="lineno"> 3182</span>  }</div>
<div class="line"><a id="l03183" name="l03183"></a><span class="lineno"> 3183</span> </div>
<div class="line"><a id="l03184" name="l03184"></a><span class="lineno"> 3184</span>  <span class="keywordflow">if</span> (! <a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_role.html#ae06bf4224a6960abf89895324194a1c9">info</a>.<a class="code hl_variable" href="structrgw_1_1sal_1_1_r_g_w_role_info.html#ad44100f5b43e8a26c3c1723573a92afa">perm_policy_map</a>.empty()) {</div>
<div class="line"><a id="l03185" name="l03185"></a><span class="lineno"> 3185</span>    <span class="keywordflow">return</span> -<a class="code hl_define" href="rgw__common_8h.html#a96c0eb332e5a1a72d8e3d08e11f67b05">ERR_DELETE_CONFLICT</a>;</div>
<div class="line"><a id="l03186" name="l03186"></a><span class="lineno"> 3186</span>  }</div>
<div class="line"><a id="l03187" name="l03187"></a><span class="lineno"> 3187</span> </div>
<div class="line"><a id="l03188" name="l03188"></a><span class="lineno"> 3188</span>  <span class="comment">// Delete id</span></div>
<div class="line"><a id="l03189" name="l03189"></a><span class="lineno"> 3189</span>  std::string oid = <a class="code hl_function" href="classrgw_1_1sal_1_1_r_g_w_role.html#aaaf69956c06e4c0556febabce5c9bd8d">get_info_oid_prefix</a>() + <a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_role.html#ae06bf4224a6960abf89895324194a1c9">info</a>.<a class="code hl_variable" href="structrgw_1_1sal_1_1_r_g_w_role_info.html#ad8282aca283d5fa8b28744948dac32bf">id</a>;</div>
<div class="line"><a id="l03190" name="l03190"></a><span class="lineno"> 3190</span>  ret = <a class="code hl_function" href="rgw__tools_8cc.html#a046ce687b6bb951e6c13fcb3b373bbe5">rgw_delete_system_obj</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_role.html#a66d792ed1b40134f0387f55650a03036">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#abe4f0602b771d5549a02c0a326d6a832">svc</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_services.html#a742bbed66b1688310eeb8c0b692bf6b9">sysobj</a>, pool, oid, <span class="keyword">nullptr</span>, y);</div>
<div class="line"><a id="l03191" name="l03191"></a><span class="lineno"> 3191</span>  <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line"><a id="l03192" name="l03192"></a><span class="lineno"> 3192</span>    ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 0) &lt;&lt; <span class="stringliteral">&quot;ERROR: deleting role id from Role pool: &quot;</span></div>
<div class="line"><a id="l03193" name="l03193"></a><span class="lineno"> 3193</span>                  &lt;&lt; <a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_role.html#ae06bf4224a6960abf89895324194a1c9">info</a>.<a class="code hl_variable" href="structrgw_1_1sal_1_1_r_g_w_role_info.html#ad8282aca283d5fa8b28744948dac32bf">id</a> &lt;&lt; <span class="stringliteral">&quot;: &quot;</span> &lt;&lt; cpp_strerror(-ret) &lt;&lt; dendl;</div>
<div class="line"><a id="l03194" name="l03194"></a><span class="lineno"> 3194</span>  }</div>
<div class="line"><a id="l03195" name="l03195"></a><span class="lineno"> 3195</span> </div>
<div class="line"><a id="l03196" name="l03196"></a><span class="lineno"> 3196</span>  <span class="comment">// Delete name</span></div>
<div class="line"><a id="l03197" name="l03197"></a><span class="lineno"> 3197</span>  oid = <a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_role.html#ae06bf4224a6960abf89895324194a1c9">info</a>.<a class="code hl_variable" href="structrgw_1_1sal_1_1_r_g_w_role_info.html#a85618d6552f7c1ed9bddd6105c10e0f3">tenant</a> + <a class="code hl_function" href="classrgw_1_1sal_1_1_r_g_w_role.html#a422bc7253257f4dce12a7d800e2d3982">get_names_oid_prefix</a>() + <a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_role.html#ae06bf4224a6960abf89895324194a1c9">info</a>.<a class="code hl_variable" href="structrgw_1_1sal_1_1_r_g_w_role_info.html#a599dc24a677d2d9d254e57b29fb397b2">name</a>;</div>
<div class="line"><a id="l03198" name="l03198"></a><span class="lineno"> 3198</span>  ret = <a class="code hl_function" href="rgw__tools_8cc.html#a046ce687b6bb951e6c13fcb3b373bbe5">rgw_delete_system_obj</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_role.html#a66d792ed1b40134f0387f55650a03036">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#abe4f0602b771d5549a02c0a326d6a832">svc</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_services.html#a742bbed66b1688310eeb8c0b692bf6b9">sysobj</a>, pool, oid, <span class="keyword">nullptr</span>, y);</div>
<div class="line"><a id="l03199" name="l03199"></a><span class="lineno"> 3199</span>  <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line"><a id="l03200" name="l03200"></a><span class="lineno"> 3200</span>    ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 0) &lt;&lt; <span class="stringliteral">&quot;ERROR: deleting role name from Role pool: &quot;</span></div>
<div class="line"><a id="l03201" name="l03201"></a><span class="lineno"> 3201</span>                  &lt;&lt; <a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_role.html#ae06bf4224a6960abf89895324194a1c9">info</a>.<a class="code hl_variable" href="structrgw_1_1sal_1_1_r_g_w_role_info.html#a599dc24a677d2d9d254e57b29fb397b2">name</a> &lt;&lt; <span class="stringliteral">&quot;: &quot;</span> &lt;&lt; cpp_strerror(-ret) &lt;&lt; dendl;</div>
<div class="line"><a id="l03202" name="l03202"></a><span class="lineno"> 3202</span>  }</div>
<div class="line"><a id="l03203" name="l03203"></a><span class="lineno"> 3203</span> </div>
<div class="line"><a id="l03204" name="l03204"></a><span class="lineno"> 3204</span>  <span class="comment">// Delete path</span></div>
<div class="line"><a id="l03205" name="l03205"></a><span class="lineno"> 3205</span>  oid = <a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_role.html#ae06bf4224a6960abf89895324194a1c9">info</a>.<a class="code hl_variable" href="structrgw_1_1sal_1_1_r_g_w_role_info.html#a85618d6552f7c1ed9bddd6105c10e0f3">tenant</a> + <a class="code hl_function" href="classrgw_1_1sal_1_1_r_g_w_role.html#a438e1fc1f395668638868d4e63af6ea4">get_path_oid_prefix</a>() + <a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_role.html#ae06bf4224a6960abf89895324194a1c9">info</a>.<a class="code hl_variable" href="structrgw_1_1sal_1_1_r_g_w_role_info.html#ab164a36c4bb8d26f3110d43b8db6bdc5">path</a> + <a class="code hl_function" href="classrgw_1_1sal_1_1_r_g_w_role.html#aaaf69956c06e4c0556febabce5c9bd8d">get_info_oid_prefix</a>() + <a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_role.html#ae06bf4224a6960abf89895324194a1c9">info</a>.<a class="code hl_variable" href="structrgw_1_1sal_1_1_r_g_w_role_info.html#ad8282aca283d5fa8b28744948dac32bf">id</a>;</div>
<div class="line"><a id="l03206" name="l03206"></a><span class="lineno"> 3206</span>  ret = <a class="code hl_function" href="rgw__tools_8cc.html#a046ce687b6bb951e6c13fcb3b373bbe5">rgw_delete_system_obj</a>(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, <a class="code hl_variable" href="classrgw_1_1sal_1_1_rados_role.html#a66d792ed1b40134f0387f55650a03036">store</a>-&gt;<a class="code hl_function" href="classrgw_1_1sal_1_1_rados_store.html#abe4f0602b771d5549a02c0a326d6a832">svc</a>()-&gt;<a class="code hl_variable" href="struct_r_g_w_services.html#a742bbed66b1688310eeb8c0b692bf6b9">sysobj</a>, pool, oid, <span class="keyword">nullptr</span>, y);</div>
<div class="line"><a id="l03207" name="l03207"></a><span class="lineno"> 3207</span>  <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line"><a id="l03208" name="l03208"></a><span class="lineno"> 3208</span>    ldpp_dout(<a class="code hl_function" href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a>, 0) &lt;&lt; <span class="stringliteral">&quot;ERROR: deleting role path from Role pool: &quot;</span></div>
<div class="line"><a id="l03209" name="l03209"></a><span class="lineno"> 3209</span>                  &lt;&lt; <a class="code hl_variable" href="classrgw_1_1sal_1_1_r_g_w_role.html#ae06bf4224a6960abf89895324194a1c9">info</a>.<a class="code hl_variable" href="structrgw_1_1sal_1_1_r_g_w_role_info.html#ab164a36c4bb8d26f3110d43b8db6bdc5">path</a> &lt;&lt; <span class="stringliteral">&quot;: &quot;</span> &lt;&lt; cpp_strerror(-ret) &lt;&lt; dendl;</div>
<div class="line"><a id="l03210" name="l03210"></a><span class="lineno"> 3210</span>  }</div>
<div class="line"><a id="l03211" name="l03211"></a><span class="lineno"> 3211</span>  <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l03212" name="l03212"></a><span class="lineno"> 3212</span>}</div>
</div>
<div class="line"><a id="l03213" name="l03213"></a><span class="lineno"> 3213</span> </div>
<div class="line"><a id="l03214" name="l03214"></a><span class="lineno"> 3214</span>} <span class="comment">// namespace rgw::sal</span></div>
<div class="line"><a id="l03215" name="l03215"></a><span class="lineno"> 3215</span> </div>
<div class="line"><a id="l03216" name="l03216"></a><span class="lineno"> 3216</span><span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {</div>
<div class="line"><a id="l03217" name="l03217"></a><span class="lineno"> 3217</span> </div>
<div class="foldopen" id="foldopen03218" data-start="{" data-end="}">
<div class="line"><a id="l03218" name="l03218"></a><span class="lineno"><a class="line" href="rgw__sal_8cc.html#a770eae85f5b1b32db7e73dc4678d6299"> 3218</a></span><span class="keywordtype">void</span>* <a class="code hl_function" href="rgw__sal_8cc.html#a770eae85f5b1b32db7e73dc4678d6299">newStore</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l03219" name="l03219"></a><span class="lineno"> 3219</span>{</div>
<div class="line"><a id="l03220" name="l03220"></a><span class="lineno"> 3220</span>  <a class="code hl_class" href="classrgw_1_1sal_1_1_rados_store.html">rgw::sal::RadosStore</a>* <a class="code hl_variable" href="rgw__admin_8cc.html#a6fdb26d64b14d837b60e83a6ca3e2863">store</a> = <span class="keyword">new</span> <a class="code hl_class" href="classrgw_1_1sal_1_1_rados_store.html">rgw::sal::RadosStore</a>();</div>
<div class="line"><a id="l03221" name="l03221"></a><span class="lineno"> 3221</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="rgw__admin_8cc.html#a6fdb26d64b14d837b60e83a6ca3e2863">store</a>) {</div>
<div class="line"><a id="l03222" name="l03222"></a><span class="lineno"> 3222</span>    <a class="code hl_class" href="class_r_g_w_rados.html">RGWRados</a>* rados = <span class="keyword">new</span> <a class="code hl_class" href="class_r_g_w_rados.html">RGWRados</a>();</div>
<div class="line"><a id="l03223" name="l03223"></a><span class="lineno"> 3223</span> </div>
<div class="line"><a id="l03224" name="l03224"></a><span class="lineno"> 3224</span>    <span class="keywordflow">if</span> (!rados) {</div>
<div class="line"><a id="l03225" name="l03225"></a><span class="lineno"> 3225</span>      <span class="keyword">delete</span> <a class="code hl_variable" href="rgw__admin_8cc.html#a6fdb26d64b14d837b60e83a6ca3e2863">store</a>; <a class="code hl_variable" href="rgw__admin_8cc.html#a6fdb26d64b14d837b60e83a6ca3e2863">store</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l03226" name="l03226"></a><span class="lineno"> 3226</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l03227" name="l03227"></a><span class="lineno"> 3227</span>      <a class="code hl_variable" href="rgw__admin_8cc.html#a6fdb26d64b14d837b60e83a6ca3e2863">store</a>-&gt;setRados(rados);</div>
<div class="line"><a id="l03228" name="l03228"></a><span class="lineno"> 3228</span>      rados-&gt;<a class="code hl_function" href="class_r_g_w_rados.html#a9689af09760a1779f668b9e685b066a2">set_store</a>(<a class="code hl_variable" href="rgw__admin_8cc.html#a6fdb26d64b14d837b60e83a6ca3e2863">store</a>);</div>
<div class="line"><a id="l03229" name="l03229"></a><span class="lineno"> 3229</span>    }</div>
<div class="line"><a id="l03230" name="l03230"></a><span class="lineno"> 3230</span>  }</div>
<div class="line"><a id="l03231" name="l03231"></a><span class="lineno"> 3231</span> </div>
<div class="line"><a id="l03232" name="l03232"></a><span class="lineno"> 3232</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="rgw__admin_8cc.html#a6fdb26d64b14d837b60e83a6ca3e2863">store</a>;</div>
<div class="line"><a id="l03233" name="l03233"></a><span class="lineno"> 3233</span>}</div>
</div>
<div class="line"><a id="l03234" name="l03234"></a><span class="lineno"> 3234</span> </div>
<div class="line"><a id="l03235" name="l03235"></a><span class="lineno"> 3235</span>}</div>
<div class="ttc" id="aclass_a_c_l_grant_html"><div class="ttname"><a href="class_a_c_l_grant.html">ACLGrant</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__acl_8h_source.html#l00114">rgw_acl.h:115</a></div></div>
<div class="ttc" id="aclass_a_c_l_grant_html_a2ae51a75b88fe129b8b8aaed810b240d"><div class="ttname"><a href="class_a_c_l_grant.html#a2ae51a75b88fe129b8b8aaed810b240d">ACLGrant::set_canon</a></div><div class="ttdeci">void set_canon(const rgw_user &amp;_id, const std::string &amp;_name, const uint32_t perm)</div><div class="ttdef"><b>Definition</b> <a href="rgw__acl_8h_source.html#l00212">rgw_acl.h:212</a></div></div>
<div class="ttc" id="aclass_a_c_l_owner_html"><div class="ttname"><a href="class_a_c_l_owner.html">ACLOwner</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__acl_8h_source.html#l00397">rgw_acl.h:398</a></div></div>
<div class="ttc" id="aclass_a_c_l_owner_html_a97e7c93e1ffef805959cff4096f4e948"><div class="ttname"><a href="class_a_c_l_owner.html#a97e7c93e1ffef805959cff4096f4e948">ACLOwner::set_name</a></div><div class="ttdeci">void set_name(const std::string &amp;name)</div><div class="ttdef"><b>Definition</b> <a href="rgw__acl_8h_source.html#l00427">rgw_acl.h:427</a></div></div>
<div class="ttc" id="aclass_a_c_l_owner_html_ad784a6fdd9366a68b859f664486283fb"><div class="ttname"><a href="class_a_c_l_owner.html#ad784a6fdd9366a68b859f664486283fb">ACLOwner::get_id</a></div><div class="ttdeci">rgw_user &amp; get_id()</div><div class="ttdef"><b>Definition</b> <a href="rgw__acl_8h_source.html#l00429">rgw_acl.h:429</a></div></div>
<div class="ttc" id="aclass_a_c_l_owner_html_af1bf8eb8a289cdf16e1a4f21636cfa7b"><div class="ttname"><a href="class_a_c_l_owner.html#af1bf8eb8a289cdf16e1a4f21636cfa7b">ACLOwner::set_id</a></div><div class="ttdeci">void set_id(const rgw_user &amp;_id)</div><div class="ttdef"><b>Definition</b> <a href="rgw__acl_8h_source.html#l00426">rgw_acl.h:426</a></div></div>
<div class="ttc" id="aclass_multipart_meta_filter_html"><div class="ttname"><a href="class_multipart_meta_filter.html">MultipartMetaFilter</a></div><div class="ttdef"><b>Definition</b> <a href="svc__tier__rados_8h_source.html#l00113">svc_tier_rados.h:113</a></div></div>
<div class="ttc" id="aclass_r_g_w_access_control_list_html"><div class="ttname"><a href="class_r_g_w_access_control_list.html">RGWAccessControlList</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__acl_8h_source.html#l00315">rgw_acl.h:316</a></div></div>
<div class="ttc" id="aclass_r_g_w_access_control_list_html_a50e63ef1029c2cb0624bd109101268e4"><div class="ttname"><a href="class_r_g_w_access_control_list.html#a50e63ef1029c2cb0624bd109101268e4">RGWAccessControlList::add_grant</a></div><div class="ttdeci">void add_grant(ACLGrant *grant)</div><div class="ttdef"><b>Definition</b> <a href="rgw__acl_8cc_source.html#l00108">rgw_acl.cc:108</a></div></div>
<div class="ttc" id="aclass_r_g_w_access_control_list_html_a5f8b38ad713643377bf8854f6cb80c05"><div class="ttname"><a href="class_r_g_w_access_control_list.html#a5f8b38ad713643377bf8854f6cb80c05">RGWAccessControlList::remove_canon_user_grant</a></div><div class="ttdeci">void remove_canon_user_grant(rgw_user &amp;user_id)</div><div class="ttdef"><b>Definition</b> <a href="rgw__acl_8cc_source.html#l00116">rgw_acl.cc:116</a></div></div>
<div class="ttc" id="aclass_r_g_w_access_control_policy___s3_html"><div class="ttname"><a href="class_r_g_w_access_control_policy___s3.html">RGWAccessControlPolicy_S3</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__acl__s3_8h_source.html#l00078">rgw_acl_s3.h:79</a></div></div>
<div class="ttc" id="aclass_r_g_w_access_control_policy___s3_html_aede14d0dedb12d7809049f2095b0071a"><div class="ttname"><a href="class_r_g_w_access_control_policy___s3.html#aede14d0dedb12d7809049f2095b0071a">RGWAccessControlPolicy_S3::to_xml</a></div><div class="ttdeci">void to_xml(std::ostream &amp;out)</div><div class="ttdef"><b>Definition</b> <a href="rgw__acl__s3_8cc_source.html#l00439">rgw_acl_s3.cc:439</a></div></div>
<div class="ttc" id="aclass_r_g_w_access_control_policy_html"><div class="ttname"><a href="class_r_g_w_access_control_policy.html">RGWAccessControlPolicy</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__acl_8h_source.html#l00438">rgw_acl.h:439</a></div></div>
<div class="ttc" id="aclass_r_g_w_access_control_policy_html_a0fa9952c93c911480e7428afd77bce88"><div class="ttname"><a href="class_r_g_w_access_control_policy.html#a0fa9952c93c911480e7428afd77bce88">RGWAccessControlPolicy::decode</a></div><div class="ttdeci">void decode(bufferlist::const_iterator &amp;bl)</div><div class="ttdef"><b>Definition</b> <a href="rgw__acl_8h_source.html#l00473">rgw_acl.h:473</a></div></div>
<div class="ttc" id="aclass_r_g_w_access_control_policy_html_a1ccee3bcdaea76f2e1d1d52fe488bb70"><div class="ttname"><a href="class_r_g_w_access_control_policy.html#a1ccee3bcdaea76f2e1d1d52fe488bb70">RGWAccessControlPolicy::encode</a></div><div class="ttdeci">void encode(bufferlist &amp;bl) const</div><div class="ttdef"><b>Definition</b> <a href="rgw__acl_8h_source.html#l00467">rgw_acl.h:467</a></div></div>
<div class="ttc" id="aclass_r_g_w_access_control_policy_html_a9fa6936da8a5fcccadb72dad7c478eab"><div class="ttname"><a href="class_r_g_w_access_control_policy.html#a9fa6936da8a5fcccadb72dad7c478eab">RGWAccessControlPolicy::get_acl</a></div><div class="ttdeci">RGWAccessControlList &amp; get_acl()</div><div class="ttdef"><b>Definition</b> <a href="rgw__acl_8h_source.html#l00497">rgw_acl.h:497</a></div></div>
<div class="ttc" id="aclass_r_g_w_access_control_policy_html_ac7be38fb3fa69a2ab41eed67a5ee4401"><div class="ttname"><a href="class_r_g_w_access_control_policy.html#ac7be38fb3fa69a2ab41eed67a5ee4401">RGWAccessControlPolicy::get_owner</a></div><div class="ttdeci">ACLOwner &amp; get_owner()</div><div class="ttdef"><b>Definition</b> <a href="rgw__acl_8h_source.html#l00488">rgw_acl.h:488</a></div></div>
<div class="ttc" id="aclass_r_g_w_access_control_policy_html_ad2b0f6e6ea63af2aafac4659b3d3d45b"><div class="ttname"><a href="class_r_g_w_access_control_policy.html#ad2b0f6e6ea63af2aafac4659b3d3d45b">RGWAccessControlPolicy::create_default</a></div><div class="ttdeci">void create_default(const rgw_user &amp;id, std::string &amp;name)</div><div class="ttdef"><b>Definition</b> <a href="rgw__acl_8h_source.html#l00492">rgw_acl.h:492</a></div></div>
<div class="ttc" id="aclass_r_g_w_access_control_policy_html_afee8b7f6ac3c554565c2c72f88158691"><div class="ttname"><a href="class_r_g_w_access_control_policy.html#afee8b7f6ac3c554565c2c72f88158691">RGWAccessControlPolicy::set_owner</a></div><div class="ttdeci">void set_owner(ACLOwner &amp;o)</div><div class="ttdef"><b>Definition</b> <a href="rgw__acl_8h_source.html#l00487">rgw_acl.h:487</a></div></div>
<div class="ttc" id="aclass_r_g_w_bucket_ctl_html_a2b44e9b6f60e3f4f2488383c37fa0e66"><div class="ttname"><a href="class_r_g_w_bucket_ctl.html#a2b44e9b6f60e3f4f2488383c37fa0e66">RGWBucketCtl::read_bucket_instance_info</a></div><div class="ttdeci">int read_bucket_instance_info(const rgw_bucket &amp;bucket, RGWBucketInfo *info, optional_yield y, const DoutPrefixProvider *dpp, const BucketInstance::GetParams &amp;params={})</div><div class="ttdef"><b>Definition</b> <a href="rgw__bucket_8cc_source.html#l02518">rgw_bucket.cc:2518</a></div></div>
<div class="ttc" id="aclass_r_g_w_bucket_ctl_html_a677f6ece17728acf4dcaaee20b86942c"><div class="ttname"><a href="class_r_g_w_bucket_ctl.html#a677f6ece17728acf4dcaaee20b86942c">RGWBucketCtl::unlink_bucket</a></div><div class="ttdeci">int unlink_bucket(const rgw_user &amp;user_id, const rgw_bucket &amp;bucket, optional_yield y, const DoutPrefixProvider *dpp, bool update_entrypoint=true)</div><div class="ttdef"><b>Definition</b> <a href="rgw__bucket_8cc_source.html#l02851">rgw_bucket.cc:2851</a></div></div>
<div class="ttc" id="aclass_r_g_w_bucket_ctl_html_a6ef69b8b0df300e115546f579f036ab2"><div class="ttname"><a href="class_r_g_w_bucket_ctl.html#a6ef69b8b0df300e115546f579f036ab2">RGWBucketCtl::link_bucket</a></div><div class="ttdeci">int link_bucket(const rgw_user &amp;user_id, const rgw_bucket &amp;bucket, ceph::real_time creation_time, optional_yield y, const DoutPrefixProvider *dpp, bool update_entrypoint=true, rgw_ep_info *pinfo=nullptr)</div><div class="ttdef"><b>Definition</b> <a href="rgw__bucket_8cc_source.html#l02769">rgw_bucket.cc:2769</a></div></div>
<div class="ttc" id="aclass_r_g_w_bucket_ctl_html_aa0e69b900dea83d2a4c79964d81bd9c5"><div class="ttname"><a href="class_r_g_w_bucket_ctl.html#aa0e69b900dea83d2a4c79964d81bd9c5">RGWBucketCtl::set_bucket_instance_attrs</a></div><div class="ttdeci">int set_bucket_instance_attrs(RGWBucketInfo &amp;bucket_info, std::map&lt; std::string, bufferlist &gt; &amp;attrs, RGWObjVersionTracker *objv_tracker, optional_yield y, const DoutPrefixProvider *dpp)</div><div class="ttdef"><b>Definition</b> <a href="rgw__bucket_8cc_source.html#l02739">rgw_bucket.cc:2739</a></div></div>
<div class="ttc" id="aclass_r_g_w_bucket_ctl_html_aa4b7d70b20d0507e2d4dea78f003dfa7"><div class="ttname"><a href="class_r_g_w_bucket_ctl.html#aa4b7d70b20d0507e2d4dea78f003dfa7">RGWBucketCtl::sync_user_stats</a></div><div class="ttdeci">int sync_user_stats(const DoutPrefixProvider *dpp, const rgw_user &amp;user_id, const RGWBucketInfo &amp;bucket_info, optional_yield y, RGWBucketEnt *pent)</div><div class="ttdef"><b>Definition</b> <a href="rgw__bucket_8cc_source.html#l02914">rgw_bucket.cc:2914</a></div></div>
<div class="ttc" id="aclass_r_g_w_bucket_ctl_html_ac8b9b1f665367d714b9c28a39ec3303e"><div class="ttname"><a href="class_r_g_w_bucket_ctl.html#ac8b9b1f665367d714b9c28a39ec3303e">RGWBucketCtl::read_bucket_stats</a></div><div class="ttdeci">int read_bucket_stats(const rgw_bucket &amp;bucket, RGWBucketEnt *result, optional_yield y, const DoutPrefixProvider *dpp)</div><div class="ttdef"><b>Definition</b> <a href="rgw__bucket_8cc_source.html#l02896">rgw_bucket.cc:2896</a></div></div>
<div class="ttc" id="aclass_r_g_w_bucket_ctl_html_ad871c6de412d64c430a75a57115859a9"><div class="ttname"><a href="class_r_g_w_bucket_ctl.html#ad871c6de412d64c430a75a57115859a9">RGWBucketCtl::read_bucket_info</a></div><div class="ttdeci">int read_bucket_info(const rgw_bucket &amp;bucket, RGWBucketInfo *info, optional_yield y, const DoutPrefixProvider *dpp, const BucketInstance::GetParams &amp;params={}, RGWObjVersionTracker *ep_objv_tracker=nullptr)</div><div class="ttdef"><b>Definition</b> <a href="rgw__bucket_8cc_source.html#l02547">rgw_bucket.cc:2547</a></div></div>
<div class="ttc" id="aclass_r_g_w_bucket_ctl_html_af6941145d8c57eb328ef7a7ddc93d82b"><div class="ttname"><a href="class_r_g_w_bucket_ctl.html#af6941145d8c57eb328ef7a7ddc93d82b">RGWBucketCtl::store_bucket_instance_info</a></div><div class="ttdeci">int store_bucket_instance_info(const rgw_bucket &amp;bucket, RGWBucketInfo &amp;info, optional_yield y, const DoutPrefixProvider *dpp, const BucketInstance::PutParams &amp;params={})</div><div class="ttdef"><b>Definition</b> <a href="rgw__bucket_8cc_source.html#l02615">rgw_bucket.cc:2615</a></div></div>
<div class="ttc" id="aclass_r_g_w_bucket_ctl_html_afc598f8b541c77ea48f2f389a0369cd9"><div class="ttname"><a href="class_r_g_w_bucket_ctl.html#afc598f8b541c77ea48f2f389a0369cd9">RGWBucketCtl::get_sync_policy_handler</a></div><div class="ttdeci">int get_sync_policy_handler(std::optional&lt; rgw_zone_id &gt; zone, std::optional&lt; rgw_bucket &gt; bucket, RGWBucketSyncPolicyHandlerRef *phandler, optional_yield y, const DoutPrefixProvider *dpp)</div><div class="ttdef"><b>Definition</b> <a href="rgw__bucket_8cc_source.html#l02933">rgw_bucket.cc:2933</a></div></div>
<div class="ttc" id="aclass_r_g_w_data_sync_status_manager_html"><div class="ttname"><a href="class_r_g_w_data_sync_status_manager.html">RGWDataSyncStatusManager</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__data__sync_8h_source.html#l00391">rgw_data_sync.h:391</a></div></div>
<div class="ttc" id="aclass_r_g_w_get_bucket_stats___c_b_html"><div class="ttname"><a href="class_r_g_w_get_bucket_stats___c_b.html">RGWGetBucketStats_CB</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l00080">rgw_sal.h:80</a></div></div>
<div class="ttc" id="aclass_r_g_w_get_data_c_b_html"><div class="ttname"><a href="class_r_g_w_get_data_c_b.html">RGWGetDataCB</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l00051">rgw_sal.h:51</a></div></div>
<div class="ttc" id="aclass_r_g_w_get_user_stats___c_b_html"><div class="ttname"><a href="class_r_g_w_get_user_stats___c_b.html">RGWGetUserStats_CB</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l00093">rgw_sal.h:93</a></div></div>
<div class="ttc" id="aclass_r_g_w_l_c_html_ae217a0af681e59a9e935bd90d9c15c14"><div class="ttname"><a href="class_r_g_w_l_c.html#ae217a0af681e59a9e935bd90d9c15c14">RGWLC::remove_bucket_config</a></div><div class="ttdeci">int remove_bucket_config(rgw::sal::Bucket *bucket, const rgw::sal::Attrs &amp;bucket_attrs)</div><div class="ttdef"><b>Definition</b> <a href="rgw__lc_8cc_source.html#l02410">rgw_lc.cc:2410</a></div></div>
<div class="ttc" id="aclass_r_g_w_metadata_manager_html_a2696ed0a42286f559e89fd6f1e611812"><div class="ttname"><a href="class_r_g_w_metadata_manager.html#a2696ed0a42286f559e89fd6f1e611812">RGWMetadataManager::remove</a></div><div class="ttdeci">int remove(std::string &amp;metadata_key, optional_yield y, const DoutPrefixProvider *dpp)</div><div class="ttdef"><b>Definition</b> <a href="rgw__metadata_8cc_source.html#l00736">rgw_metadata.cc:736</a></div></div>
<div class="ttc" id="aclass_r_g_w_metadata_manager_html_a757181d77c553ec4f79e4ec3c128f7f5"><div class="ttname"><a href="class_r_g_w_metadata_manager.html#a757181d77c553ec4f79e4ec3c128f7f5">RGWMetadataManager::list_keys_complete</a></div><div class="ttdeci">void list_keys_complete(void *handle)</div><div class="ttdef"><b>Definition</b> <a href="rgw__metadata_8cc_source.html#l00832">rgw_metadata.cc:832</a></div></div>
<div class="ttc" id="aclass_r_g_w_metadata_manager_html_a9274bb0330b4c57b5a40136ea529db33"><div class="ttname"><a href="class_r_g_w_metadata_manager.html#a9274bb0330b4c57b5a40136ea529db33">RGWMetadataManager::get_marker</a></div><div class="ttdeci">std::string get_marker(void *handle)</div><div class="ttdef"><b>Definition</b> <a href="rgw__metadata_8cc_source.html#l00842">rgw_metadata.cc:842</a></div></div>
<div class="ttc" id="aclass_r_g_w_metadata_manager_html_a94f8cf34ad7d7bfb6e99a20eee381cb5"><div class="ttname"><a href="class_r_g_w_metadata_manager.html#a94f8cf34ad7d7bfb6e99a20eee381cb5">RGWMetadataManager::list_keys_init</a></div><div class="ttdeci">int list_keys_init(const DoutPrefixProvider *dpp, const std::string &amp;section, void **phandle)</div></div>
<div class="ttc" id="aclass_r_g_w_metadata_manager_html_acc29dd4e5961fe0d523310ea4c1eea4a"><div class="ttname"><a href="class_r_g_w_metadata_manager.html#acc29dd4e5961fe0d523310ea4c1eea4a">RGWMetadataManager::list_keys_next</a></div><div class="ttdeci">int list_keys_next(const DoutPrefixProvider *dpp, void *handle, int max, std::list&lt; std::string &gt; &amp;keys, bool *truncated)</div><div class="ttdef"><b>Definition</b> <a href="rgw__metadata_8cc_source.html#l00823">rgw_metadata.cc:823</a></div></div>
<div class="ttc" id="aclass_r_g_w_obj_manifest_1_1obj__iterator_html"><div class="ttname"><a href="class_r_g_w_obj_manifest_1_1obj__iterator.html">RGWObjManifest::obj_iterator</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__obj__manifest_8h_source.html#l00481">rgw_obj_manifest.h:481</a></div></div>
<div class="ttc" id="aclass_r_g_w_obj_manifest_1_1obj__iterator_html_a064ea33fce18e542ed71731d1cad9c30"><div class="ttname"><a href="class_r_g_w_obj_manifest_1_1obj__iterator.html#a064ea33fce18e542ed71731d1cad9c30">RGWObjManifest::obj_iterator::get_location</a></div><div class="ttdeci">const rgw_obj_select &amp; get_location()</div><div class="ttdef"><b>Definition</b> <a href="rgw__obj__manifest_8h_source.html#l00518">rgw_obj_manifest.h:518</a></div></div>
<div class="ttc" id="aclass_r_g_w_obj_manifest_html"><div class="ttname"><a href="class_r_g_w_obj_manifest.html">RGWObjManifest</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__obj__manifest_8h_source.html#l00177">rgw_obj_manifest.h:177</a></div></div>
<div class="ttc" id="aclass_r_g_w_obj_manifest_html_a1ffd4d0344f4951313d763bd0421daac"><div class="ttname"><a href="class_r_g_w_obj_manifest.html#a1ffd4d0344f4951313d763bd0421daac">RGWObjManifest::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdef"><b>Definition</b> <a href="rgw__obj__manifest_8h_source.html#l00365">rgw_obj_manifest.h:365</a></div></div>
<div class="ttc" id="aclass_r_g_w_obj_manifest_html_a7942c439ac6dbf41c055e0d7431cc4ed"><div class="ttname"><a href="class_r_g_w_obj_manifest.html#a7942c439ac6dbf41c055e0d7431cc4ed">RGWObjManifest::get_obj</a></div><div class="ttdeci">const rgw_obj &amp; get_obj() const</div><div class="ttdef"><b>Definition</b> <a href="rgw__obj__manifest_8h_source.html#l00398">rgw_obj_manifest.h:398</a></div></div>
<div class="ttc" id="aclass_r_g_w_obj_manifest_html_acd322607ce983203f80ab1518a531f4c"><div class="ttname"><a href="class_r_g_w_obj_manifest.html#acd322607ce983203f80ab1518a531f4c">RGWObjManifest::obj_end</a></div><div class="ttdeci">obj_iterator obj_end(const DoutPrefixProvider *dpp) const</div><div class="ttdef"><b>Definition</b> <a href="rgw__obj__manifest_8h_source.html#l00567">rgw_obj_manifest.h:567</a></div></div>
<div class="ttc" id="aclass_r_g_w_obj_manifest_html_ae2f4e68b09b46a0df516c63b2edbcffb"><div class="ttname"><a href="class_r_g_w_obj_manifest.html#ae2f4e68b09b46a0df516c63b2edbcffb">RGWObjManifest::obj_begin</a></div><div class="ttdeci">obj_iterator obj_begin(const DoutPrefixProvider *dpp) const</div><div class="ttdef"><b>Definition</b> <a href="rgw__obj__manifest_8h_source.html#l00566">rgw_obj_manifest.h:566</a></div></div>
<div class="ttc" id="aclass_r_g_w_obj_tags_html"><div class="ttname"><a href="class_r_g_w_obj_tags.html">RGWObjTags</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__tag_8h_source.html#l00011">rgw_tag.h:12</a></div></div>
<div class="ttc" id="aclass_r_g_w_object_ctx_html"><div class="ttname"><a href="class_r_g_w_object_ctx.html">RGWObjectCtx</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8h_source.html#l00187">rgw_rados.h:187</a></div></div>
<div class="ttc" id="aclass_r_g_w_object_ctx_html_a6a46ca55fb85bb5e6c13d530dbba1aa7"><div class="ttname"><a href="class_r_g_w_object_ctx.html#a6a46ca55fb85bb5e6c13d530dbba1aa7">RGWObjectCtx::invalidate</a></div><div class="ttdeci">void invalidate(const rgw_obj &amp;obj)</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8cc_source.html#l00275">rgw_rados.cc:275</a></div></div>
<div class="ttc" id="aclass_r_g_w_period_html_a879883842711f1053e06f46610e23b94"><div class="ttname"><a href="class_r_g_w_period.html#a879883842711f1053e06f46610e23b94">RGWPeriod::get_config</a></div><div class="ttdeci">RGWPeriodConfig &amp; get_config()</div><div class="ttdef"><b>Definition</b> <a href="rgw__zone_8h_source.html#l01281">rgw_zone.h:1281</a></div></div>
<div class="ttc" id="aclass_r_g_w_pub_sub_1_1_bucket_html"><div class="ttname"><a href="class_r_g_w_pub_sub_1_1_bucket.html">RGWPubSub::Bucket</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__pubsub_8h_source.html#l00637">rgw_pubsub.h:637</a></div></div>
<div class="ttc" id="aclass_r_g_w_pub_sub_1_1_bucket_html_a363ba029ca4b82ab556db48123ae7ef0"><div class="ttname"><a href="class_r_g_w_pub_sub_1_1_bucket.html#a363ba029ca4b82ab556db48123ae7ef0">RGWPubSub::Bucket::remove_notifications</a></div><div class="ttdeci">int remove_notifications(const DoutPrefixProvider *dpp, optional_yield y)</div><div class="ttdef"><b>Definition</b> <a href="rgw__pubsub_8cc_source.html#l00636">rgw_pubsub.cc:636</a></div></div>
<div class="ttc" id="aclass_r_g_w_pub_sub_html"><div class="ttname"><a href="class_r_g_w_pub_sub.html">RGWPubSub</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__pubsub_8h_source.html#l00598">rgw_pubsub.h:599</a></div></div>
<div class="ttc" id="aclass_r_g_w_r_e_s_t_conn_html_a019e97bf205f671fdb89bd47035e316e"><div class="ttname"><a href="class_r_g_w_r_e_s_t_conn.html#a019e97bf205f671fdb89bd47035e316e">RGWRESTConn::forward</a></div><div class="ttdeci">int forward(const DoutPrefixProvider *dpp, const rgw_user &amp;uid, req_info &amp;info, obj_version *objv, size_t max_response, bufferlist *inbl, bufferlist *outbl, optional_yield y)</div><div class="ttdef"><b>Definition</b> <a href="rgw__rest__conn_8cc_source.html#l00132">rgw_rest_conn.cc:132</a></div></div>
<div class="ttc" id="aclass_r_g_w_r_e_s_t_conn_html_ac2784b100e6b688a789640a105ce1f37"><div class="ttname"><a href="class_r_g_w_r_e_s_t_conn.html#ac2784b100e6b688a789640a105ce1f37">RGWRESTConn::forward_iam_request</a></div><div class="ttdeci">int forward_iam_request(const DoutPrefixProvider *dpp, const RGWAccessKey &amp;key, req_info &amp;info, obj_version *objv, size_t max_response, bufferlist *inbl, bufferlist *outbl, optional_yield y)</div><div class="ttdef"><b>Definition</b> <a href="rgw__rest__conn_8cc_source.html#l00150">rgw_rest_conn.cc:150</a></div></div>
<div class="ttc" id="aclass_r_g_w_rados_1_1_bucket_1_1_list_html"><div class="ttname"><a href="class_r_g_w_rados_1_1_bucket_1_1_list.html">RGWRados::Bucket::List</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8h_source.html#l00967">rgw_rados.h:967</a></div></div>
<div class="ttc" id="aclass_r_g_w_rados_1_1_bucket_1_1_list_html_a1520a9c73d0f32dcc0a875c1e6d34e5f"><div class="ttname"><a href="class_r_g_w_rados_1_1_bucket_1_1_list.html#a1520a9c73d0f32dcc0a875c1e6d34e5f">RGWRados::Bucket::List::list_objects</a></div><div class="ttdeci">int list_objects(const DoutPrefixProvider *dpp, int64_t max, std::vector&lt; rgw_bucket_dir_entry &gt; *result, std::map&lt; std::string, bool &gt; *common_prefixes, bool *is_truncated, optional_yield y)</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8h_source.html#l01013">rgw_rados.h:1013</a></div></div>
<div class="ttc" id="aclass_r_g_w_rados_1_1_bucket_1_1_list_html_a39723a564ffcaec30e6648791bb9506f"><div class="ttname"><a href="class_r_g_w_rados_1_1_bucket_1_1_list.html#a39723a564ffcaec30e6648791bb9506f">RGWRados::Bucket::List::get_next_marker</a></div><div class="ttdeci">rgw_obj_key &amp; get_next_marker()</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8h_source.html#l01026">rgw_rados.h:1026</a></div></div>
<div class="ttc" id="aclass_r_g_w_rados_1_1_bucket_1_1_list_html_a6428a047e7ddf42156a3182234c7deeb"><div class="ttname"><a href="class_r_g_w_rados_1_1_bucket_1_1_list.html#a6428a047e7ddf42156a3182234c7deeb">RGWRados::Bucket::List::params</a></div><div class="ttdeci">struct RGWRados::Bucket::List::Params params</div></div>
<div class="ttc" id="aclass_r_g_w_rados_1_1_bucket_html"><div class="ttname"><a href="class_r_g_w_rados_1_1_bucket.html">RGWRados::Bucket</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8h_source.html#l00876">rgw_rados.h:876</a></div></div>
<div class="ttc" id="aclass_r_g_w_rados_1_1_bucket_html_ac23dd48c9cec3a7b0f3975dce571753b"><div class="ttname"><a href="class_r_g_w_rados_1_1_bucket.html#ac23dd48c9cec3a7b0f3975dce571753b">RGWRados::Bucket::set_shard_id</a></div><div class="ttdeci">void set_shard_id(int id)</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8h_source.html#l00892">rgw_rados.h:892</a></div></div>
<div class="ttc" id="aclass_r_g_w_rados_1_1_object_html"><div class="ttname"><a href="class_r_g_w_rados_1_1_object.html">RGWRados::Object</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8h_source.html#l00656">rgw_rados.h:656</a></div></div>
<div class="ttc" id="aclass_r_g_w_rados_1_1_object_html_a26e5ea31f261ed6ce4bca428264ea70a"><div class="ttname"><a href="class_r_g_w_rados_1_1_object.html#a26e5ea31f261ed6ce4bca428264ea70a">RGWRados::Object::get_manifest</a></div><div class="ttdeci">int get_manifest(const DoutPrefixProvider *dpp, RGWObjManifest **pmanifest, optional_yield y)</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8cc_source.html#l05678">rgw_rados.cc:5678</a></div></div>
<div class="ttc" id="aclass_r_g_w_rados_1_1_object_html_aa2aa41fbde8ffd7db162585fc530cef9"><div class="ttname"><a href="class_r_g_w_rados_1_1_object.html#aa2aa41fbde8ffd7db162585fc530cef9">RGWRados::Object::set_versioning_disabled</a></div><div class="ttdeci">void set_versioning_disabled(bool status)</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8h_source.html#l00706">rgw_rados.h:706</a></div></div>
<div class="ttc" id="aclass_r_g_w_rados_html"><div class="ttname"><a href="class_r_g_w_rados.html">RGWRados</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8h_source.html#l00333">rgw_rados.h:334</a></div></div>
<div class="ttc" id="aclass_r_g_w_rados_html_a0784e49542fdeae286b67d4d6808dcc5"><div class="ttname"><a href="class_r_g_w_rados.html#a0784e49542fdeae286b67d4d6808dcc5">RGWRados::read_usage</a></div><div class="ttdeci">int read_usage(const DoutPrefixProvider *dpp, const rgw_user &amp;user, const std::string &amp;bucket_name, uint64_t start_epoch, uint64_t end_epoch, uint32_t max_entries, bool *is_truncated, RGWUsageIter &amp;read_iter, std::map&lt; rgw_user_bucket, rgw_usage_log_entry &gt; &amp;usage)</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8cc_source.html#l01637">rgw_rados.cc:1637</a></div></div>
<div class="ttc" id="aclass_r_g_w_rados_html_a0a82b9b01e1cc01505d8c1ed0062dfd1"><div class="ttname"><a href="class_r_g_w_rados.html#a0a82b9b01e1cc01505d8c1ed0062dfd1">RGWRados::update_gc_chain</a></div><div class="ttdeci">void update_gc_chain(const DoutPrefixProvider *dpp, rgw_obj &amp;head_obj, RGWObjManifest &amp;manifest, cls_rgw_obj_chain *chain)</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8cc_source.html#l04959">rgw_rados.cc:4959</a></div></div>
<div class="ttc" id="aclass_r_g_w_rados_html_a0d955e0ddbcd8eb18e6e926a04570a21"><div class="ttname"><a href="class_r_g_w_rados.html#a0d955e0ddbcd8eb18e6e926a04570a21">RGWRados::send_chain_to_gc</a></div><div class="ttdeci">std::tuple&lt; int, std::optional&lt; cls_rgw_obj_chain &gt; &gt; send_chain_to_gc(cls_rgw_obj_chain &amp;chain, const std::string &amp;tag)</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8cc_source.html#l04973">rgw_rados.cc:4973</a></div></div>
<div class="ttc" id="aclass_r_g_w_rados_html_a0daf72258a2053351f8cdd14d1e732c8"><div class="ttname"><a href="class_r_g_w_rados.html#a0daf72258a2053351f8cdd14d1e732c8">RGWRados::create_bucket</a></div><div class="ttdeci">int create_bucket(const RGWUserInfo &amp;owner, rgw_bucket &amp;bucket, const std::string &amp;zonegroup_id, const rgw_placement_rule &amp;placement_rule, const std::string &amp;swift_ver_location, const RGWQuotaInfo *pquota_info, std::map&lt; std::string, bufferlist &gt; &amp;attrs, RGWBucketInfo &amp;bucket_info, obj_version *pobjv, obj_version *pep_objv, ceph::real_time creation_time, rgw_bucket *master_bucket, uint32_t *master_num_shards, optional_yield y, const DoutPrefixProvider *dpp, bool exclusive=true)</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8cc_source.html#l02290">rgw_rados.cc:2290</a></div></div>
<div class="ttc" id="aclass_r_g_w_rados_html_a0fab65f42ddb3061896a730a01881d43"><div class="ttname"><a href="class_r_g_w_rados.html#a0fab65f42ddb3061896a730a01881d43">RGWRados::obj_to_raw</a></div><div class="ttdeci">bool obj_to_raw(const rgw_placement_rule &amp;placement_rule, const rgw_obj &amp;obj, rgw_raw_obj *raw_obj)</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8cc_source.html#l02409">rgw_rados.cc:2409</a></div></div>
<div class="ttc" id="aclass_r_g_w_rados_html_a18292448539dcec32dbf15d808818160"><div class="ttname"><a href="class_r_g_w_rados.html#a18292448539dcec32dbf15d808818160">RGWRados::trim_usage</a></div><div class="ttdeci">int trim_usage(const DoutPrefixProvider *dpp, const rgw_user &amp;user, const std::string &amp;bucket_name, uint64_t start_epoch, uint64_t end_epoch)</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8cc_source.html#l01681">rgw_rados.cc:1681</a></div></div>
<div class="ttc" id="aclass_r_g_w_rados_html_a1bb9dabb53a12a4b86323db810409296"><div class="ttname"><a href="class_r_g_w_rados.html#a1bb9dabb53a12a4b86323db810409296">RGWRados::register_to_service_map</a></div><div class="ttdeci">int register_to_service_map(const DoutPrefixProvider *dpp, const std::string &amp;daemon_type, const std::map&lt; std::string, std::string &gt; &amp;meta)</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8cc_source.html#l01140">rgw_rados.cc:1140</a></div></div>
<div class="ttc" id="aclass_r_g_w_rados_html_a1c8c4c9b1621ba7b0eeb70eb93a9e3ba"><div class="ttname"><a href="class_r_g_w_rados.html#a1c8c4c9b1621ba7b0eeb70eb93a9e3ba">RGWRados::set_prefetch_data</a></div><div class="ttdeci">void set_prefetch_data(void *ctx, const rgw_obj &amp;obj)</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8h_source.html#l01330">rgw_rados.h:1330</a></div></div>
<div class="ttc" id="aclass_r_g_w_rados_html_a251034ea68698a2f3166b8a4471e2a73"><div class="ttname"><a href="class_r_g_w_rados.html#a251034ea68698a2f3166b8a4471e2a73">RGWRados::set_atomic</a></div><div class="ttdeci">void set_atomic(void *ctx, rgw_obj &amp;obj)</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8h_source.html#l01326">rgw_rados.h:1326</a></div></div>
<div class="ttc" id="aclass_r_g_w_rados_html_a270242938692a80a723599cd4c39e1c3"><div class="ttname"><a href="class_r_g_w_rados.html#a270242938692a80a723599cd4c39e1c3">RGWRados::get_obj_head_ioctx</a></div><div class="ttdeci">int get_obj_head_ioctx(const DoutPrefixProvider *dpp, const RGWBucketInfo &amp;bucket_info, const rgw_obj &amp;obj, librados::IoCtx *ioctx)</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8cc_source.html#l02421">rgw_rados.cc:2421</a></div></div>
<div class="ttc" id="aclass_r_g_w_rados_html_a37788b697bc88b3d2f6ef16257ca69b1"><div class="ttname"><a href="class_r_g_w_rados.html#a37788b697bc88b3d2f6ef16257ca69b1">RGWRados::get_rados_handle</a></div><div class="ttdeci">librados::Rados * get_rados_handle()</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8cc_source.html#l09468">rgw_rados.cc:9468</a></div></div>
<div class="ttc" id="aclass_r_g_w_rados_html_a3b51d79d4a900f4326fd06af5b8cc4e5"><div class="ttname"><a href="class_r_g_w_rados.html#a3b51d79d4a900f4326fd06af5b8cc4e5">RGWRados::set_attrs</a></div><div class="ttdeci">int set_attrs(const DoutPrefixProvider *dpp, void *ctx, const RGWBucketInfo &amp;bucket_info, rgw_obj &amp;obj, std::map&lt; std::string, bufferlist &gt; &amp;attrs, std::map&lt; std::string, bufferlist &gt; *rmattrs, optional_yield y)</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8cc_source.html#l05933">rgw_rados.cc:5933</a></div></div>
<div class="ttc" id="aclass_r_g_w_rados_html_a3d2edb6fddca06f7bdf0ab61f1b8f49d"><div class="ttname"><a href="class_r_g_w_rados.html#a3d2edb6fddca06f7bdf0ab61f1b8f49d">RGWRados::list_raw_objects</a></div><div class="ttdeci">int list_raw_objects(const DoutPrefixProvider *dpp, const rgw_pool &amp;pool, const std::string &amp;prefix_filter, int max, RGWListRawObjsCtx &amp;ctx, std::list&lt; std::string &gt; &amp;oids, bool *is_truncated)</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8cc_source.html#l08197">rgw_rados.cc:8197</a></div></div>
<div class="ttc" id="aclass_r_g_w_rados_html_a4316d75a76710b4037aad84259c4aa3b"><div class="ttname"><a href="class_r_g_w_rados.html#a4316d75a76710b4037aad84259c4aa3b">RGWRados::bucket_rebuild_index</a></div><div class="ttdeci">int bucket_rebuild_index(const DoutPrefixProvider *dpp, RGWBucketInfo &amp;bucket_info)</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8cc_source.html#l05064">rgw_rados.cc:5064</a></div></div>
<div class="ttc" id="aclass_r_g_w_rados_html_a4765edbfe58a5f132640b6106bcb94af"><div class="ttname"><a href="class_r_g_w_rados.html#a4765edbfe58a5f132640b6106bcb94af">RGWRados::create_pool</a></div><div class="ttdeci">int create_pool(const DoutPrefixProvider *dpp, const rgw_pool &amp;pool)</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8cc_source.html#l02273">rgw_rados.cc:2273</a></div></div>
<div class="ttc" id="aclass_r_g_w_rados_html_a49113fae07221008dff4418deeafafd1"><div class="ttname"><a href="class_r_g_w_rados.html#a49113fae07221008dff4418deeafafd1">RGWRados::get_max_aligned_size</a></div><div class="ttdeci">void get_max_aligned_size(uint64_t size, uint64_t alignment, uint64_t *max_size)</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8cc_source.html#l00734">rgw_rados.cc:734</a></div></div>
<div class="ttc" id="aclass_r_g_w_rados_html_a49e81be41625202a57bb2cfc49139a4d"><div class="ttname"><a href="class_r_g_w_rados.html#a49e81be41625202a57bb2cfc49139a4d">RGWRados::get_bucket_stats_async</a></div><div class="ttdeci">int get_bucket_stats_async(const DoutPrefixProvider *dpp, RGWBucketInfo &amp;bucket_info, int shard_id, RGWGetBucketStats_CB *cb)</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8cc_source.html#l07873">rgw_rados.cc:7873</a></div></div>
<div class="ttc" id="aclass_r_g_w_rados_html_a4abbdfd958f02e94adafc481564119b8"><div class="ttname"><a href="class_r_g_w_rados.html#a4abbdfd958f02e94adafc481564119b8">RGWRados::append_async</a></div><div class="ttdeci">int append_async(const DoutPrefixProvider *dpp, rgw_raw_obj &amp;obj, size_t size, bufferlist &amp;bl)</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8cc_source.html#l08046">rgw_rados.cc:8046</a></div></div>
<div class="ttc" id="aclass_r_g_w_rados_html_a4ebd38995ad1e354c7a8c16ae4735d1f"><div class="ttname"><a href="class_r_g_w_rados.html#a4ebd38995ad1e354c7a8c16ae4735d1f">RGWRados::delete_raw_obj</a></div><div class="ttdeci">int delete_raw_obj(const DoutPrefixProvider *dpp, const rgw_raw_obj &amp;obj)</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8cc_source.html#l05384">rgw_rados.cc:5384</a></div></div>
<div class="ttc" id="aclass_r_g_w_rados_html_a5a9225b554b40c193e3a6f61d04f4472"><div class="ttname"><a href="class_r_g_w_rados.html#a5a9225b554b40c193e3a6f61d04f4472">RGWRados::bucket_check_index</a></div><div class="ttdeci">int bucket_check_index(const DoutPrefixProvider *dpp, RGWBucketInfo &amp;bucket_info, std::map&lt; RGWObjCategory, RGWStorageStats &gt; *existing_stats, std::map&lt; RGWObjCategory, RGWStorageStats &gt; *calculated_stats)</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8cc_source.html#l05030">rgw_rados.cc:5030</a></div></div>
<div class="ttc" id="aclass_r_g_w_rados_html_a6c4a3d20b19410f7088c7c034938a9c8"><div class="ttname"><a href="class_r_g_w_rados.html#a6c4a3d20b19410f7088c7c034938a9c8">RGWRados::check_bucket_shards</a></div><div class="ttdeci">int check_bucket_shards(const RGWBucketInfo &amp;bucket_info, const rgw_bucket &amp;bucket, uint64_t num_objs, const DoutPrefixProvider *dpp)</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8cc_source.html#l09354">rgw_rados.cc:9354</a></div></div>
<div class="ttc" id="aclass_r_g_w_rados_html_a789279e801470007df47c2df748449cd"><div class="ttname"><a href="class_r_g_w_rados.html#a789279e801470007df47c2df748449cd">RGWRados::check_quota</a></div><div class="ttdeci">int check_quota(const DoutPrefixProvider *dpp, const rgw_user &amp;bucket_owner, rgw_bucket &amp;bucket, RGWQuotaInfo &amp;user_quota, RGWQuotaInfo &amp;bucket_quota, uint64_t obj_size, optional_yield y, bool check_size_only=false)</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8cc_source.html#l09422">rgw_rados.cc:9422</a></div></div>
<div class="ttc" id="aclass_r_g_w_rados_html_a79419ae43c04ef8f3e1c44a712f5b113"><div class="ttname"><a href="class_r_g_w_rados.html#a79419ae43c04ef8f3e1c44a712f5b113">RGWRados::open_pool_ctx</a></div><div class="ttdeci">int open_pool_ctx(const DoutPrefixProvider *dpp, const rgw_pool &amp;pool, librados::IoCtx &amp;io_ctx, bool mostly_omap)</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8cc_source.html#l01440">rgw_rados.cc:1440</a></div></div>
<div class="ttc" id="aclass_r_g_w_rados_html_a7b3003e35dc6a17e0f933649df724c7c"><div class="ttname"><a href="class_r_g_w_rados.html#a7b3003e35dc6a17e0f933649df724c7c">RGWRados::bi_remove</a></div><div class="ttdeci">int bi_remove(const DoutPrefixProvider *dpp, BucketShard &amp;bs)</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8cc_source.html#l08360">rgw_rados.cc:8360</a></div></div>
<div class="ttc" id="aclass_r_g_w_rados_html_a7f60c3201714fedff936bd4ce7958860"><div class="ttname"><a href="class_r_g_w_rados.html#a7f60c3201714fedff936bd4ce7958860">RGWRados::delete_obj_aio</a></div><div class="ttdeci">int delete_obj_aio(const DoutPrefixProvider *dpp, const rgw_obj &amp;obj, RGWBucketInfo &amp;info, RGWObjState *astate, std::list&lt; librados::AioCompletion * &gt; &amp;handles, bool keep_index_consistent, optional_yield y)</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8cc_source.html#l09499">rgw_rados.cc:9499</a></div></div>
<div class="ttc" id="aclass_r_g_w_rados_html_a87f0abb09153b85fddc998de116b22c1"><div class="ttname"><a href="class_r_g_w_rados.html#a87f0abb09153b85fddc998de116b22c1">RGWRados::put_bucket_instance_info</a></div><div class="ttdeci">int put_bucket_instance_info(RGWBucketInfo &amp;info, bool exclusive, ceph::real_time mtime, std::map&lt; std::string, bufferlist &gt; *pattrs, const DoutPrefixProvider *dpp)</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8cc_source.html#l07953">rgw_rados.cc:7953</a></div></div>
<div class="ttc" id="aclass_r_g_w_rados_html_a89bbb3c067fafd08c870e54665f620a0"><div class="ttname"><a href="class_r_g_w_rados.html#a89bbb3c067fafd08c870e54665f620a0">RGWRados::gen_rand_obj_instance_name</a></div><div class="ttdeci">void gen_rand_obj_instance_name(rgw_obj_key *target_key)</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8cc_source.html#l07601">rgw_rados.cc:7601</a></div></div>
<div class="ttc" id="aclass_r_g_w_rados_html_a8c1e1eac63219baa722a928e2e98b9fd"><div class="ttname"><a href="class_r_g_w_rados.html#a8c1e1eac63219baa722a928e2e98b9fd">RGWRados::get_max_chunk_size</a></div><div class="ttdeci">int get_max_chunk_size(const rgw_pool &amp;pool, uint64_t *max_chunk_size, const DoutPrefixProvider *dpp, uint64_t *palignment=nullptr)</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8cc_source.html#l00749">rgw_rados.cc:749</a></div></div>
<div class="ttc" id="aclass_r_g_w_rados_html_a8c60192c924847afb9965e429e48f9a9"><div class="ttname"><a href="class_r_g_w_rados.html#a8c60192c924847afb9965e429e48f9a9">RGWRados::finalize</a></div><div class="ttdeci">void finalize()</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8cc_source.html#l01033">rgw_rados.cc:1033</a></div></div>
<div class="ttc" id="aclass_r_g_w_rados_html_a8cf1e4fcaea4a0f05e55815f5254abcf"><div class="ttname"><a href="class_r_g_w_rados.html#a8cf1e4fcaea4a0f05e55815f5254abcf">RGWRados::get_obj_data_pool</a></div><div class="ttdeci">bool get_obj_data_pool(const rgw_placement_rule &amp;placement_rule, const rgw_obj &amp;obj, rgw_pool *pool)</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8cc_source.html#l02404">rgw_rados.cc:2404</a></div></div>
<div class="ttc" id="aclass_r_g_w_rados_html_a914979dccfecb62a2625194129913fff"><div class="ttname"><a href="class_r_g_w_rados.html#a914979dccfecb62a2625194129913fff">RGWRados::get_data_sync_manager</a></div><div class="ttdeci">RGWDataSyncStatusManager * get_data_sync_manager(const rgw_zone_id &amp;source_zone)</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8cc_source.html#l00688">rgw_rados.cc:688</a></div></div>
<div class="ttc" id="aclass_r_g_w_rados_html_a9366df390b61d5ddf0370962c05ef067"><div class="ttname"><a href="class_r_g_w_rados.html#a9366df390b61d5ddf0370962c05ef067">RGWRados::get_lc</a></div><div class="ttdeci">RGWLC * get_lc()</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8h_source.html#l00483">rgw_rados.h:483</a></div></div>
<div class="ttc" id="aclass_r_g_w_rados_html_a9689af09760a1779f668b9e685b066a2"><div class="ttname"><a href="class_r_g_w_rados.html#a9689af09760a1779f668b9e685b066a2">RGWRados::set_store</a></div><div class="ttdeci">void set_store(rgw::sal::RadosStore *_store)</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8h_source.html#l00531">rgw_rados.h:531</a></div></div>
<div class="ttc" id="aclass_r_g_w_rados_html_a99297dd3fbdd494630d73fdf1a9b7055"><div class="ttname"><a href="class_r_g_w_rados.html#a99297dd3fbdd494630d73fdf1a9b7055">RGWRados::update_containers_stats</a></div><div class="ttdeci">int update_containers_stats(std::map&lt; std::string, RGWBucketEnt &gt; &amp;m, const DoutPrefixProvider *dpp)</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8cc_source.html#l08002">rgw_rados.cc:8002</a></div></div>
<div class="ttc" id="aclass_r_g_w_rados_html_a9e1bfad2bb7eb7a76f99185d3e0b3b5f"><div class="ttname"><a href="class_r_g_w_rados.html#a9e1bfad2bb7eb7a76f99185d3e0b3b5f">RGWRados::remove_objs_from_index</a></div><div class="ttdeci">int remove_objs_from_index(const DoutPrefixProvider *dpp, RGWBucketInfo &amp;bucket_info, std::list&lt; rgw_obj_index_key &gt; &amp;oid_list)</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8cc_source.html#l09144">rgw_rados.cc:9144</a></div></div>
<div class="ttc" id="aclass_r_g_w_rados_html_aa200401edcbfd9360704769e0defa575"><div class="ttname"><a href="class_r_g_w_rados.html#aa200401edcbfd9360704769e0defa575">RGWRados::lc_pool_ctx</a></div><div class="ttdeci">librados::IoCtx lc_pool_ctx</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8h_source.html#l00429">rgw_rados.h:429</a></div></div>
<div class="ttc" id="aclass_r_g_w_rados_html_aa5274d07a594767da50a8136c565fe36"><div class="ttname"><a href="class_r_g_w_rados.html#aa5274d07a594767da50a8136c565fe36">RGWRados::set_buckets_enabled</a></div><div class="ttdeci">int set_buckets_enabled(std::vector&lt; rgw_bucket &gt; &amp;buckets, bool enabled, const DoutPrefixProvider *dpp)</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8cc_source.html#l04882">rgw_rados.cc:4882</a></div></div>
<div class="ttc" id="aclass_r_g_w_rados_html_aa5f7720d778b74a2f8567f9a55ed5824"><div class="ttname"><a href="class_r_g_w_rados.html#aa5f7720d778b74a2f8567f9a55ed5824">RGWRados::check_bucket_empty</a></div><div class="ttdeci">int check_bucket_empty(const DoutPrefixProvider *dpp, RGWBucketInfo &amp;bucket_info, optional_yield y)</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8cc_source.html#l04742">rgw_rados.cc:4742</a></div></div>
<div class="ttc" id="aclass_r_g_w_rados_html_aab93da5e1ac5cbad6a7e30c7847dab90"><div class="ttname"><a href="class_r_g_w_rados.html#aab93da5e1ac5cbad6a7e30c7847dab90">RGWRados::get_bucket_stats</a></div><div class="ttdeci">int get_bucket_stats(const DoutPrefixProvider *dpp, RGWBucketInfo &amp;bucket_info, int shard_id, std::string *bucket_ver, std::string *master_ver, std::map&lt; RGWObjCategory, RGWStorageStats &gt; &amp;stats, std::string *max_marker, bool *syncstopped=NULL)</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8cc_source.html#l07794">rgw_rados.cc:7794</a></div></div>
<div class="ttc" id="aclass_r_g_w_rados_html_ab47feb5daf10bf8479b08a8a70a829f1"><div class="ttname"><a href="class_r_g_w_rados.html#ab47feb5daf10bf8479b08a8a70a829f1">RGWRados::delete_bucket</a></div><div class="ttdeci">int delete_bucket(RGWBucketInfo &amp;bucket_info, RGWObjVersionTracker &amp;objv_tracker, optional_yield y, const DoutPrefixProvider *dpp, bool check_empty=true)</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8cc_source.html#l04787">rgw_rados.cc:4787</a></div></div>
<div class="ttc" id="aclass_r_g_w_rados_html_ab73d207257cb8829de00314dd201661c"><div class="ttname"><a href="class_r_g_w_rados.html#ab73d207257cb8829de00314dd201661c">RGWRados::swift_versioning_restore</a></div><div class="ttdeci">int swift_versioning_restore(RGWObjectCtx &amp;obj_ctx, const rgw_user &amp;user, rgw::sal::Bucket *bucket, rgw::sal::Object *obj, bool &amp;restored, const DoutPrefixProvider *dpp)</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8cc_source.html#l02988">rgw_rados.cc:2988</a></div></div>
<div class="ttc" id="aclass_r_g_w_rados_html_abdb3c2c76b2abe59e5e0dce9dae67245"><div class="ttname"><a href="class_r_g_w_rados.html#abdb3c2c76b2abe59e5e0dce9dae67245">RGWRados::copy_obj</a></div><div class="ttdeci">int copy_obj(RGWObjectCtx &amp;obj_ctx, const rgw_user &amp;user_id, req_info *info, const rgw_zone_id &amp;source_zone, rgw::sal::Object *dest_obj, rgw::sal::Object *src_obj, rgw::sal::Bucket *dest_bucket, rgw::sal::Bucket *src_bucket, const rgw_placement_rule &amp;dest_placement, ceph::real_time *src_mtime, ceph::real_time *mtime, const ceph::real_time *mod_ptr, const ceph::real_time *unmod_ptr, bool high_precision_time, const char *if_match, const char *if_nomatch, AttrsMod attrs_mod, bool copy_if_newer, std::map&lt; std::string, bufferlist &gt; &amp;attrs, RGWObjCategory category, uint64_t olh_epoch, ceph::real_time delete_at, std::string *version_id, std::string *ptag, std::string *petag, void(*progress_cb)(off_t, void *), void *progress_data, const DoutPrefixProvider *dpp, optional_yield y)</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8cc_source.html#l04299">rgw_rados.cc:4299</a></div></div>
<div class="ttc" id="aclass_r_g_w_rados_html_abe87a9d8e37865ef56eacaf5b3a5db3f"><div class="ttname"><a href="class_r_g_w_rados.html#abe87a9d8e37865ef56eacaf5b3a5db3f">RGWRados::log_usage</a></div><div class="ttdeci">int log_usage(const DoutPrefixProvider *dpp, std::map&lt; rgw_user_bucket, RGWUsageBatch &gt; &amp;usage_info)</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8cc_source.html#l01593">rgw_rados.cc:1593</a></div></div>
<div class="ttc" id="aclass_r_g_w_rados_html_ac37e4a05a4e60fd6bfc45d6b8ca28680"><div class="ttname"><a href="class_r_g_w_rados.html#ac37e4a05a4e60fd6bfc45d6b8ca28680">RGWRados::delete_raw_obj_aio</a></div><div class="ttdeci">int delete_raw_obj_aio(const DoutPrefixProvider *dpp, const rgw_raw_obj &amp;obj, std::list&lt; librados::AioCompletion * &gt; &amp;handles)</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8cc_source.html#l09473">rgw_rados.cc:9473</a></div></div>
<div class="ttc" id="aclass_r_g_w_rados_html_ac5219da67ddba673b3c37a79e6960d4a"><div class="ttname"><a href="class_r_g_w_rados.html#ac5219da67ddba673b3c37a79e6960d4a">RGWRados::get_lc_pool_ctx</a></div><div class="ttdeci">librados::IoCtx * get_lc_pool_ctx()</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8h_source.html#l00520">rgw_rados.h:520</a></div></div>
<div class="ttc" id="aclass_r_g_w_rados_html_ac99076046de99b39713faee8152fa438"><div class="ttname"><a href="class_r_g_w_rados.html#ac99076046de99b39713faee8152fa438">RGWRados::get_cluster_fsid</a></div><div class="ttdeci">std::string get_cluster_fsid(const DoutPrefixProvider *dpp, optional_yield y)</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8cc_source.html#l02416">rgw_rados.cc:2416</a></div></div>
<div class="ttc" id="aclass_r_g_w_rados_html_acf6063a74d8174f965ace73d8c72d237"><div class="ttname"><a href="class_r_g_w_rados.html#acf6063a74d8174f965ace73d8c72d237">RGWRados::AttrsMod</a></div><div class="ttdeci">AttrsMod</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8h_source.html#l01060">rgw_rados.h:1060</a></div></div>
<div class="ttc" id="aclass_r_g_w_rados_html_ae88ce99d40a9a99d49c334f3e733cb97"><div class="ttname"><a href="class_r_g_w_rados.html#ae88ce99d40a9a99d49c334f3e733cb97">RGWRados::swift_versioning_copy</a></div><div class="ttdeci">int swift_versioning_copy(RGWObjectCtx &amp;obj_ctx, const rgw_user &amp;user, rgw::sal::Bucket *bucket, rgw::sal::Object *obj, const DoutPrefixProvider *dpp, optional_yield y)</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8cc_source.html#l02895">rgw_rados.cc:2895</a></div></div>
<div class="ttc" id="aclass_r_g_w_rados_html_ae9add832ace02bccc7179707fa4041a9"><div class="ttname"><a href="class_r_g_w_rados.html#ae9add832ace02bccc7179707fa4041a9">RGWRados::try_refresh_bucket_info</a></div><div class="ttdeci">int try_refresh_bucket_info(RGWBucketInfo &amp;info, ceph::real_time *pmtime, const DoutPrefixProvider *dpp, std::map&lt; std::string, bufferlist &gt; *pattrs=nullptr)</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8cc_source.html#l07936">rgw_rados.cc:7936</a></div></div>
<div class="ttc" id="aclass_r_g_w_rados_html_aed942c76c427df4e51676c28511f4b66"><div class="ttname"><a href="class_r_g_w_rados.html#aed942c76c427df4e51676c28511f4b66">RGWRados::transition_obj</a></div><div class="ttdeci">int transition_obj(RGWObjectCtx &amp;obj_ctx, rgw::sal::Bucket *bucket, rgw::sal::Object &amp;obj, const rgw_placement_rule &amp;placement_rule, const real_time &amp;mtime, uint64_t olh_epoch, const DoutPrefixProvider *dpp, optional_yield y)</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8cc_source.html#l04687">rgw_rados.cc:4687</a></div></div>
<div class="ttc" id="aclass_r_g_w_rados_html_aeebc6a92f1fdaecdb6419cb4864b260d"><div class="ttname"><a href="class_r_g_w_rados.html#aeebc6a92f1fdaecdb6419cb4864b260d">RGWRados::get_gc</a></div><div class="ttdeci">RGWGC * get_gc()</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8h_source.html#l00487">rgw_rados.h:487</a></div></div>
<div class="ttc" id="aclass_r_g_w_rados_html_af14b3c8e2acf744a5a95f22a1535070a"><div class="ttname"><a href="class_r_g_w_rados.html#af14b3c8e2acf744a5a95f22a1535070a">RGWRados::set_compressed</a></div><div class="ttdeci">void set_compressed(void *ctx, const rgw_obj &amp;obj)</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8h_source.html#l01334">rgw_rados.h:1334</a></div></div>
<div class="ttc" id="aclass_r_g_w_rados_html_af3a6c5bc6a7f3d5a324dbe549c29e5b1"><div class="ttname"><a href="class_r_g_w_rados.html#af3a6c5bc6a7f3d5a324dbe549c29e5b1">RGWRados::delete_objs_inline</a></div><div class="ttdeci">void delete_objs_inline(const DoutPrefixProvider *dpp, cls_rgw_obj_chain &amp;chain, const std::string &amp;tag)</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8cc_source.html#l04982">rgw_rados.cc:4982</a></div></div>
<div class="ttc" id="aclass_r_g_w_rados_html_af59f605755c6edf54fb0370ec6420db8"><div class="ttname"><a href="class_r_g_w_rados.html#af59f605755c6edf54fb0370ec6420db8">RGWRados::cls_obj_set_bucket_tag_timeout</a></div><div class="ttdeci">int cls_obj_set_bucket_tag_timeout(const DoutPrefixProvider *dpp, RGWBucketInfo &amp;bucket_info, uint64_t timeout)</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8cc_source.html#l08511">rgw_rados.cc:8511</a></div></div>
<div class="ttc" id="aclass_r_g_w_rados_html_af9d762ec48a77cd4658eb103533ef720"><div class="ttname"><a href="class_r_g_w_rados.html#af9d762ec48a77cd4658eb103533ef720">RGWRados::get_obj_state</a></div><div class="ttdeci">int get_obj_state(const DoutPrefixProvider *dpp, RGWObjectCtx *rctx, const RGWBucketInfo &amp;bucket_info, const rgw_obj &amp;obj, RGWObjState **state, bool follow_olh, optional_yield y, bool assume_noent=false)</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8cc_source.html#l05666">rgw_rados.cc:5666</a></div></div>
<div class="ttc" id="aclass_r_g_w_realm_html"><div class="ttname"><a href="class_r_g_w_realm.html">RGWRealm</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__zone_8h_source.html#l01119">rgw_zone.h:1120</a></div></div>
<div class="ttc" id="aclass_r_g_w_s_i___config_key_html_ab4e9e8ad2a9747b02507b26064d5179b"><div class="ttname"><a href="class_r_g_w_s_i___config_key.html#ab4e9e8ad2a9747b02507b26064d5179b">RGWSI_ConfigKey::get</a></div><div class="ttdeci">virtual int get(const std::string &amp;key, bool secure, bufferlist *result)=0</div></div>
<div class="ttc" id="aclass_r_g_w_s_i___meta_backend_html_a4698ced0182afcc56eeedd5522109e34"><div class="ttname"><a href="class_r_g_w_s_i___meta_backend.html#a4698ced0182afcc56eeedd5522109e34">RGWSI_MetaBackend::alloc_ctx</a></div><div class="ttdeci">virtual Context * alloc_ctx()=0</div></div>
<div class="ttc" id="aclass_r_g_w_s_i___meta_backend_html_a86a3eca04757e4f69704a6de92987ec0"><div class="ttname"><a href="class_r_g_w_s_i___meta_backend.html#a86a3eca04757e4f69704a6de92987ec0">RGWSI_MetaBackend::get</a></div><div class="ttdeci">virtual int get(Context *ctx, const std::string &amp;key, GetParams &amp;params, RGWObjVersionTracker *objv_tracker, optional_yield y, const DoutPrefixProvider *dpp, bool get_raw_attrs=false)</div><div class="ttdef"><b>Definition</b> <a href="svc__meta__be_8cc_source.html#l00113">svc_meta_be.cc:113</a></div></div>
<div class="ttc" id="aclass_r_g_w_s_i___meta_backend_html_ade8817c5693cdd8b60e22754405e6943"><div class="ttname"><a href="class_r_g_w_s_i___meta_backend.html#ade8817c5693cdd8b60e22754405e6943">RGWSI_MetaBackend::put</a></div><div class="ttdeci">virtual int put(Context *ctx, const std::string &amp;key, PutParams &amp;params, RGWObjVersionTracker *objv_tracker, optional_yield y, const DoutPrefixProvider *dpp)</div><div class="ttdef"><b>Definition</b> <a href="svc__meta__be_8cc_source.html#l00124">svc_meta_be.cc:124</a></div></div>
<div class="ttc" id="aclass_r_g_w_s_i___quota_html_a814081473864c87188f2154725df58f1"><div class="ttname"><a href="class_r_g_w_s_i___quota.html#a814081473864c87188f2154725df58f1">RGWSI_Quota::get_user_quota</a></div><div class="ttdeci">const RGWQuotaInfo &amp; get_user_quota() const</div><div class="ttdef"><b>Definition</b> <a href="svc__quota_8cc_source.html#l00014">svc_quota.cc:14</a></div></div>
<div class="ttc" id="aclass_r_g_w_s_i___quota_html_afb0cfe91c734250baaa5aa6f207e5f66"><div class="ttname"><a href="class_r_g_w_s_i___quota.html#afb0cfe91c734250baaa5aa6f207e5f66">RGWSI_Quota::get_bucket_quota</a></div><div class="ttdeci">const RGWQuotaInfo &amp; get_bucket_quota() const</div><div class="ttdef"><b>Definition</b> <a href="svc__quota_8cc_source.html#l00009">svc_quota.cc:9</a></div></div>
<div class="ttc" id="aclass_r_g_w_s_i___role___r_a_d_o_s_html_a7765bd8d76c87e607559ed3259b17f90"><div class="ttname"><a href="class_r_g_w_s_i___role___r_a_d_o_s.html#a7765bd8d76c87e607559ed3259b17f90">RGWSI_Role_RADOS::get_be_handler</a></div><div class="ttdeci">RGWSI_MetaBackend_Handler * get_be_handler()</div><div class="ttdef"><b>Definition</b> <a href="svc__role__rados_8cc_source.html#l00050">svc_role_rados.cc:50</a></div></div>
<div class="ttc" id="aclass_r_g_w_s_i___role___r_a_d_o_s_html_a99769c826558561f454a3642ffc47a89"><div class="ttname"><a href="class_r_g_w_s_i___role___r_a_d_o_s.html#a99769c826558561f454a3642ffc47a89">RGWSI_Role_RADOS::svc</a></div><div class="ttdeci">struct RGWSI_Role_RADOS::Svc svc</div></div>
<div class="ttc" id="aclass_r_g_w_s_i___sys_obj_1_1_obj_html_a62a0d2cc8cce850e6be33b2e53390199"><div class="ttname"><a href="class_r_g_w_s_i___sys_obj_1_1_obj.html#a62a0d2cc8cce850e6be33b2e53390199">RGWSI_SysObj::Obj::omap</a></div><div class="ttdeci">OmapOp omap()</div><div class="ttdef"><b>Definition</b> <a href="svc__sys__obj_8h_source.html#l00195">svc_sys_obj.h:195</a></div></div>
<div class="ttc" id="aclass_r_g_w_s_i___sys_obj_html_a42dbd3046b9d94873446090556f05e63"><div class="ttname"><a href="class_r_g_w_s_i___sys_obj.html#a42dbd3046b9d94873446090556f05e63">RGWSI_SysObj::init_obj_ctx</a></div><div class="ttdeci">RGWSysObjectCtx init_obj_ctx()</div><div class="ttdef"><b>Definition</b> <a href="svc__sys__obj_8cc_source.html#l00015">svc_sys_obj.cc:15</a></div></div>
<div class="ttc" id="aclass_r_g_w_s_i___tier___r_a_d_o_s_html_ae33206c29065e1071eed5378297296c6"><div class="ttname"><a href="class_r_g_w_s_i___tier___r_a_d_o_s.html#ae33206c29065e1071eed5378297296c6">RGWSI_Tier_RADOS::raw_obj_to_obj</a></div><div class="ttdeci">static bool raw_obj_to_obj(const rgw_bucket &amp;bucket, const rgw_raw_obj &amp;raw_obj, rgw_obj *obj)</div><div class="ttdef"><b>Definition</b> <a href="svc__tier__rados_8h_source.html#l00140">svc_tier_rados.h:140</a></div></div>
<div class="ttc" id="aclass_r_g_w_s_i___zone_html_a03c9897044b86abf8cebd44422ed1966"><div class="ttname"><a href="class_r_g_w_s_i___zone.html#a03c9897044b86abf8cebd44422ed1966">RGWSI_Zone::zone_is_writeable</a></div><div class="ttdeci">bool zone_is_writeable()</div><div class="ttdef"><b>Definition</b> <a href="svc__zone_8cc_source.html#l00998">svc_zone.cc:998</a></div></div>
<div class="ttc" id="aclass_r_g_w_s_i___zone_html_a0ade599544ff866a0e9292f49c1ad179"><div class="ttname"><a href="class_r_g_w_s_i___zone.html#a0ade599544ff866a0e9292f49c1ad179">RGWSI_Zone::get_zone_params</a></div><div class="ttdeci">const RGWZoneParams &amp; get_zone_params() const</div><div class="ttdef"><b>Definition</b> <a href="svc__zone_8cc_source.html#l00945">svc_zone.cc:945</a></div></div>
<div class="ttc" id="aclass_r_g_w_s_i___zone_html_a0e9f0f7357c948c4d6af8df223740522"><div class="ttname"><a href="class_r_g_w_s_i___zone.html#a0e9f0f7357c948c4d6af8df223740522">RGWSI_Zone::get_current_period_id</a></div><div class="ttdeci">const std::string &amp; get_current_period_id() const</div><div class="ttdef"><b>Definition</b> <a href="svc__zone_8cc_source.html#l00981">svc_zone.cc:981</a></div></div>
<div class="ttc" id="aclass_r_g_w_s_i___zone_html_a13836f0becce33b5511b4edc553f89a5"><div class="ttname"><a href="class_r_g_w_s_i___zone.html#a13836f0becce33b5511b4edc553f89a5">RGWSI_Zone::zone_name</a></div><div class="ttdeci">const std::string &amp; zone_name() const</div><div class="ttdef"><b>Definition</b> <a href="svc__zone_8cc_source.html#l01008">svc_zone.cc:1008</a></div></div>
<div class="ttc" id="aclass_r_g_w_s_i___zone_html_a1aa20a256f3e9051b163de4ca317ff77"><div class="ttname"><a href="class_r_g_w_s_i___zone.html#a1aa20a256f3e9051b163de4ca317ff77">RGWSI_Zone::zone_id</a></div><div class="ttdeci">const rgw_zone_id &amp; zone_id() const</div><div class="ttdef"><b>Definition</b> <a href="svc__zone_8h_source.html#l00098">svc_zone.h:98</a></div></div>
<div class="ttc" id="aclass_r_g_w_s_i___zone_html_a7055152851dfae99d84a0f1cc547902c"><div class="ttname"><a href="class_r_g_w_s_i___zone.html#a7055152851dfae99d84a0f1cc547902c">RGWSI_Zone::has_zonegroup_api</a></div><div class="ttdeci">bool has_zonegroup_api(const std::string &amp;api) const</div><div class="ttdef"><b>Definition</b> <a href="svc__zone_8cc_source.html#l00986">svc_zone.cc:986</a></div></div>
<div class="ttc" id="aclass_r_g_w_s_i___zone_html_a7f1e75d0c6d2ae5d2916e0ecbbc5e1ea"><div class="ttname"><a href="class_r_g_w_s_i___zone.html#a7f1e75d0c6d2ae5d2916e0ecbbc5e1ea">RGWSI_Zone::is_meta_master</a></div><div class="ttdeci">bool is_meta_master() const</div><div class="ttdef"><b>Definition</b> <a href="svc__zone_8cc_source.html#l01062">svc_zone.cc:1062</a></div></div>
<div class="ttc" id="aclass_r_g_w_s_i___zone_html_a8c6009ccc34b8ab0b0632232e30bc8dd"><div class="ttname"><a href="class_r_g_w_s_i___zone.html#a8c6009ccc34b8ab0b0632232e30bc8dd">RGWSI_Zone::get_current_period</a></div><div class="ttdeci">const RGWPeriod &amp; get_current_period() const</div><div class="ttdef"><b>Definition</b> <a href="svc__zone_8cc_source.html#l00976">svc_zone.cc:976</a></div></div>
<div class="ttc" id="aclass_r_g_w_s_i___zone_html_ab3e68b277b791c51d59cbeeb05f15a75"><div class="ttname"><a href="class_r_g_w_s_i___zone.html#ab3e68b277b791c51d59cbeeb05f15a75">RGWSI_Zone::select_bucket_placement</a></div><div class="ttdeci">int select_bucket_placement(const DoutPrefixProvider *dpp, const RGWUserInfo &amp;user_info, const std::string &amp;zonegroup_id, const rgw_placement_rule &amp;rule, rgw_placement_rule *pselected_rule, RGWZonePlacementInfo *rule_info, optional_yield y)</div><div class="ttdef"><b>Definition</b> <a href="svc__zone_8cc_source.html#l01228">svc_zone.cc:1228</a></div></div>
<div class="ttc" id="aclass_r_g_w_s_i___zone_html_ab85f1573b13b362f290438aacaca1882"><div class="ttname"><a href="class_r_g_w_s_i___zone.html#ab85f1573b13b362f290438aacaca1882">RGWSI_Zone::get_redirect_zone_endpoint</a></div><div class="ttdeci">bool get_redirect_zone_endpoint(std::string *endpoint)</div><div class="ttdef"><b>Definition</b> <a href="svc__zone_8cc_source.html#l01401">svc_zone.cc:1401</a></div></div>
<div class="ttc" id="aclass_r_g_w_s_i___zone_html_ac46fd33225ebe0c90db3cc2b17560ce0"><div class="ttname"><a href="class_r_g_w_s_i___zone.html#ac46fd33225ebe0c90db3cc2b17560ce0">RGWSI_Zone::get_realm</a></div><div class="ttdeci">const RGWRealm &amp; get_realm() const</div><div class="ttdef"><b>Definition</b> <a href="svc__zone_8cc_source.html#l00971">svc_zone.cc:971</a></div></div>
<div class="ttc" id="aclass_r_g_w_s_i___zone_html_af86fd910c1fcd3e007560d1390e6be15"><div class="ttname"><a href="class_r_g_w_s_i___zone.html#af86fd910c1fcd3e007560d1390e6be15">RGWSI_Zone::get_zonegroup</a></div><div class="ttdeci">const RGWZoneGroup &amp; get_zonegroup() const</div><div class="ttdef"><b>Definition</b> <a href="svc__zone_8cc_source.html#l00955">svc_zone.cc:955</a></div></div>
<div class="ttc" id="aclass_r_g_w_s_i___zone_html_afe763829ce716720925bc195a9cec1c3"><div class="ttname"><a href="class_r_g_w_s_i___zone.html#afe763829ce716720925bc195a9cec1c3">RGWSI_Zone::get_master_conn</a></div><div class="ttdeci">RGWRESTConn * get_master_conn()</div><div class="ttdef"><b>Definition</b> <a href="svc__zone_8h_source.html#l00112">svc_zone.h:112</a></div></div>
<div class="ttc" id="aclass_r_g_w_s_i___zone_utils_html_a31062a6c79ee2b46349283609ee3e233"><div class="ttname"><a href="class_r_g_w_s_i___zone_utils.html#a31062a6c79ee2b46349283609ee3e233">RGWSI_ZoneUtils::unique_trans_id</a></div><div class="ttdeci">std::string unique_trans_id(const uint64_t unique_num)</div><div class="ttdef"><b>Definition</b> <a href="svc__zone__utils_8cc_source.html#l00054">svc_zone_utils.cc:54</a></div></div>
<div class="ttc" id="aclass_r_g_w_s_i___zone_utils_html_aa3e1a11cb1b86e996b7e72c5cfe64487"><div class="ttname"><a href="class_r_g_w_s_i___zone_utils.html#aa3e1a11cb1b86e996b7e72c5cfe64487">RGWSI_ZoneUtils::unique_id</a></div><div class="ttdeci">std::string unique_id(uint64_t unique_num)</div><div class="ttdef"><b>Definition</b> <a href="svc__zone__utils_8cc_source.html#l00028">svc_zone_utils.cc:28</a></div></div>
<div class="ttc" id="aclass_r_g_w_sys_object_ctx_html_af7d781dbb202cbc5b5d510034a18e83a"><div class="ttname"><a href="class_r_g_w_sys_object_ctx.html#af7d781dbb202cbc5b5d510034a18e83a">RGWSysObjectCtx::get_obj</a></div><div class="ttdeci">RGWSI_SysObj::Obj get_obj(const rgw_raw_obj &amp;obj)</div><div class="ttdef"><b>Definition</b> <a href="svc__sys__obj_8h_source.html#l00290">svc_sys_obj.h:290</a></div></div>
<div class="ttc" id="aclass_r_g_w_system_meta_obj_html_ab885e5d275a5396cc473703ab55f50b1"><div class="ttname"><a href="class_r_g_w_system_meta_obj.html#ab885e5d275a5396cc473703ab55f50b1">RGWSystemMetaObj::get_id</a></div><div class="ttdeci">const std::string &amp; get_id() const</div><div class="ttdef"><b>Definition</b> <a href="rgw__zone_8h_source.html#l00112">rgw_zone.h:112</a></div></div>
<div class="ttc" id="aclass_r_g_w_user_buckets_html"><div class="ttname"><a href="class_r_g_w_user_buckets.html">RGWUserBuckets</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__bucket_8h_source.html#l00137">rgw_bucket.h:137</a></div></div>
<div class="ttc" id="aclass_r_g_w_user_buckets_html_aa23acb0b90b4aec70f758a5452302267"><div class="ttname"><a href="class_r_g_w_user_buckets.html#aa23acb0b90b4aec70f758a5452302267">RGWUserBuckets::get_buckets</a></div><div class="ttdeci">std::map&lt; std::string, RGWBucketEnt &gt; &amp; get_buckets()</div><div class="ttdef"><b>Definition</b> <a href="rgw__bucket_8h_source.html#l00184">rgw_bucket.h:184</a></div></div>
<div class="ttc" id="aclass_r_g_w_user_ctl_html_a03b1c7f88f9f25ffd8eaedf044dbaf86"><div class="ttname"><a href="class_r_g_w_user_ctl.html#a03b1c7f88f9f25ffd8eaedf044dbaf86">RGWUserCtl::list_buckets</a></div><div class="ttdeci">int list_buckets(const DoutPrefixProvider *dpp, const rgw_user &amp;user, const std::string &amp;marker, const std::string &amp;end_marker, uint64_t max, bool need_stats, RGWUserBuckets *buckets, bool *is_truncated, optional_yield y, uint64_t default_max=1000)</div><div class="ttdef"><b>Definition</b> <a href="rgw__user_8cc_source.html#l02849">rgw_user.cc:2849</a></div></div>
<div class="ttc" id="aclass_r_g_w_user_ctl_html_a1090fbc312d89bac76c05691cc1f1c73"><div class="ttname"><a href="class_r_g_w_user_ctl.html#a1090fbc312d89bac76c05691cc1f1c73">RGWUserCtl::get_attrs_by_uid</a></div><div class="ttdeci">int get_attrs_by_uid(const DoutPrefixProvider *dpp, const rgw_user &amp;user_id, std::map&lt; std::string, bufferlist &gt; *attrs, optional_yield y, RGWObjVersionTracker *objv_tracker=nullptr)</div><div class="ttdef"><b>Definition</b> <a href="rgw__user_8cc_source.html#l02781">rgw_user.cc:2781</a></div></div>
<div class="ttc" id="aclass_r_g_w_user_ctl_html_a10a5d80dff730b84e09b538ec28f6408"><div class="ttname"><a href="class_r_g_w_user_ctl.html#a10a5d80dff730b84e09b538ec28f6408">RGWUserCtl::remove_info</a></div><div class="ttdeci">int remove_info(const DoutPrefixProvider *dpp, const RGWUserInfo &amp;info, optional_yield y, const RemoveParams &amp;params={})</div><div class="ttdef"><b>Definition</b> <a href="rgw__user_8cc_source.html#l02812">rgw_user.cc:2812</a></div></div>
<div class="ttc" id="aclass_r_g_w_user_ctl_html_a16c6a7cb3f286ac7b4d71bfb66d0bd19"><div class="ttname"><a href="class_r_g_w_user_ctl.html#a16c6a7cb3f286ac7b4d71bfb66d0bd19">RGWUserCtl::read_stats_async</a></div><div class="ttdeci">int read_stats_async(const DoutPrefixProvider *dpp, const rgw_user &amp;user, RGWGetUserStats_CB *ctx)</div><div class="ttdef"><b>Definition</b> <a href="rgw__user_8cc_source.html#l02918">rgw_user.cc:2918</a></div></div>
<div class="ttc" id="aclass_r_g_w_user_ctl_html_a3760e473a86e7c4042feae0d07be99d4"><div class="ttname"><a href="class_r_g_w_user_ctl.html#a3760e473a86e7c4042feae0d07be99d4">RGWUserCtl::read_stats</a></div><div class="ttdeci">int read_stats(const DoutPrefixProvider *dpp, const rgw_user &amp;user, RGWStorageStats *stats, optional_yield y, ceph::real_time *last_stats_sync=nullptr, ceph::real_time *last_stats_update=nullptr)</div><div class="ttdef"><b>Definition</b> <a href="rgw__user_8cc_source.html#l02906">rgw_user.cc:2906</a></div></div>
<div class="ttc" id="aclass_r_g_w_user_ctl_html_a58a40ea11a09bc8a5f9aa0914a654d56"><div class="ttname"><a href="class_r_g_w_user_ctl.html#a58a40ea11a09bc8a5f9aa0914a654d56">RGWUserCtl::get_info_by_swift</a></div><div class="ttdeci">int get_info_by_swift(const DoutPrefixProvider *dpp, const std::string &amp;swift_name, RGWUserInfo *info, optional_yield y, const GetParams &amp;params={})</div><div class="ttdef"><b>Definition</b> <a href="rgw__user_8cc_source.html#l02749">rgw_user.cc:2749</a></div></div>
<div class="ttc" id="aclass_r_g_w_user_ctl_html_a6d3aab9f7d72b2217073d1e640a962fd"><div class="ttname"><a href="class_r_g_w_user_ctl.html#a6d3aab9f7d72b2217073d1e640a962fd">RGWUserCtl::get_info_by_uid</a></div><div class="ttdeci">int get_info_by_uid(const DoutPrefixProvider *dpp, const rgw_user &amp;uid, RGWUserInfo *info, optional_yield y, const GetParams &amp;params={})</div><div class="ttdef"><b>Definition</b> <a href="rgw__user_8cc_source.html#l02713">rgw_user.cc:2713</a></div></div>
<div class="ttc" id="aclass_r_g_w_user_ctl_html_abf43e97d7688c25ebe361ff77e651fbd"><div class="ttname"><a href="class_r_g_w_user_ctl.html#abf43e97d7688c25ebe361ff77e651fbd">RGWUserCtl::store_info</a></div><div class="ttdeci">int store_info(const DoutPrefixProvider *dpp, const RGWUserInfo &amp;info, optional_yield y, const PutParams &amp;params={})</div><div class="ttdef"><b>Definition</b> <a href="rgw__user_8cc_source.html#l02794">rgw_user.cc:2794</a></div></div>
<div class="ttc" id="aclass_r_g_w_user_ctl_html_ad85dde42fabd69f691a59a4c686a6c54"><div class="ttname"><a href="class_r_g_w_user_ctl.html#ad85dde42fabd69f691a59a4c686a6c54">RGWUserCtl::get_info_by_email</a></div><div class="ttdeci">int get_info_by_email(const DoutPrefixProvider *dpp, const std::string &amp;email, RGWUserInfo *info, optional_yield y, const GetParams &amp;params={})</div><div class="ttdef"><b>Definition</b> <a href="rgw__user_8cc_source.html#l02733">rgw_user.cc:2733</a></div></div>
<div class="ttc" id="aclass_r_g_w_user_ctl_html_adae4e2a411b11371a2facbf71fff52fb"><div class="ttname"><a href="class_r_g_w_user_ctl.html#adae4e2a411b11371a2facbf71fff52fb">RGWUserCtl::complete_flush_stats</a></div><div class="ttdeci">int complete_flush_stats(const DoutPrefixProvider *dpp, const rgw_user &amp;user, optional_yield y)</div><div class="ttdef"><b>Definition</b> <a href="rgw__user_8cc_source.html#l02892">rgw_user.cc:2892</a></div></div>
<div class="ttc" id="aclass_r_g_w_user_ctl_html_af0acfea3f6a8a72b750b562cf875e01a"><div class="ttname"><a href="class_r_g_w_user_ctl.html#af0acfea3f6a8a72b750b562cf875e01a">RGWUserCtl::get_info_by_access_key</a></div><div class="ttdeci">int get_info_by_access_key(const DoutPrefixProvider *dpp, const std::string &amp;access_key, RGWUserInfo *info, optional_yield y, const GetParams &amp;params={})</div><div class="ttdef"><b>Definition</b> <a href="rgw__user_8cc_source.html#l02765">rgw_user.cc:2765</a></div></div>
<div class="ttc" id="aclass_r_g_w_x_m_l_parser_html"><div class="ttname"><a href="class_r_g_w_x_m_l_parser.html">RGWXMLParser</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__xml_8h_source.html#l00099">rgw_xml.h:100</a></div></div>
<div class="ttc" id="aclass_r_g_w_x_m_l_parser_html_a4e20926588ef848ab1b68a29e79e91e8"><div class="ttname"><a href="class_r_g_w_x_m_l_parser.html#a4e20926588ef848ab1b68a29e79e91e8">RGWXMLParser::parse</a></div><div class="ttdeci">bool parse(const char *buf, int len, int done)</div><div class="ttdef"><b>Definition</b> <a href="rgw__xml_8cc_source.html#l00225">rgw_xml.cc:225</a></div></div>
<div class="ttc" id="aclassrgw_1_1putobj_1_1_append_object_processor_html_a01e8f8477c9565ab79392e3315c432e3"><div class="ttname"><a href="classrgw_1_1putobj_1_1_append_object_processor.html#a01e8f8477c9565ab79392e3315c432e3">rgw::putobj::AppendObjectProcessor::complete</a></div><div class="ttdeci">int complete(size_t accounted_size, const std::string &amp;etag, ceph::real_time *mtime, ceph::real_time set_mtime, std::map&lt; std::string, bufferlist &gt; &amp;attrs, ceph::real_time delete_at, const char *if_match, const char *if_nomatch, const std::string *user_data, rgw_zone_set *zones_trace, bool *canceled, optional_yield y) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__putobj__processor_8cc_source.html#l00622">rgw_putobj_processor.cc:622</a></div></div>
<div class="ttc" id="aclassrgw_1_1putobj_1_1_append_object_processor_html_a2e9120ccc465592e0fe41ecd0ca56e52"><div class="ttname"><a href="classrgw_1_1putobj_1_1_append_object_processor.html#a2e9120ccc465592e0fe41ecd0ca56e52">rgw::putobj::AppendObjectProcessor::prepare</a></div><div class="ttdeci">int prepare(optional_yield y) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__putobj__processor_8cc_source.html#l00531">rgw_putobj_processor.cc:531</a></div></div>
<div class="ttc" id="aclassrgw_1_1putobj_1_1_atomic_object_processor_html_a940d824173f346cacf64df9d6e3354a0"><div class="ttname"><a href="classrgw_1_1putobj_1_1_atomic_object_processor.html#a940d824173f346cacf64df9d6e3354a0">rgw::putobj::AtomicObjectProcessor::prepare</a></div><div class="ttdeci">int prepare(optional_yield y) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__putobj__processor_8cc_source.html#l00223">rgw_putobj_processor.cc:223</a></div></div>
<div class="ttc" id="aclassrgw_1_1putobj_1_1_atomic_object_processor_html_ab1ff7cd55c65dd56716a55866532f1c0"><div class="ttname"><a href="classrgw_1_1putobj_1_1_atomic_object_processor.html#ab1ff7cd55c65dd56716a55866532f1c0">rgw::putobj::AtomicObjectProcessor::complete</a></div><div class="ttdeci">int complete(size_t accounted_size, const std::string &amp;etag, ceph::real_time *mtime, ceph::real_time set_mtime, std::map&lt; std::string, bufferlist &gt; &amp;attrs, ceph::real_time delete_at, const char *if_match, const char *if_nomatch, const std::string *user_data, rgw_zone_set *zones_trace, bool *canceled, optional_yield y) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__putobj__processor_8cc_source.html#l00291">rgw_putobj_processor.cc:291</a></div></div>
<div class="ttc" id="aclassrgw_1_1putobj_1_1_head_object_processor_html_a3da70c0ba679b2be00e9ee7d5967e581"><div class="ttname"><a href="classrgw_1_1putobj_1_1_head_object_processor.html#a3da70c0ba679b2be00e9ee7d5967e581">rgw::putobj::HeadObjectProcessor::process</a></div><div class="ttdeci">int process(bufferlist &amp;&amp;data, uint64_t logical_offset) final override</div><div class="ttdoc">Consume a bufferlist in its entirety at the given object offset.</div><div class="ttdef"><b>Definition</b> <a href="rgw__putobj__processor_8cc_source.html#l00030">rgw_putobj_processor.cc:30</a></div></div>
<div class="ttc" id="aclassrgw_1_1putobj_1_1_multipart_object_processor_html_ac39a3c3aba863c24cf73fff241df60d9"><div class="ttname"><a href="classrgw_1_1putobj_1_1_multipart_object_processor.html#ac39a3c3aba863c24cf73fff241df60d9">rgw::putobj::MultipartObjectProcessor::prepare</a></div><div class="ttdeci">int prepare(optional_yield y) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__putobj__processor_8cc_source.html#l00427">rgw_putobj_processor.cc:427</a></div></div>
<div class="ttc" id="aclassrgw_1_1putobj_1_1_multipart_object_processor_html_ad9680d453595af9390aa660ae28dcc05"><div class="ttname"><a href="classrgw_1_1putobj_1_1_multipart_object_processor.html#ad9680d453595af9390aa660ae28dcc05">rgw::putobj::MultipartObjectProcessor::complete</a></div><div class="ttdeci">int complete(size_t accounted_size, const std::string &amp;etag, ceph::real_time *mtime, ceph::real_time set_mtime, std::map&lt; std::string, bufferlist &gt; &amp;attrs, ceph::real_time delete_at, const char *if_match, const char *if_nomatch, const std::string *user_data, rgw_zone_set *zones_trace, bool *canceled, optional_yield y) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__putobj__processor_8cc_source.html#l00434">rgw_putobj_processor.cc:434</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_bucket_html"><div class="ttname"><a href="classrgw_1_1sal_1_1_bucket.html">rgw::sal::Bucket</a></div><div class="ttdoc">Bucket abstraction</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l00553">rgw_sal.h:553</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_bucket_html_a0fbf4f16a181a9f8d58d1d75fb8dff2d"><div class="ttname"><a href="classrgw_1_1sal_1_1_bucket.html#a0fbf4f16a181a9f8d58d1d75fb8dff2d">rgw::sal::Bucket::get_key</a></div><div class="ttdeci">rgw_bucket &amp; get_key()</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l00769">rgw_sal.h:769</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_bucket_html_a1888e0309010076e292c2d7c1da663c1"><div class="ttname"><a href="classrgw_1_1sal_1_1_bucket.html#a1888e0309010076e292c2d7c1da663c1">rgw::sal::Bucket::attrs</a></div><div class="ttdeci">Attrs attrs</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l00558">rgw_sal.h:558</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_bucket_html_a1e64259203d2710c33c5a979721c19ee"><div class="ttname"><a href="classrgw_1_1sal_1_1_bucket.html#a1e64259203d2710c33c5a979721c19ee">rgw::sal::Bucket::get_info</a></div><div class="ttdeci">RGWBucketInfo &amp; get_info()</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l00770">rgw_sal.h:770</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_bucket_html_a20ffc5efdc0959998e88a2b93cceba85"><div class="ttname"><a href="classrgw_1_1sal_1_1_bucket.html#a20ffc5efdc0959998e88a2b93cceba85">rgw::sal::Bucket::bucket_version</a></div><div class="ttdeci">obj_version bucket_version</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l00559">rgw_sal.h:559</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_bucket_html_a3902fc3bdd6c0f58baef76e0a08c4bb4"><div class="ttname"><a href="classrgw_1_1sal_1_1_bucket.html#a3902fc3bdd6c0f58baef76e0a08c4bb4">rgw::sal::Bucket::load_bucket</a></div><div class="ttdeci">virtual int load_bucket(const DoutPrefixProvider *dpp, optional_yield y, bool get_stats=false)=0</div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_bucket_html_a4fd945a21faf16e2c455e0a96a485da4"><div class="ttname"><a href="classrgw_1_1sal_1_1_bucket.html#a4fd945a21faf16e2c455e0a96a485da4">rgw::sal::Bucket::mtime</a></div><div class="ttdeci">ceph::real_time mtime</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l00560">rgw_sal.h:560</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_bucket_html_a58a5e1ed6d60713fc00fa891c8aaec0e"><div class="ttname"><a href="classrgw_1_1sal_1_1_bucket.html#a58a5e1ed6d60713fc00fa891c8aaec0e">rgw::sal::Bucket::get_acl_owner</a></div><div class="ttdeci">virtual ACLOwner get_acl_owner(void)</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l00684">rgw_sal.h:684</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_bucket_html_a5ce525a3d602e7032c4b9ec4b9f789de"><div class="ttname"><a href="classrgw_1_1sal_1_1_bucket.html#a5ce525a3d602e7032c4b9ec4b9f789de">rgw::sal::Bucket::ent</a></div><div class="ttdeci">RGWBucketEnt ent</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l00555">rgw_sal.h:555</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_bucket_html_a62d427fa47e904aaf18be892b9b502f9"><div class="ttname"><a href="classrgw_1_1sal_1_1_bucket.html#a62d427fa47e904aaf18be892b9b502f9">rgw::sal::Bucket::owner</a></div><div class="ttdeci">User * owner</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l00557">rgw_sal.h:557</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_bucket_html_a8b49a035b8b328338492032f312fc3ca"><div class="ttname"><a href="classrgw_1_1sal_1_1_bucket.html#a8b49a035b8b328338492032f312fc3ca">rgw::sal::Bucket::get_attrs</a></div><div class="ttdeci">virtual Attrs &amp; get_attrs(void)</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l00637">rgw_sal.h:637</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_bucket_html_aa70480c22292c75f5e62829aeee2ed21"><div class="ttname"><a href="classrgw_1_1sal_1_1_bucket.html#aa70480c22292c75f5e62829aeee2ed21">rgw::sal::Bucket::info</a></div><div class="ttdeci">RGWBucketInfo info</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l00556">rgw_sal.h:556</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_bucket_html_ab9ec2756b101c59e885d487256b3d7df"><div class="ttname"><a href="classrgw_1_1sal_1_1_bucket.html#ab9ec2756b101c59e885d487256b3d7df">rgw::sal::Bucket::get_name</a></div><div class="ttdeci">const std::string &amp; get_name() const</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l00715">rgw_sal.h:715</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_bucket_html_abe66383df64c0055a0216d1b576ff35e"><div class="ttname"><a href="classrgw_1_1sal_1_1_bucket.html#abe66383df64c0055a0216d1b576ff35e">rgw::sal::Bucket::get_count</a></div><div class="ttdeci">uint64_t get_count() const</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l00727">rgw_sal.h:727</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_bucket_html_ad0bdac1b17f37e566a42867442449537"><div class="ttname"><a href="classrgw_1_1sal_1_1_bucket.html#ad0bdac1b17f37e566a42867442449537">rgw::sal::Bucket::get_owner</a></div><div class="ttdeci">virtual User * get_owner(void)</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l00682">rgw_sal.h:682</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_bucket_html_ad2d2f55d5bc0e8da377f2d9342c0ec13"><div class="ttname"><a href="classrgw_1_1sal_1_1_bucket.html#ad2d2f55d5bc0e8da377f2d9342c0ec13">rgw::sal::Bucket::get_object</a></div><div class="ttdeci">virtual std::unique_ptr&lt; Object &gt; get_object(const rgw_obj_key &amp;key)=0</div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_bucket_html_ae6e483a0f5b9662970d9ac95b1280fb5"><div class="ttname"><a href="classrgw_1_1sal_1_1_bucket.html#ae6e483a0f5b9662970d9ac95b1280fb5">rgw::sal::Bucket::get_creation_time</a></div><div class="ttdeci">ceph::real_time &amp; get_creation_time()</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l00731">rgw_sal.h:731</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_bucket_html_afce8c7c05e49c14921760bcf7fd00dc8"><div class="ttname"><a href="classrgw_1_1sal_1_1_bucket.html#afce8c7c05e49c14921760bcf7fd00dc8">rgw::sal::Bucket::get_placement_rule</a></div><div class="ttdeci">rgw_placement_rule &amp; get_placement_rule()</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l00729">rgw_sal.h:729</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_bucket_list_html"><div class="ttname"><a href="classrgw_1_1sal_1_1_bucket_list.html">rgw::sal::BucketList</a></div><div class="ttdoc">A list of buckets</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l00811">rgw_sal.h:811</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_bucket_list_html_a5ba0d82a7e022e8d40e0d9510be1d7db"><div class="ttname"><a href="classrgw_1_1sal_1_1_bucket_list.html#a5ba0d82a7e022e8d40e0d9510be1d7db">rgw::sal::BucketList::add</a></div><div class="ttdeci">void add(std::unique_ptr&lt; Bucket &gt; bucket)</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l00837">rgw_sal.h:837</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_bucket_list_html_acb59bff5714d3447f0021e570257233f"><div class="ttname"><a href="classrgw_1_1sal_1_1_bucket_list.html#acb59bff5714d3447f0021e570257233f">rgw::sal::BucketList::set_truncated</a></div><div class="ttdeci">void set_truncated(bool trunc)</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l00835">rgw_sal.h:835</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_bucket_list_html_aed613bcf7e9f1aac4b9123cb91f5f8fa"><div class="ttname"><a href="classrgw_1_1sal_1_1_bucket_list.html#aed613bcf7e9f1aac4b9123cb91f5f8fa">rgw::sal::BucketList::clear</a></div><div class="ttdeci">void clear(void)</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l00843">rgw_sal.h:843</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_completions_html"><div class="ttname"><a href="classrgw_1_1sal_1_1_completions.html">rgw::sal::Completions</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l00218">rgw_sal.h:218</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_l_c_rados_serializer_html"><div class="ttname"><a href="classrgw_1_1sal_1_1_l_c_rados_serializer.html">rgw::sal::LCRadosSerializer</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8h_source.html#l00591">rgw_sal_rados.h:591</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_l_c_rados_serializer_html_a288484e275611aa78e7a5ff306493918"><div class="ttname"><a href="classrgw_1_1sal_1_1_l_c_rados_serializer.html#a288484e275611aa78e7a5ff306493918">rgw::sal::LCRadosSerializer::ioctx</a></div><div class="ttdeci">librados::IoCtx * ioctx</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8h_source.html#l00592">rgw_sal_rados.h:592</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_l_c_rados_serializer_html_a3f99bae3d092b131a75fdd07bb5b1a4c"><div class="ttname"><a href="classrgw_1_1sal_1_1_l_c_rados_serializer.html#a3f99bae3d092b131a75fdd07bb5b1a4c">rgw::sal::LCRadosSerializer::try_lock</a></div><div class="ttdeci">virtual int try_lock(const DoutPrefixProvider *dpp, utime_t dur, optional_yield y) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l02591">rgw_sal_rados.cc:2591</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_l_c_rados_serializer_html_a4cebe4fe84f05cd15225adfd5da4ca93"><div class="ttname"><a href="classrgw_1_1sal_1_1_l_c_rados_serializer.html#a4cebe4fe84f05cd15225adfd5da4ca93">rgw::sal::LCRadosSerializer::LCRadosSerializer</a></div><div class="ttdeci">LCRadosSerializer(RadosStore *store, const std::string &amp;oid, const std::string &amp;lock_name, const std::string &amp;cookie)</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l02584">rgw_sal_rados.cc:2584</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_l_c_rados_serializer_html_a765a0494bf46fdfde3f1d4b53c93897e"><div class="ttname"><a href="classrgw_1_1sal_1_1_l_c_rados_serializer.html#a765a0494bf46fdfde3f1d4b53c93897e">rgw::sal::LCRadosSerializer::lock</a></div><div class="ttdeci">rados::cls::lock::Lock lock</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8h_source.html#l00593">rgw_sal_rados.h:593</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_l_c_rados_serializer_html_a779ed8a10b4f584d3bbf88f5f41effb5"><div class="ttname"><a href="classrgw_1_1sal_1_1_l_c_rados_serializer.html#a779ed8a10b4f584d3bbf88f5f41effb5">rgw::sal::LCRadosSerializer::oid</a></div><div class="ttdeci">const std::string oid</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8h_source.html#l00594">rgw_sal_rados.h:594</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_m_p_rados_serializer_html"><div class="ttname"><a href="classrgw_1_1sal_1_1_m_p_rados_serializer.html">rgw::sal::MPRadosSerializer</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8h_source.html#l00577">rgw_sal_rados.h:577</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_m_p_rados_serializer_html_a079423c6fe4860dfc09d57b8f3c2b641"><div class="ttname"><a href="classrgw_1_1sal_1_1_m_p_rados_serializer.html#a079423c6fe4860dfc09d57b8f3c2b641">rgw::sal::MPRadosSerializer::MPRadosSerializer</a></div><div class="ttdeci">MPRadosSerializer(const DoutPrefixProvider *dpp, RadosStore *store, RadosObject *obj, const std::string &amp;lock_name)</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l02559">rgw_sal_rados.cc:2559</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_m_p_rados_serializer_html_a82a2721e138bd47f4d2bdd4912eef631"><div class="ttname"><a href="classrgw_1_1sal_1_1_m_p_rados_serializer.html#a82a2721e138bd47f4d2bdd4912eef631">rgw::sal::MPRadosSerializer::ioctx</a></div><div class="ttdeci">librados::IoCtx ioctx</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8h_source.html#l00578">rgw_sal_rados.h:578</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_m_p_rados_serializer_html_addd59417fb4b0087048ffdcbc7348e01"><div class="ttname"><a href="classrgw_1_1sal_1_1_m_p_rados_serializer.html#addd59417fb4b0087048ffdcbc7348e01">rgw::sal::MPRadosSerializer::try_lock</a></div><div class="ttdeci">virtual int try_lock(const DoutPrefixProvider *dpp, utime_t dur, optional_yield y) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l02572">rgw_sal_rados.cc:2572</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_m_p_rados_serializer_html_aede6748cac003f1e891a8143c4a18b61"><div class="ttname"><a href="classrgw_1_1sal_1_1_m_p_rados_serializer.html#aede6748cac003f1e891a8143c4a18b61">rgw::sal::MPRadosSerializer::lock</a></div><div class="ttdeci">rados::cls::lock::Lock lock</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8h_source.html#l00579">rgw_sal_rados.h:579</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_m_p_rados_serializer_html_af06c358f7fb59f7832d8c8ff7e3793c7"><div class="ttname"><a href="classrgw_1_1sal_1_1_m_p_rados_serializer.html#af06c358f7fb59f7832d8c8ff7e3793c7">rgw::sal::MPRadosSerializer::op</a></div><div class="ttdeci">librados::ObjectWriteOperation op</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8h_source.html#l00580">rgw_sal_rados.h:580</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_multipart_part_html_a338ce30edd3929e4f451c8f370320d5e"><div class="ttname"><a href="classrgw_1_1sal_1_1_multipart_part.html#a338ce30edd3929e4f451c8f370320d5e">rgw::sal::MultipartPart::oid</a></div><div class="ttdeci">std::string oid</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l01145">rgw_sal.h:1145</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_notification_html_a10b7413096e84c434fafe7453d6108c9"><div class="ttname"><a href="classrgw_1_1sal_1_1_notification.html#a10b7413096e84c434fafe7453d6108c9">rgw::sal::Notification::event_type</a></div><div class="ttdeci">rgw::notify::EventType event_type</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l01348">rgw_sal.h:1348</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_notification_html_ae95b2dc0dffe521ce033b36f59572acd"><div class="ttname"><a href="classrgw_1_1sal_1_1_notification.html#ae95b2dc0dffe521ce033b36f59572acd">rgw::sal::Notification::obj</a></div><div class="ttdeci">Object * obj</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l01346">rgw_sal.h:1346</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_object_html"><div class="ttname"><a href="classrgw_1_1sal_1_1_object.html">rgw::sal::Object</a></div><div class="ttdoc">Object abstraction</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l00859">rgw_sal.h:859</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_object_html_a0cdac8c36c06ebf81fb580038205487f"><div class="ttname"><a href="classrgw_1_1sal_1_1_object.html#a0cdac8c36c06ebf81fb580038205487f">rgw::sal::Object::get_bucket</a></div><div class="ttdeci">Bucket * get_bucket(void) const</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l01044">rgw_sal.h:1044</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_object_html_a1de58611e673ff81baa4bcf7493d1c02"><div class="ttname"><a href="classrgw_1_1sal_1_1_object.html#a1de58611e673ff81baa4bcf7493d1c02">rgw::sal::Object::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l00999">rgw_sal.h:999</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_object_html_a24c2392bb4633eb38d09efd00b7f2a33"><div class="ttname"><a href="classrgw_1_1sal_1_1_object.html#a24c2392bb4633eb38d09efd00b7f2a33">rgw::sal::Object::set_key</a></div><div class="ttdeci">virtual void set_key(const rgw_obj_key &amp;k)</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l01066">rgw_sal.h:1066</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_object_html_a52293de292e4be4ee0d7d33e92212409"><div class="ttname"><a href="classrgw_1_1sal_1_1_object.html#a52293de292e4be4ee0d7d33e92212409">rgw::sal::Object::bucket</a></div><div class="ttdeci">Bucket * bucket</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l00862">rgw_sal.h:862</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_object_html_a593cfbcc3ce7ccf3e46f43fd94f1c1ee"><div class="ttname"><a href="classrgw_1_1sal_1_1_object.html#a593cfbcc3ce7ccf3e46f43fd94f1c1ee">rgw::sal::Object::obj_size</a></div><div class="ttdeci">uint64_t obj_size</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l00864">rgw_sal.h:864</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_object_html_a770aa088f13a4a4063055cc423de4478"><div class="ttname"><a href="classrgw_1_1sal_1_1_object.html#a770aa088f13a4a4063055cc423de4478">rgw::sal::Object::get_obj</a></div><div class="ttdeci">virtual rgw_obj get_obj(void) const</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l01068">rgw_sal.h:1068</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_object_html_a89d6b720b87f91663d142ba7a6dce9ca"><div class="ttname"><a href="classrgw_1_1sal_1_1_object.html#a89d6b720b87f91663d142ba7a6dce9ca">rgw::sal::Object::attrs</a></div><div class="ttdeci">Attrs attrs</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l00865">rgw_sal.h:865</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_object_html_aa3e4aa8f5ea263bfd0913ff8e2e47551"><div class="ttname"><a href="classrgw_1_1sal_1_1_object.html#aa3e4aa8f5ea263bfd0913ff8e2e47551">rgw::sal::Object::mtime</a></div><div class="ttdeci">ceph::real_time mtime</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l00866">rgw_sal.h:866</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_object_html_aa4a801a7e7dfbb29ccf622603dee6ae3"><div class="ttname"><a href="classrgw_1_1sal_1_1_object.html#aa4a801a7e7dfbb29ccf622603dee6ae3">rgw::sal::Object::get_name</a></div><div class="ttdeci">const std::string &amp; get_name() const</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l01001">rgw_sal.h:1001</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_object_html_aa8e83e47dd8615028e1eec9d9d7f8ec4"><div class="ttname"><a href="classrgw_1_1sal_1_1_object.html#aa8e83e47dd8615028e1eec9d9d7f8ec4">rgw::sal::Object::get_attrs</a></div><div class="ttdeci">Attrs &amp; get_attrs(void)</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l01034">rgw_sal.h:1034</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_object_html_aebb3bdb3cf25ba091ff6034a877fe976"><div class="ttname"><a href="classrgw_1_1sal_1_1_object.html#aebb3bdb3cf25ba091ff6034a877fe976">rgw::sal::Object::set_atomic</a></div><div class="ttdeci">virtual void set_atomic(RGWObjectCtx *rctx) const =0</div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_object_html_aed5de5f3bc91fd3fcc43be62e05dbed9"><div class="ttname"><a href="classrgw_1_1sal_1_1_object.html#aed5de5f3bc91fd3fcc43be62e05dbed9">rgw::sal::Object::key</a></div><div class="ttdeci">rgw_obj_key key</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l00861">rgw_sal.h:861</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_object_html_af492ef7b108fe3b0045349261ba80c3c"><div class="ttname"><a href="classrgw_1_1sal_1_1_object.html#af492ef7b108fe3b0045349261ba80c3c">rgw::sal::Object::get_key</a></div><div class="ttdeci">rgw_obj_key &amp; get_key()</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l01113">rgw_sal.h:1113</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_r_g_w_o_i_d_c_provider_html_a061ecdf8cb584c0953f18b511da956d5"><div class="ttname"><a href="classrgw_1_1sal_1_1_r_g_w_o_i_d_c_provider.html#a061ecdf8cb584c0953f18b511da956d5">rgw::sal::RGWOIDCProvider::tenant</a></div><div class="ttdeci">std::string tenant</div><div class="ttdef"><b>Definition</b> <a href="rgw__oidc__provider_8h_source.html#l00032">rgw_oidc_provider.h:32</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_r_g_w_o_i_d_c_provider_html_a19b8a0dafdaca5f190afe53d7d25d9d1"><div class="ttname"><a href="classrgw_1_1sal_1_1_r_g_w_o_i_d_c_provider.html#a19b8a0dafdaca5f190afe53d7d25d9d1">rgw::sal::RGWOIDCProvider::oidc_url_oid_prefix</a></div><div class="ttdeci">static const std::string oidc_url_oid_prefix</div><div class="ttdef"><b>Definition</b> <a href="rgw__oidc__provider_8h_source.html#l00019">rgw_oidc_provider.h:19</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_r_g_w_o_i_d_c_provider_html_a2dd1d59efdb9c2bb769cbc63646a3f1c"><div class="ttname"><a href="classrgw_1_1sal_1_1_r_g_w_o_i_d_c_provider.html#a2dd1d59efdb9c2bb769cbc63646a3f1c">rgw::sal::RGWOIDCProvider::provider_url</a></div><div class="ttdeci">std::string provider_url</div><div class="ttdef"><b>Definition</b> <a href="rgw__oidc__provider_8h_source.html#l00029">rgw_oidc_provider.h:29</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_r_g_w_o_i_d_c_provider_html_a8fc76c20f33da2b0c253932e3c2b7ab5"><div class="ttname"><a href="classrgw_1_1sal_1_1_r_g_w_o_i_d_c_provider.html#a8fc76c20f33da2b0c253932e3c2b7ab5">rgw::sal::RGWOIDCProvider::get_url_oid_prefix</a></div><div class="ttdeci">static const std::string &amp; get_url_oid_prefix()</div><div class="ttdef"><b>Definition</b> <a href="rgw__oidc__provider_8cc_source.html#l00177">rgw_oidc_provider.cc:177</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_r_g_w_o_i_d_c_provider_html_ae4fa828b9c8725a811a649fee8c0f6e1"><div class="ttname"><a href="classrgw_1_1sal_1_1_r_g_w_o_i_d_c_provider.html#ae4fa828b9c8725a811a649fee8c0f6e1">rgw::sal::RGWOIDCProvider::get_tenant_url_from_arn</a></div><div class="ttdeci">int get_tenant_url_from_arn(std::string &amp;tenant, std::string &amp;url)</div><div class="ttdef"><b>Definition</b> <a href="rgw__oidc__provider_8cc_source.html#l00034">rgw_oidc_provider.cc:34</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_r_g_w_role_html_a24224cecd76964a45b4cad9a7de87fe4"><div class="ttname"><a href="classrgw_1_1sal_1_1_r_g_w_role.html#a24224cecd76964a45b4cad9a7de87fe4">rgw::sal::RGWRole::role_oid_prefix</a></div><div class="ttdeci">static const std::string role_oid_prefix</div><div class="ttdef"><b>Definition</b> <a href="rgw__role_8h_source.html#l00080">rgw_role.h:80</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_r_g_w_role_html_a2b3372c7095b80a93b41e55504cb6758"><div class="ttname"><a href="classrgw_1_1sal_1_1_r_g_w_role.html#a2b3372c7095b80a93b41e55504cb6758">rgw::sal::RGWRole::role_arn_prefix</a></div><div class="ttdeci">static const std::string role_arn_prefix</div><div class="ttdef"><b>Definition</b> <a href="rgw__role_8h_source.html#l00082">rgw_role.h:82</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_r_g_w_role_html_a422bc7253257f4dce12a7d800e2d3982"><div class="ttname"><a href="classrgw_1_1sal_1_1_r_g_w_role.html#a422bc7253257f4dce12a7d800e2d3982">rgw::sal::RGWRole::get_names_oid_prefix</a></div><div class="ttdeci">static const std::string &amp; get_names_oid_prefix()</div><div class="ttdef"><b>Definition</b> <a href="rgw__role_8cc_source.html#l00306">rgw_role.cc:306</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_r_g_w_role_html_a438e1fc1f395668638868d4e63af6ea4"><div class="ttname"><a href="classrgw_1_1sal_1_1_r_g_w_role.html#a438e1fc1f395668638868d4e63af6ea4">rgw::sal::RGWRole::get_path_oid_prefix</a></div><div class="ttdeci">static const std::string &amp; get_path_oid_prefix()</div><div class="ttdef"><b>Definition</b> <a href="rgw__role_8cc_source.html#l00316">rgw_role.cc:316</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_r_g_w_role_html_a9378c47a66a57dfa50a64851c42f8e66"><div class="ttname"><a href="classrgw_1_1sal_1_1_r_g_w_role.html#a9378c47a66a57dfa50a64851c42f8e66">rgw::sal::RGWRole::role_path_oid_prefix</a></div><div class="ttdeci">static const std::string role_path_oid_prefix</div><div class="ttdef"><b>Definition</b> <a href="rgw__role_8h_source.html#l00081">rgw_role.h:81</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_r_g_w_role_html_aa71fa8742e94426dbf71ce9277d8e8a1"><div class="ttname"><a href="classrgw_1_1sal_1_1_r_g_w_role.html#aa71fa8742e94426dbf71ce9277d8e8a1">rgw::sal::RGWRole::validate_input</a></div><div class="ttdeci">bool validate_input(const DoutPrefixProvider *dpp)</div><div class="ttdef"><b>Definition</b> <a href="rgw__role_8cc_source.html#l00182">rgw_role.cc:182</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_r_g_w_role_html_aaaf69956c06e4c0556febabce5c9bd8d"><div class="ttname"><a href="classrgw_1_1sal_1_1_r_g_w_role.html#aaaf69956c06e4c0556febabce5c9bd8d">rgw::sal::RGWRole::get_info_oid_prefix</a></div><div class="ttdeci">static const std::string &amp; get_info_oid_prefix()</div><div class="ttdef"><b>Definition</b> <a href="rgw__role_8cc_source.html#l00311">rgw_role.cc:311</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_r_g_w_role_html_ae06bf4224a6960abf89895324194a1c9"><div class="ttname"><a href="classrgw_1_1sal_1_1_r_g_w_role.html#ae06bf4224a6960abf89895324194a1c9">rgw::sal::RGWRole::info</a></div><div class="ttdeci">RGWRoleInfo info</div><div class="ttdef"><b>Definition</b> <a href="rgw__role_8h_source.html#l00088">rgw_role.h:88</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_append_writer_html_a854f9e38f22c9922d5e4cdfda24508b3"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_append_writer.html#a854f9e38f22c9922d5e4cdfda24508b3">rgw::sal::RadosAppendWriter::complete</a></div><div class="ttdeci">virtual int complete(size_t accounted_size, const std::string &amp;etag, ceph::real_time *mtime, ceph::real_time set_mtime, std::map&lt; std::string, bufferlist &gt; &amp;attrs, ceph::real_time delete_at, const char *if_match, const char *if_nomatch, const std::string *user_data, rgw_zone_set *zones_trace, bool *canceled, optional_yield y) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l02734">rgw_sal_rados.cc:2734</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_append_writer_html_ab32e362d802b6bb1d3cc00778d883f4f"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_append_writer.html#ab32e362d802b6bb1d3cc00778d883f4f">rgw::sal::RadosAppendWriter::processor</a></div><div class="ttdeci">rgw::putobj::AppendObjectProcessor processor</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8h_source.html#l00695">rgw_sal_rados.h:695</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_append_writer_html_acb02ae93674b2d74bbeea0ee036602f1"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_append_writer.html#acb02ae93674b2d74bbeea0ee036602f1">rgw::sal::RadosAppendWriter::prepare</a></div><div class="ttdeci">virtual int prepare(optional_yield y) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l02724">rgw_sal_rados.cc:2724</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_append_writer_html_ad97b826a8ef25c74edd718873263102c"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_append_writer.html#ad97b826a8ef25c74edd718873263102c">rgw::sal::RadosAppendWriter::process</a></div><div class="ttdeci">virtual int process(bufferlist &amp;&amp;data, uint64_t offset) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l02729">rgw_sal_rados.cc:2729</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_atomic_writer_html_a22e010d5f79e049a6e6ee403ccf8e9d6"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_atomic_writer.html#a22e010d5f79e049a6e6ee403ccf8e9d6">rgw::sal::RadosAtomicWriter::processor</a></div><div class="ttdeci">rgw::putobj::AtomicObjectProcessor processor</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8h_source.html#l00653">rgw_sal_rados.h:653</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_atomic_writer_html_a2a72f4c193e1643bd82188a605c6ae36"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_atomic_writer.html#a2a72f4c193e1643bd82188a605c6ae36">rgw::sal::RadosAtomicWriter::complete</a></div><div class="ttdeci">virtual int complete(size_t accounted_size, const std::string &amp;etag, ceph::real_time *mtime, ceph::real_time set_mtime, std::map&lt; std::string, bufferlist &gt; &amp;attrs, ceph::real_time delete_at, const char *if_match, const char *if_nomatch, const std::string *user_data, rgw_zone_set *zones_trace, bool *canceled, optional_yield y) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l02711">rgw_sal_rados.cc:2711</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_atomic_writer_html_ae615ce3a5a3cf6101ac09a7e7e4cf711"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_atomic_writer.html#ae615ce3a5a3cf6101ac09a7e7e4cf711">rgw::sal::RadosAtomicWriter::process</a></div><div class="ttdeci">virtual int process(bufferlist &amp;&amp;data, uint64_t offset) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l02706">rgw_sal_rados.cc:2706</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_atomic_writer_html_aeecf1e4f6d5dcbd8fb72d97479bb4e53"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_atomic_writer.html#aeecf1e4f6d5dcbd8fb72d97479bb4e53">rgw::sal::RadosAtomicWriter::prepare</a></div><div class="ttdeci">virtual int prepare(optional_yield y) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l02701">rgw_sal_rados.cc:2701</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_bucket_html"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_bucket.html">rgw::sal::RadosBucket</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8h_source.html#l00230">rgw_sal_rados.h:230</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_bucket_html_a04041791ae7b579c54a57e501ab5ae63"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_bucket.html#a04041791ae7b579c54a57e501ab5ae63">rgw::sal::RadosBucket::abort_multiparts</a></div><div class="ttdeci">virtual int abort_multiparts(const DoutPrefixProvider *dpp, CephContext *cct) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l00920">rgw_sal_rados.cc:920</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_bucket_html_a09560ffe4ce774b77d9001dfc810f604"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_bucket.html#a09560ffe4ce774b77d9001dfc810f604">rgw::sal::RadosBucket::trim_usage</a></div><div class="ttdeci">virtual int trim_usage(const DoutPrefixProvider *dpp, uint64_t start_epoch, uint64_t end_epoch) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l00766">rgw_sal_rados.cc:766</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_bucket_html_a163dceb7c33a9fdac9b73a6f57ef7c85"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_bucket.html#a163dceb7c33a9fdac9b73a6f57ef7c85">rgw::sal::RadosBucket::get_multipart_upload</a></div><div class="ttdeci">virtual std::unique_ptr&lt; MultipartUpload &gt; get_multipart_upload(const std::string &amp;oid, std::optional&lt; std::string &gt; upload_id=std::nullopt, ACLOwner owner={}, ceph::real_time mtime=real_clock::now()) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l00869">rgw_sal_rados.cc:869</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_bucket_html_a26e056686b52036e01e8092d1468b275"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_bucket.html#a26e056686b52036e01e8092d1468b275">rgw::sal::RadosBucket::rebuild_index</a></div><div class="ttdeci">virtual int rebuild_index(const DoutPrefixProvider *dpp) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l00781">rgw_sal_rados.cc:781</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_bucket_html_a3078a8abd66a41a71db710fe6f004030"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_bucket.html#a3078a8abd66a41a71db710fe6f004030">rgw::sal::RadosBucket::set_tag_timeout</a></div><div class="ttdeci">virtual int set_tag_timeout(const DoutPrefixProvider *dpp, uint64_t timeout) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l00786">rgw_sal_rados.cc:786</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_bucket_html_a31db25ba09d16dee01fa8889bc4fe9cd"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_bucket.html#a31db25ba09d16dee01fa8889bc4fe9cd">rgw::sal::RadosBucket::list</a></div><div class="ttdeci">virtual int list(const DoutPrefixProvider *dpp, ListParams &amp;, int, ListResults &amp;, optional_yield y) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l00840">rgw_sal_rados.cc:840</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_bucket_html_a3e5ce63086104232631656900b62a3c6"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_bucket.html#a3e5ce63086104232631656900b62a3c6">rgw::sal::RadosBucket::load_bucket</a></div><div class="ttdeci">virtual int load_bucket(const DoutPrefixProvider *dpp, optional_yield y, bool get_stats=false) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l00588">rgw_sal_rados.cc:588</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_bucket_html_a53c98d8b35949e4e46bfcdae4446927b"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_bucket.html#a53c98d8b35949e4e46bfcdae4446927b">rgw::sal::RadosBucket::remove_bucket_bypass_gc</a></div><div class="ttdeci">virtual int remove_bucket_bypass_gc(int concurrent_max, bool keep_index_consistent, optional_yield y, const DoutPrefixProvider *dpp) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l00457">rgw_sal_rados.cc:457</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_bucket_html_a5ac35440822a9d497a5fe7a12efb63aa"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_bucket.html#a5ac35440822a9d497a5fe7a12efb63aa">rgw::sal::RadosBucket::unlink</a></div><div class="ttdeci">int unlink(const DoutPrefixProvider *dpp, User *new_user, optional_yield y, bool update_entrypoint=true)</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l00695">rgw_sal_rados.cc:695</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_bucket_html_a5de5229ce25b7bb2e498038869bdc47e"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_bucket.html#a5de5229ce25b7bb2e498038869bdc47e">rgw::sal::RadosBucket::try_refresh_info</a></div><div class="ttdeci">virtual int try_refresh_info(const DoutPrefixProvider *dpp, ceph::real_time *pmtime) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l00751">rgw_sal_rados.cc:751</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_bucket_html_a66ca8b0d7bf8f5a6670e5b7956220c0b"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_bucket.html#a66ca8b0d7bf8f5a6670e5b7956220c0b">rgw::sal::RadosBucket::store</a></div><div class="ttdeci">RadosStore * store</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8h_source.html#l00232">rgw_sal_rados.h:232</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_bucket_html_a6a55e288b37a987bb8767a595df685eb"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_bucket.html#a6a55e288b37a987bb8767a595df685eb">rgw::sal::RadosBucket::~RadosBucket</a></div><div class="ttdeci">virtual ~RadosBucket()</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l00356">rgw_sal_rados.cc:356</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_bucket_html_a6af0efad6d182eb3baa88fca2e767569"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_bucket.html#a6af0efad6d182eb3baa88fca2e767569">rgw::sal::RadosBucket::check_bucket_shards</a></div><div class="ttdeci">virtual int check_bucket_shards(const DoutPrefixProvider *dpp) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l00668">rgw_sal_rados.cc:668</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_bucket_html_a6f9cfb8ad940c4f3a51533f1176a7bed"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_bucket.html#a6f9cfb8ad940c4f3a51533f1176a7bed">rgw::sal::RadosBucket::read_stats_async</a></div><div class="ttdeci">virtual int read_stats_async(const DoutPrefixProvider *dpp, int shard_id, RGWGetBucketStats_CB *ctx) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l00630">rgw_sal_rados.cc:630</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_bucket_html_a7dbb75f3408caced5fa477915c4397a9"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_bucket.html#a7dbb75f3408caced5fa477915c4397a9">rgw::sal::RadosBucket::is_owner</a></div><div class="ttdeci">virtual bool is_owner(User *user) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l00725">rgw_sal_rados.cc:725</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_bucket_html_a84b4fa8c2471c285a84c2c9435d22152"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_bucket.html#a84b4fa8c2471c285a84c2c9435d22152">rgw::sal::RadosBucket::sync_user_stats</a></div><div class="ttdeci">virtual int sync_user_stats(const DoutPrefixProvider *dpp, optional_yield y) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l00635">rgw_sal_rados.cc:635</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_bucket_html_a85ae3c70b1a7f88541c372207647b9b8"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_bucket.html#a85ae3c70b1a7f88541c372207647b9b8">rgw::sal::RadosBucket::remove_bucket</a></div><div class="ttdeci">virtual int remove_bucket(const DoutPrefixProvider *dpp, bool delete_children, bool forward_to_master, req_info *req_info, optional_yield y) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l00358">rgw_sal_rados.cc:358</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_bucket_html_a88a76b6f27e3db4482f0ea7cdc0987f1"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_bucket.html#a88a76b6f27e3db4482f0ea7cdc0987f1">rgw::sal::RadosBucket::set_acl</a></div><div class="ttdeci">virtual int set_acl(const DoutPrefixProvider *dpp, RGWAccessControlPolicy &amp;acl, optional_yield y) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l00813">rgw_sal_rados.cc:813</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_bucket_html_a8ebc8cb772197f8cb50e0b7b82664e7c"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_bucket.html#a8ebc8cb772197f8cb50e0b7b82664e7c">rgw::sal::RadosBucket::check_empty</a></div><div class="ttdeci">virtual int check_empty(const DoutPrefixProvider *dpp, optional_yield y) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l00730">rgw_sal_rados.cc:730</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_bucket_html_a93588d4063746d804d3fbb15c08e6002"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_bucket.html#a93588d4063746d804d3fbb15c08e6002">rgw::sal::RadosBucket::remove_objs_from_index</a></div><div class="ttdeci">virtual int remove_objs_from_index(const DoutPrefixProvider *dpp, std::list&lt; rgw_obj_index_key &gt; &amp;objs_to_unlink) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l00771">rgw_sal_rados.cc:771</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_bucket_html_a938ccf2aac0aa4f1643c576ade70942e"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_bucket.html#a938ccf2aac0aa4f1643c576ade70942e">rgw::sal::RadosBucket::acls</a></div><div class="ttdeci">RGWAccessControlPolicy acls</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8h_source.html#l00233">rgw_sal_rados.h:233</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_bucket_html_a99c6251cdcd53927ccbaedb49ec75cf2"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_bucket.html#a99c6251cdcd53927ccbaedb49ec75cf2">rgw::sal::RadosBucket::list_multiparts</a></div><div class="ttdeci">virtual int list_multiparts(const DoutPrefixProvider *dpp, const std::string &amp;prefix, std::string &amp;marker, const std::string &amp;delim, const int &amp;max_uploads, std::vector&lt; std::unique_ptr&lt; MultipartUpload &gt; &gt; &amp;uploads, std::map&lt; std::string, bool &gt; *common_prefixes, bool *is_truncated) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l00878">rgw_sal_rados.cc:878</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_bucket_html_ab2883227497e827c9caea46680f506d9"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_bucket.html#ab2883227497e827c9caea46680f506d9">rgw::sal::RadosBucket::get_object</a></div><div class="ttdeci">virtual std::unique_ptr&lt; Object &gt; get_object(const rgw_obj_key &amp;k) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l00835">rgw_sal_rados.cc:835</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_bucket_html_ab38e5778e8c6e5e1a2e0fd078d32beb0"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_bucket.html#ab38e5778e8c6e5e1a2e0fd078d32beb0">rgw::sal::RadosBucket::put_info</a></div><div class="ttdeci">virtual int put_info(const DoutPrefixProvider *dpp, bool exclusive, ceph::real_time mtime) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l00718">rgw_sal_rados.cc:718</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_bucket_html_ab6e92c5e7713aaf3774c24c38234f2a0"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_bucket.html#ab6e92c5e7713aaf3774c24c38234f2a0">rgw::sal::RadosBucket::link</a></div><div class="ttdeci">int link(const DoutPrefixProvider *dpp, User *new_user, optional_yield y, bool update_entrypoint=true, RGWObjVersionTracker *objv=nullptr)</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l00673">rgw_sal_rados.cc:673</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_bucket_html_ac00d3e72f36a8c67c308c43317eaa777"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_bucket.html#ac00d3e72f36a8c67c308c43317eaa777">rgw::sal::RadosBucket::merge_and_store_attrs</a></div><div class="ttdeci">virtual int merge_and_store_attrs(const DoutPrefixProvider *dpp, Attrs &amp;attrs, optional_yield y) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l00742">rgw_sal_rados.cc:742</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_bucket_html_ac1b918e6cd473a13b9bd9723467b4840"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_bucket.html#ac1b918e6cd473a13b9bd9723467b4840">rgw::sal::RadosBucket::update_container_stats</a></div><div class="ttdeci">virtual int update_container_stats(const DoutPrefixProvider *dpp) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l00640">rgw_sal_rados.cc:640</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_bucket_html_ac92b9b4ce76468bc047dda9156537fa6"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_bucket.html#ac92b9b4ce76468bc047dda9156537fa6">rgw::sal::RadosBucket::check_index</a></div><div class="ttdeci">virtual int check_index(const DoutPrefixProvider *dpp, std::map&lt; RGWObjCategory, RGWStorageStats &gt; &amp;existing_stats, std::map&lt; RGWObjCategory, RGWStorageStats &gt; &amp;calculated_stats) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l00776">rgw_sal_rados.cc:776</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_bucket_html_acdf13f1a532feb7aaddfcc7791b9cf26"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_bucket.html#acdf13f1a532feb7aaddfcc7791b9cf26">rgw::sal::RadosBucket::read_stats</a></div><div class="ttdeci">virtual int read_stats(const DoutPrefixProvider *dpp, int shard_id, std::string *bucket_ver, std::string *master_ver, std::map&lt; RGWObjCategory, RGWStorageStats &gt; &amp;stats, std::string *max_marker=nullptr, bool *syncstopped=nullptr) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l00622">rgw_sal_rados.cc:622</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_bucket_html_ae0b10b245eda3382a4f5d946ec5331b1"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_bucket.html#ae0b10b245eda3382a4f5d946ec5331b1">rgw::sal::RadosBucket::chown</a></div><div class="ttdeci">virtual int chown(const DoutPrefixProvider *dpp, User &amp;new_user, optional_yield y) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l00700">rgw_sal_rados.cc:700</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_bucket_html_ae77a56e304b23abc6cc2c81beec78ef9"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_bucket.html#ae77a56e304b23abc6cc2c81beec78ef9">rgw::sal::RadosBucket::purge_instance</a></div><div class="ttdeci">virtual int purge_instance(const DoutPrefixProvider *dpp) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l00791">rgw_sal_rados.cc:791</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_bucket_html_ae96ae5c780cf5e8e252d2b6c3fa70a60"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_bucket.html#ae96ae5c780cf5e8e252d2b6c3fa70a60">rgw::sal::RadosBucket::check_quota</a></div><div class="ttdeci">virtual int check_quota(const DoutPrefixProvider *dpp, RGWQuotaInfo &amp;user_quota, RGWQuotaInfo &amp;bucket_quota, uint64_t obj_size, optional_yield y, bool check_size_only=false) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l00735">rgw_sal_rados.cc:735</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_bucket_html_af94a43ceef150d8f1772cce54f2906cb"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_bucket.html#af94a43ceef150d8f1772cce54f2906cb">rgw::sal::RadosBucket::read_usage</a></div><div class="ttdeci">virtual int read_usage(const DoutPrefixProvider *dpp, uint64_t start_epoch, uint64_t end_epoch, uint32_t max_entries, bool *is_truncated, RGWUsageIter &amp;usage_iter, std::map&lt; rgw_user_bucket, rgw_usage_log_entry &gt; &amp;usage) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l00756">rgw_sal_rados.cc:756</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_completions_html"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_completions.html">rgw::sal::RadosCompletions</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8h_source.html#l00033">rgw_sal_rados.h:33</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_completions_html_a722d517ee1b1d84a00f299e2c197245a"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_completions.html#a722d517ee1b1d84a00f299e2c197245a">rgw::sal::RadosCompletions::handles</a></div><div class="ttdeci">std::list&lt; librados::AioCompletion * &gt; handles</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8h_source.html#l00035">rgw_sal_rados.h:35</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_completions_html_a9e03e59875be55180d739046ed2093c1"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_completions.html#a9e03e59875be55180d739046ed2093c1">rgw::sal::RadosCompletions::drain</a></div><div class="ttdeci">virtual int drain() override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l00110">rgw_sal_rados.cc:110</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_lifecycle_html_a23a944d4a1f1368f014d24d98295190a"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_lifecycle.html#a23a944d4a1f1368f014d24d98295190a">rgw::sal::RadosLifecycle::get_serializer</a></div><div class="ttdeci">virtual LCSerializer * get_serializer(const std::string &amp;lock_name, const std::string &amp;oid, const std::string &amp;cookie) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l02685">rgw_sal_rados.cc:2685</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_lifecycle_html_a3d1e427f4dbbd5c22224e0313e9ebff2"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_lifecycle.html#a3d1e427f4dbbd5c22224e0313e9ebff2">rgw::sal::RadosLifecycle::get_head</a></div><div class="ttdeci">virtual int get_head(const std::string &amp;oid, LCHead &amp;head) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l02664">rgw_sal_rados.cc:2664</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_lifecycle_html_a47ba2a18e5151f888bafc5c2b77a484c"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_lifecycle.html#a47ba2a18e5151f888bafc5c2b77a484c">rgw::sal::RadosLifecycle::get_next_entry</a></div><div class="ttdeci">virtual int get_next_entry(const std::string &amp;oid, std::string &amp;marker, LCEntry &amp;entry) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l02610">rgw_sal_rados.cc:2610</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_lifecycle_html_a4f49d66e79995ac000f4879cc256c7a7"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_lifecycle.html#a4f49d66e79995ac000f4879cc256c7a7">rgw::sal::RadosLifecycle::set_entry</a></div><div class="ttdeci">virtual int set_entry(const std::string &amp;oid, const LCEntry &amp;entry) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l02624">rgw_sal_rados.cc:2624</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_lifecycle_html_a9269bd730b160aff6ead03cf7103fc30"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_lifecycle.html#a9269bd730b160aff6ead03cf7103fc30">rgw::sal::RadosLifecycle::rm_entry</a></div><div class="ttdeci">virtual int rm_entry(const std::string &amp;oid, const LCEntry &amp;entry) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l02653">rgw_sal_rados.cc:2653</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_lifecycle_html_a9a66f8741cfcb941fac068d8714c0411"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_lifecycle.html#a9a66f8741cfcb941fac068d8714c0411">rgw::sal::RadosLifecycle::store</a></div><div class="ttdeci">RadosStore * store</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8h_source.html#l00606">rgw_sal_rados.h:606</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_lifecycle_html_ab9f99a54c54bdd2c5c7b3239061cbd20"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_lifecycle.html#ab9f99a54c54bdd2c5c7b3239061cbd20">rgw::sal::RadosLifecycle::get_entry</a></div><div class="ttdeci">virtual int get_entry(const std::string &amp;oid, const std::string &amp;marker, LCEntry &amp;entry) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l02597">rgw_sal_rados.cc:2597</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_lifecycle_html_ad2b5146d6ba9c219024270de8023e8a0"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_lifecycle.html#ad2b5146d6ba9c219024270de8023e8a0">rgw::sal::RadosLifecycle::put_head</a></div><div class="ttdeci">virtual int put_head(const std::string &amp;oid, const LCHead &amp;head) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l02675">rgw_sal_rados.cc:2675</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_lifecycle_html_adda521c8df1dcd04415140b00d267cda"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_lifecycle.html#adda521c8df1dcd04415140b00d267cda">rgw::sal::RadosLifecycle::list_entries</a></div><div class="ttdeci">virtual int list_entries(const std::string &amp;oid, const std::string &amp;marker, uint32_t max_entries, std::vector&lt; LCEntry &gt; &amp;entries) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l02635">rgw_sal_rados.cc:2635</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_lua_script_manager_html_a2972f0be07dd19ecdc2f1dca9caef03b"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_lua_script_manager.html#a2972f0be07dd19ecdc2f1dca9caef03b">rgw::sal::RadosLuaScriptManager::store</a></div><div class="ttdeci">RadosStore * store</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8h_source.html#l00776">rgw_sal_rados.h:776</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_lua_script_manager_html_a34e69f58bbc5928fbe9a53e476689f30"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_lua_script_manager.html#a34e69f58bbc5928fbe9a53e476689f30">rgw::sal::RadosLuaScriptManager::pool</a></div><div class="ttdeci">rgw_pool pool</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8h_source.html#l00777">rgw_sal_rados.h:777</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_lua_script_manager_html_a5102c6f0a39b9116d58fb88f442d2378"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_lua_script_manager.html#a5102c6f0a39b9116d58fb88f442d2378">rgw::sal::RadosLuaScriptManager::del</a></div><div class="ttdeci">virtual int del(const DoutPrefixProvider *dpp, optional_yield y, const std::string &amp;key) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l02854">rgw_sal_rados.cc:2854</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_lua_script_manager_html_aba8c35ebcfe18f8ee16dd0bc67f82291"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_lua_script_manager.html#aba8c35ebcfe18f8ee16dd0bc67f82291">rgw::sal::RadosLuaScriptManager::put</a></div><div class="ttdeci">virtual int put(const DoutPrefixProvider *dpp, optional_yield y, const std::string &amp;key, const std::string &amp;script) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l02840">rgw_sal_rados.cc:2840</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_lua_script_manager_html_ad031e042bf9cb2e1c59be004796fa7d1"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_lua_script_manager.html#ad031e042bf9cb2e1c59be004796fa7d1">rgw::sal::RadosLuaScriptManager::get</a></div><div class="ttdeci">virtual int get(const DoutPrefixProvider *dpp, optional_yield y, const std::string &amp;key, std::string &amp;script) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l02820">rgw_sal_rados.cc:2820</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_multipart_part_html"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_multipart_part.html">rgw::sal::RadosMultipartPart</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8h_source.html#l00509">rgw_sal_rados.h:509</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_multipart_part_html_a4fec3bcff3b70e9199e6af186669542a"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_multipart_part.html#a4fec3bcff3b70e9199e6af186669542a">rgw::sal::RadosMultipartPart::info</a></div><div class="ttdeci">RGWUploadPartInfo info</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8h_source.html#l00511">rgw_sal_rados.h:511</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_multipart_part_html_a6c9d887b2ed521c7433e7c79380fd8da"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_multipart_part.html#a6c9d887b2ed521c7433e7c79380fd8da">rgw::sal::RadosMultipartPart::get_etag</a></div><div class="ttdeci">virtual const std::string &amp; get_etag()</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8h_source.html#l00519">rgw_sal_rados.h:519</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_multipart_part_html_a8aadda0afb479f7b9d81e9bd4dcbf646"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_multipart_part.html#a8aadda0afb479f7b9d81e9bd4dcbf646">rgw::sal::RadosMultipartPart::get_size</a></div><div class="ttdeci">virtual uint64_t get_size()</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8h_source.html#l00518">rgw_sal_rados.h:518</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_multipart_upload_html_a1d0f8b14ed2fd88333f64885cd8a8fbf"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_multipart_upload.html#a1d0f8b14ed2fd88333f64885cd8a8fbf">rgw::sal::RadosMultipartUpload::complete</a></div><div class="ttdeci">virtual int complete(const DoutPrefixProvider *dpp, optional_yield y, CephContext *cct, std::map&lt; int, std::string &gt; &amp;part_etags, std::list&lt; rgw_obj_index_key &gt; &amp;remove_objs, uint64_t &amp;accounted_size, bool &amp;compressed, RGWCompressionInfo &amp;cs_info, off_t &amp;ofs, std::string &amp;tag, ACLOwner &amp;owner, uint64_t olh_epoch, rgw::sal::Object *target_obj, RGWObjectCtx *obj_ctx) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l02295">rgw_sal_rados.cc:2295</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_multipart_upload_html_a1e4e95e73bc9043d7f5eaa0606223ddc"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_multipart_upload.html#a1e4e95e73bc9043d7f5eaa0606223ddc">rgw::sal::RadosMultipartUpload::get_writer</a></div><div class="ttdeci">virtual std::unique_ptr&lt; Writer &gt; get_writer(const DoutPrefixProvider *dpp, optional_yield y, std::unique_ptr&lt; rgw::sal::Object &gt; _head_obj, const rgw_user &amp;owner, RGWObjectCtx &amp;obj_ctx, const rgw_placement_rule *ptail_placement_rule, uint64_t part_num, const std::string &amp;part_num_str) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l02544">rgw_sal_rados.cc:2544</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_multipart_upload_html_a254c4c6efb863ede473fd13a4fcfddd5"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_multipart_upload.html#a254c4c6efb863ede473fd13a4fcfddd5">rgw::sal::RadosMultipartUpload::get_info</a></div><div class="ttdeci">virtual int get_info(const DoutPrefixProvider *dpp, optional_yield y, RGWObjectCtx *obj_ctx, rgw_placement_rule **rule, rgw::sal::Attrs *attrs=nullptr) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l02468">rgw_sal_rados.cc:2468</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_multipart_upload_html_a33448fa62cbd84edccd40d300de25ddf"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_multipart_upload.html#a33448fa62cbd84edccd40d300de25ddf">rgw::sal::RadosMultipartUpload::abort</a></div><div class="ttdeci">virtual int abort(const DoutPrefixProvider *dpp, CephContext *cct, RGWObjectCtx *obj_ctx) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l02060">rgw_sal_rados.cc:2060</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_multipart_upload_html_a33912e38bf3f41d98329b8057763e01b"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_multipart_upload.html#a33912e38bf3f41d98329b8057763e01b">rgw::sal::RadosMultipartUpload::list_parts</a></div><div class="ttdeci">virtual int list_parts(const DoutPrefixProvider *dpp, CephContext *cct, int num_parts, int marker, int *next_marker, bool *truncated, bool assume_unsorted=false) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l02195">rgw_sal_rados.cc:2195</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_multipart_upload_html_a4eaa14a01fa5ba2ac3ec604dca1fb9b3"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_multipart_upload.html#a4eaa14a01fa5ba2ac3ec604dca1fb9b3">rgw::sal::RadosMultipartUpload::get_meta_obj</a></div><div class="ttdeci">virtual std::unique_ptr&lt; rgw::sal::Object &gt; get_meta_obj() override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l02145">rgw_sal_rados.cc:2145</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_multipart_upload_html_aab4154d46e790e0e9fa0a991f9fc6931"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_multipart_upload.html#aab4154d46e790e0e9fa0a991f9fc6931">rgw::sal::RadosMultipartUpload::init</a></div><div class="ttdeci">virtual int init(const DoutPrefixProvider *dpp, optional_yield y, RGWObjectCtx *obj_ctx, ACLOwner &amp;owner, rgw_placement_rule &amp;dest_placement, rgw::sal::Attrs &amp;attrs) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l02150">rgw_sal_rados.cc:2150</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_multipart_writer_html_a36c868aa5002652dab0e2f57cfd7a43a"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_multipart_writer.html#a36c868aa5002652dab0e2f57cfd7a43a">rgw::sal::RadosMultipartWriter::complete</a></div><div class="ttdeci">virtual int complete(size_t accounted_size, const std::string &amp;etag, ceph::real_time *mtime, ceph::real_time set_mtime, std::map&lt; std::string, bufferlist &gt; &amp;attrs, ceph::real_time delete_at, const char *if_match, const char *if_nomatch, const std::string *user_data, rgw_zone_set *zones_trace, bool *canceled, optional_yield y) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l02757">rgw_sal_rados.cc:2757</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_multipart_writer_html_a709a8850e3696ceda76ac3a0a12fe9cf"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_multipart_writer.html#a709a8850e3696ceda76ac3a0a12fe9cf">rgw::sal::RadosMultipartWriter::prepare</a></div><div class="ttdeci">virtual int prepare(optional_yield y) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l02747">rgw_sal_rados.cc:2747</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_multipart_writer_html_aa04fc0de771315e54d0f46bfce8a5ad6"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_multipart_writer.html#aa04fc0de771315e54d0f46bfce8a5ad6">rgw::sal::RadosMultipartWriter::processor</a></div><div class="ttdeci">rgw::putobj::MultipartObjectProcessor processor</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8h_source.html#l00738">rgw_sal_rados.h:738</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_multipart_writer_html_add6537adadf8742330c4832ce1cc4880"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_multipart_writer.html#add6537adadf8742330c4832ce1cc4880">rgw::sal::RadosMultipartWriter::process</a></div><div class="ttdeci">virtual int process(bufferlist &amp;&amp;data, uint64_t offset) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l02752">rgw_sal_rados.cc:2752</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_notification_html_a29f517fabe959de644ad1a7e62255a11"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_notification.html#a29f517fabe959de644ad1a7e62255a11">rgw::sal::RadosNotification::publish_reserve</a></div><div class="ttdeci">virtual int publish_reserve(const DoutPrefixProvider *dpp, RGWObjTags *obj_tags=nullptr) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l02690">rgw_sal_rados.cc:2690</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_notification_html_a666ca23f4a1d3bd11911e8e7dd12690c"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_notification.html#a666ca23f4a1d3bd11911e8e7dd12690c">rgw::sal::RadosNotification::res</a></div><div class="ttdeci">rgw::notify::reservation_t res</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8h_source.html#l00629">rgw_sal_rados.h:629</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_notification_html_ac2130e17f5599a54d1b9ef6bebc82256"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_notification.html#ac2130e17f5599a54d1b9ef6bebc82256">rgw::sal::RadosNotification::publish_commit</a></div><div class="ttdeci">virtual int publish_commit(const DoutPrefixProvider *dpp, uint64_t size, const ceph::real_time &amp;mtime, const std::string &amp;etag, const std::string &amp;version) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l02695">rgw_sal_rados.cc:2695</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_o_i_d_c_provider_html_a5eb9f9ee3f10a8f8c950b4771d0da129"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_o_i_d_c_provider.html#a5eb9f9ee3f10a8f8c950b4771d0da129">rgw::sal::RadosOIDCProvider::store</a></div><div class="ttdeci">RadosStore * store</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8h_source.html#l00792">rgw_sal_rados.h:792</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_o_i_d_c_provider_html_aa7e0f02f7454165b6538ea40f4de2ed4"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_o_i_d_c_provider.html#aa7e0f02f7454165b6538ea40f4de2ed4">rgw::sal::RadosOIDCProvider::store_url</a></div><div class="ttdeci">virtual int store_url(const DoutPrefixProvider *dpp, const std::string &amp;url, bool exclusive, optional_yield y) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l02864">rgw_sal_rados.cc:2864</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_o_i_d_c_provider_html_ad0dee566c284e50783335be58ef10f67"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_o_i_d_c_provider.html#ad0dee566c284e50783335be58ef10f67">rgw::sal::RadosOIDCProvider::read_url</a></div><div class="ttdeci">virtual int read_url(const DoutPrefixProvider *dpp, const std::string &amp;url, const std::string &amp;tenant) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l02875">rgw_sal_rados.cc:2875</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_o_i_d_c_provider_html_ae0c967a260153a65a58d91853cfe3a30"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_o_i_d_c_provider.html#ae0c967a260153a65a58d91853cfe3a30">rgw::sal::RadosOIDCProvider::delete_obj</a></div><div class="ttdeci">virtual int delete_obj(const DoutPrefixProvider *dpp, optional_yield y) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l02900">rgw_sal_rados.cc:2900</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_o_i_d_c_provider_html_ae4490d9e1bb29323d26c1d998674d275"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_o_i_d_c_provider.html#ae4490d9e1bb29323d26c1d998674d275">rgw::sal::RadosOIDCProvider::encode</a></div><div class="ttdeci">void encode(bufferlist &amp;bl) const</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8h_source.html#l00800">rgw_sal_rados.h:800</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_o_i_d_c_provider_html_ae4c2c0b2ce2b40601e18a00526b4a540"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_o_i_d_c_provider.html#ae4c2c0b2ce2b40601e18a00526b4a540">rgw::sal::RadosOIDCProvider::decode</a></div><div class="ttdeci">void decode(bufferlist::const_iterator &amp;bl)</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8h_source.html#l00803">rgw_sal_rados.h:803</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_object_html"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_object.html">rgw::sal::RadosObject</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8h_source.html#l00094">rgw_sal_rados.h:94</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_object_html_a0ac066b99684f4f14127604ec387244f"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_object.html#a0ac066b99684f4f14127604ec387244f">rgw::sal::RadosObject::delete_object</a></div><div class="ttdeci">virtual int delete_object(const DoutPrefixProvider *dpp, RGWObjectCtx *obj_ctx, optional_yield y, bool prevent_versioning) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01947">rgw_sal_rados.cc:1947</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_object_html_a0fd59a0f2445863b8773b0a8efb47ffe"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_object.html#a0fd59a0f2445863b8773b0a8efb47ffe">rgw::sal::RadosObject::get_obj_attrs</a></div><div class="ttdeci">virtual int get_obj_attrs(RGWObjectCtx *rctx, optional_yield y, const DoutPrefixProvider *dpp, rgw_obj *target_obj=NULL) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01560">rgw_sal_rados.cc:1560</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_object_html_a29091f3946d5615e3434955ff1e5a005"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_object.html#a29091f3946d5615e3434955ff1e5a005">rgw::sal::RadosObject::read_attrs</a></div><div class="ttdeci">int read_attrs(const DoutPrefixProvider *dpp, RGWRados::Object::Read &amp;read_op, optional_yield y, rgw_obj *target_obj=nullptr)</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01534">rgw_sal_rados.cc:1534</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_object_html_a2c0fa7cd7ec2f85f432bc1f055c35a68"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_object.html#a2c0fa7cd7ec2f85f432bc1f055c35a68">rgw::sal::RadosObject::get_read_op</a></div><div class="ttdeci">virtual std::unique_ptr&lt; ReadOp &gt; get_read_op(RGWObjectCtx *) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01854">rgw_sal_rados.cc:1854</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_object_html_a2e86c74784581918b9891beeaa0584c2"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_object.html#a2e86c74784581918b9891beeaa0584c2">rgw::sal::RadosObject::delete_obj_aio</a></div><div class="ttdeci">virtual int delete_obj_aio(const DoutPrefixProvider *dpp, RGWObjState *astate, Completions *aio, bool keep_index_consistent, optional_yield y) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01961">rgw_sal_rados.cc:1961</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_object_html_a3d43d9111d2bb62a6cd056d91c3d65f4"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_object.html#a3d43d9111d2bb62a6cd056d91c3d65f4">rgw::sal::RadosObject::modify_obj_attrs</a></div><div class="ttdeci">virtual int modify_obj_attrs(RGWObjectCtx *rctx, const char *attr_name, bufferlist &amp;attr_val, optional_yield y, const DoutPrefixProvider *dpp) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01568">rgw_sal_rados.cc:1568</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_object_html_a577b5565b4f06b0f390b74aa2dbe0c84"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_object.html#a577b5565b4f06b0f390b74aa2dbe0c84">rgw::sal::RadosObject::get_max_chunk_size</a></div><div class="ttdeci">int get_max_chunk_size(const DoutPrefixProvider *dpp, rgw_placement_rule placement_rule, uint64_t *max_chunk_size, uint64_t *alignment=nullptr)</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01774">rgw_sal_rados.cc:1774</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_object_html_a586566eb809c7249b5b8ebfff7d40132"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_object.html#a586566eb809c7249b5b8ebfff7d40132">rgw::sal::RadosObject::get_obj_state</a></div><div class="ttdeci">virtual int get_obj_state(const DoutPrefixProvider *dpp, RGWObjectCtx *rctx, RGWObjState **state, optional_yield y, bool follow_olh=true) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01529">rgw_sal_rados.cc:1529</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_object_html_a6346b1f7936bfe5fbcee10a20096c35a"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_object.html#a6346b1f7936bfe5fbcee10a20096c35a">rgw::sal::RadosObject::chown</a></div><div class="ttdeci">virtual int chown(User &amp;new_user, const DoutPrefixProvider *dpp, optional_yield y) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01699">rgw_sal_rados.cc:1699</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_object_html_a7f8e5e3d5c6822a23613a20ab9f1c50d"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_object.html#a7f8e5e3d5c6822a23613a20ab9f1c50d">rgw::sal::RadosObject::placement_rules_match</a></div><div class="ttdeci">virtual bool placement_rules_match(rgw_placement_rule &amp;r1, rgw_placement_rule &amp;r2) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01785">rgw_sal_rados.cc:1785</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_object_html_a8f2d296ee77950b96f51c572f174597f"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_object.html#a8f2d296ee77950b96f51c572f174597f">rgw::sal::RadosObject::omap_get_all</a></div><div class="ttdeci">virtual int omap_get_all(const DoutPrefixProvider *dpp, std::map&lt; std::string, bufferlist &gt; *m, optional_yield y) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01656">rgw_sal_rados.cc:1656</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_object_html_a8f6bd447317806dd0cab1d3f4bb8b289"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_object.html#a8f6bd447317806dd0cab1d3f4bb8b289">rgw::sal::RadosObject::is_expired</a></div><div class="ttdeci">virtual bool is_expired() override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01607">rgw_sal_rados.cc:1607</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_object_html_a97aafcff22608ecf4d912018ae9da833"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_object.html#a97aafcff22608ecf4d912018ae9da833">rgw::sal::RadosObject::copy_object</a></div><div class="ttdeci">virtual int copy_object(RGWObjectCtx &amp;obj_ctx, User *user, req_info *info, const rgw_zone_id &amp;source_zone, rgw::sal::Object *dest_object, rgw::sal::Bucket *dest_bucket, rgw::sal::Bucket *src_bucket, const rgw_placement_rule &amp;dest_placement, ceph::real_time *src_mtime, ceph::real_time *mtime, const ceph::real_time *mod_ptr, const ceph::real_time *unmod_ptr, bool high_precision_time, const char *if_match, const char *if_nomatch, AttrsMod attrs_mod, bool copy_if_newer, Attrs &amp;attrs, RGWObjCategory category, uint64_t olh_epoch, boost::optional&lt; ceph::real_time &gt; delete_at, std::string *version_id, std::string *tag, std::string *etag, void(*progress_cb)(off_t, void *), void *progress_data, const DoutPrefixProvider *dpp, optional_yield y) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01971">rgw_sal_rados.cc:1971</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_object_html_a98509cb1a6c8638d9342142b85dab7ef"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_object.html#a98509cb1a6c8638d9342142b85dab7ef">rgw::sal::RadosObject::omap_set_val_by_key</a></div><div class="ttdeci">virtual int omap_set_val_by_key(const DoutPrefixProvider *dpp, const std::string &amp;key, bufferlist &amp;val, bool must_exist, optional_yield y) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01685">rgw_sal_rados.cc:1685</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_object_html_a9c8f680e6d99d8a965ae78eaf6c7cd87"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_object.html#a9c8f680e6d99d8a965ae78eaf6c7cd87">rgw::sal::RadosObject::dump_obj_layout</a></div><div class="ttdeci">virtual int dump_obj_layout(const DoutPrefixProvider *dpp, optional_yield y, Formatter *f, RGWObjectCtx *obj_ctx) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01805">rgw_sal_rados.cc:1805</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_object_html_aa32ef033498062359c622531cd490d17"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_object.html#aa32ef033498062359c622531cd490d17">rgw::sal::RadosObject::swift_versioning_restore</a></div><div class="ttdeci">virtual int swift_versioning_restore(RGWObjectCtx *obj_ctx, bool &amp;restored, const DoutPrefixProvider *dpp) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l02036">rgw_sal_rados.cc:2036</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_object_html_aa5978843e4602fd0a345eab1ecb5b701"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_object.html#aa5978843e4602fd0a345eab1ecb5b701">rgw::sal::RadosObject::get_max_aligned_size</a></div><div class="ttdeci">void get_max_aligned_size(uint64_t size, uint64_t alignment, uint64_t *max_size)</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01779">rgw_sal_rados.cc:1779</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_object_html_ab69fb82f05332f101cecf9522d1aa2a4"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_object.html#ab69fb82f05332f101cecf9522d1aa2a4">rgw::sal::RadosObject::transition</a></div><div class="ttdeci">virtual int transition(RGWObjectCtx &amp;rctx, Bucket *bucket, const rgw_placement_rule &amp;placement_rule, const real_time &amp;mtime, uint64_t olh_epoch, const DoutPrefixProvider *dpp, optional_yield y) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01763">rgw_sal_rados.cc:1763</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_object_html_abe04e07d0aeee8ca25c956ba75fe57ed"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_object.html#abe04e07d0aeee8ca25c956ba75fe57ed">rgw::sal::RadosObject::swift_versioning_copy</a></div><div class="ttdeci">virtual int swift_versioning_copy(RGWObjectCtx *obj_ctx, const DoutPrefixProvider *dpp, optional_yield y) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l02048">rgw_sal_rados.cc:2048</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_object_html_abecff7f76a642d4267d0241601f40950"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_object.html#abecff7f76a642d4267d0241601f40950">rgw::sal::RadosObject::get_raw_obj</a></div><div class="ttdeci">void get_raw_obj(rgw_raw_obj *raw_obj)</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01639">rgw_sal_rados.cc:1639</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_object_html_abf23dd6aa5878ba92af569a0a7c5c5c0"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_object.html#abf23dd6aa5878ba92af569a0a7c5c5c0">rgw::sal::RadosObject::store</a></div><div class="ttdeci">RadosStore * store</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8h_source.html#l00096">rgw_sal_rados.h:96</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_object_html_ac9bdce3a677d9ca9a50672cf69d96410"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_object.html#ac9bdce3a677d9ca9a50672cf69d96410">rgw::sal::RadosObject::set_compressed</a></div><div class="ttdeci">virtual void set_compressed(RGWObjectCtx *rctx) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01590">rgw_sal_rados.cc:1590</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_object_html_accaee46dbf8be74393bd87f9fb3c7ee5"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_object.html#accaee46dbf8be74393bd87f9fb3c7ee5">rgw::sal::RadosObject::~RadosObject</a></div><div class="ttdeci">virtual ~RadosObject()</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01527">rgw_sal_rados.cc:1527</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_object_html_acd4fede65a86f89d0170c22841075488"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_object.html#acd4fede65a86f89d0170c22841075488">rgw::sal::RadosObject::gen_rand_obj_instance_name</a></div><div class="ttdeci">virtual void gen_rand_obj_instance_name() override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01627">rgw_sal_rados.cc:1627</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_object_html_acea67db971e06dc099d58c6a3e53cdc3"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_object.html#acea67db971e06dc099d58c6a3e53cdc3">rgw::sal::RadosObject::omap_get_vals</a></div><div class="ttdeci">virtual int omap_get_vals(const DoutPrefixProvider *dpp, const std::string &amp;marker, uint64_t count, std::map&lt; std::string, bufferlist &gt; *m, bool *pmore, optional_yield y) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01644">rgw_sal_rados.cc:1644</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_object_html_adcde0d3f9649697f0e85f814038a621a"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_object.html#adcde0d3f9649697f0e85f814038a621a">rgw::sal::RadosObject::get_serializer</a></div><div class="ttdeci">virtual MPSerializer * get_serializer(const DoutPrefixProvider *dpp, const std::string &amp;lock_name) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01758">rgw_sal_rados.cc:1758</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_object_html_ae52f58a6f44744d4201f0dbafbe4fd23"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_object.html#ae52f58a6f44744d4201f0dbafbe4fd23">rgw::sal::RadosObject::get_delete_op</a></div><div class="ttdeci">virtual std::unique_ptr&lt; DeleteOp &gt; get_delete_op(RGWObjectCtx *) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01905">rgw_sal_rados.cc:1905</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_object_html_ae8437f6b12fd3ae2cfdd54b19edd504b"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_object.html#ae8437f6b12fd3ae2cfdd54b19edd504b">rgw::sal::RadosObject::delete_obj_attrs</a></div><div class="ttdeci">virtual int delete_obj_attrs(const DoutPrefixProvider *dpp, RGWObjectCtx *rctx, const char *attr_name, optional_yield y) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01580">rgw_sal_rados.cc:1580</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_object_html_aed46c22fb2d5fb44469093a7294a54e7"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_object.html#aed46c22fb2d5fb44469093a7294a54e7">rgw::sal::RadosObject::omap_get_vals_by_keys</a></div><div class="ttdeci">virtual int omap_get_vals_by_keys(const DoutPrefixProvider *dpp, const std::string &amp;oid, const std::set&lt; std::string &gt; &amp;keys, Attrs *vals) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01667">rgw_sal_rados.cc:1667</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_object_html_aee26f8979cdc2417960dc016ea645307"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_object.html#aee26f8979cdc2417960dc016ea645307">rgw::sal::RadosObject::set_obj_attrs</a></div><div class="ttdeci">virtual int set_obj_attrs(const DoutPrefixProvider *dpp, RGWObjectCtx *rctx, Attrs *setattrs, Attrs *delattrs, optional_yield y, rgw_obj *target_obj=NULL) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01544">rgw_sal_rados.cc:1544</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_object_html_aef2c725896367b2e9779f57cffd491fd"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_object.html#aef2c725896367b2e9779f57cffd491fd">rgw::sal::RadosObject::raw_obj_to_obj</a></div><div class="ttdeci">void raw_obj_to_obj(const rgw_raw_obj &amp;raw_obj)</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01632">rgw_sal_rados.cc:1632</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_object_html_afa39f991c176dd32de5018d2d07e258f"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_object.html#afa39f991c176dd32de5018d2d07e258f">rgw::sal::RadosObject::set_atomic</a></div><div class="ttdeci">virtual void set_atomic(RGWObjectCtx *rctx) const override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01595">rgw_sal_rados.cc:1595</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_object_html_afd31cf97f82943c0b42f345fbb9f9f9d"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_object.html#afd31cf97f82943c0b42f345fbb9f9f9d">rgw::sal::RadosObject::set_prefetch_data</a></div><div class="ttdeci">virtual void set_prefetch_data(RGWObjectCtx *rctx) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01601">rgw_sal_rados.cc:1601</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_role_html_a0513045765632d6db2607f1e799e0af2"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_role.html#a0513045765632d6db2607f1e799e0af2">rgw::sal::RadosRole::store_info</a></div><div class="ttdeci">virtual int store_info(const DoutPrefixProvider *dpp, bool exclusive, optional_yield y) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l02928">rgw_sal_rados.cc:2928</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_role_html_a0b5a5651be374acb7126cab876400e6f"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_role.html#a0b5a5651be374acb7126cab876400e6f">rgw::sal::RadosRole::create</a></div><div class="ttdeci">virtual int create(const DoutPrefixProvider *dpp, bool exclusive, const std::string &amp;role_id, optional_yield y) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l03075">rgw_sal_rados.cc:3075</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_role_html_a385c9261a23b857a3168c325dc8f08e0"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_role.html#a385c9261a23b857a3168c325dc8f08e0">rgw::sal::RadosRole::delete_obj</a></div><div class="ttdeci">virtual int delete_obj(const DoutPrefixProvider *dpp, optional_yield y) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l03170">rgw_sal_rados.cc:3170</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_role_html_a66d792ed1b40134f0387f55650a03036"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_role.html#a66d792ed1b40134f0387f55650a03036">rgw::sal::RadosRole::store</a></div><div class="ttdeci">RadosStore * store</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8h_source.html#l00809">rgw_sal_rados.h:809</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_role_html_a720efbc858424227cb3783852cae05a2"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_role.html#a720efbc858424227cb3783852cae05a2">rgw::sal::RadosRole::read_info</a></div><div class="ttdeci">virtual int read_info(const DoutPrefixProvider *dpp, optional_yield y) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l03031">rgw_sal_rados.cc:3031</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_role_html_a9e564bf54ab7a0fb284a519a2bb230f9"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_role.html#a9e564bf54ab7a0fb284a519a2bb230f9">rgw::sal::RadosRole::read_id</a></div><div class="ttdeci">virtual int read_id(const DoutPrefixProvider *dpp, const std::string &amp;role_name, const std::string &amp;tenant, std::string &amp;role_id, optional_yield y) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l02981">rgw_sal_rados.cc:2981</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_role_html_ab87f1ca4f4a934dd13609ab2be4acae7"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_role.html#ab87f1ca4f4a934dd13609ab2be4acae7">rgw::sal::RadosRole::store_name</a></div><div class="ttdeci">virtual int store_name(const DoutPrefixProvider *dpp, bool exclusive, optional_yield y) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l02956">rgw_sal_rados.cc:2956</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_role_html_ac5c2f9db1c77fa378c3762f23e6469bc"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_role.html#ac5c2f9db1c77fa378c3762f23e6469bc">rgw::sal::RadosRole::store_path</a></div><div class="ttdeci">virtual int store_path(const DoutPrefixProvider *dpp, bool exclusive, optional_yield y) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l02971">rgw_sal_rados.cc:2971</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_role_html_ae3812cec35ad2a02abb85b2b9403a02c"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_role.html#ae3812cec35ad2a02abb85b2b9403a02c">rgw::sal::RadosRole::read_name</a></div><div class="ttdeci">virtual int read_name(const DoutPrefixProvider *dpp, optional_yield y) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l03005">rgw_sal_rados.cc:3005</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_store_html"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_store.html">rgw::sal::RadosStore</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8h_source.html#l00363">rgw_sal_rados.h:363</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_store_html_a028aa3718776b62e70296ad20a161419"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_store.html#a028aa3718776b62e70296ad20a161419">rgw::sal::RadosStore::get_object</a></div><div class="ttdeci">virtual std::unique_ptr&lt; Object &gt; get_object(const rgw_obj_key &amp;k) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01048">rgw_sal_rados.cc:1048</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_store_html_a0a94e58a4595ab519b4c3f89d33419fe"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_store.html#a0a94e58a4595ab519b4c3f89d33419fe">rgw::sal::RadosStore::zone</a></div><div class="ttdeci">RadosZone zone</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8h_source.html#l00368">rgw_sal_rados.h:368</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_store_html_a0ae68a4b35683c3590a4ff60b5e5ca62"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_store.html#a0ae68a4b35683c3590a4ff60b5e5ca62">rgw::sal::RadosStore::read_all_usage</a></div><div class="ttdeci">virtual int read_all_usage(const DoutPrefixProvider *dpp, uint64_t start_epoch, uint64_t end_epoch, uint32_t max_entries, bool *is_truncated, RGWUsageIter &amp;usage_iter, std::map&lt; rgw_user_bucket, rgw_usage_log_entry &gt; &amp;usage) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01296">rgw_sal_rados.cc:1296</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_store_html_a0c7516e851fd0fd9c15db0af8ea2635c"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_store.html#a0c7516e851fd0fd9c15db0af8ea2635c">rgw::sal::RadosStore::get_obj_head_ioctx</a></div><div class="ttdeci">int get_obj_head_ioctx(const DoutPrefixProvider *dpp, const RGWBucketInfo &amp;bucket_info, const rgw_obj &amp;obj, librados::IoCtx *ioctx)</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01522">rgw_sal_rados.cc:1522</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_store_html_a0e18c11acccd1aecb7c3ac0c87083196"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_store.html#a0e18c11acccd1aecb7c3ac0c87083196">rgw::sal::RadosStore::rados</a></div><div class="ttdeci">RGWRados * rados</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8h_source.html#l00365">rgw_sal_rados.h:365</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_store_html_a0ffe1d1f459e76909e4658cd33eed7ea"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_store.html#a0ffe1d1f459e76909e4658cd33eed7ea">rgw::sal::RadosStore::get_user</a></div><div class="ttdeci">virtual std::unique_ptr&lt; User &gt; get_user(const rgw_user &amp;u) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l00978">rgw_sal_rados.cc:978</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_store_html_a1aedb6405024534fa89345909869d50c"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_store.html#a1aedb6405024534fa89345909869d50c">rgw::sal::RadosStore::get_raw_obj</a></div><div class="ttdeci">void get_raw_obj(const rgw_placement_rule &amp;placement_rule, const rgw_obj &amp;obj, rgw_raw_obj *raw_obj)</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01227">rgw_sal_rados.cc:1227</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_store_html_a22821494bff388cd1c454246c224547a"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_store.html#a22821494bff388cd1c454246c224547a">rgw::sal::RadosStore::get_atomic_writer</a></div><div class="ttdeci">virtual std::unique_ptr&lt; Writer &gt; get_atomic_writer(const DoutPrefixProvider *dpp, optional_yield y, std::unique_ptr&lt; rgw::sal::Object &gt; _head_obj, const rgw_user &amp;owner, RGWObjectCtx &amp;obj_ctx, const rgw_placement_rule *ptail_placement_rule, uint64_t olh_epoch, const std::string &amp;unique_tag) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01506">rgw_sal_rados.cc:1506</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_store_html_a2a24af2ca7428fcbfba9408ff1cb010d"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_store.html#a2a24af2ca7428fcbfba9408ff1cb010d">rgw::sal::RadosStore::get_bucket</a></div><div class="ttdeci">virtual int get_bucket(const DoutPrefixProvider *dpp, User *u, const rgw_bucket &amp;b, std::unique_ptr&lt; Bucket &gt; *bucket, optional_yield y) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01053">rgw_sal_rados.cc:1053</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_store_html_a2baab075558b74ebeb4ebba1892dbbc0"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_store.html#a2baab075558b74ebeb4ebba1892dbbc0">rgw::sal::RadosStore::get_sync_policy_handler</a></div><div class="ttdeci">virtual int get_sync_policy_handler(const DoutPrefixProvider *dpp, std::optional&lt; rgw_zone_id &gt; zone, std::optional&lt; rgw_bucket &gt; bucket, RGWBucketSyncPolicyHandlerRef *phandler, optional_yield y) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01282">rgw_sal_rados.cc:1282</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_store_html_a2dc975e5914a06fe4aa17dc2f047105a"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_store.html#a2dc975e5914a06fe4aa17dc2f047105a">rgw::sal::RadosStore::get_ratelimit</a></div><div class="ttdeci">virtual void get_ratelimit(RGWRateLimitInfo &amp;bucket_ratelimit, RGWRateLimitInfo &amp;user_ratelimit, RGWRateLimitInfo &amp;anon_ratelimit) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01270">rgw_sal_rados.cc:1270</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_store_html_a33deb35a3bd1e08b9626bc469550733e"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_store.html#a33deb35a3bd1e08b9626bc469550733e">rgw::sal::RadosStore::get_user_by_swift</a></div><div class="ttdeci">virtual int get_user_by_swift(const DoutPrefixProvider *dpp, const std::string &amp;user_str, optional_yield y, std::unique_ptr&lt; User &gt; *user) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01028">rgw_sal_rados.cc:1028</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_store_html_a354b58c1e7d62c617254e9a758ae138e"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_store.html#a354b58c1e7d62c617254e9a758ae138e">rgw::sal::RadosStore::zone_unique_id</a></div><div class="ttdeci">virtual std::string zone_unique_id(uint64_t unique_num) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01167">rgw_sal_rados.cc:1167</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_store_html_a415d2a7e4da33505297b6d7640f3ca80"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_store.html#a415d2a7e4da33505297b6d7640f3ca80">rgw::sal::RadosStore::get_user_by_email</a></div><div class="ttdeci">virtual int get_user_by_email(const DoutPrefixProvider *dpp, const std::string &amp;email, optional_yield y, std::unique_ptr&lt; User &gt; *user) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01008">rgw_sal_rados.cc:1008</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_store_html_a454921a5423feb7113efae24cb9bc0ee"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_store.html#a454921a5423feb7113efae24cb9bc0ee">rgw::sal::RadosStore::meta_list_keys_complete</a></div><div class="ttdeci">virtual void meta_list_keys_complete(void *handle) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01331">rgw_sal_rados.cc:1331</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_store_html_a4d411fd91c8582ec76b83d66a81edfe5"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_store.html#a4d411fd91c8582ec76b83d66a81edfe5">rgw::sal::RadosStore::get_role</a></div><div class="ttdeci">virtual std::unique_ptr&lt; RGWRole &gt; get_role(std::string name, std::string tenant, std::string path=&quot;&quot;, std::string trust_policy=&quot;&quot;, std::string max_session_duration_str=&quot;&quot;, std::multimap&lt; std::string, std::string &gt; tags={}) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01357">rgw_sal_rados.cc:1357</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_store_html_a4e8dbe26315884f8ccafedc6f883340f"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_store.html#a4e8dbe26315884f8ccafedc6f883340f">rgw::sal::RadosStore::delete_raw_obj</a></div><div class="ttdeci">int delete_raw_obj(const DoutPrefixProvider *dpp, const rgw_raw_obj &amp;obj)</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01215">rgw_sal_rados.cc:1215</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_store_html_a508eb022ccef2c7f5ac74e8857e59611"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_store.html#a508eb022ccef2c7f5ac74e8857e59611">rgw::sal::RadosStore::get_oidc_providers</a></div><div class="ttdeci">virtual int get_oidc_providers(const DoutPrefixProvider *dpp, const std::string &amp;tenant, std::vector&lt; std::unique_ptr&lt; RGWOIDCProvider &gt; &gt; &amp;providers) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01442">rgw_sal_rados.cc:1442</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_store_html_a62bb26ebcdeb355f92e8cc5a37c227dd"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_store.html#a62bb26ebcdeb355f92e8cc5a37c227dd">rgw::sal::RadosStore::forward_request_to_master</a></div><div class="ttdeci">virtual int forward_request_to_master(const DoutPrefixProvider *dpp, User *user, obj_version *objv, bufferlist &amp;in_data, JSONParser *jp, req_info &amp;info, optional_yield y) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01095">rgw_sal_rados.cc:1095</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_store_html_a63347cae5bf3bd0044c8ddc0b9edc87f"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_store.html#a63347cae5bf3bd0044c8ddc0b9edc87f">rgw::sal::RadosStore::get_lua_script_manager</a></div><div class="ttdeci">virtual std::unique_ptr&lt; LuaScriptManager &gt; get_lua_script_manager() override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01352">rgw_sal_rados.cc:1352</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_store_html_a67548606ee08f5b2a837b3f4879a9e4d"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_store.html#a67548606ee08f5b2a837b3f4879a9e4d">rgw::sal::RadosStore::get_lifecycle</a></div><div class="ttdeci">virtual std::unique_ptr&lt; Lifecycle &gt; get_lifecycle(void) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01194">rgw_sal_rados.cc:1194</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_store_html_a6cad2c87e66ac3005269083c2ee6c98f"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_store.html#a6cad2c87e66ac3005269083c2ee6c98f">rgw::sal::RadosStore::meta_remove</a></div><div class="ttdeci">virtual int meta_remove(const DoutPrefixProvider *dpp, std::string &amp;metadata_key, optional_yield y) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01341">rgw_sal_rados.cc:1341</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_store_html_a6ea771900f5ed54d105cb3f791d93521"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_store.html#a6ea771900f5ed54d105cb3f791d93521">rgw::sal::RadosStore::get_cluster_id</a></div><div class="ttdeci">virtual std::string get_cluster_id(const DoutPrefixProvider *dpp, optional_yield y) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l00983">rgw_sal_rados.cc:983</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_store_html_a70885a92c7e047b1979d72d2eb023c29"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_store.html#a70885a92c7e047b1979d72d2eb023c29">rgw::sal::RadosStore::trim_all_usage</a></div><div class="ttdeci">virtual int trim_all_usage(const DoutPrefixProvider *dpp, uint64_t start_epoch, uint64_t end_epoch) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01308">rgw_sal_rados.cc:1308</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_store_html_a7ba4fba1ca24a05f3399396caa624242"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_store.html#a7ba4fba1ca24a05f3399396caa624242">rgw::sal::RadosStore::finalize</a></div><div class="ttdeci">virtual void finalize(void) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01346">rgw_sal_rados.cc:1346</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_store_html_a7dac599323efccd26486146b401f070d"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_store.html#a7dac599323efccd26486146b401f070d">rgw::sal::RadosStore::cluster_stat</a></div><div class="ttdeci">virtual int cluster_stat(RGWClusterStat &amp;stats) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01177">rgw_sal_rados.cc:1177</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_store_html_a7edc6b0819463ad7a21f6699cb95f786"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_store.html#a7edc6b0819463ad7a21f6699cb95f786">rgw::sal::RadosStore::meta_get_marker</a></div><div class="ttdeci">virtual std::string meta_get_marker(void *handle) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01336">rgw_sal_rados.cc:1336</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_store_html_a7fb106503a015a6a1e243ec9612daa89"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_store.html#a7fb106503a015a6a1e243ec9612daa89">rgw::sal::RadosStore::zone_unique_trans_id</a></div><div class="ttdeci">virtual std::string zone_unique_trans_id(const uint64_t unique_num) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01172">rgw_sal_rados.cc:1172</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_store_html_a8062e3c09097a5fa16e3efae1ff7d843"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_store.html#a8062e3c09097a5fa16e3efae1ff7d843">rgw::sal::RadosStore::log_usage</a></div><div class="ttdeci">virtual int log_usage(const DoutPrefixProvider *dpp, std::map&lt; rgw_user_bucket, RGWUsageBatch &gt; &amp;usage_info) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01237">rgw_sal_rados.cc:1237</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_store_html_a930105eace1be942960a8ed7be607202"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_store.html#a930105eace1be942960a8ed7be607202">rgw::sal::RadosStore::get_user_by_access_key</a></div><div class="ttdeci">virtual int get_user_by_access_key(const DoutPrefixProvider *dpp, const std::string &amp;key, optional_yield y, std::unique_ptr&lt; User &gt; *user) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l00988">rgw_sal_rados.cc:988</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_store_html_a931c7759b4a6be98b4173d56e32e4937"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_store.html#a931c7759b4a6be98b4173d56e32e4937">rgw::sal::RadosStore::get_append_writer</a></div><div class="ttdeci">virtual std::unique_ptr&lt; Writer &gt; get_append_writer(const DoutPrefixProvider *dpp, optional_yield y, std::unique_ptr&lt; rgw::sal::Object &gt; _head_obj, const rgw_user &amp;owner, RGWObjectCtx &amp;obj_ctx, const rgw_placement_rule *ptail_placement_rule, const std::string &amp;unique_tag, uint64_t position, uint64_t *cur_accounted_size) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01488">rgw_sal_rados.cc:1488</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_store_html_a9b3146e69638c07899f1848683da1566"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_store.html#a9b3146e69638c07899f1848683da1566">rgw::sal::RadosStore::get_roles</a></div><div class="ttdeci">virtual int get_roles(const DoutPrefixProvider *dpp, optional_yield y, const std::string &amp;path_prefix, const std::string &amp;tenant, std::vector&lt; std::unique_ptr&lt; RGWRole &gt; &gt; &amp;roles) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01377">rgw_sal_rados.cc:1377</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_store_html_aa277bbc6fcaf6ab83e7681a991c1b57c"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_store.html#aa277bbc6fcaf6ab83e7681a991c1b57c">rgw::sal::RadosStore::get_raw_chunk_size</a></div><div class="ttdeci">int get_raw_chunk_size(const DoutPrefixProvider *dpp, const rgw_raw_obj &amp;obj, uint64_t *chunk_size)</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01232">rgw_sal_rados.cc:1232</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_store_html_aa30185d20bf77ed7537ca77a5970d743"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_store.html#aa30185d20bf77ed7537ca77a5970d743">rgw::sal::RadosStore::get_quota</a></div><div class="ttdeci">virtual void get_quota(RGWQuotaInfo &amp;bucket_quota, RGWQuotaInfo &amp;user_quota) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01264">rgw_sal_rados.cc:1264</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_store_html_aabf846e99f9f01172f86ce5e7fb1ed5b"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_store.html#aabf846e99f9f01172f86ce5e7fb1ed5b">rgw::sal::RadosStore::ctx</a></div><div class="ttdeci">virtual CephContext * ctx(void) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8h_source.html#l00480">rgw_sal_rados.h:480</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_store_html_aaecd01256c4639f8b8c31231022baef0"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_store.html#aaecd01256c4639f8b8c31231022baef0">rgw::sal::RadosStore::get_zone</a></div><div class="ttdeci">virtual Zone * get_zone()</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8h_source.html#l00399">rgw_sal_rados.h:399</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_store_html_ab6a306bab7ce6cc5da2f287d4d9f11e0"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_store.html#ab6a306bab7ce6cc5da2f287d4d9f11e0">rgw::sal::RadosStore::ctl</a></div><div class="ttdeci">RGWCtl * ctl()</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8h_source.html#l00503">rgw_sal_rados.h:503</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_store_html_ab79b1634fc6913447f6c5e6f6c0ef3fd"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_store.html#ab79b1634fc6913447f6c5e6f6c0ef3fd">rgw::sal::RadosStore::log_op</a></div><div class="ttdeci">virtual int log_op(const DoutPrefixProvider *dpp, std::string &amp;oid, bufferlist &amp;bl) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01242">rgw_sal_rados.cc:1242</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_store_html_abba3b20934b96a3f7c568e6b9cd76812"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_store.html#abba3b20934b96a3f7c568e6b9cd76812">rgw::sal::RadosStore::get_oidc_provider</a></div><div class="ttdeci">virtual std::unique_ptr&lt; RGWOIDCProvider &gt; get_oidc_provider() override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01437">rgw_sal_rados.cc:1437</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_store_html_abd2263eda4d5b464d2c14739de887fe3"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_store.html#abd2263eda4d5b464d2c14739de887fe3">rgw::sal::RadosStore::forward_iam_request_to_master</a></div><div class="ttdeci">virtual int forward_iam_request_to_master(const DoutPrefixProvider *dpp, const RGWAccessKey &amp;key, obj_version *objv, bufferlist &amp;in_data, RGWXMLDecoder::XMLParser *parser, req_info &amp;info, optional_yield y) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01128">rgw_sal_rados.cc:1128</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_store_html_abe4f0602b771d5549a02c0a326d6a832"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_store.html#abe4f0602b771d5549a02c0a326d6a832">rgw::sal::RadosStore::svc</a></div><div class="ttdeci">RGWServices * svc()</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8h_source.html#l00501">rgw_sal_rados.h:501</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_store_html_ac5222771afd591b4005a93373859d1ec"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_store.html#ac5222771afd591b4005a93373859d1ec">rgw::sal::RadosStore::delete_raw_obj_aio</a></div><div class="ttdeci">int delete_raw_obj_aio(const DoutPrefixProvider *dpp, const rgw_raw_obj &amp;obj, Completions *aio)</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01220">rgw_sal_rados.cc:1220</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_store_html_aca5c28bc0f22f3f963d0475b594350e1"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_store.html#aca5c28bc0f22f3f963d0475b594350e1">rgw::sal::RadosStore::getRados</a></div><div class="ttdeci">RGWRados * getRados(void)</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8h_source.html#l00499">rgw_sal_rados.h:499</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_store_html_ad0ef21b328aec586b348aebca716241e"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_store.html#ad0ef21b328aec586b348aebca716241e">rgw::sal::RadosStore::register_to_service_map</a></div><div class="ttdeci">virtual int register_to_service_map(const DoutPrefixProvider *dpp, const std::string &amp;daemon_type, const std::map&lt; std::string, std::string &gt; &amp;meta) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01258">rgw_sal_rados.cc:1258</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_store_html_ad59bcd8ba0006275181aca9600b94514"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_store.html#ad59bcd8ba0006275181aca9600b94514">rgw::sal::RadosStore::is_meta_master</a></div><div class="ttdeci">virtual bool is_meta_master() override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01090">rgw_sal_rados.cc:1090</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_store_html_adaba2e4f175ecbedae06942d454902e3"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_store.html#adaba2e4f175ecbedae06942d454902e3">rgw::sal::RadosStore::meta_list_keys_init</a></div><div class="ttdeci">virtual int meta_list_keys_init(const DoutPrefixProvider *dpp, const std::string &amp;section, const std::string &amp;marker, void **phandle) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01321">rgw_sal_rados.cc:1321</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_store_html_ade4d26c308a858dd3b239718759b67ca"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_store.html#ade4d26c308a858dd3b239718759b67ca">rgw::sal::RadosStore::get_data_sync_manager</a></div><div class="ttdeci">virtual RGWDataSyncStatusManager * get_data_sync_manager(const rgw_zone_id &amp;source_zone) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01291">rgw_sal_rados.cc:1291</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_store_html_adfd33e0d00335a0b7bdd95ca844f2c16"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_store.html#adfd33e0d00335a0b7bdd95ca844f2c16">rgw::sal::RadosStore::set_buckets_enabled</a></div><div class="ttdeci">virtual int set_buckets_enabled(const DoutPrefixProvider *dpp, std::vector&lt; rgw_bucket &gt; &amp;buckets, bool enabled) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01277">rgw_sal_rados.cc:1277</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_store_html_ae38caba515a3cd4e832d38abc483c39b"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_store.html#ae38caba515a3cd4e832d38abc483c39b">rgw::sal::RadosStore::meta_list_keys_next</a></div><div class="ttdeci">virtual int meta_list_keys_next(const DoutPrefixProvider *dpp, void *handle, int max, std::list&lt; std::string &gt; &amp;keys, bool *truncated) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01326">rgw_sal_rados.cc:1326</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_store_html_ae3fb73f8318ade9a5b7cf36b515cf646"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_store.html#ae3fb73f8318ade9a5b7cf36b515cf646">rgw::sal::RadosStore::get_notification</a></div><div class="ttdeci">virtual std::unique_ptr&lt; Notification &gt; get_notification(rgw::sal::Object *obj, rgw::sal::Object *src_obj, struct req_state *s, rgw::notify::EventType event_type, const std::string *object_name=nullptr) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01204">rgw_sal_rados.cc:1204</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_store_html_aebb428ac0cd2597be4e9f418dfbd6af7"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_store.html#aebb428ac0cd2597be4e9f418dfbd6af7">rgw::sal::RadosStore::get_config_key_val</a></div><div class="ttdeci">virtual int get_config_key_val(std::string name, bufferlist *bl) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01316">rgw_sal_rados.cc:1316</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_store_html_afb039b5009df54d8f2d69d4dadce3689"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_store.html#afb039b5009df54d8f2d69d4dadce3689">rgw::sal::RadosStore::get_completions</a></div><div class="ttdeci">virtual std::unique_ptr&lt; Completions &gt; get_completions(void) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01199">rgw_sal_rados.cc:1199</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_user_html"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_user.html">rgw::sal::RadosUser</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8h_source.html#l00041">rgw_sal_rados.h:41</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_user_html_a0e7fa190552dd7b2e3c77862484bdbb7"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_user.html#a0e7fa190552dd7b2e3c77862484bdbb7">rgw::sal::RadosUser::merge_and_store_attrs</a></div><div class="ttdeci">virtual int merge_and_store_attrs(const DoutPrefixProvider *dpp, Attrs &amp;new_attrs, optional_yield y) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l00292">rgw_sal_rados.cc:292</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_user_html_a12695203c1613b7bd650cbdb00590447"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_user.html#a12695203c1613b7bd650cbdb00590447">rgw::sal::RadosUser::complete_flush_stats</a></div><div class="ttdeci">virtual int complete_flush_stats(const DoutPrefixProvider *dpp, optional_yield y) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l00313">rgw_sal_rados.cc:313</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_user_html_a2802f2c070b4fb01fb22e6343e94e9e8"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_user.html#a2802f2c070b4fb01fb22e6343e94e9e8">rgw::sal::RadosUser::load_user</a></div><div class="ttdeci">virtual int load_user(const DoutPrefixProvider *dpp, optional_yield y) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l00336">rgw_sal_rados.cc:336</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_user_html_a2dbc3d91fab341255e2da3faaaeb6a24"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_user.html#a2dbc3d91fab341255e2da3faaaeb6a24">rgw::sal::RadosUser::store_user</a></div><div class="ttdeci">virtual int store_user(const DoutPrefixProvider *dpp, optional_yield y, bool exclusive, RGWUserInfo *old_info=nullptr) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l00341">rgw_sal_rados.cc:341</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_user_html_a5740484af9c8b22a6ec16ebf4c01db68"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_user.html#a5740484af9c8b22a6ec16ebf4c01db68">rgw::sal::RadosUser::create_bucket</a></div><div class="ttdeci">virtual int create_bucket(const DoutPrefixProvider *dpp, const rgw_bucket &amp;b, const std::string &amp;zonegroup_id, rgw_placement_rule &amp;placement_rule, std::string &amp;swift_ver_location, const RGWQuotaInfo *pquota_info, const RGWAccessControlPolicy &amp;policy, Attrs &amp;attrs, RGWBucketInfo &amp;info, obj_version &amp;ep_objv, bool exclusive, bool obj_lock_enabled, bool *existed, req_info &amp;req_info, std::unique_ptr&lt; Bucket &gt; *bucket, optional_yield y) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l00148">rgw_sal_rados.cc:148</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_user_html_a784802946b8f6a832d254e22cc864fc3"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_user.html#a784802946b8f6a832d254e22cc864fc3">rgw::sal::RadosUser::RadosBucket</a></div><div class="ttdeci">friend class RadosBucket</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8h_source.html#l00091">rgw_sal_rados.h:91</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_user_html_a86d61263fee864e100dfc3ac05a21346"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_user.html#a86d61263fee864e100dfc3ac05a21346">rgw::sal::RadosUser::list_buckets</a></div><div class="ttdeci">int list_buckets(const DoutPrefixProvider *dpp, const std::string &amp;marker, const std::string &amp;end_marker, uint64_t max, bool need_stats, BucketList &amp;buckets, optional_yield y) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l00126">rgw_sal_rados.cc:126</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_user_html_a87c159e3d195d1afc7e7120ce2dc2347"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_user.html#a87c159e3d195d1afc7e7120ce2dc2347">rgw::sal::RadosUser::read_usage</a></div><div class="ttdeci">virtual int read_usage(const DoutPrefixProvider *dpp, uint64_t start_epoch, uint64_t end_epoch, uint32_t max_entries, bool *is_truncated, RGWUsageIter &amp;usage_iter, std::map&lt; rgw_user_bucket, rgw_usage_log_entry &gt; &amp;usage) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l00318">rgw_sal_rados.cc:318</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_user_html_a8c38f5ca0fd0fa5f5d2e313c889961f5"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_user.html#a8c38f5ca0fd0fa5f5d2e313c889961f5">rgw::sal::RadosUser::read_attrs</a></div><div class="ttdeci">virtual int read_attrs(const DoutPrefixProvider *dpp, optional_yield y) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l00287">rgw_sal_rados.cc:287</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_user_html_a94d45d2e50f506c492c8254a7b2aac97"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_user.html#a94d45d2e50f506c492c8254a7b2aac97">rgw::sal::RadosUser::read_stats_async</a></div><div class="ttdeci">virtual int read_stats_async(const DoutPrefixProvider *dpp, RGWGetUserStats_CB *cb) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l00308">rgw_sal_rados.cc:308</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_user_html_aaf0b783cf1d35c6ab5de3ea64576c622"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_user.html#aaf0b783cf1d35c6ab5de3ea64576c622">rgw::sal::RadosUser::read_stats</a></div><div class="ttdeci">virtual int read_stats(const DoutPrefixProvider *dpp, optional_yield y, RGWStorageStats *stats, ceph::real_time *last_stats_sync=nullptr, ceph::real_time *last_stats_update=nullptr) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l00300">rgw_sal_rados.cc:300</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_user_html_ac6e582a04386589a4f842e62aa884582"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_user.html#ac6e582a04386589a4f842e62aa884582">rgw::sal::RadosUser::remove_user</a></div><div class="ttdeci">virtual int remove_user(const DoutPrefixProvider *dpp, optional_yield y) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l00350">rgw_sal_rados.cc:350</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_user_html_ae569d736f10b51693a23357ed5966695"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_user.html#ae569d736f10b51693a23357ed5966695">rgw::sal::RadosUser::trim_usage</a></div><div class="ttdeci">virtual int trim_usage(const DoutPrefixProvider *dpp, uint64_t start_epoch, uint64_t end_epoch) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l00329">rgw_sal_rados.cc:329</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_user_html_afc68f752f7d061b047f83d10ad95358a"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_user.html#afc68f752f7d061b047f83d10ad95358a">rgw::sal::RadosUser::store</a></div><div class="ttdeci">RadosStore * store</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8h_source.html#l00043">rgw_sal_rados.h:43</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_zone_html_a45f4565c9268cc753badf9f9f0c25681"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_zone.html#a45f4565c9268cc753badf9f9f0c25681">rgw::sal::RadosZone::get_zonegroup</a></div><div class="ttdeci">virtual const RGWZoneGroup &amp; get_zonegroup() override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l02770">rgw_sal_rados.cc:2770</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_zone_html_a9f9d5d0a31ca382ea54d84256fac6a8b"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_zone.html#a9f9d5d0a31ca382ea54d84256fac6a8b">rgw::sal::RadosZone::get_redirect_endpoint</a></div><div class="ttdeci">virtual bool get_redirect_endpoint(std::string *endpoint) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l02805">rgw_sal_rados.cc:2805</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_zone_html_aa01fabd71aba8266f2aca82f4b165538"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_zone.html#aa01fabd71aba8266f2aca82f4b165538">rgw::sal::RadosZone::has_zonegroup_api</a></div><div class="ttdeci">virtual bool has_zonegroup_api(const std::string &amp;api) const override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l02810">rgw_sal_rados.cc:2810</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_zone_html_ab7b15fec53ea786134634efcd8fcaa66"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_zone.html#ab7b15fec53ea786134634efcd8fcaa66">rgw::sal::RadosZone::get_id</a></div><div class="ttdeci">virtual const rgw_zone_id &amp; get_id() override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l02785">rgw_sal_rados.cc:2785</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_zone_html_ab9e8f505a92222feb546dad06e728289"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_zone.html#ab9e8f505a92222feb546dad06e728289">rgw::sal::RadosZone::get_params</a></div><div class="ttdeci">virtual const RGWZoneParams &amp; get_params() override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l02780">rgw_sal_rados.cc:2780</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_zone_html_abc4d9b9ec057db044e8cf34e440e9eba"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_zone.html#abc4d9b9ec057db044e8cf34e440e9eba">rgw::sal::RadosZone::get_realm</a></div><div class="ttdeci">virtual const RGWRealm &amp; get_realm() override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l02790">rgw_sal_rados.cc:2790</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_zone_html_abc6d90b75821ba3b9fbafab9b186cc1f"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_zone.html#abc6d90b75821ba3b9fbafab9b186cc1f">rgw::sal::RadosZone::store</a></div><div class="ttdeci">RadosStore * store</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8h_source.html#l00346">rgw_sal_rados.h:346</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_zone_html_ad18d7553c6c28ae7215718f16e0ce679"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_zone.html#ad18d7553c6c28ae7215718f16e0ce679">rgw::sal::RadosZone::get_current_period_id</a></div><div class="ttdeci">virtual const std::string &amp; get_current_period_id() override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l02815">rgw_sal_rados.cc:2815</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_zone_html_ae2121fd7fb96a0953160cae76f6d52f1"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_zone.html#ae2121fd7fb96a0953160cae76f6d52f1">rgw::sal::RadosZone::get_name</a></div><div class="ttdeci">virtual const std::string &amp; get_name() const override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l02795">rgw_sal_rados.cc:2795</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_rados_zone_html_af34b89b020e827b4fd2b7106385e01a8"><div class="ttname"><a href="classrgw_1_1sal_1_1_rados_zone.html#af34b89b020e827b4fd2b7106385e01a8">rgw::sal::RadosZone::is_writeable</a></div><div class="ttdeci">virtual bool is_writeable() override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l02800">rgw_sal_rados.cc:2800</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_user_html"><div class="ttname"><a href="classrgw_1_1sal_1_1_user.html">rgw::sal::User</a></div><div class="ttdoc">User abstraction</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l00425">rgw_sal.h:425</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_user_html_a42feea796cc4910bfd37426b5a75fb9f"><div class="ttname"><a href="classrgw_1_1sal_1_1_user.html#a42feea796cc4910bfd37426b5a75fb9f">rgw::sal::User::get_info</a></div><div class="ttdeci">RGWUserInfo &amp; get_info()</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l00522">rgw_sal.h:522</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_user_html_a4754e4207c6e7bb946a0fe5c32435661"><div class="ttname"><a href="classrgw_1_1sal_1_1_user.html#a4754e4207c6e7bb946a0fe5c32435661">rgw::sal::User::get_version_tracker</a></div><div class="ttdeci">virtual RGWObjVersionTracker &amp; get_version_tracker()</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l00484">rgw_sal.h:484</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_user_html_a4f6322efe2b6c9c2780eb31cb3a5ca51"><div class="ttname"><a href="classrgw_1_1sal_1_1_user.html#a4f6322efe2b6c9c2780eb31cb3a5ca51">rgw::sal::User::get_id</a></div><div class="ttdeci">const rgw_user &amp; get_id() const</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l00476">rgw_sal.h:476</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_user_html_a922d7b0bedd79d056d2adc0b276ad992"><div class="ttname"><a href="classrgw_1_1sal_1_1_user.html#a922d7b0bedd79d056d2adc0b276ad992">rgw::sal::User::info</a></div><div class="ttdeci">RGWUserInfo info</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l00427">rgw_sal.h:427</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_user_html_a931e289c0a1e1744201c67b9806d0b0d"><div class="ttname"><a href="classrgw_1_1sal_1_1_user.html#a931e289c0a1e1744201c67b9806d0b0d">rgw::sal::User::get_display_name</a></div><div class="ttdeci">virtual std::string &amp; get_display_name()</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l00464">rgw_sal.h:464</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_user_html_aa4a8644f9bd9472537d88565a3562552"><div class="ttname"><a href="classrgw_1_1sal_1_1_user.html#aa4a8644f9bd9472537d88565a3562552">rgw::sal::User::objv_tracker</a></div><div class="ttdeci">RGWObjVersionTracker objv_tracker</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l00428">rgw_sal.h:428</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_user_html_ab1ff4fde76dc54489e69353c952eed5d"><div class="ttname"><a href="classrgw_1_1sal_1_1_user.html#ab1ff4fde76dc54489e69353c952eed5d">rgw::sal::User::attrs</a></div><div class="ttdeci">Attrs attrs</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l00429">rgw_sal.h:429</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_user_html_ac5400c24c04946ada50a7bbb4155d20d"><div class="ttname"><a href="classrgw_1_1sal_1_1_user.html#ac5400c24c04946ada50a7bbb4155d20d">rgw::sal::User::load_user</a></div><div class="ttdeci">virtual int load_user(const DoutPrefixProvider *dpp, optional_yield y)=0</div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_user_html_adb49139a11a243f7318b99466c52cc67"><div class="ttname"><a href="classrgw_1_1sal_1_1_user.html#adb49139a11a243f7318b99466c52cc67">rgw::sal::User::set_attrs</a></div><div class="ttdeci">virtual void set_attrs(Attrs &amp;_attrs)</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l00488">rgw_sal.h:488</a></div></div>
<div class="ttc" id="aclassrgw_1_1sal_1_1_zone_html_aad5682df06309df9be7bc8fdab823b50"><div class="ttname"><a href="classrgw_1_1sal_1_1_zone.html#aad5682df06309df9be7bc8fdab823b50">rgw::sal::Zone::get_params</a></div><div class="ttdeci">virtual const RGWZoneParams &amp; get_params()=0</div></div>
<div class="ttc" id="aclassrgw__obj__select_html_a51963d514b5a6273b3c5a395aa3346af"><div class="ttname"><a href="classrgw__obj__select.html#a51963d514b5a6273b3c5a395aa3346af">rgw_obj_select::get_raw_obj</a></div><div class="ttdeci">rgw_raw_obj get_raw_obj(const RGWZoneGroup &amp;zonegroup, const RGWZoneParams &amp;zone_params) const</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8cc_source.html#l00143">rgw_rados.cc:143</a></div></div>
<div class="ttc" id="acls__fifo__legacy_8cc_html_a0341b0ec09e77f9d6274d5b1517f7711"><div class="ttname"><a href="cls__fifo__legacy_8cc.html#a0341b0ec09e77f9d6274d5b1517f7711">entries</a></div><div class="ttdeci">std::vector&lt; fifo::part_list_entry &gt; * entries</div><div class="ttdef"><b>Definition</b> <a href="cls__fifo__legacy_8cc_source.html#l00249">cls_fifo_legacy.cc:249</a></div></div>
<div class="ttc" id="acls__fifo__legacy_8cc_html_aa76801f7597f40e158b5f38b2e6466c5"><div class="ttname"><a href="cls__fifo__legacy_8cc.html#aa76801f7597f40e158b5f38b2e6466c5">cct</a></div><div class="ttdeci">CephContext * cct</div><div class="ttdef"><b>Definition</b> <a href="cls__fifo__legacy_8cc_source.html#l00247">cls_fifo_legacy.cc:247</a></div></div>
<div class="ttc" id="agroup___r_g_w_s_a_l_html_gab1b58d5f8747844fae5ddfb48fadf7bc"><div class="ttname"><a href="group___r_g_w_s_a_l.html#gab1b58d5f8747844fae5ddfb48fadf7bc">rgw::sal::Attrs</a></div><div class="ttdeci">std::map&lt; std::string, ceph::buffer::list &gt; Attrs</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l00053">rgw_common.h:53</a></div></div>
<div class="ttc" id="agroup___r_g_w_s_a_l_html_gae9698675e942bd611260f03685e7a7be"><div class="ttname"><a href="group___r_g_w_s_a_l.html#gae9698675e942bd611260f03685e7a7be">rgw::sal::AttrsMod</a></div><div class="ttdeci">AttrsMod</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l00175">rgw_sal.h:175</a></div></div>
<div class="ttc" id="anamespacergw_1_1notify_html_a09ee70fa21b29e699d562017d4fb191d"><div class="ttname"><a href="namespacergw_1_1notify.html#a09ee70fa21b29e699d562017d4fb191d">rgw::notify::publish_reserve</a></div><div class="ttdeci">int publish_reserve(const DoutPrefixProvider *dpp, EventType event_type, reservation_t &amp;res, const RGWObjTags *req_tags)</div><div class="ttdef"><b>Definition</b> <a href="rgw__notify_8cc_source.html#l00770">rgw_notify.cc:770</a></div></div>
<div class="ttc" id="anamespacergw_1_1notify_html_a11587407d1aff95c9cb4a10979ba813b"><div class="ttname"><a href="namespacergw_1_1notify.html#a11587407d1aff95c9cb4a10979ba813b">rgw::notify::EventType</a></div><div class="ttdeci">EventType</div><div class="ttdef"><b>Definition</b> <a href="rgw__notify__event__type_8h_source.html#l00009">rgw_notify_event_type.h:9</a></div></div>
<div class="ttc" id="anamespacergw_1_1notify_html_aaf327e62903969ad08625620bc30d8a2"><div class="ttname"><a href="namespacergw_1_1notify.html#aaf327e62903969ad08625620bc30d8a2">rgw::notify::publish_commit</a></div><div class="ttdeci">int publish_commit(rgw::sal::Object *obj, uint64_t size, const ceph::real_time &amp;mtime, const std::string &amp;etag, const std::string &amp;version, EventType event_type, reservation_t &amp;res, const DoutPrefixProvider *dpp)</div><div class="ttdef"><b>Definition</b> <a href="rgw__notify_8cc_source.html#l00827">rgw_notify.cc:827</a></div></div>
<div class="ttc" id="anamespacergw_1_1sal_html"><div class="ttname"><a href="namespacergw_1_1sal.html">rgw::sal</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__acl__s3_8h_source.html#l00017">rgw_acl_s3.h:17</a></div></div>
<div class="ttc" id="anamespacergw_1_1sal_html_a104d6b556f1eca2030a571aa28226b8f"><div class="ttname"><a href="namespacergw_1_1sal.html#a104d6b556f1eca2030a571aa28226b8f">rgw::sal::mp_ns</a></div><div class="ttdeci">static string mp_ns</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__dbstore_8cc_source.html#l00901">rgw_sal_dbstore.cc:901</a></div></div>
<div class="ttc" id="anamespacergw_1_1sal_html_a63199cef8a014d479a6fb4d0e5fdf3ef"><div class="ttname"><a href="namespacergw_1_1sal.html#a63199cef8a014d479a6fb4d0e5fdf3ef">rgw::sal::decode_policy</a></div><div class="ttdeci">static int decode_policy(CephContext *cct, bufferlist &amp;bl, RGWAccessControlPolicy *policy)</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l00065">rgw_sal_rados.cc:65</a></div></div>
<div class="ttc" id="anamespacergw_1_1sal_html_aea4de2b93954880b9b73334b9664b1f7"><div class="ttname"><a href="namespacergw_1_1sal.html#aea4de2b93954880b9b73334b9664b1f7">rgw::sal::rgw_op_get_bucket_policy_from_attr</a></div><div class="ttdeci">static int rgw_op_get_bucket_policy_from_attr(const DoutPrefixProvider *dpp, RadosStore *store, User *user, Attrs &amp;bucket_attrs, RGWAccessControlPolicy *policy, optional_yield y)</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l00085">rgw_sal_rados.cc:85</a></div></div>
<div class="ttc" id="anamespacergw_1_1sal_html_afa6be74dee4567d008d67ee76681e757"><div class="ttname"><a href="namespacergw_1_1sal.html#afa6be74dee4567d008d67ee76681e757">rgw::sal::listing_max_entries</a></div><div class="ttdeci">static constexpr size_t listing_max_entries</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l00063">rgw_sal_rados.cc:63</a></div></div>
<div class="ttc" id="anamespacergw_html_a34a5757756e9618325f611b073ccd448"><div class="ttname"><a href="namespacergw.html#a34a5757756e9618325f611b073ccd448">rgw::encode</a></div><div class="ttdeci">void encode(const bucket_index_normal_layout &amp;l, bufferlist &amp;bl, uint64_t f)</div><div class="ttdef"><b>Definition</b> <a href="rgw__bucket__layout_8cc_source.html#l00020">rgw_bucket_layout.cc:20</a></div></div>
<div class="ttc" id="anamespacergw_html_a49e77e75ed539fdbde0dcc092bb76467"><div class="ttname"><a href="namespacergw.html#a49e77e75ed539fdbde0dcc092bb76467">rgw::decode</a></div><div class="ttdeci">void decode(bucket_index_normal_layout &amp;l, bufferlist::const_iterator &amp;bl)</div><div class="ttdef"><b>Definition</b> <a href="rgw__bucket__layout_8cc_source.html#l00027">rgw_bucket_layout.cc:27</a></div></div>
<div class="ttc" id="anamespacergw_html_aa241d4c3eac6710432bb13c80ab112e3"><div class="ttname"><a href="namespacergw.html#aa241d4c3eac6710432bb13c80ab112e3">rgw::make_throttle</a></div><div class="ttdeci">auto make_throttle(uint64_t window_size, optional_yield y)</div><div class="ttdef"><b>Definition</b> <a href="rgw__aio__throttle_8h_source.html#l00116">rgw_aio_throttle.h:116</a></div></div>
<div class="ttc" id="anamespacestd_html"><div class="ttname"><a href="namespacestd.html">std</a></div><div class="ttdef"><b>Definition</b> <a href="picojson_8h_source.html#l01152">picojson.h:1152</a></div></div>
<div class="ttc" id="argw__acl_8h_html"><div class="ttname"><a href="rgw__acl_8h.html">rgw_acl.h</a></div></div>
<div class="ttc" id="argw__acl_8h_html_a2f73f019a3c8883ebb2732fdaf8f9811"><div class="ttname"><a href="rgw__acl_8h.html#a2f73f019a3c8883ebb2732fdaf8f9811">RGW_PERM_FULL_CONTROL</a></div><div class="ttdeci">#define RGW_PERM_FULL_CONTROL</div><div class="ttdef"><b>Definition</b> <a href="rgw__acl_8h_source.html#l00026">rgw_acl.h:26</a></div></div>
<div class="ttc" id="argw__acl__s3_8h_html"><div class="ttname"><a href="rgw__acl__s3_8h.html">rgw_acl_s3.h</a></div></div>
<div class="ttc" id="argw__admin_8cc_html_a2ef30c42cbc289d899a8be5d2d8f77d0"><div class="ttname"><a href="rgw__admin_8cc.html#a2ef30c42cbc289d899a8be5d2d8f77d0">usage</a></div><div class="ttdeci">void usage()</div><div class="ttdef"><b>Definition</b> <a href="rgw__admin_8cc_source.html#l00108">rgw_admin.cc:108</a></div></div>
<div class="ttc" id="argw__admin_8cc_html_a6fdb26d64b14d837b60e83a6ca3e2863"><div class="ttname"><a href="rgw__admin_8cc.html#a6fdb26d64b14d837b60e83a6ca3e2863">store</a></div><div class="ttdeci">static rgw::sal::Store * store</div><div class="ttdef"><b>Definition</b> <a href="rgw__admin_8cc_source.html#l00079">rgw_admin.cc:79</a></div></div>
<div class="ttc" id="argw__admin_8cc_html_ab596b9e1a1fc78e98a4d13a66578b658"><div class="ttname"><a href="rgw__admin_8cc.html#ab596b9e1a1fc78e98a4d13a66578b658">encode_json</a></div><div class="ttdeci">void encode_json(const char *name, const RGWBucketSyncFlowManager::pipe_set &amp;pset, Formatter *f)</div><div class="ttdef"><b>Definition</b> <a href="rgw__admin_8cc_source.html#l02560">rgw_admin.cc:2560</a></div></div>
<div class="ttc" id="argw__admin_8cc_html_afe3e74bcdf0327f8777c02b83cfea5b5"><div class="ttname"><a href="rgw__admin_8cc.html#afe3e74bcdf0327f8777c02b83cfea5b5">dpp</a></div><div class="ttdeci">static const DoutPrefixProvider * dpp()</div><div class="ttdef"><b>Definition</b> <a href="rgw__admin_8cc_source.html#l00081">rgw_admin.cc:81</a></div></div>
<div class="ttc" id="argw__aio_8cc_html_ad8d5da794a93e87014771f5742ca6c71"><div class="ttname"><a href="rgw__aio_8cc.html#ad8d5da794a93e87014771f5742ca6c71">aio</a></div><div class="ttdeci">Aio * aio</div><div class="ttdef"><b>Definition</b> <a href="rgw__aio_8cc_source.html#l00030">rgw_aio.cc:30</a></div></div>
<div class="ttc" id="argw__aio_8cc_html_ae38055824c6eac64615832ad9d888539"><div class="ttname"><a href="rgw__aio_8cc.html#ae38055824c6eac64615832ad9d888539">r</a></div><div class="ttdeci">AioResult &amp; r</div><div class="ttdef"><b>Definition</b> <a href="rgw__aio_8cc_source.html#l00067">rgw_aio.cc:67</a></div></div>
<div class="ttc" id="argw__aio_8h_html"><div class="ttname"><a href="rgw__aio_8h.html">rgw_aio.h</a></div></div>
<div class="ttc" id="argw__aio__throttle_8h_html"><div class="ttname"><a href="rgw__aio__throttle_8h.html">rgw_aio_throttle.h</a></div></div>
<div class="ttc" id="argw__bucket_8cc_html_a8735d4afd71679718d85762ef4d135b0"><div class="ttname"><a href="rgw__bucket_8cc.html#a8735d4afd71679718d85762ef4d135b0">rgw_remove_object</a></div><div class="ttdeci">int rgw_remove_object(const DoutPrefixProvider *dpp, rgw::sal::Store *store, rgw::sal::Bucket *bucket, rgw_obj_key &amp;key)</div><div class="ttdef"><b>Definition</b> <a href="rgw__bucket_8cc_source.html#l00321">rgw_bucket.cc:321</a></div></div>
<div class="ttc" id="argw__bucket_8h_html"><div class="ttname"><a href="rgw__bucket_8h.html">rgw_bucket.h</a></div></div>
<div class="ttc" id="argw__common_8cc_html_aed9fc4dbe90c2768fde11f826bc8926a"><div class="ttname"><a href="rgw__common_8cc.html#aed9fc4dbe90c2768fde11f826bc8926a">rgw_string_unquote</a></div><div class="ttdeci">string rgw_string_unquote(const string &amp;s)</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8cc_source.html#l00499">rgw_common.cc:499</a></div></div>
<div class="ttc" id="argw__common_8h_html_a09ae9bc8466fcf06b5904c7a737e0552"><div class="ttname"><a href="rgw__common_8h.html#a09ae9bc8466fcf06b5904c7a737e0552">ERR_TOO_SMALL</a></div><div class="ttdeci">#define ERR_TOO_SMALL</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l00216">rgw_common.h:216</a></div></div>
<div class="ttc" id="argw__common_8h_html_a2698dd0774e4e70329180f5e1de7f7da"><div class="ttname"><a href="rgw__common_8h.html#a2698dd0774e4e70329180f5e1de7f7da">RGW_ATTR_COMPRESSION</a></div><div class="ttdeci">#define RGW_ATTR_COMPRESSION</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l00128">rgw_common.h:128</a></div></div>
<div class="ttc" id="argw__common_8h_html_a42c392bddb783ae7f2e707f001505dce"><div class="ttname"><a href="rgw__common_8h.html#a42c392bddb783ae7f2e707f001505dce">ERR_BUCKET_EXISTS</a></div><div class="ttdeci">#define ERR_BUCKET_EXISTS</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l00207">rgw_common.h:207</a></div></div>
<div class="ttc" id="argw__common_8h_html_a4bc9629a22d328ea8a54466e35e86c89"><div class="ttname"><a href="rgw__common_8h.html#a4bc9629a22d328ea8a54466e35e86c89">hex_to_buf</a></div><div class="ttdeci">static int hex_to_buf(const char *hex, char *buf, int len)</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l01990">rgw_common.h:1990</a></div></div>
<div class="ttc" id="argw__common_8h_html_a558d2aac04be1b2ad9db62daa9b8cc7f"><div class="ttname"><a href="rgw__common_8h.html#a558d2aac04be1b2ad9db62daa9b8cc7f">buf_to_hex</a></div><div class="ttdeci">static void buf_to_hex(const unsigned char *const buf, const size_t len, char *const str)</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l01960">rgw_common.h:1960</a></div></div>
<div class="ttc" id="argw__common_8h_html_a5670bf112bcf5bd63ff0c8bcafd09b87"><div class="ttname"><a href="rgw__common_8h.html#a5670bf112bcf5bd63ff0c8bcafd09b87">ERR_NO_SUCH_UPLOAD</a></div><div class="ttdeci">#define ERR_NO_SUCH_UPLOAD</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l00203">rgw_common.h:203</a></div></div>
<div class="ttc" id="argw__common_8h_html_a5b5625986263eef4cf79a0efdcfae436"><div class="ttname"><a href="rgw__common_8h.html#a5b5625986263eef4cf79a0efdcfae436">RGW_ATTR_DELETE_AT</a></div><div class="ttdeci">#define RGW_ATTR_DELETE_AT</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l00083">rgw_common.h:83</a></div></div>
<div class="ttc" id="argw__common_8h_html_a7020478e92d985c3f78e2ae9e5481f0a"><div class="ttname"><a href="rgw__common_8h.html#a7020478e92d985c3f78e2ae9e5481f0a">rgw_obj_index_key</a></div><div class="ttdeci">cls_rgw_obj_key rgw_obj_index_key</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l01246">rgw_common.h:1246</a></div></div>
<div class="ttc" id="argw__common_8h_html_a96c0eb332e5a1a72d8e3d08e11f67b05"><div class="ttname"><a href="rgw__common_8h.html#a96c0eb332e5a1a72d8e3d08e11f67b05">ERR_DELETE_CONFLICT</a></div><div class="ttdeci">#define ERR_DELETE_CONFLICT</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l00250">rgw_common.h:250</a></div></div>
<div class="ttc" id="argw__common_8h_html_ab8ddf05d41f83efb6bbbc02e1c30dfcfa5e2a5ef06b97d78ec663b2045de86bae"><div class="ttname"><a href="rgw__common_8h.html#ab8ddf05d41f83efb6bbbc02e1c30dfcfa5e2a5ef06b97d78ec663b2045de86bae">BUCKET_OBJ_LOCK_ENABLED</a></div><div class="ttdeci">@ BUCKET_OBJ_LOCK_ENABLED</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l01057">rgw_common.h:1057</a></div></div>
<div class="ttc" id="argw__common_8h_html_ab8ddf05d41f83efb6bbbc02e1c30dfcfac8b8d956b2aed3e2fab65a42cab59cd4"><div class="ttname"><a href="rgw__common_8h.html#ab8ddf05d41f83efb6bbbc02e1c30dfcfac8b8d956b2aed3e2fab65a42cab59cd4">BUCKET_VERSIONED</a></div><div class="ttdeci">@ BUCKET_VERSIONED</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l01053">rgw_common.h:1053</a></div></div>
<div class="ttc" id="argw__common_8h_html_aba1a4d306847a4961003f8703daea614"><div class="ttname"><a href="rgw__common_8h.html#aba1a4d306847a4961003f8703daea614">ERR_NO_SUCH_BUCKET</a></div><div class="ttdeci">#define ERR_NO_SUCH_BUCKET</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l00196">rgw_common.h:196</a></div></div>
<div class="ttc" id="argw__common_8h_html_ac9a37f7a4f4ad09bae48d3c752920758"><div class="ttname"><a href="rgw__common_8h.html#ac9a37f7a4f4ad09bae48d3c752920758">RGW_ATTR_ACL</a></div><div class="ttdeci">#define RGW_ATTR_ACL</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l00070">rgw_common.h:70</a></div></div>
<div class="ttc" id="argw__common_8h_html_ad649463d89c29411a117577fd7eb9ebd"><div class="ttname"><a href="rgw__common_8h.html#ad649463d89c29411a117577fd7eb9ebd">ERR_INVALID_PART</a></div><div class="ttdeci">#define ERR_INVALID_PART</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l00201">rgw_common.h:201</a></div></div>
<div class="ttc" id="argw__common_8h_html_af7c58a0981432866d722813e5f64066a"><div class="ttname"><a href="rgw__common_8h.html#af7c58a0981432866d722813e5f64066a">RGW_ATTR_ETAG</a></div><div class="ttdeci">#define RGW_ATTR_ETAG</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l00074">rgw_common.h:74</a></div></div>
<div class="ttc" id="argw__http__client_8cc_html_aba463bb153e727781020a037c44a6134"><div class="ttname"><a href="rgw__http__client_8cc.html#aba463bb153e727781020a037c44a6134">handles</a></div><div class="ttdeci">static RGWCurlHandles * handles</div><div class="ttdef"><b>Definition</b> <a href="rgw__http__client_8cc_source.html#l00265">rgw_http_client.cc:265</a></div></div>
<div class="ttc" id="argw__lc_8h_html"><div class="ttname"><a href="rgw__lc_8h.html">rgw_lc.h</a></div></div>
<div class="ttc" id="argw__multi_8cc_html_a037d1c2f95c646153e9fc9307940b1e4"><div class="ttname"><a href="rgw__multi_8cc.html#a037d1c2f95c646153e9fc9307940b1e4">is_v2_upload_id</a></div><div class="ttdeci">bool is_v2_upload_id(const string &amp;upload_id)</div><div class="ttdef"><b>Definition</b> <a href="rgw__multi_8cc_source.html#l00076">rgw_multi.cc:76</a></div></div>
<div class="ttc" id="argw__multi_8h_html"><div class="ttname"><a href="rgw__multi_8h.html">rgw_multi.h</a></div></div>
<div class="ttc" id="argw__multi_8h_html_a3829d97c2842f97de70dab72b6c35e05"><div class="ttname"><a href="rgw__multi_8h.html#a3829d97c2842f97de70dab72b6c35e05">MULTIPART_UPLOAD_ID_PREFIX</a></div><div class="ttdeci">#define MULTIPART_UPLOAD_ID_PREFIX</div><div class="ttdef"><b>Definition</b> <a href="rgw__multi_8h_source.html#l00018">rgw_multi.h:18</a></div></div>
<div class="ttc" id="argw__op_8cc_html_af8e19e5f0f622fd1691f37c955943560"><div class="ttname"><a href="rgw__op_8cc.html#af8e19e5f0f622fd1691f37c955943560">mp_filter</a></div><div class="ttdeci">static MultipartMetaFilter mp_filter</div><div class="ttdef"><b>Definition</b> <a href="rgw__op_8cc_source.html#l00096">rgw_op.cc:96</a></div></div>
<div class="ttc" id="argw__period__puller_8cc_html_a2f797364c3b14adcbd8b1a5067c09d32"><div class="ttname"><a href="rgw__period__puller_8cc.html#a2f797364c3b14adcbd8b1a5067c09d32">MAX_REST_RESPONSE</a></div><div class="ttdeci">#define MAX_REST_RESPONSE</div></div>
<div class="ttc" id="argw__pubsub_8h_html"><div class="ttname"><a href="rgw__pubsub_8h.html">rgw_pubsub.h</a></div></div>
<div class="ttc" id="argw__rados_8h_html_a9c06e27db5e4156f498f900bc7f81720"><div class="ttname"><a href="rgw__rados_8h.html#a9c06e27db5e4156f498f900bc7f81720">PUT_OBJ_CREATE</a></div><div class="ttdeci">#define PUT_OBJ_CREATE</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8h_source.html#l00062">rgw_rados.h:62</a></div></div>
<div class="ttc" id="argw__rados_8h_html_ac2b5faa6fadfd68d3b93456958a0b86d"><div class="ttname"><a href="rgw__rados_8h.html#ac2b5faa6fadfd68d3b93456958a0b86d">PUT_OBJ_CREATE_EXCL</a></div><div class="ttdeci">#define PUT_OBJ_CREATE_EXCL</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8h_source.html#l00064">rgw_rados.h:64</a></div></div>
<div class="ttc" id="argw__rados_8h_html_ae0aa963272f470d3884b7a4160593740"><div class="ttname"><a href="rgw__rados_8h.html#ae0aa963272f470d3884b7a4160593740">RGW_OBJ_NS_MULTIPART</a></div><div class="ttdeci">#define RGW_OBJ_NS_MULTIPART</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8h_source.html#l00066">rgw_rados.h:66</a></div></div>
<div class="ttc" id="argw__rest__conn_8h_html"><div class="ttname"><a href="rgw__rest__conn_8h.html">rgw_rest_conn.h</a></div></div>
<div class="ttc" id="argw__sal_8cc_html_a770eae85f5b1b32db7e73dc4678d6299"><div class="ttname"><a href="rgw__sal_8cc.html#a770eae85f5b1b32db7e73dc4678d6299">newStore</a></div><div class="ttdeci">rgw::sal::Store * newStore(void)</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l03218">rgw_sal_rados.cc:3218</a></div></div>
<div class="ttc" id="argw__sal_8h_html"><div class="ttname"><a href="rgw__sal_8h.html">rgw_sal.h</a></div><div class="ttdoc">Base abstractions and API for SAL</div></div>
<div class="ttc" id="argw__sal_8h_html_a34a498a236dfdf1358ada02a62afc853"><div class="ttname"><a href="rgw__sal_8h.html#a34a498a236dfdf1358ada02a62afc853">RGWBucketSyncPolicyHandlerRef</a></div><div class="ttdeci">std::shared_ptr&lt; RGWBucketSyncPolicyHandler &gt; RGWBucketSyncPolicyHandlerRef</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l00036">rgw_sal.h:36</a></div></div>
<div class="ttc" id="argw__sal__rados_8cc_html_a5d8d69cf39f5c67f615f808c7751bfa6"><div class="ttname"><a href="rgw__sal__rados_8cc.html#a5d8d69cf39f5c67f615f808c7751bfa6">mp_ns</a></div><div class="ttdeci">static string mp_ns</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l00057">rgw_sal_rados.cc:57</a></div></div>
<div class="ttc" id="argw__sal__rados_8h_html"><div class="ttname"><a href="rgw__sal__rados_8h.html">rgw_sal_rados.h</a></div></div>
<div class="ttc" id="argw__service_8h_html"><div class="ttname"><a href="rgw__service_8h.html">rgw_service.h</a></div></div>
<div class="ttc" id="argw__tools_8cc_html_a046ce687b6bb951e6c13fcb3b373bbe5"><div class="ttname"><a href="rgw__tools_8cc.html#a046ce687b6bb951e6c13fcb3b373bbe5">rgw_delete_system_obj</a></div><div class="ttdeci">int rgw_delete_system_obj(const DoutPrefixProvider *dpp, RGWSI_SysObj *sysobj_svc, const rgw_pool &amp;pool, const string &amp;oid, RGWObjVersionTracker *objv_tracker, optional_yield y)</div><div class="ttdef"><b>Definition</b> <a href="rgw__tools_8cc_source.html#l00240">rgw_tools.cc:240</a></div></div>
<div class="ttc" id="argw__tools_8cc_html_a3e647ae97c113ee3ad07bad363e640b6"><div class="ttname"><a href="rgw__tools_8cc.html#a3e647ae97c113ee3ad07bad363e640b6">rgw_get_system_obj</a></div><div class="ttdeci">int rgw_get_system_obj(RGWSysObjectCtx &amp;obj_ctx, const rgw_pool &amp;pool, const string &amp;key, bufferlist &amp;bl, RGWObjVersionTracker *objv_tracker, real_time *pmtime, optional_yield y, const DoutPrefixProvider *dpp, map&lt; string, bufferlist &gt; *pattrs, rgw_cache_entry_info *cache_info, boost::optional&lt; obj_version &gt; refresh_version, bool raw_attrs)</div><div class="ttdef"><b>Definition</b> <a href="rgw__tools_8cc_source.html#l00187">rgw_tools.cc:187</a></div></div>
<div class="ttc" id="argw__tools_8cc_html_a5a37218cbf7acd34def1915314441451"><div class="ttname"><a href="rgw__tools_8cc.html#a5a37218cbf7acd34def1915314441451">rgw_put_system_obj</a></div><div class="ttdeci">int rgw_put_system_obj(const DoutPrefixProvider *dpp, RGWSysObjectCtx &amp;obj_ctx, const rgw_pool &amp;pool, const string &amp;oid, bufferlist &amp;data, bool exclusive, RGWObjVersionTracker *objv_tracker, real_time set_mtime, optional_yield y, map&lt; string, bufferlist &gt; *pattrs)</div><div class="ttdef"><b>Definition</b> <a href="rgw__tools_8cc_source.html#l00150">rgw_tools.cc:150</a></div></div>
<div class="ttc" id="argw__tools_8cc_html_ac8fd9a95626d93661d7280c9455eba5c"><div class="ttname"><a href="rgw__tools_8cc.html#ac8fd9a95626d93661d7280c9455eba5c">rgw_rados_operate</a></div><div class="ttdeci">int rgw_rados_operate(const DoutPrefixProvider *dpp, librados::IoCtx &amp;ioctx, const std::string &amp;oid, librados::ObjectReadOperation *op, bufferlist *pbl, optional_yield y, int flags)</div><div class="ttdoc">perform the rados operation, using the yield context when given</div><div class="ttdef"><b>Definition</b> <a href="rgw__tools_8cc_source.html#l00254">rgw_tools.cc:254</a></div></div>
<div class="ttc" id="argw__tools_8h_html_a120c104c1c60ab76c39ca67df4da233f"><div class="ttname"><a href="rgw__tools_8h.html#a120c104c1c60ab76c39ca67df4da233f">RGW_NO_SHARD</a></div><div class="ttdeci">#define RGW_NO_SHARD</div><div class="ttdef"><b>Definition</b> <a href="rgw__tools_8h_source.html#l00035">rgw_tools.h:35</a></div></div>
<div class="ttc" id="argw__tracer_8h_html"><div class="ttname"><a href="rgw__tracer_8h.html">rgw_tracer.h</a></div></div>
<div class="ttc" id="argw__tracer_8h_html_a1816c89a8b47049d37496606eabdaca9"><div class="ttname"><a href="rgw__tracer_8h.html#a1816c89a8b47049d37496606eabdaca9">extract_span_context</a></div><div class="ttdeci">static void extract_span_context(const rgw::sal::Attrs &amp;attr, jspan_context &amp;span_ctx)</div><div class="ttdef"><b>Definition</b> <a href="rgw__tracer_8h_source.html#l00030">rgw_tracer.h:30</a></div></div>
<div class="ttc" id="argw__zone_8h_html"><div class="ttname"><a href="rgw__zone_8h.html">rgw_zone.h</a></div></div>
<div class="ttc" id="astruct_r_g_w_access_key_html"><div class="ttname"><a href="struct_r_g_w_access_key.html">RGWAccessKey</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l00478">rgw_common.h:478</a></div></div>
<div class="ttc" id="astruct_r_g_w_bucket_ctl_1_1_bucket_instance_1_1_get_params_html"><div class="ttname"><a href="struct_r_g_w_bucket_ctl_1_1_bucket_instance_1_1_get_params.html">RGWBucketCtl::BucketInstance::GetParams</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__bucket_8h_source.html#l00543">rgw_bucket.h:543</a></div></div>
<div class="ttc" id="astruct_r_g_w_bucket_ctl_1_1_bucket_instance_1_1_get_params_html_a42689240cb78a06ee2ecce24e4499f16"><div class="ttname"><a href="struct_r_g_w_bucket_ctl_1_1_bucket_instance_1_1_get_params.html#a42689240cb78a06ee2ecce24e4499f16">RGWBucketCtl::BucketInstance::GetParams::set_bectx_params</a></div><div class="ttdeci">GetParams &amp; set_bectx_params(std::optional&lt; RGWSI_MetaBackend_CtxParams &gt; _bectx_params)</div><div class="ttdef"><b>Definition</b> <a href="rgw__bucket_8h_source.html#l00578">rgw_bucket.h:578</a></div></div>
<div class="ttc" id="astruct_r_g_w_bucket_ctl_1_1_bucket_instance_1_1_get_params_html_a750d62c6b963fa69942fae07e95aa83a"><div class="ttname"><a href="struct_r_g_w_bucket_ctl_1_1_bucket_instance_1_1_get_params.html#a750d62c6b963fa69942fae07e95aa83a">RGWBucketCtl::BucketInstance::GetParams::set_attrs</a></div><div class="ttdeci">GetParams &amp; set_attrs(std::map&lt; std::string, bufferlist &gt; *_attrs)</div><div class="ttdef"><b>Definition</b> <a href="rgw__bucket_8h_source.html#l00558">rgw_bucket.h:558</a></div></div>
<div class="ttc" id="astruct_r_g_w_bucket_ctl_1_1_bucket_instance_1_1_get_params_html_a8a5f15df849e513df0bff8313f0d33bd"><div class="ttname"><a href="struct_r_g_w_bucket_ctl_1_1_bucket_instance_1_1_get_params.html#a8a5f15df849e513df0bff8313f0d33bd">RGWBucketCtl::BucketInstance::GetParams::set_mtime</a></div><div class="ttdeci">GetParams &amp; set_mtime(ceph::real_time *_mtime)</div><div class="ttdef"><b>Definition</b> <a href="rgw__bucket_8h_source.html#l00553">rgw_bucket.h:553</a></div></div>
<div class="ttc" id="astruct_r_g_w_bucket_ctl_1_1_bucket_instance_1_1_put_params_html"><div class="ttname"><a href="struct_r_g_w_bucket_ctl_1_1_bucket_instance_1_1_put_params.html">RGWBucketCtl::BucketInstance::PutParams</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__bucket_8h_source.html#l00584">rgw_bucket.h:584</a></div></div>
<div class="ttc" id="astruct_r_g_w_bucket_ctl_1_1_bucket_instance_1_1_put_params_html_ae75395f075f4506195757f9b01457c25"><div class="ttname"><a href="struct_r_g_w_bucket_ctl_1_1_bucket_instance_1_1_put_params.html#ae75395f075f4506195757f9b01457c25">RGWBucketCtl::BucketInstance::PutParams::set_attrs</a></div><div class="ttdeci">PutParams &amp; set_attrs(std::map&lt; std::string, bufferlist &gt; *_attrs)</div><div class="ttdef"><b>Definition</b> <a href="rgw__bucket_8h_source.html#l00609">rgw_bucket.h:609</a></div></div>
<div class="ttc" id="astruct_r_g_w_bucket_ent_html_a33cfe5a0bc2030baefece598b4dac1bc"><div class="ttname"><a href="struct_r_g_w_bucket_ent.html#a33cfe5a0bc2030baefece598b4dac1bc">RGWBucketEnt::size</a></div><div class="ttdeci">size_t size</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l01721">rgw_common.h:1721</a></div></div>
<div class="ttc" id="astruct_r_g_w_bucket_ent_html_a377fcf19a29ad712adc0b0f7ee709b70"><div class="ttname"><a href="struct_r_g_w_bucket_ent.html#a377fcf19a29ad712adc0b0f7ee709b70">RGWBucketEnt::creation_time</a></div><div class="ttdeci">ceph::real_time creation_time</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l01723">rgw_common.h:1723</a></div></div>
<div class="ttc" id="astruct_r_g_w_bucket_ent_html_a4a2cf28bf71c2572e51986e10935a901"><div class="ttname"><a href="struct_r_g_w_bucket_ent.html#a4a2cf28bf71c2572e51986e10935a901">RGWBucketEnt::count</a></div><div class="ttdeci">uint64_t count</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l01724">rgw_common.h:1724</a></div></div>
<div class="ttc" id="astruct_r_g_w_bucket_ent_html_abf300fe85eea5c82d015a429e4c6cac0"><div class="ttname"><a href="struct_r_g_w_bucket_ent.html#abf300fe85eea5c82d015a429e4c6cac0">RGWBucketEnt::placement_rule</a></div><div class="ttdeci">rgw_placement_rule placement_rule</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l01729">rgw_common.h:1729</a></div></div>
<div class="ttc" id="astruct_r_g_w_bucket_ent_html_ac719704fc00807a24af41476d13dff38"><div class="ttname"><a href="struct_r_g_w_bucket_ent.html#ac719704fc00807a24af41476d13dff38">RGWBucketEnt::size_rounded</a></div><div class="ttdeci">size_t size_rounded</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l01722">rgw_common.h:1722</a></div></div>
<div class="ttc" id="astruct_r_g_w_bucket_entry_point_html"><div class="ttname"><a href="struct_r_g_w_bucket_entry_point.html">RGWBucketEntryPoint</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l01131">rgw_common.h:1132</a></div></div>
<div class="ttc" id="astruct_r_g_w_bucket_entry_point_html_a2ce61b953958ccb1987175e53bff02a3"><div class="ttname"><a href="struct_r_g_w_bucket_entry_point.html#a2ce61b953958ccb1987175e53bff02a3">RGWBucketEntryPoint::bucket</a></div><div class="ttdeci">rgw_bucket bucket</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l01133">rgw_common.h:1133</a></div></div>
<div class="ttc" id="astruct_r_g_w_bucket_entry_point_html_a4805da40a95da25459ac79c3cf4e9274"><div class="ttname"><a href="struct_r_g_w_bucket_entry_point.html#a4805da40a95da25459ac79c3cf4e9274">RGWBucketEntryPoint::owner</a></div><div class="ttdeci">rgw_user owner</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l01134">rgw_common.h:1134</a></div></div>
<div class="ttc" id="astruct_r_g_w_bucket_entry_point_html_a90955960e6ef0d68b1192925905db4d2"><div class="ttname"><a href="struct_r_g_w_bucket_entry_point.html#a90955960e6ef0d68b1192925905db4d2">RGWBucketEntryPoint::creation_time</a></div><div class="ttdeci">ceph::real_time creation_time</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l01135">rgw_common.h:1135</a></div></div>
<div class="ttc" id="astruct_r_g_w_bucket_entry_point_html_aa492198091b91eecb9bbe431f6e84a54"><div class="ttname"><a href="struct_r_g_w_bucket_entry_point.html#aa492198091b91eecb9bbe431f6e84a54">RGWBucketEntryPoint::linked</a></div><div class="ttdeci">bool linked</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l01136">rgw_common.h:1136</a></div></div>
<div class="ttc" id="astruct_r_g_w_bucket_info_html"><div class="ttname"><a href="struct_r_g_w_bucket_info.html">RGWBucketInfo</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l01062">rgw_common.h:1062</a></div></div>
<div class="ttc" id="astruct_r_g_w_bucket_info_html_a129219ad4163e6f09823c4e7c310d367"><div class="ttname"><a href="struct_r_g_w_bucket_info.html#a129219ad4163e6f09823c4e7c310d367">RGWBucketInfo::objv_tracker</a></div><div class="ttdeci">RGWObjVersionTracker objv_tracker</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l01070">rgw_common.h:1070</a></div></div>
<div class="ttc" id="astruct_r_g_w_bucket_info_html_a18215d487317142f30bd2675ccec2293"><div class="ttname"><a href="struct_r_g_w_bucket_info.html#a18215d487317142f30bd2675ccec2293">RGWBucketInfo::owner</a></div><div class="ttdeci">rgw_user owner</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l01064">rgw_common.h:1064</a></div></div>
<div class="ttc" id="astruct_r_g_w_bucket_info_html_a2e51e9d0006ff4d49a565582513b6af6"><div class="ttname"><a href="struct_r_g_w_bucket_info.html#a2e51e9d0006ff4d49a565582513b6af6">RGWBucketInfo::creation_time</a></div><div class="ttdeci">ceph::real_time creation_time</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l01067">rgw_common.h:1067</a></div></div>
<div class="ttc" id="astruct_r_g_w_bucket_info_html_a2f1c3c04708aff00336329d2b5a6b2c0"><div class="ttname"><a href="struct_r_g_w_bucket_info.html#a2f1c3c04708aff00336329d2b5a6b2c0">RGWBucketInfo::layout</a></div><div class="ttdeci">rgw::BucketLayout layout</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l01074">rgw_common.h:1074</a></div></div>
<div class="ttc" id="astruct_r_g_w_bucket_info_html_ac594305d959e62e34512698b110f77ad"><div class="ttname"><a href="struct_r_g_w_bucket_info.html#ac594305d959e62e34512698b110f77ad">RGWBucketInfo::obj_lock_enabled</a></div><div class="ttdeci">bool obj_lock_enabled() const</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l01115">rgw_common.h:1115</a></div></div>
<div class="ttc" id="astruct_r_g_w_bucket_info_html_ae6674c41b0446ccebd83d46693e90ca4"><div class="ttname"><a href="struct_r_g_w_bucket_info.html#ae6674c41b0446ccebd83d46693e90ca4">RGWBucketInfo::versioning_status</a></div><div class="ttdeci">int versioning_status() const</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l01111">rgw_common.h:1111</a></div></div>
<div class="ttc" id="astruct_r_g_w_bucket_info_html_ae98f47e00bc973f8961081f37affb373"><div class="ttname"><a href="struct_r_g_w_bucket_info.html#ae98f47e00bc973f8961081f37affb373">RGWBucketInfo::placement_rule</a></div><div class="ttdeci">rgw_placement_rule placement_rule</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l01068">rgw_common.h:1068</a></div></div>
<div class="ttc" id="astruct_r_g_w_bucket_info_html_afbd8422e16061abdf72d710794ac74d4"><div class="ttname"><a href="struct_r_g_w_bucket_info.html#afbd8422e16061abdf72d710794ac74d4">RGWBucketInfo::bucket</a></div><div class="ttdeci">rgw_bucket bucket</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l01063">rgw_common.h:1063</a></div></div>
<div class="ttc" id="astruct_r_g_w_cluster_stat_html"><div class="ttname"><a href="struct_r_g_w_cluster_stat.html">RGWClusterStat</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l00069">rgw_sal.h:69</a></div></div>
<div class="ttc" id="astruct_r_g_w_cluster_stat_html_a173737232f1a131c74492bed07f8bcf5"><div class="ttname"><a href="struct_r_g_w_cluster_stat.html#a173737232f1a131c74492bed07f8bcf5">RGWClusterStat::kb_avail</a></div><div class="ttdeci">uint64_t kb_avail</div><div class="ttdoc">total available/free</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l00075">rgw_sal.h:75</a></div></div>
<div class="ttc" id="astruct_r_g_w_cluster_stat_html_a2d6a9916857dabce3143e28403dc8080"><div class="ttname"><a href="struct_r_g_w_cluster_stat.html#a2d6a9916857dabce3143e28403dc8080">RGWClusterStat::num_objects</a></div><div class="ttdeci">uint64_t num_objects</div><div class="ttdoc">number of objects</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l00077">rgw_sal.h:77</a></div></div>
<div class="ttc" id="astruct_r_g_w_cluster_stat_html_a5842e2c033ceee935bfa0313e071682d"><div class="ttname"><a href="struct_r_g_w_cluster_stat.html#a5842e2c033ceee935bfa0313e071682d">RGWClusterStat::kb_used</a></div><div class="ttdeci">uint64_t kb_used</div><div class="ttdoc">total used</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l00073">rgw_sal.h:73</a></div></div>
<div class="ttc" id="astruct_r_g_w_cluster_stat_html_ace01fc57a01b3052a6e7fe795f47b159"><div class="ttname"><a href="struct_r_g_w_cluster_stat.html#ace01fc57a01b3052a6e7fe795f47b159">RGWClusterStat::kb</a></div><div class="ttdeci">uint64_t kb</div><div class="ttdoc">total device size</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l00071">rgw_sal.h:71</a></div></div>
<div class="ttc" id="astruct_r_g_w_compression_info_html"><div class="ttname"><a href="struct_r_g_w_compression_info.html">RGWCompressionInfo</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__compression__types_8h_source.html#l00044">rgw_compression_types.h:44</a></div></div>
<div class="ttc" id="astruct_r_g_w_compression_info_html_a2752af611a9e29a814e204980d2b650c"><div class="ttname"><a href="struct_r_g_w_compression_info.html#a2752af611a9e29a814e204980d2b650c">RGWCompressionInfo::blocks</a></div><div class="ttdeci">std::vector&lt; compression_block &gt; blocks</div><div class="ttdef"><b>Definition</b> <a href="rgw__compression__types_8h_source.html#l00048">rgw_compression_types.h:48</a></div></div>
<div class="ttc" id="astruct_r_g_w_compression_info_html_a6d3afe42b85629af14af100146896a85"><div class="ttname"><a href="struct_r_g_w_compression_info.html#a6d3afe42b85629af14af100146896a85">RGWCompressionInfo::compression_type</a></div><div class="ttdeci">std::string compression_type</div><div class="ttdef"><b>Definition</b> <a href="rgw__compression__types_8h_source.html#l00045">rgw_compression_types.h:45</a></div></div>
<div class="ttc" id="astruct_r_g_w_compression_info_html_af6dd0684c8b02536770c7c2a5e5901fa"><div class="ttname"><a href="struct_r_g_w_compression_info.html#af6dd0684c8b02536770c7c2a5e5901fa">RGWCompressionInfo::orig_size</a></div><div class="ttdeci">uint64_t orig_size</div><div class="ttdef"><b>Definition</b> <a href="rgw__compression__types_8h_source.html#l00046">rgw_compression_types.h:46</a></div></div>
<div class="ttc" id="astruct_r_g_w_ctl_1_1__meta_html_a5d6c7b64d613d277a0960a99f98fc24c"><div class="ttname"><a href="struct_r_g_w_ctl_1_1__meta.html#a5d6c7b64d613d277a0960a99f98fc24c">RGWCtl::_meta::mgr</a></div><div class="ttdeci">RGWMetadataManager * mgr</div><div class="ttdef"><b>Definition</b> <a href="rgw__service_8h_source.html#l00203">rgw_service.h:203</a></div></div>
<div class="ttc" id="astruct_r_g_w_ctl_html_a3a85ab7df88989bf4aacfed141fa0caa"><div class="ttname"><a href="struct_r_g_w_ctl.html#a3a85ab7df88989bf4aacfed141fa0caa">RGWCtl::meta</a></div><div class="ttdeci">struct RGWCtl::_meta meta</div></div>
<div class="ttc" id="astruct_r_g_w_ctl_html_a4e70524a487f44b8db6e5a8826160ac3"><div class="ttname"><a href="struct_r_g_w_ctl.html#a4e70524a487f44b8db6e5a8826160ac3">RGWCtl::user</a></div><div class="ttdeci">RGWUserCtl * user</div><div class="ttdef"><b>Definition</b> <a href="rgw__service_8h_source.html#l00212">rgw_service.h:212</a></div></div>
<div class="ttc" id="astruct_r_g_w_ctl_html_aad9554920ed5b4cc9b75de55bb1af061"><div class="ttname"><a href="struct_r_g_w_ctl.html#aad9554920ed5b4cc9b75de55bb1af061">RGWCtl::bucket</a></div><div class="ttdeci">RGWBucketCtl * bucket</div><div class="ttdef"><b>Definition</b> <a href="rgw__service_8h_source.html#l00213">rgw_service.h:213</a></div></div>
<div class="ttc" id="astruct_r_g_w_list_raw_objs_ctx_html"><div class="ttname"><a href="struct_r_g_w_list_raw_objs_ctx.html">RGWListRawObjsCtx</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8h_source.html#l00257">rgw_rados.h:257</a></div></div>
<div class="ttc" id="astruct_r_g_w_name_to_id_html"><div class="ttname"><a href="struct_r_g_w_name_to_id.html">RGWNameToId</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__zone_8h_source.html#l00037">rgw_zone.h:37</a></div></div>
<div class="ttc" id="astruct_r_g_w_name_to_id_html_afbc0ce975217212c48d3fda8043f55da"><div class="ttname"><a href="struct_r_g_w_name_to_id.html#afbc0ce975217212c48d3fda8043f55da">RGWNameToId::obj_id</a></div><div class="ttdeci">std::string obj_id</div><div class="ttdef"><b>Definition</b> <a href="rgw__zone_8h_source.html#l00038">rgw_zone.h:38</a></div></div>
<div class="ttc" id="astruct_r_g_w_obj_state_html"><div class="ttname"><a href="struct_r_g_w_obj_state.html">RGWObjState</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__obj__manifest_8h_source.html#l00612">rgw_obj_manifest.h:612</a></div></div>
<div class="ttc" id="astruct_r_g_w_obj_state_html_afe406574ac61dad317fd3333aacd3d37"><div class="ttname"><a href="struct_r_g_w_obj_state.html#afe406574ac61dad317fd3333aacd3d37">RGWObjState::manifest</a></div><div class="ttdeci">std::optional&lt; RGWObjManifest &gt; manifest</div><div class="ttdef"><b>Definition</b> <a href="rgw__obj__manifest_8h_source.html#l00625">rgw_obj_manifest.h:625</a></div></div>
<div class="ttc" id="astruct_r_g_w_obj_version_tracker_html"><div class="ttname"><a href="struct_r_g_w_obj_version_tracker.html">RGWObjVersionTracker</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l01004">rgw_common.h:1004</a></div></div>
<div class="ttc" id="astruct_r_g_w_obj_version_tracker_html_a431b0a1cb0d7ebd40d1529aa7d6415eb"><div class="ttname"><a href="struct_r_g_w_obj_version_tracker.html#a431b0a1cb0d7ebd40d1529aa7d6415eb">RGWObjVersionTracker::read_version</a></div><div class="ttdeci">obj_version read_version</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l01005">rgw_common.h:1005</a></div></div>
<div class="ttc" id="astruct_r_g_w_period_config_html_a0a88bf0485fd37baf40f6dc7d7e3ec40"><div class="ttname"><a href="struct_r_g_w_period_config.html#a0a88bf0485fd37baf40f6dc7d7e3ec40">RGWPeriodConfig::user_ratelimit</a></div><div class="ttdeci">RGWRateLimitInfo user_ratelimit</div><div class="ttdef"><b>Definition</b> <a href="rgw__zone_8h_source.html#l01036">rgw_zone.h:1036</a></div></div>
<div class="ttc" id="astruct_r_g_w_period_config_html_a128354bfe22b568e806308aeb4c97318"><div class="ttname"><a href="struct_r_g_w_period_config.html#a128354bfe22b568e806308aeb4c97318">RGWPeriodConfig::bucket_ratelimit</a></div><div class="ttdeci">RGWRateLimitInfo bucket_ratelimit</div><div class="ttdef"><b>Definition</b> <a href="rgw__zone_8h_source.html#l01037">rgw_zone.h:1037</a></div></div>
<div class="ttc" id="astruct_r_g_w_period_config_html_a1f8dfa16ce942937ff864ca28243f511"><div class="ttname"><a href="struct_r_g_w_period_config.html#a1f8dfa16ce942937ff864ca28243f511">RGWPeriodConfig::anon_ratelimit</a></div><div class="ttdeci">RGWRateLimitInfo anon_ratelimit</div><div class="ttdef"><b>Definition</b> <a href="rgw__zone_8h_source.html#l01039">rgw_zone.h:1039</a></div></div>
<div class="ttc" id="astruct_r_g_w_quota_info_html"><div class="ttname"><a href="struct_r_g_w_quota_info.html">RGWQuotaInfo</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__quota_8h_source.html#l00038">rgw_quota.h:38</a></div></div>
<div class="ttc" id="astruct_r_g_w_rados_1_1_bucket_1_1_list_1_1_params_html_a0fc58e07053acd843e54e56617e5213d"><div class="ttname"><a href="struct_r_g_w_rados_1_1_bucket_1_1_list_1_1_params.html#a0fc58e07053acd843e54e56617e5213d">RGWRados::Bucket::List::Params::end_marker</a></div><div class="ttdeci">rgw_obj_key end_marker</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8h_source.html#l00995">rgw_rados.h:995</a></div></div>
<div class="ttc" id="astruct_r_g_w_rados_1_1_bucket_1_1_list_1_1_params_html_a1281bef0d11d71b915ac062e7a37a83d"><div class="ttname"><a href="struct_r_g_w_rados_1_1_bucket_1_1_list_1_1_params.html#a1281bef0d11d71b915ac062e7a37a83d">RGWRados::Bucket::List::Params::force_check_filter</a></div><div class="ttdeci">RGWBucketListNameFilter force_check_filter</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8h_source.html#l00999">rgw_rados.h:999</a></div></div>
<div class="ttc" id="astruct_r_g_w_rados_1_1_bucket_1_1_list_1_1_params_html_a616d60b85fe0493e782da89fad2472bc"><div class="ttname"><a href="struct_r_g_w_rados_1_1_bucket_1_1_list_1_1_params.html#a616d60b85fe0493e782da89fad2472bc">RGWRados::Bucket::List::Params::list_versions</a></div><div class="ttdeci">bool list_versions</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8h_source.html#l01000">rgw_rados.h:1000</a></div></div>
<div class="ttc" id="astruct_r_g_w_rados_1_1_bucket_1_1_list_1_1_params_html_a6d8831586f2666250332f4ed65e19556"><div class="ttname"><a href="struct_r_g_w_rados_1_1_bucket_1_1_list_1_1_params.html#a6d8831586f2666250332f4ed65e19556">RGWRados::Bucket::List::Params::prefix</a></div><div class="ttdeci">std::string prefix</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8h_source.html#l00992">rgw_rados.h:992</a></div></div>
<div class="ttc" id="astruct_r_g_w_rados_1_1_bucket_1_1_list_1_1_params_html_a8799864f693cab862bcb299373e17d49"><div class="ttname"><a href="struct_r_g_w_rados_1_1_bucket_1_1_list_1_1_params.html#a8799864f693cab862bcb299373e17d49">RGWRados::Bucket::List::Params::marker</a></div><div class="ttdeci">rgw_obj_key marker</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8h_source.html#l00994">rgw_rados.h:994</a></div></div>
<div class="ttc" id="astruct_r_g_w_rados_1_1_bucket_1_1_list_1_1_params_html_a983398d910ec274a63c537bf2a037419"><div class="ttname"><a href="struct_r_g_w_rados_1_1_bucket_1_1_list_1_1_params.html#a983398d910ec274a63c537bf2a037419">RGWRados::Bucket::List::Params::access_list_filter</a></div><div class="ttdeci">RGWAccessListFilter * access_list_filter</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8h_source.html#l00998">rgw_rados.h:998</a></div></div>
<div class="ttc" id="astruct_r_g_w_rados_1_1_bucket_1_1_list_1_1_params_html_a9abddd281f16eaa08a2d24cb5eff5b4e"><div class="ttname"><a href="struct_r_g_w_rados_1_1_bucket_1_1_list_1_1_params.html#a9abddd281f16eaa08a2d24cb5eff5b4e">RGWRados::Bucket::List::Params::enforce_ns</a></div><div class="ttdeci">bool enforce_ns</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8h_source.html#l00997">rgw_rados.h:997</a></div></div>
<div class="ttc" id="astruct_r_g_w_rados_1_1_bucket_1_1_list_1_1_params_html_aab5ff31e7e25f77177191be4dd864912"><div class="ttname"><a href="struct_r_g_w_rados_1_1_bucket_1_1_list_1_1_params.html#aab5ff31e7e25f77177191be4dd864912">RGWRados::Bucket::List::Params::delim</a></div><div class="ttdeci">std::string delim</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8h_source.html#l00993">rgw_rados.h:993</a></div></div>
<div class="ttc" id="astruct_r_g_w_rados_1_1_bucket_1_1_list_1_1_params_html_ab5d768f4620540905f538ec85709ffad"><div class="ttname"><a href="struct_r_g_w_rados_1_1_bucket_1_1_list_1_1_params.html#ab5d768f4620540905f538ec85709ffad">RGWRados::Bucket::List::Params::ns</a></div><div class="ttdeci">std::string ns</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8h_source.html#l00996">rgw_rados.h:996</a></div></div>
<div class="ttc" id="astruct_r_g_w_rados_1_1_bucket_1_1_list_1_1_params_html_afdd8bc578fc34d59d66e54688775dd41"><div class="ttname"><a href="struct_r_g_w_rados_1_1_bucket_1_1_list_1_1_params.html#afdd8bc578fc34d59d66e54688775dd41">RGWRados::Bucket::List::Params::allow_unordered</a></div><div class="ttdeci">bool allow_unordered</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8h_source.html#l01001">rgw_rados.h:1001</a></div></div>
<div class="ttc" id="astruct_r_g_w_rados_1_1_bucket_shard_html"><div class="ttname"><a href="struct_r_g_w_rados_1_1_bucket_shard.html">RGWRados::BucketShard</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8h_source.html#l00643">rgw_rados.h:643</a></div></div>
<div class="ttc" id="astruct_r_g_w_rados_1_1_bucket_shard_html_a6a44a123c5f8989892eb6e1ed75b56f5"><div class="ttname"><a href="struct_r_g_w_rados_1_1_bucket_shard.html#a6a44a123c5f8989892eb6e1ed75b56f5">RGWRados::BucketShard::init</a></div><div class="ttdeci">int init(const rgw_bucket &amp;_bucket, const rgw_obj &amp;obj, RGWBucketInfo *out, const DoutPrefixProvider *dpp)</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8cc_source.html#l02748">rgw_rados.cc:2748</a></div></div>
<div class="ttc" id="astruct_r_g_w_rados_1_1_object_1_1_delete_1_1_delete_params_html_a31d0466d7c6e5199de669bb18d32f06d"><div class="ttname"><a href="struct_r_g_w_rados_1_1_object_1_1_delete_1_1_delete_params.html#a31d0466d7c6e5199de669bb18d32f06d">RGWRados::Object::Delete::DeleteParams::versioning_status</a></div><div class="ttdeci">int versioning_status</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8h_source.html#l00817">rgw_rados.h:817</a></div></div>
<div class="ttc" id="astruct_r_g_w_rados_1_1_object_1_1_delete_1_1_delete_params_html_a44bd7b3a2353bc22d7a1092793931914"><div class="ttname"><a href="struct_r_g_w_rados_1_1_object_1_1_delete_1_1_delete_params.html#a44bd7b3a2353bc22d7a1092793931914">RGWRados::Object::Delete::DeleteParams::bucket_owner</a></div><div class="ttdeci">rgw_user bucket_owner</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8h_source.html#l00816">rgw_rados.h:816</a></div></div>
<div class="ttc" id="astruct_r_g_w_rados_1_1_object_1_1_delete_html"><div class="ttname"><a href="struct_r_g_w_rados_1_1_object_1_1_delete.html">RGWRados::Object::Delete</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8h_source.html#l00812">rgw_rados.h:812</a></div></div>
<div class="ttc" id="astruct_r_g_w_rados_1_1_object_1_1_delete_html_a4e62ba5d4b2e281069314dce5a5e15a5"><div class="ttname"><a href="struct_r_g_w_rados_1_1_object_1_1_delete.html#a4e62ba5d4b2e281069314dce5a5e15a5">RGWRados::Object::Delete::params</a></div><div class="ttdeci">struct RGWRados::Object::Delete::DeleteParams params</div></div>
<div class="ttc" id="astruct_r_g_w_rados_1_1_object_1_1_delete_html_a7d9eb79062106ce1af7373f1a593ec7e"><div class="ttname"><a href="struct_r_g_w_rados_1_1_object_1_1_delete.html#a7d9eb79062106ce1af7373f1a593ec7e">RGWRados::Object::Delete::delete_obj</a></div><div class="ttdeci">int delete_obj(optional_yield y, const DoutPrefixProvider *dpp)</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8cc_source.html#l05168">rgw_rados.cc:5168</a></div></div>
<div class="ttc" id="astruct_r_g_w_rados_1_1_object_1_1_read_1_1_get_obj_state_html_af535c72c3c5a871ce8a2e6bfe69ac62d"><div class="ttname"><a href="struct_r_g_w_rados_1_1_object_1_1_read_1_1_get_obj_state.html#af535c72c3c5a871ce8a2e6bfe69ac62d">RGWRados::Object::Read::GetObjState::head_obj</a></div><div class="ttdeci">rgw_raw_obj head_obj</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8h_source.html#l00730">rgw_rados.h:730</a></div></div>
<div class="ttc" id="astruct_r_g_w_rados_1_1_object_1_1_read_1_1_params_html_a1bd216c75efbabda3f356e3d84b7c347"><div class="ttname"><a href="struct_r_g_w_rados_1_1_object_1_1_read_1_1_params.html#a1bd216c75efbabda3f356e3d84b7c347">RGWRados::Object::Read::Params::obj_size</a></div><div class="ttdeci">uint64_t * obj_size</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8h_source.html#l00749">rgw_rados.h:749</a></div></div>
<div class="ttc" id="astruct_r_g_w_rados_1_1_object_1_1_read_1_1_params_html_a634175d942b803125bb64fc09abe2b4c"><div class="ttname"><a href="struct_r_g_w_rados_1_1_object_1_1_read_1_1_params.html#a634175d942b803125bb64fc09abe2b4c">RGWRados::Object::Read::Params::lastmod</a></div><div class="ttdeci">ceph::real_time * lastmod</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8h_source.html#l00748">rgw_rados.h:748</a></div></div>
<div class="ttc" id="astruct_r_g_w_rados_1_1_object_1_1_read_1_1_params_html_ab94baf85f81c969f9b8e7fcf1b2a32ba"><div class="ttname"><a href="struct_r_g_w_rados_1_1_object_1_1_read_1_1_params.html#ab94baf85f81c969f9b8e7fcf1b2a32ba">RGWRados::Object::Read::Params::target_obj</a></div><div class="ttdeci">rgw_obj * target_obj</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8h_source.html#l00751">rgw_rados.h:751</a></div></div>
<div class="ttc" id="astruct_r_g_w_rados_1_1_object_1_1_read_1_1_params_html_afa1ad90e23ecfabfaf7b2d6757669d57"><div class="ttname"><a href="struct_r_g_w_rados_1_1_object_1_1_read_1_1_params.html#afa1ad90e23ecfabfaf7b2d6757669d57">RGWRados::Object::Read::Params::attrs</a></div><div class="ttdeci">std::map&lt; std::string, bufferlist &gt; * attrs</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8h_source.html#l00750">rgw_rados.h:750</a></div></div>
<div class="ttc" id="astruct_r_g_w_rados_1_1_object_1_1_read_html"><div class="ttname"><a href="struct_r_g_w_rados_1_1_object_1_1_read.html">RGWRados::Object::Read</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8h_source.html#l00722">rgw_rados.h:722</a></div></div>
<div class="ttc" id="astruct_r_g_w_rados_1_1_object_1_1_read_html_aa0759ce61ea515754e1000756ebbee52"><div class="ttname"><a href="struct_r_g_w_rados_1_1_object_1_1_read.html#aa0759ce61ea515754e1000756ebbee52">RGWRados::Object::Read::params</a></div><div class="ttdeci">struct RGWRados::Object::Read::Params params</div></div>
<div class="ttc" id="astruct_r_g_w_rados_1_1_object_1_1_read_html_acd75ba0d39fc7185e71f208aec5065f0"><div class="ttname"><a href="struct_r_g_w_rados_1_1_object_1_1_read.html#acd75ba0d39fc7185e71f208aec5065f0">RGWRados::Object::Read::prepare</a></div><div class="ttdeci">int prepare(optional_yield y, const DoutPrefixProvider *dpp)</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8cc_source.html#l06072">rgw_rados.cc:6072</a></div></div>
<div class="ttc" id="astruct_r_g_w_rados_1_1_object_1_1_read_html_ae0bd2b54e82faed462f78f3c895022ce"><div class="ttname"><a href="struct_r_g_w_rados_1_1_object_1_1_read.html#ae0bd2b54e82faed462f78f3c895022ce">RGWRados::Object::Read::state</a></div><div class="ttdeci">struct RGWRados::Object::Read::GetObjState state</div></div>
<div class="ttc" id="astruct_r_g_w_rados_1_1_object_1_1_write_1_1_meta_params_html_a1f80aaf767e6693f9c7fb468ffb7e6b1"><div class="ttname"><a href="struct_r_g_w_rados_1_1_object_1_1_write_1_1_meta_params.html#a1f80aaf767e6693f9c7fb468ffb7e6b1">RGWRados::Object::Write::MetaParams::owner</a></div><div class="ttdeci">rgw_user owner</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8h_source.html#l00777">rgw_rados.h:777</a></div></div>
<div class="ttc" id="astruct_r_g_w_rados_1_1_object_1_1_write_1_1_meta_params_html_a218aeccbf44283fa22748fc4d158d30c"><div class="ttname"><a href="struct_r_g_w_rados_1_1_object_1_1_write_1_1_meta_params.html#a218aeccbf44283fa22748fc4d158d30c">RGWRados::Object::Write::MetaParams::completeMultipart</a></div><div class="ttdeci">bool completeMultipart</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8h_source.html#l00788">rgw_rados.h:788</a></div></div>
<div class="ttc" id="astruct_r_g_w_rados_1_1_object_1_1_write_1_1_meta_params_html_a2812193444cff0a42ae862b5ed2e5144"><div class="ttname"><a href="struct_r_g_w_rados_1_1_object_1_1_write_1_1_meta_params.html#a2812193444cff0a42ae862b5ed2e5144">RGWRados::Object::Write::MetaParams::remove_objs</a></div><div class="ttdeci">std::list&lt; rgw_obj_index_key &gt; * remove_objs</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8h_source.html#l00775">rgw_rados.h:775</a></div></div>
<div class="ttc" id="astruct_r_g_w_rados_1_1_object_1_1_write_1_1_meta_params_html_a313ac49a26ee53f1a0770202c8729197"><div class="ttname"><a href="struct_r_g_w_rados_1_1_object_1_1_write_1_1_meta_params.html#a313ac49a26ee53f1a0770202c8729197">RGWRados::Object::Write::MetaParams::modify_tail</a></div><div class="ttdeci">bool modify_tail</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8h_source.html#l00787">rgw_rados.h:787</a></div></div>
<div class="ttc" id="astruct_r_g_w_rados_1_1_object_1_1_write_1_1_meta_params_html_a39178ded91fad11caf852a474fb1f4ba"><div class="ttname"><a href="struct_r_g_w_rados_1_1_object_1_1_write_1_1_meta_params.html#a39178ded91fad11caf852a474fb1f4ba">RGWRados::Object::Write::MetaParams::manifest</a></div><div class="ttdeci">RGWObjManifest * manifest</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8h_source.html#l00773">rgw_rados.h:773</a></div></div>
<div class="ttc" id="astruct_r_g_w_rados_1_1_object_1_1_write_1_1_meta_params_html_a3a016e380e639202a03a8f9a060917e4"><div class="ttname"><a href="struct_r_g_w_rados_1_1_object_1_1_write_1_1_meta_params.html#a3a016e380e639202a03a8f9a060917e4">RGWRados::Object::Write::MetaParams::mtime</a></div><div class="ttdeci">ceph::real_time * mtime</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8h_source.html#l00770">rgw_rados.h:770</a></div></div>
<div class="ttc" id="astruct_r_g_w_rados_1_1_object_1_1_write_1_1_meta_params_html_a3ddf31b01f7cf44e6b150e23a560cccc"><div class="ttname"><a href="struct_r_g_w_rados_1_1_object_1_1_write_1_1_meta_params.html#a3ddf31b01f7cf44e6b150e23a560cccc">RGWRados::Object::Write::MetaParams::flags</a></div><div class="ttdeci">int flags</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8h_source.html#l00779">rgw_rados.h:779</a></div></div>
<div class="ttc" id="astruct_r_g_w_rados_1_1_object_1_1_write_1_1_meta_params_html_a44969319d1a3a21925a73b534e81782b"><div class="ttname"><a href="struct_r_g_w_rados_1_1_object_1_1_write_1_1_meta_params.html#a44969319d1a3a21925a73b534e81782b">RGWRados::Object::Write::MetaParams::ptag</a></div><div class="ttdeci">const std::string * ptag</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8h_source.html#l00774">rgw_rados.h:774</a></div></div>
<div class="ttc" id="astruct_r_g_w_rados_1_1_object_1_1_write_1_1_meta_params_html_a740d899ec869013a8e836b85a1754d43"><div class="ttname"><a href="struct_r_g_w_rados_1_1_object_1_1_write_1_1_meta_params.html#a740d899ec869013a8e836b85a1754d43">RGWRados::Object::Write::MetaParams::category</a></div><div class="ttdeci">RGWObjCategory category</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8h_source.html#l00778">rgw_rados.h:778</a></div></div>
<div class="ttc" id="astruct_r_g_w_rados_1_1_object_1_1_write_1_1_meta_params_html_ab1da147fb25a10be683fcf04ee468b9a"><div class="ttname"><a href="struct_r_g_w_rados_1_1_object_1_1_write_1_1_meta_params.html#ab1da147fb25a10be683fcf04ee468b9a">RGWRados::Object::Write::MetaParams::data</a></div><div class="ttdeci">const bufferlist * data</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8h_source.html#l00772">rgw_rados.h:772</a></div></div>
<div class="ttc" id="astruct_r_g_w_rados_1_1_object_1_1_write_1_1_meta_params_html_ab26754950a15174d90867b663d9e4a14"><div class="ttname"><a href="struct_r_g_w_rados_1_1_object_1_1_write_1_1_meta_params.html#ab26754950a15174d90867b663d9e4a14">RGWRados::Object::Write::MetaParams::olh_epoch</a></div><div class="ttdeci">std::optional&lt; uint64_t &gt; olh_epoch</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8h_source.html#l00782">rgw_rados.h:782</a></div></div>
<div class="ttc" id="astruct_r_g_w_rados_1_1_object_1_1_write_html"><div class="ttname"><a href="struct_r_g_w_rados_1_1_object_1_1_write.html">RGWRados::Object::Write</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8h_source.html#l00766">rgw_rados.h:766</a></div></div>
<div class="ttc" id="astruct_r_g_w_rados_1_1_object_1_1_write_html_a983690caebbfc23b4a56dfd687a61dfa"><div class="ttname"><a href="struct_r_g_w_rados_1_1_object_1_1_write.html#a983690caebbfc23b4a56dfd687a61dfa">RGWRados::Object::Write::meta</a></div><div class="ttdeci">struct RGWRados::Object::Write::MetaParams meta</div></div>
<div class="ttc" id="astruct_r_g_w_rados_1_1_object_1_1_write_html_abe774f2d8819c203804a0a7a7ab1426d"><div class="ttname"><a href="struct_r_g_w_rados_1_1_object_1_1_write.html#abe774f2d8819c203804a0a7a7ab1426d">RGWRados::Object::Write::write_meta</a></div><div class="ttdeci">int write_meta(const DoutPrefixProvider *dpp, uint64_t size, uint64_t accounted_size, std::map&lt; std::string, bufferlist &gt; &amp;attrs, optional_yield y)</div><div class="ttdef"><b>Definition</b> <a href="rgw__rados_8cc_source.html#l03390">rgw_rados.cc:3390</a></div></div>
<div class="ttc" id="astruct_r_g_w_rate_limit_info_html"><div class="ttname"><a href="struct_r_g_w_rate_limit_info.html">RGWRateLimitInfo</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l00701">rgw_common.h:701</a></div></div>
<div class="ttc" id="astruct_r_g_w_s_i___m_b_s_obj___get_params_html"><div class="ttname"><a href="struct_r_g_w_s_i___m_b_s_obj___get_params.html">RGWSI_MBSObj_GetParams</a></div><div class="ttdef"><b>Definition</b> <a href="svc__meta__be__sobj_8h_source.html#l00048">svc_meta_be_sobj.h:48</a></div></div>
<div class="ttc" id="astruct_r_g_w_s_i___m_b_s_obj___put_params_html"><div class="ttname"><a href="struct_r_g_w_s_i___m_b_s_obj___put_params.html">RGWSI_MBSObj_PutParams</a></div><div class="ttdef"><b>Definition</b> <a href="svc__meta__be__sobj_8h_source.html#l00071">svc_meta_be_sobj.h:71</a></div></div>
<div class="ttc" id="astruct_r_g_w_s_i___meta_backend___ctx_params___s_obj_html"><div class="ttname"><a href="struct_r_g_w_s_i___meta_backend___ctx_params___s_obj.html">RGWSI_MetaBackend_CtxParams_SObj</a></div><div class="ttdef"><b>Definition</b> <a href="svc__meta__be__params_8h_source.html#l00025">svc_meta_be_params.h:25</a></div></div>
<div class="ttc" id="astruct_r_g_w_s_i___role___r_a_d_o_s_1_1_svc_html_af6e0d8c6b7224668059f211104464620"><div class="ttname"><a href="struct_r_g_w_s_i___role___r_a_d_o_s_1_1_svc.html#af6e0d8c6b7224668059f211104464620">RGWSI_Role_RADOS::Svc::meta_be</a></div><div class="ttdeci">RGWSI_MetaBackend * meta_be</div><div class="ttdef"><b>Definition</b> <a href="svc__role__rados_8h_source.html#l00028">svc_role_rados.h:28</a></div></div>
<div class="ttc" id="astruct_r_g_w_s_i___sys_obj_1_1_obj_1_1_omap_op_html_a466da94073ecd8cb17a7e5787f8a1328"><div class="ttname"><a href="struct_r_g_w_s_i___sys_obj_1_1_obj_1_1_omap_op.html#a466da94073ecd8cb17a7e5787f8a1328">RGWSI_SysObj::Obj::OmapOp::set</a></div><div class="ttdeci">int set(const DoutPrefixProvider *dpp, const std::string &amp;key, bufferlist &amp;bl, optional_yield y)</div><div class="ttdef"><b>Definition</b> <a href="svc__sys__obj_8cc_source.html#l00158">svc_sys_obj.cc:158</a></div></div>
<div class="ttc" id="astruct_r_g_w_s_i___sys_obj_1_1_obj_1_1_omap_op_html_a520353a2f168c59e239e1c4802247eb3"><div class="ttname"><a href="struct_r_g_w_s_i___sys_obj_1_1_obj_1_1_omap_op.html#a520353a2f168c59e239e1c4802247eb3">RGWSI_SysObj::Obj::OmapOp::set_must_exist</a></div><div class="ttdeci">OmapOp &amp; set_must_exist(bool _must_exist=true)</div><div class="ttdef"><b>Definition</b> <a href="svc__sys__obj_8h_source.html#l00163">svc_sys_obj.h:163</a></div></div>
<div class="ttc" id="astruct_r_g_w_services_html_a4880d50a5a1372f33141215169595af1"><div class="ttname"><a href="struct_r_g_w_services.html#a4880d50a5a1372f33141215169595af1">RGWServices::config_key</a></div><div class="ttdeci">RGWSI_ConfigKey * config_key</div><div class="ttdef"><b>Definition</b> <a href="rgw__service_8h_source.html#l00134">rgw_service.h:134</a></div></div>
<div class="ttc" id="astruct_r_g_w_services_html_a5dd49b8bdc5fc53908eebbb1f39561fe"><div class="ttname"><a href="struct_r_g_w_services.html#a5dd49b8bdc5fc53908eebbb1f39561fe">RGWServices::role</a></div><div class="ttdeci">RGWSI_Role_RADOS * role</div><div class="ttdef"><b>Definition</b> <a href="rgw__service_8h_source.html#l00151">rgw_service.h:151</a></div></div>
<div class="ttc" id="astruct_r_g_w_services_html_a6a82305adde4d9b9667690ed2059a394"><div class="ttname"><a href="struct_r_g_w_services.html#a6a82305adde4d9b9667690ed2059a394">RGWServices::zone</a></div><div class="ttdeci">RGWSI_Zone * zone</div><div class="ttdef"><b>Definition</b> <a href="rgw__service_8h_source.html#l00143">rgw_service.h:143</a></div></div>
<div class="ttc" id="astruct_r_g_w_services_html_a742bbed66b1688310eeb8c0b692bf6b9"><div class="ttname"><a href="struct_r_g_w_services.html#a742bbed66b1688310eeb8c0b692bf6b9">RGWServices::sysobj</a></div><div class="ttdeci">RGWSI_SysObj * sysobj</div><div class="ttdef"><b>Definition</b> <a href="rgw__service_8h_source.html#l00147">rgw_service.h:147</a></div></div>
<div class="ttc" id="astruct_r_g_w_services_html_a88f28272bc28b734fdd7d7f0d265ca37"><div class="ttname"><a href="struct_r_g_w_services.html#a88f28272bc28b734fdd7d7f0d265ca37">RGWServices::zone_utils</a></div><div class="ttdeci">RGWSI_ZoneUtils * zone_utils</div><div class="ttdef"><b>Definition</b> <a href="rgw__service_8h_source.html#l00144">rgw_service.h:144</a></div></div>
<div class="ttc" id="astruct_r_g_w_services_html_ab9e7426047e0672e9d3f16cbe2f059a1"><div class="ttname"><a href="struct_r_g_w_services.html#ab9e7426047e0672e9d3f16cbe2f059a1">RGWServices::quota</a></div><div class="ttdeci">RGWSI_Quota * quota</div><div class="ttdef"><b>Definition</b> <a href="rgw__service_8h_source.html#l00145">rgw_service.h:145</a></div></div>
<div class="ttc" id="astruct_r_g_w_storage_stats_html"><div class="ttname"><a href="struct_r_g_w_storage_stats.html">RGWStorageStats</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l01187">rgw_common.h:1188</a></div></div>
<div class="ttc" id="astruct_r_g_w_upload_part_info_html"><div class="ttname"><a href="struct_r_g_w_upload_part_info.html">RGWUploadPartInfo</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__multi_8h_source.html#l00022">rgw_multi.h:22</a></div></div>
<div class="ttc" id="astruct_r_g_w_upload_part_info_html_a0db2926c77334cbba5cd09959fba3287"><div class="ttname"><a href="struct_r_g_w_upload_part_info.html#a0db2926c77334cbba5cd09959fba3287">RGWUploadPartInfo::num</a></div><div class="ttdeci">uint32_t num</div><div class="ttdef"><b>Definition</b> <a href="rgw__multi_8h_source.html#l00023">rgw_multi.h:23</a></div></div>
<div class="ttc" id="astruct_r_g_w_upload_part_info_html_a1bcc15674b18ccafc2c4e62564d866de"><div class="ttname"><a href="struct_r_g_w_upload_part_info.html#a1bcc15674b18ccafc2c4e62564d866de">RGWUploadPartInfo::manifest</a></div><div class="ttdeci">RGWObjManifest manifest</div><div class="ttdef"><b>Definition</b> <a href="rgw__multi_8h_source.html#l00028">rgw_multi.h:28</a></div></div>
<div class="ttc" id="astruct_r_g_w_upload_part_info_html_a56a2f73e2eac9900001fe21692ce9ac0"><div class="ttname"><a href="struct_r_g_w_upload_part_info.html#a56a2f73e2eac9900001fe21692ce9ac0">RGWUploadPartInfo::accounted_size</a></div><div class="ttdeci">uint64_t accounted_size</div><div class="ttdef"><b>Definition</b> <a href="rgw__multi_8h_source.html#l00025">rgw_multi.h:25</a></div></div>
<div class="ttc" id="astruct_r_g_w_upload_part_info_html_aacb6fa4f5eba4d3c3a8ea2d45002bb5f"><div class="ttname"><a href="struct_r_g_w_upload_part_info.html#aacb6fa4f5eba4d3c3a8ea2d45002bb5f">RGWUploadPartInfo::size</a></div><div class="ttdeci">uint64_t size</div><div class="ttdef"><b>Definition</b> <a href="rgw__multi_8h_source.html#l00024">rgw_multi.h:24</a></div></div>
<div class="ttc" id="astruct_r_g_w_upload_part_info_html_aaf26cc07f9ae4c220e72fe438fdbb678"><div class="ttname"><a href="struct_r_g_w_upload_part_info.html#aaf26cc07f9ae4c220e72fe438fdbb678">RGWUploadPartInfo::cs_info</a></div><div class="ttdeci">RGWCompressionInfo cs_info</div><div class="ttdef"><b>Definition</b> <a href="rgw__multi_8h_source.html#l00029">rgw_multi.h:29</a></div></div>
<div class="ttc" id="astruct_r_g_w_usage_iter_html"><div class="ttname"><a href="struct_r_g_w_usage_iter.html">RGWUsageIter</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l00058">rgw_sal.h:58</a></div></div>
<div class="ttc" id="astruct_r_g_w_user_ctl_1_1_get_params_html"><div class="ttname"><a href="struct_r_g_w_user_ctl_1_1_get_params.html">RGWUserCtl::GetParams</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__user_8h_source.html#l00763">rgw_user.h:763</a></div></div>
<div class="ttc" id="astruct_r_g_w_user_ctl_1_1_get_params_html_aa4c6a5d2312ff3e55ec1e0b823240306"><div class="ttname"><a href="struct_r_g_w_user_ctl_1_1_get_params.html#aa4c6a5d2312ff3e55ec1e0b823240306">RGWUserCtl::GetParams::set_attrs</a></div><div class="ttdeci">GetParams &amp; set_attrs(std::map&lt; std::string, bufferlist &gt; *_attrs)</div><div class="ttdef"><b>Definition</b> <a href="rgw__user_8h_source.html#l00786">rgw_user.h:786</a></div></div>
<div class="ttc" id="astruct_r_g_w_user_ctl_1_1_get_params_html_aceb8db643cbdb938a88dca70e1baa87e"><div class="ttname"><a href="struct_r_g_w_user_ctl_1_1_get_params.html#aceb8db643cbdb938a88dca70e1baa87e">RGWUserCtl::GetParams::set_objv_tracker</a></div><div class="ttdeci">GetParams &amp; set_objv_tracker(RGWObjVersionTracker *_objv_tracker)</div><div class="ttdef"><b>Definition</b> <a href="rgw__user_8h_source.html#l00771">rgw_user.h:771</a></div></div>
<div class="ttc" id="astruct_r_g_w_user_ctl_1_1_put_params_html"><div class="ttname"><a href="struct_r_g_w_user_ctl_1_1_put_params.html">RGWUserCtl::PutParams</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__user_8h_source.html#l00792">rgw_user.h:792</a></div></div>
<div class="ttc" id="astruct_r_g_w_user_ctl_1_1_remove_params_html"><div class="ttname"><a href="struct_r_g_w_user_ctl_1_1_remove_params.html">RGWUserCtl::RemoveParams</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__user_8h_source.html#l00827">rgw_user.h:827</a></div></div>
<div class="ttc" id="astruct_r_g_w_user_info_html"><div class="ttname"><a href="struct_r_g_w_user_info.html">RGWUserInfo</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l00736">rgw_common.h:737</a></div></div>
<div class="ttc" id="astruct_r_g_w_user_info_html_a8bf5afa289f85baa264c25a90ddc0f0d"><div class="ttname"><a href="struct_r_g_w_user_info.html#a8bf5afa289f85baa264c25a90ddc0f0d">RGWUserInfo::user_id</a></div><div class="ttdeci">rgw_user user_id</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l00738">rgw_common.h:738</a></div></div>
<div class="ttc" id="astruct_r_g_w_user_info_html_a9282462baa8be64d7afafa4b11969ca3"><div class="ttname"><a href="struct_r_g_w_user_info.html#a9282462baa8be64d7afafa4b11969ca3">RGWUserInfo::get_key</a></div><div class="ttdeci">RGWAccessKey * get_key(const std::string &amp;access_key)</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l00768">rgw_common.h:768</a></div></div>
<div class="ttc" id="astruct_r_g_w_zone_group_html"><div class="ttname"><a href="struct_r_g_w_zone_group.html">RGWZoneGroup</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__zone_8h_source.html#l00877">rgw_zone.h:877</a></div></div>
<div class="ttc" id="astruct_r_g_w_zone_params_html"><div class="ttname"><a href="struct_r_g_w_zone_params.html">RGWZoneParams</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__zone_8h_source.html#l00370">rgw_zone.h:370</a></div></div>
<div class="ttc" id="astruct_r_g_w_zone_params_html_a8fdd09f89ee348eabcca31eb520024ee"><div class="ttname"><a href="struct_r_g_w_zone_params.html#a8fdd09f89ee348eabcca31eb520024ee">RGWZoneParams::oidc_pool</a></div><div class="ttdeci">rgw_pool oidc_pool</div><div class="ttdef"><b>Definition</b> <a href="rgw__zone_8h_source.html#l00386">rgw_zone.h:386</a></div></div>
<div class="ttc" id="astruct_r_g_w_zone_params_html_af144c01afe26899f178544900b1835be"><div class="ttname"><a href="struct_r_g_w_zone_params.html#af144c01afe26899f178544900b1835be">RGWZoneParams::roles_pool</a></div><div class="ttdeci">rgw_pool roles_pool</div><div class="ttdef"><b>Definition</b> <a href="rgw__zone_8h_source.html#l00383">rgw_zone.h:383</a></div></div>
<div class="ttc" id="astructcompression__block_html"><div class="ttname"><a href="structcompression__block.html">compression_block</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__compression__types_8h_source.html#l00020">rgw_compression_types.h:20</a></div></div>
<div class="ttc" id="astructcompression__block_html_a502543516bd3809ef014bc1d3c088440"><div class="ttname"><a href="structcompression__block.html#a502543516bd3809ef014bc1d3c088440">compression_block::new_ofs</a></div><div class="ttdeci">uint64_t new_ofs</div><div class="ttdef"><b>Definition</b> <a href="rgw__compression__types_8h_source.html#l00022">rgw_compression_types.h:22</a></div></div>
<div class="ttc" id="astructcompression__block_html_a69e5d20533a7f6b924a44906a5b079e6"><div class="ttname"><a href="structcompression__block.html#a69e5d20533a7f6b924a44906a5b079e6">compression_block::old_ofs</a></div><div class="ttdeci">uint64_t old_ofs</div><div class="ttdef"><b>Definition</b> <a href="rgw__compression__types_8h_source.html#l00021">rgw_compression_types.h:21</a></div></div>
<div class="ttc" id="astructcompression__block_html_a90eed5cc6cdb15811e815f1e393aa7c0"><div class="ttname"><a href="structcompression__block.html#a90eed5cc6cdb15811e815f1e393aa7c0">compression_block::len</a></div><div class="ttdeci">uint64_t len</div><div class="ttdef"><b>Definition</b> <a href="rgw__compression__types_8h_source.html#l00023">rgw_compression_types.h:23</a></div></div>
<div class="ttc" id="astructmultipart__upload__info_html"><div class="ttname"><a href="structmultipart__upload__info.html">multipart_upload_info</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l01942">rgw_common.h:1943</a></div></div>
<div class="ttc" id="astructmultipart__upload__info_html_a654450c2f0a5c1267acbddf21fc6992d"><div class="ttname"><a href="structmultipart__upload__info.html#a654450c2f0a5c1267acbddf21fc6992d">multipart_upload_info::dest_placement</a></div><div class="ttdeci">rgw_placement_rule dest_placement</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l01944">rgw_common.h:1944</a></div></div>
<div class="ttc" id="astructreq__info_html"><div class="ttname"><a href="structreq__info.html">req_info</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l01225">rgw_common.h:1225</a></div></div>
<div class="ttc" id="astructreq__state_html"><div class="ttname"><a href="structreq__state.html">req_state</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l01551">rgw_common.h:1551</a></div></div>
<div class="ttc" id="astructrgw_1_1_bucket_layout_html_a21b2e627c7cfc06dfc9437d2923c1eb6"><div class="ttname"><a href="structrgw_1_1_bucket_layout.html#a21b2e627c7cfc06dfc9437d2923c1eb6">rgw::BucketLayout::current_index</a></div><div class="ttdeci">bucket_index_layout_generation current_index</div><div class="ttdef"><b>Definition</b> <a href="rgw__bucket__layout_8h_source.html#l00133">rgw_bucket_layout.h:133</a></div></div>
<div class="ttc" id="astructrgw_1_1bucket__index__layout__generation_html_a79b14696bcebca917981ef684691c2a6"><div class="ttname"><a href="structrgw_1_1bucket__index__layout__generation.html#a79b14696bcebca917981ef684691c2a6">rgw::bucket_index_layout_generation::layout</a></div><div class="ttdeci">bucket_index_layout layout</div><div class="ttdef"><b>Definition</b> <a href="rgw__bucket__layout_8h_source.html#l00068">rgw_bucket_layout.h:68</a></div></div>
<div class="ttc" id="astructrgw_1_1bucket__index__layout_html_a077a0ad9c56601354155d3c860bef951"><div class="ttname"><a href="structrgw_1_1bucket__index__layout.html#a077a0ad9c56601354155d3c860bef951">rgw::bucket_index_layout::normal</a></div><div class="ttdeci">bucket_index_normal_layout normal</div><div class="ttdef"><b>Definition</b> <a href="rgw__bucket__layout_8h_source.html#l00059">rgw_bucket_layout.h:59</a></div></div>
<div class="ttc" id="astructrgw_1_1bucket__index__normal__layout_html_abe639d74cb05a11985d3dd74eadc5d10"><div class="ttname"><a href="structrgw_1_1bucket__index__normal__layout.html#abe639d74cb05a11985d3dd74eadc5d10">rgw::bucket_index_normal_layout::num_shards</a></div><div class="ttdeci">uint32_t num_shards</div><div class="ttdef"><b>Definition</b> <a href="rgw__bucket__layout_8h_source.html#l00046">rgw_bucket_layout.h:46</a></div></div>
<div class="ttc" id="astructrgw_1_1sal_1_1_bucket_1_1_list_params_html"><div class="ttname"><a href="structrgw_1_1sal_1_1_bucket_1_1_list_params.html">rgw::sal::Bucket::ListParams</a></div><div class="ttdoc">Parameters for a bucket list operation</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l00567">rgw_sal.h:567</a></div></div>
<div class="ttc" id="astructrgw_1_1sal_1_1_bucket_1_1_list_params_html_a000855edc6e4474b7f9a1ea943512779"><div class="ttname"><a href="structrgw_1_1sal_1_1_bucket_1_1_list_params.html#a000855edc6e4474b7f9a1ea943512779">rgw::sal::Bucket::ListParams::ns</a></div><div class="ttdeci">std::string ns</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l00572">rgw_sal.h:572</a></div></div>
<div class="ttc" id="astructrgw_1_1sal_1_1_bucket_1_1_list_params_html_a08be44ff4eb35ea5f14f6e6d92b32dc0"><div class="ttname"><a href="structrgw_1_1sal_1_1_bucket_1_1_list_params.html#a08be44ff4eb35ea5f14f6e6d92b32dc0">rgw::sal::Bucket::ListParams::force_check_filter</a></div><div class="ttdeci">RGWBucketListNameFilter force_check_filter</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l00575">rgw_sal.h:575</a></div></div>
<div class="ttc" id="astructrgw_1_1sal_1_1_bucket_1_1_list_params_html_a2872f62ae82d3087a2090b38a78c08a5"><div class="ttname"><a href="structrgw_1_1sal_1_1_bucket_1_1_list_params.html#a2872f62ae82d3087a2090b38a78c08a5">rgw::sal::Bucket::ListParams::shard_id</a></div><div class="ttdeci">int shard_id</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l00578">rgw_sal.h:578</a></div></div>
<div class="ttc" id="astructrgw_1_1sal_1_1_bucket_1_1_list_params_html_a2be1c75a1b6c45d966b295ba32cb5c50"><div class="ttname"><a href="structrgw_1_1sal_1_1_bucket_1_1_list_params.html#a2be1c75a1b6c45d966b295ba32cb5c50">rgw::sal::Bucket::ListParams::end_marker</a></div><div class="ttdeci">rgw_obj_key end_marker</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l00571">rgw_sal.h:571</a></div></div>
<div class="ttc" id="astructrgw_1_1sal_1_1_bucket_1_1_list_params_html_a2e087cec40a890b114cbc7c58c2507b0"><div class="ttname"><a href="structrgw_1_1sal_1_1_bucket_1_1_list_params.html#a2e087cec40a890b114cbc7c58c2507b0">rgw::sal::Bucket::ListParams::marker</a></div><div class="ttdeci">rgw_obj_key marker</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l00570">rgw_sal.h:570</a></div></div>
<div class="ttc" id="astructrgw_1_1sal_1_1_bucket_1_1_list_params_html_a3e5357a4fcc9044dc97ee55896d886ac"><div class="ttname"><a href="structrgw_1_1sal_1_1_bucket_1_1_list_params.html#a3e5357a4fcc9044dc97ee55896d886ac">rgw::sal::Bucket::ListParams::list_versions</a></div><div class="ttdeci">bool list_versions</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l00576">rgw_sal.h:576</a></div></div>
<div class="ttc" id="astructrgw_1_1sal_1_1_bucket_1_1_list_params_html_a6f6d8cc1c26ac1403bfcf8e2227caf75"><div class="ttname"><a href="structrgw_1_1sal_1_1_bucket_1_1_list_params.html#a6f6d8cc1c26ac1403bfcf8e2227caf75">rgw::sal::Bucket::ListParams::delim</a></div><div class="ttdeci">std::string delim</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l00569">rgw_sal.h:569</a></div></div>
<div class="ttc" id="astructrgw_1_1sal_1_1_bucket_1_1_list_params_html_a78317932ae255789bd3114d546bf7d78"><div class="ttname"><a href="structrgw_1_1sal_1_1_bucket_1_1_list_params.html#a78317932ae255789bd3114d546bf7d78">rgw::sal::Bucket::ListParams::allow_unordered</a></div><div class="ttdeci">bool allow_unordered</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l00577">rgw_sal.h:577</a></div></div>
<div class="ttc" id="astructrgw_1_1sal_1_1_bucket_1_1_list_params_html_ad987df8d3f2222af58e9694fbf59228f"><div class="ttname"><a href="structrgw_1_1sal_1_1_bucket_1_1_list_params.html#ad987df8d3f2222af58e9694fbf59228f">rgw::sal::Bucket::ListParams::access_list_filter</a></div><div class="ttdeci">RGWAccessListFilter * access_list_filter</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l00574">rgw_sal.h:574</a></div></div>
<div class="ttc" id="astructrgw_1_1sal_1_1_bucket_1_1_list_params_html_adb0883ba21530e4181ef90c7bfea71d4"><div class="ttname"><a href="structrgw_1_1sal_1_1_bucket_1_1_list_params.html#adb0883ba21530e4181ef90c7bfea71d4">rgw::sal::Bucket::ListParams::prefix</a></div><div class="ttdeci">std::string prefix</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l00568">rgw_sal.h:568</a></div></div>
<div class="ttc" id="astructrgw_1_1sal_1_1_bucket_1_1_list_params_html_aeff439ae8aa6d07d0057122ceca00a10"><div class="ttname"><a href="structrgw_1_1sal_1_1_bucket_1_1_list_params.html#aeff439ae8aa6d07d0057122ceca00a10">rgw::sal::Bucket::ListParams::enforce_ns</a></div><div class="ttdeci">bool enforce_ns</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l00573">rgw_sal.h:573</a></div></div>
<div class="ttc" id="astructrgw_1_1sal_1_1_bucket_1_1_list_results_html"><div class="ttname"><a href="structrgw_1_1sal_1_1_bucket_1_1_list_results.html">rgw::sal::Bucket::ListResults</a></div><div class="ttdoc">Results from a bucket list operation</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l00597">rgw_sal.h:597</a></div></div>
<div class="ttc" id="astructrgw_1_1sal_1_1_bucket_1_1_list_results_html_a28361e7dbca0d163d77a697b96aa90ba"><div class="ttname"><a href="structrgw_1_1sal_1_1_bucket_1_1_list_results.html#a28361e7dbca0d163d77a697b96aa90ba">rgw::sal::Bucket::ListResults::next_marker</a></div><div class="ttdeci">rgw_obj_key next_marker</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l00601">rgw_sal.h:601</a></div></div>
<div class="ttc" id="astructrgw_1_1sal_1_1_bucket_1_1_list_results_html_a5854f248119c759099381208956708f6"><div class="ttname"><a href="structrgw_1_1sal_1_1_bucket_1_1_list_results.html#a5854f248119c759099381208956708f6">rgw::sal::Bucket::ListResults::common_prefixes</a></div><div class="ttdeci">std::map&lt; std::string, bool &gt; common_prefixes</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l00599">rgw_sal.h:599</a></div></div>
<div class="ttc" id="astructrgw_1_1sal_1_1_bucket_1_1_list_results_html_a5b9a541d2f6fe22f99cbaa279c8d12e4"><div class="ttname"><a href="structrgw_1_1sal_1_1_bucket_1_1_list_results.html#a5b9a541d2f6fe22f99cbaa279c8d12e4">rgw::sal::Bucket::ListResults::is_truncated</a></div><div class="ttdeci">bool is_truncated</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l00600">rgw_sal.h:600</a></div></div>
<div class="ttc" id="astructrgw_1_1sal_1_1_bucket_1_1_list_results_html_ad2d05625f45090ae48961cca1ac235c1"><div class="ttname"><a href="structrgw_1_1sal_1_1_bucket_1_1_list_results.html#ad2d05625f45090ae48961cca1ac235c1">rgw::sal::Bucket::ListResults::objs</a></div><div class="ttdeci">std::vector&lt; rgw_bucket_dir_entry &gt; objs</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l00598">rgw_sal.h:598</a></div></div>
<div class="ttc" id="astructrgw_1_1sal_1_1_l_c_serializer_html"><div class="ttname"><a href="structrgw_1_1sal_1_1_l_c_serializer.html">rgw::sal::LCSerializer</a></div><div class="ttdoc">Abstraction of a serializer for Lifecycle</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l01281">rgw_sal.h:1281</a></div></div>
<div class="ttc" id="astructrgw_1_1sal_1_1_lifecycle_1_1_l_c_entry_html"><div class="ttname"><a href="structrgw_1_1sal_1_1_lifecycle_1_1_l_c_entry.html">rgw::sal::Lifecycle::LCEntry</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l01306">rgw_sal.h:1306</a></div></div>
<div class="ttc" id="astructrgw_1_1sal_1_1_lifecycle_1_1_l_c_entry_html_a3a7774d065b925783b71e2e2829a8606"><div class="ttname"><a href="structrgw_1_1sal_1_1_lifecycle_1_1_l_c_entry.html#a3a7774d065b925783b71e2e2829a8606">rgw::sal::Lifecycle::LCEntry::start_time</a></div><div class="ttdeci">uint64_t start_time</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l01308">rgw_sal.h:1308</a></div></div>
<div class="ttc" id="astructrgw_1_1sal_1_1_lifecycle_1_1_l_c_entry_html_ab967abd35523acb2a08ffdc772a27858"><div class="ttname"><a href="structrgw_1_1sal_1_1_lifecycle_1_1_l_c_entry.html#ab967abd35523acb2a08ffdc772a27858">rgw::sal::Lifecycle::LCEntry::status</a></div><div class="ttdeci">uint32_t status</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l01309">rgw_sal.h:1309</a></div></div>
<div class="ttc" id="astructrgw_1_1sal_1_1_lifecycle_1_1_l_c_entry_html_adf5aeebb89cb0317b441af21eee8cc33"><div class="ttname"><a href="structrgw_1_1sal_1_1_lifecycle_1_1_l_c_entry.html#adf5aeebb89cb0317b441af21eee8cc33">rgw::sal::Lifecycle::LCEntry::bucket</a></div><div class="ttdeci">std::string bucket</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l01307">rgw_sal.h:1307</a></div></div>
<div class="ttc" id="astructrgw_1_1sal_1_1_lifecycle_1_1_l_c_head_html"><div class="ttname"><a href="structrgw_1_1sal_1_1_lifecycle_1_1_l_c_head.html">rgw::sal::Lifecycle::LCHead</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l01296">rgw_sal.h:1296</a></div></div>
<div class="ttc" id="astructrgw_1_1sal_1_1_lifecycle_1_1_l_c_head_html_a1ae4eda32aa11fd3a2c0728a50db8893"><div class="ttname"><a href="structrgw_1_1sal_1_1_lifecycle_1_1_l_c_head.html#a1ae4eda32aa11fd3a2c0728a50db8893">rgw::sal::Lifecycle::LCHead::marker</a></div><div class="ttdeci">std::string marker</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l01298">rgw_sal.h:1298</a></div></div>
<div class="ttc" id="astructrgw_1_1sal_1_1_lifecycle_1_1_l_c_head_html_ad3ea7587a8a038d83ea0a7ca0d78b05f"><div class="ttname"><a href="structrgw_1_1sal_1_1_lifecycle_1_1_l_c_head.html#ad3ea7587a8a038d83ea0a7ca0d78b05f">rgw::sal::Lifecycle::LCHead::start_date</a></div><div class="ttdeci">time_t start_date</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l01297">rgw_sal.h:1297</a></div></div>
<div class="ttc" id="astructrgw_1_1sal_1_1_m_p_serializer_html"><div class="ttname"><a href="structrgw_1_1sal_1_1_m_p_serializer.html">rgw::sal::MPSerializer</a></div><div class="ttdoc">Abstraction of a serializer for multipart uploads</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l01268">rgw_sal.h:1268</a></div></div>
<div class="ttc" id="astructrgw_1_1sal_1_1_m_p_serializer_html_a54d801d5a1ba65072f1f36ebecbdce9d"><div class="ttname"><a href="structrgw_1_1sal_1_1_m_p_serializer.html#a54d801d5a1ba65072f1f36ebecbdce9d">rgw::sal::MPSerializer::locked</a></div><div class="ttdeci">bool locked</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l01269">rgw_sal.h:1269</a></div></div>
<div class="ttc" id="astructrgw_1_1sal_1_1_m_p_serializer_html_adfe8ce35adef02e1a82c5baba8221a22"><div class="ttname"><a href="structrgw_1_1sal_1_1_m_p_serializer.html#adfe8ce35adef02e1a82c5baba8221a22">rgw::sal::MPSerializer::oid</a></div><div class="ttdeci">std::string oid</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal_8h_source.html#l01270">rgw_sal.h:1270</a></div></div>
<div class="ttc" id="astructrgw_1_1sal_1_1_r_g_w_role_info_html"><div class="ttname"><a href="structrgw_1_1sal_1_1_r_g_w_role_info.html">rgw::sal::RGWRoleInfo</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__role_8h_source.html#l00019">rgw_role.h:20</a></div></div>
<div class="ttc" id="astructrgw_1_1sal_1_1_r_g_w_role_info_html_a0ea7af21113bf1f45814c53f426d7cd2"><div class="ttname"><a href="structrgw_1_1sal_1_1_r_g_w_role_info.html#a0ea7af21113bf1f45814c53f426d7cd2">rgw::sal::RGWRoleInfo::arn</a></div><div class="ttdeci">std::string arn</div><div class="ttdef"><b>Definition</b> <a href="rgw__role_8h_source.html#l00024">rgw_role.h:24</a></div></div>
<div class="ttc" id="astructrgw_1_1sal_1_1_r_g_w_role_info_html_a36c157c787d99d9d96d1c688f215c7ea"><div class="ttname"><a href="structrgw_1_1sal_1_1_r_g_w_role_info.html#a36c157c787d99d9d96d1c688f215c7ea">rgw::sal::RGWRoleInfo::creation_date</a></div><div class="ttdeci">std::string creation_date</div><div class="ttdef"><b>Definition</b> <a href="rgw__role_8h_source.html#l00025">rgw_role.h:25</a></div></div>
<div class="ttc" id="astructrgw_1_1sal_1_1_r_g_w_role_info_html_a41cae49f92809b7e2c39900b8d94b11f"><div class="ttname"><a href="structrgw_1_1sal_1_1_r_g_w_role_info.html#a41cae49f92809b7e2c39900b8d94b11f">rgw::sal::RGWRoleInfo::tags</a></div><div class="ttdeci">std::multimap&lt; std::string, std::string &gt; tags</div><div class="ttdef"><b>Definition</b> <a href="rgw__role_8h_source.html#l00030">rgw_role.h:30</a></div></div>
<div class="ttc" id="astructrgw_1_1sal_1_1_r_g_w_role_info_html_a599dc24a677d2d9d254e57b29fb397b2"><div class="ttname"><a href="structrgw_1_1sal_1_1_r_g_w_role_info.html#a599dc24a677d2d9d254e57b29fb397b2">rgw::sal::RGWRoleInfo::name</a></div><div class="ttdeci">std::string name</div><div class="ttdef"><b>Definition</b> <a href="rgw__role_8h_source.html#l00022">rgw_role.h:22</a></div></div>
<div class="ttc" id="astructrgw_1_1sal_1_1_r_g_w_role_info_html_a7dce766079795c8ef5fcbc8f259b8233"><div class="ttname"><a href="structrgw_1_1sal_1_1_r_g_w_role_info.html#a7dce766079795c8ef5fcbc8f259b8233">rgw::sal::RGWRoleInfo::attrs</a></div><div class="ttdeci">std::map&lt; std::string, bufferlist &gt; attrs</div><div class="ttdef"><b>Definition</b> <a href="rgw__role_8h_source.html#l00031">rgw_role.h:31</a></div></div>
<div class="ttc" id="astructrgw_1_1sal_1_1_r_g_w_role_info_html_a85618d6552f7c1ed9bddd6105c10e0f3"><div class="ttname"><a href="structrgw_1_1sal_1_1_r_g_w_role_info.html#a85618d6552f7c1ed9bddd6105c10e0f3">rgw::sal::RGWRoleInfo::tenant</a></div><div class="ttdeci">std::string tenant</div><div class="ttdef"><b>Definition</b> <a href="rgw__role_8h_source.html#l00028">rgw_role.h:28</a></div></div>
<div class="ttc" id="astructrgw_1_1sal_1_1_r_g_w_role_info_html_a888c30d3016a0f9186d85e37e12f9c0b"><div class="ttname"><a href="structrgw_1_1sal_1_1_r_g_w_role_info.html#a888c30d3016a0f9186d85e37e12f9c0b">rgw::sal::RGWRoleInfo::objv_tracker</a></div><div class="ttdeci">RGWObjVersionTracker objv_tracker</div><div class="ttdef"><b>Definition</b> <a href="rgw__role_8h_source.html#l00032">rgw_role.h:32</a></div></div>
<div class="ttc" id="astructrgw_1_1sal_1_1_r_g_w_role_info_html_ab164a36c4bb8d26f3110d43b8db6bdc5"><div class="ttname"><a href="structrgw_1_1sal_1_1_r_g_w_role_info.html#ab164a36c4bb8d26f3110d43b8db6bdc5">rgw::sal::RGWRoleInfo::path</a></div><div class="ttdeci">std::string path</div><div class="ttdef"><b>Definition</b> <a href="rgw__role_8h_source.html#l00023">rgw_role.h:23</a></div></div>
<div class="ttc" id="astructrgw_1_1sal_1_1_r_g_w_role_info_html_aca22a6cf458ec11543a7695d64ed36e5"><div class="ttname"><a href="structrgw_1_1sal_1_1_r_g_w_role_info.html#aca22a6cf458ec11543a7695d64ed36e5">rgw::sal::RGWRoleInfo::mtime</a></div><div class="ttdeci">real_time mtime</div><div class="ttdef"><b>Definition</b> <a href="rgw__role_8h_source.html#l00033">rgw_role.h:33</a></div></div>
<div class="ttc" id="astructrgw_1_1sal_1_1_r_g_w_role_info_html_ad44100f5b43e8a26c3c1723573a92afa"><div class="ttname"><a href="structrgw_1_1sal_1_1_r_g_w_role_info.html#ad44100f5b43e8a26c3c1723573a92afa">rgw::sal::RGWRoleInfo::perm_policy_map</a></div><div class="ttdeci">std::map&lt; std::string, std::string &gt; perm_policy_map</div><div class="ttdef"><b>Definition</b> <a href="rgw__role_8h_source.html#l00027">rgw_role.h:27</a></div></div>
<div class="ttc" id="astructrgw_1_1sal_1_1_r_g_w_role_info_html_ad8282aca283d5fa8b28744948dac32bf"><div class="ttname"><a href="structrgw_1_1sal_1_1_r_g_w_role_info.html#ad8282aca283d5fa8b28744948dac32bf">rgw::sal::RGWRoleInfo::id</a></div><div class="ttdeci">std::string id</div><div class="ttdef"><b>Definition</b> <a href="rgw__role_8h_source.html#l00021">rgw_role.h:21</a></div></div>
<div class="ttc" id="astructrgw_1_1sal_1_1_rados_object_1_1_rados_delete_op_html_ae18997c8a63a13e239e123ad8e2a95e3"><div class="ttname"><a href="structrgw_1_1sal_1_1_rados_object_1_1_rados_delete_op.html#ae18997c8a63a13e239e123ad8e2a95e3">rgw::sal::RadosObject::RadosDeleteOp::RadosDeleteOp</a></div><div class="ttdeci">RadosDeleteOp(RadosObject *_source, RGWObjectCtx *_rctx)</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01910">rgw_sal_rados.cc:1910</a></div></div>
<div class="ttc" id="astructrgw_1_1sal_1_1_rados_object_1_1_rados_delete_op_html_afb44172fe0a5e9b6eb22f9e491ddcadc"><div class="ttname"><a href="structrgw_1_1sal_1_1_rados_object_1_1_rados_delete_op.html#afb44172fe0a5e9b6eb22f9e491ddcadc">rgw::sal::RadosObject::RadosDeleteOp::delete_obj</a></div><div class="ttdeci">virtual int delete_obj(const DoutPrefixProvider *dpp, optional_yield y) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01920">rgw_sal_rados.cc:1920</a></div></div>
<div class="ttc" id="astructrgw_1_1sal_1_1_rados_object_1_1_rados_read_op_html_a17c735dde1c89eb1d6b3f5ae5c6eb860"><div class="ttname"><a href="structrgw_1_1sal_1_1_rados_object_1_1_rados_read_op.html#a17c735dde1c89eb1d6b3f5ae5c6eb860">rgw::sal::RadosObject::RadosReadOp::RadosReadOp</a></div><div class="ttdeci">RadosReadOp(RadosObject *_source, RGWObjectCtx *_rctx)</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01859">rgw_sal_rados.cc:1859</a></div></div>
<div class="ttc" id="astructrgw_1_1sal_1_1_rados_object_1_1_rados_read_op_html_a474cf439bedb33da6f4a721782992257"><div class="ttname"><a href="structrgw_1_1sal_1_1_rados_object_1_1_rados_read_op.html#a474cf439bedb33da6f4a721782992257">rgw::sal::RadosObject::RadosReadOp::get_attr</a></div><div class="ttdeci">virtual int get_attr(const DoutPrefixProvider *dpp, const char *name, bufferlist &amp;dest, optional_yield y) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01900">rgw_sal_rados.cc:1900</a></div></div>
<div class="ttc" id="astructrgw_1_1sal_1_1_rados_object_1_1_rados_read_op_html_a5f94ffe68a375a85749965c1ec86abe9"><div class="ttname"><a href="structrgw_1_1sal_1_1_rados_object_1_1_rados_read_op.html#a5f94ffe68a375a85749965c1ec86abe9">rgw::sal::RadosObject::RadosReadOp::iterate</a></div><div class="ttdeci">virtual int iterate(const DoutPrefixProvider *dpp, int64_t ofs, int64_t end, RGWGetDataCB *cb, optional_yield y) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l02031">rgw_sal_rados.cc:2031</a></div></div>
<div class="ttc" id="astructrgw_1_1sal_1_1_rados_object_1_1_rados_read_op_html_a662f822335997cf48fc3ba2a16248705"><div class="ttname"><a href="structrgw_1_1sal_1_1_rados_object_1_1_rados_read_op.html#a662f822335997cf48fc3ba2a16248705">rgw::sal::RadosObject::RadosReadOp::prepare</a></div><div class="ttdeci">virtual int prepare(optional_yield y, const DoutPrefixProvider *dpp) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01869">rgw_sal_rados.cc:1869</a></div></div>
<div class="ttc" id="astructrgw_1_1sal_1_1_rados_object_1_1_rados_read_op_html_ab3869c9e52d8474eda4d641c8268f594"><div class="ttname"><a href="structrgw_1_1sal_1_1_rados_object_1_1_rados_read_op.html#ab3869c9e52d8474eda4d641c8268f594">rgw::sal::RadosObject::RadosReadOp::read</a></div><div class="ttdeci">virtual int read(int64_t ofs, int64_t end, bufferlist &amp;bl, optional_yield y, const DoutPrefixProvider *dpp) override</div><div class="ttdef"><b>Definition</b> <a href="rgw__sal__rados_8cc_source.html#l01895">rgw_sal_rados.cc:1895</a></div></div>
<div class="ttc" id="astructrgw__bucket_html"><div class="ttname"><a href="structrgw__bucket.html">rgw_bucket</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__basic__types_8h_source.html#l00289">rgw_basic_types.h:289</a></div></div>
<div class="ttc" id="astructrgw__bucket_html_a32d3529f5b0c53051c856a7abe867a6b"><div class="ttname"><a href="structrgw__bucket.html#a32d3529f5b0c53051c856a7abe867a6b">rgw_bucket::name</a></div><div class="ttdeci">std::string name</div><div class="ttdef"><b>Definition</b> <a href="rgw__basic__types_8h_source.html#l00291">rgw_basic_types.h:291</a></div></div>
<div class="ttc" id="astructrgw__bucket_html_ac2d65e02c9242ad2ea2ad31da15d8836"><div class="ttname"><a href="structrgw__bucket.html#ac2d65e02c9242ad2ea2ad31da15d8836">rgw_bucket::tenant</a></div><div class="ttdeci">std::string tenant</div><div class="ttdef"><b>Definition</b> <a href="rgw__basic__types_8h_source.html#l00290">rgw_basic_types.h:290</a></div></div>
<div class="ttc" id="astructrgw__bucket_html_adaba18504e183a1e80d861533a81c2a1"><div class="ttname"><a href="structrgw__bucket.html#adaba18504e183a1e80d861533a81c2a1">rgw_bucket::bucket_id</a></div><div class="ttdeci">std::string bucket_id</div><div class="ttdef"><b>Definition</b> <a href="rgw__basic__types_8h_source.html#l00293">rgw_basic_types.h:293</a></div></div>
<div class="ttc" id="astructrgw__ep__info_html"><div class="ttname"><a href="structrgw__ep__info.html">rgw_ep_info</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__bucket_8h_source.html#l00417">rgw_bucket.h:417</a></div></div>
<div class="ttc" id="astructrgw__obj__key_html"><div class="ttname"><a href="structrgw__obj__key.html">rgw_obj_key</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l01248">rgw_common.h:1248</a></div></div>
<div class="ttc" id="astructrgw__obj__key_html_a009cbe657bf6a001d40af0a80e533186"><div class="ttname"><a href="structrgw__obj__key.html#a009cbe657bf6a001d40af0a80e533186">rgw_obj_key::name</a></div><div class="ttdeci">std::string name</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l01249">rgw_common.h:1249</a></div></div>
<div class="ttc" id="astructrgw__obj__key_html_a25f11d321b80d9c0fa03d2358d261dd4"><div class="ttname"><a href="structrgw__obj__key.html#a25f11d321b80d9c0fa03d2358d261dd4">rgw_obj_key::get_index_key</a></div><div class="ttdeci">void get_index_key(rgw_obj_index_key *key) const</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l01342">rgw_common.h:1342</a></div></div>
<div class="ttc" id="astructrgw__obj_html"><div class="ttname"><a href="structrgw__obj.html">rgw_obj</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l01802">rgw_common.h:1802</a></div></div>
<div class="ttc" id="astructrgw__obj_html_a72f701ee22f8eb3f3868d0aefb581249"><div class="ttname"><a href="structrgw__obj.html#a72f701ee22f8eb3f3868d0aefb581249">rgw_obj::key</a></div><div class="ttdeci">rgw_obj_key key</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l01804">rgw_common.h:1804</a></div></div>
<div class="ttc" id="astructrgw__obj_html_ace6f013fe28b634ee9e4257c728ffb12"><div class="ttname"><a href="structrgw__obj.html#ace6f013fe28b634ee9e4257c728ffb12">rgw_obj::init_ns</a></div><div class="ttdeci">void init_ns(const rgw_bucket &amp;b, const std::string &amp;name, const std::string &amp;n)</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l01824">rgw_common.h:1824</a></div></div>
<div class="ttc" id="astructrgw__placement__rule_html"><div class="ttname"><a href="structrgw__placement__rule.html">rgw_placement_rule</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l00588">rgw_common.h:588</a></div></div>
<div class="ttc" id="astructrgw__placement__rule_html_ac4f9d1b094edc44fd7d9b3e32c1cf9d0"><div class="ttname"><a href="structrgw__placement__rule.html#ac4f9d1b094edc44fd7d9b3e32c1cf9d0">rgw_placement_rule::inherit_from</a></div><div class="ttdeci">void inherit_from(const rgw_placement_rule &amp;r)</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l00606">rgw_common.h:606</a></div></div>
<div class="ttc" id="astructrgw__pool_html"><div class="ttname"><a href="structrgw__pool.html">rgw_pool</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__basic__types_8h_source.html#l00146">rgw_basic_types.h:146</a></div></div>
<div class="ttc" id="astructrgw__raw__obj_html"><div class="ttname"><a href="structrgw__raw__obj.html">rgw_raw_obj</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l00922">rgw_common.h:922</a></div></div>
<div class="ttc" id="astructrgw__raw__obj_html_a12e975f08450bf428fedb357f4ac8445"><div class="ttname"><a href="structrgw__raw__obj.html#a12e975f08450bf428fedb357f4ac8445">rgw_raw_obj::pool</a></div><div class="ttdeci">rgw_pool pool</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l00923">rgw_common.h:923</a></div></div>
<div class="ttc" id="astructrgw__raw__obj_html_a9c0fa84426035c85585d240c56a65d82"><div class="ttname"><a href="structrgw__raw__obj.html#a9c0fa84426035c85585d240c56a65d82">rgw_raw_obj::oid</a></div><div class="ttdeci">std::string oid</div><div class="ttdef"><b>Definition</b> <a href="rgw__common_8h_source.html#l00924">rgw_common.h:924</a></div></div>
<div class="ttc" id="astructrgw__user_html"><div class="ttname"><a href="structrgw__user.html">rgw_user</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__basic__types_8h_source.html#l00014">rgw_basic_types.h:14</a></div></div>
<div class="ttc" id="astructrgw__user_html_a2bf13ba0bf6b95ba5a0832e2ba1370e0"><div class="ttname"><a href="structrgw__user.html#a2bf13ba0bf6b95ba5a0832e2ba1370e0">rgw_user::tenant</a></div><div class="ttdeci">std::string tenant</div><div class="ttdef"><b>Definition</b> <a href="rgw__basic__types_8h_source.html#l00015">rgw_basic_types.h:15</a></div></div>
<div class="ttc" id="astructrgw__user_html_adbd66e1d8720fb60fb3db16c9dd571a5"><div class="ttname"><a href="structrgw__user.html#adbd66e1d8720fb60fb3db16c9dd571a5">rgw_user::compare</a></div><div class="ttdeci">int compare(const rgw_user &amp;u) const</div><div class="ttdef"><b>Definition</b> <a href="rgw__basic__types_8h_source.html#l00107">rgw_basic_types.h:107</a></div></div>
<div class="ttc" id="astructrgw__user_html_af00f510d6a9ff0580d87ee46b274d96e"><div class="ttname"><a href="structrgw__user.html#af00f510d6a9ff0580d87ee46b274d96e">rgw_user::to_str</a></div><div class="ttdeci">void to_str(std::string &amp;str) const</div><div class="ttdef"><b>Definition</b> <a href="rgw__basic__types_8h_source.html#l00051">rgw_basic_types.h:51</a></div></div>
<div class="ttc" id="astructrgw__zone__id_html"><div class="ttname"><a href="structrgw__zone__id.html">rgw_zone_id</a></div><div class="ttdef"><b>Definition</b> <a href="rgw__basic__types_8h_source.html#l00465">rgw_basic_types.h:465</a></div></div>
<div class="ttc" id="asvc__config__key_8h_html"><div class="ttname"><a href="svc__config__key_8h.html">svc_config_key.h</a></div></div>
<div class="ttc" id="asvc__meta_8h_html"><div class="ttname"><a href="svc__meta_8h.html">svc_meta.h</a></div></div>
<div class="ttc" id="asvc__meta__be__params_8h_html_abc98af04ff01fda972f9a82bcb22e535"><div class="ttname"><a href="svc__meta__be__params_8h.html#abc98af04ff01fda972f9a82bcb22e535">RGWSI_MetaBackend_CtxParams</a></div><div class="ttdeci">std::variant&lt; RGWSI_MetaBackend_CtxParams_SObj &gt; RGWSI_MetaBackend_CtxParams</div><div class="ttdef"><b>Definition</b> <a href="svc__meta__be__params_8h_source.html#l00032">svc_meta_be_params.h:32</a></div></div>
<div class="ttc" id="asvc__meta__be__sobj_8h_html"><div class="ttname"><a href="svc__meta__be__sobj_8h.html">svc_meta_be_sobj.h</a></div></div>
<div class="ttc" id="asvc__quota_8h_html"><div class="ttname"><a href="svc__quota_8h.html">svc_quota.h</a></div></div>
<div class="ttc" id="asvc__role__rados_8h_html"><div class="ttname"><a href="svc__role__rados_8h.html">svc_role_rados.h</a></div></div>
<div class="ttc" id="asvc__sys__obj_8h_html"><div class="ttname"><a href="svc__sys__obj_8h.html">svc_sys_obj.h</a></div></div>
<div class="ttc" id="asvc__tier__rados_8h_html"><div class="ttname"><a href="svc__tier__rados_8h.html">svc_tier_rados.h</a></div></div>
<div class="ttc" id="asvc__zone_8h_html"><div class="ttname"><a href="svc__zone_8h.html">svc_zone.h</a></div></div>
<div class="ttc" id="asvc__zone__utils_8h_html"><div class="ttname"><a href="svc__zone__utils_8h.html">svc_zone_utils.h</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_275089585c7fc1b5fd5d7d42c69cb1da.html">D:</a></li><li class="navelem"><a class="el" href="dir_e050007e69745d5ed950ce16eed8ed32.html">git</a></li><li class="navelem"><a class="el" href="dir_6892619f22dbda2b625e50c3cfe72b21.html">ceph</a></li><li class="navelem"><a class="el" href="dir_07a1996344d62ceb57ddf5fb87d6faf4.html">src</a></li><li class="navelem"><a class="el" href="dir_ddd8fa4b54862d6407f5aaf9a827e64e.html">rgw</a></li><li class="navelem"><a class="el" href="rgw__sal__rados_8cc.html">rgw_sal_rados.cc</a></li>
    <li class="footer">다음에 의해 생성됨 :  <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
